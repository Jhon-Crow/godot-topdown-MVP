[20:15:02] [INFO] ============================================================
[20:15:02] [INFO] GAME LOG STARTED
[20:15:02] [INFO] ============================================================
[20:15:02] [INFO] Timestamp: 2026-02-07T20:15:02
[20:15:02] [INFO] Log file: I:/Загрузки/godot exe/пм/game_log_20260207_201502.txt
[20:15:02] [INFO] Executable: I:/Загрузки/godot exe/пм/Godot-Top-Down-Template.exe
[20:15:02] [INFO] OS: Windows
[20:15:02] [INFO] Debug build: false
[20:15:02] [INFO] Engine version: 4.3-stable (official)
[20:15:02] [INFO] Project: Godot Top-Down Template
[20:15:02] [INFO] ------------------------------------------------------------
[20:15:02] [INFO] [GameManager] GameManager ready
[20:15:02] [INFO] [ScoreManager] ScoreManager ready
[20:15:02] [INFO] [SoundPropagation] SoundPropagation autoload initialized
[20:15:02] [INFO] [ImpactEffects] Scenes loaded: DustEffect, BloodEffect, SparksEffect, BloodDecal
[20:15:02] [INFO] [ImpactEffects] ImpactEffectsManager ready - FULL VERSION with blood effects enabled
[20:15:02] [INFO] [ImpactEffects] Starting particle shader warmup (Issue #343 fix)...
[20:15:02] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:15:02] [INFO] [PenultimateHit] Saturation shader loaded successfully
[20:15:02] [INFO] [PenultimateHit] Starting shader warmup (Issue #343 fix)...
[20:15:02] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
[20:15:02] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
[20:15:02] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
[20:15:02] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
[20:15:02] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
[20:15:02] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:15:02] [INFO] [LastChance] Last chance shader loaded successfully
[20:15:02] [INFO] [LastChance] Starting shader warmup (Issue #343 fix)...
[20:15:02] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
[20:15:02] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
[20:15:02] [INFO] [LastChance]   Sepia intensity: 0.70
[20:15:02] [INFO] [LastChance]   Brightness: 0.60
[20:15:02] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
[20:15:02] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
[20:15:02] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/DefensiveGrenade.tscn
[20:15:02] [INFO] [ExperimentalSettings] ExperimentalSettings initialized - FOV: true, Complex grenades: false, AI prediction: true, Debug: true, Invincibility: false, Realistic visibility: false
[20:15:02] [INFO] [CinemaEffects] CinemaEffectsManager initializing (v5.3 - overlay approach with simplified death circle)...
[20:15:02] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:15:02] [INFO] [CinemaEffects] Created effects layer at layer 99
[20:15:03] [INFO] [CinemaEffects] Cinema shader loaded successfully (v5.0 - no screen_texture)
[20:15:03] [INFO] [CinemaEffects] Starting cinema shader warmup (Issue #343 fix)...
[20:15:03] [INFO] [CinemaEffects] Cinema film effect initialized (v5.3) - Configuration:
[20:15:03] [INFO] [CinemaEffects]   Approach: Overlay-based (no screen_texture)
[20:15:03] [INFO] [CinemaEffects]   Grain intensity: 0.15
[20:15:03] [INFO] [CinemaEffects]   Warm tint: 0.12 intensity
[20:15:03] [INFO] [CinemaEffects]   Sunny effect: 0.08 intensity
[20:15:03] [INFO] [CinemaEffects]   Vignette: 0.25 intensity
[20:15:03] [INFO] [CinemaEffects]   Film defects: 1.5% probability
[20:15:03] [INFO] [CinemaEffects]   White specks: 0.70 intensity, 4.0% probability
[20:15:03] [INFO] [CinemaEffects]   Death effects: cigarette burn + expanding spots + end of reel circle (160px, blinks 2x)
[20:15:03] [INFO] [CinemaEffects] Enabling effect after 1 frame(s)...
[20:15:03] [INFO] [GrenadeTimerHelper] Autoload ready
[20:15:03] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:15:03] [INFO] [PowerFantasy] Saturation shader loaded successfully
[20:15:03] [INFO] [PowerFantasy] PowerFantasyEffectsManager ready - Configuration:
[20:15:03] [INFO] [PowerFantasy]   Kill effect duration: 300ms
[20:15:03] [INFO] [PowerFantasy]   Grenade effect duration: 2000ms (2.0s)
[20:15:03] [INFO] [ProgressManager] ProgressManager ready, loaded 4 entries
[20:15:03] [INFO] [ReplayManager] ReplayManager ready (C# version loaded and _Ready called)
[20:15:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:03] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:15:03] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:15:03] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:15:03] [ENEMY] [Enemy1] Death animation component initialized
[20:15:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:03] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:15:03] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:15:03] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:15:03] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:03] [ENEMY] [Enemy2] Death animation component initialized
[20:15:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:03] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:15:03] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:15:03] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:15:03] [ENEMY] [Enemy3] Death animation component initialized
[20:15:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:03] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:15:03] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:15:03] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:15:03] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:03] [ENEMY] [Enemy4] Death animation component initialized
[20:15:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:03] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:15:03] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:15:03] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:15:03] [ENEMY] [Enemy5] Death animation component initialized
[20:15:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:03] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:15:03] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:15:03] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:15:03] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:03] [ENEMY] [Enemy6] Death animation component initialized
[20:15:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:03] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:15:03] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:15:03] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:15:03] [ENEMY] [Enemy7] Death animation component initialized
[20:15:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:03] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:15:03] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:15:03] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:15:03] [ENEMY] [Enemy8] Death animation component initialized
[20:15:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:03] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:15:03] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:15:03] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:15:03] [ENEMY] [Enemy9] Death animation component initialized
[20:15:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:03] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:15:03] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:15:03] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:15:03] [ENEMY] [Enemy10] Death animation component initialized
[20:15:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:03] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:15:03] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:15:03] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:15:03] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:15:03] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:15:03] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:15:03] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:15:03] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:15:03] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:15:03] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:15:03] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:15:03] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:15:03] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 4/4
[20:15:03] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:15:03] [INFO] [BloodDecal] Blood puddle created at (640, 360) (added to group)
[20:15:03] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:15:03] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:15:03] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:15:03] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:15:03] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:15:03] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:15:03] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:15:03] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:15:03] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:15:03] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:15:03] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:15:03] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:15:03] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:15:03] [INFO] [ScoreManager] Level started with 10 enemies
[20:15:03] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:15:03] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:15:03] [INFO] [ReplayManager] Replay data cleared
[20:15:03] [INFO] [BuildingLevel] Previous replay data cleared
[20:15:03] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:15:03] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:15:03] [INFO] [ReplayManager] Level: BuildingLevel
[20:15:03] [INFO] [ReplayManager] Player: Player (valid: True)
[20:15:03] [INFO] [ReplayManager] Enemies count: 10
[20:15:03] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:15:03] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:15:03] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:15:03] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:15:03] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:15:03] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:15:03] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:15:03] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:15:03] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:15:03] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:15:03] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:15:03] [INFO] [BuildingLevel] Replay recording started successfully
[20:15:03] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:15:03] [INFO] [CinemaEffects] Found player node: Player
[20:15:03] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:15:03] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:15:03] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
[20:15:03] [ENEMY] [Enemy1] Registered as sound listener
[20:15:03] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[20:15:03] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:15:03] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
[20:15:03] [ENEMY] [Enemy2] Registered as sound listener
[20:15:03] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[20:15:03] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:15:03] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
[20:15:03] [ENEMY] [Enemy3] Registered as sound listener
[20:15:03] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[20:15:03] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:15:03] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
[20:15:03] [ENEMY] [Enemy4] Registered as sound listener
[20:15:03] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[20:15:03] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:15:03] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
[20:15:03] [ENEMY] [Enemy5] Registered as sound listener
[20:15:03] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[20:15:03] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:15:03] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
[20:15:03] [ENEMY] [Enemy6] Registered as sound listener
[20:15:03] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[20:15:03] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:15:03] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
[20:15:03] [ENEMY] [Enemy7] Registered as sound listener
[20:15:03] [ENEMY] [Enemy7] Spawned at (1606.114, 893.8859), hp: 3, behavior: PATROL
[20:15:03] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:15:03] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
[20:15:03] [ENEMY] [Enemy8] Registered as sound listener
[20:15:03] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[20:15:03] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:15:03] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
[20:15:03] [ENEMY] [Enemy9] Registered as sound listener
[20:15:03] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[20:15:03] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:15:03] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
[20:15:03] [ENEMY] [Enemy10] Registered as sound listener
[20:15:03] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[20:15:03] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:15:03] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:03] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:03] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:03] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:03] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:03] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=225.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:03] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:03] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:03] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:15:03] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:15:03] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:15:03] [INFO] [PenultimateHit] Shader warmup complete in 472 ms
[20:15:03] [INFO] [LastChance] Shader warmup complete in 470 ms
[20:15:03] [INFO] [CinemaEffects] Cinema shader warmup complete in 414 ms
[20:15:03] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:15:03] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:15:03] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:15:03] [INFO] [LastChance] Found player: Player
[20:15:03] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:15:03] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:15:03] [INFO] [LastChance] Connected to player Died signal (C#)
[20:15:03] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:15:03] [INFO] [ImpactEffects] Particle shader warmup complete: 7 effects warmed up in 778 ms
[20:15:04] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:15:04] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:15:04] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:15:04] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1250), corner_timer=0.30
[20:15:04] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1250), corner_timer=0.30
[20:15:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 1256), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:15:05] [ENEMY] [Enemy4] Heard gunshot at (460, 1256), source_type=0, intensity=0.01, distance=492
[20:15:05] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
[20:15:05] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=135.0°, current=-101.3°, player=(450,1250), corner_timer=0.00
[20:15:05] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,1250), corner_timer=-0.02
[20:15:05] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:15:05] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,1250), corner_timer=-0.02
[20:15:05] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:15:05] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,1250), corner_timer=0.30
[20:15:05] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,1250), corner_timer=0.30
[20:15:05] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:15:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(694.8868, 961.8645), source=ENEMY (Enemy4), range=1469, listeners=10
[20:15:05] [ENEMY] [Enemy3] Heard gunshot at (694.8868, 961.8645), source_type=1, intensity=0.06, distance=212
[20:15:05] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
[20:15:05] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=116.6°, current=123.7°, player=(450,1250), corner_timer=0.00
[20:15:05] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[20:15:05] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,1250), corner_timer=-0.02
[20:15:05] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[20:15:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(689.9634, 1029.7346), shooter_id=53435434636, bullet_pos=(622.6628, 1398.6456)
[20:15:05] [INFO] [Bullet] Using shooter_position, distance=374,9996
[20:15:05] [INFO] [Bullet] Distance to wall: 374,9996 (25,534412% of viewport)
[20:15:05] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:05] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,1250), corner_timer=0.30
[20:15:05] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
[20:15:05] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[20:15:05] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[20:15:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(460, 1256), shooter_id=56438556479, bullet_pos=(1364.575, 1023.412)
[20:15:05] [INFO] [Bullet] Using shooter_position, distance=933.998840332031
[20:15:05] [INFO] [Bullet] Distance to wall: 933.998840332031 (63.5976985106325% of viewport)
[20:15:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(460, 1256), shooter_id=56438556479, bullet_pos=(1369.554, 1023.872)
[20:15:05] [INFO] [Bullet] Using shooter_position, distance=938.707702636719
[20:15:05] [INFO] [Bullet] Distance to wall: 938.707702636719 (63.918333603793% of viewport)
[20:15:05] [INFO] [Bullet] Distance-based penetration chance: 72.0952774622416%
[20:15:05] [INFO] [Bullet] Penetration failed (distance roll)
[20:15:05] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,1250), corner_timer=-0.02
[20:15:05] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[20:15:06] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,1250), corner_timer=0.30
[20:15:06] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[20:15:06] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(450,1250), corner_timer=-0.02
[20:15:06] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[20:15:06] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(450,1250), corner_timer=0.30
[20:15:06] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:06] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:06] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:15:06] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:15:06] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:15:06] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:06] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:15:06] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:15:06] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:15:06] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:15:06] [ENEMY] [Enemy1] Death animation component initialized
[20:15:06] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:06] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:15:06] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:15:06] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:15:06] [ENEMY] [Enemy2] Death animation component initialized
[20:15:06] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:06] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:15:06] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:15:06] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:15:06] [ENEMY] [Enemy3] Death animation component initialized
[20:15:06] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:06] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:15:06] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:15:06] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:15:06] [ENEMY] [Enemy4] Death animation component initialized
[20:15:06] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:06] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:15:06] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:15:06] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:15:06] [ENEMY] [Enemy5] Death animation component initialized
[20:15:06] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:06] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:15:06] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:15:06] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:15:06] [ENEMY] [Enemy6] Death animation component initialized
[20:15:06] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:06] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:15:06] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:15:06] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:15:06] [ENEMY] [Enemy7] Death animation component initialized
[20:15:06] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:06] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:15:06] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:15:06] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:15:06] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:06] [ENEMY] [Enemy8] Death animation component initialized
[20:15:06] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:06] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:15:06] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:15:06] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:15:06] [ENEMY] [Enemy9] Death animation component initialized
[20:15:06] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:06] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:15:06] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:15:06] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:15:06] [ENEMY] [Enemy10] Death animation component initialized
[20:15:06] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:06] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:15:06] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:15:06] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:15:06] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:15:06] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:15:06] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:15:06] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:15:06] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:15:06] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:15:06] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:15:06] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:15:06] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:15:06] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 2/4
[20:15:06] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:15:06] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:15:06] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:15:06] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:15:06] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:15:06] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:15:06] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:15:06] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:15:06] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:15:06] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:15:06] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:15:06] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:15:06] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:15:06] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:15:06] [INFO] [ScoreManager] Level started with 10 enemies
[20:15:06] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:15:06] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:15:06] [INFO] [ReplayManager] Replay data cleared
[20:15:06] [INFO] [BuildingLevel] Previous replay data cleared
[20:15:06] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:15:06] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:15:06] [INFO] [ReplayManager] Level: BuildingLevel
[20:15:06] [INFO] [ReplayManager] Player: Player (valid: True)
[20:15:06] [INFO] [ReplayManager] Enemies count: 10
[20:15:06] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:15:06] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:15:06] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:15:06] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:15:06] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:15:06] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:15:06] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:15:06] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:15:06] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:15:06] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:15:06] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:15:06] [INFO] [BuildingLevel] Replay recording started successfully
[20:15:06] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:15:06] [INFO] [CinemaEffects] Found player node: Player
[20:15:06] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:15:06] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:15:06] [ENEMY] [Enemy1] Registered as sound listener
[20:15:06] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[20:15:06] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:15:06] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:15:06] [ENEMY] [Enemy2] Registered as sound listener
[20:15:06] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[20:15:06] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:15:06] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:15:06] [ENEMY] [Enemy3] Registered as sound listener
[20:15:06] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[20:15:06] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:15:06] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:15:06] [ENEMY] [Enemy4] Registered as sound listener
[20:15:06] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[20:15:06] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:15:06] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:15:06] [ENEMY] [Enemy5] Registered as sound listener
[20:15:06] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[20:15:06] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:15:06] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:15:06] [ENEMY] [Enemy6] Registered as sound listener
[20:15:06] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[20:15:06] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:15:06] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:15:06] [ENEMY] [Enemy7] Registered as sound listener
[20:15:06] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[20:15:06] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:15:06] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:15:06] [ENEMY] [Enemy8] Registered as sound listener
[20:15:06] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[20:15:06] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:15:06] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:15:06] [ENEMY] [Enemy9] Registered as sound listener
[20:15:06] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[20:15:06] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:15:06] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:15:06] [ENEMY] [Enemy10] Registered as sound listener
[20:15:06] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[20:15:06] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:15:06] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:15:06] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:06] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:06] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:06] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:06] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:06] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=225.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:06] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:06] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:06] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:15:06] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:15:06] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:15:06] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:15:06] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:15:06] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:15:06] [INFO] [LastChance] Found player: Player
[20:15:06] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:15:06] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:15:06] [INFO] [LastChance] Connected to player Died signal (C#)
[20:15:06] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:15:07] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:15:08] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:15:08] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:15:08] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1250), corner_timer=0.30
[20:15:08] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1250), corner_timer=0.30
[20:15:08] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,1250), corner_timer=-0.02
[20:15:08] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:15:08] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,1250), corner_timer=-0.02
[20:15:08] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:15:08] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,1250), corner_timer=0.30
[20:15:08] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,1250), corner_timer=0.30
[20:15:08] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:15:08] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,1250), corner_timer=-0.02
[20:15:08] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[20:15:08] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,1250), corner_timer=0.30
[20:15:09] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,1250), corner_timer=-0.02
[20:15:09] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[20:15:09] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,1250), corner_timer=0.30
[20:15:09] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(450,1250), corner_timer=-0.02
[20:15:09] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[20:15:09] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(450,1250), corner_timer=0.30
[20:15:09] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[20:15:09] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(450,1250), corner_timer=-0.02
[20:15:09] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[20:15:09] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(450,1250), corner_timer=0.30
[20:15:10] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:10] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(450,1250), corner_timer=-0.02
[20:15:10] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[20:15:10] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(450,1250), corner_timer=0.30
[20:15:10] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:10] [INFO] [ReplayManager] Recording frame 240 (4,0s): player_valid=True, enemies=10
[20:15:10] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(450,1250), corner_timer=-0.02
[20:15:10] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[20:15:10] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(450,1250), corner_timer=0.30
[20:15:10] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:10] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(450,1250), corner_timer=-0.02
[20:15:10] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[20:15:10] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(450,1250), corner_timer=0.30
[20:15:11] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:11] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(450,1250), corner_timer=-0.02
[20:15:11] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[20:15:11] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(450,1250), corner_timer=0.30
[20:15:11] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:11] [INFO] [ReplayManager] Recording frame 300 (5,0s): player_valid=True, enemies=10
[20:15:11] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(450,1250), corner_timer=-0.02
[20:15:11] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[20:15:11] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(450,1250), corner_timer=0.30
[20:15:11] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:11] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.5°, current=89.5°, player=(450,1250), corner_timer=-0.02
[20:15:11] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[20:15:11] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(450,1250), corner_timer=0.30
[20:15:12] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:12] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.4°, current=89.5°, player=(450,1250), corner_timer=-0.02
[20:15:12] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[20:15:12] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.3°, player=(450,1250), corner_timer=0.30
[20:15:12] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:12] [INFO] [ReplayManager] Recording frame 360 (6,0s): player_valid=True, enemies=10
[20:15:12] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.5°, player=(450,1250), corner_timer=-0.02
[20:15:12] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[20:15:12] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(450,1250), corner_timer=0.30
[20:15:12] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:12] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(450,1250), corner_timer=-0.02
[20:15:12] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[20:15:12] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(450,1250), corner_timer=0.30
[20:15:13] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:13] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(450,1250), corner_timer=-0.02
[20:15:13] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[20:15:13] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(450,1250), corner_timer=0.30
[20:15:13] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:13] [INFO] [ReplayManager] Recording frame 420 (7,0s): player_valid=True, enemies=10
[20:15:13] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(450,1250), corner_timer=-0.02
[20:15:13] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[20:15:13] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(450,1250), corner_timer=0.30
[20:15:13] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:13] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(450,1199), corner_timer=-0.02
[20:15:13] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[20:15:13] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(450,1193), corner_timer=0.30
[20:15:14] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:14] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:14] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:14] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:15:14] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:15:14] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:15:14] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:14] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:15:14] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:15:14] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:15:14] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:15:14] [ENEMY] [Enemy1] Death animation component initialized
[20:15:14] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:14] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:15:14] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:15:14] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:15:14] [ENEMY] [Enemy2] Death animation component initialized
[20:15:14] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:14] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:15:14] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:15:14] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:15:14] [ENEMY] [Enemy3] Death animation component initialized
[20:15:14] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:14] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:15:14] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:15:14] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:15:14] [ENEMY] [Enemy4] Death animation component initialized
[20:15:14] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:14] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:15:14] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:15:14] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:15:14] [ENEMY] [Enemy5] Death animation component initialized
[20:15:14] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:14] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:15:14] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:15:14] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:15:14] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:14] [ENEMY] [Enemy6] Death animation component initialized
[20:15:14] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:14] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:15:14] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:15:14] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:15:14] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:14] [ENEMY] [Enemy7] Death animation component initialized
[20:15:14] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:14] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:15:14] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:15:14] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:15:14] [ENEMY] [Enemy8] Death animation component initialized
[20:15:14] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:14] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:15:14] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:15:14] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:15:14] [ENEMY] [Enemy9] Death animation component initialized
[20:15:14] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:14] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:15:14] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:15:14] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:15:14] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:14] [ENEMY] [Enemy10] Death animation component initialized
[20:15:14] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:14] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:15:14] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:15:14] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:15:14] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:15:14] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:15:14] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:15:14] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:15:14] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:15:14] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:15:14] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:15:14] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:15:14] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:15:14] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 2/4
[20:15:14] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:15:14] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:15:14] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:15:14] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:15:14] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:15:14] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:15:14] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:15:14] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:15:14] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:15:14] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:15:14] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:15:14] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:15:14] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:15:14] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:15:14] [INFO] [ScoreManager] Level started with 10 enemies
[20:15:14] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:15:14] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:15:14] [INFO] [ReplayManager] Replay data cleared
[20:15:14] [INFO] [BuildingLevel] Previous replay data cleared
[20:15:14] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:15:14] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:15:14] [INFO] [ReplayManager] Level: BuildingLevel
[20:15:14] [INFO] [ReplayManager] Player: Player (valid: True)
[20:15:14] [INFO] [ReplayManager] Enemies count: 10
[20:15:14] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:15:14] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:15:14] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:15:14] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:15:14] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:15:14] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:15:14] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:15:14] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:15:14] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:15:14] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:15:14] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:15:14] [INFO] [BuildingLevel] Replay recording started successfully
[20:15:14] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:15:14] [INFO] [CinemaEffects] Found player node: Player
[20:15:14] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:15:14] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[20:15:14] [ENEMY] [Enemy1] Registered as sound listener
[20:15:14] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[20:15:14] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:15:14] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[20:15:14] [ENEMY] [Enemy2] Registered as sound listener
[20:15:14] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[20:15:14] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:15:14] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[20:15:14] [ENEMY] [Enemy3] Registered as sound listener
[20:15:14] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[20:15:14] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:15:14] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[20:15:14] [ENEMY] [Enemy4] Registered as sound listener
[20:15:14] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[20:15:14] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:15:14] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
[20:15:14] [ENEMY] [Enemy5] Registered as sound listener
[20:15:14] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[20:15:14] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:15:14] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[20:15:14] [ENEMY] [Enemy6] Registered as sound listener
[20:15:14] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[20:15:14] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:15:14] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[20:15:14] [ENEMY] [Enemy7] Registered as sound listener
[20:15:14] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[20:15:14] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:15:14] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[20:15:14] [ENEMY] [Enemy8] Registered as sound listener
[20:15:14] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[20:15:14] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:15:14] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[20:15:14] [ENEMY] [Enemy9] Registered as sound listener
[20:15:14] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[20:15:14] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:15:14] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[20:15:14] [ENEMY] [Enemy10] Registered as sound listener
[20:15:14] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[20:15:14] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:15:14] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:15:14] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:14] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:14] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:14] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:14] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:14] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:14] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:14] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:14] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:15:14] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:15:14] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:15:14] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:15:14] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:15:14] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:15:14] [INFO] [LastChance] Found player: Player
[20:15:14] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:15:14] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:15:14] [INFO] [LastChance] Connected to player Died signal (C#)
[20:15:14] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:15:15] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:15:15] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=164.4°, current=123.7°, player=(450,819), corner_timer=0.00
[20:15:15] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:15:15] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=166.6°, current=-65.0°, player=(450,809), corner_timer=0.00
[20:15:15] [ENEMY] [Enemy4] Memory: high confidence (0.89) - transitioning to PURSUING
[20:15:15] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:15:15] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:15:15] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:15:15] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=-162.4°, current=-67.5°, player=(450,788), corner_timer=0.00
[20:15:15] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,788), corner_timer=0.30
[20:15:15] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,788), corner_timer=0.30
[20:15:15] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[20:15:16] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=-151.3°, current=175.9°, player=(450,767), corner_timer=0.05
[20:15:16] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:15:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 773.9444), source=PLAYER (MakarovPM), range=1469, listeners=30
[20:15:16] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
[20:15:16] [ENEMY] [Enemy1] Heard gunshot at (460, 773.9444), source_type=0, intensity=0.01, distance=453
[20:15:16] [ENEMY] [Enemy2] Heard gunshot at (460, 773.9444), source_type=0, intensity=0.05, distance=232
[20:15:16] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:15:16] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=70.3°, current=-33.8°, player=(450,767), corner_timer=0.00
[20:15:16] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=77.1°, current=45.0°, player=(450,767), corner_timer=0.00
[20:15:16] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,767), corner_timer=-0.02
[20:15:16] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:15:16] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,767), corner_timer=-0.02
[20:15:16] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:15:16] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,767), corner_timer=0.30
[20:15:16] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,767), corner_timer=0.30
[20:15:16] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P2:combat_state, state=PURSUING, target=-149.5°, current=-150.5°, player=(450,767), corner_timer=0.00
[20:15:16] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=176.5°, current=-134.2°, player=(450,767), corner_timer=0.00
[20:15:16] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:15:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4577, 753.7969), source=ENEMY (Enemy3), range=1469, listeners=10
[20:15:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:15:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 773.9444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:15:16] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:15:16] [INFO] [LastChance] Threat detected: Bullet
[20:15:16] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:15:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:16] [ENEMY] [Enemy3] Hit: dmg=1, hp=3/3->2/3
[20:15:16] [INFO] [ImpactEffects] spawn_blood_effect called at (684.4577, 753.7969), dir=(0.992091, -0.125522), lethal=false
[20:15:16] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:16] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:15:16] [INFO] [ImpactEffects] Blood effect spawned at (684.4577, 753.7969) (scale=0.5)
[20:15:16] [ENEMY] [Enemy4] PURSUING corner check: angle -94.0°
[20:15:16] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:15:16] [INFO] [Player] Spawning blood effect at (450, 767.9444), dir=(1, 0), lethal=False (C#)
[20:15:16] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 767.9444), dir=(1, 0), lethal=false
[20:15:16] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:16] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:15:16] [INFO] [ImpactEffects] Blood effect spawned at (450, 767.9444) (scale=1)
[20:15:16] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:15:16] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:15:16] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:15:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4577, 753.7969), source=ENEMY (Enemy3), range=1469, listeners=10
[20:15:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:15:16] [INFO] [LastChance] Threat detected: Bullet
[20:15:16] [INFO] [LastChance] Triggering last chance effect!
[20:15:16] [INFO] [LastChance] Starting last chance effect:
[20:15:16] [INFO] [LastChance]   - Time will be frozen (except player)
[20:15:16] [INFO] [LastChance]   - Duration: 6.00 real seconds
[20:15:16] [INFO] [LastChance]   - Trigger: threat detected
[20:15:16] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:15:16] [INFO] [LastChance]   - Brightness: 0.60
[20:15:16] [INFO] [LastChance] Pushed bullet Bullet from distance 125.8 to 200.0
[20:15:16] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[20:15:16] [INFO] [LastChance] Set player Player and all 26 children to PROCESS_MODE_ALWAYS
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:15:16] [INFO] [LastChance] Skipping player node: Player
[20:15:16] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:15:16] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@794
[20:15:16] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@797
[20:15:16] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@800
[20:15:16] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:15:16] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:15:16] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:15:16] [INFO] [Player] Stun ended (Issue #592)
[20:15:16] [INFO] [BloodDecal] Blood puddle created at (754.3288, 784.5872) (added to group)
[20:15:16] [INFO] [BloodDecal] Blood puddle created at (777.4227, 781.2841) (added to group)
[20:15:16] [INFO] [LastChance] Freezing newly fired player bullet: Bullet9mm
[20:15:16] [INFO] [LastChance] Registered frozen player bullet: Bullet9mm
[20:15:16] [INFO] [LastChance] Freezing newly created explosion effect: PointLight2D
[20:15:16] [INFO] [LastChance] Registered frozen explosion effect: PointLight2D
[20:15:16] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@802
[20:15:16] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@802
[20:15:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 773.9444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:15:16] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:15:16] [INFO] [BloodDecal] Blood puddle created at (781.3809, 771.9156) (added to group)
[20:15:16] [INFO] [BloodDecal] Blood puddle created at (787.3558, 787.7849) (added to group)
[20:15:16] [INFO] [BloodDecal] Blood puddle created at (763.738, 773.4426) (added to group)
[20:15:16] [INFO] [BloodDecal] Blood puddle created at (797.294, 749.9058) (added to group)
[20:15:16] [INFO] [BloodDecal] Blood puddle created at (551.3282, 765.6702) (added to group)
[20:15:16] [INFO] [BloodDecal] Blood puddle created at (844.5793, 866.5819) (added to group)
[20:15:16] [INFO] [BloodDecal] Blood puddle created at (611.3735, 776.3709) (added to group)
[20:15:16] [INFO] [BloodDecal] Blood puddle created at (615.7303, 824.4467) (added to group)
[20:15:16] [INFO] [BloodDecal] Blood puddle created at (576.0356, 819.779) (added to group)
[20:15:16] [INFO] [BloodDecal] Blood puddle created at (553.2575, 784.4901) (added to group)
[20:15:16] [INFO] [BloodDecal] Blood puddle created at (844.4919, 858.4135) (added to group)
[20:15:16] [INFO] [BloodDecal] Blood puddle created at (836.1937, 779.3035) (added to group)
[20:15:16] [INFO] [BloodDecal] Blood puddle created at (578.4958, 806.5952) (added to group)
[20:15:17] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:17] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:17] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:15:17] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:15:17] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:15:17] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:17] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:15:17] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:15:17] [INFO] [LastChance] All process modes restored
[20:15:17] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:15:17] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:15:17] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:15:17] [ENEMY] [Enemy1] Death animation component initialized
[20:15:17] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:17] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:15:17] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:15:17] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:15:17] [ENEMY] [Enemy2] Death animation component initialized
[20:15:17] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:17] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:15:17] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:15:17] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:15:17] [ENEMY] [Enemy3] Death animation component initialized
[20:15:17] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:17] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:15:17] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:15:17] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:15:17] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:17] [ENEMY] [Enemy4] Death animation component initialized
[20:15:17] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:17] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:15:17] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:15:17] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:15:17] [ENEMY] [Enemy5] Death animation component initialized
[20:15:17] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:17] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:15:17] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:15:17] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:15:17] [ENEMY] [Enemy6] Death animation component initialized
[20:15:17] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:17] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:15:17] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:15:17] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:15:17] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:17] [ENEMY] [Enemy7] Death animation component initialized
[20:15:17] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:17] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:15:17] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:15:17] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:15:17] [ENEMY] [Enemy8] Death animation component initialized
[20:15:17] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:17] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:15:17] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:15:17] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:15:17] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:17] [ENEMY] [Enemy9] Death animation component initialized
[20:15:17] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:17] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:15:17] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:15:17] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:15:17] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:17] [ENEMY] [Enemy10] Death animation component initialized
[20:15:17] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:17] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:15:17] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:15:17] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:15:17] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:15:17] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:15:17] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:15:17] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:15:17] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:15:17] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:15:17] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:15:17] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:15:17] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:15:17] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 3/4
[20:15:17] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:15:17] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:15:17] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:15:17] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:15:17] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:15:17] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:15:17] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:15:17] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:15:17] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:15:17] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:15:17] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:15:17] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:15:17] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:15:17] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:15:17] [INFO] [ScoreManager] Level started with 10 enemies
[20:15:17] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:15:17] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:15:17] [INFO] [ReplayManager] Replay data cleared
[20:15:17] [INFO] [BuildingLevel] Previous replay data cleared
[20:15:17] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:15:17] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:15:17] [INFO] [ReplayManager] Level: BuildingLevel
[20:15:17] [INFO] [ReplayManager] Player: Player (valid: True)
[20:15:17] [INFO] [ReplayManager] Enemies count: 10
[20:15:17] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:15:17] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:15:17] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:15:17] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:15:17] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:15:17] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:15:17] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:15:17] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:15:17] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:15:17] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:15:17] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:15:17] [INFO] [BuildingLevel] Replay recording started successfully
[20:15:17] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:15:17] [INFO] [CinemaEffects] Found player node: Player
[20:15:17] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:15:17] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:15:17] [ENEMY] [Enemy1] Registered as sound listener
[20:15:17] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[20:15:17] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:15:17] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:15:17] [ENEMY] [Enemy2] Registered as sound listener
[20:15:17] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[20:15:17] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:15:17] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:15:17] [ENEMY] [Enemy3] Registered as sound listener
[20:15:17] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[20:15:17] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:15:17] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:15:17] [ENEMY] [Enemy4] Registered as sound listener
[20:15:17] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[20:15:17] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:15:17] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:15:17] [ENEMY] [Enemy5] Registered as sound listener
[20:15:17] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[20:15:17] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:15:17] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:15:17] [ENEMY] [Enemy6] Registered as sound listener
[20:15:17] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[20:15:17] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:15:17] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:15:17] [ENEMY] [Enemy7] Registered as sound listener
[20:15:17] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[20:15:17] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:15:17] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:15:17] [ENEMY] [Enemy8] Registered as sound listener
[20:15:17] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[20:15:17] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:15:17] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:15:17] [ENEMY] [Enemy9] Registered as sound listener
[20:15:17] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[20:15:17] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:15:17] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:15:17] [ENEMY] [Enemy10] Registered as sound listener
[20:15:17] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[20:15:17] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:15:17] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:15:17] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:17] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:17] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=236.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:17] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:17] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:17] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:17] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=157.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:17] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:17] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:15:17] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:15:17] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:15:17] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:15:17] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:15:17] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:15:17] [INFO] [LastChance] Found player: Player
[20:15:17] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:15:17] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:15:17] [INFO] [LastChance] Connected to player Died signal (C#)
[20:15:17] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:15:18] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:15:19] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:15:19] [INFO] [PauseMenu] Armory button pressed
[20:15:19] [INFO] [PauseMenu] Creating new armory menu instance
[20:15:19] [INFO] [PauseMenu] armory_menu_scene resource path: res://scenes/ui/ArmoryMenu.tscn
[20:15:19] [INFO] [PauseMenu] Instance created, class: CanvasLayer, name: ArmoryMenu
[20:15:19] [INFO] [PauseMenu] Script attached: res://scripts/ui/armory_menu.gd
[20:15:19] [INFO] [PauseMenu] back_pressed signal exists on instance
[20:15:19] [INFO] [PauseMenu] back_pressed signal connected
[20:15:19] [INFO] [PauseMenu] Armory menu instance added as child, is_inside_tree: true
[20:15:19] [INFO] [PauseMenu] _populate_weapon_grid method exists
[20:15:20] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[20:15:21] [INFO] [ReplayManager] Recording frame 240 (4,0s): player_valid=True, enemies=10
[20:15:22] [INFO] [ReplayManager] Recording frame 300 (5,0s): player_valid=True, enemies=10
[20:15:22] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:15:22] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:15:22] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1224), corner_timer=0.30
[20:15:22] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1224), corner_timer=0.30
[20:15:22] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:22] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:15:22] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:15:22] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:15:22] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:22] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:15:22] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:15:22] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:15:22] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:15:22] [ENEMY] [Enemy1] Death animation component initialized
[20:15:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:22] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:15:22] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:15:22] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:15:22] [ENEMY] [Enemy2] Death animation component initialized
[20:15:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:22] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:15:22] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:15:22] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:15:22] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:22] [ENEMY] [Enemy3] Death animation component initialized
[20:15:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:22] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:15:22] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:15:22] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:15:22] [ENEMY] [Enemy4] Death animation component initialized
[20:15:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:22] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:15:22] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:15:22] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:15:22] [ENEMY] [Enemy5] Death animation component initialized
[20:15:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:22] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:15:22] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:15:22] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:15:22] [ENEMY] [Enemy6] Death animation component initialized
[20:15:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:22] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:15:22] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:15:22] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:15:22] [ENEMY] [Enemy7] Death animation component initialized
[20:15:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:22] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:15:22] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:15:22] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:15:22] [ENEMY] [Enemy8] Death animation component initialized
[20:15:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:22] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:15:22] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:15:22] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:15:22] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:22] [ENEMY] [Enemy9] Death animation component initialized
[20:15:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:22] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:15:22] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:15:22] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:15:22] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:22] [ENEMY] [Enemy10] Death animation component initialized
[20:15:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:22] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:15:22] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:15:22] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:15:22] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:15:22] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:15:22] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:15:22] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:15:22] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:15:22] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:15:22] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:15:22] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:15:22] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:15:22] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 4/4
[20:15:22] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:15:22] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:15:22] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:15:22] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:15:22] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:15:22] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:15:22] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:15:22] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:15:22] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:15:22] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:15:22] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:15:22] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:15:22] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:15:22] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:15:22] [INFO] [ScoreManager] Level started with 10 enemies
[20:15:22] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:15:22] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:15:22] [INFO] [ReplayManager] Replay data cleared
[20:15:22] [INFO] [BuildingLevel] Previous replay data cleared
[20:15:22] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:15:22] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:15:22] [INFO] [ReplayManager] Level: BuildingLevel
[20:15:22] [INFO] [ReplayManager] Player: Player (valid: True)
[20:15:22] [INFO] [ReplayManager] Enemies count: 10
[20:15:22] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:15:22] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:15:22] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:15:22] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:15:22] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:15:22] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:15:22] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:15:22] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:15:22] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:15:22] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:15:22] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:15:22] [INFO] [BuildingLevel] Replay recording started successfully
[20:15:22] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:15:22] [INFO] [CinemaEffects] Found player node: Player
[20:15:22] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:15:22] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[20:15:22] [ENEMY] [Enemy1] Registered as sound listener
[20:15:22] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[20:15:22] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:15:22] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[20:15:22] [ENEMY] [Enemy2] Registered as sound listener
[20:15:22] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[20:15:22] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:15:22] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[20:15:22] [ENEMY] [Enemy3] Registered as sound listener
[20:15:22] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[20:15:22] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:15:22] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[20:15:22] [ENEMY] [Enemy4] Registered as sound listener
[20:15:22] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[20:15:22] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:15:22] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
[20:15:22] [ENEMY] [Enemy5] Registered as sound listener
[20:15:22] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[20:15:22] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:15:22] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[20:15:22] [ENEMY] [Enemy6] Registered as sound listener
[20:15:22] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[20:15:22] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:15:22] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[20:15:22] [ENEMY] [Enemy7] Registered as sound listener
[20:15:22] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[20:15:22] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:15:22] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[20:15:22] [ENEMY] [Enemy8] Registered as sound listener
[20:15:22] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[20:15:22] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:15:22] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[20:15:22] [ENEMY] [Enemy9] Registered as sound listener
[20:15:22] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[20:15:22] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:15:22] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[20:15:22] [ENEMY] [Enemy10] Registered as sound listener
[20:15:22] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[20:15:22] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:15:22] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:15:22] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:22] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:22] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:22] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:22] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:22] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:22] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:22] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:22] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:15:22] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:15:22] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:15:22] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:15:22] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:15:22] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:15:22] [INFO] [LastChance] Found player: Player
[20:15:22] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:15:22] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:15:22] [INFO] [LastChance] Connected to player Died signal (C#)
[20:15:22] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:15:23] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:15:23] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=164.4°, current=123.7°, player=(450,819), corner_timer=0.00
[20:15:23] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:15:24] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=166.6°, current=-65.0°, player=(450,809), corner_timer=0.00
[20:15:24] [ENEMY] [Enemy4] Memory: high confidence (0.89) - transitioning to PURSUING
[20:15:24] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:15:24] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:15:24] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:15:24] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=-162.4°, current=-101.3°, player=(450,788), corner_timer=0.00
[20:15:24] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,788), corner_timer=0.30
[20:15:24] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,788), corner_timer=0.30
[20:15:24] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[20:15:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 783.4999), source=PLAYER (MakarovPM), range=1469, listeners=30
[20:15:24] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
[20:15:24] [ENEMY] [Enemy1] Heard gunshot at (460, 783.4999), source_type=0, intensity=0.01, distance=462
[20:15:24] [ENEMY] [Enemy2] Heard gunshot at (460, 783.4999), source_type=0, intensity=0.04, distance=241
[20:15:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:15:24] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=70.7°, current=-157.5°, player=(450,777), corner_timer=0.00
[20:15:24] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=77.6°, current=45.0°, player=(450,777), corner_timer=0.00
[20:15:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 773.9444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:15:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:15:24] [ENEMY] [Enemy3] Hit: dmg=1, hp=3/3->2/3
[20:15:24] [INFO] [ImpactEffects] spawn_blood_effect called at (684.4577, 753.7969), dir=(0.976429, -0.21584), lethal=false
[20:15:24] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:24] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:15:24] [INFO] [ImpactEffects] Blood effect spawned at (684.4577, 753.7969) (scale=0.5)
[20:15:24] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=176.5°, current=167.5°, player=(450,767), corner_timer=0.00
[20:15:24] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,767), corner_timer=-0.02
[20:15:24] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:15:24] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,767), corner_timer=-0.02
[20:15:24] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:15:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4577, 753.7969), source=ENEMY (Enemy3), range=1469, listeners=10
[20:15:24] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:15:24] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,767), corner_timer=0.30
[20:15:24] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,767), corner_timer=0.30
[20:15:24] [INFO] [LastChance] Threat detected: Bullet
[20:15:24] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:15:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:24] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:15:24] [INFO] [EnemyGrenade] Unsafe throw distance (116 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:24] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:15:24] [INFO] [Player] Spawning blood effect at (450, 767.9444), dir=(1, 0), lethal=False (C#)
[20:15:24] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 767.9444), dir=(1, 0), lethal=false
[20:15:24] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:24] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:15:24] [INFO] [ImpactEffects] Blood effect spawned at (450, 767.9444) (scale=1)
[20:15:24] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:15:24] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:15:24] [INFO] [EnemyGrenade] Unsafe throw distance (115 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:24] [INFO] [EnemyGrenade] Unsafe throw distance (114 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(676.6179, 752.2041), source=ENEMY (Enemy3), range=1469, listeners=10
[20:15:24] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:15:24] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:15:24] [INFO] [EnemyGrenade] Unsafe throw distance (112 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:24] [INFO] [LastChance] Threat detected: Bullet
[20:15:24] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:15:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:24] [INFO] [EnemyGrenade] Unsafe throw distance (111 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:24] [INFO] [EnemyGrenade] Unsafe throw distance (110 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:24] [ENEMY] [Enemy4] PURSUING corner check: angle -94.0°
[20:15:24] [INFO] [BloodDecal] Blood puddle created at (754.7531, 736.2592) (added to group)
[20:15:24] [INFO] [EnemyGrenade] Unsafe throw distance (109 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(667.084, 747.9495), source=ENEMY (Enemy3), range=1469, listeners=10
[20:15:24] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:15:24] [INFO] [LastChance] Threat detected: @Area2D@1415
[20:15:24] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:15:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:24] [INFO] [EnemyGrenade] Unsafe throw distance (108 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:24] [INFO] [BloodDecal] Blood puddle created at (758.0771, 770.2102) (added to group)
[20:15:24] [INFO] [EnemyGrenade] Unsafe throw distance (107 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:24] [INFO] [Player] Stun ended (Issue #592)
[20:15:24] [INFO] [EnemyGrenade] Unsafe throw distance (106 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:24] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:15:24] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[20:15:24] [INFO] [EnemyGrenade] Unsafe throw distance (105 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(658.4409, 741.6985), source=ENEMY (Enemy3), range=1469, listeners=10
[20:15:24] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:15:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 773.9444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:15:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:15:24] [INFO] [BloodDecal] Blood puddle created at (793.6244, 797.1472) (added to group)
[20:15:24] [INFO] [LastChance] Threat detected: @Area2D@1419
[20:15:24] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:15:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:24] [INFO] [EnemyGrenade] Unsafe throw distance (104 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:24] [INFO] [EnemyGrenade] Unsafe throw distance (103 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:24] [INFO] [BloodDecal] Blood puddle created at (773.0277, 778.7966) (added to group)
[20:15:24] [INFO] [EnemyGrenade] Unsafe throw distance (102 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:24] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:15:24] [INFO] [Player] Spawning blood effect at (450, 767.9444), dir=(1, 0), lethal=False (C#)
[20:15:24] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 767.9444), dir=(1, 0), lethal=false
[20:15:24] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:24] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:15:24] [INFO] [ImpactEffects] Blood effect spawned at (450, 767.9444) (scale=1)
[20:15:24] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:15:24] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:15:24] [INFO] [EnemyGrenade] Unsafe throw distance (101 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(649.7979, 735.4475), source=ENEMY (Enemy3), range=1469, listeners=10
[20:15:24] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:15:24] [INFO] [LastChance] Threat detected: @Area2D@1435
[20:15:24] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:15:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:24] [INFO] [EnemyGrenade] Unsafe throw distance (100 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:24] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,767), corner_timer=-0.02
[20:15:24] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[20:15:24] [INFO] [BloodDecal] Blood puddle created at (508.982, 756.4613) (added to group)
[20:15:24] [INFO] [BloodDecal] Blood puddle created at (495.5031, 774.6647) (added to group)
[20:15:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(460, 773.9444), shooter_id=350056615274, bullet_pos=(919.592, 622.1828)
[20:15:24] [INFO] [Bullet] Using shooter_position, distance=484.000366210938
[20:15:24] [INFO] [Bullet] Distance to wall: 484.000366210938 (32.9564749334982% of viewport)
[20:15:24] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:24] [INFO] [Bullet] Caliber cannot penetrate walls
[20:15:24] [INFO] [EnemyGrenade] Unsafe throw distance (98 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:24] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,767), corner_timer=0.30
[20:15:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(609.7209, 764.6694), shooter_id=346701171874, bullet_pos=(39.72416, 888.6921)
[20:15:24] [INFO] [Bullet] Using shooter_position, distance=583,33344
[20:15:24] [INFO] [Bullet] Distance to wall: 583,33344 (39,720245% of viewport)
[20:15:24] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:24] [INFO] [Bullet] Starting wall penetration at (39.72416, 888.6921)
[20:15:24] [INFO] [EnemyGrenade] Unsafe throw distance (97 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 38,76179
[20:15:24] [INFO] [Bullet] Body exited signal received for penetrating body
[20:15:24] [INFO] [Bullet] Exiting penetration at (-5.8755836, 898.6139) after traveling 41,666676 pixels through wall
[20:15:24] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:15:24] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:15:24] [INFO] [Player] Spawning blood effect at (450, 767.9444), dir=(1, 0), lethal=False (C#)
[20:15:24] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 767.9444), dir=(1, 0), lethal=false
[20:15:24] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:24] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:15:24] [INFO] [ImpactEffects] Blood effect spawned at (450, 767.9444) (scale=1)
[20:15:24] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:15:24] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:15:24] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:15:24] [INFO] [EnemyGrenade] Unsafe throw distance (95 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:24] [INFO] [BloodDecal] Blood puddle created at (838.4529, 832.2849) (added to group)
[20:15:24] [ENEMY] [Enemy3] Hit: dmg=1, hp=2/3->1/3
[20:15:24] [INFO] [ImpactEffects] spawn_blood_effect called at (630.3507, 721.3831), dir=(0.946992, -0.321256), lethal=false
[20:15:24] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:24] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:15:24] [INFO] [ImpactEffects] Blood effect spawned at (630.3507, 721.3831) (scale=0.5)
[20:15:24] [INFO] [EnemyGrenade] Unsafe throw distance (186 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(600.4843, 761.91675), shooter_id=346701171874, bullet_pos=(62.974308, 828.89325)
[20:15:24] [INFO] [Bullet] Using shooter_position, distance=541,66675
[20:15:24] [INFO] [Bullet] Distance to wall: 541,66675 (36,883087% of viewport)
[20:15:24] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:24] [INFO] [Bullet] Starting wall penetration at (62.974308, 828.89325)
[20:15:24] [INFO] [EnemyGrenade] Unsafe throw distance (183 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 15,4528265
[20:15:24] [INFO] [Bullet] Body exited signal received for penetrating body
[20:15:24] [INFO] [Bullet] Exiting penetration at (16.665756, 834.6635) after traveling 41,666668 pixels through wall
[20:15:24] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:15:24] [INFO] [EnemyGrenade] Unsafe throw distance (180 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:24] [INFO] [EnemyGrenade] Unsafe throw distance (176 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:24] [INFO] [BloodDecal] Blood puddle created at (767.797, 798.5328) (added to group)
[20:15:24] [INFO] [EnemyGrenade] Unsafe throw distance (173 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:24] [INFO] [EnemyGrenade] Unsafe throw distance (170 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:24] [INFO] [BloodDecal] Blood puddle created at (833.4333, 726.085) (added to group)
[20:15:24] [INFO] [BloodDecal] Blood puddle created at (776.0902, 775.4404) (added to group)
[20:15:24] [INFO] [EnemyGrenade] Unsafe throw distance (168 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:24] [INFO] [Player] Stun ended (Issue #592)
[20:15:24] [INFO] [BloodDecal] Blood puddle created at (553.223, 800.8849) (added to group)
[20:15:24] [INFO] [EnemyGrenade] Unsafe throw distance (165 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:24] [INFO] [EnemyGrenade] Unsafe throw distance (162 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:24] [INFO] [BloodDecal] Blood puddle created at (764.7588, 790.108) (added to group)
[20:15:24] [INFO] [EnemyGrenade] Unsafe throw distance (160 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:25] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:25] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:15:25] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:15:25] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:15:25] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:25] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:15:25] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:15:25] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:15:25] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:15:25] [ENEMY] [Enemy1] Death animation component initialized
[20:15:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:25] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:15:25] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:15:25] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:15:25] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:25] [ENEMY] [Enemy2] Death animation component initialized
[20:15:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:25] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:15:25] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:15:25] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:15:25] [ENEMY] [Enemy3] Death animation component initialized
[20:15:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:25] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:15:25] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:15:25] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:15:25] [ENEMY] [Enemy4] Death animation component initialized
[20:15:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:25] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:15:25] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:15:25] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:15:25] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:25] [ENEMY] [Enemy5] Death animation component initialized
[20:15:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:25] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:15:25] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:15:25] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:15:25] [ENEMY] [Enemy6] Death animation component initialized
[20:15:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:25] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:15:25] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:15:25] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:15:25] [ENEMY] [Enemy7] Death animation component initialized
[20:15:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:25] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:15:25] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:15:25] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:15:25] [ENEMY] [Enemy8] Death animation component initialized
[20:15:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:25] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:15:25] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:15:25] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:15:25] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:25] [ENEMY] [Enemy9] Death animation component initialized
[20:15:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:25] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:15:25] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:15:25] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:15:25] [ENEMY] [Enemy10] Death animation component initialized
[20:15:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:25] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:15:25] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:15:25] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:15:25] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:15:25] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:15:25] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:15:25] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:15:25] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:15:25] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:15:25] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:15:25] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:15:25] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:15:25] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 3/4
[20:15:25] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:15:25] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:15:25] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:15:25] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:15:25] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:15:25] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:15:25] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:15:25] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:15:25] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:15:25] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:15:25] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:15:25] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:15:25] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:15:25] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:15:25] [INFO] [ScoreManager] Level started with 10 enemies
[20:15:25] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:15:25] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:15:25] [INFO] [ReplayManager] Replay data cleared
[20:15:25] [INFO] [BuildingLevel] Previous replay data cleared
[20:15:25] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:15:25] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:15:25] [INFO] [ReplayManager] Level: BuildingLevel
[20:15:25] [INFO] [ReplayManager] Player: Player (valid: True)
[20:15:25] [INFO] [ReplayManager] Enemies count: 10
[20:15:25] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:15:25] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:15:25] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:15:25] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:15:25] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:15:25] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:15:25] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:15:25] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:15:25] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:15:25] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:15:25] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:15:25] [INFO] [BuildingLevel] Replay recording started successfully
[20:15:25] [INFO] [BloodDecal] Blood puddle created at (613.1604, 802.6114) (added to group)
[20:15:25] [INFO] [BloodDecal] Blood puddle created at (524.0436, 788.8497) (added to group)
[20:15:25] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:15:25] [INFO] [CinemaEffects] Found player node: Player
[20:15:25] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:15:25] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:15:25] [ENEMY] [Enemy1] Registered as sound listener
[20:15:25] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[20:15:25] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:15:25] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:15:25] [ENEMY] [Enemy2] Registered as sound listener
[20:15:25] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[20:15:25] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:15:25] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:15:25] [ENEMY] [Enemy3] Registered as sound listener
[20:15:25] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[20:15:25] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:15:25] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:15:25] [ENEMY] [Enemy4] Registered as sound listener
[20:15:25] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[20:15:25] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:15:25] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:15:25] [ENEMY] [Enemy5] Registered as sound listener
[20:15:25] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[20:15:25] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:15:25] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:15:25] [ENEMY] [Enemy6] Registered as sound listener
[20:15:25] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[20:15:25] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:15:25] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:15:25] [ENEMY] [Enemy7] Registered as sound listener
[20:15:25] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[20:15:25] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:15:25] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:15:25] [ENEMY] [Enemy8] Registered as sound listener
[20:15:25] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[20:15:25] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:15:25] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:15:25] [ENEMY] [Enemy9] Registered as sound listener
[20:15:25] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[20:15:25] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:15:25] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:15:25] [ENEMY] [Enemy10] Registered as sound listener
[20:15:25] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[20:15:25] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:15:25] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:15:25] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:25] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:25] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:25] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:25] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:25] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=225.0°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:25] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:25] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:25] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:15:25] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:15:25] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:15:25] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:15:25] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:15:25] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:15:25] [INFO] [LastChance] Found player: Player
[20:15:25] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:15:25] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:15:25] [INFO] [LastChance] Connected to player Died signal (C#)
[20:15:25] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:15:25] [INFO] [BloodDecal] Blood puddle created at (507.0196, 780.3012) (added to group)
[20:15:25] [INFO] [BloodDecal] Blood puddle created at (679.5732, 719.0176) (added to group)
[20:15:25] [INFO] [BloodDecal] Blood puddle created at (669.7059, 724.4325) (added to group)
[20:15:25] [INFO] [BloodDecal] Blood puddle created at (676.0841, 699.8695) (added to group)
[20:15:25] [INFO] [BloodDecal] Blood puddle created at (687.15, 742.8829) (added to group)
[20:15:25] [INFO] [BloodDecal] Blood puddle created at (723.7808, 719.945) (added to group)
[20:15:25] [INFO] [BloodyFeet:Enemy3] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[20:15:25] [INFO] [BloodDecal] Blood puddle created at (539.856, 778.6929) (added to group)
[20:15:25] [INFO] [BloodDecal] Blood puddle created at (530.1375, 796.866) (added to group)
[20:15:25] [INFO] [BloodDecal] Blood puddle created at (751.707, 761.4891) (added to group)
[20:15:25] [INFO] [BloodDecal] Blood puddle created at (606.1157, 761.6656) (added to group)
[20:15:25] [INFO] [BloodDecal] Blood puddle created at (574.3594, 794.8494) (added to group)
[20:15:25] [INFO] [BloodDecal] Blood puddle created at (811.4878, 803.0285) (added to group)
[20:15:25] [INFO] [BloodDecal] Blood puddle created at (627.6891, 784.9869) (added to group)
[20:15:25] [INFO] [BloodDecal] Blood puddle created at (743.989, 775.4706) (added to group)
[20:15:25] [INFO] [BloodDecal] Blood puddle created at (607.1489, 834.9732) (added to group)
[20:15:25] [INFO] [BloodDecal] Blood puddle created at (771.7828, 716.0103) (added to group)
[20:15:25] [INFO] [BloodDecal] Blood puddle created at (823.6928, 709.0366) (added to group)
[20:15:26] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:15:26] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=164.1°, current=123.7°, player=(450,821), corner_timer=0.00
[20:15:26] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:15:26] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=165.9°, current=-65.5°, player=(450,812), corner_timer=0.00
[20:15:26] [ENEMY] [Enemy4] Memory: high confidence (0.89) - transitioning to PURSUING
[20:15:26] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:15:26] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:15:26] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:15:26] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=-163.5°, current=-67.5°, player=(450,796), corner_timer=0.00
[20:15:26] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,796), corner_timer=0.30
[20:15:26] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,796), corner_timer=0.30
[20:15:26] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[20:15:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 790.6666), source=PLAYER (MakarovPM), range=1469, listeners=20
[20:15:26] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:15:26] [ENEMY] [Enemy1] Heard gunshot at (460, 790.6666), source_type=0, intensity=0.01, distance=469
[20:15:26] [ENEMY] [Enemy2] Heard gunshot at (460, 790.6666), source_type=0, intensity=0.04, distance=248
[20:15:26] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:15:26] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=71.0°, current=168.8°, player=(450,784), corner_timer=0.00
[20:15:26] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=78.0°, current=45.0°, player=(450,784), corner_timer=0.00
[20:15:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 790.4444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:15:26] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:15:26] [ENEMY] [Enemy3] Hit: dmg=1, hp=2/2->1/2
[20:15:26] [INFO] [ImpactEffects] spawn_blood_effect called at (684.5023, 753.9762), dir=(0.990011, -0.140987), lethal=false
[20:15:26] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:26] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:15:26] [INFO] [ImpactEffects] Blood effect spawned at (684.5023, 753.9762) (scale=0.5)
[20:15:26] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=172.6°, current=171.9°, player=(450,784), corner_timer=0.00
[20:15:26] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,784), corner_timer=-0.02
[20:15:26] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:15:26] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,784), corner_timer=-0.02
[20:15:26] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:15:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.5023, 753.9762), source=ENEMY (Enemy3), range=1469, listeners=10
[20:15:26] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:15:26] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,784), corner_timer=0.30
[20:15:26] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,784), corner_timer=0.30
[20:15:26] [INFO] [LastChance] Threat detected: Bullet
[20:15:26] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:15:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:26] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:15:26] [INFO] [Player] Spawning blood effect at (450, 784.4444), dir=(1, 0), lethal=False (C#)
[20:15:26] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 784.4444), dir=(1, 0), lethal=false
[20:15:26] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:26] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:15:26] [INFO] [ImpactEffects] Blood effect spawned at (450, 784.4444) (scale=1)
[20:15:26] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:15:26] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:15:27] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:15:27] [ENEMY] [Enemy3] Hit: dmg=1, hp=1/2->0/2
[20:15:27] [INFO] [ImpactEffects] spawn_blood_effect called at (684.5023, 753.9762), dir=(0.988824, -0.149087), lethal=true
[20:15:27] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:27] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[20:15:27] [INFO] [ImpactEffects] Blood effect spawned at (684.5023, 753.9762) (scale=0.75)
[20:15:27] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[20:15:27] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[20:15:27] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[20:15:27] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[20:15:27] [INFO] [DeathAnim] Started - Angle: -8.6 deg, Index: 11
[20:15:27] [ENEMY] [Enemy3] Death animation started with hit direction: (0.988824, -0.149087)
[20:15:27] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:15:27] [ENEMY] [Enemy4] PURSUING corner check: angle -94.0°
[20:15:27] [INFO] [Player] Stun ended (Issue #592)
[20:15:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 790.4444), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:15:27] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[20:15:27] [INFO] [BloodDecal] Blood puddle created at (736.1877, 751.7812) (added to group)
[20:15:27] [INFO] [BloodDecal] Blood puddle created at (734.0749, 744.3321) (added to group)
[20:15:27] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:15:27] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[20:15:27] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,784), corner_timer=-0.02
[20:15:27] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[20:15:27] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,784), corner_timer=0.30
[20:15:27] [INFO] [BloodDecal] Blood puddle created at (760.4083, 795.2142) (added to group)
[20:15:27] [INFO] [BloodDecal] Blood puddle created at (770.0798, 753.4123) (added to group)
[20:15:27] [INFO] [BloodDecal] Blood puddle created at (753.9637, 783.0442) (added to group)
[20:15:27] [INFO] [BloodDecal] Blood puddle created at (524.8876, 771.1316) (added to group)
[20:15:27] [INFO] [BloodDecal] Blood puddle created at (763.4006, 724.9219) (added to group)
[20:15:27] [INFO] [BloodDecal] Blood puddle created at (761.2638, 741.1809) (added to group)
[20:15:27] [INFO] [BloodDecal] Blood puddle created at (758.0841, 746.8239) (added to group)
[20:15:27] [INFO] [BloodDecal] Blood puddle created at (746.8225, 755.9168) (added to group)
[20:15:27] [INFO] [BloodDecal] Blood puddle created at (816.2227, 787.2733) (added to group)
[20:15:27] [INFO] [BloodDecal] Blood puddle created at (759.7575, 729.5178) (added to group)
[20:15:27] [INFO] [BloodDecal] Blood puddle created at (772.2637, 754.3047) (added to group)
[20:15:27] [INFO] [BloodDecal] Blood puddle created at (795.5548, 755.492) (added to group)
[20:15:27] [INFO] [BloodDecal] Blood puddle created at (765.4957, 775.1393) (added to group)
[20:15:27] [INFO] [BloodDecal] Blood puddle created at (768.7679, 805.0482) (added to group)
[20:15:27] [INFO] [BloodDecal] Blood puddle created at (818.5852, 791.377) (added to group)
[20:15:27] [INFO] [BloodDecal] Blood puddle created at (864.5242, 778.9448) (added to group)
[20:15:27] [INFO] [BloodDecal] Blood puddle created at (747.1418, 806.4742) (added to group)
[20:15:27] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:27] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:15:27] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:15:27] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:15:27] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:27] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:15:27] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:15:27] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:15:27] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:15:27] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:27] [ENEMY] [Enemy1] Death animation component initialized
[20:15:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:27] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:15:27] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:15:27] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:15:27] [ENEMY] [Enemy2] Death animation component initialized
[20:15:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:27] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:15:27] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:15:27] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:15:27] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:27] [ENEMY] [Enemy3] Death animation component initialized
[20:15:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:27] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:15:27] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:15:27] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:15:27] [ENEMY] [Enemy4] Death animation component initialized
[20:15:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:27] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:15:27] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:15:27] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:15:27] [ENEMY] [Enemy5] Death animation component initialized
[20:15:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:27] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:15:27] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:15:27] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:15:27] [ENEMY] [Enemy6] Death animation component initialized
[20:15:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:27] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:15:27] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:15:27] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:15:27] [ENEMY] [Enemy7] Death animation component initialized
[20:15:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:27] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:15:27] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:15:27] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:15:27] [ENEMY] [Enemy8] Death animation component initialized
[20:15:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:27] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:15:27] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:15:27] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:15:27] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:27] [ENEMY] [Enemy9] Death animation component initialized
[20:15:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:27] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:15:27] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:15:27] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:15:27] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:27] [ENEMY] [Enemy10] Death animation component initialized
[20:15:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:27] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:15:27] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:15:27] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:15:27] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:15:27] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:15:27] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:15:27] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:15:27] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:15:27] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:15:27] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[20:15:27] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:15:27] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:15:27] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 2/4
[20:15:27] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:15:27] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:15:27] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:15:27] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:15:27] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:15:27] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:15:27] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:15:27] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:15:27] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:15:27] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:15:27] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:15:27] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:15:27] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:15:27] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:15:27] [INFO] [ScoreManager] Level started with 10 enemies
[20:15:27] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:15:27] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:15:27] [INFO] [ReplayManager] Replay data cleared
[20:15:27] [INFO] [BuildingLevel] Previous replay data cleared
[20:15:27] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:15:27] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:15:27] [INFO] [ReplayManager] Level: BuildingLevel
[20:15:27] [INFO] [ReplayManager] Player: Player (valid: True)
[20:15:27] [INFO] [ReplayManager] Enemies count: 10
[20:15:27] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:15:27] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:15:27] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:15:27] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:15:27] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:15:27] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:15:27] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:15:27] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:15:27] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:15:27] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:15:27] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:15:27] [INFO] [BuildingLevel] Replay recording started successfully
[20:15:27] [INFO] [BloodDecal] Blood puddle created at (792.288, 779.1293) (added to group)
[20:15:27] [INFO] [BloodDecal] Blood puddle created at (752.1161, 760.4206) (added to group)
[20:15:27] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:15:27] [INFO] [CinemaEffects] Found player node: Player
[20:15:27] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:15:27] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[20:15:27] [ENEMY] [Enemy1] Registered as sound listener
[20:15:27] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[20:15:27] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:15:27] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[20:15:27] [ENEMY] [Enemy2] Registered as sound listener
[20:15:27] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[20:15:27] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:15:27] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[20:15:27] [ENEMY] [Enemy3] Registered as sound listener
[20:15:27] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[20:15:27] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:15:27] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[20:15:27] [ENEMY] [Enemy4] Registered as sound listener
[20:15:27] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[20:15:27] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:15:27] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[20:15:27] [ENEMY] [Enemy5] Registered as sound listener
[20:15:27] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[20:15:27] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:15:27] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[20:15:27] [ENEMY] [Enemy6] Registered as sound listener
[20:15:27] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[20:15:27] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:15:27] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[20:15:27] [ENEMY] [Enemy7] Registered as sound listener
[20:15:27] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[20:15:27] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:15:27] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[20:15:27] [ENEMY] [Enemy8] Registered as sound listener
[20:15:27] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[20:15:27] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:15:27] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[20:15:27] [ENEMY] [Enemy9] Registered as sound listener
[20:15:27] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[20:15:27] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:15:27] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[20:15:27] [ENEMY] [Enemy10] Registered as sound listener
[20:15:27] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[20:15:27] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:15:27] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:15:27] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:27] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:27] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=236.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:27] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:27] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:27] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:27] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=213.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:27] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:27] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:15:27] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:15:27] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:15:27] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:15:27] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:15:27] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:15:27] [INFO] [LastChance] Found player: Player
[20:15:27] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:15:27] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:15:27] [INFO] [LastChance] Connected to player Died signal (C#)
[20:15:27] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:15:27] [INFO] [BloodDecal] Blood puddle created at (854.1478, 800.8666) (added to group)
[20:15:27] [INFO] [BloodDecal] Blood puddle created at (833.9247, 743.7734) (added to group)
[20:15:27] [INFO] [BloodDecal] Blood puddle created at (864.401, 753.6489) (added to group)
[20:15:27] [INFO] [BloodDecal] Blood puddle created at (624.4106, 796.0891) (added to group)
[20:15:27] [INFO] [BloodDecal] Blood puddle created at (624.8693, 805.7665) (added to group)
[20:15:27] [INFO] [BloodDecal] Blood puddle created at (864.4707, 863.6141) (added to group)
[20:15:27] [INFO] [BloodDecal] Blood puddle created at (829.7356, 824.1215) (added to group)
[20:15:27] [INFO] [BloodDecal] Blood puddle created at (837.5465, 856.2726) (added to group)
[20:15:27] [INFO] [BloodDecal] Blood puddle created at (824.0667, 853.4224) (added to group)
[20:15:27] [INFO] [BloodDecal] Blood puddle created at (771.8912, 805.7823) (added to group)
[20:15:28] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:15:28] [INFO] [Player.Debug] Debug mode toggled: ON
[20:15:28] [INFO] [GameManager] Debug mode toggled: ON
[20:15:29] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:15:29] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:15:29] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1156), corner_timer=0.30
[20:15:29] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1156), corner_timer=0.30
[20:15:29] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,1146), corner_timer=-0.02
[20:15:29] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:15:29] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,1146), corner_timer=-0.02
[20:15:29] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:15:29] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,1144), corner_timer=0.30
[20:15:29] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,1144), corner_timer=0.30
[20:15:29] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:15:29] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,1050), corner_timer=-0.02
[20:15:29] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[20:15:29] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,1044), corner_timer=0.30
[20:15:30] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,940), corner_timer=-0.02
[20:15:30] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[20:15:30] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,934), corner_timer=0.30
[20:15:30] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(450,830), corner_timer=-0.02
[20:15:30] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[20:15:30] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(450,824), corner_timer=0.30
[20:15:30] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[20:15:30] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(450,767), corner_timer=-0.02
[20:15:30] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[20:15:30] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(450,767), corner_timer=0.30
[20:15:31] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:31] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(450,767), corner_timer=-0.02
[20:15:31] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[20:15:31] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(450,767), corner_timer=0.30
[20:15:31] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 773.5555), source=PLAYER (MakarovPM), range=1469, listeners=19
[20:15:31] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[20:15:31] [ENEMY] [Enemy1] Heard gunshot at (460, 773.5555), source_type=0, intensity=0.01, distance=453
[20:15:31] [ENEMY] [Enemy2] Heard gunshot at (460, 773.5555), source_type=0, intensity=0.05, distance=231
[20:15:31] [ENEMY] [Enemy3] Heard gunshot at (460, 773.5555), source_type=0, intensity=0.04, distance=241
[20:15:31] [ENEMY] [Enemy4] Heard gunshot at (460, 773.5555), source_type=0, intensity=0.02, distance=363
[20:15:31] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:15:31] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=70.2°, current=-157.5°, player=(450,767), corner_timer=0.00
[20:15:31] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=77.1°, current=-101.3°, player=(450,767), corner_timer=0.00
[20:15:31] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=176.0°, current=-123.8°, player=(450,767), corner_timer=0.00
[20:15:31] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-159.3°, current=-67.5°, player=(450,767), corner_timer=0.00
[20:15:31] [INFO] [ReplayManager] Recording frame 240 (4,0s): player_valid=True, enemies=10
[20:15:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 773.5555), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:15:31] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:15:31] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(450,767), corner_timer=-0.02
[20:15:31] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[20:15:31] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(450,767), corner_timer=0.30
[20:15:31] [ENEMY] [Enemy3] Hit: dmg=1, hp=2/2->1/2
[20:15:31] [INFO] [ImpactEffects] spawn_blood_effect called at (689.3595, 750.7472), dir=(0.999398, -0.034701), lethal=false
[20:15:31] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:31] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:15:31] [INFO] [ImpactEffects] Blood effect spawned at (689.3595, 750.7472) (scale=0.5)
[20:15:31] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=176.0°, current=178.0°, player=(450,767), corner_timer=0.00
[20:15:31] [INFO] [EnemyGrenade] Unsafe throw distance (240 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:31] [INFO] [EnemyGrenade] Unsafe throw distance (240 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.3595, 750.7472), source=ENEMY (Enemy3), range=1469, listeners=10
[20:15:31] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:15:31] [INFO] [EnemyGrenade] Unsafe throw distance (240 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:31] [INFO] [LastChance] Threat detected: Bullet
[20:15:31] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:15:31] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:31] [INFO] [EnemyGrenade] Unsafe throw distance (240 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:31] [INFO] [EnemyGrenade] Unsafe throw distance (240 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:31] [INFO] [EnemyGrenade] Unsafe throw distance (240 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:31] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:15:31] [INFO] [Player] Spawning blood effect at (450, 767.5555), dir=(1, 0), lethal=False (C#)
[20:15:31] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 767.5555), dir=(1, 0), lethal=false
[20:15:31] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:31] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:15:31] [INFO] [ImpactEffects] Blood effect spawned at (450, 767.5555) (scale=1)
[20:15:31] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:15:31] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:15:31] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:15:31] [INFO] [EnemyGrenade] Unsafe throw distance (240 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:31] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:31] [INFO] [EnemyGrenade] Unsafe throw distance (240 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:31] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:15:31] [INFO] [EnemyGrenade] Unsafe throw distance (240 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:31] [ENEMY] [Enemy3] Hit: dmg=1, hp=1/2->0/2
[20:15:31] [INFO] [ImpactEffects] spawn_blood_effect called at (686.7375, 750.2609), dir=(0.996228, -0.086772), lethal=true
[20:15:31] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:31] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[20:15:31] [INFO] [ImpactEffects] Blood effect spawned at (686.7375, 750.2609) (scale=0.75)
[20:15:31] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[20:15:31] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[20:15:31] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[20:15:31] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[20:15:31] [INFO] [DeathAnim] Started - Angle: -5.0 deg, Index: 11
[20:15:31] [ENEMY] [Enemy3] Death animation started with hit direction: (0.996228, -0.086772)
[20:15:31] [INFO] [Player] Stun ended (Issue #592)
[20:15:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 773.5555), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:15:31] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[20:15:31] [INFO] [BloodDecal] Blood puddle created at (745.8828, 772.0188) (added to group)
[20:15:31] [INFO] [BloodDecal] Blood puddle created at (740.1843, 777.7126) (added to group)
[20:15:31] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(450,767), corner_timer=-0.02
[20:15:31] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[20:15:31] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:15:31] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[20:15:31] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[20:15:31] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(450,767), corner_timer=0.30
[20:15:31] [INFO] [BloodDecal] Blood puddle created at (792.3046, 722.5332) (added to group)
[20:15:31] [INFO] [BloodDecal] Blood puddle created at (788.1884, 775.149) (added to group)
[20:15:31] [INFO] [BloodDecal] Blood puddle created at (825.6614, 781.0651) (added to group)
[20:15:31] [INFO] [BloodDecal] Blood puddle created at (509.0728, 764.623) (added to group)
[20:15:31] [INFO] [BloodDecal] Blood puddle created at (498.7854, 762.8024) (added to group)
[20:15:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 773.5555), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:15:31] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[20:15:32] [INFO] [BloodDecal] Blood puddle created at (525.0149, 772.7198) (added to group)
[20:15:32] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:32] [INFO] [BloodDecal] Blood puddle created at (728.9067, 779.8807) (added to group)
[20:15:32] [INFO] [BloodDecal] Blood puddle created at (740.9631, 739.266) (added to group)
[20:15:32] [INFO] [BloodDecal] Blood puddle created at (836.7109, 826.2536) (added to group)
[20:15:32] [INFO] [BloodDecal] Blood puddle created at (511.4812, 798.8136) (added to group)
[20:15:32] [INFO] [BloodDecal] Blood puddle created at (735.4827, 752.9377) (added to group)
[20:15:32] [INFO] [BloodDecal] Blood puddle created at (772.7084, 791.8332) (added to group)
[20:15:32] [INFO] [BloodDecal] Blood puddle created at (762.987, 805.5646) (added to group)
[20:15:32] [INFO] [BloodDecal] Blood puddle created at (815.4748, 750.9037) (added to group)
[20:15:32] [INFO] [BloodDecal] Blood puddle created at (864.1857, 856.4022) (added to group)
[20:15:32] [INFO] [BloodDecal] Blood puddle created at (811.3141, 765.7255) (added to group)
[20:15:32] [INFO] [BloodDecal] Blood puddle created at (777.0522, 789.5339) (added to group)
[20:15:32] [INFO] [BloodDecal] Blood puddle created at (820.0496, 839.9135) (added to group)
[20:15:32] [INFO] [BloodDecal] Blood puddle created at (795.1568, 817.1226) (added to group)
[20:15:32] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(450,767), corner_timer=-0.02
[20:15:32] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[20:15:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(460, 773.5555), shooter_id=477177580273, bullet_pos=(910.0515, 750.0077)
[20:15:32] [INFO] [Bullet] Using shooter_position, distance=450.667114257813
[20:15:32] [INFO] [Bullet] Distance to wall: 450.667114257813 (30.6867525135643% of viewport)
[20:15:32] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:32] [INFO] [Bullet] Caliber cannot penetrate walls
[20:15:32] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(450,767), corner_timer=0.30
[20:15:32] [ENEMY] [Enemy3] Ragdoll activated
[20:15:32] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[20:15:32] [INFO] [BloodDecal] Blood puddle created at (794.8775, 778.2764) (added to group)
[20:15:32] [INFO] [BloodDecal] Blood puddle created at (854.7589, 744.4278) (added to group)
[20:15:32] [INFO] [BloodDecal] Blood puddle created at (775.0637, 821.3579) (added to group)
[20:15:32] [INFO] [BloodDecal] Blood puddle created at (801.0073, 825.9088) (added to group)
[20:15:32] [INFO] [BloodDecal] Blood puddle created at (794.4718, 805.9676) (added to group)
[20:15:32] [INFO] [BloodDecal] Blood puddle created at (876.1191, 851.3713) (added to group)
[20:15:32] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:32] [INFO] [BloodDecal] Blood puddle created at (814.132, 843.6985) (added to group)
[20:15:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(460, 773.5555), shooter_id=477177580273, bullet_pos=(909.857, 746.5618)
[20:15:32] [INFO] [Bullet] Using shooter_position, distance=450.666137695313
[20:15:32] [INFO] [Bullet] Distance to wall: 450.666137695313 (30.686686017628% of viewport)
[20:15:32] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:32] [INFO] [Bullet] Caliber cannot penetrate walls
[20:15:32] [INFO] [BloodDecal] Blood puddle created at (881.8763, 757.5487) (added to group)
[20:15:32] [INFO] [ReplayManager] Recording frame 300 (5,0s): player_valid=True, enemies=10
[20:15:32] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(450,767), corner_timer=-0.02
[20:15:32] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[20:15:32] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(450,767), corner_timer=0.30
[20:15:32] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:32] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.5°, current=89.5°, player=(457,767), corner_timer=-0.02
[20:15:32] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[20:15:32] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(459,767), corner_timer=0.30
[20:15:32] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[20:15:33] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:33] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=56.3°, current=57.4°, player=(544,767), corner_timer=0.00
[20:15:33] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[20:15:33] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.4°, current=89.5°, player=(550,767), corner_timer=-0.02
[20:15:33] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[20:15:33] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.3°, player=(555,767), corner_timer=0.30
[20:15:33] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[20:15:33] [ENEMY] [Enemy3] Death animation completed
[20:15:33] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[20:15:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(406.6882, 558.3089), source=ENEMY (Enemy2), range=1469, listeners=9
[20:15:33] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
[20:15:33] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:33] [INFO] [LastChance] Threat detected: Bullet
[20:15:33] [INFO] [LastChance] Triggering last chance effect!
[20:15:33] [INFO] [LastChance] Starting last chance effect:
[20:15:33] [INFO] [LastChance]   - Time will be frozen (except player)
[20:15:33] [INFO] [LastChance]   - Duration: 6.00 real seconds
[20:15:33] [INFO] [LastChance]   - Trigger: threat detected
[20:15:33] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:15:33] [INFO] [LastChance]   - Brightness: 0.60
[20:15:33] [INFO] [LastChance] Pushed bullet Bullet from distance 135.2 to 200.0
[20:15:33] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[20:15:33] [INFO] [LastChance] Set player Player and all 26 children to PROCESS_MODE_ALWAYS
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:15:33] [INFO] [LastChance] Skipping player node: Player
[20:15:33] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:15:33] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2024
[20:15:33] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2026
[20:15:33] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2030
[20:15:33] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2039
[20:15:33] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2075
[20:15:33] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:15:33] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:15:33] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:15:33] [INFO] [ReplayManager] Recording frame 360 (6,0s): player_valid=True, enemies=10
[20:15:34] [INFO] [ReplayManager] Recording frame 420 (7,0s): player_valid=True, enemies=10
[20:15:34] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:34] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:34] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:15:34] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:15:34] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:15:34] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:34] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:15:34] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:15:34] [INFO] [LastChance] All process modes restored
[20:15:34] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:15:34] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:15:34] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:15:34] [ENEMY] [Enemy1] Death animation component initialized
[20:15:34] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:34] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:15:34] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:15:34] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:15:34] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:34] [ENEMY] [Enemy2] Death animation component initialized
[20:15:34] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:34] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:15:34] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:15:34] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:15:34] [ENEMY] [Enemy3] Death animation component initialized
[20:15:34] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:34] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:15:34] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:15:34] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:15:34] [ENEMY] [Enemy4] Death animation component initialized
[20:15:34] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:34] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:15:34] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:15:34] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:15:34] [ENEMY] [Enemy5] Death animation component initialized
[20:15:34] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:34] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:15:34] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:15:34] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:15:34] [ENEMY] [Enemy6] Death animation component initialized
[20:15:34] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:34] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:15:34] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:15:34] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:15:34] [ENEMY] [Enemy7] Death animation component initialized
[20:15:34] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:34] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:15:34] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:15:34] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:15:34] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:34] [ENEMY] [Enemy8] Death animation component initialized
[20:15:34] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:34] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:15:34] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:15:34] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:15:34] [ENEMY] [Enemy9] Death animation component initialized
[20:15:34] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:34] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:15:34] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:15:34] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:15:34] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:34] [ENEMY] [Enemy10] Death animation component initialized
[20:15:34] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:34] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:15:34] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:15:34] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:15:34] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:15:34] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:15:34] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:15:34] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:15:34] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:15:34] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:15:34] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:15:34] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:15:34] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:15:34] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 2/4
[20:15:34] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:15:34] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:15:34] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:15:34] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:15:34] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:15:34] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:15:34] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:15:34] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:15:34] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:15:34] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:15:34] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:15:34] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:15:34] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:15:34] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:15:34] [INFO] [ScoreManager] Level started with 10 enemies
[20:15:34] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:15:34] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:15:34] [INFO] [ReplayManager] Replay data cleared
[20:15:34] [INFO] [BuildingLevel] Previous replay data cleared
[20:15:34] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:15:34] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:15:34] [INFO] [ReplayManager] Level: BuildingLevel
[20:15:34] [INFO] [ReplayManager] Player: Player (valid: True)
[20:15:34] [INFO] [ReplayManager] Enemies count: 10
[20:15:34] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:15:34] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:15:34] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:15:34] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:15:34] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:15:34] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:15:34] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:15:34] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:15:34] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:15:34] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:15:34] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:15:34] [INFO] [BuildingLevel] Replay recording started successfully
[20:15:34] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:15:34] [INFO] [CinemaEffects] Found player node: Player
[20:15:34] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:15:34] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[20:15:34] [ENEMY] [Enemy1] Registered as sound listener
[20:15:34] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[20:15:34] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:15:34] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[20:15:34] [ENEMY] [Enemy2] Registered as sound listener
[20:15:34] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[20:15:34] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:15:34] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[20:15:34] [ENEMY] [Enemy3] Registered as sound listener
[20:15:34] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[20:15:34] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:15:34] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[20:15:34] [ENEMY] [Enemy4] Registered as sound listener
[20:15:34] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[20:15:34] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:15:34] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[20:15:34] [ENEMY] [Enemy5] Registered as sound listener
[20:15:34] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[20:15:34] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:15:34] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[20:15:34] [ENEMY] [Enemy6] Registered as sound listener
[20:15:34] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[20:15:34] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:15:34] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[20:15:34] [ENEMY] [Enemy7] Registered as sound listener
[20:15:34] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[20:15:34] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:15:34] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[20:15:34] [ENEMY] [Enemy8] Registered as sound listener
[20:15:34] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[20:15:34] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:15:34] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[20:15:34] [ENEMY] [Enemy9] Registered as sound listener
[20:15:34] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[20:15:34] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:15:34] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[20:15:34] [ENEMY] [Enemy10] Registered as sound listener
[20:15:34] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[20:15:34] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:15:34] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:15:34] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:34] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:34] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=236.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:34] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:34] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:34] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:34] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:34] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:34] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:15:34] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:15:34] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:15:34] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:15:34] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:15:34] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:15:34] [INFO] [LastChance] Found player: Player
[20:15:34] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:15:34] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:15:34] [INFO] [LastChance] Connected to player Died signal (C#)
[20:15:34] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:15:35] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:15:36] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:15:36] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:15:36] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,819), corner_timer=0.30
[20:15:36] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,819), corner_timer=0.30
[20:15:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 775.8333), source=PLAYER (MakarovPM), range=1469, listeners=19
[20:15:36] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[20:15:36] [ENEMY] [Enemy1] Heard gunshot at (460, 775.8333), source_type=0, intensity=0.01, distance=455
[20:15:36] [ENEMY] [Enemy2] Heard gunshot at (460, 775.8333), source_type=0, intensity=0.05, distance=234
[20:15:36] [ENEMY] [Enemy3] Heard gunshot at (460, 775.8333), source_type=0, intensity=0.04, distance=241
[20:15:36] [ENEMY] [Enemy4] Heard gunshot at (460, 775.8333), source_type=0, intensity=0.02, distance=362
[20:15:36] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:15:36] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=70.3°, current=-157.5°, player=(450,769), corner_timer=0.00
[20:15:36] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=77.2°, current=45.0°, player=(450,769), corner_timer=0.00
[20:15:36] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=175.5°, current=-123.8°, player=(450,769), corner_timer=0.00
[20:15:36] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-159.6°, current=168.8°, player=(450,769), corner_timer=0.00
[20:15:36] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,762), corner_timer=-0.02
[20:15:36] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:15:36] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,762), corner_timer=-0.02
[20:15:36] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:15:36] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,762), corner_timer=0.30
[20:15:36] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,762), corner_timer=0.30
[20:15:36] [ENEMY] [Enemy3] Hit: dmg=1, hp=2/2->1/2
[20:15:36] [INFO] [ImpactEffects] spawn_blood_effect called at (689.3667, 750.8436), dir=(0.999747, -0.022486), lethal=false
[20:15:36] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:36] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:15:36] [INFO] [ImpactEffects] Blood effect spawned at (689.3667, 750.8436) (scale=0.5)
[20:15:36] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=177.2°, current=178.7°, player=(450,762), corner_timer=0.00
[20:15:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.3667, 750.8436), source=ENEMY (Enemy3), range=1469, listeners=10
[20:15:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:15:36] [INFO] [LastChance] Threat detected: Bullet
[20:15:36] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:15:36] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:36] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:15:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 768.4444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:15:36] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:15:36] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:15:36] [INFO] [Player] Spawning blood effect at (450, 762.4444), dir=(1, 0), lethal=False (C#)
[20:15:36] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 762.4444), dir=(1, 0), lethal=false
[20:15:36] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:36] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:15:36] [INFO] [ImpactEffects] Blood effect spawned at (450, 762.4444) (scale=1)
[20:15:36] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:15:36] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:15:36] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:15:36] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:15:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(682.3959, 747.2314), source=ENEMY (Enemy3), range=1469, listeners=10
[20:15:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:15:36] [INFO] [Player] Stun ended (Issue #592)
[20:15:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(673.6771, 741.0864), source=ENEMY (Enemy3), range=1469, listeners=10
[20:15:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:15:36] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,762), corner_timer=-0.02
[20:15:36] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[20:15:36] [ENEMY] [Enemy3] Hit: dmg=1, hp=1/2->0/2
[20:15:36] [INFO] [ImpactEffects] spawn_blood_effect called at (671.4974, 739.5501), dir=(0.997925, -0.06438), lethal=true
[20:15:36] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:36] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[20:15:36] [INFO] [ImpactEffects] Blood effect spawned at (671.4974, 739.5501) (scale=0.75)
[20:15:36] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[20:15:36] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[20:15:36] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[20:15:36] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[20:15:36] [INFO] [DeathAnim] Started - Angle: -3.7 deg, Index: 11
[20:15:36] [ENEMY] [Enemy3] Death animation started with hit direction: (0.997925, -0.06438)
[20:15:36] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,762), corner_timer=0.30
[20:15:36] [INFO] [BloodDecal] Blood puddle created at (734.7455, 766.9013) (added to group)
[20:15:36] [INFO] [BloodDecal] Blood puddle created at (741.8818, 771.156) (added to group)
[20:15:36] [INFO] [LastChance] Threat detected: @Area2D@2339
[20:15:36] [INFO] [LastChance] Triggering last chance effect!
[20:15:36] [INFO] [LastChance] Starting last chance effect:
[20:15:36] [INFO] [LastChance]   - Time will be frozen (except player)
[20:15:36] [INFO] [LastChance]   - Duration: 6.00 real seconds
[20:15:36] [INFO] [LastChance]   - Trigger: threat detected
[20:15:36] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:15:36] [INFO] [LastChance]   - Brightness: 0.60
[20:15:36] [INFO] [LastChance] Pushed bullet Bullet from distance 67.0 to 200.0
[20:15:36] [INFO] [LastChance] Pushed bullet @Area2D@2339 from distance 115.8 to 200.0
[20:15:36] [INFO] [LastChance] Pushed 2 threatening bullets away from player
[20:15:36] [INFO] [LastChance] Set player Player and all 26 children to PROCESS_MODE_ALWAYS
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:15:36] [INFO] [LastChance] Skipping player node: Player
[20:15:36] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:15:36] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2334
[20:15:36] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2336
[20:15:36] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:15:36] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:15:36] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:15:36] [INFO] [LastChance] Freezing newly fired player bullet: Bullet9mm
[20:15:36] [INFO] [LastChance] Registered frozen player bullet: Bullet9mm
[20:15:36] [INFO] [LastChance] Freezing newly created explosion effect: PointLight2D
[20:15:36] [INFO] [LastChance] Registered frozen explosion effect: PointLight2D
[20:15:36] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@2347
[20:15:36] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@2347
[20:15:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 768.4444), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:15:36] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[20:15:36] [INFO] [BloodDecal] Blood puddle created at (761.2654, 757.6212) (added to group)
[20:15:36] [INFO] [BloodDecal] Blood puddle created at (499.5248, 766.5343) (added to group)
[20:15:36] [INFO] [BloodDecal] Blood puddle created at (786.0564, 800.296) (added to group)
[20:15:36] [INFO] [BloodDecal] Blood puddle created at (805.7227, 751.1384) (added to group)
[20:15:36] [INFO] [BloodDecal] Blood puddle created at (556.6371, 799.5553) (added to group)
[20:15:36] [INFO] [BloodDecal] Blood puddle created at (711.0085, 770.3205) (added to group)
[20:15:37] [INFO] [BloodDecal] Blood puddle created at (736.4765, 770.0469) (added to group)
[20:15:37] [INFO] [BloodDecal] Blood puddle created at (760.5085, 753.5308) (added to group)
[20:15:37] [INFO] [BloodDecal] Blood puddle created at (744.0186, 754.0945) (added to group)
[20:15:37] [INFO] [BloodDecal] Blood puddle created at (756.2019, 735.6956) (added to group)
[20:15:37] [INFO] [BloodDecal] Blood puddle created at (580.4122, 814.4303) (added to group)
[20:15:37] [INFO] [BloodDecal] Blood puddle created at (734.2302, 753.689) (added to group)
[20:15:37] [INFO] [BloodDecal] Blood puddle created at (781.3674, 710.2104) (added to group)
[20:15:37] [INFO] [BloodDecal] Blood puddle created at (877.7385, 784.0915) (added to group)
[20:15:37] [INFO] [BloodDecal] Blood puddle created at (796.6116, 759.9104) (added to group)
[20:15:37] [INFO] [BloodDecal] Blood puddle created at (903.088, 813.226) (added to group)
[20:15:37] [INFO] [BloodDecal] Blood puddle created at (791.7228, 719.2286) (added to group)
[20:15:37] [INFO] [BloodDecal] Blood puddle created at (783.722, 786.3757) (added to group)
[20:15:37] [INFO] [BloodDecal] Blood puddle created at (904.1876, 903.238) (added to group)
[20:15:37] [INFO] [BloodDecal] Blood puddle created at (810.3806, 806.3422) (added to group)
[20:15:37] [INFO] [BloodDecal] Blood puddle created at (827.3143, 815.0199) (added to group)
[20:15:37] [INFO] [BloodDecal] Blood puddle created at (630.3989, 798.6495) (added to group)
[20:15:37] [INFO] [BloodDecal] Blood puddle created at (814.3466, 845.2677) (added to group)
[20:15:37] [INFO] [BloodDecal] Blood puddle created at (760.0474, 788.312) (added to group)
[20:15:37] [INFO] [BloodDecal] Blood puddle created at (890.9919, 803.1522) (added to group)
[20:15:37] [INFO] [BloodDecal] Blood puddle created at (833.1525, 851.1267) (added to group)
[20:15:37] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:37] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:15:37] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:15:37] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:15:37] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:37] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:15:37] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:15:37] [INFO] [LastChance] All process modes restored
[20:15:37] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:15:37] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:15:37] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:15:37] [ENEMY] [Enemy1] Death animation component initialized
[20:15:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:37] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:15:37] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:15:37] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:15:37] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:37] [ENEMY] [Enemy2] Death animation component initialized
[20:15:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:37] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:15:37] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:15:37] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:15:37] [ENEMY] [Enemy3] Death animation component initialized
[20:15:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:37] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:15:37] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:15:37] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:15:37] [ENEMY] [Enemy4] Death animation component initialized
[20:15:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:37] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:15:37] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:15:37] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:15:37] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:37] [ENEMY] [Enemy5] Death animation component initialized
[20:15:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:37] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:15:37] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:15:37] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:15:37] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:37] [ENEMY] [Enemy6] Death animation component initialized
[20:15:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:37] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:15:37] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:15:37] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:15:37] [ENEMY] [Enemy7] Death animation component initialized
[20:15:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:37] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:15:37] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:15:37] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:15:37] [ENEMY] [Enemy8] Death animation component initialized
[20:15:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:37] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:15:37] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:15:37] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:15:37] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:37] [ENEMY] [Enemy9] Death animation component initialized
[20:15:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:37] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:15:37] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:15:37] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:15:37] [ENEMY] [Enemy10] Death animation component initialized
[20:15:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:37] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:15:37] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:15:37] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:15:37] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:15:37] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:15:37] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:15:37] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:15:37] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:15:37] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:15:37] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:15:37] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:15:37] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:15:37] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 3/4
[20:15:37] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:15:37] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:15:37] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:15:37] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:15:37] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:15:37] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:15:37] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:15:37] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:15:37] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:15:37] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:15:37] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:15:37] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:15:37] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:15:37] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:15:37] [INFO] [ScoreManager] Level started with 10 enemies
[20:15:37] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:15:37] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:15:37] [INFO] [ReplayManager] Replay data cleared
[20:15:37] [INFO] [BuildingLevel] Previous replay data cleared
[20:15:37] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:15:37] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:15:37] [INFO] [ReplayManager] Level: BuildingLevel
[20:15:37] [INFO] [ReplayManager] Player: Player (valid: True)
[20:15:37] [INFO] [ReplayManager] Enemies count: 10
[20:15:37] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:15:37] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:15:37] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:15:37] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:15:37] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:15:37] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:15:37] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:15:37] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:15:37] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:15:37] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:15:37] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:15:37] [INFO] [BuildingLevel] Replay recording started successfully
[20:15:37] [INFO] [BloodDecal] Blood puddle created at (826.3967, 798.2426) (added to group)
[20:15:37] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:15:37] [INFO] [CinemaEffects] Found player node: Player
[20:15:37] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:15:37] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[20:15:37] [ENEMY] [Enemy1] Registered as sound listener
[20:15:37] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[20:15:37] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:15:37] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[20:15:37] [ENEMY] [Enemy2] Registered as sound listener
[20:15:37] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[20:15:37] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:15:37] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[20:15:37] [ENEMY] [Enemy3] Registered as sound listener
[20:15:37] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[20:15:37] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:15:37] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[20:15:37] [ENEMY] [Enemy4] Registered as sound listener
[20:15:37] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[20:15:37] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:15:37] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[20:15:37] [ENEMY] [Enemy5] Registered as sound listener
[20:15:37] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[20:15:37] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:15:37] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[20:15:37] [ENEMY] [Enemy6] Registered as sound listener
[20:15:37] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[20:15:37] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:15:37] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[20:15:37] [ENEMY] [Enemy7] Registered as sound listener
[20:15:37] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[20:15:37] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:15:37] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[20:15:37] [ENEMY] [Enemy8] Registered as sound listener
[20:15:37] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[20:15:37] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:15:37] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[20:15:37] [ENEMY] [Enemy9] Registered as sound listener
[20:15:37] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[20:15:37] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:15:37] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[20:15:37] [ENEMY] [Enemy10] Registered as sound listener
[20:15:37] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[20:15:37] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:15:37] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:15:37] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:37] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:37] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:37] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:37] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:37] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:37] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:37] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:37] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:15:37] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:15:37] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:15:37] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:15:37] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:15:37] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:15:37] [INFO] [LastChance] Found player: Player
[20:15:37] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:15:37] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:15:37] [INFO] [LastChance] Connected to player Died signal (C#)
[20:15:37] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:15:38] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:15:38] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:15:38] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:15:39] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,819), corner_timer=0.30
[20:15:39] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,819), corner_timer=0.30
[20:15:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 800.4444), source=PLAYER (MakarovPM), range=1469, listeners=19
[20:15:39] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[20:15:39] [ENEMY] [Enemy1] Heard gunshot at (460, 800.4444), source_type=0, intensity=0.01, distance=478
[20:15:39] [ENEMY] [Enemy2] Heard gunshot at (460, 800.4444), source_type=0, intensity=0.04, distance=258
[20:15:39] [ENEMY] [Enemy3] Heard gunshot at (460, 800.4444), source_type=0, intensity=0.04, distance=245
[20:15:39] [ENEMY] [Enemy4] Heard gunshot at (460, 800.4444), source_type=0, intensity=0.02, distance=354
[20:15:39] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:15:39] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=71.4°, current=-157.5°, player=(450,794), corner_timer=0.00
[20:15:39] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=78.4°, current=-67.5°, player=(450,794), corner_timer=0.00
[20:15:39] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=169.9°, current=11.3°, player=(450,794), corner_timer=0.00
[20:15:39] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-163.2°, current=168.8°, player=(450,794), corner_timer=0.00
[20:15:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(460, 800.4444), shooter_id=2818035419383, bullet_pos=(510.5682, 797.2877)
[20:15:39] [INFO] [Bullet] Using shooter_position, distance=50.6666679382324
[20:15:39] [INFO] [Bullet] Distance to wall: 50.6666679382324 (3.44998658770126% of viewport)
[20:15:39] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:15:39] [INFO] [Bullet] Caliber cannot penetrate walls
[20:15:39] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=170.7°, current=-176.0°, player=(450,791), corner_timer=0.00
[20:15:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.498, 751.8671), source=ENEMY (Enemy3), range=1469, listeners=10
[20:15:39] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:15:39] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,773), corner_timer=-0.02
[20:15:39] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:15:39] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,773), corner_timer=-0.02
[20:15:39] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:15:39] [INFO] [LastChance] Threat detected: Bullet
[20:15:39] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:15:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:39] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,773), corner_timer=0.30
[20:15:39] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,773), corner_timer=0.30
[20:15:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 779.4444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:15:39] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:15:39] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:15:39] [INFO] [Player] Spawning blood effect at (450, 773.4444), dir=(1, 0), lethal=False (C#)
[20:15:39] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 773.4444), dir=(1, 0), lethal=false
[20:15:39] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:39] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:15:39] [INFO] [ImpactEffects] Blood effect spawned at (450, 773.4444) (scale=1)
[20:15:39] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:15:39] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:15:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.498, 751.8671), source=ENEMY (Enemy3), range=1469, listeners=10
[20:15:39] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:15:39] [INFO] [LastChance] Threat detected: Bullet
[20:15:39] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:15:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:39] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:15:39] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:15:39] [INFO] [Player] Spawning blood effect at (450, 773.4444), dir=(1, 0), lethal=False (C#)
[20:15:39] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 773.4444), dir=(1, 0), lethal=false
[20:15:39] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:39] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:15:39] [INFO] [ImpactEffects] Blood effect spawned at (450, 773.4444) (scale=1)
[20:15:39] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:15:39] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:15:39] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:15:39] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:15:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.498, 751.8671), source=ENEMY (Enemy3), range=1469, listeners=10
[20:15:39] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:15:39] [ENEMY] [Enemy3] Hit: dmg=1, hp=2/2->1/2
[20:15:39] [INFO] [ImpactEffects] spawn_blood_effect called at (686.3884, 753.933), dir=(0.990073, -0.140551), lethal=false
[20:15:39] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:39] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:15:39] [INFO] [ImpactEffects] Blood effect spawned at (686.3884, 753.933) (scale=0.5)
[20:15:39] [INFO] [LastChance] Threat detected: Bullet
[20:15:39] [INFO] [LastChance] Triggering last chance effect!
[20:15:39] [INFO] [LastChance] Starting last chance effect:
[20:15:39] [INFO] [LastChance]   - Time will be frozen (except player)
[20:15:39] [INFO] [LastChance]   - Duration: 6.00 real seconds
[20:15:39] [INFO] [LastChance]   - Trigger: threat detected
[20:15:39] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:15:39] [INFO] [LastChance]   - Brightness: 0.60
[20:15:39] [INFO] [LastChance] Pushed bullet Bullet from distance 131.7 to 200.0
[20:15:39] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[20:15:39] [INFO] [LastChance] Set player Player and all 26 children to PROCESS_MODE_ALWAYS
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:15:39] [INFO] [LastChance] Skipping player node: Player
[20:15:39] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:15:39] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2631
[20:15:39] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2633
[20:15:39] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2635
[20:15:39] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:15:39] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:15:39] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:15:39] [INFO] [Player] Stun ended (Issue #592)
[20:15:39] [INFO] [LastChance] Freezing newly fired player bullet: Bullet9mm
[20:15:39] [INFO] [LastChance] Registered frozen player bullet: Bullet9mm
[20:15:39] [INFO] [LastChance] Freezing newly created explosion effect: PointLight2D
[20:15:39] [INFO] [LastChance] Registered frozen explosion effect: PointLight2D
[20:15:39] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@2639
[20:15:39] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@2639
[20:15:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 779.4444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:15:39] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:15:39] [INFO] [BloodDecal] Blood puddle created at (569.2689, 782.9844) (added to group)
[20:15:39] [INFO] [BloodDecal] Blood puddle created at (538.2093, 794.2901) (added to group)
[20:15:39] [INFO] [BloodDecal] Blood puddle created at (546.1444, 762.9412) (added to group)
[20:15:39] [INFO] [BloodDecal] Blood puddle created at (525.5591, 756.8103) (added to group)
[20:15:39] [INFO] [BloodDecal] Blood puddle created at (752.7661, 791.2568) (added to group)
[20:15:39] [INFO] [BloodDecal] Blood puddle created at (775.0563, 786.5883) (added to group)
[20:15:39] [INFO] [BloodDecal] Blood puddle created at (541.8846, 801.9756) (added to group)
[20:15:39] [INFO] [BloodDecal] Blood puddle created at (494.0255, 777.3557) (added to group)
[20:15:39] [INFO] [BloodDecal] Blood puddle created at (516.8574, 771.5974) (added to group)
[20:15:39] [INFO] [BloodDecal] Blood puddle created at (751.2627, 790.1183) (added to group)
[20:15:39] [INFO] [BloodDecal] Blood puddle created at (743.5317, 792.1755) (added to group)
[20:15:39] [INFO] [BloodDecal] Blood puddle created at (597.598, 763.7761) (added to group)
[20:15:39] [INFO] [BloodDecal] Blood puddle created at (564.691, 792.6864) (added to group)
[20:15:40] [INFO] [BloodDecal] Blood puddle created at (564.7057, 808.2508) (added to group)
[20:15:40] [INFO] [BloodDecal] Blood puddle created at (795.5799, 778.1989) (added to group)
[20:15:40] [INFO] [BloodDecal] Blood puddle created at (801.1985, 737.6802) (added to group)
[20:15:40] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:40] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:40] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:15:40] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:15:40] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:15:40] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:40] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:15:40] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:15:40] [INFO] [LastChance] All process modes restored
[20:15:40] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:15:40] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:15:40] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:15:40] [ENEMY] [Enemy1] Death animation component initialized
[20:15:40] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:40] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:15:40] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:15:40] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:15:40] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:40] [ENEMY] [Enemy2] Death animation component initialized
[20:15:40] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:40] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:15:40] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:15:40] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:15:40] [ENEMY] [Enemy3] Death animation component initialized
[20:15:40] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:40] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:15:40] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:15:40] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:15:40] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:40] [ENEMY] [Enemy4] Death animation component initialized
[20:15:40] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:40] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:15:40] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:15:40] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:15:40] [ENEMY] [Enemy5] Death animation component initialized
[20:15:40] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:40] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:15:40] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:15:40] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:15:40] [ENEMY] [Enemy6] Death animation component initialized
[20:15:40] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:40] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:15:40] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:15:40] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:15:40] [ENEMY] [Enemy7] Death animation component initialized
[20:15:40] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:40] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:15:40] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:15:40] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:15:40] [ENEMY] [Enemy8] Death animation component initialized
[20:15:40] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:40] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:15:40] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:15:40] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:15:40] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:40] [ENEMY] [Enemy9] Death animation component initialized
[20:15:40] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:40] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:15:40] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:15:40] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:15:40] [ENEMY] [Enemy10] Death animation component initialized
[20:15:40] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:40] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:15:40] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:15:40] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:15:40] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:15:40] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:15:40] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:15:40] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:15:40] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:15:40] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:15:40] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:15:40] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:15:40] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:15:40] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 4/4
[20:15:40] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:15:40] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:15:40] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:15:40] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:15:40] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:15:40] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:15:40] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:15:40] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:15:40] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:15:40] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:15:40] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:15:40] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:15:40] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:15:40] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:15:40] [INFO] [ScoreManager] Level started with 10 enemies
[20:15:40] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:15:40] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:15:40] [INFO] [ReplayManager] Replay data cleared
[20:15:40] [INFO] [BuildingLevel] Previous replay data cleared
[20:15:40] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:15:40] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:15:40] [INFO] [ReplayManager] Level: BuildingLevel
[20:15:40] [INFO] [ReplayManager] Player: Player (valid: True)
[20:15:40] [INFO] [ReplayManager] Enemies count: 10
[20:15:40] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:15:40] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:15:40] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:15:40] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:15:40] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:15:40] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:15:40] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:15:40] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:15:40] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:15:40] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:15:40] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:15:40] [INFO] [BuildingLevel] Replay recording started successfully
[20:15:40] [INFO] [BloodDecal] Blood puddle created at (876.0118, 837.2497) (added to group)
[20:15:40] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:15:40] [INFO] [CinemaEffects] Found player node: Player
[20:15:40] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:15:40] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:15:40] [ENEMY] [Enemy1] Registered as sound listener
[20:15:40] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[20:15:40] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:15:40] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:15:40] [ENEMY] [Enemy2] Registered as sound listener
[20:15:40] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[20:15:40] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:15:40] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:15:40] [ENEMY] [Enemy3] Registered as sound listener
[20:15:40] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[20:15:40] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:15:40] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:15:40] [ENEMY] [Enemy4] Registered as sound listener
[20:15:40] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[20:15:40] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:15:40] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:15:40] [ENEMY] [Enemy5] Registered as sound listener
[20:15:40] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[20:15:40] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:15:40] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:15:40] [ENEMY] [Enemy6] Registered as sound listener
[20:15:40] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[20:15:40] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:15:40] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:15:40] [ENEMY] [Enemy7] Registered as sound listener
[20:15:40] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[20:15:40] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:15:40] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:15:40] [ENEMY] [Enemy8] Registered as sound listener
[20:15:40] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[20:15:40] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:15:40] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:15:40] [ENEMY] [Enemy9] Registered as sound listener
[20:15:40] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[20:15:40] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:15:40] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:15:40] [ENEMY] [Enemy10] Registered as sound listener
[20:15:40] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[20:15:40] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:15:40] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:15:40] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:40] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:40] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:40] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:40] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:40] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=225.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:40] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:40] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:40] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:15:40] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:15:40] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:15:40] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:15:40] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:15:40] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:15:40] [INFO] [LastChance] Found player: Player
[20:15:40] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:15:40] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:15:40] [INFO] [LastChance] Connected to player Died signal (C#)
[20:15:40] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:15:40] [INFO] [BloodDecal] Blood puddle created at (793.7038, 798.395) (added to group)
[20:15:40] [INFO] [BloodDecal] Blood puddle created at (798.2394, 823.5906) (added to group)
[20:15:40] [INFO] [BloodDecal] Blood puddle created at (814.7903, 845.3248) (added to group)
[20:15:41] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:15:41] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:15:41] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:15:41] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,825), corner_timer=0.30
[20:15:41] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,825), corner_timer=0.30
[20:15:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(454.6776, 791.5273), source=PLAYER (MakarovPM), range=1469, listeners=20
[20:15:41] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:15:41] [ENEMY] [Enemy1] Heard gunshot at (454.6776, 791.5273), source_type=0, intensity=0.01, distance=468
[20:15:41] [ENEMY] [Enemy2] Heard gunshot at (454.6776, 791.5273), source_type=0, intensity=0.04, distance=248
[20:15:41] [ENEMY] [Enemy3] Heard gunshot at (454.6776, 791.5273), source_type=0, intensity=0.04, distance=249
[20:15:41] [ENEMY] [Enemy4] Heard gunshot at (454.6776, 791.5273), source_type=0, intensity=0.02, distance=362
[20:15:41] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:15:41] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=71.6°, current=33.8°, player=(444,785), corner_timer=0.00
[20:15:41] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=79.3°, current=168.8°, player=(444,785), corner_timer=0.00
[20:15:41] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=172.1°, current=11.3°, player=(444,785), corner_timer=0.00
[20:15:41] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-162.1°, current=-67.5°, player=(444,785), corner_timer=0.00
[20:15:41] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=173.0°, current=-173.8°, player=(442,781), corner_timer=0.00
[20:15:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(431.058, 764.7477), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:15:41] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:15:41] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(413,755), corner_timer=-0.02
[20:15:41] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:15:41] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(413,755), corner_timer=-0.02
[20:15:41] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:15:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.1302, 752.0329), source=ENEMY (Enemy3), range=1469, listeners=10
[20:15:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:15:42] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(410,754), corner_timer=0.30
[20:15:42] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(410,754), corner_timer=0.30
[20:15:42] [INFO] [LastChance] Threat detected: Bullet
[20:15:42] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:15:42] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:42] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:15:42] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:15:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.1302, 752.0329), source=ENEMY (Enemy3), range=1469, listeners=10
[20:15:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:15:42] [ENEMY] [Enemy3] Hit: dmg=1, hp=2/2->1/2
[20:15:42] [INFO] [ImpactEffects] spawn_blood_effect called at (679.4839, 746.1879), dir=(0.99363, -0.11269), lethal=false
[20:15:42] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:42] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:15:42] [INFO] [ImpactEffects] Blood effect spawned at (679.4839, 746.1879) (scale=0.5)
[20:15:42] [INFO] [LastChance] Threat detected: Bullet
[20:15:42] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:15:42] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(383.1418, 772.2339), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:15:42] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:15:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(454.6776, 791.5273), shooter_id=3587925084520, bullet_pos=(921.6282, 772.6263)
[20:15:42] [INFO] [Bullet] Using shooter_position, distance=467.332977294922
[20:15:42] [INFO] [Bullet] Distance to wall: 467.332977294922 (31.821561773581% of viewport)
[20:15:42] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:42] [INFO] [Bullet] Caliber cannot penetrate walls
[20:15:42] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:15:42] [INFO] [Player] Spawning blood effect at (369.44055, 772.0229), dir=(1, 0), lethal=False (C#)
[20:15:42] [INFO] [ImpactEffects] spawn_blood_effect called at (369.4406, 772.0229), dir=(1, 0), lethal=false
[20:15:42] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:42] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:15:42] [INFO] [ImpactEffects] Blood effect spawned at (369.4406, 772.0229) (scale=1)
[20:15:42] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:15:42] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:15:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(667.8683, 731.5755), source=ENEMY (Enemy3), range=1469, listeners=10
[20:15:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:15:42] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:15:42] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[20:15:42] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[20:15:42] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(362,783), corner_timer=-0.02
[20:15:42] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[20:15:42] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(361,785), corner_timer=0.30
[20:15:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(651.6064, 711.1181), source=ENEMY (Enemy3), range=1469, listeners=10
[20:15:42] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:15:42] [INFO] [Player] Stun ended (Issue #592)
[20:15:42] [INFO] [LastChance] Threat detected: Bullet
[20:15:42] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:15:42] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:42] [ENEMY] [Enemy3] Hit: dmg=1, hp=1/2->0/2
[20:15:42] [INFO] [ImpactEffects] spawn_blood_effect called at (642.3137, 699.4282), dir=(0.979327, -0.202281), lethal=true
[20:15:42] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:42] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[20:15:42] [INFO] [ImpactEffects] Blood effect spawned at (642.3137, 699.4282) (scale=0.75)
[20:15:42] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[20:15:42] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[20:15:42] [ENEMY] [Enemy3] [AllyDeath] Notified 3 enemies
[20:15:42] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[20:15:42] [INFO] [DeathAnim] Started - Angle: -11.7 deg, Index: 11
[20:15:42] [ENEMY] [Enemy3] Death animation started with hit direction: (0.979327, -0.202281)
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (727.8635, 754.5298) (added to group)
[20:15:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(602.08167, 748.3617), shooter_id=3584569641046, bullet_pos=(60.4702, 740.635)
[20:15:42] [INFO] [Bullet] Using shooter_position, distance=541,66656
[20:15:42] [INFO] [Bullet] Distance to wall: 541,66656 (36,883076% of viewport)
[20:15:42] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:42] [INFO] [Bullet] Starting wall penetration at (60.4702, 740.635)
[20:15:42] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:15:42] [INFO] [Player] Spawning blood effect at (357.32123, 805.1096), dir=(1, 0), lethal=False (C#)
[20:15:42] [INFO] [ImpactEffects] spawn_blood_effect called at (357.3212, 805.1096), dir=(1, 0), lethal=false
[20:15:42] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:42] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:15:42] [INFO] [ImpactEffects] Blood effect spawned at (357.3212, 805.1096) (scale=1)
[20:15:42] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:15:42] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:15:42] [INFO] [Bullet] Raycast backward hit penetrating body at distance 18,193575
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (725.5254, 782.0109) (added to group)
[20:15:42] [INFO] [Bullet] Body exited signal received for penetrating body
[20:15:42] [INFO] [Bullet] Exiting penetration at (13.808277, 739.9693) after traveling 41,666668 pixels through wall
[20:15:42] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (755.6649, 735.4429) (added to group)
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (735.9566, 798.3412) (added to group)
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (778.9985, 735.6026) (added to group)
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (420.3389, 805.3296) (added to group)
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (448.7693, 821.9595) (added to group)
[20:15:42] [INFO] [Player] Stun ended (Issue #592)
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (461.1889, 806.8897) (added to group)
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (449.7541, 789.7916) (added to group)
[20:15:42] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(355,833), corner_timer=-0.02
[20:15:42] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[20:15:42] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(355,836), corner_timer=0.30
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (729.5701, 706.1214) (added to group)
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (730.7121, 697.007) (added to group)
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (736.7653, 713.1981) (added to group)
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (718.4169, 735.0894) (added to group)
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (736.3895, 742.0352) (added to group)
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (849.0153, 827.3777) (added to group)
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (451.9783, 830.431) (added to group)
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (428.7799, 813.5889) (added to group)
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (422.2995, 816.5052) (added to group)
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (406.8021, 826.4417) (added to group)
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (861.169, 763.4063) (added to group)
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (713.4435, 743.3951) (added to group)
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (717.2856, 690.9564) (added to group)
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (732.0292, 675.4774) (added to group)
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (415.6734, 816.059) (added to group)
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (837.3266, 856.7075) (added to group)
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (449.8688, 830.0059) (added to group)
[20:15:42] [ENEMY] [Enemy3] Ragdoll activated
[20:15:42] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (807.5695, 817.833) (added to group)
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (724.9723, 722.3064) (added to group)
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (776.0618, 673.8431) (added to group)
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (732.1685, 762.7092) (added to group)
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (796.1878, 705.1376) (added to group)
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (781.7732, 737.757) (added to group)
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (712.5524, 706.4395) (added to group)
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (431.7259, 868.5757) (added to group)
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (815.7815, 782.7497) (added to group)
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (742.2267, 781.8349) (added to group)
[20:15:42] [INFO] [BloodDecal] Blood puddle created at (467.6838, 918.655) (added to group)
[20:15:43] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(354,929), corner_timer=-0.02
[20:15:43] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[20:15:43] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(354,932), corner_timer=0.30
[20:15:43] [INFO] [BloodDecal] Blood puddle created at (824.1635, 729.2263) (added to group)
[20:15:43] [INFO] [BloodDecal] Blood puddle created at (736.8976, 757.1359) (added to group)
[20:15:43] [INFO] [BloodDecal] Blood puddle created at (822.6306, 686.9818) (added to group)
[20:15:43] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[20:15:43] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(383,963), corner_timer=-0.02
[20:15:43] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[20:15:43] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(387,963), corner_timer=0.30
[20:15:43] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:43] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[20:15:43] [ENEMY] [Enemy1] PURSUING corner check: angle -41.3°
[20:15:43] [ENEMY] [Enemy2] PURSUING corner check: angle 161.7°
[20:15:43] [ENEMY] [Enemy4] PURSUING corner check: angle -41.4°
[20:15:43] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(483,917), corner_timer=-0.02
[20:15:43] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[20:15:43] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(483,914), corner_timer=0.30
[20:15:43] [ENEMY] [Enemy3] Death animation completed
[20:15:43] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:44] [INFO] [ReplayManager] Recording frame 240 (4,0s): player_valid=True, enemies=10
[20:15:44] [ENEMY] [Enemy1] PURSUING corner check: angle -69.6°
[20:15:44] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(483,905), corner_timer=-0.02
[20:15:44] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[20:15:44] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(483,905), corner_timer=0.30
[20:15:44] [ENEMY] [Enemy4] PURSUING corner check: angle -90.0°
[20:15:44] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:44] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[20:15:44] [ENEMY] [Enemy1] Player reloading: false -> true
[20:15:44] [ENEMY] [Enemy2] Player reloading: false -> true
[20:15:44] [ENEMY] [Enemy3] Player reloading: false -> true
[20:15:44] [ENEMY] [Enemy4] Player reloading: false -> true
[20:15:44] [ENEMY] [Enemy5] Player reloading: false -> true
[20:15:44] [ENEMY] [Enemy6] Player reloading: false -> true
[20:15:44] [ENEMY] [Enemy7] Player reloading: false -> true
[20:15:44] [ENEMY] [Enemy8] Player reloading: false -> true
[20:15:44] [ENEMY] [Enemy9] Player reloading: false -> true
[20:15:44] [ENEMY] [Enemy10] Player reloading: false -> true
[20:15:44] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(483.9349, 905.4146), source=PLAYER (Player), range=900, listeners=9
[20:15:44] [ENEMY] [Enemy2] Heard player RELOAD at (483.9349, 905.4146), intensity=0.04, distance=265
[20:15:44] [ENEMY] [Enemy4] Heard player RELOAD at (483.9349, 905.4146), intensity=0.11, distance=148
[20:15:44] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=6, self=0, below_threshold=1
[20:15:44] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=507), can_see=false
[20:15:44] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=true (dist=265), can_see=false
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (265 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [ENEMY] [Enemy2] Pursuing vulnerability sound at (483.9349, 905.4146), distance=265
[20:15:44] [ENEMY] [Enemy4] Player vulnerable (reloading) but cannot attack: close=true (dist=148), can_see=false
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (148 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [ENEMY] [Enemy4] Pursuing vulnerability sound at (483.9349, 905.4146), distance=148
[20:15:44] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1337), can_see=false
[20:15:44] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1535), can_see=false
[20:15:44] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=1128), can_see=false
[20:15:44] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1517), can_see=false
[20:15:44] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1740), can_see=false
[20:15:44] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=970), can_see=false
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (260 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (145 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (261 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (142 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (262 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (140 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (262 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (137 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (262 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (135 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (262 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [ENEMY] [Enemy1] PURSUING corner check: angle 129.7°
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (263 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (131 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (263 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(483,905), corner_timer=-0.02
[20:15:44] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (263 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (128 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(483,905), corner_timer=0.30
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (263 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (127 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[20:15:44] [ENEMY] [Enemy1] Player reloading: true -> false
[20:15:44] [ENEMY] [Enemy2] Player reloading: true -> false
[20:15:44] [ENEMY] [Enemy4] Player reloading: true -> false
[20:15:44] [ENEMY] [Enemy5] Player reloading: true -> false
[20:15:44] [ENEMY] [Enemy6] Player reloading: true -> false
[20:15:44] [ENEMY] [Enemy7] Player reloading: true -> false
[20:15:44] [ENEMY] [Enemy8] Player reloading: true -> false
[20:15:44] [ENEMY] [Enemy9] Player reloading: true -> false
[20:15:44] [ENEMY] [Enemy10] Player reloading: true -> false
[20:15:44] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (262 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (126 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (262 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (125 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (262 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (124 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (261 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (124 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (260 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (124 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=95.5°, current=50.2°, player=(483,905), corner_timer=0.02
[20:15:44] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[20:15:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(508.744, 647.7851), source=ENEMY (Enemy2), range=1469, listeners=9
[20:15:44] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=4
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (124 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (124 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [LastChance] Threat detected: Bullet
[20:15:44] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:15:44] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:44] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (123 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(510.02832, 715.82153), shooter_id=3584217320760, bullet_pos=(501.78967, 798.7466)
[20:15:44] [INFO] [Bullet] Using shooter_position, distance=83,333305
[20:15:44] [INFO] [Bullet] Distance to wall: 83,333305 (5,6743183% of viewport)
[20:15:44] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (122 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (121 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (121 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(510.02832, 715.82153), shooter_id=3584217320760, bullet_pos=(473.6143, 691.12354)
[20:15:44] [INFO] [Bullet] Using shooter_position, distance=43,99969
[20:15:44] [INFO] [Bullet] Distance to wall: 43,99969 (2,99602% of viewport)
[20:15:44] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:15:44] [INFO] [Bullet] Starting wall penetration at (473.6143, 691.12354)
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (121 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37,187874
[20:15:44] [INFO] [Bullet] Body exited signal received for penetrating body
[20:15:44] [INFO] [Bullet] Exiting penetration at (463.3783, 652.02454) after traveling 35,416668 pixels through wall
[20:15:44] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[20:15:44] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (122 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (123 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (124 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (126 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (131 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (136 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(483,905), corner_timer=-0.02
[20:15:44] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[20:15:44] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (141 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(483,905), corner_timer=0.30
[20:15:44] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (146 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (142 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (140 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (138 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (137 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (137 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P3:corner, state=RETREATING, target=161.7°, current=96.2°, player=(474,905), corner_timer=0.02
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (252 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [INFO] [EnemyGrenade] Unsafe throw distance (135 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:44] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (253 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (134 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (255 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (132 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (256 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[20:15:45] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=107.5°, current=84.8°, player=(465,905), corner_timer=0.22
[20:15:45] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:15:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(506.5341, 775.9333), source=ENEMY (Enemy4), range=1469, listeners=9
[20:15:45] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[20:15:45] [INFO] [LastChance] Threat detected: Bullet
[20:15:45] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:15:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:15:45] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [ReplayManager] Recording frame 300 (5,0s): player_valid=True, enemies=10
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(431,917), corner_timer=-0.02
[20:15:45] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[20:15:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(438.0689, 926.3901), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:15:45] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=4
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(428,920), corner_timer=0.30
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P3:corner, state=RETREATING, target=-90.0°, current=123.5°, player=(420,927), corner_timer=0.22
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (134 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (135 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(438.0689, 926.3901), shooter_id=3587925084520, bullet_pos=(508.2743, 854.2444)
[20:15:45] [INFO] [Bullet] Using shooter_position, distance=100.666694641113
[20:15:45] [INFO] [Bullet] Distance to wall: 100.666694641113 (6.85458034784229% of viewport)
[20:15:45] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:45] [INFO] [Bullet] Caliber cannot penetrate walls
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (136 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (137 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (137 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (137 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (136 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(403.1122, 960.6024), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:15:45] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=4
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (140 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (139 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (138 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (138 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (138 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (138 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (138 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(403.1122, 960.6024), shooter_id=3587925084520, bullet_pos=(506.0159, 850.551)
[20:15:45] [INFO] [Bullet] Using shooter_position, distance=150.666748046875
[20:15:45] [INFO] [Bullet] Distance to wall: 150.666748046875 (10.2591759262316% of viewport)
[20:15:45] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:45] [INFO] [Bullet] Caliber cannot penetrate walls
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (138 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (138 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (138 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (138 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.5°, current=89.5°, player=(351,987), corner_timer=-0.02
[20:15:45] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (138 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(346,988), corner_timer=0.30
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (138 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (138 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(341.6491, 998.1118), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:15:45] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=0, below_threshold=3
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (138 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (138 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(341.6491, 998.1118), shooter_id=3587925084520, bullet_pos=(504.0779, 829.6695)
[20:15:45] [INFO] [Bullet] Using shooter_position, distance=233.99983215332
[20:15:45] [INFO] [Bullet] Distance to wall: 233.99983215332 (15.9334788590691% of viewport)
[20:15:45] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:45] [INFO] [Bullet] Caliber cannot penetrate walls
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(264.937, 998.8069), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:15:45] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=0, below_threshold=3
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[20:15:45] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.4°, current=89.5°, player=(244,992), corner_timer=-0.02
[20:15:45] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.3°, player=(238,991), corner_timer=0.30
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (132 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (135 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (135 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (135 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:45] [INFO] [EnemyGrenade] Unsafe throw distance (135 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (135 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (135 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (135 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (135 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (135 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (135 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[20:15:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(195.6086, 967.0078), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:15:46] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=0, below_threshold=3
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (135 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (132 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[20:15:46] [INFO] [ReplayManager] Recording frame 360 (6,0s): player_valid=True, enemies=10
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.5°, player=(155,940), corner_timer=-0.02
[20:15:46] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(150,938), corner_timer=0.30
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [BloodyFeet:Player] Blood ran out - no more footprints
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(118.6007, 940.4706), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:15:46] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=2
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [ENEMY] [Enemy1] PURSUING corner check: angle 173.9°
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(80,936), corner_timer=-0.02
[20:15:46] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(80,937), corner_timer=0.30
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(90.07445, 955.1282), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:15:46] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=3
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(118.6007, 940.4706), shooter_id=3587925084520, bullet_pos=(429.1132, 714.5551)
[20:15:46] [INFO] [Bullet] Using shooter_position, distance=383.999786376953
[20:15:46] [INFO] [Bullet] Distance to wall: 383.999786376953 (26.1472515677504% of viewport)
[20:15:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:46] [INFO] [Bullet] Caliber cannot penetrate walls
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [ENEMY] [Enemy1] PURSUING corner check: angle 12.6°
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(119.543, 1005.34), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:15:46] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=3
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(109,999), corner_timer=-0.02
[20:15:46] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[20:15:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(264.937, 998.8069), shooter_id=3587925084520, bullet_pos=(1077.199, 280.9731)
[20:15:46] [INFO] [Bullet] Using shooter_position, distance=1083.99963378906
[20:15:46] [INFO] [Bullet] Distance to wall: 1083.99963378906 (73.8115283642591% of viewport)
[20:15:46] [INFO] [Bullet] Distance-based penetration chance: 60.5532169083643%
[20:15:46] [INFO] [Bullet] Caliber cannot penetrate walls
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(113,1003), corner_timer=0.30
[20:15:46] [ENEMY] [Enemy1] State: PURSUING -> RETREATING
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [ENEMY] [Enemy1] ROT_CHANGE: P2:combat_state -> P3:corner, state=RETREATING, target=12.6°, current=134.7°, player=(121,1011), corner_timer=0.28
[20:15:46] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:46] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(90.07445, 955.1282), shooter_id=3587925084520, bullet_pos=(409.4006, 713.1274)
[20:15:47] [INFO] [Bullet] Using shooter_position, distance=400.666442871094
[20:15:47] [INFO] [Bullet] Distance to wall: 400.666442871094 (27.2821148557153% of viewport)
[20:15:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:47] [INFO] [Bullet] Caliber cannot penetrate walls
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(181.7683, 1067.565), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:15:47] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=4
[20:15:47] [INFO] [ReplayManager] Recording frame 420 (7,0s): player_valid=True, enemies=10
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(195.6086, 967.0078), shooter_id=3587925084520, bullet_pos=(1075.489, 278.3543)
[20:15:47] [INFO] [Bullet] Using shooter_position, distance=1117.33312988281
[20:15:47] [INFO] [Bullet] Distance to wall: 1117.33312988281 (76.081267408177% of viewport)
[20:15:47] [INFO] [Bullet] Distance-based penetration chance: 57.9051880237935%
[20:15:47] [INFO] [Bullet] Caliber cannot penetrate walls
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(187,1077), corner_timer=-0.02
[20:15:47] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(191,1081), corner_timer=0.30
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [ENEMY] [Enemy1] Player ammo empty: false -> true
[20:15:47] [ENEMY] [Enemy2] Player ammo empty: false -> true
[20:15:47] [ENEMY] [Enemy4] Player ammo empty: false -> true
[20:15:47] [ENEMY] [Enemy5] Player ammo empty: false -> true
[20:15:47] [ENEMY] [Enemy6] Player ammo empty: false -> true
[20:15:47] [ENEMY] [Enemy7] Player ammo empty: false -> true
[20:15:47] [ENEMY] [Enemy8] Player ammo empty: false -> true
[20:15:47] [ENEMY] [Enemy9] Player ammo empty: false -> true
[20:15:47] [ENEMY] [Enemy10] Player ammo empty: false -> true
[20:15:47] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(210.6592, 1100.455), source=PLAYER (Player), range=600, listeners=9
[20:15:47] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (210.6592, 1100.455), intensity=0.01, distance=462
[20:15:47] [ENEMY] [Enemy4] Vulnerability sound triggered pursuit - transitioning from SUPPRESSED to PURSUING
[20:15:47] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=6, self=0, below_threshold=2
[20:15:47] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=522), can_see=false
[20:15:47] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=531), can_see=false
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [ENEMY] [Enemy4] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=139.7°, current=-90.0°, player=(210,1100), corner_timer=0.22
[20:15:47] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=462), can_see=false
[20:15:47] [INFO] [EnemyGrenade] Throw path blocked to (210.6592, 1100.455)
[20:15:47] [ENEMY] [Enemy4] Pursuing vulnerability sound at (210.6592, 1100.455), distance=462
[20:15:47] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1668), can_see=false
[20:15:47] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1857), can_see=false
[20:15:47] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1415), can_see=false
[20:15:47] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1725), can_see=false
[20:15:47] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1942), can_see=false
[20:15:47] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1073), can_see=false
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Throw path blocked to (210.6592, 1100.455)
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Throw path blocked to (210.6592, 1100.455)
[20:15:47] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Throw path blocked to (210.6592, 1100.455)
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Throw path blocked to (210.6592, 1100.455)
[20:15:47] [INFO] [ScoreManager] Combo ended at 1. Max combo: 1
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Throw path blocked to (210.6592, 1100.455)
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Throw path blocked to (210.6592, 1100.455)
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Throw path blocked to (210.6592, 1100.455)
[20:15:47] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(241.7718, 1131.567), source=PLAYER (Player), range=600, listeners=9
[20:15:47] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (241.7718, 1131.567), intensity=0.01, distance=463
[20:15:47] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=6, self=0, below_threshold=2
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Throw path blocked to (241.7718, 1131.567)
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Throw path blocked to (241.7718, 1131.567)
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Throw path blocked to (241.7718, 1131.567)
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Throw path blocked to (241.7718, 1131.567)
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Throw path blocked to (241.7718, 1131.567)
[20:15:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(181.7683, 1067.565), shooter_id=3587925084520, bullet_pos=(505.8517, 804.6248)
[20:15:47] [INFO] [Bullet] Using shooter_position, distance=417.333618164063
[20:15:47] [INFO] [Bullet] Distance to wall: 417.333618164063 (28.4170134696464% of viewport)
[20:15:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:47] [INFO] [Bullet] Caliber cannot penetrate walls
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(265,1154), corner_timer=-0.02
[20:15:47] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(268,1158), corner_timer=0.30
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(280.6628, 1170.458), source=PLAYER (Player), range=600, listeners=9
[20:15:47] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (280.6628, 1170.458), intensity=0.01, distance=444
[20:15:47] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=6, self=0, below_threshold=2
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=115.6°, current=76.9°, player=(288,1178), corner_timer=0.22
[20:15:47] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) - pursuing to attack (dist=442)
[20:15:47] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[20:15:47] [INFO] [BloodyFeet:Enemy4] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:15:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(447.1136, 779.7036), source=ENEMY (Enemy4), range=1469, listeners=9
[20:15:47] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(319.5538, 1209.348), source=PLAYER (Player), range=600, listeners=9
[20:15:47] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (319.5538, 1209.348), intensity=0.01, distance=445
[20:15:47] [ENEMY] [Enemy4] Vulnerability sound triggered pursuit - transitioning from RETREATING to PURSUING
[20:15:47] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=6, self=0, below_threshold=2
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=589), can_see=false
[20:15:47] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=594), can_see=false
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=437), can_see=true
[20:15:47] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1622), can_see=false
[20:15:47] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1792), can_see=false
[20:15:47] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1319), can_see=false
[20:15:47] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1585), can_see=false
[20:15:47] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1799), can_see=false
[20:15:47] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=911), can_see=false
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [LastChance] Threat detected: Bullet
[20:15:47] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:15:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:15:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(430.0092, 805.6108), source=ENEMY (Enemy4), range=1469, listeners=9
[20:15:47] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(344,1228), corner_timer=-0.02
[20:15:47] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(349,1230), corner_timer=0.30
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[20:15:47] [INFO] [GrenadeBase] Grenade created at (404.3807, 871.8133) (frozen)
[20:15:47] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[20:15:47] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[20:15:47] [INFO] [GrenadeTimerHelper] Attached GrenadeTimer to FragGrenade (type: Frag)
[20:15:47] [INFO] [EnemyGrenade] Attached C# GrenadeTimer to grenade (type: Frag)
[20:15:47] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[20:15:47] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[20:15:47] [INFO] [GrenadeBase] LEGACY throw_grenade() called! Direction: (-0.495575, 0.868565), Speed: 692.8 (unfrozen)
[20:15:47] [INFO] [GrenadeBase] NOTE: Using DRAG-BASED system. If velocity-based is expected, ensure grenade has throw_grenade_velocity_based() method.
[20:15:47] [INFO] [FragGrenade] Grenade thrown (legacy) - impact detection enabled
[20:15:47] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[20:15:47] [INFO] [EnemyGrenade] Enemy grenade thrown! Target: (241.7718, 1131.567), Distance: 346
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [INFO] [LastChance] Threat detected: @Area2D@3049
[20:15:47] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:15:47] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:47] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:47] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:15:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(423.4757, 842.3541), source=ENEMY (Enemy4), range=1469, listeners=9
[20:15:47] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[20:15:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(433.89075, 846.4551), shooter_id=3584921962298, bullet_pos=(257.9068, 1402.6096)
[20:15:48] [INFO] [Bullet] Using shooter_position, distance=583,33374
[20:15:48] [INFO] [Bullet] Distance to wall: 583,33374 (39,72027% of viewport)
[20:15:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:48] [INFO] [Bullet] Starting wall penetration at (257.9068, 1402.6096)
[20:15:48] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:15:48] [INFO] [Bullet] Raycast backward hit penetrating body at distance 36,817482
[20:15:48] [INFO] [Bullet] Body exited signal received for penetrating body
[20:15:48] [INFO] [Bullet] Exiting penetration at (243.8281, 1447.102) after traveling 41,66667 pixels through wall
[20:15:48] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (344.8017, 1228.063)
[20:15:48] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (344.8017, 1228.063)
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (344.8017, 1228.063)
[20:15:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(119.543, 1005.34), shooter_id=3587925084520, bullet_pos=(1110.148, 297.8091)
[20:15:48] [INFO] [Bullet] Using shooter_position, distance=1217.33227539063
[20:15:48] [INFO] [Bullet] Distance to wall: 1217.33227539063 (82.8903931080183% of viewport)
[20:15:48] [INFO] [Bullet] Distance-based penetration chance: 49.9612080406454%
[20:15:48] [INFO] [Bullet] Penetration failed (distance roll)
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (344.8017, 1228.063)
[20:15:48] [INFO] [LastChance] Threat detected: @Area2D@3065
[20:15:48] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:15:48] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (344.8017, 1228.063)
[20:15:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(423.51627, 873.3488), shooter_id=3584921962298, bullet_pos=(314.27985, 1403.8861)
[20:15:48] [INFO] [Bullet] Using shooter_position, distance=541,6663
[20:15:48] [INFO] [Bullet] Distance to wall: 541,6663 (36,883057% of viewport)
[20:15:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:48] [INFO] [Bullet] Starting wall penetration at (314.27985, 1403.8861)
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (344.8017, 1228.063)
[20:15:48] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:15:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(420.409, 879.5419), source=ENEMY (Enemy4), range=1469, listeners=9
[20:15:48] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[20:15:48] [INFO] [Bullet] Raycast backward hit penetrating body at distance 38,38248
[20:15:48] [INFO] [Bullet] Body exited signal received for penetrating body
[20:15:48] [INFO] [Bullet] Exiting penetration at (304.8687, 1449.5939) after traveling 41,666668 pixels through wall
[20:15:48] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (344.8017, 1228.063)
[20:15:48] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (344.8017, 1228.063)
[20:15:48] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[20:15:48] [INFO] [ReplayManager] Recording frame 480 (8,0s): player_valid=True, enemies=10
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (344.8017, 1228.063)
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (344.8017, 1228.063)
[20:15:48] [INFO] [LastChance] Threat detected: Bullet
[20:15:48] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:15:48] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (344.8017, 1228.063)
[20:15:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(422.8875, 910.4001), shooter_id=3584921962298, bullet_pos=(357.29987, 1406.0797)
[20:15:48] [INFO] [Bullet] Using shooter_position, distance=500,00003
[20:15:48] [INFO] [Bullet] Distance to wall: 500,00003 (34,04592% of viewport)
[20:15:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:48] [INFO] [Bullet] Starting wall penetration at (357.29987, 1406.0797)
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (344.8017, 1228.063)
[20:15:48] [INFO] [Bullet] Raycast backward hit penetrating body at distance 40,69478
[20:15:48] [INFO] [Bullet] Body exited signal received for penetrating body
[20:15:48] [INFO] [Bullet] Exiting penetration at (351.17834, 1452.3431) after traveling 41,66667 pixels through wall
[20:15:48] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (344.8017, 1228.063)
[20:15:48] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:15:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(434.7165, 894.3187), source=ENEMY (Enemy4), range=1469, listeners=9
[20:15:48] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[20:15:48] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(451,1235), corner_timer=-0.02
[20:15:48] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (344.8017, 1228.063)
[20:15:48] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[20:15:48] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(457,1235), corner_timer=0.30
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (344.8017, 1228.063)
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (344.8017, 1228.063)
[20:15:48] [INFO] [LastChance] Threat detected: @Area2D@3079
[20:15:48] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:15:48] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (344.8017, 1228.063)
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (344.8017, 1228.063)
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (344.8017, 1228.063)
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (344.8017, 1228.063)
[20:15:48] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[20:15:48] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:15:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.4642, 896.717), source=ENEMY (Enemy4), range=1469, listeners=9
[20:15:48] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[20:15:48] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=588), can_see=false
[20:15:48] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=588), can_see=false
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (344.8017, 1228.063)
[20:15:48] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:15:48] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1495), can_see=false
[20:15:48] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1653), can_see=false
[20:15:48] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1166), can_see=false
[20:15:48] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1421), can_see=false
[20:15:48] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1635), can_see=false
[20:15:48] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=758), can_see=false
[20:15:48] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (344.8017, 1228.063)
[20:15:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(426.81378, 947.2883), shooter_id=3584921962298, bullet_pos=(412.20782, 1613.7943)
[20:15:48] [INFO] [Bullet] Using shooter_position, distance=666,666
[20:15:48] [INFO] [Bullet] Distance to wall: 666,666 (45,394516% of viewport)
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (344.8017, 1228.063)
[20:15:48] [INFO] [LastChance] Threat detected: @Area2D@3082
[20:15:48] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:15:48] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (344.8017, 1228.063)
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (512.0617, 1235.885)
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (512.0617, 1235.885)
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (512.0617, 1235.885)
[20:15:48] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:15:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(464.3214, 899.0967), source=ENEMY (Enemy4), range=1469, listeners=9
[20:15:48] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (512.0617, 1235.885)
[20:15:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(430.25577, 962.2209), shooter_id=3584921962298, bullet_pos=(450.3081, 1586.8998)
[20:15:48] [INFO] [Bullet] Using shooter_position, distance=625,0007
[20:15:48] [INFO] [Bullet] Distance to wall: 625,0007 (42,557446% of viewport)
[20:15:48] [INFO] [Bullet] Distance-based penetration chance: 97,01632%
[20:15:48] [INFO] [Bullet] Starting wall penetration at (450.3081, 1586.8998)
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (512.0617, 1235.885)
[20:15:48] [INFO] [Bullet] Raycast backward hit penetrating body at distance 21,553577
[20:15:48] [INFO] [Bullet] Body exited signal received for penetrating body
[20:15:48] [INFO] [Bullet] Exiting penetration at (451.80536, 1633.5425) after traveling 41,666668 pixels through wall
[20:15:48] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (512.0617, 1235.885)
[20:15:48] [INFO] [LastChance] Threat detected: @Area2D@3086
[20:15:48] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:15:48] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (512.0617, 1235.885)
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (512.0617, 1235.885)
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (512.0617, 1235.885)
[20:15:48] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(555,1222), corner_timer=-0.02
[20:15:48] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (512.0617, 1235.885)
[20:15:48] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:15:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(470.2277, 887.1506), source=ENEMY (Enemy4), range=1469, listeners=9
[20:15:48] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[20:15:48] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(560,1218), corner_timer=0.30
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (512.0617, 1235.885)
[20:15:48] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P3:corner, state=RETREATING, target=-90.0°, current=74.9°, player=(564,1215), corner_timer=0.22
[20:15:48] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=343), can_see=false
[20:15:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(458.57056, 964.73914), shooter_id=3584921962298, bullet_pos=(499.5024, 1588.3981)
[20:15:48] [INFO] [Bullet] Using shooter_position, distance=625,0007
[20:15:48] [INFO] [Bullet] Distance to wall: 625,0007 (42,557446% of viewport)
[20:15:48] [INFO] [Bullet] Distance-based penetration chance: 97,01632%
[20:15:48] [INFO] [Bullet] Starting wall penetration at (499.5024, 1588.3981)
[20:15:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(458.57056, 964.73914), shooter_id=3584921962298, bullet_pos=(499.82986, 1593.3873)
[20:15:48] [INFO] [Bullet] Using shooter_position, distance=630,00073
[20:15:48] [INFO] [Bullet] Distance to wall: 630,00073 (42,89791% of viewport)
[20:15:48] [INFO] [Bullet] Distance-based penetration chance: 96,6191%
[20:15:48] [INFO] [Bullet] Penetration failed (distance roll)
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (512.0617, 1235.885)
[20:15:48] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:15:48] [INFO] [Bullet] Exiting penetration at (502.55865, 1634.9646) after traveling 41,666668 pixels through wall
[20:15:48] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (512.0617, 1235.885)
[20:15:48] [INFO] [LastChance] Threat detected: Bullet
[20:15:48] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:15:48] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (512.0617, 1235.885)
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (512.0617, 1235.885)
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (512.0617, 1235.885)
[20:15:48] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (512.0617, 1235.885)
[20:15:48] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[20:15:48] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (512.0617, 1235.885)
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (512.0617, 1235.885)
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (512.0617, 1235.885)
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (512.0617, 1235.885)
[20:15:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(480.3624, 954.4402), shooter_id=3584921962298, bullet_pos=(620.4606, 1390.8363)
[20:15:48] [INFO] [Bullet] Using shooter_position, distance=458,33295
[20:15:48] [INFO] [Bullet] Distance to wall: 458,33295 (31,208733% of viewport)
[20:15:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:48] [INFO] [Bullet] Starting wall penetration at (620.4606, 1390.8363)
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (512.0617, 1235.885)
[20:15:48] [INFO] [Bullet] Raycast backward hit penetrating body at distance 24,439098
[20:15:48] [INFO] [Bullet] Body exited signal received for penetrating body
[20:15:48] [INFO] [Bullet] Exiting penetration at (634.7251, 1435.2694) after traveling 41,666668 pixels through wall
[20:15:48] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (512.0617, 1235.885)
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (512.0617, 1235.885)
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (512.0617, 1235.885)
[20:15:48] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[20:15:48] [ENEMY] [Enemy1] Player reloading: false -> true
[20:15:48] [ENEMY] [Enemy2] Player reloading: false -> true
[20:15:48] [ENEMY] [Enemy4] Player reloading: false -> true
[20:15:48] [ENEMY] [Enemy5] Player reloading: false -> true
[20:15:48] [ENEMY] [Enemy6] Player reloading: false -> true
[20:15:48] [ENEMY] [Enemy7] Player reloading: false -> true
[20:15:48] [ENEMY] [Enemy8] Player reloading: false -> true
[20:15:48] [ENEMY] [Enemy9] Player reloading: false -> true
[20:15:48] [ENEMY] [Enemy10] Player reloading: false -> true
[20:15:48] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(598.5381, 1147.468), source=PLAYER (Player), range=900, listeners=9
[20:15:48] [ENEMY] [Enemy4] Heard player RELOAD at (598.5381, 1147.468), intensity=0.03, distance=313
[20:15:48] [ENEMY] [Enemy4] Vulnerability sound triggered pursuit - transitioning from SUPPRESSED to PURSUING
[20:15:48] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=3
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (512.0617, 1235.885)
[20:15:48] [ENEMY] [Enemy4] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=63.6°, current=27.5°, player=(598,1147), corner_timer=0.22
[20:15:48] [ENEMY] [Enemy4] Pursuing vulnerability sound at (598.5381, 1147.468), distance=313
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (512.0617, 1235.885)
[20:15:48] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=504), can_see=false
[20:15:48] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=false (dist=501), can_see=false
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (512.0617, 1235.885)
[20:15:48] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1353), can_see=false
[20:15:48] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1516), can_see=false
[20:15:48] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=1040), can_see=false
[20:15:48] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1339), can_see=false
[20:15:48] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1557), can_see=false
[20:15:48] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=729), can_see=false
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (512.0617, 1235.885)
[20:15:48] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(598,1130), corner_timer=-0.02
[20:15:48] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (512.0617, 1235.885)
[20:15:48] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(598,1125), corner_timer=0.30
[20:15:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(469.24472, 966.9669), shooter_id=3584921962298, bullet_pos=(681.6619, 2071.7322)
[20:15:48] [INFO] [Bullet] Using shooter_position, distance=1125,0011
[20:15:48] [INFO] [Bullet] Distance to wall: 1125,0011 (76,60339% of viewport)
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (512.0617, 1235.885)
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:48] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:49] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[20:15:49] [ENEMY] [Enemy1] Player reloading: true -> false
[20:15:49] [ENEMY] [Enemy2] Player reloading: true -> false
[20:15:49] [ENEMY] [Enemy4] Player reloading: true -> false
[20:15:49] [ENEMY] [Enemy5] Player reloading: true -> false
[20:15:49] [ENEMY] [Enemy6] Player reloading: true -> false
[20:15:49] [ENEMY] [Enemy7] Player reloading: true -> false
[20:15:49] [ENEMY] [Enemy8] Player reloading: true -> false
[20:15:49] [ENEMY] [Enemy9] Player reloading: true -> false
[20:15:49] [ENEMY] [Enemy10] Player reloading: true -> false
[20:15:49] [ENEMY] [Enemy1] Player ammo empty: true -> false
[20:15:49] [ENEMY] [Enemy2] Player ammo empty: true -> false
[20:15:49] [ENEMY] [Enemy4] Player ammo empty: true -> false
[20:15:49] [ENEMY] [Enemy5] Player ammo empty: true -> false
[20:15:49] [ENEMY] [Enemy6] Player ammo empty: true -> false
[20:15:49] [ENEMY] [Enemy7] Player ammo empty: true -> false
[20:15:49] [ENEMY] [Enemy8] Player ammo empty: true -> false
[20:15:49] [ENEMY] [Enemy9] Player ammo empty: true -> false
[20:15:49] [ENEMY] [Enemy10] Player ammo empty: true -> false
[20:15:49] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [ReplayManager] Recording frame 540 (9,0s): player_valid=True, enemies=10
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(598,1040), corner_timer=-0.02
[20:15:49] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(598,1040), corner_timer=0.30
[20:15:49] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=11.2°, current=8.1°, player=(598,1040), corner_timer=0.22
[20:15:49] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:15:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(471.1726, 1014.834), source=ENEMY (Enemy4), range=1469, listeners=9
[20:15:49] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[20:15:49] [INFO] [LastChance] Threat detected: Bullet
[20:15:49] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:15:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[20:15:49] [INFO] [GrenadeTimer] Frag grenade landed - EXPLODING!
[20:15:49] [INFO] [GrenadeTimer] EXPLODED at (155.66513, 1307.7222)!
[20:15:49] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[20:15:49] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[20:15:49] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(155.6651, 1307.722), source=NEUTRAL (FragGrenade), range=2938, listeners=9
[20:15:49] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=8
[20:15:49] [INFO] [GrenadeTimer] Spawned PointLight2D frag explosion flash at (155.66513, 1307.7222) (shadow-based wall occlusion)
[20:15:49] [INFO] [GrenadeTimer] Scattered 5 casings
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:15:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(466.7638, 1017.819), source=ENEMY (Enemy4), range=1469, listeners=9
[20:15:49] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[20:15:49] [INFO] [LastChance] Threat detected: @Area2D@3114
[20:15:49] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:15:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:15:49] [INFO] [Player] Spawning blood effect at (598.5381, 1040.3995), dir=(1, 0), lethal=False (C#)
[20:15:49] [INFO] [ImpactEffects] spawn_blood_effect called at (598.5381, 1040.4), dir=(1, 0), lethal=false
[20:15:49] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:49] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:15:49] [INFO] [ImpactEffects] Blood effect spawned at (598.5381, 1040.4) (scale=1)
[20:15:49] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:15:49] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:15:49] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P3:corner, state=RETREATING, target=-90.0°, current=15.0°, player=(598,1040), corner_timer=0.22
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[20:15:49] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(598,1040), corner_timer=-0.02
[20:15:49] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(598,1040), corner_timer=0.30
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [Player] Stun ended (Issue #592)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [BloodDecal] Blood puddle created at (638.7849, 1078.365) (added to group)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [BloodDecal] Blood puddle created at (698.9114, 1106.247) (added to group)
[20:15:49] [INFO] [BloodDecal] Blood puddle created at (702.5368, 1066.099) (added to group)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(623.8591, 1073.19), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:15:49] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=5
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
[20:15:49] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[20:15:49] [INFO] [BloodDecal] Blood puddle created at (658.8735, 1043.383) (added to group)
[20:15:49] [INFO] [BloodDecal] Blood puddle created at (691.0156, 1064.556) (added to group)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(623.8591, 1073.19), shooter_id=3587925084520, bullet_pos=(539.5878, 1018.126)
[20:15:49] [INFO] [Bullet] Using shooter_position, distance=100.666725158691
[20:15:49] [INFO] [Bullet] Distance to wall: 100.666725158691 (6.8545824258403% of viewport)
[20:15:49] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:49] [INFO] [Bullet] Caliber cannot penetrate walls
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(627,1081), corner_timer=-0.02
[20:15:49] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[20:15:49] [INFO] [BloodDecal] Blood puddle created at (697.3905, 1074.982) (added to group)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(631,1085), corner_timer=0.30
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (560.0457, 1218.948)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:49] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [BloodDecal] Blood puddle created at (732.1362, 1156.49) (added to group)
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
[20:15:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(668.8893, 1118.782), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:15:50] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=7
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[20:15:50] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(535.9785, 1035.5901), shooter_id=3584921962298, bullet_pos=(2295.0837, 1375.6166)
[20:15:50] [INFO] [Bullet] Using shooter_position, distance=1791,6666
[20:15:50] [INFO] [Bullet] Distance to wall: 1791,6666 (121,99788% of viewport)
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [BloodDecal] Blood puddle created at (733.1028, 1040.522) (added to group)
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [BloodDecal] Blood puddle created at (777.2567, 1037.495) (added to group)
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [ReplayManager] Recording frame 600 (10,0s): player_valid=True, enemies=10
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700.8116, 1155.059), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:15:50] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=8
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
[20:15:50] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(696,1163), corner_timer=-0.02
[20:15:50] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[20:15:50] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(698,1167), corner_timer=0.30
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(710.8644, 1200.148), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:15:50] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=8
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
[20:15:50] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[20:15:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(686.3807, 1253.043), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:15:50] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=7
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[20:15:50] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(669,1252), corner_timer=-0.02
[20:15:50] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(665,1255), corner_timer=0.30
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[20:15:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(668.8893, 1118.782), shooter_id=3587925084520, bullet_pos=(59.33007, 773.281)
[20:15:50] [INFO] [Bullet] Using shooter_position, distance=700.666381835938
[20:15:50] [INFO] [Bullet] Distance to wall: 700.666381835938 (47.7096623510759% of viewport)
[20:15:50] [INFO] [Bullet] Distance-based penetration chance: 91.0053939237448%
[20:15:50] [INFO] [Bullet] Caliber cannot penetrate walls
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(631.9003, 1270.482), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:15:50] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=6
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(700.8116, 1155.059), shooter_id=3587925084520, bullet_pos=(64.58903, 789.03)
[20:15:50] [INFO] [Bullet] Using shooter_position, distance=734.000183105469
[20:15:50] [INFO] [Bullet] Distance to wall: 734.000183105469 (49.9794221749739% of viewport)
[20:15:50] [INFO] [Bullet] Distance-based penetration chance: 88.3573407958637%
[20:15:50] [INFO] [Bullet] Caliber cannot penetrate walls
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(566,1264), corner_timer=-0.02
[20:15:50] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(561,1264), corner_timer=0.30
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:50] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(532.9003, 1270.482), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:15:51] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=5
[20:15:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(710.8644, 1200.148), shooter_id=3587925084520, bullet_pos=(66.52926, 848.5972)
[20:15:51] [INFO] [Bullet] Using shooter_position, distance=734.000061035156
[20:15:51] [INFO] [Bullet] Distance to wall: 734.000061035156 (49.9794138629819% of viewport)
[20:15:51] [INFO] [Bullet] Distance-based penetration chance: 88.3573504931878%
[20:15:51] [INFO] [Bullet] Caliber cannot penetrate walls
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[20:15:51] [INFO] [ReplayManager] Recording frame 660 (11,0s): player_valid=True, enemies=10
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(483.4003, 1270.482), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:15:51] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=5
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(456,1264), corner_timer=-0.02
[20:15:51] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[20:15:51] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(451,1264), corner_timer=0.30
[20:15:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(686.3807, 1253.043), shooter_id=3587925084520, bullet_pos=(54.41253, 817.8226)
[20:15:51] [INFO] [Bullet] Using shooter_position, distance=767.333435058594
[20:15:51] [INFO] [Bullet] Distance to wall: 767.333435058594 (52.2491445949078% of viewport)
[20:15:51] [INFO] [Bullet] Distance-based penetration chance: 85.709331305941%
[20:15:51] [INFO] [Bullet] Caliber cannot penetrate walls
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(631.9003, 1270.482), shooter_id=3587925084520, bullet_pos=(62.36381, 834.3668)
[20:15:51] [INFO] [Bullet] Using shooter_position, distance=717.333984375
[20:15:51] [INFO] [Bullet] Distance to wall: 717.333984375 (48.8445900569792% of viewport)
[20:15:51] [INFO] [Bullet] Distance-based penetration chance: 89.681311600191%
[20:15:51] [INFO] [Bullet] Penetration failed (distance roll)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [BloodyFeet:Player] Blood ran out - no more footprints
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(369.176, 1267.402), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:15:51] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=4
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(349,1258), corner_timer=-0.02
[20:15:51] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(344,1255), corner_timer=0.30
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(532.9003, 1270.482), shooter_id=3587925084520, bullet_pos=(139.0173, 711.2751)
[20:15:51] [INFO] [Bullet] Using shooter_position, distance=683.999877929688
[20:15:51] [INFO] [Bullet] Distance to wall: 683.999877929688 (46.5748094531011% of viewport)
[20:15:51] [INFO] [Bullet] Distance-based penetration chance: 92.3293889713821%
[20:15:51] [INFO] [Bullet] Caliber cannot penetrate walls
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [ENEMY] [Enemy1] Player ammo empty: false -> true
[20:15:51] [ENEMY] [Enemy2] Player ammo empty: false -> true
[20:15:51] [ENEMY] [Enemy4] Player ammo empty: false -> true
[20:15:51] [ENEMY] [Enemy5] Player ammo empty: false -> true
[20:15:51] [ENEMY] [Enemy6] Player ammo empty: false -> true
[20:15:51] [ENEMY] [Enemy7] Player ammo empty: false -> true
[20:15:51] [ENEMY] [Enemy8] Player ammo empty: false -> true
[20:15:51] [ENEMY] [Enemy9] Player ammo empty: false -> true
[20:15:51] [ENEMY] [Enemy10] Player ammo empty: false -> true
[20:15:51] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(308.2937, 1224.905), source=PLAYER (Player), range=600, listeners=9
[20:15:51] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (308.2937, 1224.905), intensity=0.01, distance=430
[20:15:51] [ENEMY] [Enemy4] Vulnerability sound triggered pursuit - transitioning from SEEKING_COVER to PURSUING
[20:15:51] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=7, self=0, below_threshold=1
[20:15:51] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=599), can_see=false
[20:15:51] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=605), can_see=false
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [ENEMY] [Enemy4] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=111.4°, current=-90.0°, player=(308,1224), corner_timer=0.22
[20:15:51] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=430), can_see=false
[20:15:51] [ENEMY] [Enemy4] Pursuing vulnerability sound at (308.2937, 1224.905), distance=430
[20:15:51] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1644), can_see=false
[20:15:51] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1815), can_see=false
[20:15:51] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1343), can_see=false
[20:15:51] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1608), can_see=false
[20:15:51] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1821), can_see=false
[20:15:51] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=931), can_see=false
[20:15:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(483.4003, 1270.482), shooter_id=3587925084520, bullet_pos=(271.4718, 708.4434)
[20:15:51] [INFO] [Bullet] Using shooter_position, distance=600.6669921875
[20:15:51] [INFO] [Bullet] Distance to wall: 600.6669921875 (40.9005200272506% of viewport)
[20:15:51] [INFO] [Bullet] Distance-based penetration chance: 98.949393301541%
[20:15:51] [INFO] [Bullet] Caliber cannot penetrate walls
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=111.6°, current=147.7°, player=(304,1221), corner_timer=0.22
[20:15:51] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) - pursuing to attack (dist=423)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(369.176, 1267.402), shooter_id=3587925084520, bullet_pos=(516.3538, 1005.221)
[20:15:51] [INFO] [Bullet] Using shooter_position, distance=300.666473388672
[20:15:51] [INFO] [Bullet] Distance to wall: 300.666473388672 (20.4729330499278% of viewport)
[20:15:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:51] [INFO] [Bullet] Caliber cannot penetrate walls
[20:15:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(369.176, 1267.402), shooter_id=3587925084520, bullet_pos=(516.3538, 1005.221)
[20:15:51] [INFO] [Bullet] Using shooter_position, distance=300.666473388672
[20:15:51] [INFO] [Bullet] Distance to wall: 300.666473388672 (20.4729330499278% of viewport)
[20:15:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:51] [INFO] [Bullet] Caliber cannot penetrate walls
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [ENEMY] [Enemy4] Player empty ammo - priority attack triggered
[20:15:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(454.1698, 847.3557), source=ENEMY (Enemy4), range=1469, listeners=9
[20:15:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(269.4027, 1186.014), source=PLAYER (Player), range=600, listeners=9
[20:15:51] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (269.4027, 1186.014), intensity=0.02, distance=359
[20:15:51] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=6, self=0, below_threshold=2
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(269,1186), corner_timer=-0.02
[20:15:51] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(265,1182), corner_timer=0.30
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [ENEMY] [Enemy4] Player empty ammo - priority attack triggered
[20:15:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(437.1902, 880.5837), source=ENEMY (Enemy4), range=1469, listeners=9
[20:15:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [EnemyGrenade] Throw path blocked to (598.5381, 1040.4)
[20:15:51] [INFO] [LastChance] Threat detected: @Area2D@3190
[20:15:51] [INFO] [LastChance] Triggering last chance effect!
[20:15:51] [INFO] [LastChance] Starting last chance effect:
[20:15:51] [INFO] [LastChance]   - Time will be frozen (except player)
[20:15:51] [INFO] [LastChance]   - Duration: 6.00 real seconds
[20:15:51] [INFO] [LastChance]   - Trigger: threat detected
[20:15:51] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:15:51] [INFO] [LastChance]   - Brightness: 0.60
[20:15:51] [INFO] [LastChance] Pushed bullet Bullet from distance 127.3 to 200.0
[20:15:51] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[20:15:51] [INFO] [LastChance] Set player Player and all 26 children to PROCESS_MODE_ALWAYS
[20:15:51] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:51] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:51] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:51] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:51] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:51] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:51] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:51] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:51] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:51] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:51] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:52] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:52] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:52] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:52] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:52] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:52] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:52] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:15:52] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:15:52] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:52] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:52] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:52] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:52] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:52] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:15:52] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:15:52] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:15:52] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:15:52] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:15:52] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:15:52] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:15:52] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:15:52] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:15:52] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:15:52] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:15:52] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:15:52] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:15:52] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:15:52] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:15:52] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:15:52] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:15:52] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:15:52] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:15:52] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:15:52] [INFO] [LastChance] Skipping player node: Player
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2913
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2915
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2919
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2993
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2997
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2998
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3002
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3007
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3011
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3016
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3021
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3024
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3027
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3031
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3041
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3051
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3067
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3074
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3080
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3084
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3088
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3091
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3103
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3116
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3126
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3137
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3146
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3151
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3158
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3163
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3171
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3176
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3183
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3189
[20:15:52] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3192
[20:15:52] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:15:52] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:15:52] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:15:52] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(207.1773, 1123.79), source=PLAYER (Player), range=600, listeners=9
[20:15:52] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (207.1773, 1123.79), intensity=0.03, distance=314
[20:15:52] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=6, self=0, below_threshold=2
[20:15:52] [INFO] [ReplayManager] Recording frame 720 (12,0s): player_valid=True, enemies=10
[20:15:52] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(172.1756, 1088.788), source=PLAYER (Player), range=600, listeners=9
[20:15:52] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (172.1756, 1088.788), intensity=0.02, distance=317
[20:15:52] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=6, self=0, below_threshold=2
[20:15:52] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:52] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:15:52] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:15:52] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:15:52] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:52] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:15:52] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:15:52] [INFO] [LastChance] All process modes restored
[20:15:52] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:15:52] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:15:52] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:15:52] [ENEMY] [Enemy1] Death animation component initialized
[20:15:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:52] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:15:52] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:15:52] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:15:52] [ENEMY] [Enemy2] Death animation component initialized
[20:15:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:52] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:15:52] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:15:52] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:15:52] [ENEMY] [Enemy3] Death animation component initialized
[20:15:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:52] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:15:52] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:15:52] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:15:52] [ENEMY] [Enemy4] Death animation component initialized
[20:15:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:52] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:15:52] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:15:52] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:15:52] [ENEMY] [Enemy5] Death animation component initialized
[20:15:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:52] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:15:52] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:15:52] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:15:52] [ENEMY] [Enemy6] Death animation component initialized
[20:15:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:52] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:15:52] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:15:52] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:15:52] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:52] [ENEMY] [Enemy7] Death animation component initialized
[20:15:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:52] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:15:52] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:15:52] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:15:52] [ENEMY] [Enemy8] Death animation component initialized
[20:15:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:52] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:15:52] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:15:52] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:15:52] [ENEMY] [Enemy9] Death animation component initialized
[20:15:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:52] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:15:52] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:15:52] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:15:52] [ENEMY] [Enemy10] Death animation component initialized
[20:15:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:52] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:15:52] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:15:52] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:15:52] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:15:52] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:15:52] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:15:52] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:15:52] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:15:52] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:15:52] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:15:52] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:15:52] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:15:52] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 3/4
[20:15:52] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:15:52] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:15:52] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:15:52] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:15:52] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:15:52] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:15:52] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:15:52] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:15:52] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:15:52] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:15:52] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:15:52] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:15:52] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:15:52] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:15:52] [INFO] [ScoreManager] Level started with 10 enemies
[20:15:52] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:15:52] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:15:52] [INFO] [ReplayManager] Replay data cleared
[20:15:52] [INFO] [BuildingLevel] Previous replay data cleared
[20:15:52] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:15:52] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:15:52] [INFO] [ReplayManager] Level: BuildingLevel
[20:15:52] [INFO] [ReplayManager] Player: Player (valid: True)
[20:15:52] [INFO] [ReplayManager] Enemies count: 10
[20:15:52] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:15:52] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:15:52] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:15:52] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:15:52] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:15:52] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:15:52] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:15:52] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:15:52] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:15:52] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:15:52] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:15:52] [INFO] [BuildingLevel] Replay recording started successfully
[20:15:52] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:15:52] [INFO] [CinemaEffects] Found player node: Player
[20:15:52] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:15:52] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[20:15:52] [ENEMY] [Enemy1] Registered as sound listener
[20:15:52] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[20:15:52] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:15:52] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[20:15:52] [ENEMY] [Enemy2] Registered as sound listener
[20:15:52] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[20:15:52] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:15:52] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[20:15:52] [ENEMY] [Enemy3] Registered as sound listener
[20:15:52] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[20:15:52] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:15:52] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[20:15:52] [ENEMY] [Enemy4] Registered as sound listener
[20:15:52] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[20:15:52] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:15:52] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[20:15:52] [ENEMY] [Enemy5] Registered as sound listener
[20:15:52] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[20:15:52] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:15:52] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[20:15:52] [ENEMY] [Enemy6] Registered as sound listener
[20:15:52] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[20:15:52] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:15:52] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[20:15:52] [ENEMY] [Enemy7] Registered as sound listener
[20:15:52] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[20:15:52] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:15:52] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[20:15:52] [ENEMY] [Enemy8] Registered as sound listener
[20:15:52] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[20:15:52] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:15:52] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[20:15:52] [ENEMY] [Enemy9] Registered as sound listener
[20:15:52] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[20:15:52] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:15:52] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[20:15:52] [ENEMY] [Enemy10] Registered as sound listener
[20:15:52] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[20:15:52] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:15:52] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:15:52] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:52] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:52] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=281.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:52] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:52] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:52] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:52] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:52] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:52] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:15:52] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:15:52] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:15:52] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:15:52] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:15:52] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:15:52] [INFO] [LastChance] Found player: Player
[20:15:52] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:15:52] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:15:52] [INFO] [LastChance] Connected to player Died signal (C#)
[20:15:52] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:15:53] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:15:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(454.0474, 812.5709), source=PLAYER (MakarovPM), range=1469, listeners=19
[20:15:54] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[20:15:54] [ENEMY] [Enemy1] Heard gunshot at (454.0474, 812.5709), source_type=0, intensity=0.01, distance=488
[20:15:54] [ENEMY] [Enemy2] Heard gunshot at (454.0474, 812.5709), source_type=0, intensity=0.03, distance=268
[20:15:54] [ENEMY] [Enemy3] Heard gunshot at (454.0474, 812.5709), source_type=0, intensity=0.04, distance=254
[20:15:54] [ENEMY] [Enemy4] Heard gunshot at (454.0474, 812.5709), source_type=0, intensity=0.02, distance=357
[20:15:54] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:15:54] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=72.5°, current=-33.8°, player=(444,806), corner_timer=0.00
[20:15:54] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=80.3°, current=45.0°, player=(444,806), corner_timer=0.00
[20:15:54] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=167.5°, current=-78.7°, player=(444,806), corner_timer=0.00
[20:15:54] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-165.3°, current=168.8°, player=(444,806), corner_timer=0.00
[20:15:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(454.0474, 812.5709), shooter_id=7617527156229, bullet_pos=(503.2319, 800.4055)
[20:15:54] [INFO] [Bullet] Using shooter_position, distance=50.6666717529297
[20:15:54] [INFO] [Bullet] Distance to wall: 50.6666717529297 (3.44998684745101% of viewport)
[20:15:54] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:15:54] [INFO] [Bullet] Caliber cannot penetrate walls
[20:15:54] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:15:54] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:15:54] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(435,791), corner_timer=0.30
[20:15:54] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(435,791), corner_timer=0.30
[20:15:54] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=175.7°, current=128.3°, player=(408,774), corner_timer=0.00
[20:15:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(414.7552, 780.389), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:15:54] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:15:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(679.0788, 754.1623), source=ENEMY (Enemy3), range=1469, listeners=10
[20:15:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:15:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(382.9366, 793.0691), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:15:54] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:15:54] [INFO] [LastChance] Threat detected: Bullet
[20:15:54] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:15:54] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:54] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(372,787), corner_timer=-0.02
[20:15:54] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:15:54] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(372,787), corner_timer=-0.02
[20:15:54] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:15:54] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(369,790), corner_timer=0.30
[20:15:54] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(369,790), corner_timer=0.30
[20:15:54] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:15:54] [INFO] [Player] Spawning blood effect at (361.4834, 797.23566), dir=(1, 0), lethal=False (C#)
[20:15:54] [INFO] [ImpactEffects] spawn_blood_effect called at (361.4834, 797.2357), dir=(1, 0), lethal=false
[20:15:54] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:54] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:15:54] [INFO] [ImpactEffects] Blood effect spawned at (361.4834, 797.2357) (scale=1)
[20:15:54] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:15:54] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:15:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(679.0788, 754.1623), source=ENEMY (Enemy3), range=1469, listeners=10
[20:15:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:15:54] [INFO] [LastChance] Threat detected: @Area2D@3452
[20:15:54] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:15:54] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:54] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:15:54] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[20:15:54] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[20:15:54] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:15:54] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:15:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(679.0788, 754.1623), source=ENEMY (Enemy3), range=1469, listeners=10
[20:15:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:15:54] [INFO] [Player] Stun ended (Issue #592)
[20:15:54] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:15:54] [INFO] [Player] Spawning blood effect at (337.3424, 820.48846), dir=(1, 0), lethal=False (C#)
[20:15:54] [INFO] [ImpactEffects] spawn_blood_effect called at (337.3424, 820.4885), dir=(1, 0), lethal=false
[20:15:54] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:54] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:15:54] [INFO] [ImpactEffects] Blood effect spawned at (337.3424, 820.4885) (scale=1)
[20:15:54] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:15:54] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:15:54] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:15:54] [INFO] [Player] Stun ended (Issue #592)
[20:15:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(414.7552, 780.389), shooter_id=7617527156229, bullet_pos=(916.8135, 655.602)
[20:15:54] [INFO] [Bullet] Using shooter_position, distance=517.333862304688
[20:15:54] [INFO] [Bullet] Distance to wall: 517.333862304688 (35.2262139774161% of viewport)
[20:15:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:54] [INFO] [Bullet] Caliber cannot penetrate walls
[20:15:54] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(321,836), corner_timer=-0.02
[20:15:54] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[20:15:54] [INFO] [BloodDecal] Blood puddle created at (442.0801, 845.3845) (added to group)
[20:15:54] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=140.6°, current=169.8°, player=(320,839), corner_timer=0.00
[20:15:54] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(320,839), corner_timer=0.30
[20:15:54] [INFO] [BloodDecal] Blood puddle created at (453.9398, 797.7683) (added to group)
[20:15:54] [INFO] [BloodDecal] Blood puddle created at (446.8001, 820.6162) (added to group)
[20:15:54] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[20:15:54] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[20:15:54] [INFO] [BloodDecal] Blood puddle created at (433.0005, 825.5418) (added to group)
[20:15:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(614.17035, 774.2958), shooter_id=7614171712163, bullet_pos=(31.63517, 804.80115)
[20:15:54] [INFO] [Bullet] Using shooter_position, distance=583,3333
[20:15:54] [INFO] [Bullet] Distance to wall: 583,3333 (39,72024% of viewport)
[20:15:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:54] [INFO] [Bullet] Starting wall penetration at (31.63517, 804.80115)
[20:15:54] [INFO] [Bullet] Raycast backward hit penetrating body at distance 47,031998
[20:15:54] [INFO] [Bullet] Body exited signal received for penetrating body
[20:15:54] [INFO] [Bullet] Exiting penetration at (-14.967646, 807.2416) after traveling 41,666668 pixels through wall
[20:15:54] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:15:54] [INFO] [BloodDecal] Blood puddle created at (403.1924, 817.1796) (added to group)
[20:15:54] [INFO] [BloodDecal] Blood puddle created at (378.3134, 851.1195) (added to group)
[20:15:54] [INFO] [BloodDecal] Blood puddle created at (429.0574, 823.3148) (added to group)
[20:15:54] [INFO] [BloodDecal] Blood puddle created at (431.2556, 839.823) (added to group)
[20:15:54] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:54] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:15:54] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:15:54] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:15:54] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:54] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:15:54] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:15:54] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:15:54] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:15:54] [ENEMY] [Enemy1] Death animation component initialized
[20:15:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:54] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:15:54] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:15:54] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:15:54] [ENEMY] [Enemy2] Death animation component initialized
[20:15:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:54] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:15:54] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:15:54] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:15:54] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:54] [ENEMY] [Enemy3] Death animation component initialized
[20:15:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:54] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:15:54] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:15:54] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:15:54] [ENEMY] [Enemy4] Death animation component initialized
[20:15:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:54] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:15:54] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:15:54] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:15:54] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:54] [ENEMY] [Enemy5] Death animation component initialized
[20:15:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:54] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:15:54] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:15:54] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:15:54] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:54] [ENEMY] [Enemy6] Death animation component initialized
[20:15:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:54] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:15:54] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:15:54] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:15:54] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:54] [ENEMY] [Enemy7] Death animation component initialized
[20:15:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:54] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:15:54] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:15:54] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:15:54] [ENEMY] [Enemy8] Death animation component initialized
[20:15:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:54] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:15:54] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:15:54] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:15:54] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:54] [ENEMY] [Enemy9] Death animation component initialized
[20:15:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:54] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:15:54] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:15:54] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:15:54] [ENEMY] [Enemy10] Death animation component initialized
[20:15:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:54] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:15:54] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:15:54] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:15:54] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:15:54] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:15:54] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:15:54] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:15:54] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:15:54] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:15:54] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:15:54] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:15:54] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:15:54] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 2/4
[20:15:54] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:15:55] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:15:55] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:15:55] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:15:55] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:15:55] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:15:55] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:15:55] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:15:55] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:15:55] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:15:55] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:15:55] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:15:55] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:15:55] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:15:55] [INFO] [ScoreManager] Level started with 10 enemies
[20:15:55] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:15:55] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:15:55] [INFO] [ReplayManager] Replay data cleared
[20:15:55] [INFO] [BuildingLevel] Previous replay data cleared
[20:15:55] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:15:55] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:15:55] [INFO] [ReplayManager] Level: BuildingLevel
[20:15:55] [INFO] [ReplayManager] Player: Player (valid: True)
[20:15:55] [INFO] [ReplayManager] Enemies count: 10
[20:15:55] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:15:55] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:15:55] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:15:55] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:15:55] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:15:55] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:15:55] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:15:55] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:15:55] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:15:55] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:15:55] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:15:55] [INFO] [BuildingLevel] Replay recording started successfully
[20:15:55] [INFO] [BloodDecal] Blood puddle created at (461.0508, 897.0551) (added to group)
[20:15:55] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:15:55] [INFO] [CinemaEffects] Found player node: Player
[20:15:55] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:15:55] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:15:55] [ENEMY] [Enemy1] Registered as sound listener
[20:15:55] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[20:15:55] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:15:55] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:15:55] [ENEMY] [Enemy2] Registered as sound listener
[20:15:55] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[20:15:55] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:15:55] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:15:55] [ENEMY] [Enemy3] Registered as sound listener
[20:15:55] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[20:15:55] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:15:55] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:15:55] [ENEMY] [Enemy4] Registered as sound listener
[20:15:55] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[20:15:55] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:15:55] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:15:55] [ENEMY] [Enemy5] Registered as sound listener
[20:15:55] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[20:15:55] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:15:55] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:15:55] [ENEMY] [Enemy6] Registered as sound listener
[20:15:55] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[20:15:55] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:15:55] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:15:55] [ENEMY] [Enemy7] Registered as sound listener
[20:15:55] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[20:15:55] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:15:55] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:15:55] [ENEMY] [Enemy8] Registered as sound listener
[20:15:55] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[20:15:55] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:15:55] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:15:55] [ENEMY] [Enemy9] Registered as sound listener
[20:15:55] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[20:15:55] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:15:55] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:15:55] [ENEMY] [Enemy10] Registered as sound listener
[20:15:55] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[20:15:55] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:15:55] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:15:55] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:55] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:55] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=281.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:55] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:55] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:55] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:55] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:55] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:15:55] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:15:55] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:15:55] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:15:55] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:15:55] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:15:55] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:15:55] [INFO] [LastChance] Found player: Player
[20:15:55] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:15:55] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:15:55] [INFO] [LastChance] Connected to player Died signal (C#)
[20:15:55] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:15:55] [INFO] [BloodDecal] Blood puddle created at (468.0029, 841.8203) (added to group)
[20:15:55] [INFO] [BloodDecal] Blood puddle created at (477.333, 812.3976) (added to group)
[20:15:55] [INFO] [BloodDecal] Blood puddle created at (458.3479, 849.48) (added to group)
[20:15:55] [INFO] [BloodDecal] Blood puddle created at (397.6622, 861.0401) (added to group)
[20:15:55] [INFO] [BloodDecal] Blood puddle created at (424.7709, 892.6998) (added to group)
[20:15:55] [INFO] [BloodDecal] Blood puddle created at (482.7986, 850.9449) (added to group)
[20:15:55] [INFO] [BloodDecal] Blood puddle created at (465.0611, 847.2278) (added to group)
[20:15:55] [INFO] [BloodDecal] Blood puddle created at (497.017, 912.7785) (added to group)
[20:15:55] [INFO] [BloodDecal] Blood puddle created at (469.4481, 946.1123) (added to group)
[20:15:55] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:15:56] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:15:56] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:15:56] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(466,986), corner_timer=0.30
[20:15:56] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(466,986), corner_timer=0.30
[20:15:56] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[20:15:56] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(483,893), corner_timer=-0.02
[20:15:56] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:15:56] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(483,893), corner_timer=-0.02
[20:15:56] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:15:56] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(483,889), corner_timer=0.30
[20:15:56] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(483,889), corner_timer=0.30
[20:15:56] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:15:57] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(483,841), corner_timer=-0.02
[20:15:57] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[20:15:57] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(483,837), corner_timer=0.30
[20:15:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(470.5523, 794.5008), source=PLAYER (MakarovPM), range=1469, listeners=20
[20:15:57] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:15:57] [ENEMY] [Enemy1] Heard gunshot at (470.5523, 794.5008), source_type=0, intensity=0.01, distance=476
[20:15:57] [ENEMY] [Enemy2] Heard gunshot at (470.5523, 794.5008), source_type=0, intensity=0.04, distance=254
[20:15:57] [ENEMY] [Enemy3] Heard gunshot at (470.5523, 794.5008), source_type=0, intensity=0.05, distance=234
[20:15:57] [ENEMY] [Enemy4] Heard gunshot at (470.5523, 794.5008), source_type=0, intensity=0.02, distance=346
[20:15:57] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:15:57] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=69.9°, current=-33.8°, player=(460,788), corner_timer=0.00
[20:15:57] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=75.8°, current=-157.5°, player=(460,788), corner_timer=0.00
[20:15:57] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=170.9°, current=-78.7°, player=(460,788), corner_timer=0.00
[20:15:57] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-161.8°, current=168.8°, player=(460,788), corner_timer=0.00
[20:15:57] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(436,778), corner_timer=-0.02
[20:15:57] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[20:15:57] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(431,777), corner_timer=0.30
[20:15:57] [ENEMY] [Enemy3] Hit: dmg=1, hp=3/3->2/3
[20:15:57] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.994061, -0.10882), lethal=false
[20:15:57] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:57] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:15:57] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=0.5)
[20:15:57] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=174.7°, current=173.8°, player=(411,776), corner_timer=0.00
[20:15:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[20:15:57] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:15:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(402.0912, 787.1531), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:15:57] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:15:57] [INFO] [LastChance] Threat detected: Bullet
[20:15:57] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:15:57] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:15:57] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:15:57] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:15:57] [INFO] [Player] Spawning blood effect at (375.57928, 789.9961), dir=(1, 0), lethal=False (C#)
[20:15:57] [INFO] [ImpactEffects] spawn_blood_effect called at (375.5793, 789.9961), dir=(1, 0), lethal=false
[20:15:57] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:57] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:15:57] [INFO] [ImpactEffects] Blood effect spawned at (375.5793, 789.9961) (scale=1)
[20:15:57] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:15:57] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:15:57] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:15:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(693.4067, 754.5309), source=ENEMY (Enemy3), range=1469, listeners=10
[20:15:57] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:15:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(627.3519, 770.88226), shooter_id=8462981400710, bullet_pos=(510.82455, 816.1192)
[20:15:57] [INFO] [Bullet] Using shooter_position, distance=125,00004
[20:15:57] [INFO] [Bullet] Distance to wall: 125,00004 (8,511483% of viewport)
[20:15:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.6157, 760.5722), source=ENEMY (Enemy3), range=1469, listeners=10
[20:15:57] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:15:57] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(355,803), corner_timer=-0.02
[20:15:57] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[20:15:57] [INFO] [Player] Stun ended (Issue #592)
[20:15:57] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(354,804), corner_timer=0.30
[20:15:57] [INFO] [BloodDecal] Blood puddle created at (750.3755, 752.5491) (added to group)
[20:15:57] [ENEMY] [Enemy3] Hit: dmg=1, hp=2/3->1/3
[20:15:57] [INFO] [ImpactEffects] spawn_blood_effect called at (678.0225, 765.1031), dir=(0.993731, -0.111798), lethal=false
[20:15:57] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:15:57] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:15:57] [INFO] [ImpactEffects] Blood effect spawned at (678.0225, 765.1031) (scale=0.5)
[20:15:57] [INFO] [BloodDecal] Blood puddle created at (756.6053, 750.933) (added to group)
[20:15:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(618.58496, 777.02014), shooter_id=8462981400710, bullet_pos=(497.68683, 808.7794)
[20:15:57] [INFO] [Bullet] Using shooter_position, distance=125,00004
[20:15:57] [INFO] [Bullet] Distance to wall: 125,00004 (8,511483% of viewport)
[20:15:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:15:57] [INFO] [Bullet] Starting wall penetration at (497.68683, 808.7794)
[20:15:57] [INFO] [LastChance] Threat detected: @Area2D@3735
[20:15:57] [INFO] [LastChance] Triggering last chance effect!
[20:15:57] [INFO] [LastChance] Starting last chance effect:
[20:15:57] [INFO] [LastChance]   - Time will be frozen (except player)
[20:15:57] [INFO] [LastChance]   - Duration: 6.00 real seconds
[20:15:57] [INFO] [LastChance]   - Trigger: threat detected
[20:15:57] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:15:57] [INFO] [LastChance]   - Brightness: 0.60
[20:15:57] [INFO] [LastChance] Pushed bullet @Area2D@3735 from distance 142.4 to 200.0
[20:15:57] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[20:15:57] [INFO] [LastChance] Set player Player and all 26 children to PROCESS_MODE_ALWAYS
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:15:57] [INFO] [LastChance] Skipping player node: Player
[20:15:57] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:15:57] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3728
[20:15:57] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3730
[20:15:57] [INFO] [Bullet] Body exited signal received for penetrating body
[20:15:57] [INFO] [Bullet] Exiting penetration at (550.45215, 809.94916) after traveling 0 pixels through wall
[20:15:57] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:15:57] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:15:57] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:15:57] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:15:57] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[20:15:57] [INFO] [BloodDecal] Blood puddle created at (430.3835, 809.5433) (added to group)
[20:15:57] [INFO] [BloodDecal] Blood puddle created at (820.8518, 751.3355) (added to group)
[20:15:58] [INFO] [BloodDecal] Blood puddle created at (820.9153, 730.4377) (added to group)
[20:15:58] [INFO] [BloodDecal] Blood puddle created at (493.2493, 800.9188) (added to group)
[20:15:58] [INFO] [BloodDecal] Blood puddle created at (461.778, 791.9514) (added to group)
[20:15:58] [INFO] [BloodDecal] Blood puddle created at (780.5897, 806.8858) (added to group)
[20:15:58] [INFO] [BloodDecal] Blood puddle created at (807.5416, 841.3846) (added to group)
[20:15:58] [INFO] [BloodDecal] Blood puddle created at (461.9823, 787.4044) (added to group)
[20:15:58] [INFO] [BloodDecal] Blood puddle created at (795.0709, 760.5851) (added to group)
[20:15:58] [INFO] [BloodDecal] Blood puddle created at (808.9464, 802.5947) (added to group)
[20:15:58] [INFO] [BloodDecal] Blood puddle created at (758.7167, 786.7671) (added to group)
[20:15:58] [INFO] [BloodDecal] Blood puddle created at (736.5632, 767.4874) (added to group)
[20:15:58] [INFO] [BloodDecal] Blood puddle created at (747.9539, 775.0447) (added to group)
[20:15:58] [INFO] [BloodDecal] Blood puddle created at (836.1501, 799.4892) (added to group)
[20:15:58] [INFO] [BloodDecal] Blood puddle created at (894.9808, 795.79) (added to group)
[20:15:58] [INFO] [BloodDecal] Blood puddle created at (744.0916, 771.5784) (added to group)
[20:15:58] [INFO] [BloodDecal] Blood puddle created at (766.0755, 752.9102) (added to group)
[20:15:58] [INFO] [LastChance] Freezing newly created grenade: FragGrenade
[20:15:58] [INFO] [LastChance] Registered frozen grenade: FragGrenade
[20:15:58] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[20:15:58] [INFO] [GrenadeBase] Grenade created at (636.1349, 771.5851) (frozen)
[20:15:58] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[20:15:58] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[20:15:58] [INFO] [GrenadeTimerHelper] Attached GrenadeTimer to FragGrenade (type: Frag)
[20:15:58] [INFO] [EnemyGrenade] Attached C# GrenadeTimer to grenade (type: Frag)
[20:15:58] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[20:15:58] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[20:15:58] [INFO] [GrenadeBase] LEGACY throw_grenade() called! Direction: (-0.992246, 0.12429), Speed: 654.3 (unfrozen)
[20:15:58] [INFO] [GrenadeBase] NOTE: Using DRAG-BASED system. If velocity-based is expected, ensure grenade has throw_grenade_velocity_based() method.
[20:15:58] [INFO] [FragGrenade] Grenade thrown (legacy) - impact detection enabled
[20:15:58] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[20:15:58] [INFO] [EnemyGrenade] Enemy grenade thrown! Target: (351.3433, 808.3603), Distance: 327
[20:15:58] [INFO] [BloodDecal] Blood puddle created at (812.9661, 774.7258) (added to group)
[20:15:58] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:58] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:15:58] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:15:58] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:15:58] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:15:58] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:15:58] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:15:58] [INFO] [LastChance] All process modes restored
[20:15:58] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:15:58] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:15:58] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:15:58] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:58] [ENEMY] [Enemy1] Death animation component initialized
[20:15:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:58] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:15:58] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:15:58] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:15:58] [ENEMY] [Enemy2] Death animation component initialized
[20:15:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:58] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:15:58] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:15:58] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:15:58] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:58] [ENEMY] [Enemy3] Death animation component initialized
[20:15:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:58] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:15:58] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:15:58] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:15:58] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:58] [ENEMY] [Enemy4] Death animation component initialized
[20:15:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:58] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:15:58] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:15:58] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:15:58] [ENEMY] [Enemy5] Death animation component initialized
[20:15:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:58] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:15:58] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:15:58] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:15:58] [ENEMY] [Enemy6] Death animation component initialized
[20:15:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:58] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:15:58] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:15:58] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:15:58] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:15:58] [ENEMY] [Enemy7] Death animation component initialized
[20:15:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:58] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:15:58] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:15:58] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:15:58] [ENEMY] [Enemy8] Death animation component initialized
[20:15:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:58] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:15:58] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:15:58] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:15:58] [ENEMY] [Enemy9] Death animation component initialized
[20:15:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:58] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:15:58] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:15:58] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:15:58] [ENEMY] [Enemy10] Death animation component initialized
[20:15:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:15:58] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:15:58] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:15:58] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:15:58] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:15:58] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:15:58] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:15:58] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:15:58] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:15:58] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:15:58] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:15:58] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:15:58] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:15:58] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 4/4
[20:15:58] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:15:58] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:15:58] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:15:58] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:15:58] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:15:58] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:15:58] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:15:58] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:15:58] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:15:58] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:15:58] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:15:58] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:15:58] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:15:58] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:15:58] [INFO] [ScoreManager] Level started with 10 enemies
[20:15:58] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:15:58] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:15:58] [INFO] [ReplayManager] Replay data cleared
[20:15:58] [INFO] [BuildingLevel] Previous replay data cleared
[20:15:58] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:15:58] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:15:58] [INFO] [ReplayManager] Level: BuildingLevel
[20:15:58] [INFO] [ReplayManager] Player: Player (valid: True)
[20:15:58] [INFO] [ReplayManager] Enemies count: 10
[20:15:58] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:15:58] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:15:58] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:15:58] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:15:58] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:15:58] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:15:58] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:15:58] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:15:58] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:15:58] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:15:58] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:15:58] [INFO] [BuildingLevel] Replay recording started successfully
[20:15:58] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:15:58] [INFO] [CinemaEffects] Found player node: Player
[20:15:58] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:15:58] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:15:58] [ENEMY] [Enemy1] Registered as sound listener
[20:15:58] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[20:15:58] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:15:58] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:15:58] [ENEMY] [Enemy2] Registered as sound listener
[20:15:58] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[20:15:58] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:15:58] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:15:58] [ENEMY] [Enemy3] Registered as sound listener
[20:15:58] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[20:15:58] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:15:58] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:15:58] [ENEMY] [Enemy4] Registered as sound listener
[20:15:58] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[20:15:58] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:15:58] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:15:58] [ENEMY] [Enemy5] Registered as sound listener
[20:15:58] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[20:15:58] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:15:58] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:15:58] [ENEMY] [Enemy6] Registered as sound listener
[20:15:58] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[20:15:58] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:15:58] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:15:58] [ENEMY] [Enemy7] Registered as sound listener
[20:15:58] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[20:15:58] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:15:58] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:15:58] [ENEMY] [Enemy8] Registered as sound listener
[20:15:58] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[20:15:58] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:15:58] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:15:58] [ENEMY] [Enemy9] Registered as sound listener
[20:15:58] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[20:15:58] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:15:58] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:15:58] [ENEMY] [Enemy10] Registered as sound listener
[20:15:58] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[20:15:58] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:15:58] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:15:58] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:58] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:58] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:58] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:58] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:58] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:58] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:58] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:15:58] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:15:58] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:15:58] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:15:58] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:15:58] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:15:58] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:15:58] [INFO] [LastChance] Found player: Player
[20:15:58] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:15:58] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:15:58] [INFO] [LastChance] Connected to player Died signal (C#)
[20:15:58] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:15:58] [INFO] [BloodDecal] Blood puddle created at (859.8348, 825.8573) (added to group)
[20:15:58] [INFO] [BloodDecal] Blood puddle created at (816.4542, 818.8416) (added to group)
[20:15:59] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:15:59] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=164.4°, current=123.7°, player=(450,819), corner_timer=0.00
[20:15:59] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:16:00] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=166.8°, current=-64.9°, player=(450,808), corner_timer=0.00
[20:16:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 800.9443), source=PLAYER (MakarovPM), range=1469, listeners=20
[20:16:00] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:16:00] [ENEMY] [Enemy1] Heard gunshot at (460, 800.9443), source_type=0, intensity=0.01, distance=478
[20:16:00] [ENEMY] [Enemy2] Heard gunshot at (460, 800.9443), source_type=0, intensity=0.04, distance=258
[20:16:00] [ENEMY] [Enemy4] Heard gunshot at (460, 800.9443), source_type=0, intensity=0.02, distance=354
[20:16:00] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:00] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=71.4°, current=-157.5°, player=(450,794), corner_timer=0.00
[20:16:00] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=78.5°, current=168.8°, player=(450,794), corner_timer=0.00
[20:16:00] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-163.3°, current=-101.3°, player=(450,794), corner_timer=0.00
[20:16:00] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:00] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:16:00] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,786), corner_timer=0.30
[20:16:00] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,786), corner_timer=0.30
[20:16:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 772.3333), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:00] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:00] [ENEMY] [Enemy3] Hit: dmg=1, hp=2/2->1/2
[20:16:00] [INFO] [ImpactEffects] spawn_blood_effect called at (684.451, 753.7694), dir=(0.993998, -0.109398), lethal=false
[20:16:00] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:00] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:00] [INFO] [ImpactEffects] Blood effect spawned at (684.451, 753.7694) (scale=0.5)
[20:16:00] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=177.3°, current=173.7°, player=(450,764), corner_timer=0.00
[20:16:00] [INFO] [EnemyGrenade] Unsafe throw distance (235 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:00] [INFO] [EnemyGrenade] Unsafe throw distance (235 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:00] [INFO] [EnemyGrenade] Unsafe throw distance (235 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:00] [INFO] [EnemyGrenade] Unsafe throw distance (235 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:00] [INFO] [EnemyGrenade] Unsafe throw distance (235 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.451, 753.7694), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:00] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:00] [INFO] [EnemyGrenade] Unsafe throw distance (235 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:00] [INFO] [LastChance] Threat detected: Bullet
[20:16:00] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:00] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:00] [INFO] [EnemyGrenade] Unsafe throw distance (235 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:00] [INFO] [EnemyGrenade] Unsafe throw distance (235 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:00] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:16:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 768.4444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:00] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:00] [INFO] [EnemyGrenade] Unsafe throw distance (235 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:00] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:16:00] [INFO] [Player] Spawning blood effect at (450, 762.4444), dir=(1, 0), lethal=False (C#)
[20:16:00] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 762.4444), dir=(1, 0), lethal=false
[20:16:00] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:00] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:00] [INFO] [ImpactEffects] Blood effect spawned at (450, 762.4444) (scale=1)
[20:16:00] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:16:00] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:16:00] [INFO] [EnemyGrenade] Unsafe throw distance (232 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:00] [ENEMY] [Enemy3] Hit: dmg=1, hp=1/2->0/2
[20:16:00] [INFO] [ImpactEffects] spawn_blood_effect called at (679.2462, 752.6058), dir=(0.984779, -0.173808), lethal=true
[20:16:00] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:00] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[20:16:00] [INFO] [ImpactEffects] Blood effect spawned at (679.2462, 752.6058) (scale=0.75)
[20:16:00] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[20:16:00] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[20:16:00] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[20:16:00] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[20:16:00] [INFO] [DeathAnim] Started - Angle: -10.0 deg, Index: 11
[20:16:00] [ENEMY] [Enemy3] Death animation started with hit direction: (0.984779, -0.173808)
[20:16:00] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,762), corner_timer=-0.02
[20:16:00] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:00] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,762), corner_timer=-0.02
[20:16:00] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:16:00] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,762), corner_timer=0.30
[20:16:00] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,762), corner_timer=0.30
[20:16:00] [INFO] [Player] Stun ended (Issue #592)
[20:16:00] [INFO] [BloodDecal] Blood puddle created at (737.1044, 753.2063) (added to group)
[20:16:00] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:16:00] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:16:00] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[20:16:00] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[20:16:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 768.4444), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:16:00] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[20:16:00] [INFO] [BloodDecal] Blood puddle created at (737.6788, 759.9626) (added to group)
[20:16:00] [INFO] [BloodDecal] Blood puddle created at (498.7385, 751.5325) (added to group)
[20:16:00] [INFO] [BloodDecal] Blood puddle created at (760.9866, 778.4346) (added to group)
[20:16:00] [INFO] [BloodDecal] Blood puddle created at (815.8904, 757.8109) (added to group)
[20:16:00] [INFO] [BloodDecal] Blood puddle created at (537.745, 798.2513) (added to group)
[20:16:00] [INFO] [BloodDecal] Blood puddle created at (757.3983, 772.2192) (added to group)
[20:16:00] [INFO] [BloodDecal] Blood puddle created at (759.7252, 767.5185) (added to group)
[20:16:00] [INFO] [BloodDecal] Blood puddle created at (788.6277, 807.8073) (added to group)
[20:16:00] [INFO] [BloodDecal] Blood puddle created at (563.1741, 809.8181) (added to group)
[20:16:00] [INFO] [BloodDecal] Blood puddle created at (544.7987, 779.4923) (added to group)
[20:16:00] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,762), corner_timer=-0.02
[20:16:00] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[20:16:00] [INFO] [BloodDecal] Blood puddle created at (832.4085, 798.8745) (added to group)
[20:16:00] [INFO] [BloodDecal] Blood puddle created at (566.16, 751.3457) (added to group)
[20:16:00] [INFO] [BloodDecal] Blood puddle created at (739.2653, 787.3526) (added to group)
[20:16:00] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,762), corner_timer=0.30
[20:16:00] [INFO] [BloodDecal] Blood puddle created at (823.464, 806.0054) (added to group)
[20:16:00] [INFO] [BloodDecal] Blood puddle created at (765.4577, 760.9725) (added to group)
[20:16:00] [INFO] [BloodDecal] Blood puddle created at (772.3558, 786.8849) (added to group)
[20:16:00] [INFO] [BloodDecal] Blood puddle created at (735.3376, 794.2463) (added to group)
[20:16:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(460, 768.4444), shooter_id=9523066570256, bullet_pos=(918.3266, 677.1346)
[20:16:00] [INFO] [Bullet] Using shooter_position, distance=467.333648681641
[20:16:00] [INFO] [Bullet] Distance to wall: 467.333648681641 (31.8216074895372% of viewport)
[20:16:00] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:00] [INFO] [Bullet] Caliber cannot penetrate walls
[20:16:00] [INFO] [BloodDecal] Blood puddle created at (839.0892, 760.4196) (added to group)
[20:16:00] [INFO] [BloodDecal] Blood puddle created at (748.5812, 789.5002) (added to group)
[20:16:00] [INFO] [BloodDecal] Blood puddle created at (801.7726, 761.0593) (added to group)
[20:16:00] [ENEMY] [Enemy3] Ragdoll activated
[20:16:00] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[20:16:00] [INFO] [BloodDecal] Blood puddle created at (808.2799, 832.8801) (added to group)
[20:16:00] [INFO] [BloodDecal] Blood puddle created at (754.9474, 757.4544) (added to group)
[20:16:00] [INFO] [BloodDecal] Blood puddle created at (781.3544, 821.3286) (added to group)
[20:16:00] [INFO] [BloodDecal] Blood puddle created at (889.9031, 751.0424) (added to group)
[20:16:01] [INFO] [BloodDecal] Blood puddle created at (647.5901, 808.8366) (added to group)
[20:16:01] [INFO] [BloodDecal] Blood puddle created at (872.4304, 807.9702) (added to group)
[20:16:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(460, 768.4444), shooter_id=9523066570256, bullet_pos=(910.2368, 643.1954)
[20:16:01] [INFO] [Bullet] Using shooter_position, distance=467.333312988281
[20:16:01] [INFO] [Bullet] Distance to wall: 467.333312988281 (31.8215846315591% of viewport)
[20:16:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:01] [INFO] [Bullet] Caliber cannot penetrate walls
[20:16:01] [INFO] [BloodDecal] Blood puddle created at (823.2322, 732.8905) (added to group)
[20:16:01] [INFO] [BloodDecal] Blood puddle created at (803.5778, 766.879) (added to group)
[20:16:01] [INFO] [BloodDecal] Blood puddle created at (803.0333, 795.6715) (added to group)
[20:16:01] [INFO] [BloodDecal] Blood puddle created at (838.0501, 808.4319) (added to group)
[20:16:01] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,762), corner_timer=-0.02
[20:16:01] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[20:16:01] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,762), corner_timer=0.30
[20:16:01] [INFO] [BloodDecal] Blood puddle created at (628.2195, 824.6082) (added to group)
[20:16:01] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(450,762), corner_timer=-0.02
[20:16:01] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[20:16:01] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(450,762), corner_timer=0.30
[20:16:01] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[20:16:01] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(450,807), corner_timer=-0.02
[20:16:01] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[20:16:01] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(450,813), corner_timer=0.30
[20:16:01] [ENEMY] [Enemy3] Death animation completed
[20:16:02] [ENEMY] [Enemy1] Warning: No valid flank position (both sides behind walls)
[20:16:02] [ENEMY] [Enemy1] FLANKING started: target=(251.8144, 890.8992), side=left, pos=(238.6838, 401.9335)
[20:16:02] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
[20:16:02] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:16:02] [ENEMY] [Enemy2] PURSUING corner check: angle 162.5°
[20:16:02] [ENEMY] [Enemy1] FLANKING corner check: angle -116.5°
[20:16:02] [ENEMY] [Enemy4] PURSUING corner check: angle -46.1°
[20:16:02] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(450,962), corner_timer=-0.02
[20:16:02] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[20:16:02] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(450,964), corner_timer=0.30
[20:16:02] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:16:02] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[20:16:02] [ENEMY] [Enemy1] Player reloading: false -> true
[20:16:02] [ENEMY] [Enemy2] Player reloading: false -> true
[20:16:02] [ENEMY] [Enemy3] Player reloading: false -> true
[20:16:02] [ENEMY] [Enemy4] Player reloading: false -> true
[20:16:02] [ENEMY] [Enemy5] Player reloading: false -> true
[20:16:02] [ENEMY] [Enemy6] Player reloading: false -> true
[20:16:02] [ENEMY] [Enemy7] Player reloading: false -> true
[20:16:02] [ENEMY] [Enemy8] Player reloading: false -> true
[20:16:02] [ENEMY] [Enemy9] Player reloading: false -> true
[20:16:02] [ENEMY] [Enemy10] Player reloading: false -> true
[20:16:02] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(450, 969.4999), source=PLAYER (Player), range=900, listeners=9
[20:16:02] [ENEMY] [Enemy2] Heard player RELOAD at (450, 969.4999), intensity=0.02, distance=323
[20:16:02] [ENEMY] [Enemy4] Heard player RELOAD at (450, 969.4999), intensity=0.04, distance=252
[20:16:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=6, self=0, below_threshold=1
[20:16:02] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=560), can_see=false
[20:16:02] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=true (dist=323), can_see=false
[20:16:02] [ENEMY] [Enemy2] Pursuing vulnerability sound at (450, 969.4999), distance=323
[20:16:02] [ENEMY] [Enemy4] Player vulnerable (reloading) but cannot attack: close=true (dist=252), can_see=false
[20:16:02] [INFO] [EnemyGrenade] Unsafe throw distance (252 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:02] [ENEMY] [Enemy4] Pursuing vulnerability sound at (450, 969.4999), distance=252
[20:16:02] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1395), can_see=false
[20:16:02] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1587), can_see=false
[20:16:02] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=1164), can_see=false
[20:16:02] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1528), can_see=false
[20:16:02] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1749), can_see=false
[20:16:02] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=950), can_see=false
[20:16:02] [ENEMY] [Enemy1] FLANKING corner check: angle 14.6°
[20:16:02] [INFO] [EnemyGrenade] Unsafe throw distance (247 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:02] [INFO] [EnemyGrenade] Unsafe throw distance (242 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:02] [INFO] [EnemyGrenade] Unsafe throw distance (237 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:02] [INFO] [EnemyGrenade] Unsafe throw distance (232 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:02] [INFO] [EnemyGrenade] Unsafe throw distance (228 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:02] [INFO] [ReplayManager] Recording frame 240 (4,0s): player_valid=True, enemies=10
[20:16:02] [INFO] [EnemyGrenade] Unsafe throw distance (223 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:02] [INFO] [EnemyGrenade] Unsafe throw distance (219 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:02] [INFO] [EnemyGrenade] Unsafe throw distance (213 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:02] [INFO] [EnemyGrenade] Unsafe throw distance (211 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:02] [INFO] [EnemyGrenade] Unsafe throw distance (210 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:02] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(450,969), corner_timer=-0.02
[20:16:02] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[20:16:02] [INFO] [EnemyGrenade] Unsafe throw distance (208 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:02] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(450,969), corner_timer=0.30
[20:16:02] [INFO] [EnemyGrenade] Unsafe throw distance (206 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:02] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[20:16:02] [ENEMY] [Enemy1] Player reloading: true -> false
[20:16:02] [ENEMY] [Enemy2] Player reloading: true -> false
[20:16:02] [ENEMY] [Enemy4] Player reloading: true -> false
[20:16:02] [ENEMY] [Enemy5] Player reloading: true -> false
[20:16:02] [ENEMY] [Enemy6] Player reloading: true -> false
[20:16:02] [ENEMY] [Enemy7] Player reloading: true -> false
[20:16:02] [ENEMY] [Enemy8] Player reloading: true -> false
[20:16:02] [ENEMY] [Enemy9] Player reloading: true -> false
[20:16:02] [ENEMY] [Enemy10] Player reloading: true -> false
[20:16:02] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[20:16:02] [INFO] [EnemyGrenade] Unsafe throw distance (205 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:02] [INFO] [EnemyGrenade] Unsafe throw distance (203 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:02] [INFO] [EnemyGrenade] Unsafe throw distance (202 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:02] [INFO] [EnemyGrenade] Unsafe throw distance (201 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:02] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=101.0°, current=67.0°, player=(450,969), corner_timer=0.02
[20:16:02] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[20:16:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(512.4485, 649.3369), source=ENEMY (Enemy2), range=1469, listeners=9
[20:16:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=4
[20:16:02] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:02] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[20:16:02] [INFO] [EnemyGrenade] Unsafe throw distance (199 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:02] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:16:02] [INFO] [EnemyGrenade] Unsafe throw distance (199 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:02] [INFO] [EnemyGrenade] Unsafe throw distance (198 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:02] [INFO] [LastChance] Threat detected: Bullet
[20:16:02] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:16:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:02] [ENEMY] [Enemy1] FLANKING corner check: angle 116.9°
[20:16:02] [INFO] [EnemyGrenade] Unsafe throw distance (198 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:02] [INFO] [BloodyFeet:Enemy4] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[20:16:02] [INFO] [EnemyGrenade] Unsafe throw distance (197 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:02] [INFO] [EnemyGrenade] Unsafe throw distance (197 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:02] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:16:02] [INFO] [Player] Spawning blood effect at (450, 969.49994), dir=(1, 0), lethal=False (C#)
[20:16:02] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 969.4999), dir=(1, 0), lethal=false
[20:16:02] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:02] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:02] [INFO] [ImpactEffects] Wall found for blood splatter at (500, 969.4999) (dist=50 px)
[20:16:02] [INFO] [BloodDecal] Blood puddle created at (499, 969.4999) (added to group)
[20:16:02] [INFO] [ImpactEffects] Blood effect spawned at (450, 969.4999) (scale=1)
[20:16:02] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:16:02] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:16:02] [INFO] [EnemyGrenade] Unsafe throw distance (197 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:02] [INFO] [EnemyGrenade] Unsafe throw distance (197 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:02] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[20:16:02] [INFO] [EnemyGrenade] Unsafe throw distance (198 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:02] [INFO] [EnemyGrenade] Unsafe throw distance (198 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:02] [INFO] [EnemyGrenade] Unsafe throw distance (199 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:02] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:02] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=100.5°, current=100.6°, player=(450,969), corner_timer=0.02
[20:16:02] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[20:16:02] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:02] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(450,969), corner_timer=-0.02
[20:16:02] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[20:16:02] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P3:corner, state=RETREATING, target=162.5°, current=100.5°, player=(450,969), corner_timer=0.02
[20:16:02] [INFO] [EnemyGrenade] Unsafe throw distance (199 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:02] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(450,969), corner_timer=0.30
[20:16:02] [INFO] [Player] Stun ended (Issue #592)
[20:16:02] [INFO] [EnemyGrenade] Unsafe throw distance (201 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:03] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:03] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:03] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[20:16:03] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:03] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:16:03] [INFO] [EnemyGrenade] Unsafe throw distance (201 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:03] [INFO] [EnemyGrenade] Unsafe throw distance (105 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:03] [INFO] [EnemyGrenade] Unsafe throw distance (102 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:03] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:16:03] [INFO] [EnemyGrenade] Unsafe throw distance (99 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 984.8333), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:16:03] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[20:16:03] [INFO] [EnemyGrenade] Unsafe throw distance (105 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:03] [ENEMY] [Enemy1] FLANKING corner check: angle -63.1°
[20:16:03] [INFO] [EnemyGrenade] Unsafe throw distance (107 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:03] [INFO] [EnemyGrenade] Unsafe throw distance (109 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:03] [INFO] [EnemyGrenade] Unsafe throw distance (103 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:03] [INFO] [EnemyGrenade] Unsafe throw distance (213 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:03] [INFO] [EnemyGrenade] Unsafe throw distance (211 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:03] [INFO] [EnemyGrenade] Unsafe throw distance (209 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:03] [INFO] [EnemyGrenade] Unsafe throw distance (208 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:03] [INFO] [EnemyGrenade] Unsafe throw distance (206 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:03] [INFO] [EnemyGrenade] Unsafe throw distance (204 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 1026.333), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:16:03] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[20:16:03] [INFO] [EnemyGrenade] Unsafe throw distance (202 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:03] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(450,1020), corner_timer=-0.02
[20:16:03] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[20:16:03] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=102.2°, current=91.2°, player=(450,1025), corner_timer=-0.02
[20:16:03] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:16:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(503.9268, 775.9266), source=ENEMY (Enemy4), range=1469, listeners=9
[20:16:03] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[20:16:03] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(450,1025), corner_timer=0.30
[20:16:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(497.29224, 843.6509), shooter_id=9520063450627, bullet_pos=(497.29224, 843.6509)
[20:16:03] [INFO] [Bullet] Using shooter_position, distance=0
[20:16:03] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[20:16:03] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:16:03] [INFO] [Bullet] Starting wall penetration at (497.29224, 843.6509)
[20:16:03] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[20:16:03] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:16:03] [INFO] [Bullet] Exiting penetration at (487.2829, 889.23145) after traveling 41,66667 pixels through wall
[20:16:03] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:16:03] [INFO] [BloodDecal] Blood puddle created at (525.1805, 1042.954) (added to group)
[20:16:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(460, 984.8333), shooter_id=9523066570256, bullet_pos=(376.243, 713.4652)
[20:16:03] [INFO] [Bullet] Using shooter_position, distance=283.999725341797
[20:16:03] [INFO] [Bullet] Distance to wall: 283.999725341797 (19.3380635279688% of viewport)
[20:16:03] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:03] [INFO] [Bullet] Caliber cannot penetrate walls
[20:16:03] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:16:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(464.6194, 1090.42), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:16:03] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[20:16:03] [ENEMY] [Enemy1] FLANKING corner check: angle -90.4°
[20:16:03] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[20:16:03] [INFO] [ReplayManager] Recording frame 300 (5,0s): player_valid=True, enemies=10
[20:16:03] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[20:16:03] [INFO] [BloodDecal] Blood puddle created at (671.1216, 1181.211) (added to group)
[20:16:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(460, 1026.333), shooter_id=9523066570256, bullet_pos=(375.219, 703.2726)
[20:16:03] [INFO] [Bullet] Using shooter_position, distance=333.999969482422
[20:16:03] [INFO] [Bullet] Distance to wall: 333.999969482422 (22.7426720938457% of viewport)
[20:16:03] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:03] [INFO] [Bullet] Caliber cannot penetrate walls
[20:16:03] [ENEMY] [Enemy1] ROT_CHANGE: P2:combat_state -> P1:visible, state=FLANKING, target=93.5°, current=96.7°, player=(474,1114), corner_timer=0.20
[20:16:03] [ENEMY] [Enemy1] State: FLANKING -> COMBAT
[20:16:03] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(477,1118), corner_timer=-0.02
[20:16:03] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[20:16:03] [ENEMY] [Enemy1] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=92.8°, current=167.8°, player=(481,1122), corner_timer=0.20
[20:16:03] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(481,1122), corner_timer=0.30
[20:16:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(503.4664, 1140.328), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:16:03] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
[20:16:03] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[20:16:03] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:16:03] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:16:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(464.6194, 1090.42), shooter_id=9523066570256, bullet_pos=(399.3933, 711.9995)
[20:16:03] [INFO] [Bullet] Using shooter_position, distance=384.000518798828
[20:16:03] [INFO] [Bullet] Distance to wall: 384.000518798828 (26.1473014397027% of viewport)
[20:16:03] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:03] [INFO] [Bullet] Caliber cannot penetrate walls
[20:16:03] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=-40.0°, current=77.7°, player=(544,1183), corner_timer=-0.02
[20:16:03] [INFO] [EnemyGrenade] Unsafe throw distance (128 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:03] [INFO] [EnemyGrenade] Unsafe throw distance (131 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:03] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[20:16:03] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:03] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[20:16:03] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:03] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.5°, current=89.5°, player=(557,1191), corner_timer=-0.02
[20:16:03] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[20:16:03] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:03] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(562,1193), corner_timer=0.30
[20:16:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(577.0419, 1201.709), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:16:03] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=6
[20:16:03] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [ENEMY] [Enemy1] ROT_CHANGE: P2:combat_state -> P3:corner, state=RETREATING, target=-90.4°, current=81.4°, player=(582,1199), corner_timer=0.20
[20:16:04] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:16:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(503.4664, 1140.328), shooter_id=9523066570256, bullet_pos=(396.5862, 702.5194)
[20:16:04] [INFO] [Bullet] Using shooter_position, distance=450.666351318359
[20:16:04] [INFO] [Bullet] Distance to wall: 450.666351318359 (30.6867005636141% of viewport)
[20:16:04] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:04] [INFO] [Bullet] Caliber cannot penetrate walls
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(628.2091, 1202.042), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:16:04] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=6
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.4°, current=89.5°, player=(652,1173), corner_timer=-0.02
[20:16:04] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.3°, player=(656,1169), corner_timer=0.30
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(628.2091, 1202.042), shooter_id=9523066570256, bullet_pos=(520.9347, 1013.029)
[20:16:04] [INFO] [Bullet] Using shooter_position, distance=217.333343505859
[20:16:04] [INFO] [Bullet] Distance to wall: 217.333343505859 (14.7986270000932% of viewport)
[20:16:04] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:04] [INFO] [Bullet] Caliber cannot penetrate walls
[20:16:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(628.2091, 1202.042), shooter_id=9523066570256, bullet_pos=(520.9347, 1013.029)
[20:16:04] [INFO] [Bullet] Using shooter_position, distance=217.333343505859
[20:16:04] [INFO] [Bullet] Distance to wall: 217.333343505859 (14.7986270000932% of viewport)
[20:16:04] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:04] [INFO] [Bullet] Caliber cannot penetrate walls
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(577.0419, 1201.709), shooter_id=9523066570256, bullet_pos=(361.3422, 713.2122)
[20:16:04] [INFO] [Bullet] Using shooter_position, distance=533.999328613281
[20:16:04] [INFO] [Bullet] Distance to wall: 533.999328613281 (36.3609962234585% of viewport)
[20:16:04] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:04] [INFO] [Bullet] Caliber cannot penetrate walls
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [ReplayManager] Recording frame 360 (6,0s): player_valid=True, enemies=10
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.5°, player=(695,1100), corner_timer=-0.02
[20:16:04] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(695,1098), corner_timer=0.30
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(641,1072), corner_timer=-0.02
[20:16:04] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(637,1069), corner_timer=0.30
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:04] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [ENEMY] [Enemy2] State: SUPPRESSED -> IN_COVER
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(541,1073), corner_timer=-0.02
[20:16:05] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[20:16:05] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(537,1075), corner_timer=0.30
[20:16:05] [ENEMY] [Enemy2] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=83.9°, current=162.5°, player=(533,1078), corner_timer=0.02
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [ENEMY] [Enemy4] ROT_CHANGE: P4:velocity -> P1:visible, state=SUPPRESSED, target=79.7°, current=69.1°, player=(521,1089), corner_timer=-0.02
[20:16:05] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:16:05] [INFO] [ScoreManager] Combo ended at 1. Max combo: 1
[20:16:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(475.476, 838.5294), source=ENEMY (Enemy4), range=1469, listeners=9
[20:16:05] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[20:16:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(475.32037, 906.0538), shooter_id=9520063450627, bullet_pos=(497.52466, 986.37445)
[20:16:05] [INFO] [Bullet] Using shooter_position, distance=83,33332
[20:16:05] [INFO] [Bullet] Distance to wall: 83,33332 (5,6743193% of viewport)
[20:16:05] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(475.32037, 906.0538), shooter_id=9520063450627, bullet_pos=(495.54065, 990.964)
[20:16:05] [INFO] [Bullet] Using shooter_position, distance=87,284615
[20:16:05] [INFO] [Bullet] Distance to wall: 87,284615 (5,9433703% of viewport)
[20:16:05] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(475.476, 838.5294), source=ENEMY (Enemy4), range=1469, listeners=9
[20:16:05] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[20:16:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(496.3831, 1130.954), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:16:05] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
[20:16:05] [INFO] [LastChance] Threat detected: @Area2D@4200
[20:16:05] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:16:05] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:05] [INFO] [ReplayManager] Recording frame 420 (7,0s): player_valid=True, enemies=10
[20:16:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(475.476, 838.5294), source=ENEMY (Enemy4), range=1469, listeners=9
[20:16:05] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[20:16:05] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[20:16:05] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P4:velocity, state=SEEKING_COVER, target=156.5°, current=157.9°, player=(463,1148), corner_timer=-0.02
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(463,1148), corner_timer=-0.02
[20:16:05] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[20:16:05] [INFO] [LastChance] Threat detected: Bullet
[20:16:05] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:16:05] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(461,1152), corner_timer=0.30
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:16:05] [INFO] [Player] Spawning blood effect at (453.95932, 1166.5228), dir=(1, 0), lethal=False (C#)
[20:16:05] [INFO] [ImpactEffects] spawn_blood_effect called at (453.9593, 1166.523), dir=(1, 0), lethal=false
[20:16:05] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:05] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:05] [INFO] [ImpactEffects] Blood effect spawned at (453.9593, 1166.523) (scale=1)
[20:16:05] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:16:05] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:16:05] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(471.2116, 905.9701), shooter_id=9520063450627, bullet_pos=(516.4108, 1403.9232)
[20:16:05] [INFO] [Bullet] Using shooter_position, distance=500,00027
[20:16:05] [INFO] [Bullet] Distance to wall: 500,00027 (34,045937% of viewport)
[20:16:05] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:05] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:16:05] [ENEMY] [Enemy4] Hit: dmg=1, hp=3/3->2/3
[20:16:05] [INFO] [ImpactEffects] spawn_blood_effect called at (470.5865, 840.6595), dir=(-0.042726, -0.999087), lethal=false
[20:16:05] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:05] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:05] [INFO] [ImpactEffects] Blood effect spawned at (470.5865, 840.6595) (scale=0.5)
[20:16:05] [ENEMY] [Enemy4] ROT_CHANGE: P4:velocity -> P1:visible, state=SEEKING_COVER, target=94.2°, current=87.6°, player=(445,1185), corner_timer=-0.02
[20:16:05] [INFO] [Player] Stun ended (Issue #592)
[20:16:05] [INFO] [BloodyFeet:Player] Blood ran out - no more footprints
[20:16:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(451.1935, 1203.337), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:16:05] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=4
[20:16:05] [INFO] [BloodDecal] Blood puddle created at (503.3186, 1183.414) (added to group)
[20:16:05] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(445,1211), corner_timer=-0.02
[20:16:05] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[20:16:05] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(447,1213), corner_timer=0.30
[20:16:05] [INFO] [BloodDecal] Blood puddle created at (530.182, 1199.076) (added to group)
[20:16:06] [INFO] [BloodDecal] Blood puddle created at (532.2835, 1233.894) (added to group)
[20:16:06] [INFO] [BloodDecal] Blood puddle created at (491.0431, 815.3168) (added to group)
[20:16:06] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:16:06] [INFO] [BloodDecal] Blood puddle created at (461.4471, 773.3638) (added to group)
[20:16:06] [INFO] [EnemyGrenade] Unsafe throw distance (188 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:06] [INFO] [BloodDecal] Blood puddle created at (579.4588, 1217.975) (added to group)
[20:16:06] [INFO] [BloodDecal] Blood puddle created at (600.3987, 1197.792) (added to group)
[20:16:06] [INFO] [BloodDecal] Blood puddle created at (487.7175, 813.7455) (added to group)
[20:16:06] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:06] [INFO] [EnemyGrenade] Unsafe throw distance (187 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(487.4626, 1219.64), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:16:06] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=5
[20:16:06] [ENEMY] [Enemy4] Hit: dmg=1, hp=2/3->1/3
[20:16:06] [INFO] [ImpactEffects] spawn_blood_effect called at (470.5865, 840.6595), dir=(0.097177, -0.995267), lethal=false
[20:16:06] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:06] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:06] [INFO] [ImpactEffects] Blood effect spawned at (470.5865, 840.6595) (scale=0.5)
[20:16:06] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:06] [INFO] [BloodDecal] Blood puddle created at (494.2996, 776.4747) (added to group)
[20:16:06] [INFO] [BloodDecal] Blood puddle created at (441.1155, 755.1709) (added to group)
[20:16:06] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:06] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:06] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:06] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:06] [INFO] [BloodDecal] Blood puddle created at (540.4836, 1262.281) (added to group)
[20:16:06] [INFO] [BloodDecal] Blood puddle created at (590.6234, 1257.408) (added to group)
[20:16:06] [INFO] [BloodDecal] Blood puddle created at (572.9835, 1220.521) (added to group)
[20:16:06] [INFO] [BloodDecal] Blood puddle created at (441.6307, 735.5334) (added to group)
[20:16:06] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[20:16:06] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:06] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:06] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:06] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:06] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(506,1189), corner_timer=-0.02
[20:16:06] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[20:16:06] [INFO] [BloodDecal] Blood puddle created at (560.7554, 1297.476) (added to group)
[20:16:06] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:06] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(509,1185), corner_timer=0.30
[20:16:06] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:06] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:06] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:06] [INFO] [BloodDecal] Blood puddle created at (617.7039, 1303.482) (added to group)
[20:16:06] [INFO] [BloodDecal] Blood puddle created at (452.6653, 828.9546) (added to group)
[20:16:06] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:06] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:06] [INFO] [BloodDecal] Blood puddle created at (411.5586, 768.0945) (added to group)
[20:16:06] [INFO] [BloodDecal] Blood puddle created at (433.4144, 833.5419) (added to group)
[20:16:06] [INFO] [BloodDecal] Blood puddle created at (461.6758, 788.9464) (added to group)
[20:16:06] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:06] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:06] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:16:06] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:06] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:06] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:06] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P4:velocity, state=SEEKING_COVER, target=-68.2°, current=-144.9°, player=(525,1137), corner_timer=-0.02
[20:16:06] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:06] [INFO] [BloodDecal] Blood puddle created at (458.999, 800.7336) (added to group)
[20:16:06] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(487.4626, 1219.64), shooter_id=9523066570256, bullet_pos=(497.3382, 819.0944)
[20:16:06] [INFO] [Bullet] Using shooter_position, distance=400.667022705078
[20:16:06] [INFO] [Bullet] Distance to wall: 400.667022705078 (27.2821543376775% of viewport)
[20:16:06] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:06] [INFO] [Bullet] Caliber cannot penetrate walls
[20:16:06] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:06] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[20:16:06] [INFO] [GrenadeBase] Grenade created at (464.3134, 855.2039) (frozen)
[20:16:06] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[20:16:06] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[20:16:06] [INFO] [GrenadeTimerHelper] Attached GrenadeTimer to FragGrenade (type: Frag)
[20:16:06] [INFO] [EnemyGrenade] Attached C# GrenadeTimer to grenade (type: Frag)
[20:16:06] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[20:16:06] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[20:16:06] [INFO] [GrenadeBase] LEGACY throw_grenade() called! Direction: (-0.091172, 0.995835), Speed: 796.8 (unfrozen)
[20:16:06] [INFO] [GrenadeBase] NOTE: Using DRAG-BASED system. If velocity-based is expected, ensure grenade has throw_grenade_velocity_based() method.
[20:16:06] [INFO] [FragGrenade] Grenade thrown (legacy) - impact detection enabled
[20:16:06] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[20:16:06] [INFO] [EnemyGrenade] Enemy grenade thrown! Target: (477.4626, 1213.64), Distance: 398
[20:16:06] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:06] [INFO] [ReplayManager] Recording frame 480 (8,0s): player_valid=True, enemies=10
[20:16:06] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:06] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
[20:16:06] [INFO] [BloodDecal] Blood puddle created at (435.281, 765.5638) (added to group)
[20:16:06] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:06] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[20:16:06] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:06] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:06] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:06] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(525,1087), corner_timer=-0.02
[20:16:06] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[20:16:06] [INFO] [BloodDecal] Blood puddle created at (499.1694, 811.1938) (added to group)
[20:16:06] [INFO] [EnemyGrenade] Throw path blocked to (506.2187, 1189.655)
[20:16:06] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(525,1082), corner_timer=0.30
[20:16:06] [INFO] [EnemyGrenade] Throw path blocked to (506.2187, 1189.655)
[20:16:06] [INFO] [BloodDecal] Blood puddle created at (490.6262, 787.0887) (added to group)
[20:16:06] [INFO] [EnemyGrenade] Throw path blocked to (506.2187, 1189.655)
[20:16:06] [INFO] [EnemyGrenade] Throw path blocked to (506.2187, 1189.655)
[20:16:06] [INFO] [EnemyGrenade] Throw path blocked to (506.2187, 1189.655)
[20:16:06] [INFO] [EnemyGrenade] Throw path blocked to (506.2187, 1189.655)
[20:16:06] [INFO] [EnemyGrenade] Throw path blocked to (506.2187, 1189.655)
[20:16:06] [INFO] [EnemyGrenade] Throw path blocked to (506.2187, 1189.655)
[20:16:06] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:16:06] [INFO] [EnemyGrenade] Throw path blocked to (506.2187, 1189.655)
[20:16:06] [INFO] [EnemyGrenade] Throw path blocked to (506.2187, 1189.655)
[20:16:06] [INFO] [EnemyGrenade] Throw path blocked to (506.2187, 1189.655)
[20:16:06] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:06] [ENEMY] [Enemy2] FLANKING started: target=(343.2872, 956.981), side=left, pos=(488.3354, 654.9131)
[20:16:06] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
[20:16:06] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:06] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:06] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:06] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:06] [ENEMY] [Enemy2] FLANKING corner check: angle -100.7°
[20:16:06] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:06] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:06] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:06] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:06] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(525,1040), corner_timer=-0.02
[20:16:06] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[20:16:06] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:06] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(525,1040), corner_timer=0.30
[20:16:06] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [ENEMY] [Enemy1] State: SUPPRESSED -> IN_COVER
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [ENEMY] [Enemy1] State: IN_COVER -> PURSUING
[20:16:07] [ENEMY] [Enemy1] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=76.6°, current=-90.4°, player=(525,1040), corner_timer=0.20
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [ENEMY] [Enemy2] FLANKING corner check: angle 33.6°
[20:16:07] [INFO] [BloodyFeet:Enemy2] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(525,1040), corner_timer=-0.02
[20:16:07] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(525,1040), corner_timer=0.30
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [ReplayManager] Recording frame 540 (9,0s): player_valid=True, enemies=10
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [ENEMY] [Enemy2] FLANKING corner check: angle 3.1°
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(525,1040), corner_timer=-0.02
[20:16:07] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(525,1040), corner_timer=0.30
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=FLANKING, target=64.7°, current=65.4°, player=(525,1040), corner_timer=0.15
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P2:combat_state, state=FLANKING, target=58.5°, current=112.1°, player=(525,1040), corner_timer=0.07
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.0426, 1142.807)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.2427, 1040)
[20:16:07] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=FLANKING, target=56.2°, current=105.5°, player=(525,1040), corner_timer=0.03
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.2427, 1040)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.2427, 1040)
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.2427, 1040)
[20:16:07] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.2427, 1040)
[20:16:07] [ENEMY] [Enemy2] FLANKING corner check: angle -160.4°
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.2427, 1040)
[20:16:07] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P2:combat_state, state=FLANKING, target=50.1°, current=108.4°, player=(525,1040), corner_timer=0.30
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.2427, 1040)
[20:16:07] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(525,1040), corner_timer=-0.02
[20:16:07] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.2427, 1040)
[20:16:07] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(525,1040), corner_timer=0.30
[20:16:07] [INFO] [EnemyGrenade] Throw path blocked to (525.2427, 1040)
[20:16:08] [INFO] [EnemyGrenade] Throw path blocked to (525.2427, 1040)
[20:16:08] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=FLANKING, target=44.8°, current=94.3°, player=(525,1040), corner_timer=0.23
[20:16:08] [ENEMY] [Enemy2] State: FLANKING -> COMBAT
[20:16:08] [INFO] [EnemyGrenade] Throw path blocked to (525.2427, 1040)
[20:16:08] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[20:16:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(385.9924, 908.4956), source=ENEMY (Enemy2), range=1469, listeners=9
[20:16:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[20:16:08] [INFO] [LastChance] Threat detected: Bullet
[20:16:08] [INFO] [LastChance] Triggering last chance effect!
[20:16:08] [INFO] [LastChance] Starting last chance effect:
[20:16:08] [INFO] [LastChance]   - Time will be frozen (except player)
[20:16:08] [INFO] [LastChance]   - Duration: 6.00 real seconds
[20:16:08] [INFO] [LastChance]   - Trigger: threat detected
[20:16:08] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:16:08] [INFO] [LastChance]   - Brightness: 0.60
[20:16:08] [INFO] [LastChance] Pushed bullet Bullet from distance 124.2 to 200.0
[20:16:08] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[20:16:08] [INFO] [LastChance] Set player Player and all 26 children to PROCESS_MODE_ALWAYS
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:16:08] [INFO] [LastChance] Skipping player node: Player
[20:16:08] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:16:08] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4023
[20:16:08] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4025
[20:16:08] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4027
[20:16:08] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4032
[20:16:08] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4076
[20:16:08] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4081
[20:16:08] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4083
[20:16:08] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4087
[20:16:08] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4128
[20:16:08] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4157
[20:16:08] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4182
[20:16:08] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4186
[20:16:08] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4203
[20:16:08] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4211
[20:16:08] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4221
[20:16:08] [INFO] [LastChance] Froze existing grenade: FragGrenade
[20:16:08] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4246
[20:16:08] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:16:08] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:16:08] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:16:08] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:08] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:16:08] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:16:08] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:16:08] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:08] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:16:08] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:16:08] [INFO] [LastChance] All process modes restored
[20:16:08] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:16:08] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:16:08] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:16:08] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:08] [ENEMY] [Enemy1] Death animation component initialized
[20:16:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:08] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:16:08] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:16:08] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:16:08] [ENEMY] [Enemy2] Death animation component initialized
[20:16:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:08] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:16:08] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:16:08] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:16:08] [ENEMY] [Enemy3] Death animation component initialized
[20:16:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:08] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:16:08] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:16:08] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:16:08] [ENEMY] [Enemy4] Death animation component initialized
[20:16:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:08] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:16:08] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:16:08] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:16:08] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:08] [ENEMY] [Enemy5] Death animation component initialized
[20:16:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:08] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:16:08] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:16:08] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:16:08] [ENEMY] [Enemy6] Death animation component initialized
[20:16:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:08] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:16:08] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:16:08] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:16:08] [ENEMY] [Enemy7] Death animation component initialized
[20:16:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:08] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:16:08] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:16:08] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:16:08] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:08] [ENEMY] [Enemy8] Death animation component initialized
[20:16:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:08] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:16:08] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:16:08] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:16:08] [ENEMY] [Enemy9] Death animation component initialized
[20:16:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:08] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:16:08] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:16:08] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:16:08] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:08] [ENEMY] [Enemy10] Death animation component initialized
[20:16:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:08] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:16:08] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:16:08] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:16:08] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:16:08] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:16:08] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:16:08] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:16:08] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:16:08] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:16:08] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:16:08] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:16:08] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:16:08] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 2/4
[20:16:08] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:16:08] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:16:08] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:16:08] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:16:08] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:16:08] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:16:08] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:16:08] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:16:08] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:16:08] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:16:08] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:16:08] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:16:08] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:16:08] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:16:08] [INFO] [ScoreManager] Level started with 10 enemies
[20:16:08] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:16:08] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:16:08] [INFO] [ReplayManager] Replay data cleared
[20:16:08] [INFO] [BuildingLevel] Previous replay data cleared
[20:16:08] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:16:08] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:16:08] [INFO] [ReplayManager] Level: BuildingLevel
[20:16:08] [INFO] [ReplayManager] Player: Player (valid: True)
[20:16:08] [INFO] [ReplayManager] Enemies count: 10
[20:16:08] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:16:08] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:16:08] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:16:08] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:16:08] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:16:08] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:16:08] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:16:08] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:16:08] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:16:08] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:16:08] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:16:08] [INFO] [BuildingLevel] Replay recording started successfully
[20:16:08] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:16:08] [INFO] [CinemaEffects] Found player node: Player
[20:16:08] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:16:08] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[20:16:08] [ENEMY] [Enemy1] Registered as sound listener
[20:16:08] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[20:16:08] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:16:08] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[20:16:08] [ENEMY] [Enemy2] Registered as sound listener
[20:16:08] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[20:16:08] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:16:08] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[20:16:08] [ENEMY] [Enemy3] Registered as sound listener
[20:16:08] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[20:16:08] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:16:08] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[20:16:08] [ENEMY] [Enemy4] Registered as sound listener
[20:16:08] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[20:16:08] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:16:08] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[20:16:08] [ENEMY] [Enemy5] Registered as sound listener
[20:16:08] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[20:16:08] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:16:08] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[20:16:08] [ENEMY] [Enemy6] Registered as sound listener
[20:16:08] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[20:16:08] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:16:08] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[20:16:08] [ENEMY] [Enemy7] Registered as sound listener
[20:16:08] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[20:16:08] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:16:08] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[20:16:08] [ENEMY] [Enemy8] Registered as sound listener
[20:16:08] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[20:16:08] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:16:08] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[20:16:08] [ENEMY] [Enemy9] Registered as sound listener
[20:16:08] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[20:16:08] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:16:08] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[20:16:08] [ENEMY] [Enemy10] Registered as sound listener
[20:16:08] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[20:16:08] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:16:08] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:16:08] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:08] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:08] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:08] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:08] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:08] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:08] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:08] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:08] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:16:08] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:16:08] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:16:08] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:16:08] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:16:08] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:16:08] [INFO] [LastChance] Found player: Player
[20:16:08] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:16:08] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:16:08] [INFO] [LastChance] Connected to player Died signal (C#)
[20:16:08] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:16:09] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:16:10] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:10] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:16:10] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,858), corner_timer=0.30
[20:16:10] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,858), corner_timer=0.30
[20:16:10] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=164.4°, current=-168.8°, player=(450,819), corner_timer=0.00
[20:16:10] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:16:10] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=166.8°, current=-8.9°, player=(450,808), corner_timer=0.00
[20:16:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 789.9443), source=PLAYER (MakarovPM), range=1469, listeners=19
[20:16:10] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[20:16:10] [ENEMY] [Enemy1] Heard gunshot at (460, 789.9443), source_type=0, intensity=0.01, distance=468
[20:16:10] [ENEMY] [Enemy2] Heard gunshot at (460, 789.9443), source_type=0, intensity=0.04, distance=247
[20:16:10] [ENEMY] [Enemy4] Heard gunshot at (460, 789.9443), source_type=0, intensity=0.02, distance=357
[20:16:10] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:10] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=70.9°, current=-157.5°, player=(450,783), corner_timer=0.00
[20:16:10] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=77.9°, current=-67.5°, player=(450,783), corner_timer=0.00
[20:16:10] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-161.7°, current=168.8°, player=(450,783), corner_timer=0.00
[20:16:10] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(448,765), corner_timer=-0.02
[20:16:10] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:10] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(448,765), corner_timer=-0.02
[20:16:10] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:16:10] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(447,762), corner_timer=0.30
[20:16:10] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(447,762), corner_timer=0.30
[20:16:10] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:16:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(436.5378, 754.063), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:10] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:10] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:16:10] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=RETREATING, target=131.4°, current=77.8°, player=(419,752), corner_timer=0.00
[20:16:10] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(414,761), corner_timer=-0.02
[20:16:10] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[20:16:10] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(413,764), corner_timer=0.30
[20:16:10] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:16:10] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[20:16:10] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[20:16:10] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:10] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:10] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:16:10] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:16:10] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:16:10] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:10] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:16:10] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:16:10] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:16:10] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:16:10] [ENEMY] [Enemy1] Death animation component initialized
[20:16:10] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:10] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:16:10] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:16:10] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:16:10] [ENEMY] [Enemy2] Death animation component initialized
[20:16:10] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:10] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:16:10] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:16:10] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:16:10] [ENEMY] [Enemy3] Death animation component initialized
[20:16:10] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:10] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:16:10] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:16:10] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:16:10] [ENEMY] [Enemy4] Death animation component initialized
[20:16:10] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:10] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:16:10] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:16:10] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:16:10] [ENEMY] [Enemy5] Death animation component initialized
[20:16:10] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:10] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:16:10] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:16:10] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:16:10] [ENEMY] [Enemy6] Death animation component initialized
[20:16:10] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:10] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:16:10] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:16:10] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:16:10] [ENEMY] [Enemy7] Death animation component initialized
[20:16:10] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:10] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:16:10] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:16:10] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:16:10] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:10] [ENEMY] [Enemy8] Death animation component initialized
[20:16:10] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:10] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:16:10] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:16:10] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:16:10] [ENEMY] [Enemy9] Death animation component initialized
[20:16:10] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:10] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:16:10] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:16:10] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:16:10] [ENEMY] [Enemy10] Death animation component initialized
[20:16:10] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:10] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:16:10] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:16:10] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:16:10] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:16:10] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:16:10] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:16:10] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:16:10] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:16:10] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:16:10] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:16:10] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:16:10] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:16:10] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 3/4
[20:16:10] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:16:10] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:16:10] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:16:10] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:16:10] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:16:10] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:16:10] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:16:10] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:16:10] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:16:10] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:16:10] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:16:10] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:16:10] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:16:10] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:16:10] [INFO] [ScoreManager] Level started with 10 enemies
[20:16:10] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:16:10] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:16:10] [INFO] [ReplayManager] Replay data cleared
[20:16:10] [INFO] [BuildingLevel] Previous replay data cleared
[20:16:10] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:16:10] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:16:10] [INFO] [ReplayManager] Level: BuildingLevel
[20:16:10] [INFO] [ReplayManager] Player: Player (valid: True)
[20:16:10] [INFO] [ReplayManager] Enemies count: 10
[20:16:10] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:16:10] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:16:10] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:16:10] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:16:10] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:16:10] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:16:10] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:16:10] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:16:10] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:16:10] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:16:10] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:16:10] [INFO] [BuildingLevel] Replay recording started successfully
[20:16:10] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:16:10] [INFO] [CinemaEffects] Found player node: Player
[20:16:10] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:16:10] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:16:10] [ENEMY] [Enemy1] Registered as sound listener
[20:16:10] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[20:16:10] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:16:10] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:16:10] [ENEMY] [Enemy2] Registered as sound listener
[20:16:10] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[20:16:10] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:16:10] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:16:10] [ENEMY] [Enemy3] Registered as sound listener
[20:16:10] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[20:16:10] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:16:10] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:16:10] [ENEMY] [Enemy4] Registered as sound listener
[20:16:10] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[20:16:10] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:16:10] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:16:10] [ENEMY] [Enemy5] Registered as sound listener
[20:16:10] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[20:16:10] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:16:10] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:16:10] [ENEMY] [Enemy6] Registered as sound listener
[20:16:10] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[20:16:10] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:16:10] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:16:10] [ENEMY] [Enemy7] Registered as sound listener
[20:16:10] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[20:16:10] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:16:10] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:16:10] [ENEMY] [Enemy8] Registered as sound listener
[20:16:10] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[20:16:10] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:16:10] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:16:10] [ENEMY] [Enemy9] Registered as sound listener
[20:16:10] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[20:16:10] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:16:10] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:16:10] [ENEMY] [Enemy10] Registered as sound listener
[20:16:10] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[20:16:10] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:16:11] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:16:11] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:11] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:11] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:11] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:11] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:11] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:11] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=78.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:11] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:11] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:16:11] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:16:11] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:16:11] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:16:11] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:16:11] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:16:11] [INFO] [LastChance] Found player: Player
[20:16:11] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:16:11] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:16:11] [INFO] [LastChance] Connected to player Died signal (C#)
[20:16:11] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:16:11] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:16:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(457.0062, 805.0632), source=PLAYER (MakarovPM), range=1469, listeners=20
[20:16:12] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:16:12] [ENEMY] [Enemy1] Heard gunshot at (457.0062, 805.0632), source_type=0, intensity=0.01, distance=481
[20:16:12] [ENEMY] [Enemy2] Heard gunshot at (457.0062, 805.0632), source_type=0, intensity=0.04, distance=261
[20:16:12] [ENEMY] [Enemy3] Heard gunshot at (457.0062, 805.0632), source_type=0, intensity=0.04, distance=249
[20:16:12] [ENEMY] [Enemy4] Heard gunshot at (457.0062, 805.0632), source_type=0, intensity=0.02, distance=356
[20:16:12] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:12] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=71.9°, current=-157.5°, player=(447,799), corner_timer=0.00
[20:16:12] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=79.3°, current=168.8°, player=(447,799), corner_timer=0.00
[20:16:12] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=169.0°, current=11.3°, player=(447,799), corner_timer=0.00
[20:16:12] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-164.0°, current=-67.5°, player=(447,799), corner_timer=0.00
[20:16:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(457.0062, 805.0632), shooter_id=13514987014515, bullet_pos=(507.5927, 802.2158)
[20:16:12] [INFO] [Bullet] Using shooter_position, distance=50.6666526794434
[20:16:12] [INFO] [Bullet] Distance to wall: 50.6666526794434 (3.44998554870225% of viewport)
[20:16:12] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:16:12] [INFO] [Bullet] Caliber cannot penetrate walls
[20:16:12] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=170.1°, current=-176.9°, player=(445,794), corner_timer=0.00
[20:16:12] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:12] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:16:12] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(442,785), corner_timer=0.30
[20:16:12] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(442,785), corner_timer=0.30
[20:16:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.256, 752.8472), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:12] [INFO] [LastChance] Threat detected: Bullet
[20:16:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(416.4549, 764.3179), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:12] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:12] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:16:12] [INFO] [Player] Spawning blood effect at (404.39706, 758.6697), dir=(1, 0), lethal=False (C#)
[20:16:12] [INFO] [ImpactEffects] spawn_blood_effect called at (404.3971, 758.6697), dir=(1, 0), lethal=false
[20:16:12] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:12] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:12] [INFO] [ImpactEffects] Blood effect spawned at (404.3971, 758.6697) (scale=1)
[20:16:12] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:16:12] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:16:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.256, 752.8472), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:12] [INFO] [LastChance] Threat detected: Bullet
[20:16:12] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:16:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:12] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(398,759), corner_timer=-0.02
[20:16:12] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:12] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(398,759), corner_timer=-0.02
[20:16:12] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:16:12] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(398,759), corner_timer=0.30
[20:16:12] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(398,759), corner_timer=0.30
[20:16:12] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:16:12] [INFO] [Player] Spawning blood effect at (397.6587, 759.82153), dir=(1, 0), lethal=False (C#)
[20:16:12] [INFO] [ImpactEffects] spawn_blood_effect called at (397.6587, 759.8215), dir=(1, 0), lethal=false
[20:16:12] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:12] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:12] [INFO] [ImpactEffects] Blood effect spawned at (397.6587, 759.8215) (scale=1)
[20:16:12] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:16:12] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:16:12] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:16:12] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:16:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.256, 752.8472), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:12] [INFO] [LastChance] Threat detected: Bullet
[20:16:12] [INFO] [LastChance] Triggering last chance effect!
[20:16:12] [INFO] [LastChance] Starting last chance effect:
[20:16:12] [INFO] [LastChance]   - Time will be frozen (except player)
[20:16:12] [INFO] [LastChance]   - Duration: 6.00 real seconds
[20:16:12] [INFO] [LastChance]   - Trigger: threat detected
[20:16:12] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:16:12] [INFO] [LastChance]   - Brightness: 0.60
[20:16:12] [INFO] [LastChance] Pushed bullet Bullet from distance 136.8 to 200.0
[20:16:12] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[20:16:12] [INFO] [LastChance] Set player Player and all 26 children to PROCESS_MODE_ALWAYS
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:16:12] [INFO] [LastChance] Skipping player node: Player
[20:16:12] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:16:12] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4755
[20:16:12] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4757
[20:16:12] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4759
[20:16:12] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:16:12] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:16:12] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:16:12] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:16:13] [INFO] [Player] Stun ended (Issue #592)
[20:16:13] [INFO] [BloodDecal] Blood puddle created at (476.2811, 769.0451) (added to group)
[20:16:13] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@4765
[20:16:13] [INFO] [LastChance] Registered frozen player bullet: @Area2D@4765
[20:16:13] [INFO] [LastChance] Freezing newly created explosion effect: PointLight2D
[20:16:13] [INFO] [LastChance] Registered frozen explosion effect: PointLight2D
[20:16:13] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@4767
[20:16:13] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@4767
[20:16:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(413.0488, 775.2877), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:13] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:13] [INFO] [BloodDecal] Blood puddle created at (473.0401, 765.2328) (added to group)
[20:16:13] [INFO] [BloodDecal] Blood puddle created at (465.8643, 808.2199) (added to group)
[20:16:13] [INFO] [BloodDecal] Blood puddle created at (483.3119, 791.4742) (added to group)
[20:16:13] [INFO] [BloodDecal] Blood puddle created at (520.2836, 758.1614) (added to group)
[20:16:13] [INFO] [BloodDecal] Blood puddle created at (470.0733, 806.2267) (added to group)
[20:16:13] [INFO] [BloodDecal] Blood puddle created at (542.2925, 786.8628) (added to group)
[20:16:13] [INFO] [BloodDecal] Blood puddle created at (482.7704, 777.6551) (added to group)
[20:16:13] [INFO] [BloodDecal] Blood puddle created at (483.4289, 788.9849) (added to group)
[20:16:13] [INFO] [BloodDecal] Blood puddle created at (529.4761, 790.2173) (added to group)
[20:16:13] [INFO] [BloodDecal] Blood puddle created at (554.2862, 772.0256) (added to group)
[20:16:13] [INFO] [BloodDecal] Blood puddle created at (489.4, 771.108) (added to group)
[20:16:13] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[20:16:13] [INFO] [BloodDecal] Blood puddle created at (498.1538, 863.4996) (added to group)
[20:16:13] [INFO] [BloodDecal] Blood puddle created at (476.1075, 848.6568) (added to group)
[20:16:13] [INFO] [BloodDecal] Blood puddle created at (598.7701, 752.0914) (added to group)
[20:16:13] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:13] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:13] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:16:13] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:16:13] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:16:13] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:13] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:16:13] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:16:13] [INFO] [LastChance] All process modes restored
[20:16:13] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:16:13] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:16:13] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:16:13] [ENEMY] [Enemy1] Death animation component initialized
[20:16:13] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:13] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:16:13] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:16:13] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:16:13] [ENEMY] [Enemy2] Death animation component initialized
[20:16:13] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:13] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:16:13] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:16:13] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:16:13] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:13] [ENEMY] [Enemy3] Death animation component initialized
[20:16:13] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:13] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:16:13] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:16:13] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:16:13] [ENEMY] [Enemy4] Death animation component initialized
[20:16:13] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:13] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:16:13] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:16:13] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:16:13] [ENEMY] [Enemy5] Death animation component initialized
[20:16:13] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:13] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:16:13] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:16:13] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:16:13] [ENEMY] [Enemy6] Death animation component initialized
[20:16:13] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:13] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:16:13] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:16:13] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:16:13] [ENEMY] [Enemy7] Death animation component initialized
[20:16:13] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:13] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:16:13] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:16:13] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:16:13] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:13] [ENEMY] [Enemy8] Death animation component initialized
[20:16:13] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:13] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:16:13] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:16:13] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:16:13] [ENEMY] [Enemy9] Death animation component initialized
[20:16:13] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:13] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:16:13] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:16:13] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:16:13] [ENEMY] [Enemy10] Death animation component initialized
[20:16:13] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:13] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:16:13] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:16:13] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:16:13] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:16:13] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:16:13] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:16:13] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:16:13] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:16:13] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:16:13] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:16:13] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:16:13] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:16:13] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 2/4
[20:16:13] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:16:13] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:16:13] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:16:13] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:16:13] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:16:13] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:16:13] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:16:13] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:16:13] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:16:13] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:16:13] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:16:13] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:16:13] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:16:13] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:16:13] [INFO] [ScoreManager] Level started with 10 enemies
[20:16:13] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:16:13] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:16:13] [INFO] [ReplayManager] Replay data cleared
[20:16:13] [INFO] [BuildingLevel] Previous replay data cleared
[20:16:13] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:16:13] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:16:13] [INFO] [ReplayManager] Level: BuildingLevel
[20:16:13] [INFO] [ReplayManager] Player: Player (valid: True)
[20:16:13] [INFO] [ReplayManager] Enemies count: 10
[20:16:13] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:16:13] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:16:13] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:16:13] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:16:13] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:16:13] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:16:13] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:16:13] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:16:13] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:16:13] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:16:13] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:16:13] [INFO] [BuildingLevel] Replay recording started successfully
[20:16:13] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:16:13] [INFO] [CinemaEffects] Found player node: Player
[20:16:13] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:16:13] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:16:13] [ENEMY] [Enemy1] Registered as sound listener
[20:16:13] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[20:16:13] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:16:13] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:16:13] [ENEMY] [Enemy2] Registered as sound listener
[20:16:13] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[20:16:13] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:16:13] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:16:13] [ENEMY] [Enemy3] Registered as sound listener
[20:16:13] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[20:16:13] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:16:13] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:16:13] [ENEMY] [Enemy4] Registered as sound listener
[20:16:13] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[20:16:13] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:16:13] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:16:13] [ENEMY] [Enemy5] Registered as sound listener
[20:16:13] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[20:16:13] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:16:13] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:16:13] [ENEMY] [Enemy6] Registered as sound listener
[20:16:13] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[20:16:13] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:16:13] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:16:13] [ENEMY] [Enemy7] Registered as sound listener
[20:16:13] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[20:16:13] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:16:13] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:16:13] [ENEMY] [Enemy8] Registered as sound listener
[20:16:13] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[20:16:13] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:16:13] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:16:13] [ENEMY] [Enemy9] Registered as sound listener
[20:16:13] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[20:16:13] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:16:13] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:16:13] [ENEMY] [Enemy10] Registered as sound listener
[20:16:13] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[20:16:13] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:16:13] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:16:13] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:13] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:13] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:13] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:13] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:13] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:13] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:13] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:13] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:16:13] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:16:13] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:16:13] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:16:13] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:16:13] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:16:13] [INFO] [LastChance] Found player: Player
[20:16:13] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:16:13] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:16:13] [INFO] [LastChance] Connected to player Died signal (C#)
[20:16:13] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:16:14] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:16:15] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:15] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:16:15] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(445,816), corner_timer=0.30
[20:16:15] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(445,816), corner_timer=0.30
[20:16:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(445.9709, 803.8723), source=PLAYER (MakarovPM), range=1469, listeners=20
[20:16:15] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:16:15] [ENEMY] [Enemy1] Heard gunshot at (445.9709, 803.8723), source_type=0, intensity=0.01, distance=477
[20:16:15] [ENEMY] [Enemy2] Heard gunshot at (445.9709, 803.8723), source_type=0, intensity=0.04, distance=258
[20:16:15] [ENEMY] [Enemy3] Heard gunshot at (445.9709, 803.8723), source_type=0, intensity=0.04, distance=260
[20:16:15] [ENEMY] [Enemy4] Heard gunshot at (445.9709, 803.8723), source_type=0, intensity=0.02, distance=367
[20:16:15] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:15] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=73.1°, current=-157.5°, player=(435,797), corner_timer=0.00
[20:16:15] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=81.7°, current=45.0°, player=(435,797), corner_timer=0.00
[20:16:15] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=169.7°, current=11.3°, player=(435,797), corner_timer=0.00
[20:16:15] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-164.3°, current=168.8°, player=(435,797), corner_timer=0.00
[20:16:15] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=170.5°, current=-176.2°, player=(433,794), corner_timer=0.00
[20:16:15] [ENEMY] [Enemy3] Hit: dmg=1, hp=2/2->1/2
[20:16:15] [INFO] [ImpactEffects] spawn_blood_effect called at (652.4576, 756.5038), dir=(0.990436, -0.137974), lethal=false
[20:16:15] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:15] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:15] [INFO] [ImpactEffects] Blood effect spawned at (652.4576, 756.5038) (scale=0.5)
[20:16:15] [INFO] [EnemyGrenade] Unsafe throw distance (250 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:15] [INFO] [EnemyGrenade] Unsafe throw distance (253 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:15] [INFO] [EnemyGrenade] Unsafe throw distance (256 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(652.4576, 756.5038), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:15] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:15] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:15] [INFO] [LastChance] Threat detected: Bullet
[20:16:15] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:15] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:15] [INFO] [EnemyGrenade] Unsafe throw distance (261 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:15] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(392,781), corner_timer=-0.02
[20:16:15] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:15] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(392,781), corner_timer=-0.02
[20:16:15] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:16:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400.4836, 788.4993), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:15] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:15] [INFO] [EnemyGrenade] Unsafe throw distance (263 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:15] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(390,782), corner_timer=0.30
[20:16:15] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(390,782), corner_timer=0.30
[20:16:15] [INFO] [EnemyGrenade] Unsafe throw distance (266 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:15] [INFO] [EnemyGrenade] Unsafe throw distance (268 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:15] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:16:15] [INFO] [Player] Spawning blood effect at (384.34003, 787.47345), dir=(1, 0), lethal=False (C#)
[20:16:15] [INFO] [ImpactEffects] spawn_blood_effect called at (384.34, 787.4734), dir=(1, 0), lethal=false
[20:16:15] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:15] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:15] [INFO] [ImpactEffects] Blood effect spawned at (384.34, 787.4734) (scale=1)
[20:16:15] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:16:15] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:16:15] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:16:15] [INFO] [EnemyGrenade] Unsafe throw distance (270 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:15] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:16:15] [INFO] [EnemyGrenade] Unsafe throw distance (272 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:15] [INFO] [EnemyGrenade] Unsafe throw distance (271 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:15] [INFO] [EnemyGrenade] Unsafe throw distance (270 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:15] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:16:15] [INFO] [EnemyGrenade] Unsafe throw distance (269 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(646.0672, 761.3168), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:15] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:15] [INFO] [EnemyGrenade] Unsafe throw distance (268 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:15] [INFO] [EnemyGrenade] Unsafe throw distance (267 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:15] [INFO] [BloodDecal] Blood puddle created at (707.0513, 765.6571) (added to group)
[20:16:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(579.87146, 777.0879), shooter_id=14231709681284, bullet_pos=(499.81836, 800.2383)
[20:16:15] [INFO] [Bullet] Using shooter_position, distance=83,333305
[20:16:15] [INFO] [Bullet] Distance to wall: 83,333305 (5,6743183% of viewport)
[20:16:15] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:15] [INFO] [LastChance] Threat detected: Bullet
[20:16:15] [INFO] [LastChance] Triggering last chance effect!
[20:16:15] [INFO] [LastChance] Starting last chance effect:
[20:16:15] [INFO] [LastChance]   - Time will be frozen (except player)
[20:16:15] [INFO] [LastChance]   - Duration: 6.00 real seconds
[20:16:15] [INFO] [LastChance]   - Trigger: threat detected
[20:16:15] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:16:15] [INFO] [LastChance]   - Brightness: 0.60
[20:16:15] [INFO] [LastChance] Pushed bullet Bullet from distance 118.4 to 200.0
[20:16:15] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[20:16:15] [INFO] [LastChance] Set player Player and all 26 children to PROCESS_MODE_ALWAYS
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:16:15] [INFO] [LastChance] Skipping player node: Player
[20:16:15] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:16:15] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@5037
[20:16:15] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@5039
[20:16:15] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:16:15] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:16:15] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:16:15] [INFO] [Player] Stun ended (Issue #592)
[20:16:15] [INFO] [BloodDecal] Blood puddle created at (710.0563, 745.703) (added to group)
[20:16:15] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@5043
[20:16:15] [INFO] [LastChance] Registered frozen player bullet: @Area2D@5043
[20:16:15] [INFO] [LastChance] Freezing newly created explosion effect: PointLight2D
[20:16:15] [INFO] [LastChance] Registered frozen explosion effect: PointLight2D
[20:16:15] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@5044
[20:16:15] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@5044
[20:16:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(384.3643, 809.3007), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:15] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:15] [INFO] [BloodDecal] Blood puddle created at (709.6495, 760.5877) (added to group)
[20:16:15] [INFO] [BloodDecal] Blood puddle created at (780.1495, 806.2678) (added to group)
[20:16:15] [INFO] [BloodDecal] Blood puddle created at (444.3991, 821.6662) (added to group)
[20:16:15] [INFO] [BloodDecal] Blood puddle created at (752.2194, 775.2221) (added to group)
[20:16:15] [INFO] [BloodDecal] Blood puddle created at (709.7031, 761.7638) (added to group)
[20:16:15] [INFO] [BloodDecal] Blood puddle created at (721.803, 783.2371) (added to group)
[20:16:15] [INFO] [BloodDecal] Blood puddle created at (441.1976, 834.0568) (added to group)
[20:16:15] [INFO] [BloodDecal] Blood puddle created at (442.7028, 840.3782) (added to group)
[20:16:15] [INFO] [BloodDecal] Blood puddle created at (504.2795, 773.7186) (added to group)
[20:16:16] [INFO] [BloodDecal] Blood puddle created at (484.2162, 895.6129) (added to group)
[20:16:16] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:16] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:16] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:16:16] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:16:16] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:16:16] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:16] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:16:16] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:16:16] [INFO] [LastChance] All process modes restored
[20:16:16] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:16:16] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:16:16] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:16:16] [ENEMY] [Enemy1] Death animation component initialized
[20:16:16] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:16] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:16:16] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:16:16] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:16:16] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:16] [ENEMY] [Enemy2] Death animation component initialized
[20:16:16] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:16] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:16:16] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:16:16] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:16:16] [ENEMY] [Enemy3] Death animation component initialized
[20:16:16] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:16] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:16:16] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:16:16] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:16:16] [ENEMY] [Enemy4] Death animation component initialized
[20:16:16] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:16] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:16:16] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:16:16] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:16:16] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:16] [ENEMY] [Enemy5] Death animation component initialized
[20:16:16] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:16] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:16:16] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:16:16] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:16:16] [ENEMY] [Enemy6] Death animation component initialized
[20:16:16] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:16] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:16:16] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:16:16] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:16:16] [ENEMY] [Enemy7] Death animation component initialized
[20:16:16] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:16] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:16:16] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:16:16] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:16:16] [ENEMY] [Enemy8] Death animation component initialized
[20:16:16] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:16] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:16:16] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:16:16] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:16:16] [ENEMY] [Enemy9] Death animation component initialized
[20:16:16] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:16] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:16:16] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:16:16] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:16:16] [ENEMY] [Enemy10] Death animation component initialized
[20:16:16] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:16] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:16:16] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:16:16] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:16:16] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:16:16] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:16:16] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:16:16] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:16:16] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:16:16] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:16:16] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:16:16] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:16:16] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:16:16] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 4/4
[20:16:16] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:16:16] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:16:16] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:16:16] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:16:16] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:16:16] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:16:16] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:16:16] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:16:16] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:16:16] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:16:16] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:16:16] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:16:16] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:16:16] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:16:16] [INFO] [ScoreManager] Level started with 10 enemies
[20:16:16] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:16:16] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:16:16] [INFO] [ReplayManager] Replay data cleared
[20:16:16] [INFO] [BuildingLevel] Previous replay data cleared
[20:16:16] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:16:16] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:16:16] [INFO] [ReplayManager] Level: BuildingLevel
[20:16:16] [INFO] [ReplayManager] Player: Player (valid: True)
[20:16:16] [INFO] [ReplayManager] Enemies count: 10
[20:16:16] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:16:16] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:16:16] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:16:16] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:16:16] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:16:16] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:16:16] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:16:16] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:16:16] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:16:16] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:16:16] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:16:16] [INFO] [BuildingLevel] Replay recording started successfully
[20:16:16] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:16:16] [INFO] [CinemaEffects] Found player node: Player
[20:16:16] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:16:16] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:16:16] [ENEMY] [Enemy1] Registered as sound listener
[20:16:16] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[20:16:16] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:16:16] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:16:16] [ENEMY] [Enemy2] Registered as sound listener
[20:16:16] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[20:16:16] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:16:16] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:16:16] [ENEMY] [Enemy3] Registered as sound listener
[20:16:16] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[20:16:16] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:16:16] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:16:16] [ENEMY] [Enemy4] Registered as sound listener
[20:16:16] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[20:16:16] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:16:16] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:16:16] [ENEMY] [Enemy5] Registered as sound listener
[20:16:16] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[20:16:16] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:16:16] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:16:16] [ENEMY] [Enemy6] Registered as sound listener
[20:16:16] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[20:16:16] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:16:16] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:16:16] [ENEMY] [Enemy7] Registered as sound listener
[20:16:16] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[20:16:16] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:16:16] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:16:16] [ENEMY] [Enemy8] Registered as sound listener
[20:16:16] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[20:16:16] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:16:16] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:16:16] [ENEMY] [Enemy9] Registered as sound listener
[20:16:16] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[20:16:16] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:16:16] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:16:16] [ENEMY] [Enemy10] Registered as sound listener
[20:16:16] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[20:16:16] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:16:16] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:16:16] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:16] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:16] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=281.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:16] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:16] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:16] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:16] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=213.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:16] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:16] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:16:16] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:16:16] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:16:16] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:16:16] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:16:16] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:16:16] [INFO] [LastChance] Found player: Player
[20:16:16] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:16:16] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:16:16] [INFO] [LastChance] Connected to player Died signal (C#)
[20:16:16] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:16:17] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:16:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(437.6613, 815.7493), source=PLAYER (MakarovPM), range=1469, listeners=20
[20:16:17] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:16:17] [ENEMY] [Enemy1] Heard gunshot at (437.6613, 815.7493), source_type=0, intensity=0.01, distance=486
[20:16:17] [ENEMY] [Enemy2] Heard gunshot at (437.6613, 815.7493), source_type=0, intensity=0.03, distance=268
[20:16:17] [ENEMY] [Enemy3] Heard gunshot at (437.6613, 815.7493), source_type=0, intensity=0.03, distance=270
[20:16:17] [ENEMY] [Enemy4] Heard gunshot at (437.6613, 815.7493), source_type=0, intensity=0.02, distance=372
[20:16:17] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:17] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=74.5°, current=33.8°, player=(427,809), corner_timer=0.00
[20:16:17] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=83.9°, current=-101.3°, player=(427,809), corner_timer=0.00
[20:16:17] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=167.6°, current=-78.7°, player=(427,809), corner_timer=0.00
[20:16:17] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-166.4°, current=-101.3°, player=(427,809), corner_timer=0.00
[20:16:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(437.6613, 815.7493), shooter_id=14975745658009, bullet_pos=(504.5583, 808.0962)
[20:16:17] [INFO] [Bullet] Using shooter_position, distance=67.3333129882813
[20:16:17] [INFO] [Bullet] Distance to wall: 67.3333129882813 (4.58484909641692% of viewport)
[20:16:17] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:16:17] [INFO] [Bullet] Caliber cannot penetrate walls
[20:16:17] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:17] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:16:17] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(417,801), corner_timer=0.30
[20:16:17] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(417,801), corner_timer=0.30
[20:16:18] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=173.2°, current=125.9°, player=(369,791), corner_timer=0.00
[20:16:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(354.5072, 804.0444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:18] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(599.7913, 764.7377), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:18] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
[20:16:18] [INFO] [LastChance] Threat detected: Bullet
[20:16:18] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:18] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:18] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(326,808), corner_timer=-0.02
[20:16:18] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:18] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(326,808), corner_timer=-0.02
[20:16:18] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:16:18] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(322,811), corner_timer=0.30
[20:16:18] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(322,811), corner_timer=0.30
[20:16:18] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:16:18] [INFO] [Player] Spawning blood effect at (314.88852, 819.398), dir=(1, 0), lethal=False (C#)
[20:16:18] [INFO] [ImpactEffects] spawn_blood_effect called at (314.8885, 819.398), dir=(1, 0), lethal=false
[20:16:18] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:18] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:18] [INFO] [ImpactEffects] Blood effect spawned at (314.8885, 819.398) (scale=1)
[20:16:18] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:16:18] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:16:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(562.9535, 770.7567), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[20:16:18] [ENEMY] [Enemy3] Hit: dmg=1, hp=3/3->2/3
[20:16:18] [INFO] [ImpactEffects] spawn_blood_effect called at (557.7318, 771.8421), dir=(0.980136, -0.198328), lethal=false
[20:16:18] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:18] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:18] [INFO] [ImpactEffects] Blood effect spawned at (557.7318, 771.8421) (scale=0.5)
[20:16:18] [INFO] [LastChance] Threat detected: Bullet
[20:16:18] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:16:18] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:18] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:16:18] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:16:18] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[20:16:18] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[20:16:18] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:16:18] [INFO] [Player] Spawning blood effect at (293.16464, 841.1219), dir=(1, 0), lethal=False (C#)
[20:16:18] [INFO] [ImpactEffects] spawn_blood_effect called at (293.1646, 841.1219), dir=(1, 0), lethal=false
[20:16:18] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:18] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:18] [INFO] [ImpactEffects] Blood effect spawned at (293.1646, 841.1219) (scale=1)
[20:16:18] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:16:18] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:16:18] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:16:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(534.8231, 778.4167), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[20:16:18] [INFO] [LastChance] Threat detected: Bullet
[20:16:18] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:16:18] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:18] [INFO] [Player] Stun ended (Issue #592)
[20:16:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(542.2087, 777.0267), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[20:16:18] [INFO] [BloodDecal] Blood puddle created at (603.8586, 786.9797) (added to group)
[20:16:18] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(279,857), corner_timer=-0.02
[20:16:18] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[20:16:18] [INFO] [LastChance] Threat detected: @Area2D@5319
[20:16:18] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:16:18] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:18] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(279,859), corner_timer=0.30
[20:16:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(545.2374, 778.7217), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:18] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[20:16:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(290.3715, 869.4153), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:18] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=4, self=0, below_threshold=2
[20:16:18] [INFO] [BloodDecal] Blood puddle created at (385.5712, 880.0485) (added to group)
[20:16:18] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:16:18] [INFO] [Player] Spawning blood effect at (281.27945, 865.67413), dir=(1, 0), lethal=False (C#)
[20:16:18] [INFO] [ImpactEffects] spawn_blood_effect called at (281.2794, 865.6741), dir=(1, 0), lethal=false
[20:16:18] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:18] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:18] [INFO] [ImpactEffects] Blood effect spawned at (281.2794, 865.6741) (scale=1)
[20:16:18] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:16:18] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:16:18] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:16:18] [INFO] [LastChance] Threat detected: @Area2D@5324
[20:16:18] [INFO] [LastChance] Triggering last chance effect!
[20:16:18] [INFO] [LastChance] Starting last chance effect:
[20:16:18] [INFO] [LastChance]   - Time will be frozen (except player)
[20:16:18] [INFO] [LastChance]   - Duration: 6.00 real seconds
[20:16:18] [INFO] [LastChance]   - Trigger: threat detected
[20:16:18] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:16:18] [INFO] [LastChance]   - Brightness: 0.60
[20:16:18] [INFO] [LastChance] Pushed bullet @Area2D@5324 from distance 128.9 to 200.0
[20:16:18] [INFO] [LastChance] Pushed bullet Bullet9mm from distance 75.1 to 200.0
[20:16:18] [INFO] [LastChance] Pushed 2 threatening bullets away from player
[20:16:18] [INFO] [LastChance] Set player Player and all 26 children to PROCESS_MODE_ALWAYS
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:16:18] [INFO] [LastChance] Skipping player node: Player
[20:16:18] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:16:18] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@5308
[20:16:18] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@5310
[20:16:18] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@5312
[20:16:18] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@5328
[20:16:18] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:16:18] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:16:18] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:16:18] [INFO] [BloodDecal] Blood puddle created at (425.9805, 906.051) (added to group)
[20:16:18] [INFO] [BloodDecal] Blood puddle created at (615.9043, 782.7936) (added to group)
[20:16:18] [INFO] [BloodDecal] Blood puddle created at (372.7894, 860.8494) (added to group)
[20:16:18] [INFO] [BloodDecal] Blood puddle created at (363.5255, 887.882) (added to group)
[20:16:18] [INFO] [BloodDecal] Blood puddle created at (436.1748, 903.7684) (added to group)
[20:16:18] [INFO] [BloodDecal] Blood puddle created at (409.0616, 904.7878) (added to group)
[20:16:18] [INFO] [BloodDecal] Blood puddle created at (672.8533, 826.8163) (added to group)
[20:16:18] [INFO] [BloodDecal] Blood puddle created at (391.7465, 850.2565) (added to group)
[20:16:18] [INFO] [Player] Stun ended (Issue #592)
[20:16:18] [INFO] [BloodDecal] Blood puddle created at (405.4027, 913.2188) (added to group)
[20:16:18] [INFO] [BloodDecal] Blood puddle created at (671.0958, 816.7477) (added to group)
[20:16:18] [INFO] [BloodDecal] Blood puddle created at (678.2819, 838.4193) (added to group)
[20:16:18] [INFO] [BloodDecal] Blood puddle created at (404.3801, 888.8328) (added to group)
[20:16:18] [INFO] [BloodDecal] Blood puddle created at (369.2768, 854.9683) (added to group)
[20:16:18] [INFO] [BloodDecal] Blood puddle created at (467.6178, 960.8463) (added to group)
[20:16:18] [INFO] [BloodDecal] Blood puddle created at (451.0217, 926.6078) (added to group)
[20:16:18] [INFO] [BloodDecal] Blood puddle created at (416.1719, 938.311) (added to group)
[20:16:18] [INFO] [BloodDecal] Blood puddle created at (463.9844, 958.7101) (added to group)
[20:16:18] [INFO] [BloodDecal] Blood puddle created at (750.5525, 784.187) (added to group)
[20:16:18] [INFO] [BloodDecal] Blood puddle created at (654.9582, 815.7954) (added to group)
[20:16:18] [INFO] [BloodDecal] Blood puddle created at (327.3332, 892.2228) (added to group)
[20:16:18] [INFO] [BloodDecal] Blood puddle created at (429.8087, 968.9333) (added to group)
[20:16:18] [INFO] [BloodDecal] Blood puddle created at (476.8964, 918.2828) (added to group)
[20:16:18] [INFO] [BloodDecal] Blood puddle created at (437.8929, 940.6592) (added to group)
[20:16:18] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[20:16:18] [INFO] [BloodDecal] Blood puddle created at (339.6026, 858.7897) (added to group)
[20:16:18] [INFO] [BloodDecal] Blood puddle created at (356.8631, 893.2655) (added to group)
[20:16:18] [INFO] [BloodDecal] Blood puddle created at (396.2774, 939.4267) (added to group)
[20:16:18] [INFO] [BloodDecal] Blood puddle created at (380.6039, 900.3499) (added to group)
[20:16:18] [INFO] [BloodDecal] Blood puddle created at (398.1982, 960.4471) (added to group)
[20:16:19] [INFO] [BloodDecal] Blood puddle created at (440.5745, 895.6152) (added to group)
[20:16:19] [INFO] [BloodDecal] Blood puddle created at (445.2333, 877.386) (added to group)
[20:16:19] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:19] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:16:19] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:16:19] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:16:19] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:19] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:16:19] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:16:19] [INFO] [LastChance] All process modes restored
[20:16:19] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:16:19] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:16:19] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:16:19] [ENEMY] [Enemy1] Death animation component initialized
[20:16:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:19] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:16:19] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:16:19] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:16:19] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:19] [ENEMY] [Enemy2] Death animation component initialized
[20:16:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:19] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:16:19] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:16:19] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:16:19] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:19] [ENEMY] [Enemy3] Death animation component initialized
[20:16:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:19] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:16:19] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:16:19] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:16:19] [ENEMY] [Enemy4] Death animation component initialized
[20:16:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:19] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:16:19] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:16:19] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:16:19] [ENEMY] [Enemy5] Death animation component initialized
[20:16:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:19] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:16:19] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:16:19] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:16:19] [ENEMY] [Enemy6] Death animation component initialized
[20:16:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:19] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:16:19] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:16:19] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:16:19] [ENEMY] [Enemy7] Death animation component initialized
[20:16:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:19] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:16:19] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:16:19] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:16:19] [ENEMY] [Enemy8] Death animation component initialized
[20:16:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:19] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:16:19] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:16:19] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:16:19] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:19] [ENEMY] [Enemy9] Death animation component initialized
[20:16:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:19] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:16:19] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:16:19] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:16:19] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:19] [ENEMY] [Enemy10] Death animation component initialized
[20:16:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:19] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:16:19] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:16:19] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:16:19] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:16:19] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:16:19] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:16:19] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:16:19] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:16:19] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:16:19] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:16:19] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:16:19] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:16:19] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 3/4
[20:16:19] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:16:19] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:16:19] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:16:19] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:16:19] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:16:19] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:16:19] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:16:19] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:16:19] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:16:19] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:16:19] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:16:19] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:16:19] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:16:19] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:16:19] [INFO] [ScoreManager] Level started with 10 enemies
[20:16:19] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:16:19] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:16:19] [INFO] [ReplayManager] Replay data cleared
[20:16:19] [INFO] [BuildingLevel] Previous replay data cleared
[20:16:19] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:16:19] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:16:19] [INFO] [ReplayManager] Level: BuildingLevel
[20:16:19] [INFO] [ReplayManager] Player: Player (valid: True)
[20:16:19] [INFO] [ReplayManager] Enemies count: 10
[20:16:19] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:16:19] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:16:19] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:16:19] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:16:19] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:16:19] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:16:19] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:16:19] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:16:19] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:16:19] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:16:19] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:16:19] [INFO] [BuildingLevel] Replay recording started successfully
[20:16:19] [INFO] [BloodDecal] Blood puddle created at (427.564, 928.3058) (added to group)
[20:16:19] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:16:19] [INFO] [CinemaEffects] Found player node: Player
[20:16:19] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:16:19] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:16:19] [ENEMY] [Enemy1] Registered as sound listener
[20:16:19] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[20:16:19] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:16:19] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:16:19] [ENEMY] [Enemy2] Registered as sound listener
[20:16:19] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[20:16:19] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:16:19] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:16:19] [ENEMY] [Enemy3] Registered as sound listener
[20:16:19] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[20:16:19] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:16:19] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:16:19] [ENEMY] [Enemy4] Registered as sound listener
[20:16:19] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[20:16:19] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:16:19] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:16:19] [ENEMY] [Enemy5] Registered as sound listener
[20:16:19] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[20:16:19] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:16:19] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:16:19] [ENEMY] [Enemy6] Registered as sound listener
[20:16:19] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[20:16:19] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:16:19] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:16:19] [ENEMY] [Enemy7] Registered as sound listener
[20:16:19] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[20:16:19] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:16:19] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:16:19] [ENEMY] [Enemy8] Registered as sound listener
[20:16:19] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[20:16:19] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:16:19] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:16:19] [ENEMY] [Enemy9] Registered as sound listener
[20:16:19] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[20:16:19] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:16:19] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:16:19] [ENEMY] [Enemy10] Registered as sound listener
[20:16:19] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[20:16:19] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:16:19] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:16:19] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:19] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:19] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=236.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:19] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:19] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:19] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:19] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:19] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:19] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:16:19] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:16:19] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:16:19] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:16:19] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:16:19] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:16:19] [INFO] [LastChance] Found player: Player
[20:16:19] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:16:19] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:16:19] [INFO] [LastChance] Connected to player Died signal (C#)
[20:16:19] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:16:19] [INFO] [BloodDecal] Blood puddle created at (447.0988, 855.7722) (added to group)
[20:16:19] [INFO] [BloodDecal] Blood puddle created at (371.3159, 974.082) (added to group)
[20:16:19] [INFO] [BloodDecal] Blood puddle created at (400.0006, 923.5295) (added to group)
[20:16:19] [INFO] [BloodDecal] Blood puddle created at (428.8974, 1034.735) (added to group)
[20:16:19] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[20:16:20] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:16:20] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:20] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:16:20] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,998), corner_timer=0.30
[20:16:20] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,998), corner_timer=0.30
[20:16:20] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,963), corner_timer=-0.02
[20:16:20] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:20] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,963), corner_timer=-0.02
[20:16:20] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:16:20] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,958), corner_timer=0.30
[20:16:20] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,958), corner_timer=0.30
[20:16:21] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:16:21] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,854), corner_timer=-0.02
[20:16:21] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[20:16:21] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,849), corner_timer=0.30
[20:16:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 822.1112), source=PLAYER (MakarovPM), range=1469, listeners=20
[20:16:21] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:16:21] [ENEMY] [Enemy1] Heard gunshot at (460, 822.1112), source_type=0, intensity=0.01, distance=498
[20:16:21] [ENEMY] [Enemy2] Heard gunshot at (460, 822.1112), source_type=0, intensity=0.03, distance=279
[20:16:21] [ENEMY] [Enemy3] Heard gunshot at (460, 822.1112), source_type=0, intensity=0.04, distance=251
[20:16:21] [ENEMY] [Enemy4] Heard gunshot at (460, 822.1112), source_type=0, intensity=0.02, distance=349
[20:16:21] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:21] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=72.2°, current=168.8°, player=(450,816), corner_timer=0.00
[20:16:21] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=79.4°, current=45.0°, player=(450,816), corner_timer=0.00
[20:16:21] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=165.2°, current=-123.8°, player=(450,816), corner_timer=0.00
[20:16:21] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-166.5°, current=-67.5°, player=(450,816), corner_timer=0.00
[20:16:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(460, 822.1112), shooter_id=15822407863823, bullet_pos=(510.2906, 815.9497)
[20:16:21] [INFO] [Bullet] Using shooter_position, distance=50.6666603088379
[20:16:21] [INFO] [Bullet] Distance to wall: 50.6666603088379 (3.44998606820176% of viewport)
[20:16:21] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:16:21] [INFO] [Bullet] Caliber cannot penetrate walls
[20:16:21] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,770), corner_timer=-0.02
[20:16:21] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[20:16:21] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,768), corner_timer=0.30
[20:16:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 773.5001), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:21] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:21] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=172.8°, current=124.3°, player=(450,783), corner_timer=0.00
[20:16:21] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:16:21] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[20:16:21] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[20:16:21] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:16:21] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(450,804), corner_timer=-0.02
[20:16:21] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[20:16:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4792, 753.8834), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:22] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(450,809), corner_timer=0.30
[20:16:22] [INFO] [EnemyGrenade] Unsafe throw distance (120 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:22] [INFO] [LastChance] Threat detected: Bullet
[20:16:22] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:22] [INFO] [EnemyGrenade] Unsafe throw distance (119 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:22] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[20:16:22] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=IN_COVER, target=139.7°, current=142.2°, player=(450,826), corner_timer=0.00
[20:16:22] [INFO] [EnemyGrenade] Unsafe throw distance (118 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:22] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[20:16:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(623.9985, 775.2847), shooter_id=15819052420193, bullet_pos=(501.1442, 798.34595)
[20:16:22] [INFO] [Bullet] Using shooter_position, distance=124,99997
[20:16:22] [INFO] [Bullet] Distance to wall: 124,99997 (8,511477% of viewport)
[20:16:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:22] [INFO] [Bullet] Starting wall penetration at (501.1442, 798.34595)
[20:16:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 843.2225), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:22] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:22] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:16:22] [INFO] [Bullet] Exiting penetration at (455.27856, 806.95544) after traveling 41,666668 pixels through wall
[20:16:22] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:16:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(460, 843.2225), shooter_id=15822407863823, bullet_pos=(508.2975, 827.9102)
[20:16:22] [INFO] [Bullet] Using shooter_position, distance=50.666675567627
[20:16:22] [INFO] [Bullet] Distance to wall: 50.666675567627 (3.44998710720076% of viewport)
[20:16:22] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:16:22] [INFO] [Bullet] Caliber cannot penetrate walls
[20:16:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(460, 773.5001), shooter_id=15822407863823, bullet_pos=(916.8599, 675.112)
[20:16:22] [INFO] [Bullet] Using shooter_position, distance=467.334106445313
[20:16:22] [INFO] [Bullet] Distance to wall: 467.334106445313 (31.8216386595074% of viewport)
[20:16:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:22] [INFO] [Bullet] Caliber cannot penetrate walls
[20:16:22] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[20:16:22] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:22] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:16:22] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:16:22] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:16:22] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:22] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:16:22] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:16:22] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:16:22] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:16:22] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:22] [ENEMY] [Enemy1] Death animation component initialized
[20:16:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:22] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:16:22] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:16:22] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:16:22] [ENEMY] [Enemy2] Death animation component initialized
[20:16:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:22] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:16:22] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:16:22] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:16:22] [ENEMY] [Enemy3] Death animation component initialized
[20:16:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:22] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:16:22] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:16:22] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:16:22] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:22] [ENEMY] [Enemy4] Death animation component initialized
[20:16:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:22] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:16:22] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:16:22] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:16:22] [ENEMY] [Enemy5] Death animation component initialized
[20:16:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:22] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:16:22] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:16:22] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:16:22] [ENEMY] [Enemy6] Death animation component initialized
[20:16:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:22] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:16:22] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:16:22] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:16:22] [ENEMY] [Enemy7] Death animation component initialized
[20:16:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:22] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:16:22] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:16:22] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:16:22] [ENEMY] [Enemy8] Death animation component initialized
[20:16:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:22] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:16:22] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:16:22] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:16:22] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:22] [ENEMY] [Enemy9] Death animation component initialized
[20:16:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:22] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:16:22] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:16:22] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:16:22] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:22] [ENEMY] [Enemy10] Death animation component initialized
[20:16:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:22] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:16:22] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:16:22] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:16:22] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:16:22] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:16:22] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:16:22] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:16:22] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:16:22] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:16:22] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:16:22] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:16:22] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:16:22] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 2/4
[20:16:22] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:16:22] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:16:22] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:16:22] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:16:22] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:16:22] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:16:22] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:16:22] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:16:22] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:16:22] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:16:22] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:16:22] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:16:22] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:16:22] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:16:22] [INFO] [ScoreManager] Level started with 10 enemies
[20:16:22] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:16:22] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:16:22] [INFO] [ReplayManager] Replay data cleared
[20:16:22] [INFO] [BuildingLevel] Previous replay data cleared
[20:16:22] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:16:22] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:16:22] [INFO] [ReplayManager] Level: BuildingLevel
[20:16:22] [INFO] [ReplayManager] Player: Player (valid: True)
[20:16:22] [INFO] [ReplayManager] Enemies count: 10
[20:16:22] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:16:22] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:16:22] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:16:22] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:16:22] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:16:22] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:16:22] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:16:22] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:16:22] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:16:22] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:16:22] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:16:22] [INFO] [BuildingLevel] Replay recording started successfully
[20:16:22] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:16:22] [INFO] [CinemaEffects] Found player node: Player
[20:16:22] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:16:22] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:16:22] [ENEMY] [Enemy1] Registered as sound listener
[20:16:22] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[20:16:22] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:16:22] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:16:22] [ENEMY] [Enemy2] Registered as sound listener
[20:16:22] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[20:16:22] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:16:22] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:16:22] [ENEMY] [Enemy3] Registered as sound listener
[20:16:22] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[20:16:22] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:16:22] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:16:22] [ENEMY] [Enemy4] Registered as sound listener
[20:16:22] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[20:16:22] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:16:22] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:16:22] [ENEMY] [Enemy5] Registered as sound listener
[20:16:22] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[20:16:22] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:16:22] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:16:22] [ENEMY] [Enemy6] Registered as sound listener
[20:16:22] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[20:16:22] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:16:22] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:16:22] [ENEMY] [Enemy7] Registered as sound listener
[20:16:22] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[20:16:22] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:16:22] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:16:22] [ENEMY] [Enemy8] Registered as sound listener
[20:16:22] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[20:16:22] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:16:22] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:16:22] [ENEMY] [Enemy9] Registered as sound listener
[20:16:22] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[20:16:22] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:16:22] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:16:22] [ENEMY] [Enemy10] Registered as sound listener
[20:16:22] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[20:16:22] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:16:22] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:16:22] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:22] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:22] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=281.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:22] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:22] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:22] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=225.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:22] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:22] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:22] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:16:22] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:16:22] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:16:22] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:16:22] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:16:22] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:16:22] [INFO] [LastChance] Found player: Player
[20:16:22] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:16:22] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:16:22] [INFO] [LastChance] Connected to player Died signal (C#)
[20:16:22] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:16:23] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:16:23] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:23] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:16:23] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,814), corner_timer=0.30
[20:16:23] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,814), corner_timer=0.30
[20:16:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(458.1523, 793.432), source=PLAYER (MakarovPM), range=1469, listeners=20
[20:16:23] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:16:23] [ENEMY] [Enemy1] Heard gunshot at (458.1523, 793.432), source_type=0, intensity=0.01, distance=471
[20:16:23] [ENEMY] [Enemy2] Heard gunshot at (458.1523, 793.432), source_type=0, intensity=0.04, distance=250
[20:16:23] [ENEMY] [Enemy3] Heard gunshot at (458.1523, 793.432), source_type=0, intensity=0.04, distance=246
[20:16:23] [ENEMY] [Enemy4] Heard gunshot at (458.1523, 793.432), source_type=0, intensity=0.02, distance=358
[20:16:23] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:23] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=71.3°, current=-157.5°, player=(448,787), corner_timer=0.00
[20:16:23] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=78.5°, current=-101.3°, player=(448,787), corner_timer=0.00
[20:16:23] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=171.5°, current=-78.7°, player=(448,787), corner_timer=0.00
[20:16:23] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-162.3°, current=-67.5°, player=(448,787), corner_timer=0.00
[20:16:24] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=-178.6°, current=133.9°, player=(418,744), corner_timer=0.00
[20:16:24] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(415,743), corner_timer=-0.02
[20:16:24] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:24] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(415,743), corner_timer=-0.02
[20:16:24] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:16:24] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(412,742), corner_timer=0.30
[20:16:24] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(412,742), corner_timer=0.30
[20:16:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(415.9464, 748.0627), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:24] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:16:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.4492, 751.5681), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:24] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:24] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:16:24] [INFO] [LastChance] Threat detected: Bullet
[20:16:24] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(458.1523, 793.432), shooter_id=16927959289296, bullet_pos=(924.7588, 767.3738)
[20:16:24] [INFO] [Bullet] Using shooter_position, distance=467.333587646484
[20:16:24] [INFO] [Bullet] Distance to wall: 467.333587646484 (31.8216033335412% of viewport)
[20:16:24] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:24] [INFO] [Bullet] Caliber cannot penetrate walls
[20:16:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(671.2396, 770.3127), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:24] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:24] [INFO] [LastChance] Threat detected: @Area2D@5896
[20:16:24] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:24] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:16:24] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[20:16:24] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[20:16:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(386.131, 776.1614), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(624.888, 756.87476), shooter_id=16924603845458, bullet_pos=(210.6174, 712.2532)
[20:16:24] [INFO] [Bullet] Using shooter_position, distance=416,66678
[20:16:24] [INFO] [Bullet] Distance to wall: 416,66678 (28,371609% of viewport)
[20:16:24] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(653.5413, 789.5105), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:24] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:24] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(374,783), corner_timer=-0.02
[20:16:24] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[20:16:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(624.888, 756.87476), shooter_id=16924603845458, bullet_pos=(64.68901, 726.95074)
[20:16:24] [INFO] [Bullet] Using shooter_position, distance=560,9976
[20:16:24] [INFO] [Bullet] Distance to wall: 560,9976 (38,19936% of viewport)
[20:16:24] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:24] [INFO] [Bullet] Starting wall penetration at (64.68901, 726.95074)
[20:16:24] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(373,788), corner_timer=0.30
[20:16:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 7,562274
[20:16:24] [INFO] [Bullet] Body exited signal received for penetrating body
[20:16:24] [INFO] [Bullet] Exiting penetration at (24.475792, 731.0009) after traveling 35,416668 pixels through wall
[20:16:24] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[20:16:24] [INFO] [LastChance] Threat detected: @Area2D@5900
[20:16:24] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:24] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=108.1°, current=179.4°, player=(373,810), corner_timer=0.00
[20:16:24] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[20:16:24] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[20:16:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(603.9247, 774.88074), shooter_id=16924603845458, bullet_pos=(62.830948, 799.78735)
[20:16:24] [INFO] [Bullet] Using shooter_position, distance=541,6667
[20:16:24] [INFO] [Bullet] Distance to wall: 541,6667 (36,883083% of viewport)
[20:16:24] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:24] [INFO] [Bullet] Starting wall penetration at (62.830948, 799.78735)
[20:16:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 15,803076
[20:16:24] [INFO] [Bullet] Body exited signal received for penetrating body
[20:16:24] [INFO] [Bullet] Exiting penetration at (16.213638, 801.93317) after traveling 41,666668 pixels through wall
[20:16:24] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:16:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(415.9464, 748.0627), shooter_id=16927959289296, bullet_pos=(912.2977, 682.4712)
[20:16:24] [INFO] [Bullet] Using shooter_position, distance=500.666412353516
[20:16:24] [INFO] [Bullet] Distance to wall: 500.666412353516 (34.0912966615028% of viewport)
[20:16:24] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:24] [INFO] [Bullet] Caliber cannot penetrate walls
[20:16:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(585.83673, 795.841), shooter_id=16924603845458, bullet_pos=(47.246475, 738.1924)
[20:16:24] [INFO] [Bullet] Using shooter_position, distance=541,66675
[20:16:24] [INFO] [Bullet] Distance to wall: 541,66675 (36,883087% of viewport)
[20:16:24] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:24] [INFO] [Bullet] Starting wall penetration at (47.246475, 738.1924)
[20:16:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 31,333103
[20:16:24] [INFO] [Bullet] Body exited signal received for penetrating body
[20:16:24] [INFO] [Bullet] Exiting penetration at (0.84485626, 733.2257) after traveling 41,666668 pixels through wall
[20:16:24] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:16:24] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:24] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:24] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:16:24] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:16:24] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:16:24] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:24] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:16:24] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:16:24] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:16:24] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:16:24] [ENEMY] [Enemy1] Death animation component initialized
[20:16:24] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:24] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:16:24] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:16:24] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:16:24] [ENEMY] [Enemy2] Death animation component initialized
[20:16:24] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:24] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:16:24] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:16:24] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:16:24] [ENEMY] [Enemy3] Death animation component initialized
[20:16:24] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:24] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:16:24] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:16:24] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:16:24] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:24] [ENEMY] [Enemy4] Death animation component initialized
[20:16:24] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:24] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:16:24] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:16:24] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:16:24] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:24] [ENEMY] [Enemy5] Death animation component initialized
[20:16:24] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:24] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:16:24] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:16:24] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:16:24] [ENEMY] [Enemy6] Death animation component initialized
[20:16:24] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:24] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:16:24] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:16:24] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:16:24] [ENEMY] [Enemy7] Death animation component initialized
[20:16:24] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:24] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:16:24] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:16:24] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:16:24] [ENEMY] [Enemy8] Death animation component initialized
[20:16:24] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:24] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:16:24] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:16:24] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:16:24] [ENEMY] [Enemy9] Death animation component initialized
[20:16:24] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:24] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:16:24] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:16:24] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:16:24] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:24] [ENEMY] [Enemy10] Death animation component initialized
[20:16:24] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:24] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:16:24] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:16:24] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:16:24] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:16:24] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:16:24] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:16:24] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:16:24] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:16:24] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:16:24] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:16:24] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:16:24] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:16:24] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 3/4
[20:16:24] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:16:24] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:16:24] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:16:24] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:16:24] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:16:24] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:16:24] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:16:24] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:16:24] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:16:24] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:16:24] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:16:24] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:16:24] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:16:24] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:16:24] [INFO] [ScoreManager] Level started with 10 enemies
[20:16:24] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:16:24] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:16:24] [INFO] [ReplayManager] Replay data cleared
[20:16:24] [INFO] [BuildingLevel] Previous replay data cleared
[20:16:24] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:16:24] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:16:24] [INFO] [ReplayManager] Level: BuildingLevel
[20:16:24] [INFO] [ReplayManager] Player: Player (valid: True)
[20:16:24] [INFO] [ReplayManager] Enemies count: 10
[20:16:24] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:16:24] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:16:24] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:16:24] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:16:24] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:16:24] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:16:24] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:16:24] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:16:24] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:16:24] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:16:24] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:16:24] [INFO] [BuildingLevel] Replay recording started successfully
[20:16:24] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:16:24] [INFO] [CinemaEffects] Found player node: Player
[20:16:24] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:16:24] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:16:24] [ENEMY] [Enemy1] Registered as sound listener
[20:16:24] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[20:16:24] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:16:24] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:16:24] [ENEMY] [Enemy2] Registered as sound listener
[20:16:24] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[20:16:24] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:16:24] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:16:24] [ENEMY] [Enemy3] Registered as sound listener
[20:16:24] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[20:16:24] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:16:24] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:16:24] [ENEMY] [Enemy4] Registered as sound listener
[20:16:24] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[20:16:24] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:16:24] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:16:24] [ENEMY] [Enemy5] Registered as sound listener
[20:16:24] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[20:16:24] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:16:24] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:16:24] [ENEMY] [Enemy6] Registered as sound listener
[20:16:24] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[20:16:24] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:16:24] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:16:24] [ENEMY] [Enemy7] Registered as sound listener
[20:16:24] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[20:16:24] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:16:24] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:16:24] [ENEMY] [Enemy8] Registered as sound listener
[20:16:24] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[20:16:24] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:16:24] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:16:24] [ENEMY] [Enemy9] Registered as sound listener
[20:16:24] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[20:16:24] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:16:24] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:16:24] [ENEMY] [Enemy10] Registered as sound listener
[20:16:24] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[20:16:24] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:16:24] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:16:24] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:24] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:24] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=281.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:24] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:24] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:24] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:24] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=78.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:24] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:24] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:16:24] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:16:24] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:16:24] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:16:24] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:16:24] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:16:24] [INFO] [LastChance] Found player: Player
[20:16:24] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:16:24] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:16:24] [INFO] [LastChance] Connected to player Died signal (C#)
[20:16:24] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:16:25] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:16:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 799.8333), source=PLAYER (MakarovPM), range=1469, listeners=20
[20:16:26] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:16:26] [ENEMY] [Enemy1] Heard gunshot at (460, 799.8333), source_type=0, intensity=0.01, distance=477
[20:16:26] [ENEMY] [Enemy2] Heard gunshot at (460, 799.8333), source_type=0, intensity=0.04, distance=257
[20:16:26] [ENEMY] [Enemy3] Heard gunshot at (460, 799.8333), source_type=0, intensity=0.04, distance=245
[20:16:26] [ENEMY] [Enemy4] Heard gunshot at (460, 799.8333), source_type=0, intensity=0.02, distance=354
[20:16:26] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:26] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=71.3°, current=33.8°, player=(450,793), corner_timer=0.00
[20:16:26] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=78.4°, current=-157.5°, player=(450,793), corner_timer=0.00
[20:16:26] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=170.1°, current=-78.7°, player=(450,793), corner_timer=0.00
[20:16:26] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-163.1°, current=168.8°, player=(450,793), corner_timer=0.00
[20:16:26] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:26] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:16:26] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,785), corner_timer=0.30
[20:16:26] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,785), corner_timer=0.30
[20:16:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(457.1366, 769.262), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:26] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:26] [ENEMY] [Enemy3] Hit: dmg=1, hp=2/2->1/2
[20:16:26] [INFO] [ImpactEffects] spawn_blood_effect called at (689.4937, 751.8422), dir=(0.993466, -0.114133), lethal=false
[20:16:26] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:26] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:26] [INFO] [ImpactEffects] Blood effect spawned at (689.4937, 751.8422) (scale=0.5)
[20:16:26] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=178.3°, current=173.4°, player=(444,758), corner_timer=0.00
[20:16:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.4937, 751.8422), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:26] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:26] [INFO] [LastChance] Threat detected: Bullet
[20:16:26] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:26] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:16:26] [ENEMY] [Enemy3] Hit: dmg=1, hp=1/2->0/2
[20:16:26] [INFO] [ImpactEffects] spawn_blood_effect called at (687.1429, 750.5831), dir=(0.984258, -0.176735), lethal=true
[20:16:26] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:26] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[20:16:26] [INFO] [ImpactEffects] Blood effect spawned at (687.1429, 750.5831) (scale=0.75)
[20:16:26] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[20:16:26] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[20:16:26] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[20:16:26] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[20:16:26] [INFO] [DeathAnim] Started - Angle: -10.2 deg, Index: 11
[20:16:26] [ENEMY] [Enemy3] Death animation started with hit direction: (0.984258, -0.176735)
[20:16:26] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(423,756), corner_timer=-0.02
[20:16:26] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:26] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(423,756), corner_timer=-0.02
[20:16:26] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:16:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(430.4265, 763.46), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:16:26] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[20:16:26] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(420,757), corner_timer=0.30
[20:16:26] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(420,757), corner_timer=0.30
[20:16:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(622.0292, 761.1422), shooter_id=17807991375681, bullet_pos=(38.78195, 771.17224)
[20:16:26] [INFO] [Bullet] Using shooter_position, distance=583,33344
[20:16:26] [INFO] [Bullet] Distance to wall: 583,33344 (39,720245% of viewport)
[20:16:26] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:26] [INFO] [Bullet] Starting wall penetration at (38.78195, 771.17224)
[20:16:26] [INFO] [Bullet] Raycast backward hit penetrating body at distance 39,88371
[20:16:26] [INFO] [Bullet] Body exited signal received for penetrating body
[20:16:26] [INFO] [Bullet] Exiting penetration at (-7.8778152, 771.9747) after traveling 41,666668 pixels through wall
[20:16:26] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:16:26] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:16:26] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:16:26] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[20:16:26] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[20:16:26] [INFO] [BloodDecal] Blood puddle created at (751.4722, 746.7473) (added to group)
[20:16:26] [INFO] [BloodDecal] Blood puddle created at (795.765, 725.3777) (added to group)
[20:16:26] [INFO] [BloodDecal] Blood puddle created at (740.2086, 772.1716) (added to group)
[20:16:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(407.5027, 816.5894), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:16:26] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[20:16:26] [INFO] [BloodDecal] Blood puddle created at (787.7695, 747.0099) (added to group)
[20:16:26] [INFO] [BloodDecal] Blood puddle created at (840.2996, 820.8739) (added to group)
[20:16:27] [INFO] [BloodDecal] Blood puddle created at (824.9662, 839.3153) (added to group)
[20:16:27] [INFO] [BloodDecal] Blood puddle created at (732.6174, 741.5832) (added to group)
[20:16:27] [INFO] [BloodDecal] Blood puddle created at (774.6046, 794.179) (added to group)
[20:16:27] [INFO] [BloodDecal] Blood puddle created at (737.1005, 757.2761) (added to group)
[20:16:27] [INFO] [BloodDecal] Blood puddle created at (848.2625, 812.9297) (added to group)
[20:16:27] [INFO] [BloodDecal] Blood puddle created at (762.3129, 759.455) (added to group)
[20:16:27] [INFO] [BloodDecal] Blood puddle created at (738.7612, 770.3754) (added to group)
[20:16:27] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(397,832), corner_timer=-0.02
[20:16:27] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[20:16:27] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(397,838), corner_timer=0.30
[20:16:27] [INFO] [BloodDecal] Blood puddle created at (745.1013, 772.5299) (added to group)
[20:16:27] [INFO] [BloodDecal] Blood puddle created at (812.0537, 841.6458) (added to group)
[20:16:27] [INFO] [BloodDecal] Blood puddle created at (760.1563, 777.6317) (added to group)
[20:16:27] [INFO] [BloodDecal] Blood puddle created at (885.7129, 791.4178) (added to group)
[20:16:27] [INFO] [BloodDecal] Blood puddle created at (837.2684, 824.9176) (added to group)
[20:16:27] [INFO] [BloodDecal] Blood puddle created at (804.1005, 758.2082) (added to group)
[20:16:27] [INFO] [BloodDecal] Blood puddle created at (809.6547, 761.8661) (added to group)
[20:16:27] [ENEMY] [Enemy3] Ragdoll activated
[20:16:27] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[20:16:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(430.4265, 763.46), shooter_id=17811346820301, bullet_pos=(917.667, 648.2925)
[20:16:27] [INFO] [Bullet] Using shooter_position, distance=500.666442871094
[20:16:27] [INFO] [Bullet] Distance to wall: 500.666442871094 (34.0912987395009% of viewport)
[20:16:27] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:27] [INFO] [Bullet] Caliber cannot penetrate walls
[20:16:27] [INFO] [BloodDecal] Blood puddle created at (833.3411, 843.403) (added to group)
[20:16:27] [INFO] [BloodDecal] Blood puddle created at (899.1023, 798.9606) (added to group)
[20:16:27] [INFO] [BloodDecal] Blood puddle created at (830.2982, 726.202) (added to group)
[20:16:27] [INFO] [BloodDecal] Blood puddle created at (845.7423, 749.0634) (added to group)
[20:16:27] [INFO] [BloodDecal] Blood puddle created at (792.869, 810.7866) (added to group)
[20:16:27] [INFO] [BloodDecal] Blood puddle created at (773.1888, 773.3268) (added to group)
[20:16:27] [INFO] [BloodDecal] Blood puddle created at (818.0696, 856.7997) (added to group)
[20:16:27] [INFO] [BloodDecal] Blood puddle created at (882.8, 770.6567) (added to group)
[20:16:27] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(397,927), corner_timer=-0.02
[20:16:27] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[20:16:27] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(397,929), corner_timer=0.30
[20:16:27] [INFO] [BloodDecal] Blood puddle created at (793.6856, 786.3098) (added to group)
[20:16:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(407.5027, 816.5894), shooter_id=17811346820301, bullet_pos=(915.3713, 651.5904)
[20:16:27] [INFO] [Bullet] Using shooter_position, distance=533.999267578125
[20:16:27] [INFO] [Bullet] Distance to wall: 533.999267578125 (36.3609920674625% of viewport)
[20:16:27] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:27] [INFO] [Bullet] Caliber cannot penetrate walls
[20:16:27] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(403,915), corner_timer=-0.02
[20:16:27] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[20:16:27] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(405,912), corner_timer=0.30
[20:16:27] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[20:16:28] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(475,841), corner_timer=-0.02
[20:16:28] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[20:16:28] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(479,837), corner_timer=0.30
[20:16:28] [ENEMY] [Enemy3] Death animation completed
[20:16:28] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:16:28] [ENEMY] [Enemy1] PURSUING corner check: angle -138.5°
[20:16:28] [ENEMY] [Enemy2] PURSUING corner check: angle 149.8°
[20:16:28] [ENEMY] [Enemy4] PURSUING corner check: angle -70.5°
[20:16:28] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=55.4°, current=49.1°, player=(525,736), corner_timer=0.22
[20:16:28] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[20:16:28] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(544,716), corner_timer=-0.02
[20:16:28] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[20:16:28] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(548,712), corner_timer=0.30
[20:16:28] [ENEMY] [Enemy1] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=53.2°, current=5.0°, player=(552,708), corner_timer=0.10
[20:16:28] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
[20:16:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(570.3823, 707.0131), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:16:28] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
[20:16:28] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=-119.8°, current=-122.1°, player=(568,693), corner_timer=0.05
[20:16:28] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[20:16:28] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:16:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.4451, 914.0657), source=ENEMY (Enemy4), range=1469, listeners=9
[20:16:28] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[20:16:28] [ENEMY] [Enemy1] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=47.6°, current=64.6°, player=(575,685), corner_timer=0.10
[20:16:28] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:16:28] [INFO] [LastChance] Threat detected: Bullet
[20:16:28] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:28] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:28] [ENEMY] [Enemy2] Hit: dmg=1, hp=3/3->2/3
[20:16:28] [INFO] [ImpactEffects] spawn_blood_effect called at (429.5475, 600.6823), dir=(-0.769671, -0.638441), lethal=false
[20:16:28] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:28] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:28] [INFO] [ImpactEffects] Blood effect spawned at (429.5475, 600.6823) (scale=0.5)
[20:16:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(429.5475, 600.6823), source=ENEMY (Enemy2), range=1469, listeners=9
[20:16:28] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[20:16:28] [INFO] [LastChance] Threat detected: @Area2D@6232
[20:16:28] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:28] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:28] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:16:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(670.2321, 912.1808), source=ENEMY (Enemy4), range=1469, listeners=9
[20:16:28] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[20:16:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(651.2307, 857.7606), shooter_id=17808343697767, bullet_pos=(516.08936, 599.2917)
[20:16:28] [INFO] [Bullet] Using shooter_position, distance=291,66653
[20:16:28] [INFO] [Bullet] Distance to wall: 291,66653 (19,860111% of viewport)
[20:16:28] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:28] [INFO] [LastChance] Threat detected: @Area2D@6235
[20:16:28] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:28] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:28] [INFO] [ReplayManager] Recording frame 240 (4,0s): player_valid=True, enemies=10
[20:16:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(651.2307, 857.7606), shooter_id=17808343697767, bullet_pos=(451.33038, 689.75073)
[20:16:28] [INFO] [Bullet] Using shooter_position, distance=261,1273
[20:16:28] [INFO] [Bullet] Distance to wall: 261,1273 (17,780638% of viewport)
[20:16:28] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:28] [INFO] [Bullet] Starting wall penetration at (451.33038, 689.75073)
[20:16:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(429.5475, 600.6823), source=ENEMY (Enemy2), range=1469, listeners=9
[20:16:28] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[20:16:28] [INFO] [Bullet] Raycast backward hit penetrating body at distance 13,053665
[20:16:28] [INFO] [Bullet] Body exited signal received for penetrating body
[20:16:28] [INFO] [Bullet] Exiting penetration at (427.8037, 722.61414) after traveling 35,416668 pixels through wall
[20:16:28] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[20:16:28] [INFO] [LastChance] Threat detected: @Area2D@6240
[20:16:28] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:28] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:28] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[20:16:28] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[20:16:28] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(629,659), corner_timer=-0.02
[20:16:28] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[20:16:28] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:16:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(658.1238, 902.9271), source=ENEMY (Enemy4), range=1469, listeners=9
[20:16:28] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[20:16:28] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(633,659), corner_timer=0.30
[20:16:28] [INFO] [LastChance] Threat detected: Bullet
[20:16:28] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:28] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(432.653, 593.3096), source=ENEMY (Enemy2), range=1469, listeners=9
[20:16:28] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[20:16:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(486.2909, 635.6688), shooter_id=17807639054073, bullet_pos=(938.7101, 848.54724)
[20:16:29] [INFO] [Bullet] Using shooter_position, distance=500,00034
[20:16:29] [INFO] [Bullet] Distance to wall: 500,00034 (34,045944% of viewport)
[20:16:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:29] [INFO] [Bullet] Starting wall penetration at (938.7101, 848.54724)
[20:16:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 49,661793
[20:16:29] [INFO] [Bullet] Body exited signal received for penetrating body
[20:16:29] [INFO] [Bullet] Exiting penetration at (980.93585, 868.4159) after traveling 41,666668 pixels through wall
[20:16:29] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:16:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(644.41736, 849.219), shooter_id=17808343697767, bullet_pos=(518.24097, 408.59586)
[20:16:29] [INFO] [Bullet] Using shooter_position, distance=458,3331
[20:16:29] [INFO] [Bullet] Distance to wall: 458,3331 (31,208744% of viewport)
[20:16:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (124 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(436.7935, 583.4792), source=ENEMY (Enemy2), range=1469, listeners=9
[20:16:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (123 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:16:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(664.9207, 910.1796), source=ENEMY (Enemy4), range=1469, listeners=9
[20:16:29] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[20:16:29] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:16:29] [INFO] [LastChance] Threat detected: @Area2D@6249
[20:16:29] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:29] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (120 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [INFO] [BloodDecal] Blood puddle created at (371.5946, 550.696) (added to group)
[20:16:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(491.79944, 628.4022), shooter_id=17807639054073, bullet_pos=(928.9004, 766.2869)
[20:16:29] [INFO] [Bullet] Using shooter_position, distance=458,3333
[20:16:29] [INFO] [Bullet] Distance to wall: 458,3333 (31,20876% of viewport)
[20:16:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:29] [INFO] [LastChance] Threat detected: @Area2D@6251
[20:16:29] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:29] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (119 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(440.9341, 573.6489), source=ENEMY (Enemy2), range=1469, listeners=9
[20:16:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (118 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (117 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:16:29] [INFO] [Player] Spawning blood effect at (683.9183, 683.8684), dir=(1, 0), lethal=False (C#)
[20:16:29] [INFO] [ImpactEffects] spawn_blood_effect called at (683.9183, 683.8684), dir=(1, 0), lethal=false
[20:16:29] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:29] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:29] [INFO] [ImpactEffects] Blood effect spawned at (683.9183, 683.8684) (scale=1)
[20:16:29] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:16:29] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:16:29] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:16:29] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P3:corner, state=RETREATING, target=149.8°, current=2.7°, player=(683,683), corner_timer=0.17
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (115 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [INFO] [BloodDecal] Blood puddle created at (382.258, 585.1641) (added to group)
[20:16:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(494.71423, 621.22003), shooter_id=17807639054073, bullet_pos=(910.64685, 645.93744)
[20:16:29] [INFO] [Bullet] Using shooter_position, distance=416,6664
[20:16:29] [INFO] [Bullet] Distance to wall: 416,6664 (28,371584% of viewport)
[20:16:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:29] [INFO] [Bullet] Starting wall penetration at (910.64685, 645.93744)
[20:16:29] [INFO] [LastChance] Threat detected: @Area2D@6259
[20:16:29] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:16:29] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:29] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P3:corner, state=RETREATING, target=-70.5°, current=-88.1°, player=(687,687), corner_timer=0.05
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (113 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 21,26878
[20:16:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(491.79944, 628.4022), shooter_id=17807639054073, bullet_pos=(756.4397, 824.6959)
[20:16:29] [INFO] [Bullet] Using shooter_position, distance=329,49307
[20:16:29] [INFO] [Bullet] Distance to wall: 329,49307 (22,435791% of viewport)
[20:16:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:29] [INFO] [Bullet] Starting wall penetration at (756.4397, 824.6959)
[20:16:29] [INFO] [Bullet] Body exited signal received for penetrating body
[20:16:29] [INFO] [Bullet] Exiting penetration at (957.2313, 648.7058) after traveling 41,666668 pixels through wall
[20:16:29] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:16:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(444.023, 563.6096), source=ENEMY (Enemy2), range=1469, listeners=9
[20:16:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (112 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:16:29] [INFO] [Bullet] Exiting penetration at (718.15894, 837.6608) after traveling 35,416668 pixels through wall
[20:16:29] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[20:16:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(508.45413, 585.5008), shooter_id=17807639054073, bullet_pos=(508.45413, 585.5008)
[20:16:29] [INFO] [Bullet] Using shooter_position, distance=0
[20:16:29] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[20:16:29] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:16:29] [INFO] [Bullet] Starting wall penetration at (508.45413, 585.5008)
[20:16:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(644.41736, 849.219), shooter_id=17808343697767, bullet_pos=(583.64795, 55.434933)
[20:16:29] [INFO] [Bullet] Using shooter_position, distance=796,1068
[20:16:29] [INFO] [Bullet] Distance to wall: 796,1068 (54,20838% of viewport)
[20:16:29] [INFO] [Bullet] Distance-based penetration chance: 83,42355%
[20:16:29] [INFO] [Bullet] Penetration failed (distance roll)
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (110 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[20:16:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 29,441029
[20:16:29] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:16:29] [INFO] [Player] Spawning blood effect at (697.51935, 697.3645), dir=(1, 0), lethal=False (C#)
[20:16:29] [INFO] [ImpactEffects] spawn_blood_effect called at (697.5193, 697.3645), dir=(1, 0), lethal=false
[20:16:29] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:29] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:29] [INFO] [ImpactEffects] Blood effect spawned at (697.5193, 697.3645) (scale=1)
[20:16:29] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:16:29] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:16:29] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:16:29] [INFO] [Bullet] Body exited signal received for penetrating body
[20:16:29] [INFO] [Bullet] Exiting penetration at (550.5701, 605.60095) after traveling 41,66667 pixels through wall
[20:16:29] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (108 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (107 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [INFO] [BloodDecal] Blood puddle created at (304.2192, 591.099) (added to group)
[20:16:29] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (106 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (105 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(705,705), corner_timer=-0.02
[20:16:29] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[20:16:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(643.63446, 836.4391), shooter_id=17808343697767, bullet_pos=(570.137, 48.191532)
[20:16:29] [INFO] [Bullet] Using shooter_position, distance=791,6666
[20:16:29] [INFO] [Bullet] Distance to wall: 791,6666 (53,906036% of viewport)
[20:16:29] [INFO] [Bullet] Distance-based penetration chance: 83,7763%
[20:16:29] [INFO] [Bullet] Starting wall penetration at (570.137, 48.191532)
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (104 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(707,707), corner_timer=0.30
[20:16:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 30,404905
[20:16:29] [INFO] [Bullet] Body exited signal received for penetrating body
[20:16:29] [INFO] [Bullet] Exiting penetration at (565.80457, 1.7264061) after traveling 41,66667 pixels through wall
[20:16:29] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (103 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [INFO] [BloodDecal] Blood puddle created at (362.4111, 570.6393) (added to group)
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (102 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (101 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [INFO] [Player] Stun ended (Issue #592)
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (100 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (99 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [INFO] [BloodDecal] Blood puddle created at (307.6605, 611.6969) (added to group)
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (98 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(656.8443, 842.61206), shooter_id=17808343697767, bullet_pos=(654.7847, 50.948135)
[20:16:29] [INFO] [Bullet] Using shooter_position, distance=791,6666
[20:16:29] [INFO] [Bullet] Distance to wall: 791,6666 (53,906036% of viewport)
[20:16:29] [INFO] [Bullet] Distance-based penetration chance: 83,7763%
[20:16:29] [INFO] [Bullet] Starting wall penetration at (654.7847, 50.948135)
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (97 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:16:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 27,71847
[20:16:29] [INFO] [Bullet] Body exited signal received for penetrating body
[20:16:29] [INFO] [Bullet] Exiting penetration at (654.6633, 4.281624) after traveling 41,666668 pixels through wall
[20:16:29] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (96 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [INFO] [BloodDecal] Blood puddle created at (224.8171, 619.77) (added to group)
[20:16:29] [INFO] [BloodDecal] Blood puddle created at (328.7951, 592.1426) (added to group)
[20:16:29] [INFO] [BloodDecal] Blood puddle created at (752.9751, 696.858) (added to group)
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (95 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(742.379, 738.0463), source=PLAYER (MakarovPM), range=1469, listeners=9
[20:16:29] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=5
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (94 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (92 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (91 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [INFO] [BloodDecal] Blood puddle created at (268.2311, 674.5076) (added to group)
[20:16:29] [INFO] [BloodDecal] Blood puddle created at (369.2902, 587.4258) (added to group)
[20:16:29] [INFO] [BloodDecal] Blood puddle created at (258.2783, 547.7082) (added to group)
[20:16:29] [INFO] [BloodDecal] Blood puddle created at (788.2054, 702.9216) (added to group)
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (90 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (88 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (87 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [INFO] [BloodDecal] Blood puddle created at (783.9049, 671.6265) (added to group)
[20:16:29] [INFO] [BloodDecal] Blood puddle created at (751.2799, 704.9585) (added to group)
[20:16:29] [INFO] [BloodDecal] Blood puddle created at (762.2731, 744.7108) (added to group)
[20:16:29] [INFO] [BloodDecal] Blood puddle created at (769.8828, 725.5861) (added to group)
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (86 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (85 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (84 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [INFO] [BloodDecal] Blood puddle created at (786.1545, 695.8628) (added to group)
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (83 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(767,766), corner_timer=-0.02
[20:16:29] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (83 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(770,770), corner_timer=0.30
[20:16:29] [INFO] [BloodDecal] Blood puddle created at (804.8448, 757.398) (added to group)
[20:16:29] [INFO] [BloodDecal] Blood puddle created at (819.1209, 785.2395) (added to group)
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (82 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [INFO] [EnemyGrenade] Unsafe throw distance (82 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:29] [INFO] [BloodDecal] Blood puddle created at (772.796, 710.233) (added to group)
[20:16:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(742.379, 738.0463), shooter_id=17811346820301, bullet_pos=(519.0285, 562.6312)
[20:16:29] [INFO] [Bullet] Using shooter_position, distance=283.999816894531
[20:16:29] [INFO] [Bullet] Distance to wall: 283.999816894531 (19.3380697619629% of viewport)
[20:16:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:29] [INFO] [Bullet] Caliber cannot penetrate walls
[20:16:29] [INFO] [BloodDecal] Blood puddle created at (849.8694, 670.0819) (added to group)
[20:16:29] [INFO] [BloodDecal] Blood puddle created at (789.4087, 711.5589) (added to group)
[20:16:29] [INFO] [BloodDecal] Blood puddle created at (832.5686, 698.2334) (added to group)
[20:16:29] [INFO] [BloodDecal] Blood puddle created at (866.8167, 810.2764) (added to group)
[20:16:29] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:16:29] [INFO] [BloodDecal] Blood puddle created at (781.4687, 718.3638) (added to group)
[20:16:29] [INFO] [BloodDecal] Blood puddle created at (805.7261, 722.762) (added to group)
[20:16:29] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:29] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:29] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:16:29] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:16:29] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:16:29] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:29] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:16:29] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:16:29] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:16:29] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:16:29] [ENEMY] [Enemy1] Death animation component initialized
[20:16:29] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:29] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:16:29] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:16:29] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:16:29] [ENEMY] [Enemy2] Death animation component initialized
[20:16:29] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:29] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:16:29] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:16:29] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:16:29] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:29] [ENEMY] [Enemy3] Death animation component initialized
[20:16:29] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:29] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:16:29] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:16:29] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:16:29] [ENEMY] [Enemy4] Death animation component initialized
[20:16:29] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:29] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:16:29] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:16:29] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:16:29] [ENEMY] [Enemy5] Death animation component initialized
[20:16:29] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:29] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:16:29] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:16:29] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:16:29] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:29] [ENEMY] [Enemy6] Death animation component initialized
[20:16:29] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:29] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:16:29] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:16:29] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:16:29] [ENEMY] [Enemy7] Death animation component initialized
[20:16:29] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:29] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:16:29] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:16:29] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:16:29] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:29] [ENEMY] [Enemy8] Death animation component initialized
[20:16:29] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:29] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:16:29] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:16:29] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:16:29] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:29] [ENEMY] [Enemy9] Death animation component initialized
[20:16:29] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:29] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:16:29] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:16:29] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:16:29] [ENEMY] [Enemy10] Death animation component initialized
[20:16:29] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:29] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:16:29] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:16:29] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:16:29] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:16:29] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:16:29] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:16:29] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:16:29] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:16:29] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:16:29] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:16:29] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:16:29] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:16:29] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 2/4
[20:16:29] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:16:29] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:16:29] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:16:29] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:16:29] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:16:29] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:16:29] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:16:29] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:16:29] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:16:29] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:16:29] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:16:29] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:16:29] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:16:29] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:16:29] [INFO] [ScoreManager] Level started with 10 enemies
[20:16:29] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:16:29] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:16:29] [INFO] [ReplayManager] Replay data cleared
[20:16:29] [INFO] [BuildingLevel] Previous replay data cleared
[20:16:29] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:16:29] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:16:29] [INFO] [ReplayManager] Level: BuildingLevel
[20:16:29] [INFO] [ReplayManager] Player: Player (valid: True)
[20:16:29] [INFO] [ReplayManager] Enemies count: 10
[20:16:29] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:16:29] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:16:29] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:16:29] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:16:29] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:16:29] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:16:29] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:16:29] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:16:29] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:16:29] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:16:29] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:16:29] [INFO] [BuildingLevel] Replay recording started successfully
[20:16:29] [INFO] [BloodDecal] Blood puddle created at (870.2084, 742.8045) (added to group)
[20:16:29] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:16:29] [INFO] [CinemaEffects] Found player node: Player
[20:16:29] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:16:29] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[20:16:29] [ENEMY] [Enemy1] Registered as sound listener
[20:16:29] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[20:16:29] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:16:29] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[20:16:29] [ENEMY] [Enemy2] Registered as sound listener
[20:16:29] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[20:16:29] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:16:29] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[20:16:29] [ENEMY] [Enemy3] Registered as sound listener
[20:16:29] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[20:16:29] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:16:29] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[20:16:29] [ENEMY] [Enemy4] Registered as sound listener
[20:16:29] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[20:16:29] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:16:29] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[20:16:29] [ENEMY] [Enemy5] Registered as sound listener
[20:16:29] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[20:16:29] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:16:29] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[20:16:29] [ENEMY] [Enemy6] Registered as sound listener
[20:16:29] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[20:16:29] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:16:29] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[20:16:29] [ENEMY] [Enemy7] Registered as sound listener
[20:16:29] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[20:16:29] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:16:29] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[20:16:29] [ENEMY] [Enemy8] Registered as sound listener
[20:16:29] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[20:16:29] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:16:29] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[20:16:29] [ENEMY] [Enemy9] Registered as sound listener
[20:16:29] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[20:16:29] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:16:29] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[20:16:29] [ENEMY] [Enemy10] Registered as sound listener
[20:16:29] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[20:16:29] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:16:29] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:16:29] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:29] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:29] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:29] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:29] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:29] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:29] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=78.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:29] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:29] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:16:29] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:16:29] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:16:29] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:16:29] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:16:29] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:16:29] [INFO] [LastChance] Found player: Player
[20:16:29] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:16:29] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:16:29] [INFO] [LastChance] Connected to player Died signal (C#)
[20:16:29] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:16:29] [INFO] [BloodDecal] Blood puddle created at (859.2589, 849.315) (added to group)
[20:16:29] [INFO] [BloodDecal] Blood puddle created at (898.6093, 824.1905) (added to group)
[20:16:29] [INFO] [BloodDecal] Blood puddle created at (802.4137, 838.8253) (added to group)
[20:16:30] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:16:31] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:31] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:16:31] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,828), corner_timer=0.30
[20:16:31] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,828), corner_timer=0.30
[20:16:31] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,828), corner_timer=-0.02
[20:16:31] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:31] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,828), corner_timer=-0.02
[20:16:31] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:16:31] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,828), corner_timer=0.30
[20:16:31] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,828), corner_timer=0.30
[20:16:31] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:16:31] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,828), corner_timer=-0.02
[20:16:31] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[20:16:31] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,828), corner_timer=0.30
[20:16:32] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,828), corner_timer=-0.02
[20:16:32] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[20:16:32] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,828), corner_timer=0.30
[20:16:32] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(450,828), corner_timer=-0.02
[20:16:32] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[20:16:32] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(450,828), corner_timer=0.30
[20:16:32] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[20:16:32] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:32] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:16:32] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:16:32] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:16:32] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:32] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:16:32] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:16:32] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:16:32] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:16:32] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:32] [ENEMY] [Enemy1] Death animation component initialized
[20:16:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:32] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:16:32] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:16:32] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:16:32] [ENEMY] [Enemy2] Death animation component initialized
[20:16:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:32] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:16:32] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:16:32] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:16:32] [ENEMY] [Enemy3] Death animation component initialized
[20:16:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:32] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:16:32] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:16:32] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:16:32] [ENEMY] [Enemy4] Death animation component initialized
[20:16:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:32] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:16:32] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:16:32] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:16:32] [ENEMY] [Enemy5] Death animation component initialized
[20:16:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:32] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:16:32] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:16:32] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:16:32] [ENEMY] [Enemy6] Death animation component initialized
[20:16:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:32] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:16:32] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:16:32] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:16:32] [ENEMY] [Enemy7] Death animation component initialized
[20:16:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:32] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:16:32] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:16:32] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:16:32] [ENEMY] [Enemy8] Death animation component initialized
[20:16:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:32] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:16:32] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:16:32] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:16:32] [ENEMY] [Enemy9] Death animation component initialized
[20:16:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:32] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:16:32] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:16:32] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:16:32] [ENEMY] [Enemy10] Death animation component initialized
[20:16:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:32] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:16:32] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:16:32] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:16:32] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:16:32] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:16:32] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:16:32] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:16:32] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:16:32] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:16:32] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:16:32] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:16:32] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:16:32] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 3/4
[20:16:32] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:16:32] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:16:32] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:16:32] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:16:32] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:16:32] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:16:32] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:16:32] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:16:32] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:16:32] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:16:32] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:16:32] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:16:32] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:16:32] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:16:32] [INFO] [ScoreManager] Level started with 10 enemies
[20:16:32] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:16:32] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:16:32] [INFO] [ReplayManager] Replay data cleared
[20:16:32] [INFO] [BuildingLevel] Previous replay data cleared
[20:16:32] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:16:32] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:16:32] [INFO] [ReplayManager] Level: BuildingLevel
[20:16:32] [INFO] [ReplayManager] Player: Player (valid: True)
[20:16:32] [INFO] [ReplayManager] Enemies count: 10
[20:16:32] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:16:32] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:16:32] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:16:32] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:16:32] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:16:32] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:16:32] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:16:32] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:16:32] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:16:32] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:16:32] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:16:32] [INFO] [BuildingLevel] Replay recording started successfully
[20:16:32] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:16:32] [INFO] [CinemaEffects] Found player node: Player
[20:16:32] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:16:32] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 20)
[20:16:32] [ENEMY] [Enemy1] Registered as sound listener
[20:16:32] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[20:16:32] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:16:32] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 21)
[20:16:32] [ENEMY] [Enemy2] Registered as sound listener
[20:16:32] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[20:16:32] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:16:32] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 22)
[20:16:32] [ENEMY] [Enemy3] Registered as sound listener
[20:16:32] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[20:16:32] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:16:32] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 23)
[20:16:32] [ENEMY] [Enemy4] Registered as sound listener
[20:16:32] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[20:16:32] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:16:32] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 24)
[20:16:32] [ENEMY] [Enemy5] Registered as sound listener
[20:16:32] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[20:16:32] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:16:32] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 25)
[20:16:32] [ENEMY] [Enemy6] Registered as sound listener
[20:16:32] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[20:16:32] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:16:32] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 26)
[20:16:32] [ENEMY] [Enemy7] Registered as sound listener
[20:16:32] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[20:16:32] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:16:32] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 27)
[20:16:32] [ENEMY] [Enemy8] Registered as sound listener
[20:16:32] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[20:16:32] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:16:32] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 28)
[20:16:32] [ENEMY] [Enemy9] Registered as sound listener
[20:16:32] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[20:16:32] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:16:32] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 29)
[20:16:32] [ENEMY] [Enemy10] Registered as sound listener
[20:16:32] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[20:16:32] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:16:33] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:16:33] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:33] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:33] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=281.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:33] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:33] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:33] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:33] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:33] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:33] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:16:33] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:16:33] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:16:33] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:16:33] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:16:33] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:16:33] [INFO] [LastChance] Found player: Player
[20:16:33] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:16:33] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:16:33] [INFO] [LastChance] Connected to player Died signal (C#)
[20:16:33] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:16:33] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:16:34] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:34] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:16:34] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,836), corner_timer=0.30
[20:16:34] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,836), corner_timer=0.30
[20:16:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 795.4443), source=PLAYER (MakarovPM), range=1469, listeners=29
[20:16:34] [INFO] [SoundPropagation] Cleaned up 19 invalid listeners
[20:16:34] [ENEMY] [Enemy1] Heard gunshot at (460, 795.4443), source_type=0, intensity=0.01, distance=473
[20:16:34] [ENEMY] [Enemy2] Heard gunshot at (460, 795.4443), source_type=0, intensity=0.04, distance=253
[20:16:34] [ENEMY] [Enemy3] Heard gunshot at (460, 795.4443), source_type=0, intensity=0.04, distance=244
[20:16:34] [ENEMY] [Enemy4] Heard gunshot at (460, 795.4443), source_type=0, intensity=0.02, distance=356
[20:16:34] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:34] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=71.2°, current=-33.8°, player=(450,789), corner_timer=0.00
[20:16:34] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=78.2°, current=-157.5°, player=(450,789), corner_timer=0.00
[20:16:34] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=171.0°, current=-78.7°, player=(450,789), corner_timer=0.00
[20:16:34] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-162.5°, current=168.8°, player=(450,789), corner_timer=0.00
[20:16:34] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,760), corner_timer=-0.02
[20:16:34] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:34] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,760), corner_timer=-0.02
[20:16:34] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:16:34] [ENEMY] [Enemy3] Hit: dmg=1, hp=4/4->3/4
[20:16:34] [INFO] [ImpactEffects] spawn_blood_effect called at (689.4636, 751.6624), dir=(0.990958, -0.13417), lethal=false
[20:16:34] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:34] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:34] [INFO] [ImpactEffects] Blood effect spawned at (689.4636, 751.6624) (scale=0.5)
[20:16:34] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=178.1°, current=172.3°, player=(450,759), corner_timer=0.00
[20:16:34] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,759), corner_timer=0.30
[20:16:34] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,759), corner_timer=0.30
[20:16:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.4636, 751.6624), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:34] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:34] [INFO] [LastChance] Threat detected: Bullet
[20:16:34] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:34] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 762.9444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:34] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:34] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:16:34] [INFO] [Player] Spawning blood effect at (450, 756.9444), dir=(1, 0), lethal=False (C#)
[20:16:34] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 756.9444), dir=(1, 0), lethal=false
[20:16:34] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:34] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:34] [INFO] [ImpactEffects] Blood effect spawned at (450, 756.9444) (scale=1)
[20:16:34] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:16:34] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:16:34] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:16:34] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:16:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(683.0569, 747.1275), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:34] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:35] [INFO] [Player] Stun ended (Issue #592)
[20:16:35] [ENEMY] [Enemy3] Hit: dmg=1, hp=3/4->2/4
[20:16:35] [INFO] [ImpactEffects] spawn_blood_effect called at (676.3596, 738.8253), dir=(0.983892, -0.178764), lethal=false
[20:16:35] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:35] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:35] [INFO] [ImpactEffects] Blood effect spawned at (676.3596, 738.8253) (scale=0.5)
[20:16:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(676.3596, 738.8253), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:35] [INFO] [BloodDecal] Blood puddle created at (742.0052, 753.6111) (added to group)
[20:16:35] [INFO] [LastChance] Threat detected: @Area2D@6844
[20:16:35] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:16:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:35] [INFO] [BloodDecal] Blood puddle created at (754.5575, 725.8439) (added to group)
[20:16:35] [INFO] [BloodDecal] Blood puddle created at (747.5461, 741.6263) (added to group)
[20:16:35] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:16:35] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[20:16:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(669.6624, 730.523), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:35] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[20:16:35] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,756), corner_timer=-0.02
[20:16:35] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[20:16:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 762.9444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:35] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:35] [INFO] [LastChance] Threat detected: @Area2D@6853
[20:16:35] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:16:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:35] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,756), corner_timer=0.30
[20:16:35] [INFO] [BloodDecal] Blood puddle created at (509.6525, 792.308) (added to group)
[20:16:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(662.9651, 722.2208), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:35] [INFO] [LastChance] Threat detected: @Area2D@6864
[20:16:35] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:16:35] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:35] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:16:35] [INFO] [Player] Spawning blood effect at (450, 756.9444), dir=(1, 0), lethal=False (C#)
[20:16:35] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 756.9444), dir=(1, 0), lethal=false
[20:16:35] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:35] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:35] [INFO] [ImpactEffects] Blood effect spawned at (450, 756.9444) (scale=1)
[20:16:35] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:16:35] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:16:35] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:16:35] [INFO] [BloodDecal] Blood puddle created at (494.6773, 752.4899) (added to group)
[20:16:35] [INFO] [BloodDecal] Blood puddle created at (513.3125, 781.7881) (added to group)
[20:16:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(615.84503, 757.76556), shooter_id=20540563654226, bullet_pos=(58.135075, 928.75543)
[20:16:35] [INFO] [Bullet] Using shooter_position, distance=583,3335
[20:16:35] [INFO] [Bullet] Distance to wall: 583,3335 (39,720253% of viewport)
[20:16:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:35] [INFO] [Bullet] Starting wall penetration at (58.135075, 928.75543)
[20:16:35] [INFO] [Bullet] Raycast backward hit penetrating body at distance 19,330832
[20:16:35] [INFO] [Bullet] Body exited signal received for penetrating body
[20:16:35] [INFO] [Bullet] Exiting penetration at (13.518284, 942.43463) after traveling 41,666668 pixels through wall
[20:16:35] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:16:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(597.50134, 740.79755), shooter_id=20540563654226, bullet_pos=(348.7915, 715.4312)
[20:16:35] [INFO] [Bullet] Using shooter_position, distance=250,00006
[20:16:35] [INFO] [Bullet] Distance to wall: 250,00006 (17,022964% of viewport)
[20:16:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:35] [INFO] [Bullet] Starting wall penetration at (348.7915, 715.4312)
[20:16:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(609.9842, 751.95355), shooter_id=20540563654226, bullet_pos=(39.624306, 874.2946)
[20:16:35] [INFO] [Bullet] Using shooter_position, distance=583,3333
[20:16:35] [INFO] [Bullet] Distance to wall: 583,3333 (39,72024% of viewport)
[20:16:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:35] [INFO] [Bullet] Starting wall penetration at (39.624306, 874.2946)
[20:16:35] [INFO] [Bullet] Raycast backward hit penetrating body at distance 38,86895
[20:16:35] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:16:35] [INFO] [Bullet] Exiting penetration at (302.3657, 710.69617) after traveling 41,666668 pixels through wall
[20:16:35] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:16:35] [INFO] [BloodDecal] Blood puddle created at (758.8535, 776.9373) (added to group)
[20:16:35] [INFO] [BloodDecal] Blood puddle created at (537.7474, 764.0109) (added to group)
[20:16:35] [INFO] [BloodDecal] Blood puddle created at (722.5914, 757.5574) (added to group)
[20:16:35] [INFO] [Bullet] Body exited signal received for penetrating body
[20:16:35] [INFO] [Bullet] Exiting penetration at (-6.0044937, 884.0819) after traveling 41,66667 pixels through wall
[20:16:35] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:16:35] [INFO] [Player] Stun ended (Issue #592)
[20:16:35] [INFO] [BloodDecal] Blood puddle created at (826.4915, 845.8944) (added to group)
[20:16:35] [INFO] [BloodDecal] Blood puddle created at (818.8904, 772.3542) (added to group)
[20:16:35] [INFO] [BloodDecal] Blood puddle created at (558.1039, 751.3091) (added to group)
[20:16:35] [INFO] [BloodDecal] Blood puddle created at (591.5511, 785.2137) (added to group)
[20:16:35] [INFO] [BloodDecal] Blood puddle created at (740.197, 709.7894) (added to group)
[20:16:35] [INFO] [BloodDecal] Blood puddle created at (593.2226, 788.4869) (added to group)
[20:16:35] [INFO] [BloodDecal] Blood puddle created at (759.8961, 768.4435) (added to group)
[20:16:35] [INFO] [BloodDecal] Blood puddle created at (770.2535, 707.7169) (added to group)
[20:16:35] [INFO] [BloodDecal] Blood puddle created at (525.3945, 735.1764) (added to group)
[20:16:35] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,756), corner_timer=-0.02
[20:16:35] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[20:16:35] [INFO] [BloodDecal] Blood puddle created at (850.5721, 859.6254) (added to group)
[20:16:35] [INFO] [BloodDecal] Blood puddle created at (850.4714, 787.9072) (added to group)
[20:16:35] [INFO] [BloodDecal] Blood puddle created at (757.4924, 750.2372) (added to group)
[20:16:35] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,756), corner_timer=0.30
[20:16:35] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[20:16:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(604.3651, 649.5771), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:35] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[20:16:35] [INFO] [BloodDecal] Blood puddle created at (764.1867, 771.1354) (added to group)
[20:16:35] [INFO] [BloodDecal] Blood puddle created at (745.1473, 775.8197) (added to group)
[20:16:35] [INFO] [LastChance] Threat detected: Bullet
[20:16:35] [INFO] [LastChance] Triggering last chance effect!
[20:16:35] [INFO] [LastChance] Starting last chance effect:
[20:16:35] [INFO] [LastChance]   - Time will be frozen (except player)
[20:16:35] [INFO] [LastChance]   - Duration: 6.00 real seconds
[20:16:35] [INFO] [LastChance]   - Trigger: threat detected
[20:16:35] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:16:35] [INFO] [LastChance]   - Brightness: 0.60
[20:16:35] [INFO] [LastChance] Pushed bullet Bullet from distance 120.7 to 200.0
[20:16:35] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[20:16:35] [INFO] [LastChance] Set player Player and all 26 children to PROCESS_MODE_ALWAYS
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:16:35] [INFO] [LastChance] Skipping player node: Player
[20:16:35] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:16:35] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@6835
[20:16:35] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@6837
[20:16:35] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@6857
[20:16:35] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@6896
[20:16:35] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:16:35] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:16:35] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:16:35] [INFO] [BloodDecal] Blood puddle created at (775.0573, 812.0431) (added to group)
[20:16:35] [INFO] [BloodDecal] Blood puddle created at (781.6491, 761.4063) (added to group)
[20:16:35] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:35] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:16:35] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:16:35] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:16:35] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:35] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:16:35] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:16:35] [INFO] [LastChance] All process modes restored
[20:16:35] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:16:35] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:16:35] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:16:35] [ENEMY] [Enemy1] Death animation component initialized
[20:16:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:35] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:16:35] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:16:35] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:16:35] [ENEMY] [Enemy2] Death animation component initialized
[20:16:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:35] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:16:35] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:16:35] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:16:35] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:35] [ENEMY] [Enemy3] Death animation component initialized
[20:16:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:35] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:16:35] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:16:35] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:16:35] [ENEMY] [Enemy4] Death animation component initialized
[20:16:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:35] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:16:35] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:16:35] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:16:35] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:35] [ENEMY] [Enemy5] Death animation component initialized
[20:16:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:35] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:16:35] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:16:35] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:16:35] [ENEMY] [Enemy6] Death animation component initialized
[20:16:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:35] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:16:35] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:16:35] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:16:35] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:35] [ENEMY] [Enemy7] Death animation component initialized
[20:16:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:35] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:16:35] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:16:35] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:16:35] [ENEMY] [Enemy8] Death animation component initialized
[20:16:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:35] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:16:35] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:16:35] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:16:35] [ENEMY] [Enemy9] Death animation component initialized
[20:16:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:35] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:16:35] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:16:35] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:16:35] [ENEMY] [Enemy10] Death animation component initialized
[20:16:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:35] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:16:35] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:16:35] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:16:35] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:16:35] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:16:35] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:16:35] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:16:35] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:16:35] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:16:35] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:16:35] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:16:35] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:16:35] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 2/4
[20:16:35] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:16:35] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:16:35] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:16:35] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:16:35] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:16:35] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:16:35] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:16:35] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:16:35] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:16:35] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:16:35] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:16:35] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:16:35] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:16:35] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:16:35] [INFO] [ScoreManager] Level started with 10 enemies
[20:16:35] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:16:35] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:16:35] [INFO] [ReplayManager] Replay data cleared
[20:16:35] [INFO] [BuildingLevel] Previous replay data cleared
[20:16:35] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:16:35] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:16:35] [INFO] [ReplayManager] Level: BuildingLevel
[20:16:35] [INFO] [ReplayManager] Player: Player (valid: True)
[20:16:35] [INFO] [ReplayManager] Enemies count: 10
[20:16:35] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:16:35] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:16:35] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:16:35] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:16:35] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:16:35] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:16:35] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:16:35] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:16:35] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:16:35] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:16:35] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:16:35] [INFO] [BuildingLevel] Replay recording started successfully
[20:16:35] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:16:35] [INFO] [CinemaEffects] Found player node: Player
[20:16:35] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:16:35] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:16:35] [ENEMY] [Enemy1] Registered as sound listener
[20:16:35] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[20:16:35] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:16:35] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:16:35] [ENEMY] [Enemy2] Registered as sound listener
[20:16:35] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[20:16:35] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:16:35] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:16:35] [ENEMY] [Enemy3] Registered as sound listener
[20:16:35] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[20:16:35] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:16:35] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:16:35] [ENEMY] [Enemy4] Registered as sound listener
[20:16:35] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[20:16:35] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:16:35] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:16:35] [ENEMY] [Enemy5] Registered as sound listener
[20:16:35] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[20:16:35] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:16:35] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:16:35] [ENEMY] [Enemy6] Registered as sound listener
[20:16:35] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[20:16:35] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:16:35] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:16:35] [ENEMY] [Enemy7] Registered as sound listener
[20:16:35] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[20:16:35] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:16:35] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:16:35] [ENEMY] [Enemy8] Registered as sound listener
[20:16:35] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[20:16:35] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:16:35] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:16:35] [ENEMY] [Enemy9] Registered as sound listener
[20:16:35] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[20:16:35] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:16:35] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:16:35] [ENEMY] [Enemy10] Registered as sound listener
[20:16:35] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[20:16:35] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:16:35] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:16:35] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:35] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:35] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=281.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:35] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:35] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:35] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=225.0°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:35] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:35] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:35] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:16:35] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:16:35] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:16:35] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:16:35] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:16:35] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:16:35] [INFO] [LastChance] Found player: Player
[20:16:35] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:16:35] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:16:35] [INFO] [LastChance] Connected to player Died signal (C#)
[20:16:35] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:16:35] [INFO] [BloodDecal] Blood puddle created at (849.9985, 765.0366) (added to group)
[20:16:35] [INFO] [BloodDecal] Blood puddle created at (580.2008, 772.9977) (added to group)
[20:16:35] [INFO] [BloodDecal] Blood puddle created at (656.3287, 839.4694) (added to group)
[20:16:35] [INFO] [BloodDecal] Blood puddle created at (555.6007, 810.9269) (added to group)
[20:16:36] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:16:37] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:37] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:16:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 791.3333), source=PLAYER (MakarovPM), range=1469, listeners=20
[20:16:37] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:16:37] [ENEMY] [Enemy1] Heard gunshot at (460, 791.3333), source_type=0, intensity=0.01, distance=469
[20:16:37] [ENEMY] [Enemy2] Heard gunshot at (460, 791.3333), source_type=0, intensity=0.04, distance=249
[20:16:37] [ENEMY] [Enemy3] Heard gunshot at (460, 791.3333), source_type=0, intensity=0.04, distance=244
[20:16:37] [ENEMY] [Enemy4] Heard gunshot at (460, 791.3333), source_type=0, intensity=0.02, distance=357
[20:16:37] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:37] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=71.0°, current=-157.5°, player=(450,785), corner_timer=0.00
[20:16:37] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=78.0°, current=-101.3°, player=(450,785), corner_timer=0.00
[20:16:37] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=172.0°, current=-78.7°, player=(450,785), corner_timer=0.00
[20:16:37] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-161.9°, current=168.8°, player=(450,785), corner_timer=0.00
[20:16:37] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,785), corner_timer=0.30
[20:16:37] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,785), corner_timer=0.30
[20:16:37] [ENEMY] [Enemy3] Hit: dmg=1, hp=3/3->2/3
[20:16:37] [INFO] [ImpactEffects] spawn_blood_effect called at (689.4384, 751.4927), dir=(0.991759, -0.128113), lethal=false
[20:16:37] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:37] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:37] [INFO] [ImpactEffects] Blood effect spawned at (689.4384, 751.4927) (scale=0.5)
[20:16:37] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=178.3°, current=172.6°, player=(450,758), corner_timer=0.00
[20:16:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.4384, 751.4927), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:37] [INFO] [LastChance] Threat detected: Bullet
[20:16:37] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 762.9444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:37] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:37] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:16:37] [INFO] [Player] Spawning blood effect at (450, 756.9444), dir=(1, 0), lethal=False (C#)
[20:16:37] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 756.9444), dir=(1, 0), lethal=false
[20:16:37] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:37] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:37] [INFO] [ImpactEffects] Blood effect spawned at (450, 756.9444) (scale=1)
[20:16:37] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:16:37] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:16:37] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:16:37] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:16:37] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,756), corner_timer=-0.02
[20:16:37] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:37] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,756), corner_timer=-0.02
[20:16:37] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:16:37] [INFO] [EnemyGrenade] Unsafe throw distance (119 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:37] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,756), corner_timer=0.30
[20:16:37] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,756), corner_timer=0.30
[20:16:37] [INFO] [EnemyGrenade] Unsafe throw distance (118 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:37] [INFO] [EnemyGrenade] Unsafe throw distance (117 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(683.6951, 746.1395), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:37] [INFO] [EnemyGrenade] Unsafe throw distance (116 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:16:37] [INFO] [LastChance] Threat detected: Bullet
[20:16:37] [INFO] [LastChance] Triggering last chance effect!
[20:16:37] [INFO] [LastChance] Starting last chance effect:
[20:16:37] [INFO] [LastChance]   - Time will be frozen (except player)
[20:16:37] [INFO] [LastChance]   - Duration: 6.00 real seconds
[20:16:37] [INFO] [LastChance]   - Trigger: threat detected
[20:16:37] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:16:37] [INFO] [LastChance]   - Brightness: 0.60
[20:16:37] [INFO] [LastChance] Pushed bullet Bullet from distance 125.7 to 200.0
[20:16:37] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[20:16:37] [INFO] [LastChance] Set player Player and all 26 children to PROCESS_MODE_ALWAYS
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:16:37] [INFO] [LastChance] Skipping player node: Player
[20:16:37] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:16:37] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@7158
[20:16:37] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@7160
[20:16:37] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:16:37] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:16:37] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:16:37] [INFO] [Player] Stun ended (Issue #592)
[20:16:37] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:16:37] [INFO] [BloodDecal] Blood puddle created at (772.1438, 746.0408) (added to group)
[20:16:37] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@7164
[20:16:37] [INFO] [LastChance] Registered frozen player bullet: @Area2D@7164
[20:16:37] [INFO] [LastChance] Freezing newly created explosion effect: PointLight2D
[20:16:37] [INFO] [LastChance] Registered frozen explosion effect: PointLight2D
[20:16:37] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@7165
[20:16:37] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@7165
[20:16:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 762.9444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:37] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:37] [INFO] [BloodDecal] Blood puddle created at (796.8911, 827.7324) (added to group)
[20:16:37] [INFO] [BloodDecal] Blood puddle created at (778.2065, 764.8507) (added to group)
[20:16:37] [INFO] [BloodDecal] Blood puddle created at (843.1025, 759.1008) (added to group)
[20:16:37] [INFO] [BloodDecal] Blood puddle created at (557.7164, 762.2346) (added to group)
[20:16:37] [INFO] [BloodDecal] Blood puddle created at (839.5523, 862.0432) (added to group)
[20:16:37] [INFO] [BloodDecal] Blood puddle created at (861.3149, 733.3766) (added to group)
[20:16:37] [INFO] [BloodDecal] Blood puddle created at (872.9978, 790.1443) (added to group)
[20:16:37] [INFO] [BloodDecal] Blood puddle created at (852.8403, 813.7039) (added to group)
[20:16:38] [INFO] [BloodDecal] Blood puddle created at (789.3698, 793.3964) (added to group)
[20:16:38] [INFO] [BloodDecal] Blood puddle created at (589.5968, 784.3312) (added to group)
[20:16:38] [INFO] [BloodDecal] Blood puddle created at (660.1445, 865.5129) (added to group)
[20:16:38] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:38] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:16:38] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:16:38] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:16:38] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:38] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:16:38] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:16:38] [INFO] [LastChance] All process modes restored
[20:16:38] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:16:38] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:16:38] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:16:38] [ENEMY] [Enemy1] Death animation component initialized
[20:16:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:38] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:16:38] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:16:38] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:16:38] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:38] [ENEMY] [Enemy2] Death animation component initialized
[20:16:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:38] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:16:38] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:16:38] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:16:38] [ENEMY] [Enemy3] Death animation component initialized
[20:16:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:38] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:16:38] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:16:38] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:16:38] [ENEMY] [Enemy4] Death animation component initialized
[20:16:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:38] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:16:38] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:16:38] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:16:38] [ENEMY] [Enemy5] Death animation component initialized
[20:16:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:38] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:16:38] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:16:38] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:16:38] [ENEMY] [Enemy6] Death animation component initialized
[20:16:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:38] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:16:38] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:16:38] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:16:38] [ENEMY] [Enemy7] Death animation component initialized
[20:16:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:38] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:16:38] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:16:38] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:16:38] [ENEMY] [Enemy8] Death animation component initialized
[20:16:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:38] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:16:38] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:16:38] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:16:38] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:38] [ENEMY] [Enemy9] Death animation component initialized
[20:16:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:38] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:16:38] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:16:38] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:16:38] [ENEMY] [Enemy10] Death animation component initialized
[20:16:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:38] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:16:38] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:16:38] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:16:38] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:16:38] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:16:38] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:16:38] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:16:38] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:16:38] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:16:38] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:16:38] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:16:38] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:16:38] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 3/4
[20:16:38] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:16:38] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:16:38] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:16:38] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:16:38] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:16:38] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:16:38] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:16:38] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:16:38] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:16:38] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:16:38] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:16:38] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:16:38] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:16:38] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:16:38] [INFO] [ScoreManager] Level started with 10 enemies
[20:16:38] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:16:38] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:16:38] [INFO] [ReplayManager] Replay data cleared
[20:16:38] [INFO] [BuildingLevel] Previous replay data cleared
[20:16:38] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:16:38] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:16:38] [INFO] [ReplayManager] Level: BuildingLevel
[20:16:38] [INFO] [ReplayManager] Player: Player (valid: True)
[20:16:38] [INFO] [ReplayManager] Enemies count: 10
[20:16:38] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:16:38] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:16:38] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:16:38] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:16:38] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:16:38] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:16:38] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:16:38] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:16:38] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:16:38] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:16:38] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:16:38] [INFO] [BuildingLevel] Replay recording started successfully
[20:16:38] [INFO] [BloodDecal] Blood puddle created at (655.2791, 775.114) (added to group)
[20:16:38] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:16:38] [INFO] [CinemaEffects] Found player node: Player
[20:16:38] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:16:38] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:16:38] [ENEMY] [Enemy1] Registered as sound listener
[20:16:38] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[20:16:38] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:16:38] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:16:38] [ENEMY] [Enemy2] Registered as sound listener
[20:16:38] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[20:16:38] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:16:38] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:16:38] [ENEMY] [Enemy3] Registered as sound listener
[20:16:38] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[20:16:38] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:16:38] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:16:38] [ENEMY] [Enemy4] Registered as sound listener
[20:16:38] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[20:16:38] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:16:38] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:16:38] [ENEMY] [Enemy5] Registered as sound listener
[20:16:38] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[20:16:38] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:16:38] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:16:38] [ENEMY] [Enemy6] Registered as sound listener
[20:16:38] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[20:16:38] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:16:38] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:16:38] [ENEMY] [Enemy7] Registered as sound listener
[20:16:38] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[20:16:38] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:16:38] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:16:38] [ENEMY] [Enemy8] Registered as sound listener
[20:16:38] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[20:16:38] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:16:38] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:16:38] [ENEMY] [Enemy9] Registered as sound listener
[20:16:38] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[20:16:38] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:16:38] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:16:38] [ENEMY] [Enemy10] Registered as sound listener
[20:16:38] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[20:16:38] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:16:38] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:16:38] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:38] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:38] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=236.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:38] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:38] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:38] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:38] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:38] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:38] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:16:38] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:16:38] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:16:38] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:16:38] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:16:38] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:16:38] [INFO] [LastChance] Found player: Player
[20:16:38] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:16:38] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:16:38] [INFO] [LastChance] Connected to player Died signal (C#)
[20:16:38] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:16:38] [INFO] [BloodDecal] Blood puddle created at (627.8058, 857.7151) (added to group)
[20:16:39] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:16:39] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:39] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:16:39] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,814), corner_timer=0.30
[20:16:39] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,814), corner_timer=0.30
[20:16:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 802.3333), source=PLAYER (MakarovPM), range=1469, listeners=20
[20:16:39] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:16:39] [ENEMY] [Enemy1] Heard gunshot at (460, 802.3333), source_type=0, intensity=0.01, distance=480
[20:16:39] [ENEMY] [Enemy2] Heard gunshot at (460, 802.3333), source_type=0, intensity=0.04, distance=259
[20:16:39] [ENEMY] [Enemy3] Heard gunshot at (460, 802.3333), source_type=0, intensity=0.04, distance=246
[20:16:39] [ENEMY] [Enemy4] Heard gunshot at (460, 802.3333), source_type=0, intensity=0.02, distance=354
[20:16:39] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:39] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=71.4°, current=-157.5°, player=(450,796), corner_timer=0.00
[20:16:39] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=78.5°, current=-67.5°, player=(450,796), corner_timer=0.00
[20:16:39] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=169.5°, current=-123.8°, player=(450,796), corner_timer=0.00
[20:16:39] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-163.5°, current=168.8°, player=(450,796), corner_timer=0.00
[20:16:39] [ENEMY] [Enemy3] Hit: dmg=1, hp=3/3->2/3
[20:16:39] [INFO] [ImpactEffects] spawn_blood_effect called at (689.512, 751.9437), dir=(0.988971, -0.148108), lethal=false
[20:16:39] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:39] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:39] [INFO] [ImpactEffects] Blood effect spawned at (689.512, 751.9437) (scale=0.5)
[20:16:39] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=175.8°, current=171.5°, player=(450,769), corner_timer=0.00
[20:16:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.512, 751.9437), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:40] [INFO] [LastChance] Threat detected: Bullet
[20:16:40] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:40] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,767), corner_timer=-0.02
[20:16:40] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:40] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,767), corner_timer=-0.02
[20:16:40] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:16:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 773.9444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:40] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:40] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,767), corner_timer=0.30
[20:16:40] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,767), corner_timer=0.30
[20:16:40] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:16:40] [INFO] [Player] Spawning blood effect at (450, 767.9444), dir=(1, 0), lethal=False (C#)
[20:16:40] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 767.9444), dir=(1, 0), lethal=false
[20:16:40] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:40] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:40] [INFO] [ImpactEffects] Blood effect spawned at (450, 767.9444) (scale=1)
[20:16:40] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:16:40] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:16:40] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:16:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(682.4832, 748.4453), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:40] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:16:40] [INFO] [Player] Stun ended (Issue #592)
[20:16:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(615.7716, 761.868), shooter_id=22170671516231, bullet_pos=(496.75253, 800.0709)
[20:16:40] [INFO] [Bullet] Using shooter_position, distance=125,00002
[20:16:40] [INFO] [Bullet] Distance to wall: 125,00002 (8,511481% of viewport)
[20:16:40] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:40] [INFO] [Bullet] Starting wall penetration at (496.75253, 800.0709)
[20:16:40] [ENEMY] [Enemy3] Hit: dmg=1, hp=2/3->1/3
[20:16:40] [INFO] [ImpactEffects] spawn_blood_effect called at (673.6653, 742.4433), dir=(0.983639, -0.180153), lethal=false
[20:16:40] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:40] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:40] [INFO] [ImpactEffects] Blood effect spawned at (673.6653, 742.4433) (scale=0.5)
[20:16:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(673.6653, 742.4433), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:40] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[20:16:40] [INFO] [Bullet] Exiting penetration at (452.31876, 814.3334) after traveling 41,666668 pixels through wall
[20:16:40] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:16:40] [INFO] [LastChance] Threat detected: @Area2D@7440
[20:16:40] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:16:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 773.9444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:40] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:40] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:16:40] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[20:16:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(664.8474, 736.4413), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:40] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[20:16:40] [INFO] [LastChance] Threat detected: Bullet
[20:16:40] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:16:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:40] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:16:40] [INFO] [Player] Spawning blood effect at (450, 767.9444), dir=(1, 0), lethal=False (C#)
[20:16:40] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 767.9444), dir=(1, 0), lethal=false
[20:16:40] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:40] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:40] [INFO] [ImpactEffects] Blood effect spawned at (450, 767.9444) (scale=1)
[20:16:40] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:16:40] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:16:40] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:16:40] [INFO] [BloodDecal] Blood puddle created at (744.651, 771.5042) (added to group)
[20:16:40] [INFO] [BloodDecal] Blood puddle created at (806.3936, 792.8823) (added to group)
[20:16:40] [INFO] [BloodDecal] Blood puddle created at (519.1535, 758.6399) (added to group)
[20:16:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(656.0295, 730.4394), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:40] [INFO] [LastChance] Threat detected: @Area2D@7461
[20:16:40] [INFO] [LastChance] Triggering last chance effect!
[20:16:40] [INFO] [LastChance] Starting last chance effect:
[20:16:40] [INFO] [LastChance]   - Time will be frozen (except player)
[20:16:40] [INFO] [LastChance]   - Duration: 6.00 real seconds
[20:16:40] [INFO] [LastChance]   - Trigger: threat detected
[20:16:40] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:16:40] [INFO] [LastChance]   - Brightness: 0.60
[20:16:40] [INFO] [LastChance] Pushed bullet Bullet9mm from distance 142.5 to 200.0
[20:16:40] [INFO] [LastChance] Pushed bullet Bullet from distance 17.4 to 200.0
[20:16:40] [INFO] [LastChance] Pushed bullet @Area2D@7461 from distance 142.0 to 200.0
[20:16:40] [INFO] [LastChance] Pushed 3 threatening bullets away from player
[20:16:40] [INFO] [LastChance] Set player Player and all 26 children to PROCESS_MODE_ALWAYS
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:16:40] [INFO] [LastChance] Skipping player node: Player
[20:16:40] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:16:40] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@7433
[20:16:40] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@7435
[20:16:40] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@7447
[20:16:40] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:16:40] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:16:40] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:16:40] [INFO] [BloodDecal] Blood puddle created at (832.1003, 794.8359) (added to group)
[20:16:40] [INFO] [BloodDecal] Blood puddle created at (815.7726, 800.0688) (added to group)
[20:16:40] [INFO] [BloodDecal] Blood puddle created at (516.6794, 770.136) (added to group)
[20:16:40] [INFO] [BloodDecal] Blood puddle created at (562.1519, 781.7939) (added to group)
[20:16:40] [INFO] [Player] Stun ended (Issue #592)
[20:16:40] [INFO] [BloodDecal] Blood puddle created at (810.8833, 842.3489) (added to group)
[20:16:40] [INFO] [BloodDecal] Blood puddle created at (838.5199, 775.6542) (added to group)
[20:16:40] [INFO] [BloodDecal] Blood puddle created at (721.5455, 775.1822) (added to group)
[20:16:40] [INFO] [BloodDecal] Blood puddle created at (745.0756, 767.4205) (added to group)
[20:16:40] [INFO] [BloodDecal] Blood puddle created at (743.0925, 754.2456) (added to group)
[20:16:40] [INFO] [BloodDecal] Blood puddle created at (523.4312, 790.097) (added to group)
[20:16:40] [INFO] [BloodDecal] Blood puddle created at (604.8746, 765.4485) (added to group)
[20:16:40] [INFO] [BloodDecal] Blood puddle created at (781.3287, 802.0659) (added to group)
[20:16:40] [INFO] [BloodDecal] Blood puddle created at (799.7005, 781.1136) (added to group)
[20:16:40] [INFO] [BloodDecal] Blood puddle created at (843.629, 764.299) (added to group)
[20:16:40] [INFO] [BloodDecal] Blood puddle created at (874.4008, 782.2054) (added to group)
[20:16:40] [INFO] [BloodDecal] Blood puddle created at (879.9397, 780.1923) (added to group)
[20:16:40] [INFO] [BloodDecal] Blood puddle created at (551.1854, 784.1634) (added to group)
[20:16:40] [INFO] [BloodDecal] Blood puddle created at (545.5649, 801.2603) (added to group)
[20:16:40] [INFO] [BloodDecal] Blood puddle created at (510.4832, 792.1788) (added to group)
[20:16:40] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@7487
[20:16:40] [INFO] [LastChance] Registered frozen player bullet: @Area2D@7487
[20:16:40] [INFO] [LastChance] Freezing newly created explosion effect: PointLight2D
[20:16:40] [INFO] [LastChance] Registered frozen explosion effect: PointLight2D
[20:16:40] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@7488
[20:16:40] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@7488
[20:16:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 773.9444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:40] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:40] [INFO] [BloodDecal] Blood puddle created at (819.7772, 767.7928) (added to group)
[20:16:40] [INFO] [BloodDecal] Blood puddle created at (540.3488, 788.0817) (added to group)
[20:16:40] [INFO] [BloodDecal] Blood puddle created at (782.7995, 820.4225) (added to group)
[20:16:40] [INFO] [BloodDecal] Blood puddle created at (847.0602, 856.8959) (added to group)
[20:16:40] [INFO] [BloodDecal] Blood puddle created at (905.7099, 895.3553) (added to group)
[20:16:40] [INFO] [BloodDecal] Blood puddle created at (675.8058, 860.6449) (added to group)
[20:16:41] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:41] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:16:41] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:16:41] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:16:41] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:41] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:16:41] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:16:41] [INFO] [LastChance] All process modes restored
[20:16:41] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:16:41] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:16:41] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:16:41] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:41] [ENEMY] [Enemy1] Death animation component initialized
[20:16:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:41] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:16:41] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:16:41] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:16:41] [ENEMY] [Enemy2] Death animation component initialized
[20:16:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:41] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:16:41] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:16:41] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:16:41] [ENEMY] [Enemy3] Death animation component initialized
[20:16:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:41] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:16:41] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:16:41] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:16:41] [ENEMY] [Enemy4] Death animation component initialized
[20:16:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:41] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:16:41] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:16:41] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:16:41] [ENEMY] [Enemy5] Death animation component initialized
[20:16:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:41] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:16:41] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:16:41] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:16:41] [ENEMY] [Enemy6] Death animation component initialized
[20:16:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:41] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:16:41] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:16:41] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:16:41] [ENEMY] [Enemy7] Death animation component initialized
[20:16:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:41] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:16:41] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:16:41] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:16:41] [ENEMY] [Enemy8] Death animation component initialized
[20:16:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:41] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:16:41] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:16:41] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:16:41] [ENEMY] [Enemy9] Death animation component initialized
[20:16:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:41] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:16:41] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:16:41] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:16:41] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:41] [ENEMY] [Enemy10] Death animation component initialized
[20:16:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:41] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:16:41] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:16:41] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:16:41] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:16:41] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:16:41] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:16:41] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:16:41] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:16:41] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:16:41] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:16:41] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:16:41] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:16:41] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 4/4
[20:16:41] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:16:41] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:16:41] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:16:41] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:16:41] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:16:41] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:16:41] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:16:41] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:16:41] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:16:41] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:16:41] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:16:41] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:16:41] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:16:41] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:16:41] [INFO] [ScoreManager] Level started with 10 enemies
[20:16:41] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:16:41] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:16:41] [INFO] [ReplayManager] Replay data cleared
[20:16:41] [INFO] [BuildingLevel] Previous replay data cleared
[20:16:41] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:16:41] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:16:41] [INFO] [ReplayManager] Level: BuildingLevel
[20:16:41] [INFO] [ReplayManager] Player: Player (valid: True)
[20:16:41] [INFO] [ReplayManager] Enemies count: 10
[20:16:41] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:16:41] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:16:41] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:16:41] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:16:41] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:16:41] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:16:41] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:16:41] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:16:41] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:16:41] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:16:41] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:16:41] [INFO] [BuildingLevel] Replay recording started successfully
[20:16:41] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:16:41] [INFO] [CinemaEffects] Found player node: Player
[20:16:41] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:16:41] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:16:41] [ENEMY] [Enemy1] Registered as sound listener
[20:16:41] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[20:16:41] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:16:41] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:16:41] [ENEMY] [Enemy2] Registered as sound listener
[20:16:41] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[20:16:41] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:16:41] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:16:41] [ENEMY] [Enemy3] Registered as sound listener
[20:16:41] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[20:16:41] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:16:41] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:16:41] [ENEMY] [Enemy4] Registered as sound listener
[20:16:41] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[20:16:41] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:16:41] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:16:41] [ENEMY] [Enemy5] Registered as sound listener
[20:16:41] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[20:16:41] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:16:41] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:16:41] [ENEMY] [Enemy6] Registered as sound listener
[20:16:41] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[20:16:41] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:16:41] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:16:41] [ENEMY] [Enemy7] Registered as sound listener
[20:16:41] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[20:16:41] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:16:41] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:16:41] [ENEMY] [Enemy8] Registered as sound listener
[20:16:41] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[20:16:41] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:16:41] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:16:41] [ENEMY] [Enemy9] Registered as sound listener
[20:16:41] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[20:16:41] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:16:41] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:16:41] [ENEMY] [Enemy10] Registered as sound listener
[20:16:41] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[20:16:41] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:16:41] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:16:41] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:41] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:41] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:41] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:41] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:41] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:41] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=78.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:41] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:41] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:16:41] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:16:41] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:16:41] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:16:41] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:16:41] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:16:41] [INFO] [LastChance] Found player: Player
[20:16:41] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:16:41] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:16:41] [INFO] [LastChance] Connected to player Died signal (C#)
[20:16:41] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:16:42] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:16:42] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:42] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:16:42] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,863), corner_timer=0.30
[20:16:42] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,863), corner_timer=0.30
[20:16:42] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=164.3°, current=123.7°, player=(450,820), corner_timer=0.00
[20:16:42] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:16:42] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=166.2°, current=-65.3°, player=(450,811), corner_timer=0.00
[20:16:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 796.9444), source=PLAYER (MakarovPM), range=1469, listeners=20
[20:16:42] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:16:42] [ENEMY] [Enemy1] Heard gunshot at (460, 796.9444), source_type=0, intensity=0.01, distance=475
[20:16:42] [ENEMY] [Enemy2] Heard gunshot at (460, 796.9444), source_type=0, intensity=0.04, distance=254
[20:16:42] [ENEMY] [Enemy4] Heard gunshot at (460, 796.9444), source_type=0, intensity=0.02, distance=355
[20:16:42] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:43] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=71.2°, current=-157.5°, player=(450,790), corner_timer=0.00
[20:16:43] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=78.3°, current=-101.3°, player=(450,790), corner_timer=0.00
[20:16:43] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-162.7°, current=-101.3°, player=(450,790), corner_timer=0.00
[20:16:43] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,784), corner_timer=-0.02
[20:16:43] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:43] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,784), corner_timer=-0.02
[20:16:43] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:16:43] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,782), corner_timer=0.30
[20:16:43] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,782), corner_timer=0.30
[20:16:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 784.9444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:43] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:43] [ENEMY] [Enemy3] Hit: dmg=1, hp=3/3->2/3
[20:16:43] [INFO] [ImpactEffects] spawn_blood_effect called at (684.4832, 753.9004), dir=(0.970005, -0.243085), lethal=false
[20:16:43] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:43] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:43] [INFO] [ImpactEffects] Blood effect spawned at (684.4832, 753.9004) (scale=0.5)
[20:16:43] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:16:43] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=173.9°, current=165.9°, player=(450,778), corner_timer=0.00
[20:16:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4832, 753.9004), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:43] [INFO] [LastChance] Threat detected: Bullet
[20:16:43] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:43] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:16:43] [INFO] [Player] Spawning blood effect at (450, 778.9444), dir=(1, 0), lethal=False (C#)
[20:16:43] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 778.9444), dir=(1, 0), lethal=false
[20:16:43] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:43] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:43] [INFO] [ImpactEffects] Blood effect spawned at (450, 778.9444) (scale=1)
[20:16:43] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:16:43] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:16:43] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:16:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(677.9207, 758.4756), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:43] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,778), corner_timer=-0.02
[20:16:43] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[20:16:43] [INFO] [LastChance] Threat detected: Bullet
[20:16:43] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:16:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:43] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,778), corner_timer=0.30
[20:16:43] [INFO] [Player] Stun ended (Issue #592)
[20:16:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 784.9444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:43] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(669.1707, 764.576), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:43] [INFO] [LastChance] Threat detected: @Area2D@7758
[20:16:43] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:16:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:43] [INFO] [BloodDecal] Blood puddle created at (766.0531, 734.4387) (added to group)
[20:16:43] [INFO] [BloodDecal] Blood puddle created at (759.3049, 767.1489) (added to group)
[20:16:43] [INFO] [BloodDecal] Blood puddle created at (750.588, 742.7779) (added to group)
[20:16:43] [INFO] [BloodDecal] Blood puddle created at (758.2538, 750.4511) (added to group)
[20:16:43] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:16:43] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[20:16:43] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[20:16:43] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:16:43] [INFO] [Player] Spawning blood effect at (450, 778.9444), dir=(1, 0), lethal=False (C#)
[20:16:43] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 778.9444), dir=(1, 0), lethal=false
[20:16:43] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:43] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:43] [INFO] [ImpactEffects] Blood effect spawned at (450, 778.9444) (scale=1)
[20:16:43] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:16:43] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:16:43] [INFO] [BloodDecal] Blood puddle created at (730.3831, 752.4972) (added to group)
[20:16:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(460, 784.9444), shooter_id=22960945497709, bullet_pos=(909.2202, 656.0946)
[20:16:43] [INFO] [Bullet] Using shooter_position, distance=467.333953857422
[20:16:43] [INFO] [Bullet] Distance to wall: 467.333953857422 (31.8216282695173% of viewport)
[20:16:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:43] [INFO] [Bullet] Caliber cannot penetrate walls
[20:16:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(611.5644, 772.26135), shooter_id=22957590055693, bullet_pos=(41.75431, 897.13855)
[20:16:43] [INFO] [Bullet] Using shooter_position, distance=583,3334
[20:16:43] [INFO] [Bullet] Distance to wall: 583,3334 (39,72024% of viewport)
[20:16:43] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[20:16:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(618.8582, 799.6532), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:43] [INFO] [Player] Stun ended (Issue #592)
[20:16:43] [INFO] [LastChance] Threat detected: @Area2D@7773
[20:16:43] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:16:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:43] [INFO] [BloodDecal] Blood puddle created at (539.1267, 777.7094) (added to group)
[20:16:43] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,778), corner_timer=-0.02
[20:16:43] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[20:16:43] [INFO] [BloodDecal] Blood puddle created at (814.2664, 798.2123) (added to group)
[20:16:43] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,778), corner_timer=0.30
[20:16:43] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[20:16:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(588.2332, 821.0045), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:43] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:43] [INFO] [BloodDecal] Blood puddle created at (606.9216, 802.2155) (added to group)
[20:16:43] [INFO] [BloodDecal] Blood puddle created at (512.9905, 761.8491) (added to group)
[20:16:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(521.2901, 808.7889), shooter_id=22957590055693, bullet_pos=(521.2901, 808.7889)
[20:16:43] [INFO] [Bullet] Using shooter_position, distance=0
[20:16:43] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[20:16:43] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:16:43] [INFO] [Bullet] Starting wall penetration at (521.2901, 808.7889)
[20:16:43] [INFO] [LastChance] Threat detected: Bullet
[20:16:43] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:16:43] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:43] [INFO] [Bullet] Raycast backward hit penetrating body at distance 24,406885
[20:16:43] [INFO] [Bullet] Body exited signal received for penetrating body
[20:16:43] [INFO] [Bullet] Exiting penetration at (476.6563, 795.16534) after traveling 41,66667 pixels through wall
[20:16:43] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:16:43] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=145.1°, current=146.8°, player=(450,778), corner_timer=0.00
[20:16:43] [INFO] [BloodDecal] Blood puddle created at (818.5232, 852.2582) (added to group)
[20:16:43] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:43] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:16:43] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:16:43] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:16:43] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:43] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:16:43] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:16:43] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:16:43] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:16:43] [ENEMY] [Enemy1] Death animation component initialized
[20:16:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:43] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:16:43] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:16:43] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:16:43] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:43] [ENEMY] [Enemy2] Death animation component initialized
[20:16:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:43] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:16:43] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:16:43] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:16:43] [ENEMY] [Enemy3] Death animation component initialized
[20:16:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:43] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:16:43] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:16:43] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:16:43] [ENEMY] [Enemy4] Death animation component initialized
[20:16:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:43] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:16:43] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:16:43] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:16:43] [ENEMY] [Enemy5] Death animation component initialized
[20:16:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:43] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:16:43] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:16:43] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:16:43] [ENEMY] [Enemy6] Death animation component initialized
[20:16:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:43] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:16:43] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:16:43] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:16:43] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:43] [ENEMY] [Enemy7] Death animation component initialized
[20:16:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:43] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:16:43] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:16:43] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:16:43] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:43] [ENEMY] [Enemy8] Death animation component initialized
[20:16:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:43] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:16:43] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:16:43] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:16:43] [ENEMY] [Enemy9] Death animation component initialized
[20:16:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:43] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:16:43] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:16:43] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:16:43] [ENEMY] [Enemy10] Death animation component initialized
[20:16:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:43] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:16:43] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:16:43] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:16:43] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:16:43] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:16:43] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:16:43] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:16:43] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:16:43] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:16:43] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:16:43] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:16:43] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:16:43] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 4/4
[20:16:43] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:16:43] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:16:43] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:16:43] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:16:43] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:16:43] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:16:43] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:16:43] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:16:43] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:16:43] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:16:43] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:16:43] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:16:43] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:16:43] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:16:43] [INFO] [ScoreManager] Level started with 10 enemies
[20:16:43] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:16:43] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:16:43] [INFO] [ReplayManager] Replay data cleared
[20:16:43] [INFO] [BuildingLevel] Previous replay data cleared
[20:16:43] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:16:43] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:16:43] [INFO] [ReplayManager] Level: BuildingLevel
[20:16:43] [INFO] [ReplayManager] Player: Player (valid: True)
[20:16:43] [INFO] [ReplayManager] Enemies count: 10
[20:16:43] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:16:43] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:16:43] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:16:43] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:16:43] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:16:43] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:16:43] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:16:43] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:16:43] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:16:43] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:16:43] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:16:43] [INFO] [BuildingLevel] Replay recording started successfully
[20:16:43] [INFO] [BloodDecal] Blood puddle created at (835.1926, 844.8638) (added to group)
[20:16:43] [INFO] [BloodDecal] Blood puddle created at (836.199, 826.2133) (added to group)
[20:16:43] [INFO] [BloodDecal] Blood puddle created at (544.1682, 774.2722) (added to group)
[20:16:43] [INFO] [BloodDecal] Blood puddle created at (495.7095, 787.8554) (added to group)
[20:16:43] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:16:43] [INFO] [CinemaEffects] Found player node: Player
[20:16:43] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:16:43] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:16:43] [ENEMY] [Enemy1] Registered as sound listener
[20:16:43] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[20:16:43] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:16:43] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:16:43] [ENEMY] [Enemy2] Registered as sound listener
[20:16:43] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[20:16:43] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:16:43] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:16:43] [ENEMY] [Enemy3] Registered as sound listener
[20:16:43] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[20:16:43] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:16:43] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:16:43] [ENEMY] [Enemy4] Registered as sound listener
[20:16:43] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[20:16:43] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:16:43] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:16:43] [ENEMY] [Enemy5] Registered as sound listener
[20:16:43] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[20:16:43] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:16:43] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:16:43] [ENEMY] [Enemy6] Registered as sound listener
[20:16:43] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[20:16:43] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:16:43] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:16:43] [ENEMY] [Enemy7] Registered as sound listener
[20:16:43] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[20:16:43] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:16:43] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:16:43] [ENEMY] [Enemy8] Registered as sound listener
[20:16:43] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[20:16:43] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:16:43] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:16:43] [ENEMY] [Enemy9] Registered as sound listener
[20:16:43] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[20:16:43] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:16:43] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:16:43] [ENEMY] [Enemy10] Registered as sound listener
[20:16:43] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[20:16:43] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:16:44] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:16:44] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:44] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:44] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:44] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:44] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:44] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:44] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:44] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:44] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:16:44] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:16:44] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:16:44] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:16:44] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:16:44] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:16:44] [INFO] [LastChance] Found player: Player
[20:16:44] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:16:44] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:16:44] [INFO] [LastChance] Connected to player Died signal (C#)
[20:16:44] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:16:44] [INFO] [BloodDecal] Blood puddle created at (525.7596, 798.2661) (added to group)
[20:16:44] [INFO] [BloodDecal] Blood puddle created at (591.7371, 794.6556) (added to group)
[20:16:44] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:16:45] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:45] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:16:45] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,826), corner_timer=0.30
[20:16:45] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,826), corner_timer=0.30
[20:16:45] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=163.8°, current=-168.8°, player=(450,822), corner_timer=0.00
[20:16:45] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:16:45] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=165.6°, current=-9.8°, player=(450,814), corner_timer=0.00
[20:16:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 810.6666), source=PLAYER (MakarovPM), range=1469, listeners=20
[20:16:45] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:16:45] [ENEMY] [Enemy1] Heard gunshot at (460, 810.6666), source_type=0, intensity=0.01, distance=488
[20:16:45] [ENEMY] [Enemy2] Heard gunshot at (460, 810.6666), source_type=0, intensity=0.03, distance=267
[20:16:45] [ENEMY] [Enemy4] Heard gunshot at (460, 810.6666), source_type=0, intensity=0.02, distance=352
[20:16:45] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:45] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=71.7°, current=33.8°, player=(450,804), corner_timer=0.00
[20:16:45] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=78.9°, current=168.8°, player=(450,804), corner_timer=0.00
[20:16:45] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-164.8°, current=-101.3°, player=(450,804), corner_timer=0.00
[20:16:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(460, 810.6666), shooter_id=23900503148773, bullet_pos=(509.6166, 800.405)
[20:16:45] [INFO] [Bullet] Using shooter_position, distance=50.6666679382324
[20:16:45] [INFO] [Bullet] Distance to wall: 50.6666679382324 (3.44998658770126% of viewport)
[20:16:45] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:16:45] [INFO] [Bullet] Caliber cannot penetrate walls
[20:16:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 796.1666), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:45] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:45] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,789), corner_timer=-0.02
[20:16:45] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:45] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,789), corner_timer=-0.02
[20:16:45] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:16:45] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,789), corner_timer=0.30
[20:16:45] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,789), corner_timer=0.30
[20:16:45] [ENEMY] [Enemy3] Hit: dmg=1, hp=4/4->3/4
[20:16:45] [INFO] [ImpactEffects] spawn_blood_effect called at (684.5262, 754.0678), dir=(0.982749, -0.184944), lethal=false
[20:16:45] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:45] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:45] [INFO] [ImpactEffects] Blood effect spawned at (684.5262, 754.0678) (scale=0.5)
[20:16:45] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=171.3°, current=169.3°, player=(450,789), corner_timer=0.00
[20:16:45] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:16:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.5262, 754.0678), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:45] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:45] [INFO] [LastChance] Threat detected: Bullet
[20:16:45] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 795.9444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:45] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:45] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:16:45] [INFO] [Player] Spawning blood effect at (450, 789.9444), dir=(1, 0), lethal=False (C#)
[20:16:45] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 789.9444), dir=(1, 0), lethal=false
[20:16:45] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:45] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:45] [INFO] [ImpactEffects] Blood effect spawned at (450, 789.9444) (scale=1)
[20:16:45] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:16:45] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:16:45] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:16:46] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:16:46] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[20:16:46] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[20:16:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(678.201, 758.9661), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:46] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:46] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,789), corner_timer=-0.02
[20:16:46] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[20:16:46] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,789), corner_timer=0.30
[20:16:46] [INFO] [Player] Stun ended (Issue #592)
[20:16:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(669.7674, 765.4971), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:46] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:46] [INFO] [LastChance] Threat detected: @Area2D@8051
[20:16:46] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:16:46] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:46] [INFO] [BloodDecal] Blood puddle created at (774.9777, 721.6516) (added to group)
[20:16:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(661.3338, 772.0281), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:46] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:46] [INFO] [BloodDecal] Blood puddle created at (745.1812, 753.7928) (added to group)
[20:16:46] [INFO] [BloodDecal] Blood puddle created at (776.6696, 781.407) (added to group)
[20:16:46] [INFO] [LastChance] Threat detected: @Area2D@8054
[20:16:46] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:16:46] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:46] [INFO] [BloodDecal] Blood puddle created at (805.3165, 777.7422) (added to group)
[20:16:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(652.9003, 778.559), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:46] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:46] [INFO] [LastChance] Threat detected: @Area2D@8059
[20:16:46] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:16:46] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:46] [INFO] [BloodDecal] Blood puddle created at (790.8734, 790.8452) (added to group)
[20:16:46] [INFO] [BloodDecal] Blood puddle created at (820.2155, 789.5221) (added to group)
[20:16:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(612.26465, 775.7885), shooter_id=23897147706147, bullet_pos=(29.602383, 1001.9073)
[20:16:46] [INFO] [Bullet] Using shooter_position, distance=625
[20:16:46] [INFO] [Bullet] Distance to wall: 625 (42,5574% of viewport)
[20:16:46] [INFO] [Bullet] Distance-based penetration chance: 97,016365%
[20:16:46] [INFO] [Bullet] Starting wall penetration at (29.602383, 1001.9073)
[20:16:46] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:16:46] [INFO] [Player] Spawning blood effect at (450, 789.9444), dir=(1, 0), lethal=False (C#)
[20:16:46] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 789.9444), dir=(1, 0), lethal=false
[20:16:46] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:46] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:46] [INFO] [ImpactEffects] Blood effect spawned at (450, 789.9444) (scale=1)
[20:16:46] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:16:46] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:16:46] [INFO] [Bullet] Raycast backward hit penetrating body at distance 49,23851
[20:16:46] [INFO] [Bullet] Body exited signal received for penetrating body
[20:16:46] [INFO] [Bullet] Exiting penetration at (-13.903065, 1018.79083) after traveling 41,666668 pixels through wall
[20:16:46] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:16:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(603.4442, 780.7231), shooter_id=23897147706147, bullet_pos=(29.903355, 887.1595)
[20:16:46] [INFO] [Bullet] Using shooter_position, distance=583,3334
[20:16:46] [INFO] [Bullet] Distance to wall: 583,3334 (39,72024% of viewport)
[20:16:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:46] [INFO] [Bullet] Starting wall penetration at (29.903355, 887.1595)
[20:16:46] [INFO] [Bullet] Raycast backward hit penetrating body at distance 48,79911
[20:16:46] [INFO] [BloodDecal] Blood puddle created at (785.7044, 804.1361) (added to group)
[20:16:46] [INFO] [Bullet] Body exited signal received for penetrating body
[20:16:46] [INFO] [Bullet] Exiting penetration at (-15.979916, 895.6744) after traveling 41,666668 pixels through wall
[20:16:46] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:16:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(460, 795.9444), shooter_id=23900503148773, bullet_pos=(910.8358, 672.8706)
[20:16:46] [INFO] [Bullet] Using shooter_position, distance=467.332946777344
[20:16:46] [INFO] [Bullet] Distance to wall: 467.332946777344 (31.821559695583% of viewport)
[20:16:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:46] [INFO] [Bullet] Caliber cannot penetrate walls
[20:16:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(594.6343, 785.5106), shooter_id=23897147706147, bullet_pos=(53.61041, 759.12976)
[20:16:46] [INFO] [Bullet] Using shooter_position, distance=541,6666
[20:16:46] [INFO] [Bullet] Distance to wall: 541,6666 (36,883076% of viewport)
[20:16:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:46] [INFO] [Bullet] Starting wall penetration at (53.61041, 759.12976)
[20:16:46] [INFO] [BloodyFeet:Enemy3] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[20:16:46] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,789), corner_timer=-0.02
[20:16:46] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[20:16:46] [INFO] [Bullet] Raycast backward hit penetrating body at distance 25,030588
[20:16:46] [INFO] [Bullet] Body exited signal received for penetrating body
[20:16:46] [INFO] [Bullet] Exiting penetration at (6.999119, 756.85693) after traveling 41,666668 pixels through wall
[20:16:46] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:16:46] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[20:16:46] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,789), corner_timer=0.30
[20:16:46] [INFO] [Player] Stun ended (Issue #592)
[20:16:46] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=142.2°, current=146.5°, player=(450,789), corner_timer=0.00
[20:16:46] [INFO] [BloodDecal] Blood puddle created at (881.7299, 886.5161) (added to group)
[20:16:46] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[20:16:46] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[20:16:46] [INFO] [BloodDecal] Blood puddle created at (779.0879, 820.5414) (added to group)
[20:16:46] [INFO] [BloodDecal] Blood puddle created at (490.2232, 792.0453) (added to group)
[20:16:46] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:46] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:46] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:16:46] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:16:46] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:16:46] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:46] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:16:46] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:16:46] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:16:46] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:16:46] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:46] [ENEMY] [Enemy1] Death animation component initialized
[20:16:46] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:46] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:16:46] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:16:46] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:16:46] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:46] [ENEMY] [Enemy2] Death animation component initialized
[20:16:46] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:46] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:16:46] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:16:46] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:16:46] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:46] [ENEMY] [Enemy3] Death animation component initialized
[20:16:46] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:46] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:16:46] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:16:46] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:16:46] [ENEMY] [Enemy4] Death animation component initialized
[20:16:46] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:46] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:16:46] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:16:46] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:16:46] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:46] [ENEMY] [Enemy5] Death animation component initialized
[20:16:46] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:46] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:16:46] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:16:46] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:16:46] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:46] [ENEMY] [Enemy6] Death animation component initialized
[20:16:46] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:46] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:16:46] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:16:46] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:16:46] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:46] [ENEMY] [Enemy7] Death animation component initialized
[20:16:46] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:46] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:16:46] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:16:46] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:16:46] [ENEMY] [Enemy8] Death animation component initialized
[20:16:46] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:46] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:16:46] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:16:46] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:16:46] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:46] [ENEMY] [Enemy9] Death animation component initialized
[20:16:46] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:46] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:16:46] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:16:46] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:16:46] [ENEMY] [Enemy10] Death animation component initialized
[20:16:46] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:46] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:16:46] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:16:46] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:16:46] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:16:46] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:16:46] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:16:46] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:16:46] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:16:46] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:16:46] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:16:46] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:16:46] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:16:46] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 4/4
[20:16:46] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:16:46] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:16:46] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:16:46] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:16:46] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:16:46] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:16:46] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:16:46] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:16:46] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:16:46] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:16:46] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:16:46] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:16:46] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:16:46] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:16:46] [INFO] [ScoreManager] Level started with 10 enemies
[20:16:46] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:16:46] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:16:46] [INFO] [ReplayManager] Replay data cleared
[20:16:46] [INFO] [BuildingLevel] Previous replay data cleared
[20:16:46] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:16:46] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:16:46] [INFO] [ReplayManager] Level: BuildingLevel
[20:16:46] [INFO] [ReplayManager] Player: Player (valid: True)
[20:16:46] [INFO] [ReplayManager] Enemies count: 10
[20:16:46] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:16:46] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:16:46] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:16:46] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:16:46] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:16:46] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:16:46] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:16:46] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:16:46] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:16:46] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:16:46] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:16:46] [INFO] [BuildingLevel] Replay recording started successfully
[20:16:46] [INFO] [BloodDecal] Blood puddle created at (517.4686, 789.8958) (added to group)
[20:16:46] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:16:46] [INFO] [CinemaEffects] Found player node: Player
[20:16:46] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:16:46] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:16:46] [ENEMY] [Enemy1] Registered as sound listener
[20:16:46] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[20:16:46] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:16:46] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:16:46] [ENEMY] [Enemy2] Registered as sound listener
[20:16:46] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[20:16:46] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:16:46] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:16:46] [ENEMY] [Enemy3] Registered as sound listener
[20:16:46] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[20:16:46] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:16:46] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:16:46] [ENEMY] [Enemy4] Registered as sound listener
[20:16:46] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[20:16:46] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:16:46] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:16:46] [ENEMY] [Enemy5] Registered as sound listener
[20:16:46] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[20:16:46] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:16:46] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:16:46] [ENEMY] [Enemy6] Registered as sound listener
[20:16:46] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[20:16:46] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:16:46] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:16:46] [ENEMY] [Enemy7] Registered as sound listener
[20:16:46] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[20:16:46] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:16:46] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:16:46] [ENEMY] [Enemy8] Registered as sound listener
[20:16:46] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[20:16:46] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:16:46] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:16:46] [ENEMY] [Enemy9] Registered as sound listener
[20:16:46] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[20:16:46] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:16:46] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:16:46] [ENEMY] [Enemy10] Registered as sound listener
[20:16:46] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[20:16:46] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:16:46] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:16:46] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:46] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:46] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=236.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:46] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:46] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:46] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:46] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=78.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:46] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:16:46] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:16:46] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:16:46] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:16:46] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:16:46] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:16:46] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:16:46] [INFO] [LastChance] Found player: Player
[20:16:46] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:16:46] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:16:46] [INFO] [LastChance] Connected to player Died signal (C#)
[20:16:46] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:16:46] [INFO] [BloodDecal] Blood puddle created at (548.4717, 802.3465) (added to group)
[20:16:47] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:16:48] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:48] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:16:48] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,814), corner_timer=0.30
[20:16:48] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,814), corner_timer=0.30
[20:16:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 817.9444), source=PLAYER (MakarovPM), range=1469, listeners=20
[20:16:48] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:16:48] [ENEMY] [Enemy1] Heard gunshot at (460, 817.9444), source_type=0, intensity=0.01, distance=495
[20:16:48] [ENEMY] [Enemy2] Heard gunshot at (460, 817.9444), source_type=0, intensity=0.03, distance=275
[20:16:48] [ENEMY] [Enemy3] Heard gunshot at (460, 817.9444), source_type=0, intensity=0.04, distance=249
[20:16:48] [ENEMY] [Enemy4] Heard gunshot at (460, 817.9444), source_type=0, intensity=0.02, distance=350
[20:16:48] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:48] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=72.0°, current=-157.5°, player=(450,811), corner_timer=0.00
[20:16:48] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=79.2°, current=168.8°, player=(450,811), corner_timer=0.00
[20:16:48] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=166.1°, current=-123.8°, player=(450,811), corner_timer=0.00
[20:16:48] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-165.9°, current=168.8°, player=(450,811), corner_timer=0.00
[20:16:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(460, 817.9444), shooter_id=24869857134371, bullet_pos=(509.6398, 807.7955)
[20:16:48] [INFO] [Bullet] Using shooter_position, distance=50.6666488647461
[20:16:48] [INFO] [Bullet] Distance to wall: 50.6666488647461 (3.4499852889525% of viewport)
[20:16:48] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:16:48] [INFO] [Bullet] Caliber cannot penetrate walls
[20:16:48] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,811), corner_timer=-0.02
[20:16:48] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:48] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,811), corner_timer=-0.02
[20:16:48] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:16:48] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,811), corner_timer=0.30
[20:16:48] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,811), corner_timer=0.30
[20:16:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 817.9444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:48] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(460, 817.9444), shooter_id=24869857134371, bullet_pos=(509.2017, 805.8486)
[20:16:48] [INFO] [Bullet] Using shooter_position, distance=50.6666679382324
[20:16:48] [INFO] [Bullet] Distance to wall: 50.6666679382324 (3.44998658770126% of viewport)
[20:16:48] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:16:48] [INFO] [Bullet] Caliber cannot penetrate walls
[20:16:48] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:16:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 817.9444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:48] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(460, 817.9444), shooter_id=24869857134371, bullet_pos=(508.9929, 805.029)
[20:16:48] [INFO] [Bullet] Using shooter_position, distance=50.6666641235352
[20:16:48] [INFO] [Bullet] Distance to wall: 50.6666641235352 (3.44998632795151% of viewport)
[20:16:48] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:16:48] [INFO] [Bullet] Caliber cannot penetrate walls
[20:16:48] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=166.1°, current=116.8°, player=(450,811), corner_timer=0.00
[20:16:48] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:16:48] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[20:16:48] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[20:16:48] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,811), corner_timer=-0.02
[20:16:48] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[20:16:48] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,811), corner_timer=0.30
[20:16:49] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:49] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:49] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:16:49] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:16:49] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:16:49] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:49] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:16:49] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:16:49] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:16:49] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:16:49] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:49] [ENEMY] [Enemy1] Death animation component initialized
[20:16:49] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:49] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:16:49] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:16:49] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:16:49] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:49] [ENEMY] [Enemy2] Death animation component initialized
[20:16:49] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:49] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:16:49] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:16:49] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:16:49] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:49] [ENEMY] [Enemy3] Death animation component initialized
[20:16:49] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:49] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:16:49] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:16:49] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:16:49] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:49] [ENEMY] [Enemy4] Death animation component initialized
[20:16:49] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:49] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:16:49] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:16:49] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:16:49] [ENEMY] [Enemy5] Death animation component initialized
[20:16:49] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:49] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:16:49] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:16:49] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:16:49] [ENEMY] [Enemy6] Death animation component initialized
[20:16:49] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:49] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:16:49] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:16:49] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:16:49] [ENEMY] [Enemy7] Death animation component initialized
[20:16:49] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:49] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:16:49] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:16:49] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:16:49] [ENEMY] [Enemy8] Death animation component initialized
[20:16:49] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:49] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:16:49] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:16:49] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:16:49] [ENEMY] [Enemy9] Death animation component initialized
[20:16:49] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:49] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:16:49] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:16:49] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:16:49] [ENEMY] [Enemy10] Death animation component initialized
[20:16:49] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:49] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:16:49] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:16:49] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:16:49] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:16:49] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:16:49] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:16:49] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:16:49] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:16:49] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:16:49] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:16:49] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:16:49] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:16:49] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 4/4
[20:16:49] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:16:49] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:16:49] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:16:49] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:16:49] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:16:49] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:16:49] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:16:49] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:16:49] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:16:49] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:16:49] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:16:49] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:16:49] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:16:49] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:16:49] [INFO] [ScoreManager] Level started with 10 enemies
[20:16:49] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:16:49] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:16:49] [INFO] [ReplayManager] Replay data cleared
[20:16:49] [INFO] [BuildingLevel] Previous replay data cleared
[20:16:49] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:16:49] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:16:49] [INFO] [ReplayManager] Level: BuildingLevel
[20:16:49] [INFO] [ReplayManager] Player: Player (valid: True)
[20:16:49] [INFO] [ReplayManager] Enemies count: 10
[20:16:49] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:16:49] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:16:49] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:16:49] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:16:49] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:16:49] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:16:49] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:16:49] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:16:49] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:16:49] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:16:49] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:16:49] [INFO] [BuildingLevel] Replay recording started successfully
[20:16:49] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:16:49] [INFO] [CinemaEffects] Found player node: Player
[20:16:49] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:16:49] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:16:49] [ENEMY] [Enemy1] Registered as sound listener
[20:16:49] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[20:16:49] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:16:49] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:16:49] [ENEMY] [Enemy2] Registered as sound listener
[20:16:49] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[20:16:49] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:16:49] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:16:49] [ENEMY] [Enemy3] Registered as sound listener
[20:16:49] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[20:16:49] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:16:49] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:16:49] [ENEMY] [Enemy4] Registered as sound listener
[20:16:49] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[20:16:49] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:16:49] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:16:49] [ENEMY] [Enemy5] Registered as sound listener
[20:16:49] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[20:16:49] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:16:49] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:16:49] [ENEMY] [Enemy6] Registered as sound listener
[20:16:49] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[20:16:49] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:16:49] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:16:49] [ENEMY] [Enemy7] Registered as sound listener
[20:16:49] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[20:16:49] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:16:49] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:16:49] [ENEMY] [Enemy8] Registered as sound listener
[20:16:49] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[20:16:49] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:16:49] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:16:49] [ENEMY] [Enemy9] Registered as sound listener
[20:16:49] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[20:16:49] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:16:49] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:16:49] [ENEMY] [Enemy10] Registered as sound listener
[20:16:49] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[20:16:49] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:16:49] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:16:49] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:49] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:49] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:49] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:49] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:49] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:49] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:49] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:49] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:16:49] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:16:49] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:16:49] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:16:49] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:16:49] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:16:49] [INFO] [LastChance] Found player: Player
[20:16:49] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:16:49] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:16:49] [INFO] [LastChance] Connected to player Died signal (C#)
[20:16:49] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:16:50] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:16:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 984.1666), source=PLAYER (MakarovPM), range=1469, listeners=20
[20:16:50] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:16:50] [ENEMY] [Enemy2] Heard gunshot at (460, 984.1666), source_type=0, intensity=0.01, distance=438
[20:16:50] [ENEMY] [Enemy3] Heard gunshot at (460, 984.1666), source_type=0, intensity=0.02, distance=335
[20:16:50] [ENEMY] [Enemy4] Heard gunshot at (460, 984.1666), source_type=0, intensity=0.02, distance=350
[20:16:50] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=4
[20:16:50] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=83.3°, current=-157.5°, player=(450,978), corner_timer=0.00
[20:16:50] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=137.6°, current=123.7°, player=(450,978), corner_timer=0.00
[20:16:50] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=167.4°, current=-67.5°, player=(450,978), corner_timer=0.00
[20:16:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(460, 984.1666), shooter_id=25712140487093, bullet_pos=(510.0565, 976.3273)
[20:16:50] [INFO] [Bullet] Using shooter_position, distance=50.6666831970215
[20:16:50] [INFO] [Bullet] Distance to wall: 50.6666831970215 (3.44998762670026% of viewport)
[20:16:50] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:16:50] [INFO] [Bullet] Caliber cannot penetrate walls
[20:16:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 966.4444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:50] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=4
[20:16:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(460, 966.4444), shooter_id=25712140487093, bullet_pos=(509.6385, 956.2892)
[20:16:50] [INFO] [Bullet] Using shooter_position, distance=50.6666679382324
[20:16:50] [INFO] [Bullet] Distance to wall: 50.6666679382324 (3.44998658770126% of viewport)
[20:16:50] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:16:50] [INFO] [Bullet] Caliber cannot penetrate walls
[20:16:50] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:50] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:16:50] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,960), corner_timer=0.30
[20:16:50] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,960), corner_timer=0.30
[20:16:50] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[20:16:50] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[20:16:50] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[20:16:50] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,960), corner_timer=-0.02
[20:16:50] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:50] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,960), corner_timer=-0.02
[20:16:50] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:16:50] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,960), corner_timer=0.30
[20:16:50] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,960), corner_timer=0.30
[20:16:51] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:16:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 966.4444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:51] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=4
[20:16:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(460, 966.4444), shooter_id=25712140487093, bullet_pos=(507.3325, 984.5206)
[20:16:51] [INFO] [Bullet] Using shooter_position, distance=50.6666526794434
[20:16:51] [INFO] [Bullet] Distance to wall: 50.6666526794434 (3.44998554870225% of viewport)
[20:16:51] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:16:51] [INFO] [Bullet] Caliber cannot penetrate walls
[20:16:51] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,960), corner_timer=-0.02
[20:16:51] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[20:16:51] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,960), corner_timer=0.30
[20:16:51] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,960), corner_timer=-0.02
[20:16:51] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[20:16:51] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,960), corner_timer=0.30
[20:16:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 966.4444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:51] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=4
[20:16:51] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(450,960), corner_timer=-0.02
[20:16:51] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[20:16:51] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(450,960), corner_timer=0.30
[20:16:52] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[20:16:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 966.4444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:52] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=4
[20:16:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(460, 966.4444), shooter_id=25712140487093, bullet_pos=(218.4003, 1385.83)
[20:16:52] [INFO] [Bullet] Using shooter_position, distance=483.998748779297
[20:16:52] [INFO] [Bullet] Distance to wall: 483.998748779297 (32.9563647996035% of viewport)
[20:16:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:52] [INFO] [Bullet] Caliber cannot penetrate walls
[20:16:52] [ENEMY] [Enemy2] FLANKING started: target=(254.2709, 919.3331), side=left, pos=(352.8678, 663.9329)
[20:16:52] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
[20:16:52] [ENEMY] [Enemy2] FLANKING corner check: angle -138.7°
[20:16:52] [ENEMY] [Enemy3] PURSUING corner check: angle -151.3°
[20:16:52] [ENEMY] [Enemy4] PURSUING corner check: angle -90.0°
[20:16:52] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(450,960), corner_timer=-0.02
[20:16:52] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[20:16:52] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(450,960), corner_timer=0.30
[20:16:52] [ENEMY] [Enemy2] FLANKING corner check: angle -92.1°
[20:16:52] [ENEMY] [Enemy3] PURSUING corner check: angle 28.7°
[20:16:52] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:52] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:16:52] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:16:52] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:16:52] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:52] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:16:52] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:16:52] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:16:52] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:16:52] [ENEMY] [Enemy1] Death animation component initialized
[20:16:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:52] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:16:52] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:16:52] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:16:52] [ENEMY] [Enemy2] Death animation component initialized
[20:16:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:52] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:16:52] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:16:52] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:16:52] [ENEMY] [Enemy3] Death animation component initialized
[20:16:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:52] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:16:52] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:16:52] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:16:52] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:52] [ENEMY] [Enemy4] Death animation component initialized
[20:16:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:52] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:16:52] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:16:52] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:16:52] [ENEMY] [Enemy5] Death animation component initialized
[20:16:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:52] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:16:52] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:16:52] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:16:52] [ENEMY] [Enemy6] Death animation component initialized
[20:16:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:52] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:16:52] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:16:52] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:16:52] [ENEMY] [Enemy7] Death animation component initialized
[20:16:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:52] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:16:52] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:16:52] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:16:52] [ENEMY] [Enemy8] Death animation component initialized
[20:16:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:52] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:16:52] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:16:52] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:16:52] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:52] [ENEMY] [Enemy9] Death animation component initialized
[20:16:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:52] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:16:52] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:16:52] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:16:52] [ENEMY] [Enemy10] Death animation component initialized
[20:16:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:52] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:16:52] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:16:52] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:16:52] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:16:52] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:16:52] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:16:52] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:16:52] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:16:52] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:16:52] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:16:52] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:16:52] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:16:52] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 2/4
[20:16:52] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:16:52] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:16:52] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:16:52] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:16:52] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:16:52] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:16:52] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:16:52] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:16:52] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:16:52] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:16:52] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:16:52] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:16:52] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:16:52] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:16:52] [INFO] [ScoreManager] Level started with 10 enemies
[20:16:52] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:16:52] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:16:52] [INFO] [ReplayManager] Replay data cleared
[20:16:52] [INFO] [BuildingLevel] Previous replay data cleared
[20:16:52] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:16:52] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:16:52] [INFO] [ReplayManager] Level: BuildingLevel
[20:16:52] [INFO] [ReplayManager] Player: Player (valid: True)
[20:16:52] [INFO] [ReplayManager] Enemies count: 10
[20:16:52] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:16:52] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:16:52] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:16:52] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:16:52] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:16:52] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:16:52] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:16:52] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:16:52] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:16:52] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:16:52] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:16:52] [INFO] [BuildingLevel] Replay recording started successfully
[20:16:52] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:16:52] [INFO] [CinemaEffects] Found player node: Player
[20:16:52] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:16:52] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:16:52] [ENEMY] [Enemy1] Registered as sound listener
[20:16:52] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[20:16:52] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:16:52] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:16:52] [ENEMY] [Enemy2] Registered as sound listener
[20:16:52] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[20:16:52] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:16:52] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:16:52] [ENEMY] [Enemy3] Registered as sound listener
[20:16:52] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[20:16:52] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:16:52] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:16:52] [ENEMY] [Enemy4] Registered as sound listener
[20:16:52] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[20:16:52] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:16:52] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:16:52] [ENEMY] [Enemy5] Registered as sound listener
[20:16:52] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[20:16:52] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:16:52] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:16:52] [ENEMY] [Enemy6] Registered as sound listener
[20:16:52] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[20:16:52] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:16:52] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:16:52] [ENEMY] [Enemy7] Registered as sound listener
[20:16:52] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[20:16:52] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:16:52] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:16:52] [ENEMY] [Enemy8] Registered as sound listener
[20:16:52] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[20:16:52] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:16:52] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:16:52] [ENEMY] [Enemy9] Registered as sound listener
[20:16:52] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[20:16:52] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:16:52] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:16:52] [ENEMY] [Enemy10] Registered as sound listener
[20:16:52] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[20:16:52] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:16:52] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:16:52] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:52] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:52] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:52] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:52] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:52] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:52] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:52] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:52] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:16:52] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:16:52] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:16:52] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:16:52] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:16:52] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:16:52] [INFO] [LastChance] Found player: Player
[20:16:52] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:16:52] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:16:52] [INFO] [LastChance] Connected to player Died signal (C#)
[20:16:52] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:16:53] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:16:54] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:54] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:16:54] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,858), corner_timer=0.30
[20:16:54] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,858), corner_timer=0.30
[20:16:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 789.4444), source=PLAYER (MakarovPM), range=1469, listeners=20
[20:16:54] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:16:54] [ENEMY] [Enemy1] Heard gunshot at (460, 789.4444), source_type=0, intensity=0.01, distance=468
[20:16:54] [ENEMY] [Enemy2] Heard gunshot at (460, 789.4444), source_type=0, intensity=0.04, distance=247
[20:16:54] [ENEMY] [Enemy3] Heard gunshot at (460, 789.4444), source_type=0, intensity=0.04, distance=243
[20:16:54] [ENEMY] [Enemy4] Heard gunshot at (460, 789.4444), source_type=0, intensity=0.02, distance=358
[20:16:54] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:54] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=70.9°, current=33.8°, player=(450,783), corner_timer=0.00
[20:16:54] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=77.9°, current=168.8°, player=(450,783), corner_timer=0.00
[20:16:54] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=172.4°, current=-33.8°, player=(450,783), corner_timer=0.00
[20:16:54] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-161.6°, current=-67.5°, player=(450,783), corner_timer=0.00
[20:16:54] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=173.1°, current=135.8°, player=(450,780), corner_timer=0.00
[20:16:54] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,771), corner_timer=-0.02
[20:16:54] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:54] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,771), corner_timer=-0.02
[20:16:54] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:16:54] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,769), corner_timer=0.30
[20:16:54] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,769), corner_timer=0.30
[20:16:54] [ENEMY] [Enemy3] Hit: dmg=1, hp=4/4->3/4
[20:16:54] [INFO] [ImpactEffects] spawn_blood_effect called at (689.4275, 751.4143), dir=(0.993327, -0.115335), lethal=false
[20:16:54] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:54] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:54] [INFO] [ImpactEffects] Blood effect spawned at (689.4275, 751.4143) (scale=0.5)
[20:16:54] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:16:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.4275, 751.4143), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:54] [INFO] [LastChance] Threat detected: Bullet
[20:16:54] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:54] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 768.4444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:54] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:54] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:16:54] [INFO] [Player] Spawning blood effect at (450, 762.4444), dir=(1, 0), lethal=False (C#)
[20:16:54] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 762.4444), dir=(1, 0), lethal=false
[20:16:54] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:54] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:54] [INFO] [ImpactEffects] Blood effect spawned at (450, 762.4444) (scale=1)
[20:16:54] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:16:54] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:16:54] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:16:54] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:16:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(682.4667, 747.7827), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:54] [INFO] [LastChance] Threat detected: Bullet
[20:16:54] [INFO] [LastChance] Triggering last chance effect!
[20:16:54] [INFO] [LastChance] Starting last chance effect:
[20:16:54] [INFO] [LastChance]   - Time will be frozen (except player)
[20:16:54] [INFO] [LastChance]   - Duration: 6.00 real seconds
[20:16:54] [INFO] [LastChance]   - Trigger: threat detected
[20:16:54] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:16:54] [INFO] [LastChance]   - Brightness: 0.60
[20:16:54] [INFO] [LastChance] Pushed bullet Bullet from distance 124.9 to 200.0
[20:16:54] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[20:16:54] [INFO] [LastChance] Set player Player and all 26 children to PROCESS_MODE_ALWAYS
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:16:54] [INFO] [LastChance] Skipping player node: Player
[20:16:54] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:16:54] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@8846
[20:16:54] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@8848
[20:16:54] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:16:54] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:16:54] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:16:54] [INFO] [Player] Stun ended (Issue #592)
[20:16:54] [INFO] [BloodDecal] Blood puddle created at (751.3741, 747.5723) (added to group)
[20:16:54] [INFO] [BloodDecal] Blood puddle created at (777.4027, 789.6947) (added to group)
[20:16:54] [INFO] [BloodDecal] Blood puddle created at (788.9289, 800.9047) (added to group)
[20:16:54] [INFO] [BloodDecal] Blood puddle created at (510.2281, 779.6123) (added to group)
[20:16:54] [INFO] [BloodDecal] Blood puddle created at (819.0693, 772.3157) (added to group)
[20:16:54] [INFO] [BloodDecal] Blood puddle created at (512.0062, 758.1036) (added to group)
[20:16:54] [INFO] [BloodDecal] Blood puddle created at (754.0839, 809.8738) (added to group)
[20:16:54] [INFO] [BloodDecal] Blood puddle created at (500.0379, 772.7302) (added to group)
[20:16:55] [INFO] [BloodDecal] Blood puddle created at (538.5936, 757.9687) (added to group)
[20:16:55] [INFO] [BloodDecal] Blood puddle created at (830.598, 777.0693) (added to group)
[20:16:55] [INFO] [BloodDecal] Blood puddle created at (834.6689, 771.5262) (added to group)
[20:16:55] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@8861
[20:16:55] [INFO] [LastChance] Registered frozen player bullet: @Area2D@8861
[20:16:55] [INFO] [LastChance] Freezing newly created explosion effect: PointLight2D
[20:16:55] [INFO] [LastChance] Registered frozen explosion effect: PointLight2D
[20:16:55] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@8862
[20:16:55] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@8862
[20:16:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 768.4444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:55] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:55] [INFO] [BloodDecal] Blood puddle created at (884.9733, 765.134) (added to group)
[20:16:55] [INFO] [BloodDecal] Blood puddle created at (886.746, 778.5127) (added to group)
[20:16:55] [INFO] [BloodDecal] Blood puddle created at (835.7713, 768.2645) (added to group)
[20:16:55] [INFO] [BloodDecal] Blood puddle created at (599.236, 826.9438) (added to group)
[20:16:55] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:55] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:55] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:16:55] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:16:55] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:16:55] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:55] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:16:55] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:16:55] [INFO] [LastChance] All process modes restored
[20:16:55] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:16:55] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:16:55] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:16:55] [ENEMY] [Enemy1] Death animation component initialized
[20:16:55] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:55] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:16:55] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:16:55] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:16:55] [ENEMY] [Enemy2] Death animation component initialized
[20:16:55] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:55] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:16:55] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:16:55] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:16:55] [ENEMY] [Enemy3] Death animation component initialized
[20:16:55] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:55] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:16:55] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:16:55] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:16:55] [ENEMY] [Enemy4] Death animation component initialized
[20:16:55] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:55] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:16:55] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:16:55] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:16:55] [ENEMY] [Enemy5] Death animation component initialized
[20:16:55] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:55] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:16:55] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:16:55] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:16:55] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:55] [ENEMY] [Enemy6] Death animation component initialized
[20:16:55] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:55] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:16:55] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:16:55] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:16:55] [ENEMY] [Enemy7] Death animation component initialized
[20:16:55] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:55] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:16:55] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:16:55] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:16:55] [ENEMY] [Enemy8] Death animation component initialized
[20:16:55] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:55] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:16:55] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:16:55] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:16:55] [ENEMY] [Enemy9] Death animation component initialized
[20:16:55] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:55] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:16:55] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:16:55] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:16:55] [ENEMY] [Enemy10] Death animation component initialized
[20:16:55] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:55] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:16:55] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:16:55] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:16:55] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:16:55] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:16:55] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:16:55] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:16:55] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:16:55] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:16:55] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:16:55] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:16:55] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:16:55] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 3/4
[20:16:55] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:16:55] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:16:55] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:16:55] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:16:55] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:16:55] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:16:55] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:16:55] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:16:55] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:16:55] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:16:55] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:16:55] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:16:55] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:16:55] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:16:55] [INFO] [ScoreManager] Level started with 10 enemies
[20:16:55] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:16:55] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:16:55] [INFO] [ReplayManager] Replay data cleared
[20:16:55] [INFO] [BuildingLevel] Previous replay data cleared
[20:16:55] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:16:55] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:16:55] [INFO] [ReplayManager] Level: BuildingLevel
[20:16:55] [INFO] [ReplayManager] Player: Player (valid: True)
[20:16:55] [INFO] [ReplayManager] Enemies count: 10
[20:16:55] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:16:55] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:16:55] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:16:55] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:16:55] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:16:55] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:16:55] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:16:55] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:16:55] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:16:55] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:16:55] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:16:55] [INFO] [BuildingLevel] Replay recording started successfully
[20:16:55] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:16:55] [INFO] [CinemaEffects] Found player node: Player
[20:16:55] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:16:55] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:16:55] [ENEMY] [Enemy1] Registered as sound listener
[20:16:55] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[20:16:55] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:16:55] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:16:55] [ENEMY] [Enemy2] Registered as sound listener
[20:16:55] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[20:16:55] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:16:55] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:16:55] [ENEMY] [Enemy3] Registered as sound listener
[20:16:55] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[20:16:55] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:16:55] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:16:55] [ENEMY] [Enemy4] Registered as sound listener
[20:16:55] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[20:16:55] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:16:55] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:16:55] [ENEMY] [Enemy5] Registered as sound listener
[20:16:55] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[20:16:55] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:16:55] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:16:55] [ENEMY] [Enemy6] Registered as sound listener
[20:16:55] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[20:16:55] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:16:55] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:16:55] [ENEMY] [Enemy7] Registered as sound listener
[20:16:55] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[20:16:55] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:16:55] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:16:55] [ENEMY] [Enemy8] Registered as sound listener
[20:16:55] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[20:16:55] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:16:55] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:16:55] [ENEMY] [Enemy9] Registered as sound listener
[20:16:55] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[20:16:55] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:16:55] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:16:55] [ENEMY] [Enemy10] Registered as sound listener
[20:16:55] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[20:16:55] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:16:55] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:16:55] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:55] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:55] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=236.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:55] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:55] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:55] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:55] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:55] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:55] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:16:55] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:16:55] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:16:55] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:16:55] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:16:55] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:16:55] [INFO] [LastChance] Found player: Player
[20:16:55] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:16:55] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:16:55] [INFO] [LastChance] Connected to player Died signal (C#)
[20:16:55] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:16:56] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:16:57] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:57] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:16:57] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,836), corner_timer=0.30
[20:16:57] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,836), corner_timer=0.30
[20:16:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 780.4444), source=PLAYER (MakarovPM), range=1469, listeners=20
[20:16:57] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:16:57] [ENEMY] [Enemy1] Heard gunshot at (460, 780.4444), source_type=0, intensity=0.01, distance=459
[20:16:57] [ENEMY] [Enemy2] Heard gunshot at (460, 780.4444), source_type=0, intensity=0.04, distance=238
[20:16:57] [ENEMY] [Enemy3] Heard gunshot at (460, 780.4444), source_type=0, intensity=0.04, distance=242
[20:16:57] [ENEMY] [Enemy4] Heard gunshot at (460, 780.4444), source_type=0, intensity=0.02, distance=360
[20:16:57] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:57] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=70.5°, current=-33.8°, player=(450,774), corner_timer=0.00
[20:16:57] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=77.4°, current=168.8°, player=(450,774), corner_timer=0.00
[20:16:57] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=174.4°, current=-123.8°, player=(450,774), corner_timer=0.00
[20:16:57] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-160.3°, current=-101.3°, player=(450,774), corner_timer=0.00
[20:16:57] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,764), corner_timer=-0.02
[20:16:57] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:57] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,764), corner_timer=-0.02
[20:16:57] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:16:57] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,763), corner_timer=0.30
[20:16:57] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,763), corner_timer=0.30
[20:16:57] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:16:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 768.4444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:57] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:57] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:16:57] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=RETREATING, target=-145.1°, current=102.2°, player=(450,762), corner_timer=0.00
[20:16:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(460, 780.4444), shooter_id=27758927285146, bullet_pos=(910.6656, 780.928)
[20:16:57] [INFO] [Bullet] Using shooter_position, distance=450.665924072266
[20:16:57] [INFO] [Bullet] Distance to wall: 450.665924072266 (30.6866714716419% of viewport)
[20:16:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:57] [INFO] [Bullet] Caliber cannot penetrate walls
[20:16:57] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,762), corner_timer=-0.02
[20:16:57] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[20:16:57] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,762), corner_timer=0.30
[20:16:57] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P1:visible, state=RETREATING, target=171.1°, current=122.5°, player=(450,762), corner_timer=0.00
[20:16:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(658.776, 729.6617), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:57] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:57] [INFO] [LastChance] Threat detected: Bullet
[20:16:57] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:57] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:57] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:16:57] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[20:16:57] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[20:16:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 768.4444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:16:57] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:16:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(637.3505, 714.6984), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:57] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:16:57] [INFO] [LastChance] Threat detected: @Area2D@9125
[20:16:57] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:16:57] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:57] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:16:57] [INFO] [Player] Spawning blood effect at (450, 762.4444), dir=(1, 0), lethal=False (C#)
[20:16:57] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 762.4444), dir=(1, 0), lethal=false
[20:16:57] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:57] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:57] [INFO] [ImpactEffects] Blood effect spawned at (450, 762.4444) (scale=1)
[20:16:57] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:16:57] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:16:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(460, 768.4444), shooter_id=27758927285146, bullet_pos=(910.6656, 767.715)
[20:16:57] [INFO] [Bullet] Using shooter_position, distance=450.666229248047
[20:16:57] [INFO] [Bullet] Distance to wall: 450.666229248047 (30.686692251622% of viewport)
[20:16:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:57] [INFO] [Bullet] Caliber cannot penetrate walls
[20:16:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(615.9249, 699.735), source=ENEMY (Enemy3), range=1469, listeners=10
[20:16:58] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[20:16:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(598.4089, 744.5856), shooter_id=27755571840693, bullet_pos=(39.692043, 912.25574)
[20:16:58] [INFO] [Bullet] Using shooter_position, distance=583,3334
[20:16:58] [INFO] [Bullet] Distance to wall: 583,3334 (39,72024% of viewport)
[20:16:58] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:16:58] [INFO] [Bullet] Starting wall penetration at (39.692043, 912.25574)
[20:16:58] [INFO] [LastChance] Threat detected: @Area2D@9128
[20:16:58] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:16:58] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:16:58] [INFO] [Bullet] Raycast backward hit penetrating body at distance 38,635735
[20:16:58] [INFO] [Bullet] Body exited signal received for penetrating body
[20:16:58] [INFO] [Bullet] Exiting penetration at (-5.0053024, 925.6694) after traveling 41,66667 pixels through wall
[20:16:58] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:16:58] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,762), corner_timer=-0.02
[20:16:58] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[20:16:58] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,762), corner_timer=0.30
[20:16:58] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:16:58] [INFO] [Player] Spawning blood effect at (450, 762.4444), dir=(1, 0), lethal=False (C#)
[20:16:58] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 762.4444), dir=(1, 0), lethal=false
[20:16:58] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:16:58] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:16:58] [INFO] [ImpactEffects] Blood effect spawned at (450, 762.4444) (scale=1)
[20:16:58] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:16:58] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:16:58] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:16:58] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:58] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:16:58] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:16:58] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:16:58] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:16:58] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:16:58] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:16:58] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:16:58] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:16:58] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:58] [ENEMY] [Enemy1] Death animation component initialized
[20:16:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:58] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:16:58] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:16:58] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:16:58] [ENEMY] [Enemy2] Death animation component initialized
[20:16:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:58] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:16:58] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:16:58] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:16:58] [ENEMY] [Enemy3] Death animation component initialized
[20:16:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:58] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:16:58] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:16:58] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:16:58] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:58] [ENEMY] [Enemy4] Death animation component initialized
[20:16:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:58] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:16:58] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:16:58] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:16:58] [ENEMY] [Enemy5] Death animation component initialized
[20:16:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:58] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:16:58] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:16:58] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:16:58] [ENEMY] [Enemy6] Death animation component initialized
[20:16:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:58] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:16:58] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:16:58] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:16:58] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:58] [ENEMY] [Enemy7] Death animation component initialized
[20:16:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:58] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:16:58] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:16:58] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:16:58] [ENEMY] [Enemy8] Death animation component initialized
[20:16:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:58] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:16:58] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:16:58] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:16:58] [ENEMY] [Enemy9] Death animation component initialized
[20:16:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:58] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:16:58] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:16:58] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:16:58] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:16:58] [ENEMY] [Enemy10] Death animation component initialized
[20:16:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:16:58] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:16:58] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:16:58] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:16:58] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:16:58] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:16:58] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:16:58] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:16:58] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:16:58] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:16:58] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:16:58] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:16:58] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:16:58] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 2/4
[20:16:58] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:16:58] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:16:58] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:16:58] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:16:58] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:16:58] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:16:58] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:16:58] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:16:58] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:16:58] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:16:58] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:16:58] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:16:58] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:16:58] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:16:58] [INFO] [ScoreManager] Level started with 10 enemies
[20:16:58] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:16:58] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:16:58] [INFO] [ReplayManager] Replay data cleared
[20:16:58] [INFO] [BuildingLevel] Previous replay data cleared
[20:16:58] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:16:58] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:16:58] [INFO] [ReplayManager] Level: BuildingLevel
[20:16:58] [INFO] [ReplayManager] Player: Player (valid: True)
[20:16:58] [INFO] [ReplayManager] Enemies count: 10
[20:16:58] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:16:58] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:16:58] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:16:58] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:16:58] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:16:58] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:16:58] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:16:58] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:16:58] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:16:58] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:16:58] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:16:58] [INFO] [BuildingLevel] Replay recording started successfully
[20:16:58] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:16:58] [INFO] [CinemaEffects] Found player node: Player
[20:16:58] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:16:58] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:16:58] [ENEMY] [Enemy1] Registered as sound listener
[20:16:58] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[20:16:58] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:16:58] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:16:58] [ENEMY] [Enemy2] Registered as sound listener
[20:16:58] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[20:16:58] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:16:58] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:16:58] [ENEMY] [Enemy3] Registered as sound listener
[20:16:58] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[20:16:58] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:16:58] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:16:58] [ENEMY] [Enemy4] Registered as sound listener
[20:16:58] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[20:16:58] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:16:58] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:16:58] [ENEMY] [Enemy5] Registered as sound listener
[20:16:58] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[20:16:58] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:16:58] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:16:58] [ENEMY] [Enemy6] Registered as sound listener
[20:16:58] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[20:16:58] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:16:58] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:16:58] [ENEMY] [Enemy7] Registered as sound listener
[20:16:58] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[20:16:58] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:16:58] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:16:58] [ENEMY] [Enemy8] Registered as sound listener
[20:16:58] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[20:16:58] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:16:58] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:16:58] [ENEMY] [Enemy9] Registered as sound listener
[20:16:58] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[20:16:58] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:16:58] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:16:58] [ENEMY] [Enemy10] Registered as sound listener
[20:16:58] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[20:16:58] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:16:58] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:16:58] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:58] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:58] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:58] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:58] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:58] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:58] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=213.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:58] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:16:58] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:16:58] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:16:58] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:16:58] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:16:58] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:16:58] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:16:58] [INFO] [LastChance] Found player: Player
[20:16:58] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:16:58] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:16:58] [INFO] [LastChance] Connected to player Died signal (C#)
[20:16:58] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:16:58] [INFO] [BloodDecal] Blood puddle created at (496.2678, 802.6926) (added to group)
[20:16:58] [INFO] [BloodDecal] Blood puddle created at (502.6323, 783.2303) (added to group)
[20:16:58] [INFO] [BloodDecal] Blood puddle created at (542.6068, 801.3826) (added to group)
[20:16:58] [INFO] [BloodDecal] Blood puddle created at (568.4664, 800.6345) (added to group)
[20:16:58] [INFO] [BloodDecal] Blood puddle created at (489.6255, 784.4097) (added to group)
[20:16:58] [INFO] [BloodDecal] Blood puddle created at (524.9492, 788.5835) (added to group)
[20:16:58] [INFO] [BloodDecal] Blood puddle created at (627.4122, 773.5429) (added to group)
[20:16:58] [INFO] [BloodDecal] Blood puddle created at (576.8193, 745.36) (added to group)
[20:16:58] [INFO] [BloodDecal] Blood puddle created at (609.4645, 814.2156) (added to group)
[20:16:58] [INFO] [BloodDecal] Blood puddle created at (574.8042, 774.4372) (added to group)
[20:16:58] [INFO] [BloodDecal] Blood puddle created at (596.4435, 801.9873) (added to group)
[20:16:58] [INFO] [BloodDecal] Blood puddle created at (616.7725, 824.8624) (added to group)
[20:16:58] [INFO] [BloodDecal] Blood puddle created at (559.8373, 807.5132) (added to group)
[20:16:59] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:16:59] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:16:59] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:16:59] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,819), corner_timer=0.30
[20:16:59] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,819), corner_timer=0.30
[20:17:00] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,762), corner_timer=-0.02
[20:17:00] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:17:00] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,762), corner_timer=-0.02
[20:17:00] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:17:00] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,762), corner_timer=0.30
[20:17:00] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,762), corner_timer=0.30
[20:17:00] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:17:00] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,762), corner_timer=-0.02
[20:17:00] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[20:17:00] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,762), corner_timer=0.30
[20:17:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 768.4444), source=PLAYER (MakarovPM), range=1469, listeners=20
[20:17:00] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:17:00] [ENEMY] [Enemy1] Heard gunshot at (460, 768.4444), source_type=0, intensity=0.01, distance=448
[20:17:00] [ENEMY] [Enemy2] Heard gunshot at (460, 768.4444), source_type=0, intensity=0.05, distance=227
[20:17:00] [ENEMY] [Enemy3] Heard gunshot at (460, 768.4444), source_type=0, intensity=0.04, distance=241
[20:17:00] [ENEMY] [Enemy4] Heard gunshot at (460, 768.4444), source_type=0, intensity=0.02, distance=365
[20:17:00] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:17:00] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=70.0°, current=33.8°, player=(450,762), corner_timer=0.00
[20:17:00] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=76.8°, current=45.0°, player=(450,762), corner_timer=0.00
[20:17:00] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=177.2°, current=11.3°, player=(450,762), corner_timer=0.00
[20:17:00] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-158.5°, current=-101.3°, player=(450,762), corner_timer=0.00
[20:17:00] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=177.2°, current=-168.7°, player=(450,762), corner_timer=0.00
[20:17:00] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,762), corner_timer=-0.02
[20:17:00] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[20:17:00] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,762), corner_timer=0.30
[20:17:00] [ENEMY] [Enemy3] Hit: dmg=1, hp=4/4->3/4
[20:17:00] [INFO] [ImpactEffects] spawn_blood_effect called at (689.3466, 750.5303), dir=(0.99707, -0.076496), lethal=false
[20:17:00] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:17:00] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:17:00] [INFO] [ImpactEffects] Blood effect spawned at (689.3466, 750.5303) (scale=0.5)
[20:17:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.3466, 750.5303), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:00] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:00] [INFO] [LastChance] Threat detected: Bullet
[20:17:00] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:17:00] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:17:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 768.4444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:17:00] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:17:00] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:17:00] [INFO] [Player] Spawning blood effect at (450, 762.4444), dir=(1, 0), lethal=False (C#)
[20:17:00] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 762.4444), dir=(1, 0), lethal=false
[20:17:00] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:17:00] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:17:00] [INFO] [ImpactEffects] Blood effect spawned at (450, 762.4444) (scale=1)
[20:17:00] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:17:00] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:17:00] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:17:00] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:17:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(682.3702, 746.9288), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:01] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:01] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(450,762), corner_timer=-0.02
[20:17:01] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[20:17:01] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(450,762), corner_timer=0.30
[20:17:01] [INFO] [Player] Stun ended (Issue #592)
[20:17:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(673.6422, 740.7972), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:01] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:01] [ENEMY] [Enemy3] Hit: dmg=1, hp=3/4->2/4
[20:17:01] [INFO] [ImpactEffects] spawn_blood_effect called at (671.4602, 739.2643), dir=(0.996694, -0.081246), lethal=false
[20:17:01] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:17:01] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:17:01] [INFO] [ImpactEffects] Blood effect spawned at (671.4602, 739.2643) (scale=0.5)
[20:17:01] [INFO] [LastChance] Threat detected: @Area2D@9404
[20:17:01] [INFO] [LastChance] Triggering last chance effect!
[20:17:01] [INFO] [LastChance] Starting last chance effect:
[20:17:01] [INFO] [LastChance]   - Time will be frozen (except player)
[20:17:01] [INFO] [LastChance]   - Duration: 6.00 real seconds
[20:17:01] [INFO] [LastChance]   - Trigger: threat detected
[20:17:01] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:17:01] [INFO] [LastChance]   - Brightness: 0.60
[20:17:01] [INFO] [LastChance] Pushed bullet Bullet from distance 58.0 to 200.0
[20:17:01] [INFO] [LastChance] Pushed bullet @Area2D@9404 from distance 115.9 to 200.0
[20:17:01] [INFO] [LastChance] Pushed 2 threatening bullets away from player
[20:17:01] [INFO] [LastChance] Set player Player and all 26 children to PROCESS_MODE_ALWAYS
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:17:01] [INFO] [LastChance] Skipping player node: Player
[20:17:01] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:17:01] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@9399
[20:17:01] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@9401
[20:17:01] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:17:01] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:17:01] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:17:01] [INFO] [BloodDecal] Blood puddle created at (777.0699, 736.1028) (added to group)
[20:17:01] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[20:17:01] [INFO] [LastChance] Freezing newly fired player bullet: Bullet9mm
[20:17:01] [INFO] [LastChance] Registered frozen player bullet: Bullet9mm
[20:17:01] [INFO] [LastChance] Freezing newly created explosion effect: PointLight2D
[20:17:01] [INFO] [LastChance] Registered frozen explosion effect: PointLight2D
[20:17:01] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@9412
[20:17:01] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@9412
[20:17:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 768.4444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:17:01] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:17:01] [INFO] [BloodDecal] Blood puddle created at (516.1241, 791.5101) (added to group)
[20:17:01] [INFO] [BloodDecal] Blood puddle created at (768.3431, 795.9198) (added to group)
[20:17:01] [INFO] [BloodDecal] Blood puddle created at (530.5927, 765.1526) (added to group)
[20:17:01] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@9420
[20:17:01] [INFO] [LastChance] Registered frozen player bullet: @Area2D@9420
[20:17:01] [INFO] [LastChance] Freezing newly created explosion effect: PointLight2D
[20:17:01] [INFO] [LastChance] Registered frozen explosion effect: PointLight2D
[20:17:01] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@9422
[20:17:01] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@9422
[20:17:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 768.4444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:17:01] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:17:01] [INFO] [BloodDecal] Blood puddle created at (709.8154, 763.683) (added to group)
[20:17:01] [INFO] [BloodDecal] Blood puddle created at (749.0382, 769.5506) (added to group)
[20:17:01] [INFO] [BloodDecal] Blood puddle created at (779.8959, 771.0882) (added to group)
[20:17:01] [INFO] [BloodDecal] Blood puddle created at (812.1377, 819.5214) (added to group)
[20:17:01] [INFO] [BloodDecal] Blood puddle created at (861.0251, 829.7342) (added to group)
[20:17:01] [INFO] [BloodDecal] Blood puddle created at (561.3896, 805.3473) (added to group)
[20:17:01] [INFO] [BloodDecal] Blood puddle created at (712.0022, 737.8266) (added to group)
[20:17:01] [INFO] [BloodDecal] Blood puddle created at (875.4089, 752.3206) (added to group)
[20:17:01] [INFO] [BloodDecal] Blood puddle created at (573.3026, 779.7062) (added to group)
[20:17:01] [INFO] [BloodDecal] Blood puddle created at (740.2774, 751.2292) (added to group)
[20:17:01] [INFO] [BloodDecal] Blood puddle created at (874.0504, 883.8713) (added to group)
[20:17:01] [INFO] [BloodDecal] Blood puddle created at (819.6702, 801.6883) (added to group)
[20:17:01] [INFO] [BloodDecal] Blood puddle created at (587.5161, 785.6031) (added to group)
[20:17:01] [INFO] [BloodDecal] Blood puddle created at (736.1431, 752.4172) (added to group)
[20:17:01] [INFO] [BloodDecal] Blood puddle created at (866.8114, 758.6247) (added to group)
[20:17:01] [INFO] [BloodDecal] Blood puddle created at (770.0564, 785.6516) (added to group)
[20:17:01] [INFO] [BloodDecal] Blood puddle created at (816.3874, 797.9694) (added to group)
[20:17:01] [INFO] [BloodDecal] Blood puddle created at (594.6751, 828.1079) (added to group)
[20:17:01] [INFO] [BloodDecal] Blood puddle created at (839.6749, 772.7675) (added to group)
[20:17:01] [INFO] [BloodDecal] Blood puddle created at (778.1037, 761.5548) (added to group)
[20:17:01] [INFO] [BloodDecal] Blood puddle created at (868.275, 850.9998) (added to group)
[20:17:02] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:17:02] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:02] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:17:02] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:17:02] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:17:02] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:17:02] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:17:02] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:17:02] [INFO] [LastChance] All process modes restored
[20:17:02] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:17:02] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:17:02] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:17:02] [ENEMY] [Enemy1] Death animation component initialized
[20:17:02] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:02] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:17:02] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:17:02] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:17:02] [ENEMY] [Enemy2] Death animation component initialized
[20:17:02] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:02] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:17:02] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:17:02] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:17:02] [ENEMY] [Enemy3] Death animation component initialized
[20:17:02] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:02] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:17:02] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:17:02] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:17:02] [ENEMY] [Enemy4] Death animation component initialized
[20:17:02] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:02] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:17:02] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:17:02] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:17:02] [ENEMY] [Enemy5] Death animation component initialized
[20:17:02] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:02] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:17:02] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:17:02] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:17:02] [ENEMY] [Enemy6] Death animation component initialized
[20:17:02] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:02] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:17:02] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:17:02] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:17:02] [ENEMY] [Enemy7] Death animation component initialized
[20:17:02] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:02] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:17:02] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:17:02] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:17:02] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:02] [ENEMY] [Enemy8] Death animation component initialized
[20:17:02] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:02] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:17:02] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:17:02] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:17:02] [ENEMY] [Enemy9] Death animation component initialized
[20:17:02] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:02] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:17:02] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:17:02] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:17:02] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:02] [ENEMY] [Enemy10] Death animation component initialized
[20:17:02] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:02] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:17:02] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:17:02] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:17:02] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:17:02] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:17:02] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:17:02] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:17:02] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:17:02] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:17:02] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:17:02] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:17:02] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:17:02] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 4/4
[20:17:02] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:17:02] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:17:02] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:17:02] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:17:02] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:17:02] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:17:02] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:17:02] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:17:02] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:17:02] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:17:02] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:17:02] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:17:02] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:17:02] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:17:02] [INFO] [ScoreManager] Level started with 10 enemies
[20:17:02] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:17:02] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:17:02] [INFO] [ReplayManager] Replay data cleared
[20:17:02] [INFO] [BuildingLevel] Previous replay data cleared
[20:17:02] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:17:02] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:17:02] [INFO] [ReplayManager] Level: BuildingLevel
[20:17:02] [INFO] [ReplayManager] Player: Player (valid: True)
[20:17:02] [INFO] [ReplayManager] Enemies count: 10
[20:17:02] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:17:02] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:17:02] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:17:02] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:17:02] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:17:02] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:17:02] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:17:02] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:17:02] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:17:02] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:17:02] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:17:02] [INFO] [BuildingLevel] Replay recording started successfully
[20:17:02] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:17:02] [INFO] [CinemaEffects] Found player node: Player
[20:17:02] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:17:02] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:17:02] [ENEMY] [Enemy1] Registered as sound listener
[20:17:02] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[20:17:02] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:17:02] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:17:02] [ENEMY] [Enemy2] Registered as sound listener
[20:17:02] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[20:17:02] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:17:02] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:17:02] [ENEMY] [Enemy3] Registered as sound listener
[20:17:02] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[20:17:02] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:17:02] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:17:02] [ENEMY] [Enemy4] Registered as sound listener
[20:17:02] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[20:17:02] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:17:02] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:17:02] [ENEMY] [Enemy5] Registered as sound listener
[20:17:02] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[20:17:02] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:17:02] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:17:02] [ENEMY] [Enemy6] Registered as sound listener
[20:17:02] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[20:17:02] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:17:02] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:17:02] [ENEMY] [Enemy7] Registered as sound listener
[20:17:02] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[20:17:02] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:17:02] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:17:02] [ENEMY] [Enemy8] Registered as sound listener
[20:17:02] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[20:17:02] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:17:02] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:17:02] [ENEMY] [Enemy9] Registered as sound listener
[20:17:02] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[20:17:02] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:17:02] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:17:02] [ENEMY] [Enemy10] Registered as sound listener
[20:17:02] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[20:17:02] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:17:02] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:17:02] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:02] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:02] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=236.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:02] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:02] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:02] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:02] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=213.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:02] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:02] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:17:02] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:17:02] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:17:02] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:17:02] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:17:02] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:17:02] [INFO] [LastChance] Found player: Player
[20:17:02] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:17:02] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:17:02] [INFO] [LastChance] Connected to player Died signal (C#)
[20:17:02] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:17:03] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:17:03] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:17:03] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:17:03] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1250), corner_timer=0.30
[20:17:03] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1250), corner_timer=0.30
[20:17:04] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,1199), corner_timer=-0.02
[20:17:04] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:17:04] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,1199), corner_timer=-0.02
[20:17:04] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:17:04] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,1193), corner_timer=0.30
[20:17:04] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,1193), corner_timer=0.30
[20:17:04] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:17:04] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,1089), corner_timer=-0.02
[20:17:04] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[20:17:04] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,1083), corner_timer=0.30
[20:17:04] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,979), corner_timer=-0.02
[20:17:04] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[20:17:04] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,973), corner_timer=0.30
[20:17:05] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(450,869), corner_timer=-0.02
[20:17:05] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[20:17:05] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(450,863), corner_timer=0.30
[20:17:05] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[20:17:05] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(450,769), corner_timer=-0.02
[20:17:05] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[20:17:05] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(450,766), corner_timer=0.30
[20:17:05] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:17:05] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(450,751), corner_timer=-0.02
[20:17:05] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[20:17:05] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(450,751), corner_timer=0.30
[20:17:06] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:17:06] [INFO] [ReplayManager] Recording frame 240 (4,0s): player_valid=True, enemies=10
[20:17:06] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(450,751), corner_timer=-0.02
[20:17:06] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[20:17:06] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(450,751), corner_timer=0.30
[20:17:06] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:17:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 757.4444), source=PLAYER (MakarovPM), range=1469, listeners=20
[20:17:06] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:17:06] [ENEMY] [Enemy1] Heard gunshot at (460, 757.4444), source_type=0, intensity=0.01, distance=438
[20:17:06] [ENEMY] [Enemy2] Heard gunshot at (460, 757.4444), source_type=0, intensity=0.05, distance=216
[20:17:06] [ENEMY] [Enemy3] Heard gunshot at (460, 757.4444), source_type=0, intensity=0.04, distance=240
[20:17:06] [ENEMY] [Enemy4] Heard gunshot at (460, 757.4444), source_type=0, intensity=0.02, distance=369
[20:17:06] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:17:06] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=69.5°, current=-33.8°, player=(450,751), corner_timer=0.00
[20:17:06] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=76.1°, current=-101.3°, player=(450,751), corner_timer=0.00
[20:17:06] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=179.7°, current=-123.8°, player=(450,751), corner_timer=0.00
[20:17:06] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-157.0°, current=-67.5°, player=(450,751), corner_timer=0.00
[20:17:06] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(450,751), corner_timer=-0.02
[20:17:06] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[20:17:06] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(450,751), corner_timer=0.30
[20:17:06] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:17:06] [ENEMY] [Enemy3] Hit: dmg=1, hp=3/3->2/3
[20:17:06] [INFO] [ImpactEffects] spawn_blood_effect called at (689.3335, 750.0616), dir=(0.99827, -0.058791), lethal=false
[20:17:06] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:17:06] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:17:06] [INFO] [ImpactEffects] Blood effect spawned at (689.3335, 750.0616) (scale=0.5)
[20:17:06] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=179.7°, current=176.6°, player=(450,751), corner_timer=0.00
[20:17:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.3335, 750.0616), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:06] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:06] [INFO] [LastChance] Threat detected: Bullet
[20:17:06] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:17:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:17:06] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:17:06] [INFO] [Player] Spawning blood effect at (450, 751.4444), dir=(1, 0), lethal=False (C#)
[20:17:06] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 751.4444), dir=(1, 0), lethal=false
[20:17:06] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:17:06] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:17:06] [INFO] [ImpactEffects] Blood effect spawned at (450, 751.4444) (scale=1)
[20:17:06] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:17:06] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:17:06] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:17:06] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=-148.8°, current=-162.4°, player=(450,751), corner_timer=0.00
[20:17:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.3455, 743.8069), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:06] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:06] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(450,751), corner_timer=-0.02
[20:17:06] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[20:17:06] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(450,751), corner_timer=0.30
[20:17:06] [INFO] [Player] Stun ended (Issue #592)
[20:17:06] [INFO] [BloodDecal] Blood puddle created at (756.063, 729.3474) (added to group)
[20:17:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(677.6949, 735.4673), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:06] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:06] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:17:06] [INFO] [LastChance] Threat detected: @Area2D@9701
[20:17:06] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:17:06] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:17:07] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:17:07] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[20:17:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(671.0443, 727.1277), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:07] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:07] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:17:07] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:17:07] [INFO] [Player] Spawning blood effect at (450, 751.4444), dir=(1, 0), lethal=False (C#)
[20:17:07] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 751.4444), dir=(1, 0), lethal=false
[20:17:07] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:17:07] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:17:07] [INFO] [ImpactEffects] Blood effect spawned at (450, 751.4444) (scale=1)
[20:17:07] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:17:07] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:17:07] [INFO] [LastChance] Threat detected: @Area2D@9702
[20:17:07] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:17:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:17:07] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:17:07] [INFO] [BloodDecal] Blood puddle created at (740.8021, 788.0923) (added to group)
[20:17:07] [INFO] [BloodDecal] Blood puddle created at (760.1866, 743.3256) (added to group)
[20:17:07] [INFO] [BloodDecal] Blood puddle created at (493.3525, 784.048) (added to group)
[20:17:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(664.3936, 718.7881), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:07] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:07] [INFO] [LastChance] Threat detected: @Area2D@9713
[20:17:07] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:17:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:17:07] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:17:07] [INFO] [Player] Spawning blood effect at (450, 751.4444), dir=(1, 0), lethal=False (C#)
[20:17:07] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 751.4444), dir=(1, 0), lethal=false
[20:17:07] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:17:07] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:17:07] [INFO] [ImpactEffects] Blood effect spawned at (450, 751.4444) (scale=1)
[20:17:07] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:17:07] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:17:07] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:17:07] [INFO] [BloodDecal] Blood puddle created at (827.6997, 747.0154) (added to group)
[20:17:07] [INFO] [BloodDecal] Blood puddle created at (758.8538, 758.4858) (added to group)
[20:17:07] [INFO] [BloodDecal] Blood puddle created at (510.5805, 743.4547) (added to group)
[20:17:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(617.03546, 753.80475), shooter_id=29762143652695, bullet_pos=(43.943874, 862.6346)
[20:17:07] [INFO] [Bullet] Using shooter_position, distance=583,3335
[20:17:07] [INFO] [Bullet] Distance to wall: 583,3335 (39,720253% of viewport)
[20:17:07] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:17:07] [INFO] [Bullet] Starting wall penetration at (43.943874, 862.6346)
[20:17:07] [INFO] [Bullet] Raycast backward hit penetrating body at distance 34,50934
[20:17:07] [INFO] [Bullet] Body exited signal received for penetrating body
[20:17:07] [INFO] [Bullet] Exiting penetration at (-1.9034462, 871.34094) after traveling 41,666668 pixels through wall
[20:17:07] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:17:07] [INFO] [ReplayManager] Recording frame 300 (5,0s): player_valid=True, enemies=10
[20:17:07] [INFO] [BloodDecal] Blood puddle created at (818.3151, 816.3075) (added to group)
[20:17:07] [INFO] [BloodDecal] Blood puddle created at (534.8598, 765.9457) (added to group)
[20:17:07] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:17:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(598.739, 736.6786), shooter_id=29762143652695, bullet_pos=(307.8253, 715.7354)
[20:17:07] [INFO] [Bullet] Using shooter_position, distance=291,66663
[20:17:07] [INFO] [Bullet] Distance to wall: 291,66663 (19,860117% of viewport)
[20:17:07] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:17:07] [INFO] [Bullet] Starting wall penetration at (307.8253, 715.7354)
[20:17:07] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(450,751), corner_timer=-0.02
[20:17:07] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[20:17:07] [INFO] [Player] Stun ended (Issue #592)
[20:17:07] [INFO] [Bullet] Raycast forward hit penetrating body at distance 5,35504
[20:17:07] [INFO] [BloodDecal] Blood puddle created at (529.1624, 793.5518) (added to group)
[20:17:07] [INFO] [BloodDecal] Blood puddle created at (547.4506, 779.9131) (added to group)
[20:17:07] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(450,751), corner_timer=0.30
[20:17:07] [INFO] [Bullet] Max penetration distance exceeded: 83,333336 >= 48
[20:17:07] [INFO] [Bullet] Body exited signal received for penetrating body
[20:17:07] [INFO] [Bullet] Exiting penetration at (219.71997, 709.39264) after traveling 83,333336 pixels through wall
[20:17:07] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:17:07] [INFO] [BloodDecal] Blood puddle created at (791.3488, 803.5013) (added to group)
[20:17:07] [INFO] [BloodDecal] Blood puddle created at (846.0594, 770.538) (added to group)
[20:17:07] [INFO] [BloodDecal] Blood puddle created at (558.6687, 774.5811) (added to group)
[20:17:07] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[20:17:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(622.8279, 666.6656), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:07] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[20:17:07] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:17:07] [INFO] [LastChance] Threat detected: Bullet
[20:17:07] [INFO] [LastChance] Triggering last chance effect!
[20:17:07] [INFO] [LastChance] Starting last chance effect:
[20:17:07] [INFO] [LastChance]   - Time will be frozen (except player)
[20:17:07] [INFO] [LastChance]   - Duration: 6.00 real seconds
[20:17:07] [INFO] [LastChance]   - Trigger: threat detected
[20:17:07] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:17:07] [INFO] [LastChance]   - Brightness: 0.60
[20:17:07] [INFO] [LastChance] Pushed bullet Bullet from distance 125.1 to 200.0
[20:17:07] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[20:17:07] [INFO] [LastChance] Set player Player and all 26 children to PROCESS_MODE_ALWAYS
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:17:07] [INFO] [LastChance] Skipping player node: Player
[20:17:07] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:17:07] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@9698
[20:17:07] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@9735
[20:17:07] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:17:07] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:17:07] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:17:07] [INFO] [BloodDecal] Blood puddle created at (534.4404, 772.9222) (added to group)
[20:17:07] [INFO] [BloodDecal] Blood puddle created at (621.0576, 859.0768) (added to group)
[20:17:07] [INFO] [BloodDecal] Blood puddle created at (537.3683, 788.8777) (added to group)
[20:17:07] [INFO] [BloodDecal] Blood puddle created at (540.9157, 784.478) (added to group)
[20:17:07] [INFO] [BloodDecal] Blood puddle created at (496.7455, 770.1061) (added to group)
[20:17:07] [INFO] [BloodDecal] Blood puddle created at (654.6606, 819.9211) (added to group)
[20:17:07] [INFO] [BloodDecal] Blood puddle created at (533.0383, 766.076) (added to group)
[20:17:07] [INFO] [BloodDecal] Blood puddle created at (547.9059, 781.3557) (added to group)
[20:17:07] [INFO] [BloodDecal] Blood puddle created at (576.4572, 765.786) (added to group)
[20:17:07] [INFO] [BloodDecal] Blood puddle created at (530.9003, 789.6564) (added to group)
[20:17:07] [INFO] [BloodDecal] Blood puddle created at (660.2084, 884.3167) (added to group)
[20:17:07] [INFO] [BloodDecal] Blood puddle created at (581.8086, 786.6807) (added to group)
[20:17:07] [INFO] [BloodDecal] Blood puddle created at (549.7548, 814.1733) (added to group)
[20:17:07] [INFO] [BloodDecal] Blood puddle created at (650.5144, 870.1671) (added to group)
[20:17:07] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:17:07] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:07] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:17:07] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:17:07] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:17:07] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:17:07] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:17:07] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:17:07] [INFO] [LastChance] All process modes restored
[20:17:07] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:17:07] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:17:07] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:17:07] [ENEMY] [Enemy1] Death animation component initialized
[20:17:07] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:07] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:17:07] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:17:07] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:17:07] [ENEMY] [Enemy2] Death animation component initialized
[20:17:07] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:07] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:17:07] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:17:07] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:17:07] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:07] [ENEMY] [Enemy3] Death animation component initialized
[20:17:07] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:07] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:17:07] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:17:07] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:17:07] [ENEMY] [Enemy4] Death animation component initialized
[20:17:07] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:07] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:17:07] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:17:07] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:17:07] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:07] [ENEMY] [Enemy5] Death animation component initialized
[20:17:07] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:07] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:17:07] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:17:07] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:17:07] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:07] [ENEMY] [Enemy6] Death animation component initialized
[20:17:07] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:07] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:17:07] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:17:07] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:17:07] [ENEMY] [Enemy7] Death animation component initialized
[20:17:07] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:07] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:17:07] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:17:07] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:17:07] [ENEMY] [Enemy8] Death animation component initialized
[20:17:07] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:07] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:17:07] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:17:07] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:17:07] [ENEMY] [Enemy9] Death animation component initialized
[20:17:07] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:07] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:17:07] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:17:07] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:17:07] [ENEMY] [Enemy10] Death animation component initialized
[20:17:07] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:07] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:17:07] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:17:07] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:17:07] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:17:07] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:17:07] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:17:07] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:17:07] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:17:07] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:17:07] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:17:07] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:17:07] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:17:07] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 4/4
[20:17:07] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:17:07] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:17:07] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:17:07] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:17:07] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:17:07] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:17:07] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:17:07] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:17:07] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:17:07] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:17:07] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:17:07] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:17:07] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:17:07] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:17:07] [INFO] [ScoreManager] Level started with 10 enemies
[20:17:07] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:17:07] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:17:07] [INFO] [ReplayManager] Replay data cleared
[20:17:07] [INFO] [BuildingLevel] Previous replay data cleared
[20:17:07] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:17:07] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:17:07] [INFO] [ReplayManager] Level: BuildingLevel
[20:17:07] [INFO] [ReplayManager] Player: Player (valid: True)
[20:17:07] [INFO] [ReplayManager] Enemies count: 10
[20:17:07] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:17:07] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:17:07] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:17:07] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:17:07] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:17:07] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:17:07] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:17:07] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:17:07] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:17:07] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:17:07] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:17:07] [INFO] [BuildingLevel] Replay recording started successfully
[20:17:07] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:17:07] [INFO] [CinemaEffects] Found player node: Player
[20:17:07] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:17:07] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:17:07] [ENEMY] [Enemy1] Registered as sound listener
[20:17:07] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[20:17:07] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:17:07] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:17:07] [ENEMY] [Enemy2] Registered as sound listener
[20:17:07] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[20:17:07] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:17:07] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:17:07] [ENEMY] [Enemy3] Registered as sound listener
[20:17:07] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[20:17:07] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:17:07] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:17:07] [ENEMY] [Enemy4] Registered as sound listener
[20:17:07] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[20:17:07] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:17:07] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:17:07] [ENEMY] [Enemy5] Registered as sound listener
[20:17:07] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[20:17:07] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:17:07] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:17:07] [ENEMY] [Enemy6] Registered as sound listener
[20:17:07] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[20:17:07] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:17:07] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:17:07] [ENEMY] [Enemy7] Registered as sound listener
[20:17:07] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[20:17:07] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:17:07] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:17:07] [ENEMY] [Enemy8] Registered as sound listener
[20:17:07] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[20:17:07] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:17:07] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:17:07] [ENEMY] [Enemy9] Registered as sound listener
[20:17:07] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[20:17:07] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:17:07] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:17:07] [ENEMY] [Enemy10] Registered as sound listener
[20:17:07] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[20:17:07] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:17:07] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:17:07] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:07] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:07] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:07] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:07] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:07] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:07] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=78.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:07] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:07] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:17:07] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:17:07] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:17:07] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:17:07] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:17:07] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:17:07] [INFO] [LastChance] Found player: Player
[20:17:07] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:17:07] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:17:07] [INFO] [LastChance] Connected to player Died signal (C#)
[20:17:07] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:17:07] [INFO] [BloodDecal] Blood puddle created at (581.6678, 803.8065) (added to group)
[20:17:07] [INFO] [BloodDecal] Blood puddle created at (662.9626, 853.7085) (added to group)
[20:17:07] [INFO] [BloodDecal] Blood puddle created at (617.2378, 786.9952) (added to group)
[20:17:08] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:17:09] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:17:09] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:17:09] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,902), corner_timer=0.30
[20:17:09] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,902), corner_timer=0.30
[20:17:09] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=164.4°, current=123.7°, player=(450,819), corner_timer=0.00
[20:17:09] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:17:09] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=166.8°, current=-64.9°, player=(450,808), corner_timer=0.00
[20:17:09] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,797), corner_timer=-0.02
[20:17:09] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:17:09] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,797), corner_timer=-0.02
[20:17:09] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:17:09] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,792), corner_timer=0.30
[20:17:09] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,792), corner_timer=0.30
[20:17:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 776.4999), source=PLAYER (MakarovPM), range=1469, listeners=20
[20:17:09] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:17:09] [ENEMY] [Enemy1] Heard gunshot at (460, 776.4999), source_type=0, intensity=0.01, distance=456
[20:17:09] [ENEMY] [Enemy2] Heard gunshot at (460, 776.4999), source_type=0, intensity=0.05, distance=234
[20:17:09] [ENEMY] [Enemy4] Heard gunshot at (460, 776.4999), source_type=0, intensity=0.02, distance=362
[20:17:09] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:17:09] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=70.4°, current=33.8°, player=(450,770), corner_timer=0.00
[20:17:09] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=77.2°, current=-101.3°, player=(450,770), corner_timer=0.00
[20:17:09] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-159.7°, current=168.8°, player=(450,770), corner_timer=0.00
[20:17:09] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:17:09] [ENEMY] [Enemy3] Hit: dmg=1, hp=4/4->3/4
[20:17:09] [INFO] [ImpactEffects] spawn_blood_effect called at (684.4485, 753.7583), dir=(0.999257, -0.038537), lethal=false
[20:17:09] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:17:09] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:17:09] [INFO] [ImpactEffects] Blood effect spawned at (684.4485, 753.7583) (scale=0.5)
[20:17:09] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=-178.3°, current=177.8°, player=(450,746), corner_timer=0.00
[20:17:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 751.9444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:17:09] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:17:09] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,745), corner_timer=-0.02
[20:17:09] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[20:17:09] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,745), corner_timer=0.30
[20:17:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:09] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:09] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:17:09] [INFO] [LastChance] Threat detected: Bullet
[20:17:09] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:17:09] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:17:10] [INFO] [EnemyGrenade] Unsafe throw distance (116 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:10] [INFO] [EnemyGrenade] Unsafe throw distance (116 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:10] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:17:10] [INFO] [Player] Spawning blood effect at (450, 745.9444), dir=(1, 0), lethal=False (C#)
[20:17:10] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 745.9444), dir=(1, 0), lethal=false
[20:17:10] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:17:10] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:17:10] [INFO] [ImpactEffects] Blood effect spawned at (450, 745.9444) (scale=1)
[20:17:10] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:17:10] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:17:10] [INFO] [EnemyGrenade] Unsafe throw distance (115 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(679.1555, 759.757), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:10] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:10] [INFO] [EnemyGrenade] Unsafe throw distance (114 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:10] [INFO] [EnemyGrenade] Unsafe throw distance (113 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:10] [INFO] [EnemyGrenade] Unsafe throw distance (112 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:10] [INFO] [EnemyGrenade] Unsafe throw distance (112 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(672.0981, 767.7553), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:10] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:10] [INFO] [BloodDecal] Blood puddle created at (732.786, 760.642) (added to group)
[20:17:10] [INFO] [EnemyGrenade] Unsafe throw distance (111 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:10] [INFO] [LastChance] Threat detected: Bullet
[20:17:10] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:17:10] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:17:10] [INFO] [EnemyGrenade] Unsafe throw distance (109 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:10] [INFO] [EnemyGrenade] Unsafe throw distance (108 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:10] [INFO] [Player] Stun ended (Issue #592)
[20:17:10] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:17:10] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[20:17:10] [INFO] [EnemyGrenade] Unsafe throw distance (106 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:10] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[20:17:10] [INFO] [BloodDecal] Blood puddle created at (733.3389, 749.144) (added to group)
[20:17:10] [INFO] [EnemyGrenade] Unsafe throw distance (105 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:10] [INFO] [EnemyGrenade] Unsafe throw distance (104 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:10] [INFO] [EnemyGrenade] Unsafe throw distance (103 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 751.9444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:17:10] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:17:10] [INFO] [BloodyFeet:Enemy3] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[20:17:10] [INFO] [EnemyGrenade] Unsafe throw distance (101 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:10] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,745), corner_timer=-0.02
[20:17:10] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[20:17:10] [INFO] [BloodDecal] Blood puddle created at (785.6002, 818.6855) (added to group)
[20:17:10] [INFO] [EnemyGrenade] Unsafe throw distance (100 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:10] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,745), corner_timer=0.30
[20:17:10] [INFO] [EnemyGrenade] Unsafe throw distance (99 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:10] [INFO] [BloodDecal] Blood puddle created at (824.5079, 838.7202) (added to group)
[20:17:10] [INFO] [BloodDecal] Blood puddle created at (779.6755, 800.9307) (added to group)
[20:17:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(612.6361, 763.43066), shooter_id=31591279625864, bullet_pos=(34.231205, 839.0985)
[20:17:10] [INFO] [Bullet] Using shooter_position, distance=583,33344
[20:17:10] [INFO] [Bullet] Distance to wall: 583,33344 (39,720245% of viewport)
[20:17:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:17:10] [INFO] [Bullet] Starting wall penetration at (34.231205, 839.0985)
[20:17:10] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[20:17:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(635.8821, 810.4579), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:10] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:10] [INFO] [Bullet] Raycast backward hit penetrating body at distance 44,41645
[20:17:10] [INFO] [Bullet] Body exited signal received for penetrating body
[20:17:10] [INFO] [Bullet] Exiting penetration at (-12.041183, 845.1519) after traveling 41,666668 pixels through wall
[20:17:10] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:17:10] [INFO] [LastChance] Threat detected: @Area2D@10021
[20:17:10] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:17:10] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:17:10] [INFO] [EnemyGrenade] Unsafe throw distance (97 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:10] [INFO] [BloodDecal] Blood puddle created at (509.3834, 768.8508) (added to group)
[20:17:10] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=106.3°, current=107.7°, player=(450,745), corner_timer=0.00
[20:17:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(605.3556, 768.9302), shooter_id=31591279625864, bullet_pos=(63.96478, 786.21643)
[20:17:10] [INFO] [Bullet] Using shooter_position, distance=541,6667
[20:17:10] [INFO] [Bullet] Distance to wall: 541,6667 (36,883083% of viewport)
[20:17:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:17:10] [INFO] [Bullet] Starting wall penetration at (63.96478, 786.21643)
[20:17:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(460, 751.9444), shooter_id=31594635070886, bullet_pos=(924.6487, 701.9245)
[20:17:10] [INFO] [Bullet] Using shooter_position, distance=467.333251953125
[20:17:10] [INFO] [Bullet] Distance to wall: 467.333251953125 (31.8215804755631% of viewport)
[20:17:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:17:10] [INFO] [Bullet] Caliber cannot penetrate walls
[20:17:10] [INFO] [EnemyGrenade] Unsafe throw distance (97 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:10] [INFO] [Bullet] Raycast backward hit penetrating body at distance 14,685603
[20:17:10] [INFO] [BloodDecal] Blood puddle created at (768.8834, 812.6089) (added to group)
[20:17:10] [INFO] [BloodDecal] Blood puddle created at (829.4512, 802.5721) (added to group)
[20:17:10] [INFO] [BloodDecal] Blood puddle created at (786.8306, 783.467) (added to group)
[20:17:10] [INFO] [Bullet] Body exited signal received for penetrating body
[20:17:10] [INFO] [Bullet] Exiting penetration at (17.321877, 787.7057) after traveling 41,666676 pixels through wall
[20:17:10] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:17:10] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:17:10] [INFO] [Player] Spawning blood effect at (450, 745.9444), dir=(1, 0), lethal=False (C#)
[20:17:10] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 745.9444), dir=(1, 0), lethal=false
[20:17:10] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:17:10] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:17:10] [INFO] [ImpactEffects] Blood effect spawned at (450, 745.9444) (scale=1)
[20:17:10] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:17:10] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:17:10] [INFO] [EnemyGrenade] Unsafe throw distance (96 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:10] [INFO] [EnemyGrenade] Unsafe throw distance (96 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:10] [INFO] [EnemyGrenade] Unsafe throw distance (95 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:10] [INFO] [EnemyGrenade] Unsafe throw distance (94 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:10] [INFO] [EnemyGrenade] Unsafe throw distance (94 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:10] [INFO] [BloodDecal] Blood puddle created at (563.1393, 823.9437) (added to group)
[20:17:10] [INFO] [Player] Stun ended (Issue #592)
[20:17:10] [INFO] [BloodDecal] Blood puddle created at (567.3945, 813.9787) (added to group)
[20:17:10] [INFO] [BloodDecal] Blood puddle created at (574.281, 727.231) (added to group)
[20:17:10] [INFO] [BloodDecal] Blood puddle created at (805.6921, 822.7811) (added to group)
[20:17:10] [INFO] [BloodDecal] Blood puddle created at (580.989, 780.173) (added to group)
[20:17:10] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[20:17:10] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[20:17:10] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(450,745), corner_timer=-0.02
[20:17:10] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[20:17:10] [INFO] [BloodDecal] Blood puddle created at (531.6179, 792.0474) (added to group)
[20:17:10] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(450,745), corner_timer=0.30
[20:17:10] [INFO] [BloodDecal] Blood puddle created at (520.0453, 792.5266) (added to group)
[20:17:10] [INFO] [BloodDecal] Blood puddle created at (537.3506, 749.4977) (added to group)
[20:17:10] [INFO] [BloodDecal] Blood puddle created at (522.286, 740.9739) (added to group)
[20:17:10] [INFO] [BloodDecal] Blood puddle created at (514.5913, 788.8141) (added to group)
[20:17:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(460, 751.9444), shooter_id=31594635070886, bullet_pos=(925.3264, 708.6795)
[20:17:10] [INFO] [Bullet] Using shooter_position, distance=467.333343505859
[20:17:10] [INFO] [Bullet] Distance to wall: 467.333343505859 (31.8215867095571% of viewport)
[20:17:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:17:10] [INFO] [Bullet] Caliber cannot penetrate walls
[20:17:10] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[20:17:10] [INFO] [BloodDecal] Blood puddle created at (509.886, 770.9303) (added to group)
[20:17:10] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:17:10] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:10] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:17:10] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:17:10] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:17:10] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:17:10] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:17:10] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:17:10] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:17:10] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:17:10] [ENEMY] [Enemy1] Death animation component initialized
[20:17:10] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:10] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:17:10] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:17:10] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:17:10] [ENEMY] [Enemy2] Death animation component initialized
[20:17:10] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:10] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:17:10] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:17:10] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:17:10] [ENEMY] [Enemy3] Death animation component initialized
[20:17:10] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:10] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:17:10] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:17:10] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:17:10] [ENEMY] [Enemy4] Death animation component initialized
[20:17:10] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:10] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:17:10] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:17:10] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:17:10] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:10] [ENEMY] [Enemy5] Death animation component initialized
[20:17:10] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:10] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:17:10] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:17:10] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:17:10] [ENEMY] [Enemy6] Death animation component initialized
[20:17:10] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:10] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:17:10] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:17:10] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:17:10] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:10] [ENEMY] [Enemy7] Death animation component initialized
[20:17:10] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:10] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:17:10] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:17:10] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:17:10] [ENEMY] [Enemy8] Death animation component initialized
[20:17:10] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:10] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:17:10] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:17:10] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:17:10] [ENEMY] [Enemy9] Death animation component initialized
[20:17:10] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:10] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:17:10] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:17:10] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:17:10] [ENEMY] [Enemy10] Death animation component initialized
[20:17:10] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:10] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:17:10] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:17:10] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:17:10] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:17:10] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:17:10] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:17:10] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:17:10] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:17:10] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:17:10] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:17:10] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:17:10] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:17:10] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 3/4
[20:17:10] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:17:10] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:17:10] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:17:10] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:17:10] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:17:10] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:17:10] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:17:10] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:17:10] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:17:10] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:17:10] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:17:10] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:17:10] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:17:10] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:17:10] [INFO] [ScoreManager] Level started with 10 enemies
[20:17:10] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:17:10] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:17:10] [INFO] [ReplayManager] Replay data cleared
[20:17:10] [INFO] [BuildingLevel] Previous replay data cleared
[20:17:10] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:17:10] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:17:10] [INFO] [ReplayManager] Level: BuildingLevel
[20:17:10] [INFO] [ReplayManager] Player: Player (valid: True)
[20:17:10] [INFO] [ReplayManager] Enemies count: 10
[20:17:10] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:17:10] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:17:10] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:17:10] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:17:10] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:17:10] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:17:10] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:17:10] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:17:10] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:17:10] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:17:10] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:17:10] [INFO] [BuildingLevel] Replay recording started successfully
[20:17:10] [INFO] [BloodDecal] Blood puddle created at (645.5747, 819.05) (added to group)
[20:17:10] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:17:10] [INFO] [CinemaEffects] Found player node: Player
[20:17:10] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:17:10] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:17:10] [ENEMY] [Enemy1] Registered as sound listener
[20:17:10] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[20:17:10] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:17:10] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:17:10] [ENEMY] [Enemy2] Registered as sound listener
[20:17:10] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[20:17:10] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:17:10] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:17:10] [ENEMY] [Enemy3] Registered as sound listener
[20:17:10] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[20:17:10] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:17:10] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:17:10] [ENEMY] [Enemy4] Registered as sound listener
[20:17:10] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[20:17:10] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:17:10] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:17:10] [ENEMY] [Enemy5] Registered as sound listener
[20:17:10] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[20:17:10] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:17:10] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:17:10] [ENEMY] [Enemy6] Registered as sound listener
[20:17:10] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[20:17:10] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:17:10] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:17:10] [ENEMY] [Enemy7] Registered as sound listener
[20:17:10] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[20:17:10] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:17:10] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:17:10] [ENEMY] [Enemy8] Registered as sound listener
[20:17:10] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[20:17:10] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:17:10] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:17:10] [ENEMY] [Enemy9] Registered as sound listener
[20:17:10] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[20:17:10] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:17:10] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:17:10] [ENEMY] [Enemy10] Registered as sound listener
[20:17:10] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[20:17:10] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:17:10] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:17:10] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:17:10] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:17:10] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:17:10] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:17:10] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:17:10] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:17:10] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=213.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:17:10] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:17:10] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:17:10] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:17:10] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:17:10] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:17:10] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:17:10] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:17:10] [INFO] [LastChance] Found player: Player
[20:17:10] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:17:10] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:17:10] [INFO] [LastChance] Connected to player Died signal (C#)
[20:17:10] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:17:10] [INFO] [BloodDecal] Blood puddle created at (582.5077, 810.7625) (added to group)
[20:17:10] [INFO] [BloodDecal] Blood puddle created at (535.1193, 799.0319) (added to group)
[20:17:10] [INFO] [BloodDecal] Blood puddle created at (626.7703, 863.1588) (added to group)
[20:17:11] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:17:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 803.6666), source=PLAYER (MakarovPM), range=1469, listeners=20
[20:17:12] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:17:12] [ENEMY] [Enemy1] Heard gunshot at (460, 803.6666), source_type=0, intensity=0.01, distance=481
[20:17:12] [ENEMY] [Enemy2] Heard gunshot at (460, 803.6666), source_type=0, intensity=0.04, distance=261
[20:17:12] [ENEMY] [Enemy3] Heard gunshot at (460, 803.6666), source_type=0, intensity=0.04, distance=246
[20:17:12] [ENEMY] [Enemy4] Heard gunshot at (460, 803.6666), source_type=0, intensity=0.02, distance=353
[20:17:12] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:17:12] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=71.5°, current=168.8°, player=(450,797), corner_timer=0.00
[20:17:12] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=78.6°, current=168.8°, player=(450,797), corner_timer=0.00
[20:17:12] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=169.2°, current=11.3°, player=(450,797), corner_timer=0.00
[20:17:12] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-163.7°, current=-101.3°, player=(450,797), corner_timer=0.00
[20:17:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(460, 803.6666), shooter_id=32680993360315, bullet_pos=(510.3941, 798.4178)
[20:17:12] [INFO] [Bullet] Using shooter_position, distance=50.6666793823242
[20:17:12] [INFO] [Bullet] Distance to wall: 50.6666793823242 (3.44998736695051% of viewport)
[20:17:12] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[20:17:12] [INFO] [Bullet] Caliber cannot penetrate walls
[20:17:12] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=170.4°, current=-176.7°, player=(450,792), corner_timer=0.00
[20:17:12] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:17:12] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:17:12] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(449,782), corner_timer=0.30
[20:17:12] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(449,782), corner_timer=0.30
[20:17:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5221, 751.9978), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(439.031, 752.0195), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:17:12] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:17:12] [INFO] [LastChance] Threat detected: Bullet
[20:17:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:17:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:17:12] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:17:12] [INFO] [Player] Spawning blood effect at (417.81412, 741.47955), dir=(1, 0), lethal=False (C#)
[20:17:12] [INFO] [ImpactEffects] spawn_blood_effect called at (417.8141, 741.4796), dir=(1, 0), lethal=false
[20:17:12] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:17:12] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:17:12] [INFO] [ImpactEffects] Blood effect spawned at (417.8141, 741.4796) (scale=1)
[20:17:12] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:17:12] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:17:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5221, 751.9978), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:12] [INFO] [LastChance] Threat detected: Bullet
[20:17:12] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:17:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:17:12] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(408,739), corner_timer=-0.02
[20:17:12] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:17:12] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(408,739), corner_timer=-0.02
[20:17:12] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:17:12] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(407,739), corner_timer=0.30
[20:17:12] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(407,739), corner_timer=0.30
[20:17:12] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:17:12] [INFO] [Player] Spawning blood effect at (405.03854, 738.642), dir=(1, 0), lethal=False (C#)
[20:17:12] [INFO] [ImpactEffects] spawn_blood_effect called at (405.0385, 738.642), dir=(1, 0), lethal=false
[20:17:12] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:17:12] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:17:12] [INFO] [ImpactEffects] Blood effect spawned at (405.0385, 738.642) (scale=1)
[20:17:12] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:17:12] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:17:12] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:17:12] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:17:12] [ENEMY] [Enemy3] Hit: dmg=1, hp=3/3->2/3
[20:17:12] [INFO] [ImpactEffects] spawn_blood_effect called at (689.5221, 751.9978), dir=(0.997994, -0.063314), lethal=false
[20:17:12] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:17:12] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:17:12] [INFO] [ImpactEffects] Blood effect spawned at (689.5221, 751.9978) (scale=0.5)
[20:17:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.5221, 751.9978), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:12] [INFO] [LastChance] Threat detected: Bullet
[20:17:12] [INFO] [LastChance] Triggering last chance effect!
[20:17:12] [INFO] [LastChance] Starting last chance effect:
[20:17:12] [INFO] [LastChance]   - Time will be frozen (except player)
[20:17:12] [INFO] [LastChance]   - Duration: 6.00 real seconds
[20:17:12] [INFO] [LastChance]   - Trigger: threat detected
[20:17:12] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:17:12] [INFO] [LastChance]   - Brightness: 0.60
[20:17:12] [INFO] [LastChance] Pushed bullet Bullet from distance 136.1 to 200.0
[20:17:12] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[20:17:12] [INFO] [LastChance] Set player Player and all 26 children to PROCESS_MODE_ALWAYS
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:17:12] [INFO] [LastChance] Skipping player node: Player
[20:17:12] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:17:12] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@10301
[20:17:12] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@10303
[20:17:12] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@10305
[20:17:12] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:17:12] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:17:12] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:17:12] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:17:12] [INFO] [Player] Stun ended (Issue #592)
[20:17:12] [INFO] [BloodDecal] Blood puddle created at (458.145, 750.7249) (added to group)
[20:17:12] [INFO] [LastChance] Freezing newly fired player bullet: Bullet9mm
[20:17:12] [INFO] [LastChance] Registered frozen player bullet: Bullet9mm
[20:17:12] [INFO] [LastChance] Freezing newly created explosion effect: PointLight2D
[20:17:12] [INFO] [LastChance] Registered frozen explosion effect: PointLight2D
[20:17:12] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@10315
[20:17:12] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@10315
[20:17:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(412.9237, 745.0364), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:17:12] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:17:12] [INFO] [BloodDecal] Blood puddle created at (493.8225, 732.1541) (added to group)
[20:17:12] [INFO] [BloodDecal] Blood puddle created at (497.3657, 764.0162) (added to group)
[20:17:12] [INFO] [BloodDecal] Blood puddle created at (457.1814, 779.6857) (added to group)
[20:17:12] [INFO] [BloodDecal] Blood puddle created at (783.5612, 767.58) (added to group)
[20:17:12] [INFO] [BloodDecal] Blood puddle created at (754.0896, 738.8196) (added to group)
[20:17:13] [INFO] [BloodDecal] Blood puddle created at (452.0688, 786.6925) (added to group)
[20:17:13] [INFO] [BloodDecal] Blood puddle created at (460.5333, 775.6076) (added to group)
[20:17:13] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@10326
[20:17:13] [INFO] [LastChance] Registered frozen player bullet: @Area2D@10326
[20:17:13] [INFO] [LastChance] Freezing newly created explosion effect: PointLight2D
[20:17:13] [INFO] [LastChance] Registered frozen explosion effect: PointLight2D
[20:17:13] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@10328
[20:17:13] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@10328
[20:17:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(372.3349, 757.6394), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:17:13] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:17:13] [INFO] [BloodDecal] Blood puddle created at (552.2673, 752.2863) (added to group)
[20:17:13] [INFO] [BloodDecal] Blood puddle created at (836.162, 742.878) (added to group)
[20:17:13] [INFO] [BloodDecal] Blood puddle created at (771.441, 786.587) (added to group)
[20:17:13] [INFO] [BloodDecal] Blood puddle created at (495.6954, 772.0951) (added to group)
[20:17:13] [INFO] [BloodDecal] Blood puddle created at (860.8341, 750.7056) (added to group)
[20:17:13] [INFO] [BloodDecal] Blood puddle created at (620.8906, 831.8141) (added to group)
[20:17:13] [INFO] [BloodDecal] Blood puddle created at (834.6449, 863.3575) (added to group)
[20:17:13] [INFO] [BloodDecal] Blood puddle created at (832.8358, 770.8964) (added to group)
[20:17:13] [INFO] [BloodDecal] Blood puddle created at (588.2144, 764.1354) (added to group)
[20:17:13] [INFO] [BloodDecal] Blood puddle created at (515.0234, 793.2631) (added to group)
[20:17:13] [INFO] [BloodDecal] Blood puddle created at (909.878, 760.0234) (added to group)
[20:17:13] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:17:13] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:13] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:17:13] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:17:13] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:17:13] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:17:13] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:17:13] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:17:13] [INFO] [LastChance] All process modes restored
[20:17:13] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:17:13] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:17:13] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:17:13] [ENEMY] [Enemy1] Death animation component initialized
[20:17:13] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:13] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:17:13] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:17:13] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:17:13] [ENEMY] [Enemy2] Death animation component initialized
[20:17:13] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:13] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:17:13] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:17:13] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:17:13] [ENEMY] [Enemy3] Death animation component initialized
[20:17:13] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:13] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:17:13] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:17:13] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:17:13] [ENEMY] [Enemy4] Death animation component initialized
[20:17:13] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:13] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:17:13] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:17:13] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:17:13] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:13] [ENEMY] [Enemy5] Death animation component initialized
[20:17:13] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:13] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:17:13] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:17:13] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:17:13] [ENEMY] [Enemy6] Death animation component initialized
[20:17:13] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:13] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:17:13] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:17:13] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:17:13] [ENEMY] [Enemy7] Death animation component initialized
[20:17:13] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:13] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:17:13] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:17:13] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:17:13] [ENEMY] [Enemy8] Death animation component initialized
[20:17:13] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:13] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:17:13] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:17:13] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:17:13] [ENEMY] [Enemy9] Death animation component initialized
[20:17:13] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:13] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:17:13] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:17:13] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:17:13] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:13] [ENEMY] [Enemy10] Death animation component initialized
[20:17:13] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:13] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:17:13] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:17:13] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:17:13] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:17:13] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:17:13] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:17:13] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:17:13] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:17:13] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:17:13] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:17:13] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:17:13] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:17:13] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 2/4
[20:17:13] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:17:13] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:17:13] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:17:13] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:17:13] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:17:13] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:17:13] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:17:13] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:17:13] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:17:13] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:17:13] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:17:13] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:17:13] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:17:13] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:17:13] [INFO] [ScoreManager] Level started with 10 enemies
[20:17:13] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:17:13] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:17:13] [INFO] [ReplayManager] Replay data cleared
[20:17:13] [INFO] [BuildingLevel] Previous replay data cleared
[20:17:13] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:17:13] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:17:13] [INFO] [ReplayManager] Level: BuildingLevel
[20:17:13] [INFO] [ReplayManager] Player: Player (valid: True)
[20:17:13] [INFO] [ReplayManager] Enemies count: 10
[20:17:13] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:17:13] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:17:13] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:17:13] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:17:13] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:17:13] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:17:13] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:17:13] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:17:13] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:17:13] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:17:13] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:17:13] [INFO] [BuildingLevel] Replay recording started successfully
[20:17:13] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:17:13] [INFO] [CinemaEffects] Found player node: Player
[20:17:13] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:17:13] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:17:13] [ENEMY] [Enemy1] Registered as sound listener
[20:17:13] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[20:17:13] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:17:13] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:17:13] [ENEMY] [Enemy2] Registered as sound listener
[20:17:13] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[20:17:13] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:17:13] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:17:13] [ENEMY] [Enemy3] Registered as sound listener
[20:17:13] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[20:17:13] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:17:13] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:17:13] [ENEMY] [Enemy4] Registered as sound listener
[20:17:13] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[20:17:13] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:17:13] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:17:13] [ENEMY] [Enemy5] Registered as sound listener
[20:17:13] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[20:17:13] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:17:13] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:17:13] [ENEMY] [Enemy6] Registered as sound listener
[20:17:13] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[20:17:13] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:17:13] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:17:13] [ENEMY] [Enemy7] Registered as sound listener
[20:17:13] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[20:17:13] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:17:13] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:17:13] [ENEMY] [Enemy8] Registered as sound listener
[20:17:13] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[20:17:13] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:17:13] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:17:13] [ENEMY] [Enemy9] Registered as sound listener
[20:17:13] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[20:17:13] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:17:13] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:17:13] [ENEMY] [Enemy10] Registered as sound listener
[20:17:13] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[20:17:13] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:17:13] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:17:13] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:13] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:13] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:13] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:13] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:13] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:13] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=157.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:13] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:13] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:17:13] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:17:13] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:17:13] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:17:13] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:17:13] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:17:13] [INFO] [LastChance] Found player: Player
[20:17:13] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:17:13] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:17:13] [INFO] [LastChance] Connected to player Died signal (C#)
[20:17:13] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:17:14] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:17:15] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:17:15] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:17:15] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,939), corner_timer=0.30
[20:17:15] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,939), corner_timer=0.30
[20:17:15] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,835), corner_timer=-0.02
[20:17:15] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:17:15] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,835), corner_timer=-0.02
[20:17:15] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:17:15] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,829), corner_timer=0.30
[20:17:15] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,829), corner_timer=0.30
[20:17:15] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=163.4°, current=-168.8°, player=(450,824), corner_timer=0.00
[20:17:15] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:17:15] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=165.8°, current=-9.9°, player=(450,813), corner_timer=0.00
[20:17:15] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:17:15] [ENEMY] [Enemy4] Memory: high confidence (0.88) - transitioning to PURSUING
[20:17:15] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:17:15] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=-160.6°, current=-67.5°, player=(450,776), corner_timer=0.00
[20:17:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.9736, 779.5283), source=PLAYER (MakarovPM), range=1469, listeners=20
[20:17:15] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:17:15] [ENEMY] [Enemy1] Heard gunshot at (460.9736, 779.5283), source_type=0, intensity=0.01, distance=459
[20:17:15] [ENEMY] [Enemy2] Heard gunshot at (460.9736, 779.5283), source_type=0, intensity=0.04, distance=237
[20:17:15] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:17:15] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=70.4°, current=-33.8°, player=(450,773), corner_timer=0.00
[20:17:15] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=77.2°, current=-157.5°, player=(450,773), corner_timer=0.00
[20:17:15] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[20:17:15] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,758), corner_timer=-0.02
[20:17:15] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[20:17:15] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,757), corner_timer=0.30
[20:17:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.9736, 761.8061), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:17:15] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:17:16] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=-149.3°, current=175.9°, player=(450,755), corner_timer=0.05
[20:17:16] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:17:16] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:17:16] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=RETREATING, target=-151.6°, current=85.3°, player=(450,755), corner_timer=0.00
[20:17:16] [ENEMY] [Enemy3] Hit: dmg=1, hp=4/4->3/4
[20:17:16] [INFO] [ImpactEffects] spawn_blood_effect called at (674.3315, 743.4318), dir=(0.999725, -0.023467), lethal=false
[20:17:16] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:17:16] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:17:16] [INFO] [ImpactEffects] Blood effect spawned at (674.3315, 743.4318) (scale=0.5)
[20:17:16] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P1:visible, state=RETREATING, target=176.8°, current=178.7°, player=(450,755), corner_timer=0.00
[20:17:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(674.3315, 743.4318), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:16] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:17:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(460.9736, 779.5283), shooter_id=33407513920942, bullet_pos=(911.1126, 801.3399)
[20:17:16] [INFO] [Bullet] Using shooter_position, distance=450.667144775391
[20:17:16] [INFO] [Bullet] Distance to wall: 450.667144775391 (30.6867545915623% of viewport)
[20:17:16] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:17:16] [INFO] [Bullet] Caliber cannot penetrate walls
[20:17:16] [INFO] [LastChance] Threat detected: Bullet
[20:17:16] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:17:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:17:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.9736, 761.8061), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:17:16] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:17:16] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,755), corner_timer=-0.02
[20:17:16] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[20:17:16] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:17:16] [INFO] [Player] Spawning blood effect at (450.9736, 755.8061), dir=(1, 0), lethal=False (C#)
[20:17:16] [INFO] [ImpactEffects] spawn_blood_effect called at (450.9736, 755.8061), dir=(1, 0), lethal=false
[20:17:16] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:17:16] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:17:16] [INFO] [ImpactEffects] Blood effect spawned at (450.9736, 755.8061) (scale=1)
[20:17:16] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:17:16] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:17:16] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:17:16] [ENEMY] [Enemy4] PURSUING corner check: angle -94.0°
[20:17:16] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,755), corner_timer=0.30
[20:17:16] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:17:16] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[20:17:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(658.2337, 722.8449), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:16] [INFO] [LastChance] Threat detected: Bullet
[20:17:16] [INFO] [LastChance] Triggering last chance effect!
[20:17:16] [INFO] [LastChance] Starting last chance effect:
[20:17:16] [INFO] [LastChance]   - Time will be frozen (except player)
[20:17:16] [INFO] [LastChance]   - Duration: 6.00 real seconds
[20:17:16] [INFO] [LastChance]   - Trigger: threat detected
[20:17:16] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:17:16] [INFO] [LastChance]   - Brightness: 0.60
[20:17:16] [INFO] [LastChance] Pushed bullet Bullet9mm from distance 110.7 to 200.0
[20:17:16] [INFO] [LastChance] Pushed bullet Bullet from distance 142.6 to 200.0
[20:17:16] [INFO] [LastChance] Pushed 2 threatening bullets away from player
[20:17:16] [INFO] [LastChance] Set player Player and all 26 children to PROCESS_MODE_ALWAYS
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:17:16] [INFO] [LastChance] Skipping player node: Player
[20:17:16] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:17:16] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@10594
[20:17:16] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@10597
[20:17:16] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:17:16] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:17:16] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:17:16] [INFO] [Player] Stun ended (Issue #592)
[20:17:16] [INFO] [BloodDecal] Blood puddle created at (762.8483, 758.5182) (added to group)
[20:17:16] [INFO] [BloodDecal] Blood puddle created at (738.8302, 783.4303) (added to group)
[20:17:16] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@10600
[20:17:16] [INFO] [LastChance] Registered frozen player bullet: @Area2D@10600
[20:17:16] [INFO] [LastChance] Freezing newly created explosion effect: PointLight2D
[20:17:16] [INFO] [LastChance] Registered frozen explosion effect: PointLight2D
[20:17:16] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@10602
[20:17:16] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@10602
[20:17:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.9736, 761.8061), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:17:16] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:17:16] [INFO] [BloodDecal] Blood puddle created at (728.6597, 748.0297) (added to group)
[20:17:16] [INFO] [BloodDecal] Blood puddle created at (775.7549, 751.4979) (added to group)
[20:17:16] [INFO] [BloodDecal] Blood puddle created at (750.2643, 785.1671) (added to group)
[20:17:16] [INFO] [BloodDecal] Blood puddle created at (501.7735, 783.7854) (added to group)
[20:17:16] [INFO] [BloodDecal] Blood puddle created at (554.0184, 736.9525) (added to group)
[20:17:16] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[20:17:16] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@10608
[20:17:16] [INFO] [LastChance] Registered frozen player bullet: @Area2D@10608
[20:17:16] [INFO] [LastChance] Freezing newly created explosion effect: PointLight2D
[20:17:16] [INFO] [LastChance] Registered frozen explosion effect: PointLight2D
[20:17:16] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@10610
[20:17:16] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@10610
[20:17:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.9736, 761.8061), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:17:16] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:17:16] [INFO] [BloodDecal] Blood puddle created at (780.731, 805.9645) (added to group)
[20:17:16] [INFO] [BloodDecal] Blood puddle created at (818.0164, 794.1852) (added to group)
[20:17:16] [INFO] [BloodDecal] Blood puddle created at (548.6426, 787.6642) (added to group)
[20:17:16] [INFO] [BloodDecal] Blood puddle created at (855.5464, 812.531) (added to group)
[20:17:16] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:17:16] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:16] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:17:16] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:17:16] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:17:16] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:17:16] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:17:16] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:17:16] [INFO] [LastChance] All process modes restored
[20:17:16] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:17:16] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:17:16] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:17:16] [ENEMY] [Enemy1] Death animation component initialized
[20:17:16] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:16] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:17:16] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:17:16] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:17:16] [ENEMY] [Enemy2] Death animation component initialized
[20:17:16] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:16] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:17:16] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:17:16] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:17:16] [ENEMY] [Enemy3] Death animation component initialized
[20:17:16] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:16] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:17:16] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:17:16] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:17:16] [ENEMY] [Enemy4] Death animation component initialized
[20:17:16] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:16] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:17:16] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:17:16] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:17:16] [ENEMY] [Enemy5] Death animation component initialized
[20:17:16] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:16] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:17:16] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:17:16] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:17:16] [ENEMY] [Enemy6] Death animation component initialized
[20:17:16] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:16] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:17:16] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:17:16] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:17:16] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:16] [ENEMY] [Enemy7] Death animation component initialized
[20:17:16] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:16] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:17:16] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:17:16] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:17:16] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:16] [ENEMY] [Enemy8] Death animation component initialized
[20:17:16] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:16] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:17:16] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:17:16] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:17:16] [ENEMY] [Enemy9] Death animation component initialized
[20:17:16] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:16] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:17:16] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:17:16] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:17:16] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:16] [ENEMY] [Enemy10] Death animation component initialized
[20:17:16] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:16] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:17:16] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:17:16] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:17:16] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:17:16] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:17:16] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:17:16] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:17:16] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:17:16] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:17:16] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:17:16] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:17:16] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:17:16] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 3/4
[20:17:16] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:17:16] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:17:16] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:17:16] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:17:16] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:17:16] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:17:16] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:17:16] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:17:16] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:17:16] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:17:16] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:17:16] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:17:16] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:17:16] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:17:16] [INFO] [ScoreManager] Level started with 10 enemies
[20:17:16] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:17:16] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:17:16] [INFO] [ReplayManager] Replay data cleared
[20:17:16] [INFO] [BuildingLevel] Previous replay data cleared
[20:17:16] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:17:16] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:17:16] [INFO] [ReplayManager] Level: BuildingLevel
[20:17:16] [INFO] [ReplayManager] Player: Player (valid: True)
[20:17:16] [INFO] [ReplayManager] Enemies count: 10
[20:17:16] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:17:16] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:17:16] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:17:16] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:17:16] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:17:16] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:17:16] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:17:16] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:17:16] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:17:16] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:17:16] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:17:16] [INFO] [BuildingLevel] Replay recording started successfully
[20:17:16] [INFO] [BloodDecal] Blood puddle created at (553.0685, 806.7943) (added to group)
[20:17:16] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:17:16] [INFO] [CinemaEffects] Found player node: Player
[20:17:16] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:17:16] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:17:16] [ENEMY] [Enemy1] Registered as sound listener
[20:17:16] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[20:17:16] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:17:16] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:17:16] [ENEMY] [Enemy2] Registered as sound listener
[20:17:16] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[20:17:16] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:17:16] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:17:16] [ENEMY] [Enemy3] Registered as sound listener
[20:17:16] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[20:17:16] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:17:16] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:17:16] [ENEMY] [Enemy4] Registered as sound listener
[20:17:16] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[20:17:16] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:17:16] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:17:16] [ENEMY] [Enemy5] Registered as sound listener
[20:17:16] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[20:17:16] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:17:16] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:17:16] [ENEMY] [Enemy6] Registered as sound listener
[20:17:16] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[20:17:16] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:17:16] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:17:16] [ENEMY] [Enemy7] Registered as sound listener
[20:17:16] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[20:17:16] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:17:16] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:17:16] [ENEMY] [Enemy8] Registered as sound listener
[20:17:16] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[20:17:16] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:17:16] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:17:16] [ENEMY] [Enemy9] Registered as sound listener
[20:17:16] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[20:17:16] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:17:16] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:17:16] [ENEMY] [Enemy10] Registered as sound listener
[20:17:16] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[20:17:16] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:17:16] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:17:16] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:17:16] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:17:16] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=281.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:17:16] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:17:16] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:17:16] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:17:16] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:17:16] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:17:16] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:17:16] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:17:16] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:17:17] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:17:17] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:17:17] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:17:17] [INFO] [LastChance] Found player: Player
[20:17:17] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:17:17] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:17:17] [INFO] [LastChance] Connected to player Died signal (C#)
[20:17:17] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:17:17] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:17:18] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:17:18] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:17:18] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,781), corner_timer=0.30
[20:17:18] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,781), corner_timer=0.30
[20:17:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 778.9443), source=PLAYER (MakarovPM), range=1469, listeners=20
[20:17:18] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:17:18] [ENEMY] [Enemy1] Heard gunshot at (460, 778.9443), source_type=0, intensity=0.01, distance=458
[20:17:18] [ENEMY] [Enemy2] Heard gunshot at (460, 778.9443), source_type=0, intensity=0.04, distance=237
[20:17:18] [ENEMY] [Enemy3] Heard gunshot at (460, 778.9443), source_type=0, intensity=0.04, distance=242
[20:17:18] [ENEMY] [Enemy4] Heard gunshot at (460, 778.9443), source_type=0, intensity=0.02, distance=361
[20:17:18] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:17:18] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=70.5°, current=168.8°, player=(450,772), corner_timer=0.00
[20:17:18] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=77.4°, current=-101.3°, player=(450,772), corner_timer=0.00
[20:17:18] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=174.8°, current=-78.7°, player=(450,772), corner_timer=0.00
[20:17:18] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-160.0°, current=-101.3°, player=(450,772), corner_timer=0.00
[20:17:18] [ENEMY] [Enemy3] Hit: dmg=1, hp=2/2->1/2
[20:17:18] [INFO] [ImpactEffects] spawn_blood_effect called at (689.3779, 750.9749), dir=(0.993589, -0.113051), lethal=false
[20:17:18] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:17:18] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:17:18] [INFO] [ImpactEffects] Blood effect spawned at (689.3779, 750.9749) (scale=0.5)
[20:17:18] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=-178.1°, current=173.5°, player=(450,742), corner_timer=0.00
[20:17:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.3779, 750.9749), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:18] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:18] [INFO] [LastChance] Threat detected: Bullet
[20:17:18] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:17:18] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:17:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 746.4444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:17:18] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:17:18] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:17:18] [INFO] [Player] Spawning blood effect at (450, 740.4444), dir=(1, 0), lethal=False (C#)
[20:17:18] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 740.4444), dir=(1, 0), lethal=false
[20:17:18] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:17:18] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:17:18] [INFO] [ImpactEffects] Blood effect spawned at (450, 740.4444) (scale=1)
[20:17:18] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:17:18] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:17:18] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,740), corner_timer=-0.02
[20:17:18] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:17:18] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,740), corner_timer=-0.02
[20:17:18] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:17:18] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:17:18] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,740), corner_timer=0.30
[20:17:18] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,740), corner_timer=0.30
[20:17:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(683.8589, 756.7663), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:18] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:18] [INFO] [Player] Stun ended (Issue #592)
[20:17:18] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:17:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(676.5003, 764.4882), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:18] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(773.4234, 909.9919), source=ENEMY (Enemy4), range=1469, listeners=10
[20:17:18] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
[20:17:18] [INFO] [BloodDecal] Blood puddle created at (772.1476, 725.9531) (added to group)
[20:17:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 746.4444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:17:18] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:17:18] [INFO] [LastChance] Threat detected: @Area2D@10873
[20:17:18] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:17:18] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:17:18] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:17:18] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[20:17:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(669.1415, 772.2101), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:18] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:18] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[20:17:18] [INFO] [BloodDecal] Blood puddle created at (759.1447, 758.035) (added to group)
[20:17:18] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:17:18] [INFO] [Player] Spawning blood effect at (450, 740.4444), dir=(1, 0), lethal=False (C#)
[20:17:18] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 740.4444), dir=(1, 0), lethal=false
[20:17:18] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:17:18] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:17:18] [INFO] [ImpactEffects] Blood effect spawned at (450, 740.4444) (scale=1)
[20:17:18] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:17:18] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:17:18] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:17:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(706.1307, 920.1059), shooter_id=34336015388081, bullet_pos=(497.87262, 925.70496)
[20:17:19] [INFO] [Bullet] Using shooter_position, distance=208,3333
[20:17:19] [INFO] [Bullet] Distance to wall: 208,3333 (14,185799% of viewport)
[20:17:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:17:19] [INFO] [Bullet] Starting wall penetration at (497.87262, 925.70496)
[20:17:19] [INFO] [LastChance] Threat detected: @Area2D@10881
[20:17:19] [INFO] [LastChance] Triggering last chance effect!
[20:17:19] [INFO] [LastChance] Starting last chance effect:
[20:17:19] [INFO] [LastChance]   - Time will be frozen (except player)
[20:17:19] [INFO] [LastChance]   - Duration: 6.00 real seconds
[20:17:19] [INFO] [LastChance]   - Trigger: threat detected
[20:17:19] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:17:19] [INFO] [LastChance]   - Brightness: 0.60
[20:17:19] [INFO] [LastChance] Pushed bullet @Area2D@10878 from distance 110.2 to 200.0
[20:17:19] [INFO] [LastChance] Pushed bullet @Area2D@10881 from distance 112.4 to 200.0
[20:17:19] [INFO] [LastChance] Pushed 2 threatening bullets away from player
[20:17:19] [INFO] [LastChance] Set player Player and all 26 children to PROCESS_MODE_ALWAYS
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:17:19] [INFO] [LastChance] Skipping player node: Player
[20:17:19] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:17:19] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@10868
[20:17:19] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@10870
[20:17:19] [INFO] [Bullet] Body exited signal received for penetrating body
[20:17:19] [INFO] [Bullet] Exiting penetration at (492.87442, 925.83936) after traveling 0 pixels through wall
[20:17:19] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:17:19] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@10876
[20:17:19] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@10880
[20:17:19] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:17:19] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:17:19] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:17:19] [INFO] [BloodDecal] Blood puddle created at (496.6742, 748.8983) (added to group)
[20:17:19] [INFO] [BloodDecal] Blood puddle created at (773.5038, 814.627) (added to group)
[20:17:19] [INFO] [BloodDecal] Blood puddle created at (829.5139, 803.6422) (added to group)
[20:17:19] [INFO] [BloodDecal] Blood puddle created at (760.0382, 763.7258) (added to group)
[20:17:19] [INFO] [BloodDecal] Blood puddle created at (522.7894, 789.8779) (added to group)
[20:17:19] [INFO] [BloodDecal] Blood puddle created at (541.1843, 798.1116) (added to group)
[20:17:19] [INFO] [Player] Stun ended (Issue #592)
[20:17:19] [INFO] [BloodDecal] Blood puddle created at (543.3119, 794.8466) (added to group)
[20:17:19] [INFO] [BloodDecal] Blood puddle created at (542.9379, 783.2164) (added to group)
[20:17:19] [INFO] [BloodDecal] Blood puddle created at (829.037, 770.3512) (added to group)
[20:17:19] [INFO] [BloodDecal] Blood puddle created at (784.4189, 819.5265) (added to group)
[20:17:19] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@10904
[20:17:19] [INFO] [LastChance] Registered frozen player bullet: @Area2D@10904
[20:17:19] [INFO] [LastChance] Freezing newly created explosion effect: PointLight2D
[20:17:19] [INFO] [LastChance] Registered frozen explosion effect: PointLight2D
[20:17:19] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@10906
[20:17:19] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@10906
[20:17:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 746.4444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:17:19] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:17:19] [INFO] [BloodDecal] Blood puddle created at (835.3311, 780.7849) (added to group)
[20:17:19] [INFO] [BloodDecal] Blood puddle created at (590.2582, 774.3883) (added to group)
[20:17:19] [INFO] [BloodDecal] Blood puddle created at (606.6539, 808.6624) (added to group)
[20:17:19] [INFO] [BloodDecal] Blood puddle created at (554.8929, 781.2681) (added to group)
[20:17:19] [INFO] [BloodDecal] Blood puddle created at (840.1792, 776.2502) (added to group)
[20:17:19] [INFO] [BloodDecal] Blood puddle created at (535.1474, 724.817) (added to group)
[20:17:19] [INFO] [BloodDecal] Blood puddle created at (620.5547, 768.2655) (added to group)
[20:17:19] [INFO] [BloodDecal] Blood puddle created at (568.1196, 743.5812) (added to group)
[20:17:19] [INFO] [BloodDecal] Blood puddle created at (551.9608, 773.2333) (added to group)
[20:17:19] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:17:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:19] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:17:19] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:17:19] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:17:19] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:17:19] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:17:19] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:17:19] [INFO] [LastChance] All process modes restored
[20:17:19] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:17:19] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:17:19] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:17:19] [ENEMY] [Enemy1] Death animation component initialized
[20:17:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:19] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:17:19] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:17:19] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:17:19] [ENEMY] [Enemy2] Death animation component initialized
[20:17:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:19] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:17:19] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:17:19] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:17:19] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:19] [ENEMY] [Enemy3] Death animation component initialized
[20:17:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:19] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:17:19] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:17:19] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:17:19] [ENEMY] [Enemy4] Death animation component initialized
[20:17:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:19] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:17:19] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:17:19] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:17:19] [ENEMY] [Enemy5] Death animation component initialized
[20:17:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:19] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:17:19] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:17:19] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:17:19] [ENEMY] [Enemy6] Death animation component initialized
[20:17:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:19] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:17:19] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:17:19] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:17:19] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:19] [ENEMY] [Enemy7] Death animation component initialized
[20:17:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:19] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:17:19] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:17:19] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:17:19] [ENEMY] [Enemy8] Death animation component initialized
[20:17:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:19] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:17:19] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:17:19] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:17:19] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:19] [ENEMY] [Enemy9] Death animation component initialized
[20:17:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:19] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:17:19] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:17:19] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:17:19] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:19] [ENEMY] [Enemy10] Death animation component initialized
[20:17:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:19] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:17:19] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:17:19] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:17:19] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:17:19] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:17:19] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:17:19] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:17:19] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:17:19] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:17:19] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:17:19] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:17:19] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:17:19] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 4/4
[20:17:19] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:17:19] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:17:19] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:17:19] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:17:19] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:17:19] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:17:19] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:17:19] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:17:19] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:17:19] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:17:19] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:17:19] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:17:19] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:17:19] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:17:19] [INFO] [ScoreManager] Level started with 10 enemies
[20:17:19] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:17:19] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:17:19] [INFO] [ReplayManager] Replay data cleared
[20:17:19] [INFO] [BuildingLevel] Previous replay data cleared
[20:17:19] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:17:19] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:17:19] [INFO] [ReplayManager] Level: BuildingLevel
[20:17:19] [INFO] [ReplayManager] Player: Player (valid: True)
[20:17:19] [INFO] [ReplayManager] Enemies count: 10
[20:17:19] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:17:19] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:17:19] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:17:19] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:17:19] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:17:19] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:17:19] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:17:19] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:17:19] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:17:19] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:17:19] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:17:19] [INFO] [BuildingLevel] Replay recording started successfully
[20:17:19] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:17:19] [INFO] [CinemaEffects] Found player node: Player
[20:17:19] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:17:19] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:17:19] [ENEMY] [Enemy1] Registered as sound listener
[20:17:19] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[20:17:19] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:17:19] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:17:19] [ENEMY] [Enemy2] Registered as sound listener
[20:17:19] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[20:17:19] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:17:19] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:17:19] [ENEMY] [Enemy3] Registered as sound listener
[20:17:19] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[20:17:19] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:17:19] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:17:19] [ENEMY] [Enemy4] Registered as sound listener
[20:17:19] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[20:17:19] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:17:19] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:17:19] [ENEMY] [Enemy5] Registered as sound listener
[20:17:19] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[20:17:19] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:17:19] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:17:19] [ENEMY] [Enemy6] Registered as sound listener
[20:17:19] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[20:17:19] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:17:19] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:17:19] [ENEMY] [Enemy7] Registered as sound listener
[20:17:19] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[20:17:19] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:17:19] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:17:19] [ENEMY] [Enemy8] Registered as sound listener
[20:17:19] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[20:17:19] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:17:19] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:17:19] [ENEMY] [Enemy9] Registered as sound listener
[20:17:19] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[20:17:19] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:17:19] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:17:19] [ENEMY] [Enemy10] Registered as sound listener
[20:17:19] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[20:17:19] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:17:19] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:17:19] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:17:19] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:17:19] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:17:19] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:17:19] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:17:19] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:17:19] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=213.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:17:19] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:17:19] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:17:19] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:17:19] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:17:19] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:17:19] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:17:19] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:17:19] [INFO] [LastChance] Found player: Player
[20:17:19] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:17:19] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:17:19] [INFO] [LastChance] Connected to player Died signal (C#)
[20:17:19] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:17:19] [INFO] [BloodDecal] Blood puddle created at (617.6561, 863.7835) (added to group)
[20:17:19] [INFO] [BloodDecal] Blood puddle created at (611.2706, 792.168) (added to group)
[20:17:19] [INFO] [BloodDecal] Blood puddle created at (546.8463, 797.2302) (added to group)
[20:17:19] [INFO] [BloodDecal] Blood puddle created at (550.459, 802.2349) (added to group)
[20:17:20] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:17:20] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=164.4°, current=-168.8°, player=(450,819), corner_timer=0.00
[20:17:20] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[20:17:20] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=166.8°, current=-8.9°, player=(450,808), corner_timer=0.00
[20:17:21] [ENEMY] [Enemy4] Memory: high confidence (0.89) - transitioning to PURSUING
[20:17:21] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[20:17:21] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:17:21] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:17:21] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=-162.1°, current=-101.3°, player=(450,786), corner_timer=0.00
[20:17:21] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,786), corner_timer=0.30
[20:17:21] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,786), corner_timer=0.30
[20:17:21] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[20:17:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 780.4444), source=PLAYER (MakarovPM), range=1469, listeners=20
[20:17:21] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:17:21] [ENEMY] [Enemy1] Heard gunshot at (460, 780.4444), source_type=0, intensity=0.01, distance=459
[20:17:21] [ENEMY] [Enemy2] Heard gunshot at (460, 780.4444), source_type=0, intensity=0.04, distance=238
[20:17:21] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:17:21] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=70.5°, current=-33.8°, player=(450,774), corner_timer=0.00
[20:17:21] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=77.4°, current=168.8°, player=(450,774), corner_timer=0.00
[20:17:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 768.4444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:17:21] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:17:21] [ENEMY] [Enemy3] Hit: dmg=1, hp=3/3->2/3
[20:17:21] [INFO] [ImpactEffects] spawn_blood_effect called at (684.451, 753.7694), dir=(0.997455, -0.071293), lethal=false
[20:17:21] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:17:21] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:17:21] [INFO] [ImpactEffects] Blood effect spawned at (684.451, 753.7694) (scale=0.5)
[20:17:21] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=177.9°, current=175.9°, player=(450,762), corner_timer=0.00
[20:17:21] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,762), corner_timer=-0.02
[20:17:21] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:17:21] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,762), corner_timer=-0.02
[20:17:21] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:17:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.451, 753.7694), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:21] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,762), corner_timer=0.30
[20:17:21] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,762), corner_timer=0.30
[20:17:21] [INFO] [LastChance] Threat detected: Bullet
[20:17:21] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:17:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:17:21] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:17:21] [ENEMY] [Enemy3] Hit: dmg=1, hp=2/3->1/3
[20:17:21] [INFO] [ImpactEffects] spawn_blood_effect called at (681.8471, 753.1944), dir=(0.989843, -0.142161), lethal=false
[20:17:21] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:17:21] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:17:21] [INFO] [ImpactEffects] Blood effect spawned at (681.8471, 753.1944) (scale=0.5)
[20:17:21] [INFO] [EnemyGrenade] Unsafe throw distance (232 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:21] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:17:21] [INFO] [Player] Spawning blood effect at (450, 762.4444), dir=(1, 0), lethal=False (C#)
[20:17:21] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 762.4444), dir=(1, 0), lethal=false
[20:17:21] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:17:21] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:17:21] [INFO] [ImpactEffects] Blood effect spawned at (450, 762.4444) (scale=1)
[20:17:21] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:17:21] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:17:21] [INFO] [EnemyGrenade] Unsafe throw distance (229 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:21] [INFO] [EnemyGrenade] Unsafe throw distance (227 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(676.6484, 752.0035), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:21] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:17:21] [INFO] [EnemyGrenade] Unsafe throw distance (224 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:21] [INFO] [LastChance] Threat detected: Bullet
[20:17:21] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:17:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:17:21] [INFO] [EnemyGrenade] Unsafe throw distance (222 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:21] [INFO] [EnemyGrenade] Unsafe throw distance (220 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:21] [ENEMY] [Enemy4] PURSUING corner check: angle -94.0°
[20:17:21] [INFO] [EnemyGrenade] Unsafe throw distance (218 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(667.6539, 746.5874), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:21] [INFO] [LastChance] Threat detected: @Area2D@11180
[20:17:21] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:17:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:17:21] [INFO] [EnemyGrenade] Unsafe throw distance (216 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:21] [INFO] [BloodDecal] Blood puddle created at (749.2158, 743.9334) (added to group)
[20:17:21] [INFO] [EnemyGrenade] Unsafe throw distance (214 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:21] [INFO] [Player] Stun ended (Issue #592)
[20:17:21] [INFO] [EnemyGrenade] Unsafe throw distance (212 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:21] [INFO] [BloodDecal] Blood puddle created at (741.8334, 752.9853) (added to group)
[20:17:21] [INFO] [BloodDecal] Blood puddle created at (760.8684, 787.2064) (added to group)
[20:17:21] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:17:21] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[20:17:21] [INFO] [EnemyGrenade] Unsafe throw distance (210 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(659.1204, 740.1875), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 768.4444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:17:21] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:17:21] [INFO] [LastChance] Threat detected: @Area2D@11185
[20:17:21] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:17:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:17:21] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:17:21] [INFO] [Player] Spawning blood effect at (450, 762.4444), dir=(1, 0), lethal=False (C#)
[20:17:21] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 762.4444), dir=(1, 0), lethal=false
[20:17:21] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:17:21] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:17:21] [INFO] [ImpactEffects] Blood effect spawned at (450, 762.4444) (scale=1)
[20:17:21] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:17:21] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:17:21] [INFO] [EnemyGrenade] Unsafe throw distance (208 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:21] [INFO] [BloodDecal] Blood puddle created at (768.1948, 776.1742) (added to group)
[20:17:21] [INFO] [BloodDecal] Blood puddle created at (792.4539, 813.5383) (added to group)
[20:17:21] [INFO] [EnemyGrenade] Unsafe throw distance (206 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:21] [INFO] [BloodyFeet:Enemy4] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[20:17:21] [INFO] [EnemyGrenade] Unsafe throw distance (205 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:21] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:17:21] [INFO] [Player] Spawning blood effect at (450, 762.4444), dir=(1, 0), lethal=False (C#)
[20:17:21] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 762.4444), dir=(1, 0), lethal=false
[20:17:21] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:17:21] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:17:21] [INFO] [ImpactEffects] Blood effect spawned at (450, 762.4444) (scale=1)
[20:17:21] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:17:21] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:17:21] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:17:21] [INFO] [EnemyGrenade] Unsafe throw distance (203 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(650.587, 733.7876), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:21] [INFO] [LastChance] Threat detected: @Area2D@11194
[20:17:21] [INFO] [LastChance] Triggering last chance effect!
[20:17:21] [INFO] [LastChance] Starting last chance effect:
[20:17:21] [INFO] [LastChance]   - Time will be frozen (except player)
[20:17:21] [INFO] [LastChance]   - Duration: 6.00 real seconds
[20:17:21] [INFO] [LastChance]   - Trigger: threat detected
[20:17:21] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:17:21] [INFO] [LastChance]   - Brightness: 0.60
[20:17:21] [INFO] [LastChance] Pushed bullet Bullet9mm from distance 110.2 to 200.0
[20:17:21] [INFO] [LastChance] Pushed bullet @Area2D@11194 from distance 135.2 to 200.0
[20:17:21] [INFO] [LastChance] Pushed 2 threatening bullets away from player
[20:17:21] [INFO] [LastChance] Set player Player and all 26 children to PROCESS_MODE_ALWAYS
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:17:21] [INFO] [LastChance] Skipping player node: Player
[20:17:21] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:17:21] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@11174
[20:17:21] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@11176
[20:17:21] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@11187
[20:17:21] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:17:21] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:17:21] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:17:21] [INFO] [BloodDecal] Blood puddle created at (756.0891, 769.261) (added to group)
[20:17:21] [INFO] [BloodDecal] Blood puddle created at (728.2727, 746.3871) (added to group)
[20:17:21] [INFO] [BloodDecal] Blood puddle created at (548.6269, 799.2151) (added to group)
[20:17:21] [INFO] [Player] Stun ended (Issue #592)
[20:17:21] [INFO] [BloodDecal] Blood puddle created at (848.2928, 801.0326) (added to group)
[20:17:21] [INFO] [BloodDecal] Blood puddle created at (570.4801, 772.285) (added to group)
[20:17:21] [INFO] [BloodDecal] Blood puddle created at (737.8471, 759.6232) (added to group)
[20:17:21] [INFO] [BloodDecal] Blood puddle created at (800.1719, 816.424) (added to group)
[20:17:21] [INFO] [BloodDecal] Blood puddle created at (764.2974, 767.8318) (added to group)
[20:17:21] [INFO] [BloodDecal] Blood puddle created at (796.5518, 748.6398) (added to group)
[20:17:21] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@11211
[20:17:21] [INFO] [LastChance] Registered frozen player bullet: @Area2D@11211
[20:17:21] [INFO] [LastChance] Freezing newly created explosion effect: PointLight2D
[20:17:21] [INFO] [LastChance] Registered frozen explosion effect: PointLight2D
[20:17:21] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@11213
[20:17:21] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@11213
[20:17:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 768.4444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:17:21] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:17:21] [INFO] [BloodDecal] Blood puddle created at (785.8715, 768.387) (added to group)
[20:17:21] [INFO] [BloodDecal] Blood puddle created at (527.8959, 790.9977) (added to group)
[20:17:21] [INFO] [BloodDecal] Blood puddle created at (540.814, 771.8303) (added to group)
[20:17:21] [INFO] [BloodDecal] Blood puddle created at (514.827, 769.1486) (added to group)
[20:17:21] [INFO] [BloodDecal] Blood puddle created at (808.5012, 814.5637) (added to group)
[20:17:21] [INFO] [BloodDecal] Blood puddle created at (607.2352, 763.6128) (added to group)
[20:17:21] [INFO] [BloodDecal] Blood puddle created at (548.9707, 738.6477) (added to group)
[20:17:21] [INFO] [BloodDecal] Blood puddle created at (625.9973, 800.8349) (added to group)
[20:17:21] [INFO] [BloodDecal] Blood puddle created at (545.9811, 736.6449) (added to group)
[20:17:21] [INFO] [BloodDecal] Blood puddle created at (498.0059, 809.3936) (added to group)
[20:17:21] [INFO] [BloodDecal] Blood puddle created at (607.0856, 813.3821) (added to group)
[20:17:21] [INFO] [BloodDecal] Blood puddle created at (537.4847, 778.419) (added to group)
[20:17:21] [INFO] [BloodDecal] Blood puddle created at (517.2798, 760.6732) (added to group)
[20:17:21] [INFO] [BloodDecal] Blood puddle created at (768.7255, 798.3445) (added to group)
[20:17:21] [INFO] [BloodDecal] Blood puddle created at (829.35, 747.7538) (added to group)
[20:17:22] [INFO] [BloodDecal] Blood puddle created at (623.0603, 804.7123) (added to group)
[20:17:22] [INFO] [BloodDecal] Blood puddle created at (526.3953, 772.7018) (added to group)
[20:17:22] [INFO] [BloodDecal] Blood puddle created at (592.0367, 739.398) (added to group)
[20:17:22] [INFO] [BloodDecal] Blood puddle created at (873.5239, 729.7831) (added to group)
[20:17:22] [INFO] [BloodDecal] Blood puddle created at (584.7343, 790.0221) (added to group)
[20:17:22] [INFO] [BloodDecal] Blood puddle created at (853.6238, 842.436) (added to group)
[20:17:22] [INFO] [BloodDecal] Blood puddle created at (570.1808, 814.6884) (added to group)
[20:17:22] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:17:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:22] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:17:22] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:17:22] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:17:22] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:17:22] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:17:22] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:17:22] [INFO] [LastChance] All process modes restored
[20:17:22] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:17:22] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:17:22] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:17:22] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:22] [ENEMY] [Enemy1] Death animation component initialized
[20:17:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:22] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:17:22] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:17:22] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:17:22] [ENEMY] [Enemy2] Death animation component initialized
[20:17:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:22] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:17:22] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:17:22] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:17:22] [ENEMY] [Enemy3] Death animation component initialized
[20:17:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:22] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:17:22] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:17:22] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:17:22] [ENEMY] [Enemy4] Death animation component initialized
[20:17:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:22] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:17:22] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:17:22] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:17:22] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:22] [ENEMY] [Enemy5] Death animation component initialized
[20:17:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:22] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:17:22] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:17:22] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:17:22] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:22] [ENEMY] [Enemy6] Death animation component initialized
[20:17:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:22] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:17:22] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:17:22] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:17:22] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:22] [ENEMY] [Enemy7] Death animation component initialized
[20:17:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:22] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:17:22] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:17:22] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:17:22] [ENEMY] [Enemy8] Death animation component initialized
[20:17:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:22] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:17:22] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:17:22] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:17:22] [ENEMY] [Enemy9] Death animation component initialized
[20:17:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:22] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:17:22] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:17:22] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:17:22] [ENEMY] [Enemy10] Death animation component initialized
[20:17:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:22] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:17:22] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:17:22] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:17:22] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:17:22] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:17:22] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:17:22] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:17:22] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:17:22] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:17:22] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:17:22] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:17:22] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:17:22] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 2/4
[20:17:22] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:17:22] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:17:22] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:17:22] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:17:22] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:17:22] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:17:22] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:17:22] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:17:22] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:17:22] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:17:22] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:17:22] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:17:22] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:17:22] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:17:22] [INFO] [ScoreManager] Level started with 10 enemies
[20:17:22] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:17:22] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:17:22] [INFO] [ReplayManager] Replay data cleared
[20:17:22] [INFO] [BuildingLevel] Previous replay data cleared
[20:17:22] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:17:22] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:17:22] [INFO] [ReplayManager] Level: BuildingLevel
[20:17:22] [INFO] [ReplayManager] Player: Player (valid: True)
[20:17:22] [INFO] [ReplayManager] Enemies count: 10
[20:17:22] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:17:22] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:17:22] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:17:22] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:17:22] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:17:22] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:17:22] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:17:22] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:17:22] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:17:22] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:17:22] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:17:22] [INFO] [BuildingLevel] Replay recording started successfully
[20:17:22] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:17:22] [INFO] [CinemaEffects] Found player node: Player
[20:17:22] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:17:22] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:17:22] [ENEMY] [Enemy1] Registered as sound listener
[20:17:22] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[20:17:22] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:17:22] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:17:22] [ENEMY] [Enemy2] Registered as sound listener
[20:17:22] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[20:17:22] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:17:22] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:17:22] [ENEMY] [Enemy3] Registered as sound listener
[20:17:22] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[20:17:22] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:17:22] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:17:22] [ENEMY] [Enemy4] Registered as sound listener
[20:17:22] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[20:17:22] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:17:22] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:17:22] [ENEMY] [Enemy5] Registered as sound listener
[20:17:22] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[20:17:22] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:17:22] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:17:22] [ENEMY] [Enemy6] Registered as sound listener
[20:17:22] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[20:17:22] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:17:22] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:17:22] [ENEMY] [Enemy7] Registered as sound listener
[20:17:22] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[20:17:22] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:17:22] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:17:22] [ENEMY] [Enemy8] Registered as sound listener
[20:17:22] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[20:17:22] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:17:22] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:17:22] [ENEMY] [Enemy9] Registered as sound listener
[20:17:22] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[20:17:22] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:17:22] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:17:22] [ENEMY] [Enemy10] Registered as sound listener
[20:17:22] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[20:17:22] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:17:22] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:17:22] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:22] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:22] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=281.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:22] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:22] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:22] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:22] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=157.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:22] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:22] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:17:22] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:17:22] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:17:22] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:17:22] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:17:22] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:17:22] [INFO] [LastChance] Found player: Player
[20:17:22] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:17:22] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:17:22] [INFO] [LastChance] Connected to player Died signal (C#)
[20:17:22] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:17:23] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:17:23] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:17:23] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:17:23] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,819), corner_timer=0.30
[20:17:23] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,819), corner_timer=0.30
[20:17:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 750.9444), source=PLAYER (MakarovPM), range=1469, listeners=20
[20:17:24] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:17:24] [ENEMY] [Enemy1] Heard gunshot at (460, 750.9444), source_type=0, intensity=0.01, distance=432
[20:17:24] [ENEMY] [Enemy2] Heard gunshot at (460, 750.9444), source_type=0, intensity=0.06, distance=210
[20:17:24] [ENEMY] [Enemy3] Heard gunshot at (460, 750.9444), source_type=0, intensity=0.04, distance=240
[20:17:24] [ENEMY] [Enemy4] Heard gunshot at (460, 750.9444), source_type=0, intensity=0.02, distance=371
[20:17:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:17:24] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=69.2°, current=-33.8°, player=(450,744), corner_timer=0.00
[20:17:24] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=75.6°, current=168.8°, player=(450,744), corner_timer=0.00
[20:17:24] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-178.8°, current=-78.7°, player=(450,744), corner_timer=0.00
[20:17:24] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-156.1°, current=168.8°, player=(450,744), corner_timer=0.00
[20:17:24] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,733), corner_timer=-0.02
[20:17:24] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:17:24] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,733), corner_timer=-0.02
[20:17:24] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:17:24] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,731), corner_timer=0.30
[20:17:24] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,731), corner_timer=0.30
[20:17:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 734.0095), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:17:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:17:24] [ENEMY] [Enemy3] Hit: dmg=1, hp=3/3->2/3
[20:17:24] [INFO] [ImpactEffects] spawn_blood_effect called at (689.3356, 749.7843), dir=(0.998111, -0.06143), lethal=false
[20:17:24] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:17:24] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:17:24] [INFO] [ImpactEffects] Blood effect spawned at (689.3356, 749.7843) (scale=0.5)
[20:17:24] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=-174.8°, current=176.5°, player=(450,728), corner_timer=0.00
[20:17:24] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:17:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.3356, 749.7843), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:24] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:24] [INFO] [LastChance] Threat detected: Bullet
[20:17:24] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:17:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:17:24] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:17:24] [INFO] [Player] Spawning blood effect at (450, 728.00946), dir=(1, 0), lethal=False (C#)
[20:17:24] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 728.0095), dir=(1, 0), lethal=false
[20:17:24] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:17:24] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:17:24] [INFO] [ImpactEffects] Blood effect spawned at (450, 728.0095) (scale=1)
[20:17:24] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:17:24] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:17:24] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:17:24] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:17:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(683.8375, 755.5955), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:24] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:24] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,728), corner_timer=-0.02
[20:17:24] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[20:17:24] [INFO] [Player] Stun ended (Issue #592)
[20:17:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 734.0095), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:17:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:17:24] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,728), corner_timer=0.30
[20:17:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(676.5067, 763.3438), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:24] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:24] [INFO] [LastChance] Threat detected: @Area2D@11498
[20:17:24] [INFO] [LastChance] Triggering last chance effect!
[20:17:24] [INFO] [LastChance] Starting last chance effect:
[20:17:24] [INFO] [LastChance]   - Time will be frozen (except player)
[20:17:24] [INFO] [LastChance]   - Duration: 6.00 real seconds
[20:17:24] [INFO] [LastChance]   - Trigger: threat detected
[20:17:24] [INFO] [LastChance]   - Sepia intensity: 0.70
[20:17:24] [INFO] [LastChance]   - Brightness: 0.60
[20:17:24] [INFO] [LastChance] Pushed bullet Bullet from distance 62.7 to 200.0
[20:17:24] [INFO] [LastChance] Pushed bullet Bullet9mm from distance 93.2 to 200.0
[20:17:24] [INFO] [LastChance] Pushed bullet @Area2D@11498 from distance 121.8 to 200.0
[20:17:24] [INFO] [LastChance] Pushed 3 threatening bullets away from player
[20:17:24] [INFO] [LastChance] Set player Player and all 26 children to PROCESS_MODE_ALWAYS
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[20:17:24] [INFO] [LastChance] Skipping player node: Player
[20:17:24] [INFO] [LastChance] Froze existing bullet casing: Casing
[20:17:24] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@11491
[20:17:24] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@11493
[20:17:24] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@11497
[20:17:24] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[20:17:24] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[20:17:24] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[20:17:24] [INFO] [BloodDecal] Blood puddle created at (786.7003, 741.9246) (added to group)
[20:17:24] [INFO] [BloodDecal] Blood puddle created at (759.7648, 795.07) (added to group)
[20:17:24] [INFO] [BloodDecal] Blood puddle created at (808.0862, 830.7269) (added to group)
[20:17:24] [INFO] [BloodDecal] Blood puddle created at (766.939, 805.7042) (added to group)
[20:17:24] [INFO] [BloodDecal] Blood puddle created at (517.7586, 722.4382) (added to group)
[20:17:24] [INFO] [BloodDecal] Blood puddle created at (497.7581, 773.4771) (added to group)
[20:17:24] [INFO] [BloodDecal] Blood puddle created at (802.1705, 839.3893) (added to group)
[20:17:24] [INFO] [BloodDecal] Blood puddle created at (827.7576, 798.3815) (added to group)
[20:17:24] [INFO] [BloodDecal] Blood puddle created at (522.6647, 774.9211) (added to group)
[20:17:24] [INFO] [BloodDecal] Blood puddle created at (558.2969, 765.8317) (added to group)
[20:17:24] [INFO] [BloodDecal] Blood puddle created at (579.3052, 708.7019) (added to group)
[20:17:24] [INFO] [BloodDecal] Blood puddle created at (850.8937, 783.5639) (added to group)
[20:17:24] [INFO] [BloodDecal] Blood puddle created at (564.9628, 820.0632) (added to group)
[20:17:24] [INFO] [BloodDecal] Blood puddle created at (589.3455, 811.2826) (added to group)
[20:17:24] [INFO] [BloodDecal] Blood puddle created at (578.6525, 798.9522) (added to group)
[20:17:24] [INFO] [BloodDecal] Blood puddle created at (524.4164, 777.6687) (added to group)
[20:17:24] [INFO] [BloodDecal] Blood puddle created at (611.4747, 717.1576) (added to group)
[20:17:24] [INFO] [BloodDecal] Blood puddle created at (903.3951, 773.7034) (added to group)
[20:17:25] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:17:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:25] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:17:25] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:17:25] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:17:25] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:17:25] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:17:25] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:17:25] [INFO] [LastChance] All process modes restored
[20:17:25] [INFO] [LastChance] Restored original colors to 5 player sprites
[20:17:25] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:17:25] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:17:25] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:25] [ENEMY] [Enemy1] Death animation component initialized
[20:17:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:25] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:17:25] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:17:25] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:17:25] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:25] [ENEMY] [Enemy2] Death animation component initialized
[20:17:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:25] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:17:25] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:17:25] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:17:25] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:25] [ENEMY] [Enemy3] Death animation component initialized
[20:17:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:25] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:17:25] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:17:25] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:17:25] [ENEMY] [Enemy4] Death animation component initialized
[20:17:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:25] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:17:25] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:17:25] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:17:25] [ENEMY] [Enemy5] Death animation component initialized
[20:17:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:25] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:17:25] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:17:25] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:17:25] [ENEMY] [Enemy6] Death animation component initialized
[20:17:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:25] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:17:25] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:17:25] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:17:25] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:25] [ENEMY] [Enemy7] Death animation component initialized
[20:17:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:25] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:17:25] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:17:25] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:17:25] [ENEMY] [Enemy8] Death animation component initialized
[20:17:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:25] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:17:25] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:17:25] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:17:25] [ENEMY] [Enemy9] Death animation component initialized
[20:17:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:25] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:17:25] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:17:25] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:17:25] [ENEMY] [Enemy10] Death animation component initialized
[20:17:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:25] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:17:25] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:17:25] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:17:25] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:17:25] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:17:25] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:17:25] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:17:25] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:17:25] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:17:25] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:17:25] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:17:25] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:17:25] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 4/4
[20:17:25] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:17:25] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:17:25] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:17:25] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:17:25] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:17:25] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:17:25] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:17:25] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:17:25] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:17:25] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:17:25] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:17:25] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:17:25] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:17:25] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:17:25] [INFO] [ScoreManager] Level started with 10 enemies
[20:17:25] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:17:25] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:17:25] [INFO] [ReplayManager] Replay data cleared
[20:17:25] [INFO] [BuildingLevel] Previous replay data cleared
[20:17:25] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:17:25] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:17:25] [INFO] [ReplayManager] Level: BuildingLevel
[20:17:25] [INFO] [ReplayManager] Player: Player (valid: True)
[20:17:25] [INFO] [ReplayManager] Enemies count: 10
[20:17:25] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:17:25] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:17:25] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:17:25] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:17:25] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:17:25] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:17:25] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:17:25] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:17:25] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:17:25] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:17:25] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:17:25] [INFO] [BuildingLevel] Replay recording started successfully
[20:17:25] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:17:25] [INFO] [CinemaEffects] Found player node: Player
[20:17:25] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:17:25] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:17:25] [ENEMY] [Enemy1] Registered as sound listener
[20:17:25] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[20:17:25] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:17:25] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:17:25] [ENEMY] [Enemy2] Registered as sound listener
[20:17:25] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[20:17:25] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:17:25] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:17:25] [ENEMY] [Enemy3] Registered as sound listener
[20:17:25] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[20:17:25] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:17:25] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:17:25] [ENEMY] [Enemy4] Registered as sound listener
[20:17:25] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[20:17:25] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:17:25] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:17:25] [ENEMY] [Enemy5] Registered as sound listener
[20:17:25] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[20:17:25] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:17:25] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:17:25] [ENEMY] [Enemy6] Registered as sound listener
[20:17:25] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[20:17:25] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:17:25] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:17:25] [ENEMY] [Enemy7] Registered as sound listener
[20:17:25] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[20:17:25] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:17:25] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:17:25] [ENEMY] [Enemy8] Registered as sound listener
[20:17:25] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[20:17:25] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:17:25] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:17:25] [ENEMY] [Enemy9] Registered as sound listener
[20:17:25] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[20:17:25] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:17:25] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:17:25] [ENEMY] [Enemy10] Registered as sound listener
[20:17:25] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[20:17:25] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:17:25] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:17:25] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:17:25] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:17:25] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=281.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:17:25] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:17:25] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:17:25] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:17:25] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:17:25] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[20:17:25] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:17:25] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:17:25] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:17:25] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:17:25] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:17:25] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:17:25] [INFO] [LastChance] Found player: Player
[20:17:25] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:17:25] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:17:25] [INFO] [LastChance] Connected to player Died signal (C#)
[20:17:25] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:17:26] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:17:26] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:17:26] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:17:26] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,781), corner_timer=0.30
[20:17:26] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,781), corner_timer=0.30
[20:17:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 773.4443), source=PLAYER (MakarovPM), range=1469, listeners=20
[20:17:26] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[20:17:26] [ENEMY] [Enemy1] Heard gunshot at (460, 773.4443), source_type=0, intensity=0.01, distance=453
[20:17:26] [ENEMY] [Enemy2] Heard gunshot at (460, 773.4443), source_type=0, intensity=0.05, distance=231
[20:17:26] [ENEMY] [Enemy3] Heard gunshot at (460, 773.4443), source_type=0, intensity=0.04, distance=241
[20:17:26] [ENEMY] [Enemy4] Heard gunshot at (460, 773.4443), source_type=0, intensity=0.02, distance=363
[20:17:26] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:17:26] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=70.2°, current=33.8°, player=(450,767), corner_timer=0.00
[20:17:26] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=77.1°, current=-67.5°, player=(450,767), corner_timer=0.00
[20:17:26] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=176.0°, current=-78.7°, player=(450,767), corner_timer=0.00
[20:17:26] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-159.3°, current=-101.3°, player=(450,767), corner_timer=0.00
[20:17:26] [ENEMY] [Enemy3] Hit: dmg=1, hp=2/2->1/2
[20:17:26] [INFO] [ImpactEffects] spawn_blood_effect called at (689.3593, 750.7424), dir=(0.99859, -0.053087), lethal=false
[20:17:26] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:17:26] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:17:26] [INFO] [ImpactEffects] Blood effect spawned at (689.3593, 750.7424) (scale=0.5)
[20:17:26] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=-176.8°, current=177.0°, player=(450,737), corner_timer=0.00
[20:17:26] [INFO] [EnemyGrenade] Unsafe throw distance (240 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:26] [INFO] [EnemyGrenade] Unsafe throw distance (240 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(689.3593, 750.7424), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:26] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:26] [INFO] [EnemyGrenade] Unsafe throw distance (240 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:26] [INFO] [LastChance] Threat detected: Bullet
[20:17:26] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[20:17:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:17:26] [INFO] [EnemyGrenade] Unsafe throw distance (240 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:26] [INFO] [EnemyGrenade] Unsafe throw distance (240 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 740.9444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:17:26] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:17:26] [INFO] [EnemyGrenade] Unsafe throw distance (240 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:26] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,734), corner_timer=-0.02
[20:17:26] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:17:26] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,734), corner_timer=-0.02
[20:17:26] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:17:26] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:17:26] [INFO] [Player] Spawning blood effect at (450, 734.9444), dir=(1, 0), lethal=False (C#)
[20:17:26] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 734.9444), dir=(1, 0), lethal=false
[20:17:26] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:17:26] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:17:26] [INFO] [ImpactEffects] Blood effect spawned at (450, 734.9444) (scale=1)
[20:17:26] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[20:17:26] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[20:17:26] [INFO] [EnemyGrenade] Unsafe throw distance (240 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:26] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,734), corner_timer=0.30
[20:17:26] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,734), corner_timer=0.30
[20:17:26] [INFO] [EnemyGrenade] Unsafe throw distance (240 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:26] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[20:17:26] [INFO] [EnemyGrenade] Unsafe throw distance (240 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (238 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (237 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (235 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(683.861, 756.5536), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (233 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (232 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [INFO] [Player] Stun ended (Issue #592)
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (230 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (228 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(676.5299, 764.3019), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (227 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(773.0274, 910.2519), source=ENEMY (Enemy4), range=1469, listeners=10
[20:17:27] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (744.6111, 756.8353) (added to group)
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (771.1658, 793.6194) (added to group)
[20:17:27] [INFO] [LastChance] Threat detected: @Area2D@11775
[20:17:27] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:17:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (225 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460, 740.9444), source=PLAYER (MakarovPM), range=1469, listeners=10
[20:17:27] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (224 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (750.8826, 766.2589) (added to group)
[20:17:27] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[20:17:27] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (222 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(669.1989, 772.05), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:27] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (221 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [INFO] [LastChance] Threat detected: @Area2D@11784
[20:17:27] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[20:17:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (219 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(705.2234, 916.01556), shooter_id=36719906786444, bullet_pos=(496.94794, 911.1013)
[20:17:27] [INFO] [Bullet] Using shooter_position, distance=208,33342
[20:17:27] [INFO] [Bullet] Distance to wall: 208,33342 (14,185805% of viewport)
[20:17:27] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:17:27] [INFO] [Bullet] Starting wall penetration at (496.94794, 911.1013)
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (218 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [INFO] [Bullet] Raycast backward hit penetrating body at distance 49,719585
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (515.1837, 783.1317) (added to group)
[20:17:27] [INFO] [Bullet] Body exited signal received for penetrating body
[20:17:27] [INFO] [Bullet] Exiting penetration at (450.29425, 910.00055) after traveling 41,666668 pixels through wall
[20:17:27] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (217 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(661.8678, 779.7983), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:27] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:17:27] [INFO] [Player] Spawning blood effect at (450, 734.9444), dir=(1, 0), lethal=False (C#)
[20:17:27] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 734.9444), dir=(1, 0), lethal=false
[20:17:27] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:17:27] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:17:27] [INFO] [ImpactEffects] Blood effect spawned at (450, 734.9444) (scale=1)
[20:17:27] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[20:17:27] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[20:17:27] [INFO] [LastChance] Threat detected: @Area2D@11787
[20:17:27] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:17:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (215 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (212 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,734), corner_timer=-0.02
[20:17:27] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[20:17:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(615.8301, 758.10065), shooter_id=36719554464649, bullet_pos=(34.64294, 808.09357)
[20:17:27] [INFO] [Bullet] Using shooter_position, distance=583,3333
[20:17:27] [INFO] [Bullet] Distance to wall: 583,3333 (39,72024% of viewport)
[20:17:27] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (210 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,734), corner_timer=0.30
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (800.4131, 810.3868) (added to group)
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (812.1872, 822.6049) (added to group)
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (522.6193, 724.1948) (added to group)
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (506.1346, 763.8211) (added to group)
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (208 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[20:17:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(645.7654, 797.5908), source=ENEMY (Enemy3), range=1469, listeners=10
[20:17:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[20:17:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(594.11816, 773.4281), shooter_id=36719554464649, bullet_pos=(398.42114, 701.97546)
[20:17:27] [INFO] [Bullet] Using shooter_position, distance=208,3334
[20:17:27] [INFO] [Bullet] Distance to wall: 208,3334 (14,185805% of viewport)
[20:17:27] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:17:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(608.4881, 763.3491), shooter_id=36719554464649, bullet_pos=(66.82204, 764.2267)
[20:17:27] [INFO] [Bullet] Using shooter_position, distance=541,6668
[20:17:27] [INFO] [Bullet] Distance to wall: 541,6668 (36,883087% of viewport)
[20:17:27] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:17:27] [INFO] [Bullet] Starting wall penetration at (66.82204, 764.2267)
[20:17:27] [INFO] [LastChance] Threat detected: @Area2D@11795
[20:17:27] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[20:17:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (203 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
[20:17:27] [INFO] [Bullet] Raycast backward hit penetrating body at distance 11,844585
[20:17:27] [INFO] [Bullet] Body exited signal received for penetrating body
[20:17:27] [INFO] [Bullet] Exiting penetration at (20.15543, 764.3023) after traveling 41,666668 pixels through wall
[20:17:27] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[20:17:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(460, 740.9444), shooter_id=36722909907559, bullet_pos=(909.7067, 711.5443)
[20:17:27] [INFO] [Bullet] Using shooter_position, distance=450.666717529297
[20:17:27] [INFO] [Bullet] Distance to wall: 450.666717529297 (30.6867254995902% of viewport)
[20:17:27] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:17:27] [INFO] [Bullet] Caliber cannot penetrate walls
[20:17:27] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=108.3°, current=109.7°, player=(450,734), corner_timer=0.00
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (204 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (815.8534, 775.2972) (added to group)
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (850.6539, 843.0093) (added to group)
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (202 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P4:velocity, state=RETREATING, target=155.4°, current=-148.4°, player=(450,734), corner_timer=0.00
[20:17:27] [INFO] [Player] Stun ended (Issue #592)
[20:17:27] [INFO] [Player] Stun applied for 130ms (Issue #592)
[20:17:27] [INFO] [Player] Spawning blood effect at (450, 734.9444), dir=(1, 0), lethal=False (C#)
[20:17:27] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 734.9444), dir=(1, 0), lethal=false
[20:17:27] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[20:17:27] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[20:17:27] [INFO] [ImpactEffects] Blood effect spawned at (450, 734.9444) (scale=1)
[20:17:27] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[20:17:27] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[20:17:27] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (198 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (820.3476, 849.6962) (added to group)
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (541.0538, 745.5003) (added to group)
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (541.6332, 793.552) (added to group)
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (197 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (195 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (194 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (538.5726, 770.2522) (added to group)
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (193 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [ENEMY] [Enemy4] ROT_CHANGE: P4:velocity -> P1:visible, state=RETREATING, target=-146.4°, current=-163.0°, player=(450,734), corner_timer=0.00
[20:17:27] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (192 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(594.11816, 773.4281), shooter_id=36719554464649, bullet_pos=(45.69725, 769.6999)
[20:17:27] [INFO] [Bullet] Using shooter_position, distance=548,4336
[20:17:27] [INFO] [Bullet] Distance to wall: 548,4336 (37,343853% of viewport)
[20:17:27] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:17:27] [INFO] [Bullet] Starting wall penetration at (45.69725, 769.6999)
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (191 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [INFO] [Player] Stun ended (Issue #592)
[20:17:27] [INFO] [Bullet] Raycast backward hit penetrating body at distance 26,469227
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (569.121, 773.647) (added to group)
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (504.4503, 770.4798) (added to group)
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (508.8098, 724.5884) (added to group)
[20:17:27] [INFO] [Bullet] Body exited signal received for penetrating body
[20:17:27] [INFO] [Bullet] Exiting penetration at (6.0055847, 777.32086) after traveling 35,416668 pixels through wall
[20:17:27] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (190 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (190 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (189 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (890.087, 763.9532) (added to group)
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (641.0398, 800.746) (added to group)
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (189 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(460, 740.9444), shooter_id=36722909907559, bullet_pos=(922.6582, 675.0032)
[20:17:27] [INFO] [Bullet] Using shooter_position, distance=467.333770751953
[20:17:27] [INFO] [Bullet] Distance to wall: 467.333770751953 (31.8216158015293% of viewport)
[20:17:27] [INFO] [Bullet] Within ricochet range - trying ricochet first
[20:17:27] [INFO] [Bullet] Caliber cannot penetrate walls
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (189 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (189 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,734), corner_timer=-0.02
[20:17:27] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (672.1997, 883.1522) (added to group)
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (189 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,734), corner_timer=0.30
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (190 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (188 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (650.9465, 825.6912) (added to group)
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (528.6248, 790.8472) (added to group)
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (505.3998, 738.4893) (added to group)
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (186 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (186 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [INFO] [EnemyGrenade] Unsafe throw distance (186 < 275 safe distance, blast=225, margin=50) - skipping throw
[20:17:27] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[20:17:27] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:17:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:27] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:17:27] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:17:27] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:17:27] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:17:27] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:17:27] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:17:27] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:17:27] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:17:27] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:27] [ENEMY] [Enemy1] Death animation component initialized
[20:17:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:27] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:17:27] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:17:27] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:17:27] [ENEMY] [Enemy2] Death animation component initialized
[20:17:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:27] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:17:27] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:17:27] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:17:27] [ENEMY] [Enemy3] Death animation component initialized
[20:17:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:27] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:17:27] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:17:27] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:17:27] [ENEMY] [Enemy4] Death animation component initialized
[20:17:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:27] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:17:27] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:17:27] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:17:27] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:27] [ENEMY] [Enemy5] Death animation component initialized
[20:17:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:27] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:17:27] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:17:27] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:17:27] [ENEMY] [Enemy6] Death animation component initialized
[20:17:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:27] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:17:27] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:17:27] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:17:27] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:27] [ENEMY] [Enemy7] Death animation component initialized
[20:17:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:27] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:17:27] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:17:27] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:17:27] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:27] [ENEMY] [Enemy8] Death animation component initialized
[20:17:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:27] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:17:27] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:17:27] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:17:27] [ENEMY] [Enemy9] Death animation component initialized
[20:17:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:27] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:17:27] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:17:27] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:17:27] [ENEMY] [Enemy10] Death animation component initialized
[20:17:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:27] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:17:27] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:17:27] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:17:27] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:17:27] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:17:27] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:17:27] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:17:27] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:17:27] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:17:27] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:17:27] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:17:27] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:17:27] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 4/4
[20:17:27] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:17:27] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:17:27] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:17:27] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:17:27] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:17:27] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:17:27] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:17:27] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:17:27] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:17:27] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:17:27] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:17:27] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:17:27] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:17:27] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[20:17:27] [INFO] [ScoreManager] Level started with 10 enemies
[20:17:27] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:17:27] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:17:27] [INFO] [ReplayManager] Replay data cleared
[20:17:27] [INFO] [BuildingLevel] Previous replay data cleared
[20:17:27] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[20:17:27] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:17:27] [INFO] [ReplayManager] Level: BuildingLevel
[20:17:27] [INFO] [ReplayManager] Player: Player (valid: True)
[20:17:27] [INFO] [ReplayManager] Enemies count: 10
[20:17:27] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[20:17:27] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:17:27] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:17:27] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:17:27] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:17:27] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:17:27] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:17:27] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:17:27] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:17:27] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:17:27] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:17:27] [INFO] [BuildingLevel] Replay recording started successfully
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (611.6542, 867.2516) (added to group)
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (562.336, 810.4433) (added to group)
[20:17:27] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:17:27] [INFO] [CinemaEffects] Found player node: Player
[20:17:27] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:17:27] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[20:17:27] [ENEMY] [Enemy1] Registered as sound listener
[20:17:27] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[20:17:27] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:17:27] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[20:17:27] [ENEMY] [Enemy2] Registered as sound listener
[20:17:27] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[20:17:27] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:17:27] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[20:17:27] [ENEMY] [Enemy3] Registered as sound listener
[20:17:27] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[20:17:27] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:17:27] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[20:17:27] [ENEMY] [Enemy4] Registered as sound listener
[20:17:27] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[20:17:27] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:17:27] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[20:17:27] [ENEMY] [Enemy5] Registered as sound listener
[20:17:27] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[20:17:27] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:17:27] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[20:17:27] [ENEMY] [Enemy6] Registered as sound listener
[20:17:27] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[20:17:27] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:17:27] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[20:17:27] [ENEMY] [Enemy7] Registered as sound listener
[20:17:27] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[20:17:27] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:17:27] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[20:17:27] [ENEMY] [Enemy8] Registered as sound listener
[20:17:27] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[20:17:27] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:17:27] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[20:17:27] [ENEMY] [Enemy9] Registered as sound listener
[20:17:27] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[20:17:27] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:17:27] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[20:17:27] [ENEMY] [Enemy10] Registered as sound listener
[20:17:27] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[20:17:27] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:17:27] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:17:27] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:27] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:27] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:27] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:27] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:27] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=225.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:27] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:27] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:27] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:17:27] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[20:17:27] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:17:27] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:17:27] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:17:27] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:17:27] [INFO] [LastChance] Found player: Player
[20:17:27] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:17:27] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:17:27] [INFO] [LastChance] Connected to player Died signal (C#)
[20:17:27] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (661.1752, 786.7444) (added to group)
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (625.1211, 744.3143) (added to group)
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (567.6906, 826.7103) (added to group)
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (575.2388, 736.3191) (added to group)
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (535.5573, 759.4874) (added to group)
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (645.7517, 890.0034) (added to group)
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (654.6453, 892.1946) (added to group)
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (602.4788, 810.3419) (added to group)
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (540.6839, 757.959) (added to group)
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (601.1938, 759.7344) (added to group)
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (565.2161, 784.7823) (added to group)
[20:17:27] [INFO] [BloodDecal] Blood puddle created at (565.8083, 809.3066) (added to group)
[20:17:28] [INFO] [BloodDecal] Blood puddle created at (551.7617, 787.3396) (added to group)
[20:17:28] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:17:29] [INFO] [PauseMenu] Armory button pressed
[20:17:29] [INFO] [PauseMenu] Creating new armory menu instance
[20:17:29] [INFO] [PauseMenu] armory_menu_scene resource path: res://scenes/ui/ArmoryMenu.tscn
[20:17:29] [INFO] [PauseMenu] Instance created, class: CanvasLayer, name: ArmoryMenu
[20:17:29] [INFO] [PauseMenu] Script attached: res://scripts/ui/armory_menu.gd
[20:17:29] [INFO] [PauseMenu] back_pressed signal exists on instance
[20:17:29] [INFO] [PauseMenu] back_pressed signal connected
[20:17:29] [INFO] [PauseMenu] Armory menu instance added as child, is_inside_tree: true
[20:17:29] [INFO] [PauseMenu] _populate_weapon_grid method exists
[20:17:29] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:17:30] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[20:17:31] [INFO] [GameManager] Weapon selected: silenced_pistol
[20:17:31] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:17:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:31] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:17:31] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:17:31] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:17:31] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:17:31] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:17:31] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:17:31] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:17:31] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:17:31] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:31] [ENEMY] [Enemy1] Death animation component initialized
[20:17:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:31] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:17:31] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:17:31] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:17:31] [ENEMY] [Enemy2] Death animation component initialized
[20:17:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:31] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:17:31] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:17:31] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:17:31] [ENEMY] [Enemy3] Death animation component initialized
[20:17:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:31] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:17:31] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:17:31] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:17:31] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:31] [ENEMY] [Enemy4] Death animation component initialized
[20:17:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:31] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:17:31] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:17:31] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:17:31] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:31] [ENEMY] [Enemy5] Death animation component initialized
[20:17:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:31] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:17:31] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:17:31] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:17:31] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:31] [ENEMY] [Enemy6] Death animation component initialized
[20:17:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:31] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:17:31] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:17:31] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:17:31] [ENEMY] [Enemy7] Death animation component initialized
[20:17:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:31] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:17:31] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:17:31] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:17:31] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:31] [ENEMY] [Enemy8] Death animation component initialized
[20:17:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:31] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:17:31] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:17:31] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:17:31] [ENEMY] [Enemy9] Death animation component initialized
[20:17:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:31] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:17:31] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:17:31] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:17:31] [ENEMY] [Enemy10] Death animation component initialized
[20:17:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:31] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:17:31] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:17:31] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:17:31] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:17:31] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:17:31] [INFO] [Player.Weapon] GameManager weapon selection: silenced_pistol (SilencedPistol)
[20:17:31] [INFO] [Player.Weapon] Removed default MakarovPM
[20:17:31] [INFO] [Player.Weapon] Equipped SilencedPistol (ammo: 13/13)
[20:17:31] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:17:31] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:17:31] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:17:31] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:17:31] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:17:31] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:17:31] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:17:31] [INFO] [Player] Ready! Ammo: 13/13, Grenades: 1/3, Health: 4/4
[20:17:31] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:17:31] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:17:31] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:17:31] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:17:31] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:17:31] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:17:31] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:17:31] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:17:31] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:17:31] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:17:31] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:17:31] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:17:31] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:17:31] [INFO] [BuildingLevel] Setting up weapon: silenced_pistol
[20:17:31] [INFO] [BuildingLevel] SilencedPistol already equipped by C# Player - skipping GDScript weapon swap
[20:17:31] [INFO] [ScoreManager] Level started with 10 enemies
[20:17:31] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:17:31] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:17:31] [INFO] [ReplayManager] Replay data cleared
[20:17:31] [INFO] [BuildingLevel] Previous replay data cleared
[20:17:31] [INFO] [ReplayManager] Detected player weapon: Silenced Pistol
[20:17:31] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:17:31] [INFO] [ReplayManager] Level: BuildingLevel
[20:17:31] [INFO] [ReplayManager] Player: Player (valid: True)
[20:17:31] [INFO] [ReplayManager] Enemies count: 10
[20:17:31] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/silenced_pistol_topdown.png
[20:17:31] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:17:31] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:17:31] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:17:31] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:17:31] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:17:31] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:17:31] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:17:31] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:17:31] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:17:31] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:17:31] [INFO] [BuildingLevel] Replay recording started successfully
[20:17:31] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:17:31] [INFO] [CinemaEffects] Found player node: Player
[20:17:31] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:17:31] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[20:17:31] [ENEMY] [Enemy1] Registered as sound listener
[20:17:31] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[20:17:31] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:17:31] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[20:17:31] [ENEMY] [Enemy2] Registered as sound listener
[20:17:31] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[20:17:31] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:17:31] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[20:17:31] [ENEMY] [Enemy3] Registered as sound listener
[20:17:31] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[20:17:31] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:17:31] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[20:17:31] [ENEMY] [Enemy4] Registered as sound listener
[20:17:31] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[20:17:31] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:17:31] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
[20:17:31] [ENEMY] [Enemy5] Registered as sound listener
[20:17:31] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[20:17:31] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:17:31] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[20:17:31] [ENEMY] [Enemy6] Registered as sound listener
[20:17:31] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[20:17:31] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:17:31] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[20:17:31] [ENEMY] [Enemy7] Registered as sound listener
[20:17:31] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[20:17:31] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:17:31] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[20:17:31] [ENEMY] [Enemy8] Registered as sound listener
[20:17:31] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[20:17:31] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:17:31] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[20:17:31] [ENEMY] [Enemy9] Registered as sound listener
[20:17:31] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[20:17:31] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:17:31] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[20:17:31] [ENEMY] [Enemy10] Registered as sound listener
[20:17:31] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[20:17:31] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:17:31] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:17:31] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:31] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:31] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:31] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:31] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:31] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:31] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:31] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:31] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:17:31] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[20:17:31] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[20:17:31] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:17:31] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:17:31] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:17:31] [INFO] [LastChance] Found player: Player
[20:17:31] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:17:31] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:17:31] [INFO] [LastChance] Connected to player Died signal (C#)
[20:17:31] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:17:32] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:17:33] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:17:33] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:17:33] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1250), corner_timer=0.30
[20:17:33] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1250), corner_timer=0.30
[20:17:33] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,1250), corner_timer=-0.02
[20:17:33] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:17:33] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,1250), corner_timer=-0.02
[20:17:33] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:17:33] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,1250), corner_timer=0.30
[20:17:33] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,1250), corner_timer=0.30
[20:17:33] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:17:33] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,1250), corner_timer=-0.02
[20:17:33] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[20:17:33] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,1250), corner_timer=0.30
[20:17:34] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,1250), corner_timer=-0.02
[20:17:34] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[20:17:34] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,1250), corner_timer=0.30
[20:17:34] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[20:17:35] [INFO] [ReplayManager] Recording frame 240 (4,0s): player_valid=True, enemies=10
[20:17:35] [INFO] [PauseMenu] Armory button pressed
[20:17:35] [INFO] [PauseMenu] Creating new armory menu instance
[20:17:35] [INFO] [PauseMenu] armory_menu_scene resource path: res://scenes/ui/ArmoryMenu.tscn
[20:17:35] [INFO] [PauseMenu] Instance created, class: CanvasLayer, name: ArmoryMenu
[20:17:35] [INFO] [PauseMenu] Script attached: res://scripts/ui/armory_menu.gd
[20:17:35] [INFO] [PauseMenu] back_pressed signal exists on instance
[20:17:35] [INFO] [PauseMenu] back_pressed signal connected
[20:17:35] [INFO] [PauseMenu] Armory menu instance added as child, is_inside_tree: true
[20:17:35] [INFO] [PauseMenu] _populate_weapon_grid method exists
[20:17:36] [INFO] [ReplayManager] Recording frame 300 (5,0s): player_valid=True, enemies=10
[20:17:37] [INFO] [ReplayManager] Recording frame 360 (6,0s): player_valid=True, enemies=10
[20:17:37] [INFO] [GameManager] Weapon selected: mini_uzi
[20:17:37] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:17:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:37] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[20:17:37] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[20:17:37] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[20:17:37] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[20:17:37] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[20:17:37] [INFO] [LastChance] Resetting all effects (scene change detected)
[20:17:37] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[20:17:37] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[20:17:37] [ENEMY] [Enemy1] Death animation component initialized
[20:17:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:37] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[20:17:37] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[20:17:37] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[20:17:37] [ENEMY] [Enemy2] Death animation component initialized
[20:17:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:37] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[20:17:37] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[20:17:37] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[20:17:37] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:37] [ENEMY] [Enemy3] Death animation component initialized
[20:17:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:37] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[20:17:37] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[20:17:37] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[20:17:37] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:37] [ENEMY] [Enemy4] Death animation component initialized
[20:17:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:37] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[20:17:37] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[20:17:37] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[20:17:37] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:37] [ENEMY] [Enemy5] Death animation component initialized
[20:17:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:37] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[20:17:37] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[20:17:37] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[20:17:37] [ENEMY] [Enemy6] Death animation component initialized
[20:17:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:37] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[20:17:37] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[20:17:37] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[20:17:37] [ENEMY] [Enemy7] Death animation component initialized
[20:17:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:37] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[20:17:37] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[20:17:37] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[20:17:37] [INFO] [EnemyGrenade] Initialized: 1 grenades
[20:17:37] [ENEMY] [Enemy8] Death animation component initialized
[20:17:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:37] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[20:17:37] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[20:17:37] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[20:17:37] [ENEMY] [Enemy9] Death animation component initialized
[20:17:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:37] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[20:17:37] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[20:17:37] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[20:17:37] [ENEMY] [Enemy10] Death animation component initialized
[20:17:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[20:17:37] [INFO] [BloodyFeet:Player] Footprint scene loaded
[20:17:37] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[20:17:37] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[20:17:37] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[20:17:37] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[20:17:37] [INFO] [Player.Weapon] GameManager weapon selection: mini_uzi (MiniUzi)
[20:17:37] [INFO] [Player.Weapon] Removed default MakarovPM
[20:17:37] [INFO] [Player.Weapon] Equipped MiniUzi (ammo: 32/32)
[20:17:37] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[20:17:37] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[20:17:37] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[20:17:37] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[20:17:37] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[20:17:37] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[20:17:37] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[20:17:37] [INFO] [Player] Ready! Ammo: 32/32, Grenades: 1/3, Health: 2/4
[20:17:37] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[20:17:37] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[20:17:37] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[20:17:37] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[20:17:37] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[20:17:37] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[20:17:37] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[20:17:37] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[20:17:37] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[20:17:37] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[20:17:37] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[20:17:37] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[20:17:37] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[20:17:37] [INFO] [BuildingLevel] Setting up weapon: mini_uzi
[20:17:37] [INFO] [BuildingLevel] MiniUzi already equipped by C# Player - skipping GDScript weapon swap
[20:17:37] [INFO] [ScoreManager] Level started with 10 enemies
[20:17:37] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[20:17:37] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[20:17:37] [INFO] [ReplayManager] Replay data cleared
[20:17:37] [INFO] [BuildingLevel] Previous replay data cleared
[20:17:37] [INFO] [ReplayManager] Detected player weapon: Mini UZI
[20:17:37] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[20:17:37] [INFO] [ReplayManager] Level: BuildingLevel
[20:17:37] [INFO] [ReplayManager] Player: Player (valid: True)
[20:17:37] [INFO] [ReplayManager] Enemies count: 10
[20:17:37] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/mini_uzi_topdown.png
[20:17:37] [INFO] [ReplayManager]   Enemy 0: Enemy1
[20:17:37] [INFO] [ReplayManager]   Enemy 1: Enemy2
[20:17:37] [INFO] [ReplayManager]   Enemy 2: Enemy3
[20:17:37] [INFO] [ReplayManager]   Enemy 3: Enemy4
[20:17:37] [INFO] [ReplayManager]   Enemy 4: Enemy5
[20:17:37] [INFO] [ReplayManager]   Enemy 5: Enemy6
[20:17:37] [INFO] [ReplayManager]   Enemy 6: Enemy7
[20:17:37] [INFO] [ReplayManager]   Enemy 7: Enemy8
[20:17:37] [INFO] [ReplayManager]   Enemy 8: Enemy9
[20:17:37] [INFO] [ReplayManager]   Enemy 9: Enemy10
[20:17:37] [INFO] [BuildingLevel] Replay recording started successfully
[20:17:37] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[20:17:37] [INFO] [CinemaEffects] Found player node: Player
[20:17:37] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[20:17:37] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 31)
[20:17:37] [ENEMY] [Enemy1] Registered as sound listener
[20:17:37] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[20:17:37] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[20:17:37] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 32)
[20:17:37] [ENEMY] [Enemy2] Registered as sound listener
[20:17:37] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[20:17:37] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[20:17:37] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 33)
[20:17:37] [ENEMY] [Enemy3] Registered as sound listener
[20:17:37] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[20:17:37] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[20:17:37] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 34)
[20:17:37] [ENEMY] [Enemy4] Registered as sound listener
[20:17:37] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[20:17:37] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[20:17:37] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 35)
[20:17:37] [ENEMY] [Enemy5] Registered as sound listener
[20:17:37] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[20:17:37] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[20:17:37] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 36)
[20:17:37] [ENEMY] [Enemy6] Registered as sound listener
[20:17:37] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[20:17:37] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[20:17:37] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 37)
[20:17:37] [ENEMY] [Enemy7] Registered as sound listener
[20:17:37] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[20:17:37] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[20:17:37] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 38)
[20:17:37] [ENEMY] [Enemy8] Registered as sound listener
[20:17:37] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[20:17:37] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[20:17:37] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 39)
[20:17:37] [ENEMY] [Enemy9] Registered as sound listener
[20:17:37] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[20:17:37] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[20:17:37] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 40)
[20:17:37] [ENEMY] [Enemy10] Registered as sound listener
[20:17:37] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[20:17:37] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[20:17:38] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[20:17:38] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:38] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:38] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=281.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:38] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:38] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:38] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:38] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=213.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:38] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[20:17:38] [INFO] [Player] Detecting weapon pose (frame 3)...
[20:17:38] [INFO] [Player] Detected weapon: Mini UZI (SMG pose)
[20:17:38] [INFO] [Player] Applied SMG arm pose: Left=(14, 6), Right=(1, 6)
[20:17:38] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[20:17:38] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[20:17:38] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[20:17:38] [INFO] [LastChance] Found player: Player
[20:17:38] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[20:17:38] [INFO] [LastChance] Connected to player Damaged signal (C#)
[20:17:38] [INFO] [LastChance] Connected to player Died signal (C#)
[20:17:38] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[20:17:38] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[20:17:39] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:17:39] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[20:17:39] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1250), corner_timer=0.30
[20:17:39] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1250), corner_timer=0.30
[20:17:39] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,1250), corner_timer=-0.02
[20:17:39] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[20:17:39] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,1250), corner_timer=-0.02
[20:17:39] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[20:17:39] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,1250), corner_timer=0.30
[20:17:39] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,1250), corner_timer=0.30
[20:17:39] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[20:17:40] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,1250), corner_timer=-0.02
[20:17:40] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[20:17:40] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,1250), corner_timer=0.30
[20:17:40] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,1250), corner_timer=-0.02
[20:17:40] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[20:17:40] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,1250), corner_timer=0.30
[20:17:40] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(450,1250), corner_timer=-0.02
[20:17:40] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[20:17:40] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(450,1250), corner_timer=0.30
[20:17:40] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[20:17:41] [INFO] [ReplayManager] Recording frame 240 (4,0s): player_valid=True, enemies=10
[20:17:42] [INFO] [PauseMenu] Armory button pressed
[20:17:42] [INFO] [PauseMenu] Creating new armory menu instance
[20:17:42] [INFO] [PauseMenu] armory_menu_scene resource path: res://scenes/ui/ArmoryMenu.tscn
[20:17:42] [INFO] [PauseMenu] Instance created, class: CanvasLayer, name: ArmoryMenu
[20:17:42] [INFO] [PauseMenu] Script attached: res://scripts/ui/armory_menu.gd
[20:17:42] [INFO] [PauseMenu] back_pressed signal exists on instance
[20:17:42] [INFO] [PauseMenu] back_pressed signal connected
[20:17:42] [INFO] [PauseMenu] Armory menu instance added as child, is_inside_tree: true
[20:17:42] [INFO] [PauseMenu] _populate_weapon_grid method exists
[20:17:42] [INFO] [ReplayManager] Recording frame 300 (5,0s): player_valid=True, enemies=10
[20:17:43] [INFO] [ReplayManager] Recording frame 360 (6,0s): player_valid=True, enemies=10
[20:17:44] [INFO] [ReplayManager] Recording frame 420 (7,0s): player_valid=True, enemies=10
[20:17:45] [INFO] [ReplayManager] Recording frame 480 (8,0s): player_valid=True, enemies=10
[20:17:46] [INFO] [ReplayManager] Recording frame 540 (9,0s): player_valid=True, enemies=10
[20:17:47] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(450,1250), corner_timer=-0.02
[20:17:47] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[20:17:47] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(450,1250), corner_timer=0.30
[20:17:47] [INFO] [ReplayManager] Recording frame 600 (10,0s): player_valid=True, enemies=10
[20:17:48] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:17:48] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(450,1250), corner_timer=-0.02
[20:17:48] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[20:17:48] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(450,1250), corner_timer=0.30
[20:17:48] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:17:48] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(450,1250), corner_timer=-0.02
[20:17:48] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[20:17:48] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(450,1250), corner_timer=0.30
[20:17:48] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:17:48] [INFO] [ReplayManager] Recording frame 660 (11,0s): player_valid=True, enemies=10
[20:17:48] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(450,1250), corner_timer=-0.02
[20:17:48] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[20:17:48] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(450,1250), corner_timer=0.30
[20:17:49] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:17:49] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(450,1250), corner_timer=-0.02
[20:17:49] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[20:17:49] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(450,1250), corner_timer=0.30
[20:17:49] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:17:49] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(450,1250), corner_timer=-0.02
[20:17:49] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[20:17:49] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(450,1250), corner_timer=0.30
[20:17:49] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[20:17:49] [INFO] [ReplayManager] Recording frame 720 (12,0s): player_valid=True, enemies=10
[20:17:49] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.5°, current=89.5°, player=(450,1250), corner_timer=-0.02
[20:17:49] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[20:17:49] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(450,1250), corner_timer=0.30
[20:17:50] [INFO] ------------------------------------------------------------
[20:17:50] [INFO] GAME LOG ENDED: 2026-02-07T20:17:50
[20:17:50] [INFO] ============================================================
