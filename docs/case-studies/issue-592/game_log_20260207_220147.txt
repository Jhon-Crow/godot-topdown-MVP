[22:01:47] [INFO] ============================================================
[22:01:47] [INFO] GAME LOG STARTED
[22:01:47] [INFO] ============================================================
[22:01:47] [INFO] Timestamp: 2026-02-07T22:01:47
[22:01:47] [INFO] Log file: I:/Загрузки/godot exe/пм/game_log_20260207_220147.txt
[22:01:47] [INFO] Executable: I:/Загрузки/godot exe/пм/Godot-Top-Down-Template.exe
[22:01:47] [INFO] OS: Windows
[22:01:47] [INFO] Debug build: false
[22:01:47] [INFO] Engine version: 4.3-stable (official)
[22:01:47] [INFO] Project: Godot Top-Down Template
[22:01:47] [INFO] ------------------------------------------------------------
[22:01:47] [INFO] [GameManager] GameManager ready
[22:01:47] [INFO] [ScoreManager] ScoreManager ready
[22:01:47] [INFO] [SoundPropagation] SoundPropagation autoload initialized
[22:01:47] [INFO] [ImpactEffects] Scenes loaded: DustEffect, BloodEffect, SparksEffect, BloodDecal
[22:01:47] [INFO] [ImpactEffects] ImpactEffectsManager ready - FULL VERSION with blood effects enabled
[22:01:47] [INFO] [ImpactEffects] Starting particle shader warmup (Issue #343 fix)...
[22:01:47] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:01:47] [INFO] [PenultimateHit] Saturation shader loaded successfully
[22:01:47] [INFO] [PenultimateHit] Starting shader warmup (Issue #343 fix)...
[22:01:47] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
[22:01:47] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
[22:01:47] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
[22:01:47] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
[22:01:47] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
[22:01:47] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:01:47] [INFO] [LastChance] Last chance shader loaded successfully
[22:01:47] [INFO] [LastChance] Starting shader warmup (Issue #343 fix)...
[22:01:47] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
[22:01:47] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
[22:01:47] [INFO] [LastChance]   Sepia intensity: 0.70
[22:01:47] [INFO] [LastChance]   Brightness: 0.60
[22:01:47] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
[22:01:47] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
[22:01:47] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/DefensiveGrenade.tscn
[22:01:47] [INFO] [ExperimentalSettings] ExperimentalSettings initialized - FOV: true, Complex grenades: false, AI prediction: true, Debug: true, Invincibility: true, Realistic visibility: false
[22:01:47] [INFO] [CinemaEffects] CinemaEffectsManager initializing (v5.3 - overlay approach with simplified death circle)...
[22:01:47] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:01:47] [INFO] [CinemaEffects] Created effects layer at layer 99
[22:01:47] [INFO] [CinemaEffects] Cinema shader loaded successfully (v5.0 - no screen_texture)
[22:01:47] [INFO] [CinemaEffects] Starting cinema shader warmup (Issue #343 fix)...
[22:01:47] [INFO] [CinemaEffects] Cinema film effect initialized (v5.3) - Configuration:
[22:01:47] [INFO] [CinemaEffects]   Approach: Overlay-based (no screen_texture)
[22:01:47] [INFO] [CinemaEffects]   Grain intensity: 0.15
[22:01:47] [INFO] [CinemaEffects]   Warm tint: 0.12 intensity
[22:01:47] [INFO] [CinemaEffects]   Sunny effect: 0.08 intensity
[22:01:47] [INFO] [CinemaEffects]   Vignette: 0.25 intensity
[22:01:47] [INFO] [CinemaEffects]   Film defects: 1.5% probability
[22:01:47] [INFO] [CinemaEffects]   White specks: 0.70 intensity, 4.0% probability
[22:01:47] [INFO] [CinemaEffects]   Death effects: cigarette burn + expanding spots + end of reel circle (160px, blinks 2x)
[22:01:47] [INFO] [CinemaEffects] Enabling effect after 1 frame(s)...
[22:01:48] [INFO] [GrenadeTimerHelper] Autoload ready
[22:01:48] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[22:01:48] [INFO] [PowerFantasy] Saturation shader loaded successfully
[22:01:48] [INFO] [PowerFantasy] PowerFantasyEffectsManager ready - Configuration:
[22:01:48] [INFO] [PowerFantasy]   Kill effect duration: 300ms
[22:01:48] [INFO] [PowerFantasy]   Grenade effect duration: 2000ms (2.0s)
[22:01:48] [INFO] [ProgressManager] ProgressManager ready, loaded 5 entries
[22:01:48] [INFO] [ReplayManager] ReplayManager ready (C# version loaded and _Ready called)
[22:01:48] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:01:48] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:01:48] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:01:48] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:01:48] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:01:48] [ENEMY] [Enemy1] Death animation component initialized
[22:01:48] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:01:48] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:01:48] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:01:48] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:01:48] [ENEMY] [Enemy2] Death animation component initialized
[22:01:48] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:01:48] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:01:48] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:01:48] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:01:48] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:01:48] [ENEMY] [Enemy3] Death animation component initialized
[22:01:48] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:01:48] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:01:48] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:01:48] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:01:48] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:01:48] [ENEMY] [Enemy4] Death animation component initialized
[22:01:48] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:01:48] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:01:48] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:01:48] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:01:48] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:01:48] [ENEMY] [Enemy5] Death animation component initialized
[22:01:48] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:01:48] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:01:48] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:01:48] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:01:48] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:01:48] [ENEMY] [Enemy6] Death animation component initialized
[22:01:48] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:01:48] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:01:48] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:01:48] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:01:48] [ENEMY] [Enemy7] Death animation component initialized
[22:01:48] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:01:48] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:01:48] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:01:48] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:01:48] [ENEMY] [Enemy8] Death animation component initialized
[22:01:48] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:01:48] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:01:48] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:01:48] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:01:48] [ENEMY] [Enemy9] Death animation component initialized
[22:01:48] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:01:48] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:01:48] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:01:48] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:01:48] [ENEMY] [Enemy10] Death animation component initialized
[22:01:48] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:01:48] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:01:48] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:01:48] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:01:48] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[22:01:48] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:01:48] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:01:48] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:01:48] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:01:48] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:01:48] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:01:48] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:01:48] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[22:01:48] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 3/4
[22:01:48] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:01:48] [INFO] [BloodDecal] Blood puddle created at (640, 360) (added to group)
[22:01:48] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:01:48] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:01:48] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:01:48] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:01:48] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:01:48] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:01:48] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:01:48] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:01:48] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:01:48] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:01:48] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:01:48] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:01:48] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[22:01:48] [INFO] [ScoreManager] Level started with 10 enemies
[22:01:48] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[22:01:48] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[22:01:48] [INFO] [ReplayManager] Replay data cleared
[22:01:48] [INFO] [BuildingLevel] Previous replay data cleared
[22:01:48] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[22:01:48] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[22:01:48] [INFO] [ReplayManager] Level: BuildingLevel
[22:01:48] [INFO] [ReplayManager] Player: Player (valid: True)
[22:01:48] [INFO] [ReplayManager] Enemies count: 10
[22:01:48] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[22:01:48] [INFO] [ReplayManager]   Enemy 0: Enemy1
[22:01:48] [INFO] [ReplayManager]   Enemy 1: Enemy2
[22:01:48] [INFO] [ReplayManager]   Enemy 2: Enemy3
[22:01:48] [INFO] [ReplayManager]   Enemy 3: Enemy4
[22:01:48] [INFO] [ReplayManager]   Enemy 4: Enemy5
[22:01:48] [INFO] [ReplayManager]   Enemy 5: Enemy6
[22:01:48] [INFO] [ReplayManager]   Enemy 6: Enemy7
[22:01:48] [INFO] [ReplayManager]   Enemy 7: Enemy8
[22:01:48] [INFO] [ReplayManager]   Enemy 8: Enemy9
[22:01:48] [INFO] [ReplayManager]   Enemy 9: Enemy10
[22:01:48] [INFO] [BuildingLevel] Replay recording started successfully
[22:01:48] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[22:01:48] [INFO] [CinemaEffects] Found player node: Player
[22:01:48] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:01:48] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:01:48] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
[22:01:48] [ENEMY] [Enemy1] Registered as sound listener
[22:01:48] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[22:01:48] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:01:48] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
[22:01:48] [ENEMY] [Enemy2] Registered as sound listener
[22:01:48] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[22:01:48] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:01:48] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
[22:01:48] [ENEMY] [Enemy3] Registered as sound listener
[22:01:48] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[22:01:48] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:01:48] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
[22:01:48] [ENEMY] [Enemy4] Registered as sound listener
[22:01:48] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[22:01:48] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:01:48] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
[22:01:48] [ENEMY] [Enemy5] Registered as sound listener
[22:01:48] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[22:01:48] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:01:48] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
[22:01:48] [ENEMY] [Enemy6] Registered as sound listener
[22:01:48] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[22:01:48] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:01:48] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
[22:01:48] [ENEMY] [Enemy7] Registered as sound listener
[22:01:48] [ENEMY] [Enemy7] Spawned at (1606.114, 893.8859), hp: 4, behavior: PATROL
[22:01:48] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:01:48] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
[22:01:48] [ENEMY] [Enemy8] Registered as sound listener
[22:01:48] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[22:01:48] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:01:48] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
[22:01:48] [ENEMY] [Enemy9] Registered as sound listener
[22:01:48] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[22:01:48] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:01:48] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
[22:01:48] [ENEMY] [Enemy10] Registered as sound listener
[22:01:48] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[22:01:48] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:01:48] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:01:48] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:01:48] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:01:48] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:01:48] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:01:48] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:01:48] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:01:48] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:01:48] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:01:48] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[22:01:48] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[22:01:48] [INFO] [PenultimateHit] Shader warmup complete in 471 ms
[22:01:48] [INFO] [LastChance] Shader warmup complete in 469 ms
[22:01:48] [INFO] [CinemaEffects] Cinema shader warmup complete in 413 ms
[22:01:48] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:01:48] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:01:48] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:01:48] [INFO] [LastChance] Found player: Player
[22:01:48] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:01:48] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:01:48] [INFO] [LastChance] Connected to player Died signal (C#)
[22:01:48] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:01:48] [INFO] [ImpactEffects] Particle shader warmup complete: 7 effects warmed up in 753 ms
[22:01:48] [INFO] [Player.Debug] Debug mode toggled: ON
[22:01:48] [INFO] [GameManager] Debug mode toggled: ON
[22:01:49] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[22:01:49] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:01:49] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[22:01:49] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1034), corner_timer=0.30
[22:01:49] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1034), corner_timer=0.30
[22:01:50] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(483,948), corner_timer=-0.02
[22:01:50] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:01:50] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(483,948), corner_timer=-0.02
[22:01:50] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[22:01:50] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(483,945), corner_timer=0.30
[22:01:50] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(483,945), corner_timer=0.30
[22:01:50] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[22:01:51] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[22:01:52] [INFO] [ReplayManager] Recording frame 240 (4,0s): player_valid=True, enemies=10
[22:01:53] [INFO] [ReplayManager] Recording frame 300 (5,0s): player_valid=True, enemies=10
[22:01:53] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(483,934), corner_timer=-0.02
[22:01:53] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[22:01:53] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(483,934), corner_timer=0.30
[22:01:53] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:01:53] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:01:53] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:01:53] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:01:53] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:01:53] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:01:53] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:01:53] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:01:53] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:01:53] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[22:01:53] [ENEMY] [Enemy1] Death animation component initialized
[22:01:53] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:01:53] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:01:53] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:01:53] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:01:53] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:01:53] [ENEMY] [Enemy2] Death animation component initialized
[22:01:53] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:01:53] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:01:53] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:01:53] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:01:53] [ENEMY] [Enemy3] Death animation component initialized
[22:01:53] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:01:53] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:01:53] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:01:53] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:01:53] [ENEMY] [Enemy4] Death animation component initialized
[22:01:53] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:01:53] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:01:53] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:01:53] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:01:53] [ENEMY] [Enemy5] Death animation component initialized
[22:01:53] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:01:53] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:01:53] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:01:53] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:01:53] [ENEMY] [Enemy6] Death animation component initialized
[22:01:53] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:01:53] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:01:53] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:01:53] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:01:53] [ENEMY] [Enemy7] Death animation component initialized
[22:01:53] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:01:53] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:01:53] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:01:53] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:01:53] [ENEMY] [Enemy8] Death animation component initialized
[22:01:53] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:01:53] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:01:53] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:01:53] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:01:53] [ENEMY] [Enemy9] Death animation component initialized
[22:01:53] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:01:53] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:01:53] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:01:53] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:01:53] [ENEMY] [Enemy10] Death animation component initialized
[22:01:53] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:01:53] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:01:53] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:01:53] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:01:53] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[22:01:53] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:01:53] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:01:53] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:01:53] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:01:53] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:01:53] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[22:01:53] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:01:53] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[22:01:53] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 10/10
[22:01:53] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:01:53] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:01:53] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:01:53] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:01:53] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:01:53] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:01:53] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:01:53] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:01:53] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:01:53] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:01:53] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:01:53] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:01:53] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:01:53] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[22:01:53] [INFO] [ScoreManager] Level started with 10 enemies
[22:01:53] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[22:01:53] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[22:01:53] [INFO] [ReplayManager] Replay data cleared
[22:01:53] [INFO] [BuildingLevel] Previous replay data cleared
[22:01:53] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[22:01:53] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[22:01:53] [INFO] [ReplayManager] Level: BuildingLevel
[22:01:53] [INFO] [ReplayManager] Player: Player (valid: True)
[22:01:53] [INFO] [ReplayManager] Enemies count: 10
[22:01:53] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[22:01:53] [INFO] [ReplayManager]   Enemy 0: Enemy1
[22:01:53] [INFO] [ReplayManager]   Enemy 1: Enemy2
[22:01:53] [INFO] [ReplayManager]   Enemy 2: Enemy3
[22:01:53] [INFO] [ReplayManager]   Enemy 3: Enemy4
[22:01:53] [INFO] [ReplayManager]   Enemy 4: Enemy5
[22:01:53] [INFO] [ReplayManager]   Enemy 5: Enemy6
[22:01:53] [INFO] [ReplayManager]   Enemy 6: Enemy7
[22:01:53] [INFO] [ReplayManager]   Enemy 7: Enemy8
[22:01:53] [INFO] [ReplayManager]   Enemy 8: Enemy9
[22:01:53] [INFO] [ReplayManager]   Enemy 9: Enemy10
[22:01:53] [INFO] [BuildingLevel] Replay recording started successfully
[22:01:53] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:01:53] [INFO] [CinemaEffects] Found player node: Player
[22:01:53] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:01:53] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[22:01:53] [ENEMY] [Enemy1] Registered as sound listener
[22:01:53] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[22:01:53] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:01:53] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[22:01:53] [ENEMY] [Enemy2] Registered as sound listener
[22:01:53] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[22:01:53] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:01:53] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[22:01:53] [ENEMY] [Enemy3] Registered as sound listener
[22:01:53] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[22:01:53] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:01:53] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[22:01:53] [ENEMY] [Enemy4] Registered as sound listener
[22:01:53] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[22:01:53] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:01:53] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[22:01:53] [ENEMY] [Enemy5] Registered as sound listener
[22:01:53] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[22:01:53] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:01:53] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[22:01:53] [ENEMY] [Enemy6] Registered as sound listener
[22:01:53] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[22:01:53] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:01:53] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[22:01:53] [ENEMY] [Enemy7] Registered as sound listener
[22:01:53] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[22:01:53] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:01:53] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[22:01:53] [ENEMY] [Enemy8] Registered as sound listener
[22:01:53] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[22:01:53] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:01:53] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[22:01:53] [ENEMY] [Enemy9] Registered as sound listener
[22:01:53] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[22:01:53] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:01:53] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[22:01:53] [ENEMY] [Enemy10] Registered as sound listener
[22:01:53] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[22:01:53] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:01:53] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[22:01:53] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:01:53] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:01:53] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:01:53] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:01:53] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:01:53] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:01:53] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:01:53] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:01:53] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:01:53] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[22:01:53] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[22:01:53] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:01:53] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:01:53] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:01:53] [INFO] [LastChance] Found player: Player
[22:01:53] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:01:53] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:01:53] [INFO] [LastChance] Connected to player Died signal (C#)
[22:01:53] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:01:54] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[22:01:55] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:01:55] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[22:01:55] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,940), corner_timer=0.30
[22:01:55] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,940), corner_timer=0.30
[22:01:55] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,854), corner_timer=-0.02
[22:01:55] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:01:55] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,854), corner_timer=-0.02
[22:01:55] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[22:01:55] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,851), corner_timer=0.30
[22:01:55] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,851), corner_timer=0.30
[22:01:55] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[22:01:56] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,764), corner_timer=-0.02
[22:01:56] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[22:01:56] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,761), corner_timer=0.30
[22:01:56] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,743), corner_timer=-0.02
[22:01:56] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[22:01:56] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,743), corner_timer=0.30
[22:01:56] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(450,743), corner_timer=-0.02
[22:01:56] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[22:01:56] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(450,743), corner_timer=0.30
[22:01:56] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[22:01:57] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(450,743), corner_timer=-0.02
[22:01:57] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[22:01:57] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(450,743), corner_timer=0.30
[22:01:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 749.7778), source=PLAYER (MakarovPM), range=1469, listeners=20
[22:01:57] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[22:01:57] [ENEMY] [Enemy1] Heard gunshot at (450, 749.7778), source_type=0, intensity=0.01, distance=427
[22:01:57] [ENEMY] [Enemy2] Heard gunshot at (450, 749.7778), source_type=0, intensity=0.06, distance=206
[22:01:57] [ENEMY] [Enemy3] Heard gunshot at (450, 749.7778), source_type=0, intensity=0.04, distance=250
[22:01:57] [ENEMY] [Enemy4] Heard gunshot at (450, 749.7778), source_type=0, intensity=0.02, distance=381
[22:01:57] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:01:57] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=69.1°, current=33.8°, player=(450,743), corner_timer=0.00
[22:01:57] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=75.5°, current=-67.5°, player=(450,743), corner_timer=0.00
[22:01:57] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-178.6°, current=11.3°, player=(450,743), corner_timer=0.00
[22:01:57] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-155.9°, current=168.8°, player=(450,743), corner_timer=0.00
[22:01:57] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=-178.6°, current=-164.5°, player=(450,743), corner_timer=0.00
[22:01:57] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:01:57] [ENEMY] [Enemy3] Hit: dmg=1, hp=4/4->3/4
[22:01:57] [INFO] [ImpactEffects] spawn_blood_effect called at (689.3367, 749.7346), dir=(0.999704, 0.024313), lethal=false
[22:01:57] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:01:57] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:01:57] [INFO] [ImpactEffects] Blood effect spawned at (689.3367, 749.7346) (scale=0.5)
[22:01:57] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(450,743), corner_timer=-0.02
[22:01:57] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[22:01:57] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(450,743), corner_timer=0.30
[22:01:57] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[22:01:57] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:01:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(683.9226, 755.6242), source=ENEMY (Enemy3), range=1469, listeners=10
[22:01:57] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:01:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(676.7039, 763.4772), source=ENEMY (Enemy3), range=1469, listeners=10
[22:01:57] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:01:57] [INFO] [LastChance] Threat detected: @Area2D@539
[22:01:57] [INFO] [LastChance] Not in hard mode - effect disabled
[22:01:57] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:01:57] [INFO] [ReplayManager] Recording frame 240 (4,0s): player_valid=True, enemies=10
[22:01:57] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[22:01:57] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[22:01:57] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[22:01:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(669.4851, 771.3301), source=ENEMY (Enemy3), range=1469, listeners=10
[22:01:57] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:01:57] [INFO] [LastChance] Threat detected: @Area2D@540
[22:01:57] [INFO] [LastChance] Not in hard mode - effect disabled
[22:01:57] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:01:57] [INFO] [Player] Spawning blood effect at (450, 743.7778), dir=(1, 0), lethal=False (C#)
[22:01:57] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 743.7778), dir=(1, 0), lethal=false
[22:01:57] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:01:57] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:01:57] [INFO] [ImpactEffects] Blood effect spawned at (450, 743.7778) (scale=1)
[22:01:57] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 9.0
[22:01:57] [INFO] [LastChance] Player health updated (C# Damaged): 9.0
[22:01:57] [INFO] [BloodDecal] Blood puddle created at (772.0431, 763.5928) (added to group)
[22:01:57] [INFO] [BloodDecal] Blood puddle created at (797.1326, 729.6189) (added to group)
[22:01:57] [INFO] [BloodDecal] Blood puddle created at (754.5256, 778.2704) (added to group)
[22:01:57] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(450,743), corner_timer=-0.02
[22:01:57] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[22:01:57] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(450,743), corner_timer=0.30
[22:01:57] [INFO] [Player] Spawning blood effect at (450, 743.7778), dir=(1, 0), lethal=False (C#)
[22:01:57] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 743.7778), dir=(1, 0), lethal=false
[22:01:57] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:01:57] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:01:57] [INFO] [ImpactEffects] Blood effect spawned at (450, 743.7778) (scale=1)
[22:01:57] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 8.0
[22:01:57] [INFO] [LastChance] Player health updated (C# Damaged): 8.0
[22:01:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(616.1711, 760.0015), shooter_id=702059383692, bullet_pos=(39.01664, 844.68)
[22:01:57] [INFO] [Bullet] Using shooter_position, distance=583,33325
[22:01:57] [INFO] [Bullet] Distance to wall: 583,33325 (39,720234% of viewport)
[22:01:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:01:57] [INFO] [Bullet] Starting wall penetration at (39.01664, 844.68)
[22:01:58] [INFO] [Bullet] Raycast backward hit penetrating body at distance 39,5749
[22:01:58] [INFO] [Bullet] Body exited signal received for penetrating body
[22:01:58] [INFO] [Bullet] Exiting penetration at (-7.155716, 851.4543) after traveling 41,666668 pixels through wall
[22:01:58] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:01:58] [INFO] [BloodDecal] Blood puddle created at (771.9254, 790.8896) (added to group)
[22:01:58] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:01:58] [INFO] [BloodDecal] Blood puddle created at (803.1037, 804.2268) (added to group)
[22:01:58] [INFO] [BloodDecal] Blood puddle created at (864.0873, 820.2933) (added to group)
[22:01:58] [INFO] [BloodDecal] Blood puddle created at (853.433, 822.5552) (added to group)
[22:01:58] [INFO] [BloodDecal] Blood puddle created at (518.1832, 764.8536) (added to group)
[22:01:58] [INFO] [BloodDecal] Blood puddle created at (508.3456, 748.268) (added to group)
[22:01:58] [INFO] [BloodDecal] Blood puddle created at (796.274, 835.1423) (added to group)
[22:01:58] [INFO] [BloodDecal] Blood puddle created at (546.9016, 745.7188) (added to group)
[22:01:58] [INFO] [BloodDecal] Blood puddle created at (523.6107, 763.0049) (added to group)
[22:01:58] [INFO] [BloodDecal] Blood puddle created at (824.5696, 845.8367) (added to group)
[22:01:58] [INFO] [BloodDecal] Blood puddle created at (888.6323, 771.9846) (added to group)
[22:01:58] [INFO] [BloodDecal] Blood puddle created at (540.4555, 805.8287) (added to group)
[22:01:58] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:01:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:01:58] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:01:58] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:01:58] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:01:58] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:01:58] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:01:58] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:01:58] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:01:58] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[22:01:58] [ENEMY] [Enemy1] Death animation component initialized
[22:01:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:01:58] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:01:58] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:01:58] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:01:58] [ENEMY] [Enemy2] Death animation component initialized
[22:01:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:01:58] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:01:58] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:01:58] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:01:58] [ENEMY] [Enemy3] Death animation component initialized
[22:01:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:01:58] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:01:58] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:01:58] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:01:58] [ENEMY] [Enemy4] Death animation component initialized
[22:01:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:01:58] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:01:58] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:01:58] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:01:58] [ENEMY] [Enemy5] Death animation component initialized
[22:01:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:01:58] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:01:58] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:01:58] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:01:58] [ENEMY] [Enemy6] Death animation component initialized
[22:01:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:01:58] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:01:58] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:01:58] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:01:58] [ENEMY] [Enemy7] Death animation component initialized
[22:01:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:01:58] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:01:58] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:01:58] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:01:58] [ENEMY] [Enemy8] Death animation component initialized
[22:01:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:01:58] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:01:58] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:01:58] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:01:58] [ENEMY] [Enemy9] Death animation component initialized
[22:01:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:01:58] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:01:58] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:01:58] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:01:58] [ENEMY] [Enemy10] Death animation component initialized
[22:01:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:01:58] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:01:58] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:01:58] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:01:58] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[22:01:58] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:01:58] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:01:58] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:01:58] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:01:58] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:01:58] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[22:01:58] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:01:58] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[22:01:58] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 10/10
[22:01:58] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:01:58] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:01:58] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:01:58] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:01:58] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:01:58] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:01:58] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:01:58] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:01:58] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:01:58] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:01:58] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:01:58] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:01:58] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:01:58] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[22:01:58] [INFO] [ScoreManager] Level started with 10 enemies
[22:01:58] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[22:01:58] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[22:01:58] [INFO] [ReplayManager] Replay data cleared
[22:01:58] [INFO] [BuildingLevel] Previous replay data cleared
[22:01:58] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[22:01:58] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[22:01:58] [INFO] [ReplayManager] Level: BuildingLevel
[22:01:58] [INFO] [ReplayManager] Player: Player (valid: True)
[22:01:58] [INFO] [ReplayManager] Enemies count: 10
[22:01:58] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[22:01:58] [INFO] [ReplayManager]   Enemy 0: Enemy1
[22:01:58] [INFO] [ReplayManager]   Enemy 1: Enemy2
[22:01:58] [INFO] [ReplayManager]   Enemy 2: Enemy3
[22:01:58] [INFO] [ReplayManager]   Enemy 3: Enemy4
[22:01:58] [INFO] [ReplayManager]   Enemy 4: Enemy5
[22:01:58] [INFO] [ReplayManager]   Enemy 5: Enemy6
[22:01:58] [INFO] [ReplayManager]   Enemy 6: Enemy7
[22:01:58] [INFO] [ReplayManager]   Enemy 7: Enemy8
[22:01:58] [INFO] [ReplayManager]   Enemy 8: Enemy9
[22:01:58] [INFO] [ReplayManager]   Enemy 9: Enemy10
[22:01:58] [INFO] [BuildingLevel] Replay recording started successfully
[22:01:58] [INFO] [BloodDecal] Blood puddle created at (566.2758, 803.3972) (added to group)
[22:01:58] [INFO] [BloodDecal] Blood puddle created at (549.0419, 755.3416) (added to group)
[22:01:58] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:01:58] [INFO] [CinemaEffects] Found player node: Player
[22:01:58] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:01:58] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[22:01:58] [ENEMY] [Enemy1] Registered as sound listener
[22:01:58] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[22:01:58] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:01:58] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[22:01:58] [ENEMY] [Enemy2] Registered as sound listener
[22:01:58] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[22:01:58] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:01:58] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[22:01:58] [ENEMY] [Enemy3] Registered as sound listener
[22:01:58] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[22:01:58] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:01:58] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[22:01:58] [ENEMY] [Enemy4] Registered as sound listener
[22:01:58] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[22:01:58] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:01:58] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[22:01:58] [ENEMY] [Enemy5] Registered as sound listener
[22:01:58] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[22:01:58] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:01:58] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[22:01:58] [ENEMY] [Enemy6] Registered as sound listener
[22:01:58] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[22:01:58] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:01:58] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[22:01:58] [ENEMY] [Enemy7] Registered as sound listener
[22:01:58] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[22:01:58] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:01:58] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[22:01:58] [ENEMY] [Enemy8] Registered as sound listener
[22:01:58] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[22:01:58] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:01:58] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[22:01:58] [ENEMY] [Enemy9] Registered as sound listener
[22:01:58] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[22:01:58] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:01:58] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[22:01:58] [ENEMY] [Enemy10] Registered as sound listener
[22:01:58] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[22:01:58] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:01:58] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[22:01:58] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:01:58] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:01:58] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=236.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:01:58] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:01:58] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:01:58] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:01:58] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=78.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:01:58] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:01:58] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:01:58] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[22:01:58] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[22:01:58] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:01:58] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:01:58] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:01:58] [INFO] [LastChance] Found player: Player
[22:01:58] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:01:58] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:01:58] [INFO] [LastChance] Connected to player Died signal (C#)
[22:01:58] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:01:58] [INFO] [BloodDecal] Blood puddle created at (528.1426, 779.3044) (added to group)
[22:01:58] [INFO] [BloodDecal] Blood puddle created at (605.9832, 776.7238) (added to group)
[22:01:58] [INFO] [BloodDecal] Blood puddle created at (541.0686, 784.3942) (added to group)
[22:01:58] [INFO] [BloodDecal] Blood puddle created at (575.6335, 778.75) (added to group)
[22:01:58] [INFO] [BloodDecal] Blood puddle created at (584.0091, 807.8271) (added to group)
[22:01:58] [INFO] [BloodDecal] Blood puddle created at (591.1781, 768.1892) (added to group)
[22:01:58] [INFO] [BloodDecal] Blood puddle created at (550.2066, 803.4916) (added to group)
[22:01:58] [INFO] [BloodDecal] Blood puddle created at (632.0046, 866.7972) (added to group)
[22:01:58] [INFO] [BloodDecal] Blood puddle created at (623.4992, 869.6739) (added to group)
[22:01:58] [INFO] [BloodDecal] Blood puddle created at (639.3937, 788.2192) (added to group)
[22:01:59] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[22:01:59] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:01:59] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[22:01:59] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,819), corner_timer=0.30
[22:01:59] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,819), corner_timer=0.30
[22:02:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 766.9999), source=PLAYER (MakarovPM), range=1469, listeners=20
[22:02:00] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[22:02:00] [ENEMY] [Enemy1] Heard gunshot at (450, 766.9999), source_type=0, intensity=0.01, distance=443
[22:02:00] [ENEMY] [Enemy2] Heard gunshot at (450, 766.9999), source_type=0, intensity=0.05, distance=223
[22:02:00] [ENEMY] [Enemy3] Heard gunshot at (450, 766.9999), source_type=0, intensity=0.04, distance=251
[22:02:00] [ENEMY] [Enemy4] Heard gunshot at (450, 766.9999), source_type=0, intensity=0.02, distance=374
[22:02:00] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:02:00] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=69.9°, current=168.8°, player=(450,760), corner_timer=0.00
[22:02:00] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=76.7°, current=-101.3°, player=(450,760), corner_timer=0.00
[22:02:00] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=177.5°, current=-123.8°, player=(450,760), corner_timer=0.00
[22:02:00] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-158.3°, current=168.8°, player=(450,760), corner_timer=0.00
[22:02:00] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,752), corner_timer=-0.02
[22:02:00] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:02:00] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,752), corner_timer=-0.02
[22:02:00] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[22:02:00] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,752), corner_timer=0.30
[22:02:00] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,752), corner_timer=0.30
[22:02:00] [ENEMY] [Enemy3] Hit: dmg=1, hp=2/2->1/2
[22:02:00] [INFO] [ImpactEffects] spawn_blood_effect called at (689.3436, 750.4689), dir=(0.997002, -0.077376), lethal=false
[22:02:00] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:02:00] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:02:00] [INFO] [ImpactEffects] Blood effect spawned at (689.3436, 750.4689) (scale=0.5)
[22:02:00] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=179.8°, current=175.6°, player=(450,751), corner_timer=0.00
[22:02:00] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[22:02:00] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[22:02:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(683.6991, 745.0116), source=ENEMY (Enemy3), range=1469, listeners=10
[22:02:00] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:02:00] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,751), corner_timer=-0.02
[22:02:00] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[22:02:00] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,751), corner_timer=0.30
[22:02:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(677.1049, 736.6276), source=ENEMY (Enemy3), range=1469, listeners=10
[22:02:00] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:02:00] [INFO] [LastChance] Threat detected: @Area2D@822
[22:02:00] [INFO] [LastChance] Not in hard mode - effect disabled
[22:02:00] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:02:00] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[22:02:00] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[22:02:00] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[22:02:00] [INFO] [BloodDecal] Blood puddle created at (793.7879, 803.0134) (added to group)
[22:02:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(670.5106, 728.2435), source=ENEMY (Enemy3), range=1469, listeners=10
[22:02:00] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:02:00] [INFO] [Player] Spawning blood effect at (450, 751.4444), dir=(1, 0), lethal=False (C#)
[22:02:00] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 751.4444), dir=(1, 0), lethal=false
[22:02:00] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:02:00] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:02:00] [INFO] [ImpactEffects] Blood effect spawned at (450, 751.4444) (scale=1)
[22:02:00] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 9.0
[22:02:00] [INFO] [LastChance] Player health updated (C# Damaged): 9.0
[22:02:00] [INFO] [LastChance] Threat detected: @Area2D@825
[22:02:00] [INFO] [LastChance] Not in hard mode - effect disabled
[22:02:00] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:02:00] [INFO] [BloodDecal] Blood puddle created at (767.4058, 762.7078) (added to group)
[22:02:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(663.9164, 719.8595), source=ENEMY (Enemy3), range=1469, listeners=10
[22:02:00] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:02:00] [INFO] [LastChance] Threat detected: @Area2D@828
[22:02:00] [INFO] [LastChance] Not in hard mode - effect disabled
[22:02:00] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:02:00] [INFO] [Player] Spawning blood effect at (450, 751.4444), dir=(1, 0), lethal=False (C#)
[22:02:00] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 751.4444), dir=(1, 0), lethal=false
[22:02:00] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:02:00] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:02:00] [INFO] [ImpactEffects] Blood effect spawned at (450, 751.4444) (scale=1)
[22:02:00] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 8.0
[22:02:00] [INFO] [LastChance] Player health updated (C# Damaged): 8.0
[22:02:00] [INFO] [BloodDecal] Blood puddle created at (804.7465, 812.659) (added to group)
[22:02:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(616.3393, 754.6687), shooter_id=2265544919379, bullet_pos=(56.557114, 918.7466)
[22:02:00] [INFO] [Bullet] Using shooter_position, distance=583,3332
[22:02:00] [INFO] [Bullet] Distance to wall: 583,3332 (39,72023% of viewport)
[22:02:00] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:02:00] [INFO] [BloodDecal] Blood puddle created at (829.1492, 810.5184) (added to group)
[22:02:00] [INFO] [BloodDecal] Blood puddle created at (829.4692, 768.7755) (added to group)
[22:02:00] [INFO] [BloodDecal] Blood puddle created at (813.7534, 796.0021) (added to group)
[22:02:00] [INFO] [BloodDecal] Blood puddle created at (839.8713, 845.4361) (added to group)
[22:02:00] [INFO] [BloodDecal] Blood puddle created at (858.1385, 762.2543) (added to group)
[22:02:00] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,751), corner_timer=-0.02
[22:02:00] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[22:02:00] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,751), corner_timer=0.30
[22:02:00] [INFO] [BloodDecal] Blood puddle created at (523.1838, 780.2199) (added to group)
[22:02:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(598.1808, 737.44995), shooter_id=2265544919379, bullet_pos=(56.932327, 716.16864)
[22:02:00] [INFO] [Bullet] Using shooter_position, distance=541,6667
[22:02:00] [INFO] [Bullet] Distance to wall: 541,6667 (36,883083% of viewport)
[22:02:00] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:02:00] [INFO] [Bullet] Starting wall penetration at (56.932327, 716.16864)
[22:02:00] [INFO] [Bullet] Raycast backward hit penetrating body at distance 21,715076
[22:02:00] [INFO] [Bullet] Body exited signal received for penetrating body
[22:02:00] [INFO] [Bullet] Exiting penetration at (10.301689, 714.3352) after traveling 41,666668 pixels through wall
[22:02:00] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:02:00] [INFO] [BloodDecal] Blood puddle created at (886.0265, 884.3757) (added to group)
[22:02:00] [INFO] [BloodDecal] Blood puddle created at (535.0834, 792.4928) (added to group)
[22:02:00] [INFO] [BloodDecal] Blood puddle created at (536.5433, 788.0334) (added to group)
[22:02:00] [INFO] [BloodDecal] Blood puddle created at (530.123, 782.621) (added to group)
[22:02:00] [INFO] [BloodDecal] Blood puddle created at (517.7161, 741.2144) (added to group)
[22:02:01] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:02:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:01] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:02:01] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:02:01] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:02:01] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:02:01] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:02:01] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:02:01] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:02:01] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[22:02:01] [ENEMY] [Enemy1] Death animation component initialized
[22:02:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:01] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:02:01] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:02:01] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:02:01] [ENEMY] [Enemy2] Death animation component initialized
[22:02:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:01] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:02:01] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:02:01] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:02:01] [ENEMY] [Enemy3] Death animation component initialized
[22:02:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:01] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:02:01] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:02:01] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:02:01] [ENEMY] [Enemy4] Death animation component initialized
[22:02:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:01] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:02:01] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:02:01] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:02:01] [ENEMY] [Enemy5] Death animation component initialized
[22:02:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:01] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:02:01] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:02:01] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:02:01] [ENEMY] [Enemy6] Death animation component initialized
[22:02:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:01] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:02:01] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:02:01] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:02:01] [ENEMY] [Enemy7] Death animation component initialized
[22:02:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:01] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:02:01] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:02:01] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:02:01] [ENEMY] [Enemy8] Death animation component initialized
[22:02:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:01] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:02:01] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:02:01] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:02:01] [ENEMY] [Enemy9] Death animation component initialized
[22:02:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:01] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:02:01] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:02:01] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:02:01] [ENEMY] [Enemy10] Death animation component initialized
[22:02:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:01] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:02:01] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:02:01] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:02:01] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[22:02:01] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:02:01] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:02:01] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:02:01] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:02:01] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:02:01] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[22:02:01] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:02:01] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[22:02:01] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 10/10
[22:02:01] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:02:01] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:02:01] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:02:01] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:02:01] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:02:01] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:02:01] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:02:01] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:02:01] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:02:01] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:02:01] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:02:01] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:02:01] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:02:01] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[22:02:01] [INFO] [ScoreManager] Level started with 10 enemies
[22:02:01] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[22:02:01] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[22:02:01] [INFO] [ReplayManager] Replay data cleared
[22:02:01] [INFO] [BuildingLevel] Previous replay data cleared
[22:02:01] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[22:02:01] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[22:02:01] [INFO] [ReplayManager] Level: BuildingLevel
[22:02:01] [INFO] [ReplayManager] Player: Player (valid: True)
[22:02:01] [INFO] [ReplayManager] Enemies count: 10
[22:02:01] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[22:02:01] [INFO] [ReplayManager]   Enemy 0: Enemy1
[22:02:01] [INFO] [ReplayManager]   Enemy 1: Enemy2
[22:02:01] [INFO] [ReplayManager]   Enemy 2: Enemy3
[22:02:01] [INFO] [ReplayManager]   Enemy 3: Enemy4
[22:02:01] [INFO] [ReplayManager]   Enemy 4: Enemy5
[22:02:01] [INFO] [ReplayManager]   Enemy 5: Enemy6
[22:02:01] [INFO] [ReplayManager]   Enemy 6: Enemy7
[22:02:01] [INFO] [ReplayManager]   Enemy 7: Enemy8
[22:02:01] [INFO] [ReplayManager]   Enemy 8: Enemy9
[22:02:01] [INFO] [ReplayManager]   Enemy 9: Enemy10
[22:02:01] [INFO] [BuildingLevel] Replay recording started successfully
[22:02:01] [INFO] [BloodDecal] Blood puddle created at (555.4521, 750.4741) (added to group)
[22:02:01] [INFO] [BloodDecal] Blood puddle created at (565.1775, 751.8492) (added to group)
[22:02:01] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:02:01] [INFO] [CinemaEffects] Found player node: Player
[22:02:01] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:02:01] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[22:02:01] [ENEMY] [Enemy1] Registered as sound listener
[22:02:01] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[22:02:01] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:02:01] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[22:02:01] [ENEMY] [Enemy2] Registered as sound listener
[22:02:01] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[22:02:01] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:02:01] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[22:02:01] [ENEMY] [Enemy3] Registered as sound listener
[22:02:01] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[22:02:01] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:02:01] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[22:02:01] [ENEMY] [Enemy4] Registered as sound listener
[22:02:01] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[22:02:01] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:02:01] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[22:02:01] [ENEMY] [Enemy5] Registered as sound listener
[22:02:01] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[22:02:01] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:02:01] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[22:02:01] [ENEMY] [Enemy6] Registered as sound listener
[22:02:01] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[22:02:01] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:02:01] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[22:02:01] [ENEMY] [Enemy7] Registered as sound listener
[22:02:01] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[22:02:01] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:02:01] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[22:02:01] [ENEMY] [Enemy8] Registered as sound listener
[22:02:01] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[22:02:01] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:02:01] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[22:02:01] [ENEMY] [Enemy9] Registered as sound listener
[22:02:01] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[22:02:01] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:02:01] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[22:02:01] [ENEMY] [Enemy10] Registered as sound listener
[22:02:01] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[22:02:01] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:02:01] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[22:02:01] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:01] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:01] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=236.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:01] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:01] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:01] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:01] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:01] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:01] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:02:01] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[22:02:01] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[22:02:01] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:02:01] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:02:01] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:02:01] [INFO] [LastChance] Found player: Player
[22:02:01] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:02:01] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:02:01] [INFO] [LastChance] Connected to player Died signal (C#)
[22:02:01] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:02:01] [INFO] [BloodDecal] Blood puddle created at (534.8063, 796.1621) (added to group)
[22:02:01] [INFO] [BloodDecal] Blood puddle created at (548.8098, 790.2762) (added to group)
[22:02:01] [INFO] [BloodDecal] Blood puddle created at (622.9836, 846.2347) (added to group)
[22:02:01] [INFO] [BloodDecal] Blood puddle created at (612.0059, 741.8156) (added to group)
[22:02:01] [INFO] [BloodDecal] Blood puddle created at (573.8378, 741.3353) (added to group)
[22:02:01] [INFO] [BloodDecal] Blood puddle created at (518.3371, 764.9023) (added to group)
[22:02:01] [INFO] [BloodDecal] Blood puddle created at (544.181, 780.2342) (added to group)
[22:02:01] [INFO] [BloodDecal] Blood puddle created at (542.1551, 761.3308) (added to group)
[22:02:01] [INFO] [BloodDecal] Blood puddle created at (565.7199, 784.1469) (added to group)
[22:02:02] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[22:02:02] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:02:02] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[22:02:02] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,785), corner_timer=0.30
[22:02:02] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,785), corner_timer=0.30
[22:02:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 774.9444), source=PLAYER (MakarovPM), range=1469, listeners=20
[22:02:02] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[22:02:02] [ENEMY] [Enemy1] Heard gunshot at (450, 774.9444), source_type=0, intensity=0.01, distance=451
[22:02:02] [ENEMY] [Enemy2] Heard gunshot at (450, 774.9444), source_type=0, intensity=0.05, distance=230
[22:02:02] [ENEMY] [Enemy3] Heard gunshot at (450, 774.9444), source_type=0, intensity=0.04, distance=251
[22:02:02] [ENEMY] [Enemy4] Heard gunshot at (450, 774.9444), source_type=0, intensity=0.02, distance=372
[22:02:02] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:02:02] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=70.3°, current=-33.8°, player=(450,768), corner_timer=0.00
[22:02:02] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=77.1°, current=45.0°, player=(450,768), corner_timer=0.00
[22:02:02] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=175.7°, current=-123.8°, player=(450,768), corner_timer=0.00
[22:02:02] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-159.5°, current=-101.3°, player=(450,768), corner_timer=0.00
[22:02:02] [ENEMY] [Enemy3] Hit: dmg=1, hp=3/3->2/3
[22:02:02] [INFO] [ImpactEffects] spawn_blood_effect called at (689.3638, 750.806), dir=(0.992589, -0.121518), lethal=false
[22:02:02] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:02:02] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:02:02] [INFO] [ImpactEffects] Blood effect spawned at (689.3638, 750.806) (scale=0.5)
[22:02:02] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=178.5°, current=173.0°, player=(450,756), corner_timer=0.00
[22:02:02] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,756), corner_timer=-0.02
[22:02:02] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:02:02] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,756), corner_timer=-0.02
[22:02:02] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[22:02:02] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,756), corner_timer=0.30
[22:02:02] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,756), corner_timer=0.30
[22:02:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 762.9444), source=PLAYER (MakarovPM), range=1469, listeners=10
[22:02:02] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:02:02] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[22:02:03] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[22:02:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.2549, 744.6497), source=ENEMY (Enemy3), range=1469, listeners=10
[22:02:03] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:02:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(677.4432, 736.4412), source=ENEMY (Enemy3), range=1469, listeners=10
[22:02:03] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:02:03] [ENEMY] [Enemy3] Hit: dmg=1, hp=2/3->1/3
[22:02:03] [INFO] [ImpactEffects] spawn_blood_effect called at (675.7402, 734.389), dir=(0.98645, -0.164059), lethal=false
[22:02:03] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:02:03] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:02:03] [INFO] [ImpactEffects] Blood effect spawned at (675.7402, 734.389) (scale=0.5)
[22:02:03] [INFO] [LastChance] Threat detected: @Area2D@1111
[22:02:03] [INFO] [LastChance] Not in hard mode - effect disabled
[22:02:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (744.8533, 787.715) (added to group)
[22:02:03] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[22:02:03] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[22:02:03] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[22:02:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 762.9444), source=PLAYER (MakarovPM), range=1469, listeners=10
[22:02:03] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:02:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(670.6314, 728.2327), source=ENEMY (Enemy3), range=1469, listeners=10
[22:02:03] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (769.4513, 739.2188) (added to group)
[22:02:03] [INFO] [Player] Spawning blood effect at (450, 756.9444), dir=(1, 0), lethal=False (C#)
[22:02:03] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 756.9444), dir=(1, 0), lethal=false
[22:02:03] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:02:03] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:02:03] [INFO] [ImpactEffects] Blood effect spawned at (450, 756.9444) (scale=1)
[22:02:03] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 9.0
[22:02:03] [INFO] [LastChance] Player health updated (C# Damaged): 9.0
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (770.1712, 724.1854) (added to group)
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (790.4005, 806.2147) (added to group)
[22:02:03] [INFO] [LastChance] Threat detected: @Area2D@1116
[22:02:03] [INFO] [LastChance] Not in hard mode - effect disabled
[22:02:03] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:02:03] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,756), corner_timer=-0.02
[22:02:03] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[22:02:03] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,756), corner_timer=0.30
[22:02:03] [INFO] [Player] Spawning blood effect at (450, 756.9444), dir=(1, 0), lethal=False (C#)
[22:02:03] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 756.9444), dir=(1, 0), lethal=false
[22:02:03] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:02:03] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:02:03] [INFO] [ImpactEffects] Blood effect spawned at (450, 756.9444) (scale=1)
[22:02:03] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 8.0
[22:02:03] [INFO] [LastChance] Player health updated (C# Damaged): 8.0
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (796.1919, 808.7359) (added to group)
[22:02:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(616.99835, 755.9887), shooter_id=3226795509925, bullet_pos=(50.43301, 894.8471)
[22:02:03] [INFO] [Bullet] Using shooter_position, distance=583,3335
[22:02:03] [INFO] [Bullet] Distance to wall: 583,3335 (39,720253% of viewport)
[22:02:03] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (752.3491, 772.7201) (added to group)
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (781.0361, 736.9744) (added to group)
[22:02:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 762.9444), source=PLAYER (MakarovPM), range=1469, listeners=10
[22:02:03] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (796.1736, 838.6299) (added to group)
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (775.2829, 760.1334) (added to group)
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (803.4272, 750.8493) (added to group)
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (733.8874, 742.1433) (added to group)
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (739.948, 760.632) (added to group)
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (779.6445, 754.3715) (added to group)
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (545.4445, 753.2215) (added to group)
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (816.3346, 800.6293) (added to group)
[22:02:03] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,756), corner_timer=-0.02
[22:02:03] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[22:02:03] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,756), corner_timer=0.30
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (548.6165, 798.3838) (added to group)
[22:02:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 762.9444), shooter_id=3230150952600, bullet_pos=(913.0417, 699.7586)
[22:02:03] [INFO] [Bullet] Using shooter_position, distance=467.332946777344
[22:02:03] [INFO] [Bullet] Distance to wall: 467.332946777344 (31.821559695583% of viewport)
[22:02:03] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:02:03] [INFO] [Bullet] Caliber cannot penetrate walls
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (754.4757, 789.9413) (added to group)
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (549.1967, 804.7066) (added to group)
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (579.2817, 795.8134) (added to group)
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (505.9717, 768.9151) (added to group)
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (523.8826, 768.6899) (added to group)
[22:02:03] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:02:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:03] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:02:03] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:02:03] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:02:03] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:02:03] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:02:03] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:02:03] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:02:03] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[22:02:03] [ENEMY] [Enemy1] Death animation component initialized
[22:02:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:03] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:02:03] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:02:03] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:02:03] [ENEMY] [Enemy2] Death animation component initialized
[22:02:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:03] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:02:03] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:02:03] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:02:03] [ENEMY] [Enemy3] Death animation component initialized
[22:02:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:03] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:02:03] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:02:03] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:02:03] [ENEMY] [Enemy4] Death animation component initialized
[22:02:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:03] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:02:03] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:02:03] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:02:03] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:02:03] [ENEMY] [Enemy5] Death animation component initialized
[22:02:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:03] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:02:03] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:02:03] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:02:03] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:02:03] [ENEMY] [Enemy6] Death animation component initialized
[22:02:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:03] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:02:03] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:02:03] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:02:03] [ENEMY] [Enemy7] Death animation component initialized
[22:02:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:03] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:02:03] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:02:03] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:02:03] [ENEMY] [Enemy8] Death animation component initialized
[22:02:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:03] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:02:03] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:02:03] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:02:03] [ENEMY] [Enemy9] Death animation component initialized
[22:02:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:03] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:02:03] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:02:03] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:02:03] [ENEMY] [Enemy10] Death animation component initialized
[22:02:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:03] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:02:03] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:02:03] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:02:03] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[22:02:03] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:02:03] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:02:03] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:02:03] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:02:03] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:02:03] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[22:02:03] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:02:03] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[22:02:03] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 10/10
[22:02:03] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:02:03] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:02:03] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:02:03] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:02:03] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:02:03] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:02:03] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:02:03] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:02:03] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:02:03] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:02:03] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:02:03] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:02:03] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:02:03] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[22:02:03] [INFO] [ScoreManager] Level started with 10 enemies
[22:02:03] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[22:02:03] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[22:02:03] [INFO] [ReplayManager] Replay data cleared
[22:02:03] [INFO] [BuildingLevel] Previous replay data cleared
[22:02:03] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[22:02:03] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[22:02:03] [INFO] [ReplayManager] Level: BuildingLevel
[22:02:03] [INFO] [ReplayManager] Player: Player (valid: True)
[22:02:03] [INFO] [ReplayManager] Enemies count: 10
[22:02:03] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[22:02:03] [INFO] [ReplayManager]   Enemy 0: Enemy1
[22:02:03] [INFO] [ReplayManager]   Enemy 1: Enemy2
[22:02:03] [INFO] [ReplayManager]   Enemy 2: Enemy3
[22:02:03] [INFO] [ReplayManager]   Enemy 3: Enemy4
[22:02:03] [INFO] [ReplayManager]   Enemy 4: Enemy5
[22:02:03] [INFO] [ReplayManager]   Enemy 5: Enemy6
[22:02:03] [INFO] [ReplayManager]   Enemy 6: Enemy7
[22:02:03] [INFO] [ReplayManager]   Enemy 7: Enemy8
[22:02:03] [INFO] [ReplayManager]   Enemy 8: Enemy9
[22:02:03] [INFO] [ReplayManager]   Enemy 9: Enemy10
[22:02:03] [INFO] [BuildingLevel] Replay recording started successfully
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (791.83, 735.1644) (added to group)
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (595.4558, 826.6348) (added to group)
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (620.3206, 825.3407) (added to group)
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (574.6104, 793.7628) (added to group)
[22:02:03] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:02:03] [INFO] [CinemaEffects] Found player node: Player
[22:02:03] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:02:03] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[22:02:03] [ENEMY] [Enemy1] Registered as sound listener
[22:02:03] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[22:02:03] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:02:03] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[22:02:03] [ENEMY] [Enemy2] Registered as sound listener
[22:02:03] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[22:02:03] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:02:03] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[22:02:03] [ENEMY] [Enemy3] Registered as sound listener
[22:02:03] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[22:02:03] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:02:03] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[22:02:03] [ENEMY] [Enemy4] Registered as sound listener
[22:02:03] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[22:02:03] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:02:03] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[22:02:03] [ENEMY] [Enemy5] Registered as sound listener
[22:02:03] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[22:02:03] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:02:03] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[22:02:03] [ENEMY] [Enemy6] Registered as sound listener
[22:02:03] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[22:02:03] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:02:03] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[22:02:03] [ENEMY] [Enemy7] Registered as sound listener
[22:02:03] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[22:02:03] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:02:03] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[22:02:03] [ENEMY] [Enemy8] Registered as sound listener
[22:02:03] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[22:02:03] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:02:03] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[22:02:03] [ENEMY] [Enemy9] Registered as sound listener
[22:02:03] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[22:02:03] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:02:03] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[22:02:03] [ENEMY] [Enemy10] Registered as sound listener
[22:02:03] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[22:02:03] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:02:03] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[22:02:03] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:03] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:03] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:03] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:03] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:03] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:03] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:03] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:03] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:02:03] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[22:02:03] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[22:02:03] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:02:03] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:02:03] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:02:03] [INFO] [LastChance] Found player: Player
[22:02:03] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:02:03] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:02:03] [INFO] [LastChance] Connected to player Died signal (C#)
[22:02:03] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (783.6196, 789.2999) (added to group)
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (856.3165, 773.3854) (added to group)
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (810.9419, 854.3406) (added to group)
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (906.3213, 829.5981) (added to group)
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (547.2371, 802.6339) (added to group)
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (579.2473, 790.6627) (added to group)
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (548.5945, 799.2422) (added to group)
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (531.5094, 782.1411) (added to group)
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (633.5195, 782.6615) (added to group)
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (596.4194, 829.6108) (added to group)
[22:02:03] [INFO] [BloodDecal] Blood puddle created at (616.4722, 822.2679) (added to group)
[22:02:04] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[22:02:05] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=164.4°, current=123.7°, player=(450,819), corner_timer=0.00
[22:02:05] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[22:02:05] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=166.8°, current=-64.9°, player=(450,808), corner_timer=0.00
[22:02:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 793.4999), source=PLAYER (MakarovPM), range=1469, listeners=20
[22:02:05] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[22:02:05] [ENEMY] [Enemy1] Heard gunshot at (450, 793.4999), source_type=0, intensity=0.01, distance=468
[22:02:05] [ENEMY] [Enemy2] Heard gunshot at (450, 793.4999), source_type=0, intensity=0.04, distance=249
[22:02:05] [ENEMY] [Enemy4] Heard gunshot at (450, 793.4999), source_type=0, intensity=0.02, distance=366
[22:02:05] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:02:05] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=71.1°, current=-157.5°, player=(450,787), corner_timer=0.00
[22:02:05] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=78.1°, current=168.8°, player=(450,787), corner_timer=0.00
[22:02:05] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-162.2°, current=-67.5°, player=(450,787), corner_timer=0.00
[22:02:05] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:02:05] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[22:02:05] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,782), corner_timer=0.30
[22:02:05] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,782), corner_timer=0.30
[22:02:05] [ENEMY] [Enemy3] Hit: dmg=1, hp=2/2->1/2
[22:02:05] [INFO] [ImpactEffects] spawn_blood_effect called at (684.4485, 753.7583), dir=(0.995247, -0.097385), lethal=false
[22:02:05] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:02:05] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:02:05] [INFO] [ImpactEffects] Blood effect spawned at (684.4485, 753.7583) (scale=0.5)
[22:02:05] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=-179.4°, current=174.4°, player=(450,751), corner_timer=0.00
[22:02:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 752.6666), source=PLAYER (MakarovPM), range=1469, listeners=10
[22:02:05] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:02:05] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[22:02:05] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,745), corner_timer=-0.02
[22:02:05] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:02:05] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,745), corner_timer=-0.02
[22:02:05] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[22:02:05] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,745), corner_timer=0.30
[22:02:05] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,745), corner_timer=0.30
[22:02:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(679.1555, 759.757), source=ENEMY (Enemy3), range=1469, listeners=10
[22:02:05] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:02:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(672.0981, 767.7553), source=ENEMY (Enemy3), range=1469, listeners=10
[22:02:05] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:02:05] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[22:02:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 751.9444), source=PLAYER (MakarovPM), range=1469, listeners=10
[22:02:05] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:02:05] [INFO] [LastChance] Threat detected: @Area2D@1419
[22:02:05] [INFO] [LastChance] Not in hard mode - effect disabled
[22:02:05] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:02:05] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[22:02:05] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[22:02:05] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[22:02:05] [INFO] [BloodyFeet:Enemy3] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[22:02:05] [INFO] [Player] Spawning blood effect at (450, 745.9444), dir=(1, 0), lethal=False (C#)
[22:02:05] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 745.9444), dir=(1, 0), lethal=false
[22:02:05] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:02:05] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:02:05] [INFO] [ImpactEffects] Blood effect spawned at (450, 745.9444) (scale=1)
[22:02:05] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 9.0
[22:02:05] [INFO] [LastChance] Player health updated (C# Damaged): 9.0
[22:02:05] [INFO] [BloodDecal] Blood puddle created at (764.9767, 769.1603) (added to group)
[22:02:05] [INFO] [BloodDecal] Blood puddle created at (791.6597, 807.2305) (added to group)
[22:02:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(612.6361, 763.43066), shooter_id=4193062488713, bullet_pos=(37.397945, 860.2754)
[22:02:05] [INFO] [Bullet] Using shooter_position, distance=583,3334
[22:02:05] [INFO] [Bullet] Distance to wall: 583,3334 (39,72024% of viewport)
[22:02:05] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:02:05] [INFO] [Bullet] Starting wall penetration at (37.397945, 860.2754)
[22:02:05] [INFO] [Bullet] Raycast backward hit penetrating body at distance 41,19277
[22:02:05] [INFO] [Bullet] Body exited signal received for penetrating body
[22:02:05] [INFO] [Bullet] Exiting penetration at (-8.621113, 868.02295) after traveling 41,666676 pixels through wall
[22:02:05] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:02:05] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,745), corner_timer=-0.02
[22:02:05] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[22:02:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 752.6666), shooter_id=4196417932530, bullet_pos=(910.2829, 671.7983)
[22:02:05] [INFO] [Bullet] Using shooter_position, distance=467.332885742188
[22:02:05] [INFO] [Bullet] Distance to wall: 467.332885742188 (31.8215555395869% of viewport)
[22:02:05] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:02:05] [INFO] [Bullet] Caliber cannot penetrate walls
[22:02:05] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,745), corner_timer=0.30
[22:02:05] [INFO] [BloodDecal] Blood puddle created at (847.5803, 803.384) (added to group)
[22:02:05] [INFO] [BloodDecal] Blood puddle created at (826.2008, 784.0643) (added to group)
[22:02:06] [INFO] [BloodDecal] Blood puddle created at (861.5928, 845.5789) (added to group)
[22:02:06] [INFO] [BloodDecal] Blood puddle created at (836.643, 821.5705) (added to group)
[22:02:06] [INFO] [BloodDecal] Blood puddle created at (885.4258, 893.7718) (added to group)
[22:02:06] [INFO] [BloodDecal] Blood puddle created at (512.9706, 746.3353) (added to group)
[22:02:06] [INFO] [BloodDecal] Blood puddle created at (531.3455, 780.5053) (added to group)
[22:02:06] [INFO] [BloodDecal] Blood puddle created at (503.6541, 755.0312) (added to group)
[22:02:06] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:02:06] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:06] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:02:06] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:02:06] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:02:06] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:02:06] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:02:06] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:02:06] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:02:06] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[22:02:06] [ENEMY] [Enemy1] Death animation component initialized
[22:02:06] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:06] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:02:06] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:02:06] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:02:06] [ENEMY] [Enemy2] Death animation component initialized
[22:02:06] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:06] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:02:06] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:02:06] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:02:06] [ENEMY] [Enemy3] Death animation component initialized
[22:02:06] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:06] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:02:06] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:02:06] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:02:06] [ENEMY] [Enemy4] Death animation component initialized
[22:02:06] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:06] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:02:06] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:02:06] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:02:06] [ENEMY] [Enemy5] Death animation component initialized
[22:02:06] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:06] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:02:06] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:02:06] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:02:06] [ENEMY] [Enemy6] Death animation component initialized
[22:02:06] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:06] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:02:06] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:02:06] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:02:06] [ENEMY] [Enemy7] Death animation component initialized
[22:02:06] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:06] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:02:06] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:02:06] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:02:06] [ENEMY] [Enemy8] Death animation component initialized
[22:02:06] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:06] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:02:06] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:02:06] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:02:06] [ENEMY] [Enemy9] Death animation component initialized
[22:02:06] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:06] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:02:06] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:02:06] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:02:06] [ENEMY] [Enemy10] Death animation component initialized
[22:02:06] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:06] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:02:06] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:02:06] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:02:06] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[22:02:06] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:02:06] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:02:06] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:02:06] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:02:06] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:02:06] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[22:02:06] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:02:06] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[22:02:06] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 10/10
[22:02:06] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:02:06] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:02:06] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:02:06] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:02:06] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:02:06] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:02:06] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:02:06] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:02:06] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:02:06] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:02:06] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:02:06] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:02:06] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:02:06] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[22:02:06] [INFO] [ScoreManager] Level started with 10 enemies
[22:02:06] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[22:02:06] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[22:02:06] [INFO] [ReplayManager] Replay data cleared
[22:02:06] [INFO] [BuildingLevel] Previous replay data cleared
[22:02:06] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[22:02:06] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[22:02:06] [INFO] [ReplayManager] Level: BuildingLevel
[22:02:06] [INFO] [ReplayManager] Player: Player (valid: True)
[22:02:06] [INFO] [ReplayManager] Enemies count: 10
[22:02:06] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[22:02:06] [INFO] [ReplayManager]   Enemy 0: Enemy1
[22:02:06] [INFO] [ReplayManager]   Enemy 1: Enemy2
[22:02:06] [INFO] [ReplayManager]   Enemy 2: Enemy3
[22:02:06] [INFO] [ReplayManager]   Enemy 3: Enemy4
[22:02:06] [INFO] [ReplayManager]   Enemy 4: Enemy5
[22:02:06] [INFO] [ReplayManager]   Enemy 5: Enemy6
[22:02:06] [INFO] [ReplayManager]   Enemy 6: Enemy7
[22:02:06] [INFO] [ReplayManager]   Enemy 7: Enemy8
[22:02:06] [INFO] [ReplayManager]   Enemy 8: Enemy9
[22:02:06] [INFO] [ReplayManager]   Enemy 9: Enemy10
[22:02:06] [INFO] [BuildingLevel] Replay recording started successfully
[22:02:06] [INFO] [BloodDecal] Blood puddle created at (792.9406, 821.4661) (added to group)
[22:02:06] [INFO] [BloodDecal] Blood puddle created at (880.7869, 863.4133) (added to group)
[22:02:06] [INFO] [BloodDecal] Blood puddle created at (509.6509, 769.2837) (added to group)
[22:02:06] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:02:06] [INFO] [CinemaEffects] Found player node: Player
[22:02:06] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:02:06] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[22:02:06] [ENEMY] [Enemy1] Registered as sound listener
[22:02:06] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[22:02:06] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:02:06] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[22:02:06] [ENEMY] [Enemy2] Registered as sound listener
[22:02:06] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[22:02:06] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:02:06] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[22:02:06] [ENEMY] [Enemy3] Registered as sound listener
[22:02:06] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[22:02:06] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:02:06] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[22:02:06] [ENEMY] [Enemy4] Registered as sound listener
[22:02:06] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[22:02:06] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:02:06] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[22:02:06] [ENEMY] [Enemy5] Registered as sound listener
[22:02:06] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[22:02:06] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:02:06] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[22:02:06] [ENEMY] [Enemy6] Registered as sound listener
[22:02:06] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[22:02:06] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:02:06] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[22:02:06] [ENEMY] [Enemy7] Registered as sound listener
[22:02:06] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[22:02:06] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:02:06] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[22:02:06] [ENEMY] [Enemy8] Registered as sound listener
[22:02:06] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[22:02:06] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:02:06] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[22:02:06] [ENEMY] [Enemy9] Registered as sound listener
[22:02:06] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[22:02:06] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:02:06] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[22:02:06] [ENEMY] [Enemy10] Registered as sound listener
[22:02:06] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[22:02:06] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:02:06] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[22:02:06] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:06] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:06] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:06] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:06] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:06] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:06] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=157.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:06] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:06] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:02:06] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[22:02:06] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[22:02:06] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:02:06] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:02:06] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:02:06] [INFO] [LastChance] Found player: Player
[22:02:06] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:02:06] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:02:06] [INFO] [LastChance] Connected to player Died signal (C#)
[22:02:06] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:02:06] [INFO] [BloodDecal] Blood puddle created at (564.726, 756.9304) (added to group)
[22:02:06] [INFO] [BloodDecal] Blood puddle created at (610.5966, 800.6945) (added to group)
[22:02:06] [INFO] [BloodDecal] Blood puddle created at (572.1837, 767.4453) (added to group)
[22:02:06] [INFO] [BloodDecal] Blood puddle created at (577.5742, 809.9175) (added to group)
[22:02:06] [INFO] [BloodDecal] Blood puddle created at (615.5164, 758.4705) (added to group)
[22:02:07] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[22:02:07] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:02:07] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[22:02:07] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,806), corner_timer=0.30
[22:02:07] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,806), corner_timer=0.30
[22:02:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 806.9444), source=PLAYER (MakarovPM), range=1469, listeners=20
[22:02:07] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[22:02:07] [ENEMY] [Enemy1] Heard gunshot at (450, 806.9444), source_type=0, intensity=0.01, distance=481
[22:02:07] [ENEMY] [Enemy2] Heard gunshot at (450, 806.9444), source_type=0, intensity=0.04, distance=262
[22:02:07] [ENEMY] [Enemy3] Heard gunshot at (450, 806.9444), source_type=0, intensity=0.04, distance=256
[22:02:07] [ENEMY] [Enemy4] Heard gunshot at (450, 806.9444), source_type=0, intensity=0.02, distance=362
[22:02:07] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:02:07] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=71.6°, current=-157.5°, player=(450,800), corner_timer=0.00
[22:02:07] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=78.7°, current=-67.5°, player=(450,800), corner_timer=0.00
[22:02:07] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=168.5°, current=-33.8°, player=(450,800), corner_timer=0.00
[22:02:07] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-164.2°, current=-67.5°, player=(450,800), corner_timer=0.00
[22:02:07] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=168.5°, current=131.9°, player=(450,800), corner_timer=0.00
[22:02:08] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,800), corner_timer=-0.02
[22:02:08] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:02:08] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,800), corner_timer=-0.02
[22:02:08] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[22:02:08] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,800), corner_timer=0.30
[22:02:08] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,800), corner_timer=0.30
[22:02:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 806.9444), source=PLAYER (MakarovPM), range=1469, listeners=10
[22:02:08] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:02:08] [ENEMY] [Enemy3] Hit: dmg=1, hp=4/4->3/4
[22:02:08] [INFO] [ImpactEffects] spawn_blood_effect called at (689.5481, 752.1299), dir=(0.958831, -0.283978), lethal=false
[22:02:08] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:02:08] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:02:08] [INFO] [ImpactEffects] Blood effect spawned at (689.5481, 752.1299) (scale=0.5)
[22:02:08] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[22:02:08] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[22:02:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(683.4704, 757.3319), source=ENEMY (Enemy3), range=1469, listeners=10
[22:02:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:02:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(618.4521, 777.4123), shooter_id=5055478498996, bullet_pos=(501.81003, 822.3526)
[22:02:08] [INFO] [Bullet] Using shooter_position, distance=125,00001
[22:02:08] [INFO] [Bullet] Distance to wall: 125,00001 (8,51148% of viewport)
[22:02:08] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:02:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(675.3668, 764.2679), source=ENEMY (Enemy3), range=1469, listeners=10
[22:02:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:02:08] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,800), corner_timer=-0.02
[22:02:08] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[22:02:08] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,800), corner_timer=0.30
[22:02:08] [INFO] [BloodDecal] Blood puddle created at (754.0702, 742.3932) (added to group)
[22:02:08] [INFO] [BloodDecal] Blood puddle created at (721.844, 741.9022) (added to group)
[22:02:08] [INFO] [LastChance] Threat detected: @Area2D@1698
[22:02:08] [INFO] [LastChance] Not in hard mode - effect disabled
[22:02:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:02:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 806.9444), source=PLAYER (MakarovPM), range=1469, listeners=10
[22:02:08] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:02:08] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[22:02:08] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[22:02:08] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[22:02:08] [INFO] [BloodDecal] Blood puddle created at (757.4304, 737.4367) (added to group)
[22:02:08] [INFO] [BloodDecal] Blood puddle created at (782.9759, 751.1876) (added to group)
[22:02:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(667.2632, 771.204), source=ENEMY (Enemy3), range=1469, listeners=10
[22:02:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:02:08] [INFO] [LastChance] Threat detected: @Area2D@1705
[22:02:08] [INFO] [LastChance] Not in hard mode - effect disabled
[22:02:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:02:08] [INFO] [Player] Spawning blood effect at (450, 800.9444), dir=(1, 0), lethal=False (C#)
[22:02:08] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 800.9444), dir=(1, 0), lethal=false
[22:02:08] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:02:08] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:02:08] [INFO] [ImpactEffects] Wall found for blood splatter at (500, 800.9444) (dist=50 px)
[22:02:08] [INFO] [BloodDecal] Blood puddle created at (499, 800.9444) (added to group)
[22:02:08] [INFO] [ImpactEffects] Blood effect spawned at (450, 800.9444) (scale=1)
[22:02:08] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 9.0
[22:02:08] [INFO] [LastChance] Player health updated (C# Damaged): 9.0
[22:02:08] [INFO] [BloodDecal] Blood puddle created at (783.4083, 787.8875) (added to group)
[22:02:08] [INFO] [BloodDecal] Blood puddle created at (747.725, 763.5735) (added to group)
[22:02:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(601.34564, 788.0999), shooter_id=5055478498996, bullet_pos=(518.7038, 798.8134)
[22:02:08] [INFO] [Bullet] Using shooter_position, distance=83,33339
[22:02:08] [INFO] [Bullet] Distance to wall: 83,33339 (5,674324% of viewport)
[22:02:08] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:02:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(659.1595, 778.14), source=ENEMY (Enemy3), range=1469, listeners=10
[22:02:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:02:08] [INFO] [LastChance] Threat detected: @Area2D@1712
[22:02:08] [INFO] [LastChance] Not in hard mode - effect disabled
[22:02:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:02:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 806.9444), shooter_id=5058833942915, bullet_pos=(916.8155, 625.9747)
[22:02:08] [INFO] [Bullet] Using shooter_position, distance=500.666320800781
[22:02:08] [INFO] [Bullet] Distance to wall: 500.666320800781 (34.0912904275088% of viewport)
[22:02:08] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:02:08] [INFO] [Bullet] Caliber cannot penetrate walls
[22:02:08] [INFO] [BloodDecal] Blood puddle created at (742.9864, 753.748) (added to group)
[22:02:08] [INFO] [BloodDecal] Blood puddle created at (784.1731, 769.2152) (added to group)
[22:02:08] [INFO] [BloodyFeet:Enemy3] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[22:02:08] [INFO] [BloodDecal] Blood puddle created at (800.7324, 784.1326) (added to group)
[22:02:08] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:02:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:08] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:02:08] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:02:08] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:02:08] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:02:08] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:02:08] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:02:08] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:02:08] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[22:02:08] [ENEMY] [Enemy1] Death animation component initialized
[22:02:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:08] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:02:08] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:02:08] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:02:08] [ENEMY] [Enemy2] Death animation component initialized
[22:02:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:08] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:02:08] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:02:08] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:02:08] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:02:08] [ENEMY] [Enemy3] Death animation component initialized
[22:02:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:08] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:02:08] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:02:08] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:02:08] [ENEMY] [Enemy4] Death animation component initialized
[22:02:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:08] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:02:08] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:02:08] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:02:08] [ENEMY] [Enemy5] Death animation component initialized
[22:02:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:08] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:02:08] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:02:08] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:02:08] [ENEMY] [Enemy6] Death animation component initialized
[22:02:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:08] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:02:08] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:02:08] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:02:08] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:02:08] [ENEMY] [Enemy7] Death animation component initialized
[22:02:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:08] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:02:08] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:02:08] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:02:08] [ENEMY] [Enemy8] Death animation component initialized
[22:02:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:08] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:02:08] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:02:08] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:02:08] [ENEMY] [Enemy9] Death animation component initialized
[22:02:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:08] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:02:08] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:02:08] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:02:08] [ENEMY] [Enemy10] Death animation component initialized
[22:02:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:08] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:02:08] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:02:08] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:02:08] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[22:02:08] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:02:08] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:02:08] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:02:08] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:02:08] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:02:08] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[22:02:08] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:02:08] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[22:02:08] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 10/10
[22:02:08] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:02:08] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:02:08] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:02:08] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:02:08] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:02:08] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:02:08] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:02:08] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:02:08] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:02:08] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:02:08] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:02:08] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:02:08] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:02:08] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[22:02:08] [INFO] [ScoreManager] Level started with 10 enemies
[22:02:08] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[22:02:08] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[22:02:08] [INFO] [ReplayManager] Replay data cleared
[22:02:08] [INFO] [BuildingLevel] Previous replay data cleared
[22:02:08] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[22:02:08] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[22:02:08] [INFO] [ReplayManager] Level: BuildingLevel
[22:02:08] [INFO] [ReplayManager] Player: Player (valid: True)
[22:02:08] [INFO] [ReplayManager] Enemies count: 10
[22:02:08] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[22:02:08] [INFO] [ReplayManager]   Enemy 0: Enemy1
[22:02:08] [INFO] [ReplayManager]   Enemy 1: Enemy2
[22:02:08] [INFO] [ReplayManager]   Enemy 2: Enemy3
[22:02:08] [INFO] [ReplayManager]   Enemy 3: Enemy4
[22:02:08] [INFO] [ReplayManager]   Enemy 4: Enemy5
[22:02:08] [INFO] [ReplayManager]   Enemy 5: Enemy6
[22:02:08] [INFO] [ReplayManager]   Enemy 6: Enemy7
[22:02:08] [INFO] [ReplayManager]   Enemy 7: Enemy8
[22:02:08] [INFO] [ReplayManager]   Enemy 8: Enemy9
[22:02:08] [INFO] [ReplayManager]   Enemy 9: Enemy10
[22:02:08] [INFO] [BuildingLevel] Replay recording started successfully
[22:02:08] [INFO] [BloodDecal] Blood puddle created at (837.7249, 781.4402) (added to group)
[22:02:08] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:02:08] [INFO] [CinemaEffects] Found player node: Player
[22:02:08] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:02:08] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[22:02:08] [ENEMY] [Enemy1] Registered as sound listener
[22:02:08] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[22:02:08] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:02:08] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[22:02:08] [ENEMY] [Enemy2] Registered as sound listener
[22:02:08] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[22:02:08] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:02:08] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[22:02:08] [ENEMY] [Enemy3] Registered as sound listener
[22:02:08] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[22:02:08] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:02:08] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[22:02:08] [ENEMY] [Enemy4] Registered as sound listener
[22:02:08] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[22:02:08] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:02:08] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[22:02:08] [ENEMY] [Enemy5] Registered as sound listener
[22:02:08] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[22:02:08] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:02:08] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[22:02:08] [ENEMY] [Enemy6] Registered as sound listener
[22:02:08] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[22:02:08] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:02:08] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[22:02:08] [ENEMY] [Enemy7] Registered as sound listener
[22:02:08] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[22:02:08] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:02:08] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[22:02:08] [ENEMY] [Enemy8] Registered as sound listener
[22:02:08] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[22:02:08] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:02:08] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[22:02:08] [ENEMY] [Enemy9] Registered as sound listener
[22:02:08] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[22:02:08] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:02:08] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[22:02:08] [ENEMY] [Enemy10] Registered as sound listener
[22:02:08] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[22:02:08] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:02:08] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[22:02:08] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:08] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:08] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:08] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:08] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:08] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:08] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:08] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:08] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:02:08] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[22:02:08] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[22:02:08] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:02:08] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:02:08] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:02:08] [INFO] [LastChance] Found player: Player
[22:02:08] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:02:08] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:02:08] [INFO] [LastChance] Connected to player Died signal (C#)
[22:02:08] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:02:08] [INFO] [BloodDecal] Blood puddle created at (580.0621, 789.6294) (added to group)
[22:02:09] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[22:02:10] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:02:10] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[22:02:10] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,796), corner_timer=0.30
[22:02:10] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,796), corner_timer=0.30
[22:02:10] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,784), corner_timer=-0.02
[22:02:10] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:02:10] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,784), corner_timer=-0.02
[22:02:10] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[22:02:10] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,784), corner_timer=0.30
[22:02:10] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,784), corner_timer=0.30
[22:02:10] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[22:02:10] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,784), corner_timer=-0.02
[22:02:10] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[22:02:10] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,784), corner_timer=0.30
[22:02:11] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,784), corner_timer=-0.02
[22:02:11] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[22:02:11] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,784), corner_timer=0.30
[22:02:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 790.4444), source=PLAYER (MakarovPM), range=1469, listeners=20
[22:02:11] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[22:02:11] [ENEMY] [Enemy1] Heard gunshot at (450, 790.4444), source_type=0, intensity=0.01, distance=465
[22:02:11] [ENEMY] [Enemy2] Heard gunshot at (450, 790.4444), source_type=0, intensity=0.04, distance=246
[22:02:11] [ENEMY] [Enemy3] Heard gunshot at (450, 790.4444), source_type=0, intensity=0.04, distance=253
[22:02:11] [ENEMY] [Enemy4] Heard gunshot at (450, 790.4444), source_type=0, intensity=0.02, distance=367
[22:02:11] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:02:11] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=71.0°, current=-33.8°, player=(450,784), corner_timer=0.00
[22:02:11] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=78.0°, current=-157.5°, player=(450,784), corner_timer=0.00
[22:02:11] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=172.2°, current=-33.8°, player=(450,784), corner_timer=0.00
[22:02:11] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-161.7°, current=168.8°, player=(450,784), corner_timer=0.00
[22:02:11] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=172.2°, current=135.5°, player=(450,784), corner_timer=0.00
[22:02:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 790.4444), source=PLAYER (MakarovPM), range=1469, listeners=10
[22:02:11] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:02:11] [ENEMY] [Enemy3] Hit: dmg=1, hp=3/3->2/3
[22:02:11] [INFO] [ImpactEffects] spawn_blood_effect called at (689.4331, 751.4559), dir=(0.997204, -0.074724), lethal=false
[22:02:11] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:02:11] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:02:11] [INFO] [ImpactEffects] Blood effect spawned at (689.4331, 751.4559) (scale=0.5)
[22:02:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 790.4444), source=PLAYER (MakarovPM), range=1469, listeners=10
[22:02:11] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:02:11] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(450,784), corner_timer=-0.02
[22:02:11] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[22:02:11] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[22:02:11] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(450,784), corner_timer=0.30
[22:02:11] [INFO] [EnemyGrenade] Unsafe throw distance (120 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:02:11] [INFO] [EnemyGrenade] Unsafe throw distance (119 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:02:11] [INFO] [EnemyGrenade] Unsafe throw distance (117 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:02:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(683.0099, 756.2249), source=ENEMY (Enemy3), range=1469, listeners=10
[22:02:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:02:11] [INFO] [EnemyGrenade] Unsafe throw distance (116 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:02:11] [INFO] [EnemyGrenade] Unsafe throw distance (115 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:02:11] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[22:02:11] [INFO] [EnemyGrenade] Unsafe throw distance (114 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:02:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(616.83813, 772.0959), shooter_id=5970474305717, bullet_pos=(500.70184, 818.32764)
[22:02:11] [INFO] [Bullet] Using shooter_position, distance=125,00005
[22:02:11] [INFO] [Bullet] Distance to wall: 125,00005 (8,511484% of viewport)
[22:02:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:02:11] [INFO] [Bullet] Starting wall penetration at (500.70184, 818.32764)
[22:02:11] [INFO] [EnemyGrenade] Unsafe throw distance (113 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:02:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(674.4457, 762.5836), source=ENEMY (Enemy3), range=1469, listeners=10
[22:02:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:02:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 790.4444), source=PLAYER (MakarovPM), range=1469, listeners=10
[22:02:11] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:02:11] [INFO] [Bullet] Raycast backward hit penetrating body at distance 45,911274
[22:02:11] [INFO] [Bullet] Body exited signal received for penetrating body
[22:02:11] [INFO] [Bullet] Exiting penetration at (457.3443, 835.58746) after traveling 41,666668 pixels through wall
[22:02:11] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:02:11] [INFO] [EnemyGrenade] Unsafe throw distance (112 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:02:11] [INFO] [BloodDecal] Blood puddle created at (731.35, 760.5337) (added to group)
[22:02:11] [INFO] [BloodDecal] Blood puddle created at (749.1475, 736.5283) (added to group)
[22:02:11] [INFO] [BloodDecal] Blood puddle created at (751.9172, 758.9667) (added to group)
[22:02:11] [ENEMY] [Enemy3] Hit: dmg=1, hp=2/3->1/3
[22:02:11] [INFO] [ImpactEffects] spawn_blood_effect called at (670.1636, 765.7629), dir=(0.999841, -0.017848), lethal=false
[22:02:11] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:02:11] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:02:11] [INFO] [ImpactEffects] Blood effect spawned at (670.1636, 765.7629) (scale=0.5)
[22:02:11] [INFO] [LastChance] Threat detected: @Area2D@1982
[22:02:11] [INFO] [LastChance] Not in hard mode - effect disabled
[22:02:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:02:11] [INFO] [EnemyGrenade] Unsafe throw distance (221 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:02:11] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[22:02:11] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[22:02:11] [INFO] [EnemyGrenade] Unsafe throw distance (219 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:02:11] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[22:02:11] [INFO] [BloodDecal] Blood puddle created at (766.967, 802.4471) (added to group)
[22:02:11] [INFO] [EnemyGrenade] Unsafe throw distance (216 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:02:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(665.8815, 768.9422), source=ENEMY (Enemy3), range=1469, listeners=10
[22:02:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:02:11] [INFO] [LastChance] Threat detected: Bullet
[22:02:11] [INFO] [LastChance] Not in hard mode - effect disabled
[22:02:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:02:11] [INFO] [Player] Spawning blood effect at (450, 784.4444), dir=(1, 0), lethal=False (C#)
[22:02:11] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 784.4444), dir=(1, 0), lethal=false
[22:02:11] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:02:11] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:02:11] [INFO] [ImpactEffects] Blood effect spawned at (450, 784.4444) (scale=1)
[22:02:11] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 9.0
[22:02:11] [INFO] [LastChance] Player health updated (C# Damaged): 9.0
[22:02:11] [INFO] [EnemyGrenade] Unsafe throw distance (214 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:02:11] [INFO] [BloodDecal] Blood puddle created at (777.3268, 742.0193) (added to group)
[22:02:11] [INFO] [EnemyGrenade] Unsafe throw distance (210 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:02:11] [INFO] [EnemyGrenade] Unsafe throw distance (205 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:02:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 790.4444), shooter_id=5973829748989, bullet_pos=(917.019, 773.3148)
[22:02:11] [INFO] [Bullet] Using shooter_position, distance=467.333068847656
[22:02:11] [INFO] [Bullet] Distance to wall: 467.333068847656 (31.821568007575% of viewport)
[22:02:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:02:11] [INFO] [Bullet] Caliber cannot penetrate walls
[22:02:11] [INFO] [EnemyGrenade] Unsafe throw distance (201 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:02:11] [INFO] [Player] Spawning blood effect at (450, 784.4444), dir=(1, 0), lethal=False (C#)
[22:02:11] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 784.4444), dir=(1, 0), lethal=false
[22:02:11] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:02:11] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:02:11] [INFO] [ImpactEffects] Blood effect spawned at (450, 784.4444) (scale=1)
[22:02:11] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 8.0
[22:02:11] [INFO] [LastChance] Player health updated (C# Damaged): 8.0
[22:02:11] [INFO] [EnemyGrenade] Unsafe throw distance (197 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:02:11] [ENEMY] [Enemy3] Hit: dmg=1, hp=1/3->0/3
[22:02:11] [INFO] [ImpactEffects] spawn_blood_effect called at (642.3302, 786.4288), dir=(0.997611, -0.069086), lethal=true
[22:02:11] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:02:11] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[22:02:11] [INFO] [ImpactEffects] Blood effect spawned at (642.3302, 786.4288) (scale=0.75)
[22:02:11] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[22:02:11] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:02:11] [INFO] [PowerFantasy] Enemy killed - triggering 300ms last chance effect
[22:02:11] [INFO] [PowerFantasy] Starting power fantasy effect:
[22:02:11] [INFO] [PowerFantasy]   - Time scale: 0.10
[22:02:11] [INFO] [PowerFantasy]   - Duration: 300ms
[22:02:11] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[22:02:11] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[22:02:11] [INFO] [DeathAnim] Started - Angle: -4.0 deg, Index: 11
[22:02:11] [ENEMY] [Enemy3] Death animation started with hit direction: (0.997611, -0.069086)
[22:02:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 790.4444), source=PLAYER (MakarovPM), range=1469, listeners=9
[22:02:11] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[22:02:11] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(450,784), corner_timer=-0.02
[22:02:11] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[22:02:11] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(450,784), corner_timer=0.30
[22:02:11] [INFO] [BloodDecal] Blood puddle created at (844.4706, 812.5995) (added to group)
[22:02:12] [INFO] [PowerFantasy] Effect duration expired after 326.00 ms
[22:02:12] [INFO] [PowerFantasy] Ending power fantasy effect
[22:02:12] [INFO] [BloodDecal] Blood puddle created at (777.0283, 789.587) (added to group)
[22:02:12] [INFO] [BloodDecal] Blood puddle created at (815.9964, 841.5623) (added to group)
[22:02:12] [INFO] [BloodDecal] Blood puddle created at (834.0906, 825.7007) (added to group)
[22:02:12] [INFO] [BloodDecal] Blood puddle created at (865.7585, 852.1272) (added to group)
[22:02:12] [INFO] [BloodDecal] Blood puddle created at (509.6628, 769.5087) (added to group)
[22:02:12] [INFO] [BloodDecal] Blood puddle created at (727.2319, 779.1331) (added to group)
[22:02:12] [INFO] [BloodDecal] Blood puddle created at (498.3423, 788.0487) (added to group)
[22:02:12] [INFO] [BloodDecal] Blood puddle created at (545.7158, 760.6289) (added to group)
[22:02:12] [INFO] [BloodDecal] Blood puddle created at (771.8169, 800.3823) (added to group)
[22:02:12] [INFO] [BloodDecal] Blood puddle created at (760.212, 801.5087) (added to group)
[22:02:12] [INFO] [BloodDecal] Blood puddle created at (803.8726, 773.7076) (added to group)
[22:02:12] [INFO] [BloodDecal] Blood puddle created at (789.3649, 756.8806) (added to group)
[22:02:12] [INFO] [BloodDecal] Blood puddle created at (534.6685, 778.1793) (added to group)
[22:02:12] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:02:12] [INFO] [BloodDecal] Blood puddle created at (553.7289, 770.9717) (added to group)
[22:02:12] [INFO] [BloodDecal] Blood puddle created at (587.4473, 802.9565) (added to group)
[22:02:12] [INFO] [BloodDecal] Blood puddle created at (530.5, 790.8107) (added to group)
[22:02:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 790.4444), shooter_id=5973829748989, bullet_pos=(915.248, 746.3473)
[22:02:12] [INFO] [Bullet] Using shooter_position, distance=467.333129882813
[22:02:12] [INFO] [Bullet] Distance to wall: 467.333129882813 (31.821572163571% of viewport)
[22:02:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:02:12] [INFO] [Bullet] Caliber cannot penetrate walls
[22:02:12] [ENEMY] [Enemy3] Ragdoll activated
[22:02:12] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:02:12] [INFO] [BloodDecal] Blood puddle created at (643.4044, 814.7353) (added to group)
[22:02:12] [INFO] [BloodDecal] Blood puddle created at (583.979, 805.9892) (added to group)
[22:02:12] [INFO] [BloodDecal] Blood puddle created at (731.769, 781.6994) (added to group)
[22:02:12] [INFO] [ReplayManager] Recording frame 240 (3,7s): player_valid=True, enemies=10
[22:02:12] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(450,784), corner_timer=-0.02
[22:02:12] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[22:02:12] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(450,784), corner_timer=0.30
[22:02:12] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:02:12] [INFO] [BloodDecal] Blood puddle created at (805.2911, 815.1409) (added to group)
[22:02:12] [INFO] [BloodDecal] Blood puddle created at (850.105, 821.0999) (added to group)
[22:02:13] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(450,784), corner_timer=-0.02
[22:02:13] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[22:02:13] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(450,784), corner_timer=0.30
[22:02:13] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[22:02:13] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:02:13] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(507,772), corner_timer=-0.02
[22:02:13] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[22:02:13] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(511,769), corner_timer=0.30
[22:02:13] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=56.9°, current=58.2°, player=(531,750), corner_timer=0.00
[22:02:13] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[22:02:13] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:02:13] [ENEMY] [Enemy1] Warning: No valid flank position (both sides behind walls)
[22:02:13] [ENEMY] [Enemy1] FLANKING started: target=(355.9308, 777.6919), side=left, pos=(238.9753, 401.9335)
[22:02:13] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
[22:02:13] [ENEMY] [Enemy1] FLANKING corner check: angle -116.4°
[22:02:13] [ENEMY] [Enemy4] PURSUING corner check: angle -42.7°
[22:02:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(562.1529, 725.6733), source=PLAYER (MakarovPM), range=1469, listeners=9
[22:02:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
[22:02:13] [ENEMY] [Enemy3] Death animation completed
[22:02:13] [INFO] [ReplayManager] Recording frame 300 (4,7s): player_valid=True, enemies=10
[22:02:13] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(585,698), corner_timer=-0.02
[22:02:13] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[22:02:13] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(589,695), corner_timer=0.30
[22:02:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(604.8869, 689.0602), source=PLAYER (MakarovPM), range=1469, listeners=9
[22:02:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
[22:02:13] [ENEMY] [Enemy2] Hit: dmg=1, hp=2/2->1/2
[22:02:13] [INFO] [ImpactEffects] spawn_blood_effect called at (400, 550), dir=(-0.614058, -0.78926), lethal=false
[22:02:13] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:02:13] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:02:13] [INFO] [ImpactEffects] Wall found for blood splatter at (340, 472.8809) (dist=97 px)
[22:02:13] [INFO] [BloodDecal] Blood puddle created at (341, 472.8809) (added to group)
[22:02:13] [INFO] [ImpactEffects] Blood effect spawned at (400, 550) (scale=0.5)
[22:02:13] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:02:13] [ENEMY] [Enemy1] ROT_CHANGE: P2:combat_state -> P1:visible, state=FLANKING, target=26.8°, current=51.7°, player=(615,676), corner_timer=0.02
[22:02:13] [ENEMY] [Enemy1] State: FLANKING -> COMBAT
[22:02:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(604.8869, 689.0602), shooter_id=5973829748989, bullet_pos=(506.6098, 597.9689)
[22:02:13] [INFO] [Bullet] Using shooter_position, distance=134.000030517578
[22:02:13] [INFO] [Bullet] Distance to wall: 134.000030517578 (9.12430848227064% of viewport)
[22:02:13] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:02:13] [INFO] [Bullet] Caliber cannot penetrate walls
[22:02:13] [ENEMY] [Enemy1] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=25.9°, current=-35.6°, player=(619,676), corner_timer=0.02
[22:02:13] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[22:02:13] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=-105.3°, current=-106.5°, player=(621,676), corner_timer=-0.02
[22:02:13] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[22:02:14] [ENEMY] [Enemy1] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=24.4°, current=-25.4°, player=(622,677), corner_timer=0.02
[22:02:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(407.4066, 546.9764), source=ENEMY (Enemy2), range=1469, listeners=9
[22:02:14] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[22:02:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(461.165, 588.6973), shooter_id=5970121985090, bullet_pos=(501.04694, 600.76154)
[22:02:14] [INFO] [Bullet] Using shooter_position, distance=41,66669
[22:02:14] [INFO] [Bullet] Distance to wall: 41,66669 (2,8371618% of viewport)
[22:02:14] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[22:02:14] [INFO] [Bullet] Starting wall penetration at (501.04694, 600.76154)
[22:02:14] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[22:02:14] [INFO] [Bullet] Exiting penetration at (545.71466, 614.27344) after traveling 41,66667 pixels through wall
[22:02:14] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:02:14] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(621,680), corner_timer=-0.02
[22:02:14] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[22:02:14] [INFO] [BloodDecal] Blood puddle created at (373.5567, 533.1022) (added to group)
[22:02:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(417.2821, 542.9449), source=ENEMY (Enemy2), range=1469, listeners=9
[22:02:14] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[22:02:14] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(621,681), corner_timer=0.30
[22:02:14] [INFO] [LastChance] Threat detected: Bullet
[22:02:14] [INFO] [LastChance] Not in hard mode - effect disabled
[22:02:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:02:14] [INFO] [BloodDecal] Blood puddle created at (387.285, 506.3968) (added to group)
[22:02:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(427.1576, 538.9134), source=ENEMY (Enemy2), range=1469, listeners=9
[22:02:14] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[22:02:14] [INFO] [LastChance] Threat detected: @Area2D@2058
[22:02:14] [INFO] [LastChance] Not in hard mode - effect disabled
[22:02:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:02:14] [INFO] [BloodDecal] Blood puddle created at (348.524, 509.8843) (added to group)
[22:02:14] [INFO] [BloodDecal] Blood puddle created at (379.6253, 478.5768) (added to group)
[22:02:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(437.0331, 534.8819), source=ENEMY (Enemy2), range=1469, listeners=9
[22:02:14] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[22:02:14] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:02:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(603.4261, 709.4171), source=PLAYER (MakarovPM), range=1469, listeners=9
[22:02:14] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
[22:02:14] [INFO] [Player] Spawning blood effect at (603.42615, 703.4171), dir=(1, 0), lethal=False (C#)
[22:02:14] [INFO] [ImpactEffects] spawn_blood_effect called at (603.4261, 703.4171), dir=(1, 0), lethal=false
[22:02:14] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:02:14] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:02:14] [INFO] [ImpactEffects] Blood effect spawned at (603.4261, 703.4171) (scale=1)
[22:02:14] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 7.0
[22:02:14] [INFO] [LastChance] Player health updated (C# Damaged): 7.0
[22:02:14] [INFO] [BloodDecal] Blood puddle created at (342.0435, 541.8146) (added to group)
[22:02:14] [INFO] [BloodDecal] Blood puddle created at (325.172, 510.3015) (added to group)
[22:02:14] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=-45.4°, current=-6.2°, player=(596,710), corner_timer=0.00
[22:02:14] [INFO] [BloodDecal] Blood puddle created at (290.0894, 508.0163) (added to group)
[22:02:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(603.4261, 709.4171), shooter_id=5973829748989, bullet_pos=(500.2524, 599.619)
[22:02:14] [INFO] [Bullet] Using shooter_position, distance=150.666687011719
[22:02:14] [INFO] [Bullet] Distance to wall: 150.666687011719 (10.2591717702356% of viewport)
[22:02:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:02:14] [INFO] [Bullet] Caliber cannot penetrate walls
[22:02:14] [INFO] [BloodDecal] Blood puddle created at (295.2008, 540.4547) (added to group)
[22:02:14] [ENEMY] [Enemy4] Hit: dmg=1, hp=4/4->3/4
[22:02:14] [INFO] [ImpactEffects] spawn_blood_effect called at (676.2205, 914.0658), dir=(1, 0), lethal=false
[22:02:14] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:02:14] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:02:14] [INFO] [ImpactEffects] Blood effect spawned at (676.2205, 914.0658) (scale=1)
[22:02:14] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=-121.2°, current=180.0°, player=(569,737), corner_timer=-0.02
[22:02:14] [INFO] [BloodyFeet:Enemy1] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[22:02:14] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.5°, current=89.5°, player=(565,741), corner_timer=-0.02
[22:02:14] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[22:02:14] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(561,744), corner_timer=0.30
[22:02:14] [ENEMY] [Enemy1] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=37.9°, current=37.9°, player=(556,747), corner_timer=0.02
[22:02:14] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[22:02:14] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=-127.0°, current=-174.4°, player=(552,750), corner_timer=-0.02
[22:02:14] [INFO] [BloodDecal] Blood puddle created at (271.5307, 528.7495) (added to group)
[22:02:14] [INFO] [BloodDecal] Blood puddle created at (335.1574, 481.6407) (added to group)
[22:02:14] [INFO] [BloodDecal] Blood puddle created at (681.6167, 727.3484) (added to group)
[22:02:14] [INFO] [BloodDecal] Blood puddle created at (662.4389, 725.0865) (added to group)
[22:02:14] [INFO] [BloodDecal] Blood puddle created at (669.0425, 749.178) (added to group)
[22:02:14] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[22:02:14] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:02:14] [INFO] [BloodDecal] Blood puddle created at (715.1752, 776.9448) (added to group)
[22:02:14] [INFO] [BloodDecal] Blood puddle created at (707.1794, 783.33) (added to group)
[22:02:14] [INFO] [BloodDecal] Blood puddle created at (659.6984, 721.7906) (added to group)
[22:02:14] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[22:02:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(683.4869, 914.0669), source=ENEMY (Enemy4), range=1469, listeners=9
[22:02:14] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=7
[22:02:14] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[22:02:14] [INFO] [LastChance] Threat detected: Bullet
[22:02:14] [INFO] [LastChance] Not in hard mode - effect disabled
[22:02:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:02:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(626.8447, 876.35406), shooter_id=5970826628362, bullet_pos=(519.29224, 812.6559)
[22:02:14] [INFO] [Bullet] Using shooter_position, distance=124,999985
[22:02:14] [INFO] [Bullet] Distance to wall: 124,999985 (8,511479% of viewport)
[22:02:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:02:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(690.6628, 914.0661), source=ENEMY (Enemy4), range=1469, listeners=9
[22:02:14] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=7
[22:02:14] [INFO] [BloodDecal] Blood puddle created at (683.0333, 708.7453) (added to group)
[22:02:14] [INFO] [BloodDecal] Blood puddle created at (750.7451, 967.9003) (added to group)
[22:02:14] [INFO] [BloodDecal] Blood puddle created at (724.0691, 918.8352) (added to group)
[22:02:14] [INFO] [ReplayManager] Recording frame 360 (5,7s): player_valid=True, enemies=10
[22:02:14] [INFO] [BloodDecal] Blood puddle created at (755.4242, 976.7096) (added to group)
[22:02:14] [INFO] [LastChance] Threat detected: @Area2D@2091
[22:02:14] [INFO] [LastChance] Not in hard mode - effect disabled
[22:02:14] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:02:14] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[22:02:14] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.4°, current=89.5°, player=(463,760), corner_timer=-0.02
[22:02:14] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[22:02:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(630.02625, 879.2067), shooter_id=5970826628362, bullet_pos=(527.7441, 807.3503)
[22:02:14] [INFO] [Bullet] Using shooter_position, distance=124,99996
[22:02:14] [INFO] [Bullet] Distance to wall: 124,99996 (8,511477% of viewport)
[22:02:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:02:14] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[22:02:14] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.3°, player=(457,760), corner_timer=0.30
[22:02:14] [INFO] [BloodDecal] Blood puddle created at (744.774, 921.5489) (added to group)
[22:02:14] [INFO] [BloodDecal] Blood puddle created at (799.9362, 785.4735) (added to group)
[22:02:14] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:02:14] [INFO] [BloodDecal] Blood puddle created at (711.3871, 760.2755) (added to group)
[22:02:14] [INFO] [BloodDecal] Blood puddle created at (714.5419, 799.3463) (added to group)
[22:02:14] [INFO] [BloodDecal] Blood puddle created at (815.4708, 957.348) (added to group)
[22:02:14] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:02:14] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:14] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:02:14] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:02:14] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:02:14] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:02:14] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:02:14] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:02:14] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:02:14] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[22:02:14] [ENEMY] [Enemy1] Death animation component initialized
[22:02:14] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:14] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:02:14] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:02:14] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:02:14] [ENEMY] [Enemy2] Death animation component initialized
[22:02:14] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:14] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:02:14] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:02:14] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:02:14] [ENEMY] [Enemy3] Death animation component initialized
[22:02:14] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:15] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:02:15] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:02:15] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:02:15] [ENEMY] [Enemy4] Death animation component initialized
[22:02:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:15] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:02:15] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:02:15] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:02:15] [ENEMY] [Enemy5] Death animation component initialized
[22:02:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:15] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:02:15] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:02:15] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:02:15] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:02:15] [ENEMY] [Enemy6] Death animation component initialized
[22:02:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:15] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:02:15] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:02:15] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:02:15] [ENEMY] [Enemy7] Death animation component initialized
[22:02:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:15] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:02:15] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:02:15] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:02:15] [ENEMY] [Enemy8] Death animation component initialized
[22:02:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:15] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:02:15] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:02:15] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:02:15] [ENEMY] [Enemy9] Death animation component initialized
[22:02:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:15] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:02:15] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:02:15] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:02:15] [ENEMY] [Enemy10] Death animation component initialized
[22:02:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:15] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:02:15] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:02:15] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:02:15] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[22:02:15] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:02:15] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:02:15] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:02:15] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:02:15] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:02:15] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[22:02:15] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:02:15] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[22:02:15] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 10/10
[22:02:15] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:02:15] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:02:15] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:02:15] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:02:15] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:02:15] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:02:15] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:02:15] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:02:15] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:02:15] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:02:15] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:02:15] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:02:15] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:02:15] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[22:02:15] [INFO] [ScoreManager] Level started with 10 enemies
[22:02:15] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[22:02:15] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[22:02:15] [INFO] [ReplayManager] Replay data cleared
[22:02:15] [INFO] [BuildingLevel] Previous replay data cleared
[22:02:15] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[22:02:15] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[22:02:15] [INFO] [ReplayManager] Level: BuildingLevel
[22:02:15] [INFO] [ReplayManager] Player: Player (valid: True)
[22:02:15] [INFO] [ReplayManager] Enemies count: 10
[22:02:15] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[22:02:15] [INFO] [ReplayManager]   Enemy 0: Enemy1
[22:02:15] [INFO] [ReplayManager]   Enemy 1: Enemy2
[22:02:15] [INFO] [ReplayManager]   Enemy 2: Enemy3
[22:02:15] [INFO] [ReplayManager]   Enemy 3: Enemy4
[22:02:15] [INFO] [ReplayManager]   Enemy 4: Enemy5
[22:02:15] [INFO] [ReplayManager]   Enemy 5: Enemy6
[22:02:15] [INFO] [ReplayManager]   Enemy 6: Enemy7
[22:02:15] [INFO] [ReplayManager]   Enemy 7: Enemy8
[22:02:15] [INFO] [ReplayManager]   Enemy 8: Enemy9
[22:02:15] [INFO] [ReplayManager]   Enemy 9: Enemy10
[22:02:15] [INFO] [BuildingLevel] Replay recording started successfully
[22:02:15] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:02:15] [INFO] [CinemaEffects] Found player node: Player
[22:02:15] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:02:15] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[22:02:15] [ENEMY] [Enemy1] Registered as sound listener
[22:02:15] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[22:02:15] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:02:15] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[22:02:15] [ENEMY] [Enemy2] Registered as sound listener
[22:02:15] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[22:02:15] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:02:15] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[22:02:15] [ENEMY] [Enemy3] Registered as sound listener
[22:02:15] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[22:02:15] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:02:15] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[22:02:15] [ENEMY] [Enemy4] Registered as sound listener
[22:02:15] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[22:02:15] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:02:15] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[22:02:15] [ENEMY] [Enemy5] Registered as sound listener
[22:02:15] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[22:02:15] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:02:15] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[22:02:15] [ENEMY] [Enemy6] Registered as sound listener
[22:02:15] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[22:02:15] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:02:15] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[22:02:15] [ENEMY] [Enemy7] Registered as sound listener
[22:02:15] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[22:02:15] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:02:15] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[22:02:15] [ENEMY] [Enemy8] Registered as sound listener
[22:02:15] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[22:02:15] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:02:15] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[22:02:15] [ENEMY] [Enemy9] Registered as sound listener
[22:02:15] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[22:02:15] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:02:15] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[22:02:15] [ENEMY] [Enemy10] Registered as sound listener
[22:02:15] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[22:02:15] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:02:15] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[22:02:15] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:15] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:15] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:15] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:15] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:15] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:15] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=213.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:15] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:02:15] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:02:15] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[22:02:15] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[22:02:15] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:02:15] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:02:15] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:02:15] [INFO] [LastChance] Found player: Player
[22:02:15] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:02:15] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:02:15] [INFO] [LastChance] Connected to player Died signal (C#)
[22:02:15] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:02:15] [INFO] [BloodDecal] Blood puddle created at (853.2729, 992.0767) (added to group)
[22:02:15] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[22:02:16] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:02:16] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[22:02:16] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,788), corner_timer=0.30
[22:02:16] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,788), corner_timer=0.30
[22:02:16] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,767), corner_timer=-0.02
[22:02:16] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:02:16] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,767), corner_timer=-0.02
[22:02:16] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[22:02:16] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,767), corner_timer=0.30
[22:02:16] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,767), corner_timer=0.30
[22:02:16] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[22:02:17] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,767), corner_timer=-0.02
[22:02:17] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[22:02:17] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,767), corner_timer=0.30
[22:02:17] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,767), corner_timer=-0.02
[22:02:17] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[22:02:17] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,767), corner_timer=0.30
[22:02:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 773.9444), source=PLAYER (MakarovPM), range=1469, listeners=19
[22:02:17] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[22:02:17] [ENEMY] [Enemy1] Heard gunshot at (450, 773.9444), source_type=0, intensity=0.01, distance=450
[22:02:17] [ENEMY] [Enemy2] Heard gunshot at (450, 773.9444), source_type=0, intensity=0.05, distance=229
[22:02:17] [ENEMY] [Enemy3] Heard gunshot at (450, 773.9444), source_type=0, intensity=0.04, distance=251
[22:02:17] [ENEMY] [Enemy4] Heard gunshot at (450, 773.9444), source_type=0, intensity=0.02, distance=372
[22:02:17] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:02:17] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=70.3°, current=-157.5°, player=(450,767), corner_timer=0.00
[22:02:17] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=77.1°, current=-101.3°, player=(450,767), corner_timer=0.00
[22:02:17] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=175.9°, current=11.3°, player=(450,767), corner_timer=0.00
[22:02:17] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-159.3°, current=168.8°, player=(450,767), corner_timer=0.00
[22:02:17] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=175.9°, current=-170.0°, player=(450,767), corner_timer=0.00
[22:02:17] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(450,767), corner_timer=-0.02
[22:02:17] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[22:02:17] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(450,767), corner_timer=0.30
[22:02:17] [ENEMY] [Enemy3] Hit: dmg=1, hp=4/4->3/4
[22:02:17] [INFO] [ImpactEffects] spawn_blood_effect called at (689.3607, 750.7637), dir=(0.999184, -0.040391), lethal=false
[22:02:17] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:02:17] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:02:17] [INFO] [ImpactEffects] Blood effect spawned at (689.3607, 750.7637) (scale=0.5)
[22:02:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 773.9444), source=PLAYER (MakarovPM), range=1469, listeners=10
[22:02:17] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:02:18] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[22:02:18] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[22:02:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(682.6992, 746.3338), source=ENEMY (Enemy3), range=1469, listeners=10
[22:02:18] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:02:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 773.9444), source=PLAYER (MakarovPM), range=1469, listeners=10
[22:02:18] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:02:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(616.11005, 760.35144), shooter_id=8106314565700, bullet_pos=(497.04715, 798.4174)
[22:02:18] [INFO] [Bullet] Using shooter_position, distance=124,99997
[22:02:18] [INFO] [Bullet] Distance to wall: 124,99997 (8,511477% of viewport)
[22:02:18] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:02:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(673.8171, 740.4273), source=ENEMY (Enemy3), range=1469, listeners=10
[22:02:18] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:02:18] [INFO] [LastChance] Threat detected: @Area2D@2364
[22:02:18] [INFO] [LastChance] Not in hard mode - effect disabled
[22:02:18] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:02:18] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(450,767), corner_timer=-0.02
[22:02:18] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[22:02:18] [INFO] [BloodDecal] Blood puddle created at (782.1302, 746.8922) (added to group)
[22:02:18] [INFO] [BloodDecal] Blood puddle created at (745.6595, 752.3529) (added to group)
[22:02:18] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[22:02:18] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[22:02:18] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[22:02:18] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(450,767), corner_timer=0.30
[22:02:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(664.935, 734.5208), source=ENEMY (Enemy3), range=1469, listeners=10
[22:02:18] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:02:18] [INFO] [LastChance] Threat detected: @Area2D@2367
[22:02:18] [INFO] [LastChance] Not in hard mode - effect disabled
[22:02:18] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:02:18] [INFO] [Player] Spawning blood effect at (450, 767.9444), dir=(1, 0), lethal=False (C#)
[22:02:18] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 767.9444), dir=(1, 0), lethal=false
[22:02:18] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:02:18] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:02:18] [INFO] [ImpactEffects] Blood effect spawned at (450, 767.9444) (scale=1)
[22:02:18] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 9.0
[22:02:18] [INFO] [LastChance] Player health updated (C# Damaged): 9.0
[22:02:18] [INFO] [BloodDecal] Blood puddle created at (788.2855, 750.7265) (added to group)
[22:02:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(656.0529, 728.6143), source=ENEMY (Enemy3), range=1469, listeners=10
[22:02:18] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:02:18] [INFO] [BloodDecal] Blood puddle created at (821.0639, 813.6564) (added to group)
[22:02:18] [INFO] [LastChance] Threat detected: Bullet
[22:02:18] [INFO] [LastChance] Not in hard mode - effect disabled
[22:02:18] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:02:18] [INFO] [Player] Spawning blood effect at (450, 767.9444), dir=(1, 0), lethal=False (C#)
[22:02:18] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 767.9444), dir=(1, 0), lethal=false
[22:02:18] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:02:18] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:02:18] [INFO] [ImpactEffects] Blood effect spawned at (450, 767.9444) (scale=1)
[22:02:18] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 8.0
[22:02:18] [INFO] [LastChance] Player health updated (C# Damaged): 8.0
[22:02:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 773.9444), source=PLAYER (MakarovPM), range=1469, listeners=10
[22:02:18] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:02:18] [INFO] [BloodDecal] Blood puddle created at (761.0571, 802.776) (added to group)
[22:02:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 773.9444), shooter_id=8109670010177, bullet_pos=(917.286, 767.299)
[22:02:18] [INFO] [Bullet] Using shooter_position, distance=467.333251953125
[22:02:18] [INFO] [Bullet] Distance to wall: 467.333251953125 (31.8215804755631% of viewport)
[22:02:18] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:02:18] [INFO] [Bullet] Caliber cannot penetrate walls
[22:02:18] [INFO] [BloodDecal] Blood puddle created at (816.31, 755.3369) (added to group)
[22:02:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(591.1141, 748.95026), shooter_id=8106314565700, bullet_pos=(49.495045, 741.7687)
[22:02:18] [INFO] [Bullet] Using shooter_position, distance=541,6666
[22:02:18] [INFO] [Bullet] Distance to wall: 541,6666 (36,883076% of viewport)
[22:02:18] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:02:18] [INFO] [Bullet] Starting wall penetration at (49.495045, 741.7687)
[22:02:18] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:02:18] [INFO] [Bullet] Raycast backward hit penetrating body at distance 29,170088
[22:02:18] [INFO] [BloodDecal] Blood puddle created at (794.7969, 790.7736) (added to group)
[22:02:18] [INFO] [Bullet] Body exited signal received for penetrating body
[22:02:18] [INFO] [Bullet] Exiting penetration at (2.8324776, 741.14996) after traveling 41,666668 pixels through wall
[22:02:18] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:02:18] [INFO] [BloodDecal] Blood puddle created at (909.3821, 810.2522) (added to group)
[22:02:18] [INFO] [BloodDecal] Blood puddle created at (543.1613, 763.8568) (added to group)
[22:02:18] [INFO] [BloodDecal] Blood puddle created at (533.0101, 773.6299) (added to group)
[22:02:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 773.9444), shooter_id=8109670010177, bullet_pos=(916.9933, 756.1216)
[22:02:18] [INFO] [Bullet] Using shooter_position, distance=467.333282470703
[22:02:18] [INFO] [Bullet] Distance to wall: 467.333282470703 (31.8215825535611% of viewport)
[22:02:18] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:02:18] [INFO] [Bullet] Caliber cannot penetrate walls
[22:02:18] [INFO] [BloodDecal] Blood puddle created at (808.6994, 802.7609) (added to group)
[22:02:18] [INFO] [BloodDecal] Blood puddle created at (554.1371, 759.7453) (added to group)
[22:02:18] [INFO] [BloodDecal] Blood puddle created at (531.7381, 774.8933) (added to group)
[22:02:18] [INFO] [BloodDecal] Blood puddle created at (534.1586, 799.0854) (added to group)
[22:02:18] [INFO] [BloodDecal] Blood puddle created at (533.3337, 772.5787) (added to group)
[22:02:18] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(450,767), corner_timer=-0.02
[22:02:18] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[22:02:18] [INFO] [BloodDecal] Blood puddle created at (580.417, 766.4824) (added to group)
[22:02:18] [INFO] [BloodDecal] Blood puddle created at (585.4219, 753.7555) (added to group)
[22:02:18] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(450,767), corner_timer=0.30
[22:02:18] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=-142.1°, current=136.1°, player=(450,767), corner_timer=0.00
[22:02:18] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:02:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:18] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:02:18] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:02:18] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:02:18] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:02:18] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:02:18] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:02:18] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:02:18] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[22:02:18] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:02:18] [ENEMY] [Enemy1] Death animation component initialized
[22:02:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:18] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:02:18] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:02:18] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:02:18] [ENEMY] [Enemy2] Death animation component initialized
[22:02:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:18] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:02:18] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:02:18] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:02:18] [ENEMY] [Enemy3] Death animation component initialized
[22:02:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:18] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:02:18] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:02:18] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:02:18] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:02:18] [ENEMY] [Enemy4] Death animation component initialized
[22:02:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:18] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:02:18] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:02:18] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:02:18] [ENEMY] [Enemy5] Death animation component initialized
[22:02:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:18] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:02:18] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:02:18] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:02:18] [ENEMY] [Enemy6] Death animation component initialized
[22:02:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:18] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:02:18] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:02:18] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:02:18] [ENEMY] [Enemy7] Death animation component initialized
[22:02:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:18] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:02:18] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:02:18] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:02:18] [ENEMY] [Enemy8] Death animation component initialized
[22:02:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:18] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:02:18] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:02:18] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:02:18] [ENEMY] [Enemy9] Death animation component initialized
[22:02:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:18] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:02:18] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:02:18] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:02:18] [ENEMY] [Enemy10] Death animation component initialized
[22:02:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:02:18] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:02:18] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:02:18] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:02:18] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[22:02:18] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:02:18] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:02:18] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:02:18] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:02:18] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:02:18] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[22:02:18] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:02:18] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[22:02:18] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 10/10
[22:02:18] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:02:18] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:02:18] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:02:18] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:02:18] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:02:18] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:02:18] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:02:18] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:02:18] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:02:18] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:02:18] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:02:18] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:02:18] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:02:18] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[22:02:18] [INFO] [ScoreManager] Level started with 10 enemies
[22:02:18] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[22:02:18] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[22:02:18] [INFO] [ReplayManager] Replay data cleared
[22:02:18] [INFO] [BuildingLevel] Previous replay data cleared
[22:02:18] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[22:02:18] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[22:02:18] [INFO] [ReplayManager] Level: BuildingLevel
[22:02:18] [INFO] [ReplayManager] Player: Player (valid: True)
[22:02:18] [INFO] [ReplayManager] Enemies count: 10
[22:02:18] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[22:02:18] [INFO] [ReplayManager]   Enemy 0: Enemy1
[22:02:18] [INFO] [ReplayManager]   Enemy 1: Enemy2
[22:02:18] [INFO] [ReplayManager]   Enemy 2: Enemy3
[22:02:18] [INFO] [ReplayManager]   Enemy 3: Enemy4
[22:02:18] [INFO] [ReplayManager]   Enemy 4: Enemy5
[22:02:18] [INFO] [ReplayManager]   Enemy 5: Enemy6
[22:02:18] [INFO] [ReplayManager]   Enemy 6: Enemy7
[22:02:18] [INFO] [ReplayManager]   Enemy 7: Enemy8
[22:02:18] [INFO] [ReplayManager]   Enemy 8: Enemy9
[22:02:18] [INFO] [ReplayManager]   Enemy 9: Enemy10
[22:02:18] [INFO] [BuildingLevel] Replay recording started successfully
[22:02:18] [INFO] [BloodDecal] Blood puddle created at (649.37, 847.6481) (added to group)
[22:02:18] [INFO] [BloodDecal] Blood puddle created at (567.4001, 802.6842) (added to group)
[22:02:18] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:02:18] [INFO] [CinemaEffects] Found player node: Player
[22:02:18] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:02:18] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[22:02:18] [ENEMY] [Enemy1] Registered as sound listener
[22:02:18] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[22:02:18] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:02:18] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[22:02:18] [ENEMY] [Enemy2] Registered as sound listener
[22:02:18] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[22:02:18] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:02:18] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[22:02:18] [ENEMY] [Enemy3] Registered as sound listener
[22:02:18] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[22:02:18] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:02:18] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[22:02:18] [ENEMY] [Enemy4] Registered as sound listener
[22:02:18] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[22:02:18] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:02:18] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[22:02:18] [ENEMY] [Enemy5] Registered as sound listener
[22:02:18] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[22:02:18] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:02:18] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[22:02:18] [ENEMY] [Enemy6] Registered as sound listener
[22:02:18] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[22:02:18] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:02:18] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[22:02:18] [ENEMY] [Enemy7] Registered as sound listener
[22:02:18] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[22:02:18] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:02:18] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[22:02:18] [ENEMY] [Enemy8] Registered as sound listener
[22:02:18] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[22:02:18] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:02:18] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[22:02:18] [ENEMY] [Enemy9] Registered as sound listener
[22:02:18] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[22:02:18] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:02:18] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[22:02:18] [ENEMY] [Enemy10] Registered as sound listener
[22:02:18] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[22:02:18] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:02:18] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[22:02:18] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:02:18] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:02:18] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:02:18] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:02:18] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:02:18] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=225.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:02:18] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=213.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:02:18] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:02:18] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:02:18] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[22:02:18] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[22:02:18] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:02:18] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:02:18] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:02:18] [INFO] [LastChance] Found player: Player
[22:02:18] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:02:18] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:02:18] [INFO] [LastChance] Connected to player Died signal (C#)
[22:02:18] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:02:18] [INFO] [BloodDecal] Blood puddle created at (632.9749, 766.303) (added to group)
[22:02:19] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[22:02:20] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:02:20] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[22:02:20] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1084), corner_timer=0.30
[22:02:20] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1084), corner_timer=0.30
[22:02:20] [INFO] ------------------------------------------------------------
[22:02:20] [INFO] GAME LOG ENDED: 2026-02-07T22:02:20
[22:02:20] [INFO] ============================================================
