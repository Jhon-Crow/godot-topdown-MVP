[16:46:08] [INFO] ============================================================
[16:46:08] [INFO] GAME LOG STARTED
[16:46:08] [INFO] ============================================================
[16:46:08] [INFO] Timestamp: 2026-02-04T16:46:08
[16:46:08] [INFO] Log file: I:/Загрузки/godot exe/вспышка/game_log_20260204_164608.txt
[16:46:08] [INFO] Executable: I:/Загрузки/godot exe/вспышка/Godot-Top-Down-Template.exe
[16:46:08] [INFO] OS: Windows
[16:46:08] [INFO] Debug build: false
[16:46:08] [INFO] Engine version: 4.3-stable (official)
[16:46:08] [INFO] Project: Godot Top-Down Template
[16:46:08] [INFO] ------------------------------------------------------------
[16:46:08] [INFO] [GameManager] GameManager ready
[16:46:08] [INFO] [ScoreManager] ScoreManager ready
[16:46:08] [INFO] [SoundPropagation] SoundPropagation autoload initialized
[16:46:08] [INFO] [ImpactEffects] Scenes loaded: DustEffect, BloodEffect, SparksEffect, BloodDecal
[16:46:08] [INFO] [ImpactEffects] ImpactEffectsManager ready - FULL VERSION with blood effects enabled
[16:46:08] [INFO] [ImpactEffects] Starting particle shader warmup (Issue #343 fix)...
[16:46:08] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:46:08] [INFO] [PenultimateHit] Saturation shader loaded successfully
[16:46:08] [INFO] [PenultimateHit] Starting shader warmup (Issue #343 fix)...
[16:46:08] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
[16:46:08] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
[16:46:08] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
[16:46:08] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
[16:46:08] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
[16:46:08] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:46:08] [INFO] [LastChance] Last chance shader loaded successfully
[16:46:08] [INFO] [LastChance] Starting shader warmup (Issue #343 fix)...
[16:46:08] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
[16:46:08] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
[16:46:08] [INFO] [LastChance]   Sepia intensity: 0.70
[16:46:08] [INFO] [LastChance]   Brightness: 0.60
[16:46:08] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
[16:46:08] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
[16:46:08] [INFO] [ExperimentalSettings] ExperimentalSettings initialized - FOV enabled: true, Complex grenade throwing: false
[16:46:08] [INFO] [CinemaEffects] CinemaEffectsManager initializing (v5.3 - overlay approach with simplified death circle)...
[16:46:08] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:46:08] [INFO] [CinemaEffects] Created effects layer at layer 99
[16:46:08] [INFO] [CinemaEffects] Cinema shader loaded successfully (v5.0 - no screen_texture)
[16:46:08] [INFO] [CinemaEffects] Starting cinema shader warmup (Issue #343 fix)...
[16:46:08] [INFO] [CinemaEffects] Cinema film effect initialized (v5.3) - Configuration:
[16:46:08] [INFO] [CinemaEffects]   Approach: Overlay-based (no screen_texture)
[16:46:08] [INFO] [CinemaEffects]   Grain intensity: 0.15
[16:46:08] [INFO] [CinemaEffects]   Warm tint: 0.12 intensity
[16:46:08] [INFO] [CinemaEffects]   Sunny effect: 0.08 intensity
[16:46:08] [INFO] [CinemaEffects]   Vignette: 0.25 intensity
[16:46:08] [INFO] [CinemaEffects]   Film defects: 1.5% probability
[16:46:08] [INFO] [CinemaEffects]   White specks: 0.70 intensity, 4.0% probability
[16:46:08] [INFO] [CinemaEffects]   Death effects: cigarette burn + expanding spots + end of reel circle (160px, blinks 2x)
[16:46:08] [INFO] [CinemaEffects] Enabling effect after 1 frame(s)...
[16:46:08] [INFO] [GrenadeTimerHelper] Autoload ready
[16:46:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:08] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:46:08] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:46:08] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:46:08] [ENEMY] [Enemy1] Death animation component initialized
[16:46:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:08] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:46:08] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:46:08] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:46:08] [ENEMY] [Enemy2] Death animation component initialized
[16:46:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:08] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:46:08] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:46:08] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:46:08] [ENEMY] [Enemy3] Death animation component initialized
[16:46:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:08] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:46:08] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:46:08] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:46:08] [ENEMY] [Enemy4] Death animation component initialized
[16:46:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:08] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:46:08] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:46:08] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:46:08] [ENEMY] [Enemy5] Death animation component initialized
[16:46:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:08] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:46:08] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:46:08] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:46:08] [ENEMY] [Enemy6] Death animation component initialized
[16:46:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:08] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:46:08] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:46:08] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:46:08] [ENEMY] [Enemy7] Death animation component initialized
[16:46:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:08] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:46:08] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:46:08] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:46:08] [INFO] [EnemyGrenade] Initialized: 1 grenades
[16:46:08] [ENEMY] [Enemy8] Death animation component initialized
[16:46:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:08] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:46:08] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:46:08] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:46:08] [ENEMY] [Enemy9] Death animation component initialized
[16:46:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:08] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:46:08] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:46:08] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:46:08] [ENEMY] [Enemy10] Death animation component initialized
[16:46:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:08] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:46:08] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:46:08] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:46:08] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[16:46:08] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:46:08] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:46:08] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:46:08] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:46:08] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:46:08] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:46:08] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:46:08] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[16:46:08] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:46:08] [INFO] [BloodDecal] Blood puddle created at (640, 360) (added to group)
[16:46:08] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:46:08] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:46:08] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:46:08] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:46:08] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:46:08] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:46:08] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:46:08] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:46:08] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:46:08] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:46:08] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:46:08] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:46:08] [INFO] [ScoreManager] Level started with 10 enemies
[16:46:08] [INFO] [CinemaEffects] Found player node: Player
[16:46:08] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:46:08] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:46:08] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
[16:46:08] [ENEMY] [Enemy1] Registered as sound listener
[16:46:08] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[16:46:08] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:46:08] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
[16:46:08] [ENEMY] [Enemy2] Registered as sound listener
[16:46:08] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[16:46:08] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:46:08] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
[16:46:08] [ENEMY] [Enemy3] Registered as sound listener
[16:46:08] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[16:46:08] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:46:08] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
[16:46:08] [ENEMY] [Enemy4] Registered as sound listener
[16:46:08] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[16:46:08] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:46:08] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
[16:46:08] [ENEMY] [Enemy5] Registered as sound listener
[16:46:08] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[16:46:08] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:46:08] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
[16:46:08] [ENEMY] [Enemy6] Registered as sound listener
[16:46:08] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[16:46:08] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:46:08] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
[16:46:08] [ENEMY] [Enemy7] Registered as sound listener
[16:46:08] [ENEMY] [Enemy7] Spawned at (1606.114, 893.8859), hp: 2, behavior: PATROL
[16:46:08] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:46:08] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
[16:46:08] [ENEMY] [Enemy8] Registered as sound listener
[16:46:08] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[16:46:08] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:46:08] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
[16:46:08] [ENEMY] [Enemy9] Registered as sound listener
[16:46:08] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[16:46:08] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:46:08] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
[16:46:08] [ENEMY] [Enemy10] Registered as sound listener
[16:46:08] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[16:46:08] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:46:08] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:08] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:08] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:08] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:08] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:08] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:08] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:08] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:08] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:46:08] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:46:08] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:46:08] [INFO] [PenultimateHit] Shader warmup complete in 205 ms
[16:46:08] [INFO] [LastChance] Shader warmup complete in 203 ms
[16:46:08] [INFO] [CinemaEffects] Cinema shader warmup complete in 176 ms
[16:46:08] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:46:08] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:46:08] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:46:08] [INFO] [LastChance] Found player: Player
[16:46:08] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:46:08] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:46:08] [INFO] [LastChance] Connected to player Died signal (C#)
[16:46:08] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:46:09] [INFO] [ImpactEffects] Particle shader warmup complete: 6 effects warmed up in 512 ms
[16:46:09] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:46:09] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:46:09] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:46:10] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:46:10] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:46:10] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:46:10] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:46:10] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1250), corner_timer=0.30
[16:46:10] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1250), corner_timer=0.30
[16:46:10] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,1250), corner_timer=-0.02
[16:46:10] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:46:10] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,1250), corner_timer=-0.02
[16:46:10] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:46:10] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,1250), corner_timer=0.30
[16:46:10] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,1250), corner_timer=0.30
[16:46:10] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:46:10] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:46:10] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:46:11] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,1250), corner_timer=-0.02
[16:46:11] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[16:46:11] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,1250), corner_timer=0.30
[16:46:11] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:46:11] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (635.9908, 1231.9666)
[16:46:11] [INFO] [GrenadeTimer] Initialized for Flashbang grenade, effect radius: 400
[16:46:11] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Flashbang)
[16:46:11] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:46:11] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[16:46:11] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:46:11] [INFO] [Player.Grenade] Step 1 complete! Drag: (215.11511, 2.6716309)
[16:46:11] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:46:11] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:46:11] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,1250), corner_timer=-0.02
[16:46:11] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[16:46:11] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,1250), corner_timer=0.30
[16:46:11] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(450,1250), corner_timer=-0.02
[16:46:11] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[16:46:11] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(450,1250), corner_timer=0.30
[16:46:12] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(450,1250), corner_timer=-0.02
[16:46:12] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[16:46:12] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(450,1250), corner_timer=0.30
[16:46:12] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:12] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(450,1250), corner_timer=-0.02
[16:46:12] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[16:46:12] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(450,1250), corner_timer=0.30
[16:46:12] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:12] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(450,1250), corner_timer=-0.02
[16:46:12] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[16:46:12] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(450,1250), corner_timer=0.30
[16:46:13] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:13] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(450,1250), corner_timer=-0.02
[16:46:13] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[16:46:13] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(450,1250), corner_timer=0.30
[16:46:13] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:13] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(506,1250), corner_timer=-0.02
[16:46:13] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[16:46:13] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(511,1250), corner_timer=0.30
[16:46:13] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:13] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(568,1250), corner_timer=-0.02
[16:46:13] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[16:46:13] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(569,1250), corner_timer=0.30
[16:46:13] [INFO] [Player.Grenade.Simple] Throwing! Target: (372.1082, 1489.1095), Distance: 289,7, Speed: 416,9, Friction: 300,0
[16:46:13] [INFO] [Player.Grenade] Player rotated for throw: 0 -> 2,2598047
[16:46:13] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:46:13] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(-0.6357721, 0.7718768), speed=416,9, spawn=(530.9093, 1296.3126)
[16:46:13] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:46:13] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:46:13] [INFO] [Player.Grenade] State reset to IDLE
[16:46:13] [INFO] [Player.Grenade] State reset to IDLE
[16:46:13] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:46:14] [INFO] [Player.Grenade] Player rotation restored to 0
[16:46:14] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:14] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.5°, current=89.5°, player=(569,1250), corner_timer=-0.02
[16:46:14] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[16:46:14] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:46:14] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(569,1250), corner_timer=0.30
[16:46:14] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:14] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.4°, current=89.5°, player=(569,1290), corner_timer=-0.02
[16:46:14] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[16:46:14] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.3°, player=(569,1295), corner_timer=0.30
[16:46:14] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:14] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.5°, player=(604,1371), corner_timer=-0.02
[16:46:14] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[16:46:14] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(607,1371), corner_timer=0.30
[16:46:15] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:15] [INFO] [GrenadeTimer] Flashbang grenade landed at (366.7225, 1495.6484)
[16:46:15] [INFO] [SoundPropagation] Sound emitted: type=GRENADE_LANDING, pos=(366.7225, 1495.648), source=NEUTRAL (FlashbangGrenade), range=112, listeners=10
[16:46:15] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=10, self=0, below_threshold=0
[16:46:15] [INFO] [GrenadeTimer] Emitted grenade landing sound at (366.7225, 1495.6484)
[16:46:15] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(629,1371), corner_timer=-0.02
[16:46:15] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[16:46:15] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(629,1371), corner_timer=0.30
[16:46:15] [INFO] [GrenadeTimer] Timer expired - EXPLODING!
[16:46:15] [INFO] [GrenadeTimer] EXPLODED at (364.25403, 1498.6455)!
[16:46:15] [INFO] [GrenadeTimer] Applying flashbang effects (radius: 400, blindness: 12s, stun: 6s)
[16:46:15] [INFO] [GrenadeTimer] Applied flashbang to player at distance 294,4
[16:46:15] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(364.254, 1498.646), source=NEUTRAL (FlashbangGrenade), range=2938, listeners=10
[16:46:15] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=10
[16:46:15] [INFO] [GrenadeTimer] Raycast hit obstacle at (545.9639, 1412) but it's close to player (93px) - showing effect anyway
[16:46:15] [INFO] [GrenadeTimer] Spawned C# explosion effect at (364.25403, 1498.6455)
[16:46:15] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:15] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(629,1371), corner_timer=-0.02
[16:46:15] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[16:46:15] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(629,1371), corner_timer=0.30
[16:46:15] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:15] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(629,1371), corner_timer=-0.02
[16:46:15] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[16:46:15] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(629,1371), corner_timer=0.30
[16:46:16] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:16] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:46:16] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:16] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:46:16] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:46:16] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:46:16] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:46:16] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:46:16] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:46:16] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:46:16] [ENEMY] [Enemy1] Death animation component initialized
[16:46:16] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:16] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:46:16] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:46:16] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:46:16] [ENEMY] [Enemy2] Death animation component initialized
[16:46:16] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:16] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:46:16] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:46:16] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:46:16] [ENEMY] [Enemy3] Death animation component initialized
[16:46:16] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:16] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:46:16] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:46:16] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:46:16] [ENEMY] [Enemy4] Death animation component initialized
[16:46:16] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:16] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:46:16] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:46:16] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:46:16] [ENEMY] [Enemy5] Death animation component initialized
[16:46:16] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:16] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:46:16] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:46:16] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:46:16] [INFO] [EnemyGrenade] Initialized: 1 grenades
[16:46:16] [ENEMY] [Enemy6] Death animation component initialized
[16:46:16] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:16] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:46:16] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:46:16] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:46:16] [ENEMY] [Enemy7] Death animation component initialized
[16:46:16] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:16] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:46:16] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:46:16] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:46:16] [ENEMY] [Enemy8] Death animation component initialized
[16:46:16] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:16] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:46:16] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:46:16] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:46:16] [ENEMY] [Enemy9] Death animation component initialized
[16:46:16] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:16] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:46:16] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:46:16] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:46:16] [ENEMY] [Enemy10] Death animation component initialized
[16:46:16] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:16] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:46:16] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:46:16] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:46:16] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[16:46:16] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:46:16] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:46:16] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:46:16] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:46:16] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:46:16] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:46:16] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:46:16] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[16:46:16] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:46:16] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:46:16] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:46:16] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:46:16] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:46:16] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:46:16] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:46:16] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:46:16] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:46:16] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:46:16] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:46:16] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:46:16] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:46:16] [INFO] [ScoreManager] Level started with 10 enemies
[16:46:16] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:46:16] [INFO] [CinemaEffects] Found player node: Player
[16:46:16] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:46:16] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[16:46:16] [ENEMY] [Enemy1] Registered as sound listener
[16:46:16] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[16:46:16] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:46:16] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[16:46:16] [ENEMY] [Enemy2] Registered as sound listener
[16:46:16] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[16:46:16] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:46:16] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[16:46:16] [ENEMY] [Enemy3] Registered as sound listener
[16:46:16] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[16:46:16] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:46:16] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[16:46:16] [ENEMY] [Enemy4] Registered as sound listener
[16:46:16] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[16:46:16] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:46:16] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[16:46:16] [ENEMY] [Enemy5] Registered as sound listener
[16:46:16] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[16:46:16] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:46:16] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[16:46:16] [ENEMY] [Enemy6] Registered as sound listener
[16:46:16] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[16:46:16] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:46:16] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[16:46:16] [ENEMY] [Enemy7] Registered as sound listener
[16:46:16] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[16:46:16] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:46:16] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[16:46:16] [ENEMY] [Enemy8] Registered as sound listener
[16:46:16] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[16:46:16] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:46:16] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[16:46:16] [ENEMY] [Enemy9] Registered as sound listener
[16:46:16] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[16:46:16] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:46:16] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[16:46:16] [ENEMY] [Enemy10] Registered as sound listener
[16:46:16] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[16:46:16] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:46:16] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:16] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:16] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=236.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:16] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:16] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:16] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:16] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:16] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:16] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:46:16] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:46:16] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:46:16] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:46:16] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:46:16] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:46:16] [INFO] [LastChance] Found player: Player
[16:46:16] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:46:16] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:46:16] [INFO] [LastChance] Connected to player Died signal (C#)
[16:46:16] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:46:17] [INFO] [PauseMenu] Armory button pressed
[16:46:17] [INFO] [PauseMenu] Creating new armory menu instance
[16:46:17] [INFO] [PauseMenu] armory_menu_scene resource path: res://scenes/ui/ArmoryMenu.tscn
[16:46:17] [INFO] [PauseMenu] Instance created, class: CanvasLayer, name: ArmoryMenu
[16:46:17] [INFO] [PauseMenu] Script attached: res://scripts/ui/armory_menu.gd
[16:46:17] [INFO] [PauseMenu] back_pressed signal exists on instance
[16:46:17] [INFO] [PauseMenu] back_pressed signal connected
[16:46:17] [INFO] [PauseMenu] Armory menu instance added as child, is_inside_tree: true
[16:46:17] [INFO] [PauseMenu] _populate_weapon_grid method exists
[16:46:18] [INFO] [GrenadeManager] Grenade type changed from Flashbang to Frag Grenade
[16:46:18] [INFO] [GrenadeManager] Restarting level due to grenade type change
[16:46:18] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:46:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:18] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:46:18] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:46:18] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:46:18] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:46:18] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:46:18] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:46:18] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:46:18] [ENEMY] [Enemy1] Death animation component initialized
[16:46:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:18] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:46:18] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:46:18] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:46:18] [ENEMY] [Enemy2] Death animation component initialized
[16:46:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:18] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:46:18] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:46:18] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:46:18] [ENEMY] [Enemy3] Death animation component initialized
[16:46:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:18] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:46:18] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:46:18] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:46:18] [ENEMY] [Enemy4] Death animation component initialized
[16:46:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:18] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:46:18] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:46:18] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:46:18] [ENEMY] [Enemy5] Death animation component initialized
[16:46:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:18] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:46:18] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:46:18] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:46:18] [ENEMY] [Enemy6] Death animation component initialized
[16:46:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:18] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:46:18] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:46:18] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:46:18] [ENEMY] [Enemy7] Death animation component initialized
[16:46:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:18] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:46:18] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:46:18] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:46:18] [ENEMY] [Enemy8] Death animation component initialized
[16:46:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:18] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:46:18] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:46:18] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:46:18] [ENEMY] [Enemy9] Death animation component initialized
[16:46:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:18] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:46:18] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:46:18] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:46:18] [ENEMY] [Enemy10] Death animation component initialized
[16:46:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:18] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:46:18] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:46:18] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:46:18] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[16:46:18] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:46:18] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:46:18] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:46:18] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:46:18] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:46:18] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:46:18] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:46:18] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[16:46:18] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:46:18] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:46:18] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:46:18] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:46:18] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:46:18] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:46:18] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:46:18] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:46:18] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:46:18] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:46:18] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:46:18] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:46:18] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:46:18] [INFO] [ScoreManager] Level started with 10 enemies
[16:46:18] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:46:18] [INFO] [CinemaEffects] Found player node: Player
[16:46:18] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:46:18] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[16:46:18] [ENEMY] [Enemy1] Registered as sound listener
[16:46:18] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[16:46:18] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:46:18] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[16:46:18] [ENEMY] [Enemy2] Registered as sound listener
[16:46:18] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[16:46:18] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:46:18] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[16:46:18] [ENEMY] [Enemy3] Registered as sound listener
[16:46:18] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[16:46:18] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:46:18] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[16:46:18] [ENEMY] [Enemy4] Registered as sound listener
[16:46:18] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[16:46:18] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:46:18] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
[16:46:18] [ENEMY] [Enemy5] Registered as sound listener
[16:46:18] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[16:46:18] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:46:18] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[16:46:18] [ENEMY] [Enemy6] Registered as sound listener
[16:46:18] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[16:46:18] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:46:18] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[16:46:18] [ENEMY] [Enemy7] Registered as sound listener
[16:46:18] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[16:46:18] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:46:18] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[16:46:18] [ENEMY] [Enemy8] Registered as sound listener
[16:46:18] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[16:46:18] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:46:18] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[16:46:18] [ENEMY] [Enemy9] Registered as sound listener
[16:46:18] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[16:46:18] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:46:18] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[16:46:18] [ENEMY] [Enemy10] Registered as sound listener
[16:46:18] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[16:46:18] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:46:18] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:18] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:18] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:18] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:18] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:18] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:18] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:18] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:18] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:46:18] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:46:18] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:46:18] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:46:18] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:46:18] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:46:18] [INFO] [LastChance] Found player: Player
[16:46:18] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:46:18] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:46:18] [INFO] [LastChance] Connected to player Died signal (C#)
[16:46:18] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:46:19] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:46:19] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:46:19] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:46:19] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:46:20] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:46:20] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:46:20] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:46:20] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:46:20] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:46:20] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:46:20] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1250), corner_timer=0.30
[16:46:20] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1250), corner_timer=0.30
[16:46:20] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:46:20] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (577.8482, 1331.4843)
[16:46:20] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[16:46:20] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Frag)
[16:46:20] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:46:20] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[16:46:20] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:46:20] [INFO] [Player.Grenade] Step 1 complete! Drag: (148.98364, -20.704956)
[16:46:20] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,1250), corner_timer=-0.02
[16:46:20] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:46:20] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,1250), corner_timer=-0.02
[16:46:20] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:46:20] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,1250), corner_timer=0.30
[16:46:20] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,1250), corner_timer=0.30
[16:46:20] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:46:20] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:46:21] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,1250), corner_timer=-0.02
[16:46:21] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[16:46:21] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,1250), corner_timer=0.30
[16:46:21] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,1250), corner_timer=-0.02
[16:46:21] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[16:46:21] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,1250), corner_timer=0.30
[16:46:21] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(450,1250), corner_timer=-0.02
[16:46:21] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[16:46:21] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(450,1250), corner_timer=0.30
[16:46:22] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(452,1250), corner_timer=-0.02
[16:46:22] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[16:46:22] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(453,1250), corner_timer=0.30
[16:46:22] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:22] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(490,1307), corner_timer=-0.02
[16:46:22] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[16:46:22] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(490,1309), corner_timer=0.30
[16:46:22] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:23] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(490,1317), corner_timer=-0.02
[16:46:23] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[16:46:23] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(490,1317), corner_timer=0.30
[16:46:23] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:23] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(490,1317), corner_timer=-0.02
[16:46:23] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[16:46:23] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(490,1317), corner_timer=0.30
[16:46:23] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:23] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(490,1317), corner_timer=-0.02
[16:46:23] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[16:46:23] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(490,1317), corner_timer=0.30
[16:46:23] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:23] [INFO] [Player.Grenade.Simple] Throwing! Target: (352.06644, 1480.4167), Distance: 178,6, Speed: 327,3, Friction: 300,0
[16:46:23] [INFO] [Player.Grenade] Player rotated for throw: 0 -> 2,2764168
[16:46:23] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:46:23] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(-0.6485062, 0.76120937), speed=327,3, spawn=(451.90863, 1363.2231)
[16:46:23] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:46:23] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:46:23] [INFO] [Player.Grenade] State reset to IDLE
[16:46:23] [INFO] [Player.Grenade] State reset to IDLE
[16:46:23] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:46:23] [INFO] [Player.Grenade] Player rotation restored to 0
[16:46:24] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(490,1317), corner_timer=-0.02
[16:46:24] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[16:46:24] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(490,1317), corner_timer=0.30
[16:46:24] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:46:24] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:24] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.5°, current=89.5°, player=(423,1317), corner_timer=-0.02
[16:46:24] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[16:46:24] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(417,1317), corner_timer=0.30
[16:46:24] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:24] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.4°, current=89.5°, player=(319,1331), corner_timer=-0.02
[16:46:24] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[16:46:24] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.3°, player=(315,1334), corner_timer=0.30
[16:46:24] [INFO] [GrenadeTimer] Frag grenade landed - EXPLODING!
[16:46:24] [INFO] [GrenadeTimer] EXPLODED at (341.40024, 1492.937)!
[16:46:24] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[16:46:24] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[16:46:24] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(341.4002, 1492.937), source=NEUTRAL (FragGrenade), range=2938, listeners=30
[16:46:24] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
[16:46:24] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=10
[16:46:24] [INFO] [GrenadeTimer] Raycast hit obstacle at (318.34802, 1412) but it's close to player (66px) - showing effect anyway
[16:46:24] [INFO] [GrenadeTimer] Spawned C# explosion effect at (341.40024, 1492.937)
[16:46:24] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:24] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.5°, player=(280,1371), corner_timer=-0.02
[16:46:25] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[16:46:25] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(280,1371), corner_timer=0.30
[16:46:25] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:25] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(280,1371), corner_timer=-0.02
[16:46:25] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[16:46:25] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(280,1371), corner_timer=0.30
[16:46:25] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:46:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:25] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:46:25] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:46:25] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:46:25] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:46:25] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:46:25] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:46:25] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:46:25] [ENEMY] [Enemy1] Death animation component initialized
[16:46:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:25] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:46:25] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:46:25] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:46:25] [ENEMY] [Enemy2] Death animation component initialized
[16:46:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:25] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:46:25] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:46:25] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:46:25] [ENEMY] [Enemy3] Death animation component initialized
[16:46:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:25] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:46:25] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:46:25] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:46:25] [ENEMY] [Enemy4] Death animation component initialized
[16:46:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:25] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:46:25] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:46:25] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:46:25] [ENEMY] [Enemy5] Death animation component initialized
[16:46:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:25] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:46:25] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:46:25] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:46:25] [ENEMY] [Enemy6] Death animation component initialized
[16:46:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:25] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:46:25] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:46:25] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:46:25] [ENEMY] [Enemy7] Death animation component initialized
[16:46:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:25] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:46:25] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:46:25] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:46:25] [ENEMY] [Enemy8] Death animation component initialized
[16:46:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:25] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:46:25] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:46:25] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:46:25] [ENEMY] [Enemy9] Death animation component initialized
[16:46:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:25] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:46:25] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:46:25] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:46:25] [ENEMY] [Enemy10] Death animation component initialized
[16:46:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:25] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:46:25] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:46:25] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:46:25] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[16:46:25] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:46:25] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:46:25] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:46:25] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:46:25] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:46:25] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:46:25] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:46:25] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[16:46:25] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:46:25] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:46:25] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:46:25] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:46:25] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:46:25] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:46:25] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:46:25] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:46:25] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:46:25] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:46:25] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:46:25] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:46:25] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:46:25] [INFO] [ScoreManager] Level started with 10 enemies
[16:46:25] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:46:25] [INFO] [CinemaEffects] Found player node: Player
[16:46:25] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:46:25] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[16:46:25] [ENEMY] [Enemy1] Registered as sound listener
[16:46:25] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[16:46:25] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:46:25] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[16:46:25] [ENEMY] [Enemy2] Registered as sound listener
[16:46:25] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[16:46:25] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:46:25] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[16:46:25] [ENEMY] [Enemy3] Registered as sound listener
[16:46:25] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[16:46:25] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:46:25] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[16:46:25] [ENEMY] [Enemy4] Registered as sound listener
[16:46:25] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[16:46:25] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:46:25] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[16:46:25] [ENEMY] [Enemy5] Registered as sound listener
[16:46:25] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[16:46:25] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:46:25] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[16:46:25] [ENEMY] [Enemy6] Registered as sound listener
[16:46:25] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[16:46:25] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:46:25] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[16:46:25] [ENEMY] [Enemy7] Registered as sound listener
[16:46:25] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[16:46:25] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:46:25] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[16:46:25] [ENEMY] [Enemy8] Registered as sound listener
[16:46:25] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[16:46:25] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:46:25] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[16:46:25] [ENEMY] [Enemy9] Registered as sound listener
[16:46:25] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[16:46:25] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:46:25] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[16:46:25] [ENEMY] [Enemy10] Registered as sound listener
[16:46:25] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[16:46:25] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:46:25] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:25] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:25] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:25] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:25] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:25] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:25] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:25] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:25] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:46:25] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:46:25] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:46:25] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:46:25] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:46:25] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:46:25] [INFO] [LastChance] Found player: Player
[16:46:25] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:46:25] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:46:25] [INFO] [LastChance] Connected to player Died signal (C#)
[16:46:25] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:46:26] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:46:26] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:46:26] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(454,1408), corner_timer=0.30
[16:46:26] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(454,1408), corner_timer=0.30
[16:46:27] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(456,1481), corner_timer=-0.02
[16:46:27] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:46:27] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(456,1481), corner_timer=-0.02
[16:46:27] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:46:27] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(455,1483), corner_timer=0.30
[16:46:27] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(455,1483), corner_timer=0.30
[16:46:27] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:46:27] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:46:27] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:46:27] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(452,1489), corner_timer=-0.02
[16:46:27] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[16:46:27] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(452,1489), corner_timer=0.30
[16:46:27] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(452,1489), corner_timer=-0.02
[16:46:27] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[16:46:27] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(452,1489), corner_timer=0.30
[16:46:28] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(452,1489), corner_timer=-0.02
[16:46:28] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[16:46:28] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(452,1489), corner_timer=0.30
[16:46:28] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:46:28] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (355.40674, 1426.9493)
[16:46:28] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[16:46:28] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Frag)
[16:46:28] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:46:28] [INFO] [Player.Grenade] Timer started, grenade created at (452.87262, 1489.8683)
[16:46:28] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:46:28] [INFO] [Player.Grenade] Step 1 complete! Drag: (211.10645, -28.003906)
[16:46:28] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:46:28] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:46:28] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(452,1489), corner_timer=-0.02
[16:46:28] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[16:46:28] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(452,1489), corner_timer=0.30
[16:46:28] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:29] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(452,1487), corner_timer=-0.02
[16:46:29] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[16:46:29] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(452,1486), corner_timer=0.30
[16:46:29] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:29] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(452,1406), corner_timer=-0.02
[16:46:29] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[16:46:29] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(452,1402), corner_timer=0.30
[16:46:29] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:29] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(452,1365), corner_timer=-0.02
[16:46:29] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[16:46:29] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(452,1365), corner_timer=0.30
[16:46:29] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:30] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(452,1365), corner_timer=-0.02
[16:46:30] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[16:46:30] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(452,1365), corner_timer=0.30
[16:46:30] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:30] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(452,1365), corner_timer=-0.02
[16:46:30] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[16:46:30] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(452,1365), corner_timer=0.30
[16:46:30] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:30] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.5°, current=89.5°, player=(452,1365), corner_timer=-0.02
[16:46:30] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[16:46:30] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(452,1365), corner_timer=0.30
[16:46:30] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:31] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.4°, current=89.5°, player=(452,1365), corner_timer=-0.02
[16:46:31] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[16:46:31] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.3°, player=(452,1365), corner_timer=0.30
[16:46:31] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:31] [INFO] [Player.Grenade.Simple] Throwing! Target: (380.12488, 1440.523), Distance: 54,6, Speed: 181,0, Friction: 300,0
[16:46:31] [INFO] [Player.Grenade] Player rotated for throw: 0 -> 2,317904
[16:46:31] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:46:31] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(-0.67951965, 0.73365724), speed=181,0, spawn=(412.10144, 1405.9988)
[16:46:31] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:46:31] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:46:31] [INFO] [Player.Grenade] State reset to IDLE
[16:46:31] [INFO] [Player.Grenade] State reset to IDLE
[16:46:31] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:46:31] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.5°, player=(452,1361), corner_timer=-0.02
[16:46:31] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[16:46:31] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(452,1360), corner_timer=0.30
[16:46:31] [INFO] [Player.Grenade] Player rotation restored to 0
[16:46:31] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:31] [INFO] [GrenadeTimer] Frag grenade landed - EXPLODING!
[16:46:31] [INFO] [GrenadeTimer] EXPLODED at (407.19083, 1420.2291)!
[16:46:31] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[16:46:31] [INFO] [Player] Spawning blood effect at (448.0611, 1334.4785), dir=(0.43024802, -0.90271074), lethal=False (C#)
[16:46:31] [INFO] [ImpactEffects] spawn_blood_effect called at (448.0611, 1334.479), dir=(0.430248, -0.902711), lethal=false
[16:46:31] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:46:31] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:46:31] [INFO] [ImpactEffects] Blood effect spawned at (448.0611, 1334.479) (scale=1)
[16:46:31] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[16:46:31] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[16:46:31] [INFO] [Player] Spawning blood effect at (448.0611, 1334.4785), dir=(0.43024802, -0.90271074), lethal=False (C#)
[16:46:31] [INFO] [ImpactEffects] spawn_blood_effect called at (448.0611, 1334.479), dir=(0.430248, -0.902711), lethal=false
[16:46:31] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:46:31] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:46:31] [INFO] [ImpactEffects] Blood effect spawned at (448.0611, 1334.479) (scale=1)
[16:46:31] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[16:46:31] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[16:46:31] [INFO] [PenultimateHit] Starting penultimate hit effect:
[16:46:31] [INFO] [PenultimateHit]   - Time scale: 0.10
[16:46:31] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[16:46:31] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[16:46:31] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[16:46:31] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[16:46:31] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[16:46:31] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[16:46:31] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[16:46:31] [INFO] [Player] Spawning blood effect at (448.0611, 1334.4785), dir=(0.43024802, -0.90271074), lethal=True (C#)
[16:46:31] [INFO] [ImpactEffects] spawn_blood_effect called at (448.0611, 1334.479), dir=(0.430248, -0.902711), lethal=true
[16:46:31] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:46:31] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[16:46:31] [INFO] [ImpactEffects] Blood effect spawned at (448.0611, 1334.479) (scale=1.5)
[16:46:31] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[16:46:31] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[16:46:31] [INFO] [CinemaEffects] Player died - triggering death effects
[16:46:31] [INFO] [CinemaEffects] Death effects triggered - starting cigarette burn, expanding spots, and end of reel (top-right)
[16:46:31] [INFO] [PenultimateHit] Player died - ending penultimate effect
[16:46:31] [INFO] [PenultimateHit] Ending penultimate hit effect
[16:46:31] [INFO] [PenultimateHit] Starting visual effects fade-out over 400ms
[16:46:31] [INFO] [LastChance] Player died
[16:46:31] [INFO] [GrenadeTimer] Damaged player at distance 95,0
[16:46:31] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[16:46:31] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(407.1908, 1420.229), source=NEUTRAL (FragGrenade), range=2938, listeners=20
[16:46:31] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[16:46:31] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=10
[16:46:31] [INFO] [GrenadeTimer] Spawned C# explosion effect at (407.19083, 1420.2291)
[16:46:31] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:46:31] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(418,1314), corner_timer=-0.02
[16:46:31] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[16:46:31] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(413,1314), corner_timer=0.30
[16:46:31] [INFO] [BloodDecal] Blood puddle created at (452.915, 1293.444) (added to group)
[16:46:31] [INFO] [BloodDecal] Blood puddle created at (455.2951, 1303.954) (added to group)
[16:46:31] [INFO] [BloodDecal] Blood puddle created at (467.2901, 1292.508) (added to group)
[16:46:31] [INFO] [BloodDecal] Blood puddle created at (453.9081, 1299.939) (added to group)
[16:46:31] [INFO] [BloodDecal] Blood puddle created at (447.9747, 1294.269) (added to group)
[16:46:31] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:31] [INFO] [BloodDecal] Blood puddle created at (456.7139, 1284.806) (added to group)
[16:46:31] [INFO] [BloodDecal] Blood puddle created at (493.8698, 1288.891) (added to group)
[16:46:31] [INFO] [BloodDecal] Blood puddle created at (455.7227, 1276.978) (added to group)
[16:46:31] [INFO] [BloodDecal] Blood puddle created at (513.8928, 1307.724) (added to group)
[16:46:31] [INFO] [BloodDecal] Blood puddle created at (485.372, 1307.13) (added to group)
[16:46:32] [INFO] [BloodDecal] Blood puddle created at (488.3704, 1324.133) (added to group)
[16:46:32] [INFO] [BloodDecal] Blood puddle created at (446.7492, 1245.255) (added to group)
[16:46:32] [INFO] [BloodDecal] Blood puddle created at (482.6298, 1240.574) (added to group)
[16:46:32] [INFO] [BloodDecal] Blood puddle created at (497.523, 1308.058) (added to group)
[16:46:32] [INFO] [BloodDecal] Blood puddle created at (504.1781, 1307.893) (added to group)
[16:46:32] [INFO] [BloodDecal] Blood puddle created at (451.6584, 1274.546) (added to group)
[16:46:32] [INFO] [PenultimateHit] Visual effects fade-out complete
[16:46:32] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[16:46:32] [INFO] [PenultimateHit] Called player RefreshHealthVisual (C#)
[16:46:32] [INFO] [BloodDecal] Blood puddle created at (520.5858, 1306.262) (added to group)
[16:46:32] [INFO] [BloodDecal] Blood puddle created at (451.2317, 1271.703) (added to group)
[16:46:32] [INFO] [BloodDecal] Blood puddle created at (484.2704, 1239.614) (added to group)
[16:46:32] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:46:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:32] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:46:32] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:46:32] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:46:32] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:46:32] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:46:32] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:46:32] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:46:32] [INFO] [CinemaEffects] Death effects reset
[16:46:32] [ENEMY] [Enemy1] Death animation component initialized
[16:46:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:32] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:46:32] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:46:32] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:46:32] [ENEMY] [Enemy2] Death animation component initialized
[16:46:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:32] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:46:32] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:46:32] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:46:32] [ENEMY] [Enemy3] Death animation component initialized
[16:46:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:32] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:46:32] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:46:32] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:46:32] [ENEMY] [Enemy4] Death animation component initialized
[16:46:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:32] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:46:32] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:46:32] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:46:32] [ENEMY] [Enemy5] Death animation component initialized
[16:46:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:32] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:46:32] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:46:32] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:46:32] [ENEMY] [Enemy6] Death animation component initialized
[16:46:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:32] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:46:32] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:46:32] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:46:32] [ENEMY] [Enemy7] Death animation component initialized
[16:46:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:32] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:46:32] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:46:32] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:46:32] [ENEMY] [Enemy8] Death animation component initialized
[16:46:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:32] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:46:32] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:46:32] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:46:32] [ENEMY] [Enemy9] Death animation component initialized
[16:46:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:32] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:46:32] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:46:32] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:46:32] [ENEMY] [Enemy10] Death animation component initialized
[16:46:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:32] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:46:32] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:46:32] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:46:32] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[16:46:32] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:46:32] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:46:32] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:46:32] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:46:32] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:46:32] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:46:32] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:46:32] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[16:46:32] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:46:32] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:46:32] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:46:32] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:46:32] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:46:32] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:46:32] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:46:32] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:46:32] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:46:32] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:46:32] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:46:32] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:46:32] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:46:32] [INFO] [ScoreManager] Level started with 10 enemies
[16:46:32] [INFO] [BloodDecal] Blood puddle created at (473.5862, 1257.404) (added to group)
[16:46:32] [INFO] [BloodDecal] Blood puddle created at (550.6485, 1260.025) (added to group)
[16:46:32] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:46:32] [INFO] [CinemaEffects] Found player node: Player
[16:46:32] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:46:32] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[16:46:32] [ENEMY] [Enemy1] Registered as sound listener
[16:46:32] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[16:46:32] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:46:32] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[16:46:32] [ENEMY] [Enemy2] Registered as sound listener
[16:46:32] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[16:46:32] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:46:32] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[16:46:32] [ENEMY] [Enemy3] Registered as sound listener
[16:46:32] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[16:46:32] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:46:32] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[16:46:32] [ENEMY] [Enemy4] Registered as sound listener
[16:46:32] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[16:46:32] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:46:32] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[16:46:32] [ENEMY] [Enemy5] Registered as sound listener
[16:46:32] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[16:46:32] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:46:32] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[16:46:32] [ENEMY] [Enemy6] Registered as sound listener
[16:46:32] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[16:46:32] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:46:32] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[16:46:32] [ENEMY] [Enemy7] Registered as sound listener
[16:46:32] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[16:46:32] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:46:32] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[16:46:32] [ENEMY] [Enemy8] Registered as sound listener
[16:46:32] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[16:46:32] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:46:32] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[16:46:32] [ENEMY] [Enemy9] Registered as sound listener
[16:46:32] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[16:46:32] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:46:32] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[16:46:32] [ENEMY] [Enemy10] Registered as sound listener
[16:46:32] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[16:46:32] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:46:32] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[16:46:32] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:32] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:32] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:32] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:32] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:32] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=225.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:32] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=157.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:32] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:32] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:46:32] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:46:32] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:46:32] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:46:32] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:46:32] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:46:32] [INFO] [LastChance] Found player: Player
[16:46:32] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:46:32] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:46:32] [INFO] [LastChance] Connected to player Died signal (C#)
[16:46:32] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:46:32] [INFO] [BloodDecal] Blood puddle created at (453.3386, 1211.38) (added to group)
[16:46:32] [INFO] [BloodDecal] Blood puddle created at (537.4976, 1327.205) (added to group)
[16:46:32] [INFO] [BloodDecal] Blood puddle created at (474.5583, 1253.856) (added to group)
[16:46:32] [INFO] [BloodDecal] Blood puddle created at (469.9116, 1310.01) (added to group)
[16:46:32] [INFO] [BloodDecal] Blood puddle created at (521.1252, 1290.273) (added to group)
[16:46:32] [INFO] [BloodDecal] Blood puddle created at (523.6781, 1307.535) (added to group)
[16:46:32] [INFO] [BloodDecal] Blood puddle created at (490.2322, 1268.807) (added to group)
[16:46:32] [INFO] [BloodDecal] Blood puddle created at (498.0805, 1302.814) (added to group)
[16:46:32] [INFO] [BloodDecal] Blood puddle created at (461.4755, 1286.808) (added to group)
[16:46:32] [INFO] [BloodDecal] Blood puddle created at (447.9724, 1307.013) (added to group)
[16:46:32] [INFO] [BloodDecal] Blood puddle created at (513.6487, 1247.308) (added to group)
[16:46:32] [INFO] [BloodDecal] Blood puddle created at (596.8188, 1282.495) (added to group)
[16:46:32] [INFO] [BloodDecal] Blood puddle created at (531.8719, 1240.844) (added to group)
[16:46:32] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:46:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:32] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:46:32] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:46:32] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:46:32] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:46:32] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:46:32] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:46:32] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:46:32] [ENEMY] [Enemy1] Death animation component initialized
[16:46:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:32] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:46:32] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:46:32] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:46:32] [INFO] [EnemyGrenade] Initialized: 1 grenades
[16:46:32] [ENEMY] [Enemy2] Death animation component initialized
[16:46:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:32] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:46:32] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:46:32] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:46:32] [ENEMY] [Enemy3] Death animation component initialized
[16:46:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:32] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:46:32] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:46:32] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:46:32] [ENEMY] [Enemy4] Death animation component initialized
[16:46:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:32] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:46:32] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:46:32] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:46:32] [ENEMY] [Enemy5] Death animation component initialized
[16:46:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:32] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:46:32] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:46:32] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:46:32] [ENEMY] [Enemy6] Death animation component initialized
[16:46:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:32] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:46:32] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:46:32] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:46:32] [ENEMY] [Enemy7] Death animation component initialized
[16:46:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:32] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:46:32] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:46:32] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:46:32] [ENEMY] [Enemy8] Death animation component initialized
[16:46:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:32] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:46:32] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:46:32] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:46:32] [ENEMY] [Enemy9] Death animation component initialized
[16:46:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:32] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:46:32] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:46:32] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:46:32] [ENEMY] [Enemy10] Death animation component initialized
[16:46:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:32] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:46:32] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:46:32] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:46:32] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[16:46:32] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:46:32] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:46:32] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:46:32] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:46:32] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:46:32] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:46:32] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:46:32] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[16:46:32] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:46:32] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:46:32] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:46:32] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:46:32] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:46:32] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:46:32] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:46:32] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:46:32] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:46:32] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:46:32] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:46:32] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:46:32] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:46:32] [INFO] [ScoreManager] Level started with 10 enemies
[16:46:32] [INFO] [BloodDecal] Blood puddle created at (563.1326, 1302.249) (added to group)
[16:46:32] [INFO] [BloodDecal] Blood puddle created at (561.6126, 1322.194) (added to group)
[16:46:32] [INFO] [BloodDecal] Blood puddle created at (473.6644, 1243.202) (added to group)
[16:46:32] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:46:32] [INFO] [CinemaEffects] Found player node: Player
[16:46:32] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:46:32] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[16:46:32] [ENEMY] [Enemy1] Registered as sound listener
[16:46:32] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[16:46:32] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:46:32] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[16:46:32] [ENEMY] [Enemy2] Registered as sound listener
[16:46:32] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[16:46:32] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:46:32] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[16:46:32] [ENEMY] [Enemy3] Registered as sound listener
[16:46:32] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[16:46:32] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:46:32] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[16:46:32] [ENEMY] [Enemy4] Registered as sound listener
[16:46:32] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[16:46:32] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:46:32] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
[16:46:32] [ENEMY] [Enemy5] Registered as sound listener
[16:46:32] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[16:46:32] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:46:32] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[16:46:32] [ENEMY] [Enemy6] Registered as sound listener
[16:46:32] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[16:46:32] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:46:32] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[16:46:32] [ENEMY] [Enemy7] Registered as sound listener
[16:46:32] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[16:46:32] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:46:32] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[16:46:32] [ENEMY] [Enemy8] Registered as sound listener
[16:46:32] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[16:46:32] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:46:32] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[16:46:32] [ENEMY] [Enemy9] Registered as sound listener
[16:46:32] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[16:46:32] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:46:32] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[16:46:32] [ENEMY] [Enemy10] Registered as sound listener
[16:46:32] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[16:46:32] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:46:32] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:32] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:32] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:32] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:32] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:32] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:32] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=78.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:32] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:32] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:46:32] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:46:32] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:46:32] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:46:32] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:46:32] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:46:32] [INFO] [LastChance] Found player: Player
[16:46:32] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:46:32] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:46:32] [INFO] [LastChance] Connected to player Died signal (C#)
[16:46:32] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:46:32] [INFO] [BloodDecal] Blood puddle created at (559.8237, 1342.845) (added to group)
[16:46:32] [INFO] [BloodDecal] Blood puddle created at (555.9715, 1259.416) (added to group)
[16:46:32] [INFO] [BloodDecal] Blood puddle created at (514.0182, 1339.112) (added to group)
[16:46:33] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:46:33] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:46:33] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(483,1397), corner_timer=0.30
[16:46:33] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(483,1397), corner_timer=0.30
[16:46:34] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[16:46:34] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(515,1363), corner_timer=-0.02
[16:46:34] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:46:34] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(515,1363), corner_timer=-0.02
[16:46:34] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:46:34] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(519,1362), corner_timer=0.30
[16:46:34] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(519,1362), corner_timer=0.30
[16:46:34] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(618,1371), corner_timer=-0.02
[16:46:34] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[16:46:34] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(623,1371), corner_timer=0.30
[16:46:34] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(701,1371), corner_timer=-0.02
[16:46:34] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[16:46:34] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(705,1373), corner_timer=0.30
[16:46:35] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(770,1418), corner_timer=-0.02
[16:46:35] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[16:46:35] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(771,1420), corner_timer=0.30
[16:46:35] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:46:35] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:46:35] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:46:35] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(779,1429), corner_timer=-0.02
[16:46:35] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[16:46:35] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(779,1429), corner_timer=0.30
[16:46:35] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:46:35] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (916.0531, 1422.5455)
[16:46:35] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:35] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[16:46:35] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Frag)
[16:46:35] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:46:35] [INFO] [Player.Grenade] Timer started, grenade created at (779.8568, 1429.2087)
[16:46:35] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:46:35] [INFO] [Player.Grenade] Step 1 complete! Drag: (323.5526, -8.345947)
[16:46:36] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:46:36] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:46:36] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(779,1429), corner_timer=-0.02
[16:46:36] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[16:46:36] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(779,1429), corner_timer=0.30
[16:46:36] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:36] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(779,1425), corner_timer=-0.02
[16:46:36] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[16:46:36] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(779,1424), corner_timer=0.30
[16:46:36] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:36] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(779,1342), corner_timer=-0.02
[16:46:36] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[16:46:36] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(779,1338), corner_timer=0.30
[16:46:36] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:36] [INFO] [BloodyFeet:Player] Blood ran out - no more footprints
[16:46:37] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(779,1310), corner_timer=-0.02
[16:46:37] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[16:46:37] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(779,1310), corner_timer=0.30
[16:46:37] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:37] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(779,1310), corner_timer=-0.02
[16:46:37] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[16:46:37] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(779,1310), corner_timer=0.30
[16:46:37] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:37] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.5°, current=89.5°, player=(779,1310), corner_timer=-0.02
[16:46:37] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[16:46:37] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(779,1310), corner_timer=0.30
[16:46:37] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:38] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.4°, current=89.5°, player=(779,1310), corner_timer=-0.02
[16:46:38] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[16:46:38] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.3°, player=(779,1310), corner_timer=0.30
[16:46:38] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:38] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.5°, player=(779,1310), corner_timer=-0.02
[16:46:38] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[16:46:38] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(779,1310), corner_timer=0.30
[16:46:38] [INFO] [Player.Grenade.Simple] Throwing! Target: (962.9045, 1420.3665), Distance: 178,3, Speed: 327,0, Friction: 300,0
[16:46:38] [INFO] [Player.Grenade] Player rotated for throw: 0 -> 0,5419632
[16:46:38] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:46:38] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(0.8566977, 0.5158189), speed=327,0, spawn=(831.25867, 1341.1023)
[16:46:38] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:46:38] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:46:38] [INFO] [Player.Grenade] State reset to IDLE
[16:46:38] [INFO] [Player.Grenade] State reset to IDLE
[16:46:38] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:46:38] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:38] [INFO] [Player.Grenade] Player rotation restored to 0
[16:46:38] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(779,1340), corner_timer=-0.02
[16:46:38] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[16:46:38] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(779,1345), corner_timer=0.30
[16:46:38] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:46:38] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:39] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(784,1447), corner_timer=-0.02
[16:46:39] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[16:46:39] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(786,1451), corner_timer=0.30
[16:46:39] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:39] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(843,1517), corner_timer=-0.02
[16:46:39] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[16:46:39] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(845,1519), corner_timer=0.30
[16:46:39] [INFO] [GrenadeTimer] Frag grenade landed - EXPLODING!
[16:46:39] [INFO] [GrenadeTimer] EXPLODED at (977.01215, 1428.8613)!
[16:46:39] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[16:46:39] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[16:46:39] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(977.0121, 1428.861), source=NEUTRAL (FragGrenade), range=2938, listeners=30
[16:46:39] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
[16:46:39] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=9
[16:46:39] [INFO] [GrenadeTimer] Raycast hit obstacle at (912, 1474.6735) but it's close to player (80px) - showing effect anyway
[16:46:39] [INFO] [GrenadeTimer] Spawned C# explosion effect at (977.01215, 1428.8613)
[16:46:39] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:39] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(852,1525), corner_timer=-0.02
[16:46:39] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[16:46:39] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(852,1525), corner_timer=0.30
[16:46:39] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:40] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(852,1525), corner_timer=-0.02
[16:46:40] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[16:46:40] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(852,1525), corner_timer=0.30
[16:46:40] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:40] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(852,1525), corner_timer=-0.02
[16:46:40] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[16:46:40] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(852,1525), corner_timer=0.30
[16:46:40] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:40] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:46:40] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:40] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:46:40] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:46:40] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:46:40] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:46:40] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:46:40] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:46:40] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:46:40] [ENEMY] [Enemy1] Death animation component initialized
[16:46:40] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:40] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:46:40] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:46:40] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:46:40] [ENEMY] [Enemy2] Death animation component initialized
[16:46:40] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:40] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:46:40] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:46:40] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:46:40] [ENEMY] [Enemy3] Death animation component initialized
[16:46:40] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:40] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:46:40] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:46:40] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:46:40] [ENEMY] [Enemy4] Death animation component initialized
[16:46:40] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:40] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:46:40] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:46:40] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:46:40] [ENEMY] [Enemy5] Death animation component initialized
[16:46:40] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:40] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:46:40] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:46:40] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:46:40] [ENEMY] [Enemy6] Death animation component initialized
[16:46:40] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:40] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:46:40] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:46:40] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:46:40] [ENEMY] [Enemy7] Death animation component initialized
[16:46:40] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:40] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:46:40] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:46:40] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:46:40] [ENEMY] [Enemy8] Death animation component initialized
[16:46:40] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:40] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:46:40] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:46:40] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:46:40] [ENEMY] [Enemy9] Death animation component initialized
[16:46:40] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:40] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:46:40] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:46:40] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:46:40] [ENEMY] [Enemy10] Death animation component initialized
[16:46:40] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:40] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:46:40] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:46:40] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:46:40] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[16:46:40] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:46:40] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:46:40] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:46:40] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:46:40] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:46:40] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:46:40] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:46:40] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[16:46:40] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:46:40] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:46:40] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:46:40] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:46:40] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:46:40] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:46:40] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:46:40] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:46:40] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:46:40] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:46:40] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:46:40] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:46:40] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:46:40] [INFO] [ScoreManager] Level started with 10 enemies
[16:46:40] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:46:40] [INFO] [CinemaEffects] Found player node: Player
[16:46:40] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:46:40] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[16:46:40] [ENEMY] [Enemy1] Registered as sound listener
[16:46:40] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[16:46:40] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:46:40] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[16:46:40] [ENEMY] [Enemy2] Registered as sound listener
[16:46:40] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[16:46:40] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:46:40] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[16:46:40] [ENEMY] [Enemy3] Registered as sound listener
[16:46:40] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[16:46:40] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:46:40] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[16:46:40] [ENEMY] [Enemy4] Registered as sound listener
[16:46:40] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[16:46:40] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:46:40] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[16:46:40] [ENEMY] [Enemy5] Registered as sound listener
[16:46:40] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[16:46:40] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:46:40] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[16:46:40] [ENEMY] [Enemy6] Registered as sound listener
[16:46:40] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[16:46:40] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:46:40] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[16:46:40] [ENEMY] [Enemy7] Registered as sound listener
[16:46:40] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[16:46:40] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:46:40] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[16:46:40] [ENEMY] [Enemy8] Registered as sound listener
[16:46:40] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[16:46:40] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:46:40] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[16:46:40] [ENEMY] [Enemy9] Registered as sound listener
[16:46:40] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[16:46:40] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:46:40] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[16:46:40] [ENEMY] [Enemy10] Registered as sound listener
[16:46:40] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[16:46:40] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:46:40] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:40] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:40] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:40] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:40] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:40] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:40] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=157.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:40] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:40] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:46:40] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:46:40] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:46:40] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:46:40] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:46:40] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:46:40] [INFO] [LastChance] Found player: Player
[16:46:40] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:46:40] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:46:40] [INFO] [LastChance] Connected to player Died signal (C#)
[16:46:40] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:46:41] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:46:41] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:46:41] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:46:41] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:46:41] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (739.6696, 1314.1188)
[16:46:41] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[16:46:41] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Frag)
[16:46:41] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:46:41] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[16:46:41] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:46:41] [INFO] [Player.Grenade] Step 1 complete! Drag: (103.06525, -17.365479)
[16:46:41] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:46:41] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:46:42] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:46:42] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:46:42] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1078), corner_timer=0.30
[16:46:42] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1078), corner_timer=0.30
[16:46:42] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,973), corner_timer=-0.02
[16:46:42] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:46:42] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,973), corner_timer=-0.02
[16:46:42] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:46:42] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,968), corner_timer=0.30
[16:46:42] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,968), corner_timer=0.30
[16:46:42] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(407,888), corner_timer=-0.02
[16:46:42] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[16:46:42] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(403,886), corner_timer=0.30
[16:46:43] [INFO] [Player.Grenade.Simple] Throwing! Target: (649.35223, 707.65784), Distance: 343,4, Speed: 453,9, Friction: 300,0
[16:46:43] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,5145616
[16:46:43] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:46:43] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(0.87050855, -0.49215326), speed=453,9, spawn=(391.63403, 853.3622)
[16:46:43] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:46:43] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:46:43] [INFO] [Player.Grenade] State reset to IDLE
[16:46:43] [INFO] [Player.Grenade] State reset to IDLE
[16:46:43] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:46:43] [INFO] [Player.Grenade] Player rotation restored to 0
[16:46:43] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(325,890), corner_timer=-0.02
[16:46:43] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[16:46:43] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(322,892), corner_timer=0.30
[16:46:43] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:46:43] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(326,964), corner_timer=-0.02
[16:46:43] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[16:46:43] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(329,967), corner_timer=0.30
[16:46:43] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(376,991), corner_timer=-0.02
[16:46:43] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[16:46:43] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(377,991), corner_timer=0.30
[16:46:44] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:44] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(377,991), corner_timer=-0.02
[16:46:44] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[16:46:44] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(377,991), corner_timer=0.30
[16:46:44] [INFO] [GrenadeTimer] Frag grenade landed - EXPLODING!
[16:46:44] [INFO] [GrenadeTimer] EXPLODED at (673.76245, 693.1106)!
[16:46:44] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[16:46:44] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 3/3 -> 2/3
[16:46:44] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[16:46:44] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.418807, 0.908075), lethal=false
[16:46:44] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:46:44] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:46:44] [INFO] [ImpactEffects] Wall found for blood splatter at (727.6722, 810) (dist=66 px)
[16:46:44] [INFO] [BloodDecal] Blood puddle created at (727.6722, 809) (added to group)
[16:46:44] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[16:46:44] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/3 -> 1/3
[16:46:44] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[16:46:44] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.418807, 0.908075), lethal=false
[16:46:44] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:46:44] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:46:44] [INFO] [ImpactEffects] Wall found for blood splatter at (727.6722, 810) (dist=66 px)
[16:46:44] [INFO] [BloodDecal] Blood puddle created at (727.6722, 809) (added to group)
[16:46:44] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[16:46:44] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 1/3 -> 0/3
[16:46:44] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[16:46:44] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.418807, 0.908075), lethal=true
[16:46:44] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:46:44] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[16:46:44] [INFO] [ImpactEffects] Wall found for blood splatter at (727.6722, 810) (dist=66 px)
[16:46:44] [INFO] [BloodDecal] Blood puddle created at (727.6722, 809) (added to group)
[16:46:44] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1.5)
[16:46:44] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[16:46:44] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[16:46:44] [ENEMY] [Enemy2] [AllyDeath] Witnessed at (700, 750), entering SEARCHING
[16:46:44] [ENEMY] [Enemy2] SEARCHING started: center=(700, 750), radius=100, waypoints=5
[16:46:44] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[16:46:44] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 19)
[16:46:44] [INFO] [DeathAnim] Started - Angle: 65.2 deg, Index: 16
[16:46:44] [ENEMY] [Enemy3] Death animation started with hit direction: (0.418807, 0.908075)
[16:46:44] [INFO] [GrenadeTimer] Damaged enemy at distance 62,6
[16:46:44] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[16:46:44] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(673.7625, 693.1106), source=NEUTRAL (FragGrenade), range=2938, listeners=19
[16:46:44] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[16:46:44] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=7
[16:46:44] [INFO] [GrenadeTimer] Wall detected between explosion and player at distance 212px from explosion
[16:46:44] [INFO] [GrenadeTimer] Visual effect blocked by wall - player cannot see explosion at (673.76245, 693.1106)
[16:46:44] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=SEARCHING, target=93.0°, current=45.0°, player=(377,991), corner_timer=0.00
[16:46:44] [ENEMY] [Enemy2] SEARCHING corner check: angle 134.2°
[16:46:44] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:44] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 2/2 -> 1/2
[16:46:44] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[16:46:44] [INFO] [ImpactEffects] spawn_blood_effect called at (800, 900), dir=(0.837544, 0.54637), lethal=false
[16:46:44] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:46:44] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:46:44] [INFO] [ImpactEffects] Blood effect spawned at (800, 900) (scale=1)
[16:46:44] [INFO] [BloodDecal] Blood puddle created at (741.5596, 805.0229) (added to group)
[16:46:44] [INFO] [BloodDecal] Blood puddle created at (727.4819, 808.6699) (added to group)
[16:46:44] [INFO] [BloodDecal] Blood puddle created at (722.778, 804.0881) (added to group)
[16:46:44] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(377,991), corner_timer=-0.02
[16:46:44] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[16:46:44] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(377,991), corner_timer=0.30
[16:46:44] [ENEMY] [Enemy1] Memory: medium confidence (0.51) - transitioning to PURSUING
[16:46:44] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[16:46:44] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=83.1°, current=-157.5°, player=(377,991), corner_timer=0.00
[16:46:44] [ENEMY] [Enemy1] PURSUING corner check: angle -50.9°
[16:46:44] [INFO] [BloodDecal] Blood puddle created at (851.5535, 935.1946) (added to group)
[16:46:44] [ENEMY] [Enemy2] SEARCHING corner check: angle -60.5°
[16:46:44] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:44] [ENEMY] [Enemy3] Ragdoll activated
[16:46:44] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[16:46:44] [INFO] [BloodDecal] Blood puddle created at (853.0062, 952.8737) (added to group)
[16:46:45] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=SEARCHING, target=113.8°, current=112.8°, player=(377,991), corner_timer=0.22
[16:46:45] [ENEMY] [Enemy2] SEARCHING: Player spotted! Transitioning to COMBAT
[16:46:45] [ENEMY] [Enemy2] State: SEARCHING -> COMBAT
[16:46:45] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=113.9°, current=-163.5°, player=(377,991), corner_timer=0.22
[16:46:45] [INFO] [BloodDecal] Blood puddle created at (908.0964, 971.8) (added to group)
[16:46:45] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(377,991), corner_timer=-0.02
[16:46:45] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[16:46:45] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(377,991), corner_timer=0.30
[16:46:45] [ENEMY] [Enemy1] PURSUING corner check: angle -51.1°
[16:46:45] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:45] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:46:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:45] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:46:45] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:46:45] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:46:45] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:46:45] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:46:45] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:46:45] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:46:45] [ENEMY] [Enemy1] Death animation component initialized
[16:46:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:45] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:46:45] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:46:45] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:46:45] [ENEMY] [Enemy2] Death animation component initialized
[16:46:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:45] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:46:45] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:46:45] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:46:45] [ENEMY] [Enemy3] Death animation component initialized
[16:46:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:45] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:46:45] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:46:45] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:46:45] [ENEMY] [Enemy4] Death animation component initialized
[16:46:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:45] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:46:45] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:46:45] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:46:45] [ENEMY] [Enemy5] Death animation component initialized
[16:46:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:45] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:46:45] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:46:45] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:46:45] [ENEMY] [Enemy6] Death animation component initialized
[16:46:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:45] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:46:45] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:46:45] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:46:45] [ENEMY] [Enemy7] Death animation component initialized
[16:46:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:45] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:46:45] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:46:45] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:46:45] [ENEMY] [Enemy8] Death animation component initialized
[16:46:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:45] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:46:45] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:46:45] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:46:45] [ENEMY] [Enemy9] Death animation component initialized
[16:46:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:45] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:46:45] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:46:45] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:46:45] [ENEMY] [Enemy10] Death animation component initialized
[16:46:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:45] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:46:45] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:46:45] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:46:45] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[16:46:45] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:46:45] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:46:45] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:46:45] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:46:45] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:46:45] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:46:45] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:46:45] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[16:46:45] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:46:45] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:46:45] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:46:45] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:46:45] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:46:45] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:46:45] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:46:45] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:46:45] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:46:45] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:46:45] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:46:45] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:46:45] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:46:45] [INFO] [ScoreManager] Level started with 10 enemies
[16:46:45] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:46:45] [INFO] [CinemaEffects] Found player node: Player
[16:46:45] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:46:45] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[16:46:45] [ENEMY] [Enemy1] Registered as sound listener
[16:46:45] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[16:46:45] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:46:45] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[16:46:45] [ENEMY] [Enemy2] Registered as sound listener
[16:46:45] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[16:46:45] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:46:45] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[16:46:45] [ENEMY] [Enemy3] Registered as sound listener
[16:46:45] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[16:46:45] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:46:45] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[16:46:45] [ENEMY] [Enemy4] Registered as sound listener
[16:46:45] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[16:46:45] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:46:45] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[16:46:45] [ENEMY] [Enemy5] Registered as sound listener
[16:46:45] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[16:46:45] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:46:45] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[16:46:45] [ENEMY] [Enemy6] Registered as sound listener
[16:46:45] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[16:46:45] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:46:45] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[16:46:45] [ENEMY] [Enemy7] Registered as sound listener
[16:46:45] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[16:46:45] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:46:45] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[16:46:45] [ENEMY] [Enemy8] Registered as sound listener
[16:46:45] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[16:46:45] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:46:45] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[16:46:45] [ENEMY] [Enemy9] Registered as sound listener
[16:46:45] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[16:46:45] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:46:45] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[16:46:45] [ENEMY] [Enemy10] Registered as sound listener
[16:46:45] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[16:46:45] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:46:45] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:45] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:45] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:45] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:45] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:45] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=225.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:45] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:45] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:45] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:46:45] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:46:45] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:46:45] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:46:45] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:46:45] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:46:45] [INFO] [LastChance] Found player: Player
[16:46:45] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:46:45] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:46:45] [INFO] [LastChance] Connected to player Died signal (C#)
[16:46:45] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:46:45] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:46:45] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:46:45] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:46:45] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:46:45] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (489.82465, 1060.9833)
[16:46:45] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[16:46:45] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Frag)
[16:46:45] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:46:45] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[16:46:45] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:46:45] [INFO] [Player.Grenade] Step 1 complete! Drag: (129.17047, -5.3431396)
[16:46:45] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:46:45] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:46:46] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:46:46] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:46:46] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(387,1032), corner_timer=0.30
[16:46:46] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(387,1032), corner_timer=0.30
[16:46:47] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(324,958), corner_timer=-0.02
[16:46:47] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:46:47] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(324,958), corner_timer=-0.02
[16:46:47] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:46:47] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(322,955), corner_timer=0.30
[16:46:47] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(322,955), corner_timer=0.30
[16:46:47] [INFO] [Player.Grenade.Simple] Throwing! Target: (544.4591, 750.69116), Distance: 278,7, Speed: 408,9, Friction: 300,0
[16:46:47] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,71757776
[16:46:47] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:46:47] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(0.7534007, -0.65756166), speed=408,9, spawn=(363.47183, 908.65533)
[16:46:47] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:46:47] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:46:47] [INFO] [Player.Grenade] State reset to IDLE
[16:46:47] [INFO] [Player.Grenade] State reset to IDLE
[16:46:47] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:46:47] [INFO] [Player.Grenade] Player rotation restored to 0
[16:46:47] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(315,947), corner_timer=-0.02
[16:46:47] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[16:46:47] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(317,949), corner_timer=0.30
[16:46:47] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:46:47] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(382,1015), corner_timer=-0.02
[16:46:47] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[16:46:47] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(386,1019), corner_timer=0.30
[16:46:48] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(431,1055), corner_timer=-0.02
[16:46:48] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[16:46:48] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(431,1055), corner_timer=0.30
[16:46:48] [INFO] [GrenadeTimer] Frag grenade landed - EXPLODING!
[16:46:48] [INFO] [GrenadeTimer] EXPLODED at (563.09406, 734.42676)!
[16:46:48] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[16:46:48] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 3/3 -> 2/3
[16:46:48] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[16:46:48] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.993592, 0.113023), lethal=false
[16:46:48] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:46:48] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:46:48] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[16:46:48] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/3 -> 1/3
[16:46:48] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[16:46:48] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.993592, 0.113023), lethal=false
[16:46:48] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:46:48] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:46:48] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[16:46:48] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 1/3 -> 0/3
[16:46:48] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[16:46:48] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.993592, 0.113023), lethal=true
[16:46:48] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:46:48] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[16:46:48] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1.5)
[16:46:48] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[16:46:48] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[16:46:48] [ENEMY] [Enemy2] [AllyDeath] Witnessed at (700, 750), entering SEARCHING
[16:46:48] [ENEMY] [Enemy2] SEARCHING started: center=(700, 750), radius=100, waypoints=5
[16:46:48] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[16:46:48] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 18)
[16:46:48] [INFO] [DeathAnim] Started - Angle: 6.5 deg, Index: 12
[16:46:48] [ENEMY] [Enemy3] Death animation started with hit direction: (0.993592, 0.113023)
[16:46:48] [INFO] [GrenadeTimer] Damaged enemy at distance 137,8
[16:46:48] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[16:46:48] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(563.0941, 734.4268), source=NEUTRAL (FragGrenade), range=2938, listeners=18
[16:46:48] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[16:46:48] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=6
[16:46:48] [INFO] [GrenadeTimer] Wall detected between explosion and player at distance 103px from explosion
[16:46:48] [INFO] [GrenadeTimer] Visual effect blocked by wall - player cannot see explosion at (563.09406, 734.42676)
[16:46:48] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=SEARCHING, target=86.4°, current=45.0°, player=(431,1055), corner_timer=0.00
[16:46:48] [ENEMY] [Enemy2] SEARCHING corner check: angle 134.2°
[16:46:48] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(431,1055), corner_timer=-0.02
[16:46:48] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[16:46:48] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(431,1055), corner_timer=0.30
[16:46:48] [INFO] [BloodDecal] Blood puddle created at (756.3226, 753.708) (added to group)
[16:46:48] [INFO] [BloodDecal] Blood puddle created at (765.2822, 771.3549) (added to group)
[16:46:48] [INFO] [BloodDecal] Blood puddle created at (763.8431, 758.5569) (added to group)
[16:46:48] [INFO] [BloodDecal] Blood puddle created at (781.2761, 764.541) (added to group)
[16:46:48] [INFO] [BloodDecal] Blood puddle created at (762.0971, 764.642) (added to group)
[16:46:48] [INFO] [BloodDecal] Blood puddle created at (749.1711, 773.1072) (added to group)
[16:46:48] [INFO] [BloodDecal] Blood puddle created at (811.6626, 785.7509) (added to group)
[16:46:48] [INFO] [BloodDecal] Blood puddle created at (754.1796, 795.9884) (added to group)
[16:46:48] [INFO] [BloodDecal] Blood puddle created at (752.5415, 796.1228) (added to group)
[16:46:48] [INFO] [BloodDecal] Blood puddle created at (787.5531, 760.6166) (added to group)
[16:46:48] [INFO] [BloodDecal] Blood puddle created at (781.0607, 766.9894) (added to group)
[16:46:48] [INFO] [BloodDecal] Blood puddle created at (762.1507, 781.6525) (added to group)
[16:46:48] [INFO] [BloodDecal] Blood puddle created at (806.6511, 786.3751) (added to group)
[16:46:48] [INFO] [BloodDecal] Blood puddle created at (801.8715, 782.5051) (added to group)
[16:46:48] [INFO] [BloodDecal] Blood puddle created at (810.1602, 829.4872) (added to group)
[16:46:48] [INFO] [BloodDecal] Blood puddle created at (796.4983, 784.3314) (added to group)
[16:46:48] [INFO] [BloodDecal] Blood puddle created at (791.1229, 750.819) (added to group)
[16:46:48] [INFO] [BloodDecal] Blood puddle created at (783.3486, 793.0688) (added to group)
[16:46:48] [INFO] [BloodDecal] Blood puddle created at (792.0347, 778.9201) (added to group)
[16:46:48] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:48] [INFO] [BloodDecal] Blood puddle created at (826.0027, 760.9753) (added to group)
[16:46:48] [INFO] [BloodDecal] Blood puddle created at (820.8265, 771.3341) (added to group)
[16:46:48] [ENEMY] [Enemy2] SEARCHING corner check: angle -60.5°
[16:46:48] [INFO] [BloodDecal] Blood puddle created at (815.032, 794.0603) (added to group)
[16:46:48] [INFO] [BloodDecal] Blood puddle created at (826.2043, 856.5707) (added to group)
[16:46:48] [INFO] [BloodDecal] Blood puddle created at (847.8949, 791.0686) (added to group)
[16:46:48] [ENEMY] [Enemy3] Ragdoll activated
[16:46:48] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[16:46:48] [INFO] [BloodDecal] Blood puddle created at (798.9359, 819.9674) (added to group)
[16:46:48] [INFO] [BloodDecal] Blood puddle created at (826.7943, 800.8724) (added to group)
[16:46:48] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 2/2 -> 1/2
[16:46:48] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[16:46:48] [INFO] [ImpactEffects] spawn_blood_effect called at (800, 900), dir=(-0.995347, 0.096361), lethal=false
[16:46:48] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:46:48] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:46:48] [INFO] [ImpactEffects] Blood effect spawned at (800, 900) (scale=1)
[16:46:48] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=SEARCHING, target=101.3°, current=100.3°, player=(431,1055), corner_timer=0.27
[16:46:48] [ENEMY] [Enemy2] SEARCHING: Player spotted! Transitioning to COMBAT
[16:46:48] [ENEMY] [Enemy2] State: SEARCHING -> COMBAT
[16:46:49] [INFO] [BloodDecal] Blood puddle created at (862.7721, 829.3429) (added to group)
[16:46:49] [INFO] [BloodDecal] Blood puddle created at (804.5949, 785.4976) (added to group)
[16:46:49] [INFO] [BloodDecal] Blood puddle created at (831.1818, 797.4794) (added to group)
[16:46:49] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=101.3°, current=170.5°, player=(431,1055), corner_timer=0.27
[16:46:49] [INFO] [BloodDecal] Blood puddle created at (890.8503, 827.7872) (added to group)
[16:46:49] [INFO] [BloodDecal] Blood puddle created at (862.4532, 847.6326) (added to group)
[16:46:49] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(431,1055), corner_timer=-0.02
[16:46:49] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[16:46:49] [INFO] [BloodDecal] Blood puddle created at (880.3784, 846.1205) (added to group)
[16:46:49] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(431,1055), corner_timer=0.30
[16:46:49] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=101.1°, current=146.7°, player=(431,1055), corner_timer=0.27
[16:46:49] [INFO] [BloodDecal] Blood puddle created at (867.0306, 841.4327) (added to group)
[16:46:49] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=100.9°, current=144.2°, player=(431,1055), corner_timer=0.27
[16:46:49] [INFO] [BloodDecal] Blood puddle created at (873.8047, 799.5625) (added to group)
[16:46:49] [INFO] [BloodDecal] Blood puddle created at (889.6307, 805.3879) (added to group)
[16:46:49] [INFO] [BloodDecal] Blood puddle created at (728.2104, 891.8651) (added to group)
[16:46:49] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=101.2°, current=132.4°, player=(431,1055), corner_timer=0.27
[16:46:49] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=101.0°, current=129.9°, player=(431,1055), corner_timer=0.27
[16:46:49] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:49] [INFO] [BloodDecal] Blood puddle created at (724.1558, 924.0084) (added to group)
[16:46:49] [INFO] [BloodDecal] Blood puddle created at (708.489, 913.2132) (added to group)
[16:46:49] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=101.1°, current=123.8°, player=(431,1055), corner_timer=0.27
[16:46:49] [INFO] [BloodDecal] Blood puddle created at (693.2947, 897.9085) (added to group)
[16:46:49] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=100.9°, current=121.3°, player=(431,1055), corner_timer=0.27
[16:46:49] [INFO] [BloodDecal] Blood puddle created at (748.6746, 944.8496) (added to group)
[16:46:49] [INFO] [BloodDecal] Blood puddle created at (723.0447, 929.4758) (added to group)
[16:46:49] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=101.2°, current=109.6°, player=(431,1055), corner_timer=0.27
[16:46:49] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=101.0°, current=107.1°, player=(431,1055), corner_timer=0.27
[16:46:49] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:46:49] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:49] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:46:49] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:46:49] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:46:49] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:46:49] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:46:49] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:46:49] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:46:49] [ENEMY] [Enemy1] Death animation component initialized
[16:46:49] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:49] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:46:49] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:46:49] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:46:49] [ENEMY] [Enemy2] Death animation component initialized
[16:46:49] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:49] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:46:49] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:46:49] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:46:49] [ENEMY] [Enemy3] Death animation component initialized
[16:46:49] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:49] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:46:49] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:46:49] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:46:49] [ENEMY] [Enemy4] Death animation component initialized
[16:46:49] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:49] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:46:49] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:46:49] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:46:49] [ENEMY] [Enemy5] Death animation component initialized
[16:46:49] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:49] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:46:49] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:46:49] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:46:49] [ENEMY] [Enemy6] Death animation component initialized
[16:46:49] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:49] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:46:49] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:46:49] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:46:49] [ENEMY] [Enemy7] Death animation component initialized
[16:46:49] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:49] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:46:49] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:46:49] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:46:49] [ENEMY] [Enemy8] Death animation component initialized
[16:46:49] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:49] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:46:49] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:46:49] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:46:49] [ENEMY] [Enemy9] Death animation component initialized
[16:46:49] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:49] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:46:49] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:46:49] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:46:49] [ENEMY] [Enemy10] Death animation component initialized
[16:46:49] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:49] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:46:49] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:46:49] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:46:49] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[16:46:49] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:46:49] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:46:49] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:46:49] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:46:49] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:46:49] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:46:49] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:46:49] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[16:46:49] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:46:49] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:46:49] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:46:49] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:46:49] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:46:49] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:46:49] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:46:49] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:46:49] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:46:49] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:46:49] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:46:49] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:46:49] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:46:49] [INFO] [ScoreManager] Level started with 10 enemies
[16:46:49] [INFO] [BloodDecal] Blood puddle created at (710.8231, 931.2548) (added to group)
[16:46:49] [INFO] [BloodDecal] Blood puddle created at (689.485, 979.6796) (added to group)
[16:46:49] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:46:49] [INFO] [CinemaEffects] Found player node: Player
[16:46:49] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:46:49] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[16:46:49] [ENEMY] [Enemy1] Registered as sound listener
[16:46:49] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[16:46:49] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:46:49] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[16:46:49] [ENEMY] [Enemy2] Registered as sound listener
[16:46:49] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[16:46:49] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:46:49] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[16:46:49] [ENEMY] [Enemy3] Registered as sound listener
[16:46:49] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[16:46:49] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:46:49] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[16:46:49] [ENEMY] [Enemy4] Registered as sound listener
[16:46:49] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[16:46:49] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:46:49] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[16:46:49] [ENEMY] [Enemy5] Registered as sound listener
[16:46:49] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[16:46:49] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:46:49] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[16:46:49] [ENEMY] [Enemy6] Registered as sound listener
[16:46:49] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[16:46:49] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:46:49] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[16:46:49] [ENEMY] [Enemy7] Registered as sound listener
[16:46:49] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[16:46:49] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:46:49] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[16:46:49] [ENEMY] [Enemy8] Registered as sound listener
[16:46:49] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[16:46:49] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:46:49] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[16:46:49] [ENEMY] [Enemy9] Registered as sound listener
[16:46:49] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[16:46:49] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:46:49] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[16:46:49] [ENEMY] [Enemy10] Registered as sound listener
[16:46:49] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[16:46:49] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:46:49] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:49] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:49] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:49] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:49] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:49] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:49] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=213.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:49] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:49] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:46:49] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:46:49] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:46:49] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:46:49] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:46:49] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:46:49] [INFO] [LastChance] Found player: Player
[16:46:49] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:46:49] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:46:49] [INFO] [LastChance] Connected to player Died signal (C#)
[16:46:49] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:46:49] [INFO] [BloodDecal] Blood puddle created at (686.551, 984.6794) (added to group)
[16:46:50] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:46:50] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:46:50] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:46:50] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:46:50] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (536.0809, 1000.6068)
[16:46:50] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[16:46:50] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Frag)
[16:46:50] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:46:50] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1122.1666)
[16:46:50] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:46:50] [INFO] [Player.Grenade] Step 1 complete! Drag: (110.47699, -30.333008)
[16:46:50] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:46:50] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:46:50] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:46:50] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:46:51] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(414,872), corner_timer=0.30
[16:46:51] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(414,872), corner_timer=0.30
[16:46:51] [INFO] [Player.Grenade.Simple] Throwing! Target: (588.539, 712.35583), Distance: 242,2, Speed: 381,2, Friction: 300,0
[16:46:51] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,52303535
[16:46:51] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:46:51] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(0.866307, -0.49951202), speed=381,2, spawn=(407.68655, 816.63525)
[16:46:51] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:46:51] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:46:51] [INFO] [Player.Grenade] State reset to IDLE
[16:46:51] [INFO] [Player.Grenade] State reset to IDLE
[16:46:51] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:46:51] [INFO] [Player.Grenade] Player rotation restored to 0
[16:46:51] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(332,851), corner_timer=-0.02
[16:46:51] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:46:51] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(332,851), corner_timer=-0.02
[16:46:51] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:46:51] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(329,852), corner_timer=0.30
[16:46:51] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(329,852), corner_timer=0.30
[16:46:51] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:46:51] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(321,912), corner_timer=-0.02
[16:46:51] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[16:46:51] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(324,915), corner_timer=0.30
[16:46:51] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(390,982), corner_timer=-0.02
[16:46:51] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[16:46:52] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(392,984), corner_timer=0.30
[16:46:52] [INFO] [GrenadeTimer] Frag grenade landed - EXPLODING!
[16:46:52] [INFO] [GrenadeTimer] EXPLODED at (607.8633, 701.2133)!
[16:46:52] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[16:46:52] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 3/3 -> 2/3
[16:46:52] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[16:46:52] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.883754, 0.467951), lethal=false
[16:46:52] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:46:52] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:46:52] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[16:46:52] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/3 -> 1/3
[16:46:52] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[16:46:52] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.883754, 0.467951), lethal=false
[16:46:52] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:46:52] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:46:52] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[16:46:52] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 1/3 -> 0/3
[16:46:52] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[16:46:52] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.883754, 0.467951), lethal=true
[16:46:52] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:46:52] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[16:46:52] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1.5)
[16:46:52] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[16:46:52] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[16:46:52] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[16:46:52] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 18)
[16:46:52] [INFO] [DeathAnim] Started - Angle: 27.9 deg, Index: 13
[16:46:52] [ENEMY] [Enemy3] Death animation started with hit direction: (0.883754, 0.467951)
[16:46:52] [INFO] [GrenadeTimer] Damaged enemy at distance 104,3
[16:46:52] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[16:46:52] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(607.8633, 701.2133), source=NEUTRAL (FragGrenade), range=2938, listeners=18
[16:46:52] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[16:46:52] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=6
[16:46:52] [INFO] [GrenadeTimer] Wall detected between explosion and player at distance 146px from explosion
[16:46:52] [INFO] [GrenadeTimer] Visual effect blocked by wall - player cannot see explosion at (607.8633, 701.2133)
[16:46:52] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(402,994), corner_timer=-0.02
[16:46:52] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[16:46:52] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(402,994), corner_timer=0.30
[16:46:52] [ENEMY] [Enemy7] Hit taken, damage: 1, health: 3/3 -> 2/3
[16:46:52] [ENEMY] [Enemy7] ImpactEffectsManager found, calling spawn_blood_effect
[16:46:52] [INFO] [ImpactEffects] spawn_blood_effect called at (1698.427, 899.8815), dir=(0.98637, 0.164542), lethal=false
[16:46:52] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:46:52] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:46:52] [INFO] [ImpactEffects] Blood effect spawned at (1698.427, 899.8815) (scale=1)
[16:46:52] [INFO] [BloodDecal] Blood puddle created at (776.2993, 787.7015) (added to group)
[16:46:52] [INFO] [BloodDecal] Blood puddle created at (734.1758, 799.4344) (added to group)
[16:46:52] [INFO] [BloodDecal] Blood puddle created at (751.8788, 792.0212) (added to group)
[16:46:52] [INFO] [BloodDecal] Blood puddle created at (758.9962, 798.8457) (added to group)
[16:46:52] [INFO] [BloodDecal] Blood puddle created at (796.4137, 783.1118) (added to group)
[16:46:52] [INFO] [BloodDecal] Blood puddle created at (782.1093, 775.8616) (added to group)
[16:46:52] [INFO] [BloodDecal] Blood puddle created at (786.1633, 793.1977) (added to group)
[16:46:52] [INFO] [BloodDecal] Blood puddle created at (784.051, 781.1554) (added to group)
[16:46:52] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(402,994), corner_timer=-0.02
[16:46:52] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[16:46:52] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(402,994), corner_timer=0.30
[16:46:52] [INFO] [BloodDecal] Blood puddle created at (822.0769, 792.9327) (added to group)
[16:46:52] [INFO] [BloodDecal] Blood puddle created at (805.0872, 833.9455) (added to group)
[16:46:52] [INFO] [BloodDecal] Blood puddle created at (815.4558, 799.5206) (added to group)
[16:46:52] [INFO] [BloodDecal] Blood puddle created at (807.1515, 847.1884) (added to group)
[16:46:52] [INFO] [BloodDecal] Blood puddle created at (833.7168, 829.866) (added to group)
[16:46:52] [INFO] [BloodDecal] Blood puddle created at (817.3316, 805.4088) (added to group)
[16:46:52] [ENEMY] [Enemy3] Ragdoll activated
[16:46:52] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[16:46:52] [INFO] [BloodDecal] Blood puddle created at (829.379, 870.2562) (added to group)
[16:46:52] [INFO] [BloodDecal] Blood puddle created at (796.1087, 803.8607) (added to group)
[16:46:52] [INFO] [BloodDecal] Blood puddle created at (835.8055, 850.9908) (added to group)
[16:46:52] [INFO] [BloodDecal] Blood puddle created at (1748.364, 928.2162) (added to group)
[16:46:52] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:46:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:52] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:46:52] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:46:52] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:46:52] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:46:52] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:46:52] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:46:52] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:46:52] [ENEMY] [Enemy1] Death animation component initialized
[16:46:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:52] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:46:52] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:46:52] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:46:52] [INFO] [EnemyGrenade] Initialized: 1 grenades
[16:46:52] [ENEMY] [Enemy2] Death animation component initialized
[16:46:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:52] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:46:52] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:46:52] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:46:52] [ENEMY] [Enemy3] Death animation component initialized
[16:46:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:52] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:46:52] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:46:52] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:46:52] [ENEMY] [Enemy4] Death animation component initialized
[16:46:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:52] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:46:52] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:46:52] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:46:52] [ENEMY] [Enemy5] Death animation component initialized
[16:46:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:52] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:46:52] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:46:52] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:46:52] [ENEMY] [Enemy6] Death animation component initialized
[16:46:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:52] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:46:52] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:46:52] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:46:52] [ENEMY] [Enemy7] Death animation component initialized
[16:46:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:52] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:46:52] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:46:52] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:46:52] [ENEMY] [Enemy8] Death animation component initialized
[16:46:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:52] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:46:52] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:46:52] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:46:52] [ENEMY] [Enemy9] Death animation component initialized
[16:46:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:52] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:46:52] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:46:52] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:46:52] [ENEMY] [Enemy10] Death animation component initialized
[16:46:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:52] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:46:52] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:46:52] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:46:52] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[16:46:52] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:46:52] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:46:52] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:46:52] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:46:52] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:46:52] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:46:52] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:46:52] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[16:46:52] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:46:52] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:46:52] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:46:52] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:46:52] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:46:52] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:46:52] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:46:52] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:46:52] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:46:52] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:46:52] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:46:52] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:46:52] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:46:52] [INFO] [ScoreManager] Level started with 10 enemies
[16:46:52] [INFO] [BloodDecal] Blood puddle created at (801.5022, 830.0449) (added to group)
[16:46:52] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:46:52] [INFO] [CinemaEffects] Found player node: Player
[16:46:52] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:46:52] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[16:46:52] [ENEMY] [Enemy1] Registered as sound listener
[16:46:52] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[16:46:52] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:46:52] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[16:46:52] [ENEMY] [Enemy2] Registered as sound listener
[16:46:52] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[16:46:52] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:46:52] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[16:46:52] [ENEMY] [Enemy3] Registered as sound listener
[16:46:52] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[16:46:52] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:46:52] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[16:46:52] [ENEMY] [Enemy4] Registered as sound listener
[16:46:52] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[16:46:52] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:46:52] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[16:46:52] [ENEMY] [Enemy5] Registered as sound listener
[16:46:52] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[16:46:52] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:46:52] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[16:46:52] [ENEMY] [Enemy6] Registered as sound listener
[16:46:52] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[16:46:52] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:46:52] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[16:46:52] [ENEMY] [Enemy7] Registered as sound listener
[16:46:52] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[16:46:52] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:46:52] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[16:46:52] [ENEMY] [Enemy8] Registered as sound listener
[16:46:52] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[16:46:52] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:46:52] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[16:46:52] [ENEMY] [Enemy9] Registered as sound listener
[16:46:52] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[16:46:52] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:46:52] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[16:46:52] [ENEMY] [Enemy10] Registered as sound listener
[16:46:52] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[16:46:52] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:46:52] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:52] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:52] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:52] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:52] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:52] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=225.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:52] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:52] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:52] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:46:52] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:46:52] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:46:52] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:46:52] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:46:52] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:46:52] [INFO] [LastChance] Found player: Player
[16:46:52] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:46:52] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:46:52] [INFO] [LastChance] Connected to player Died signal (C#)
[16:46:52] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:46:52] [INFO] [BloodDecal] Blood puddle created at (1825.587, 918.9495) (added to group)
[16:46:52] [INFO] [BloodDecal] Blood puddle created at (1809.118, 941.5146) (added to group)
[16:46:52] [INFO] [BloodDecal] Blood puddle created at (1759.691, 935.7575) (added to group)
[16:46:52] [INFO] [BloodDecal] Blood puddle created at (903.3549, 952.634) (added to group)
[16:46:52] [INFO] [BloodDecal] Blood puddle created at (850.8359, 898.6652) (added to group)
[16:46:53] [INFO] [BloodDecal] Blood puddle created at (1851.86, 907.9922) (added to group)
[16:46:53] [INFO] [BloodDecal] Blood puddle created at (1813.804, 939.4132) (added to group)
[16:46:53] [INFO] [BloodDecal] Blood puddle created at (1878.434, 952.584) (added to group)
[16:46:53] [INFO] [BloodDecal] Blood puddle created at (1856.096, 996.1216) (added to group)
[16:46:53] [INFO] [BloodDecal] Blood puddle created at (1844.523, 1013.333) (added to group)
[16:46:53] [INFO] [BloodDecal] Blood puddle created at (1876.44, 1079.9) (added to group)
[16:46:53] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:46:53] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:46:53] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:46:53] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:46:53] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (551.53406, 1057.3281)
[16:46:53] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[16:46:53] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Frag)
[16:46:53] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:46:53] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1197.1667)
[16:46:53] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:46:53] [INFO] [Player.Grenade] Step 1 complete! Drag: (85.9635, -11.265503)
[16:46:53] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:46:53] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:46:54] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:46:54] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:46:54] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1047), corner_timer=0.30
[16:46:54] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1047), corner_timer=0.30
[16:46:54] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(446,944), corner_timer=-0.02
[16:46:54] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:46:54] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(446,944), corner_timer=-0.02
[16:46:54] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:46:54] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(445,939), corner_timer=0.30
[16:46:54] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(445,939), corner_timer=0.30
[16:46:55] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(376,870), corner_timer=-0.02
[16:46:55] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[16:46:55] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(373,868), corner_timer=0.30
[16:46:55] [INFO] [Player.Grenade.Simple] Throwing! Target: (604.5916, 701.1744), Distance: 271,0, Speed: 403,2, Friction: 300,0
[16:46:55] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,57282853
[16:46:55] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:46:55] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(0.84037125, -0.5420112), speed=403,2, spawn=(408.25784, 827.80304)
[16:46:55] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:46:55] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:46:55] [INFO] [Player.Grenade] State reset to IDLE
[16:46:55] [INFO] [Player.Grenade] State reset to IDLE
[16:46:55] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:46:55] [INFO] [Player.Grenade] Player rotation restored to 0
[16:46:55] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(334,874), corner_timer=-0.02
[16:46:55] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[16:46:55] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(333,877), corner_timer=0.30
[16:46:55] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:46:55] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(381,941), corner_timer=-0.02
[16:46:55] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[16:46:55] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(385,943), corner_timer=0.30
[16:46:56] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(438,959), corner_timer=-0.02
[16:46:56] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[16:46:56] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(438,959), corner_timer=0.30
[16:46:56] [INFO] [GrenadeTimer] Frag grenade landed - EXPLODING!
[16:46:56] [INFO] [GrenadeTimer] EXPLODED at (624.97974, 688.02484)!
[16:46:56] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[16:46:56] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 3/3 -> 2/3
[16:46:56] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[16:46:56] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.770952, 0.636893), lethal=false
[16:46:56] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:46:56] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:46:56] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[16:46:56] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/3 -> 1/3
[16:46:56] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[16:46:56] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.770952, 0.636893), lethal=false
[16:46:56] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:46:56] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:46:56] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[16:46:56] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 1/3 -> 0/3
[16:46:56] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[16:46:56] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.770952, 0.636893), lethal=true
[16:46:56] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:46:56] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[16:46:56] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1.5)
[16:46:56] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[16:46:56] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[16:46:56] [ENEMY] [Enemy2] [AllyDeath] Witnessed at (700, 750), entering SEARCHING
[16:46:56] [ENEMY] [Enemy2] SEARCHING started: center=(700, 750), radius=100, waypoints=5
[16:46:56] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[16:46:56] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 18)
[16:46:56] [INFO] [DeathAnim] Started - Angle: 39.6 deg, Index: 14
[16:46:56] [ENEMY] [Enemy3] Death animation started with hit direction: (0.770952, 0.636893)
[16:46:56] [INFO] [GrenadeTimer] Damaged enemy at distance 97,3
[16:46:56] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[16:46:56] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(624.9797, 688.0248), source=NEUTRAL (FragGrenade), range=2938, listeners=18
[16:46:56] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[16:46:56] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=6
[16:46:56] [INFO] [GrenadeTimer] Wall detected between explosion and player at distance 178px from explosion
[16:46:56] [INFO] [GrenadeTimer] Visual effect blocked by wall - player cannot see explosion at (624.97974, 688.02484)
[16:46:56] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=SEARCHING, target=84.7°, current=45.0°, player=(438,959), corner_timer=0.00
[16:46:56] [ENEMY] [Enemy2] SEARCHING corner check: angle 134.2°
[16:46:56] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:56] [ENEMY] [Enemy1] Memory: medium confidence (0.52) - transitioning to PURSUING
[16:46:56] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[16:46:56] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=77.2°, current=-157.5°, player=(438,959), corner_timer=0.00
[16:46:56] [ENEMY] [Enemy1] PURSUING corner check: angle -50.9°
[16:46:56] [INFO] [BloodDecal] Blood puddle created at (766.0609, 779.6205) (added to group)
[16:46:56] [INFO] [BloodDecal] Blood puddle created at (749.7206, 787.7225) (added to group)
[16:46:56] [INFO] [BloodDecal] Blood puddle created at (738.0692, 804.6257) (added to group)
[16:46:56] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(438,959), corner_timer=-0.02
[16:46:56] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[16:46:56] [INFO] [BloodDecal] Blood puddle created at (738.7828, 799.3815) (added to group)
[16:46:56] [INFO] [BloodDecal] Blood puddle created at (785.2746, 824.1831) (added to group)
[16:46:56] [INFO] [BloodDecal] Blood puddle created at (789.9159, 797.4119) (added to group)
[16:46:56] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(438,959), corner_timer=0.30
[16:46:56] [INFO] [BloodDecal] Blood puddle created at (748.9327, 792.6996) (added to group)
[16:46:56] [INFO] [BloodDecal] Blood puddle created at (777.2805, 813.4081) (added to group)
[16:46:56] [INFO] [BloodDecal] Blood puddle created at (777.2672, 793.7631) (added to group)
[16:46:56] [INFO] [BloodDecal] Blood puddle created at (743.6935, 799.813) (added to group)
[16:46:56] [INFO] [BloodDecal] Blood puddle created at (785.5604, 824.6439) (added to group)
[16:46:56] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:46:56] [INFO] [BloodDecal] Blood puddle created at (828.5634, 855.7803) (added to group)
[16:46:56] [INFO] [BloodDecal] Blood puddle created at (811.3961, 828.965) (added to group)
[16:46:56] [INFO] [BloodDecal] Blood puddle created at (820.5693, 819.119) (added to group)
[16:46:56] [ENEMY] [Enemy2] SEARCHING corner check: angle -60.5°
[16:46:56] [ENEMY] [Enemy3] Ragdoll activated
[16:46:56] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[16:46:56] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=SEARCHING, target=103.5°, current=102.3°, player=(438,959), corner_timer=0.27
[16:46:56] [INFO] [EnemyGrenade] Unsafe throw distance (162 < 275 safe distance, blast=225, margin=50) - skipping throw
[16:46:56] [ENEMY] [Enemy2] SEARCHING: Player spotted! Transitioning to COMBAT
[16:46:56] [ENEMY] [Enemy2] State: SEARCHING -> COMBAT
[16:46:56] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[16:46:56] [ENEMY] [Enemy1] PURSUING corner check: angle -51.1°
[16:46:56] [INFO] [EnemyGrenade] Unsafe throw distance (160 < 275 safe distance, blast=225, margin=50) - skipping throw
[16:46:56] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P3:corner, state=RETREATING, target=-60.5°, current=149.2°, player=(438,959), corner_timer=0.27
[16:46:56] [INFO] [EnemyGrenade] Unsafe throw distance (159 < 275 safe distance, blast=225, margin=50) - skipping throw
[16:46:56] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(438,959), corner_timer=-0.02
[16:46:56] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[16:46:56] [INFO] [EnemyGrenade] Unsafe throw distance (158 < 275 safe distance, blast=225, margin=50) - skipping throw
[16:46:56] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(438,959), corner_timer=0.30
[16:46:56] [INFO] [BloodDecal] Blood puddle created at (892.8188, 891.6823) (added to group)
[16:46:57] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:46:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:57] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:46:57] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:46:57] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:46:57] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:46:57] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:46:57] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:46:57] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:46:57] [ENEMY] [Enemy1] Death animation component initialized
[16:46:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:57] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:46:57] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:46:57] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:46:57] [ENEMY] [Enemy2] Death animation component initialized
[16:46:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:57] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:46:57] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:46:57] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:46:57] [ENEMY] [Enemy3] Death animation component initialized
[16:46:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:57] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:46:57] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:46:57] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:46:57] [ENEMY] [Enemy4] Death animation component initialized
[16:46:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:57] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:46:57] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:46:57] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:46:57] [ENEMY] [Enemy5] Death animation component initialized
[16:46:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:57] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:46:57] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:46:57] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:46:57] [ENEMY] [Enemy6] Death animation component initialized
[16:46:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:57] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:46:57] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:46:57] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:46:57] [ENEMY] [Enemy7] Death animation component initialized
[16:46:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:57] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:46:57] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:46:57] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:46:57] [ENEMY] [Enemy8] Death animation component initialized
[16:46:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:57] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:46:57] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:46:57] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:46:57] [ENEMY] [Enemy9] Death animation component initialized
[16:46:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:57] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:46:57] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:46:57] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:46:57] [ENEMY] [Enemy10] Death animation component initialized
[16:46:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:46:57] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:46:57] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:46:57] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:46:57] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[16:46:57] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:46:57] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:46:57] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:46:57] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:46:57] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:46:57] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:46:57] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:46:57] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[16:46:57] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:46:57] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:46:57] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:46:57] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:46:57] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:46:57] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:46:57] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:46:57] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:46:57] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:46:57] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:46:57] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:46:57] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:46:57] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:46:57] [INFO] [ScoreManager] Level started with 10 enemies
[16:46:57] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:46:57] [INFO] [CinemaEffects] Found player node: Player
[16:46:57] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:46:57] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[16:46:57] [ENEMY] [Enemy1] Registered as sound listener
[16:46:57] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[16:46:57] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:46:57] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[16:46:57] [ENEMY] [Enemy2] Registered as sound listener
[16:46:57] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[16:46:57] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:46:57] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[16:46:57] [ENEMY] [Enemy3] Registered as sound listener
[16:46:57] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[16:46:57] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:46:57] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[16:46:57] [ENEMY] [Enemy4] Registered as sound listener
[16:46:57] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[16:46:57] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:46:57] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[16:46:57] [ENEMY] [Enemy5] Registered as sound listener
[16:46:57] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[16:46:57] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:46:57] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[16:46:57] [ENEMY] [Enemy6] Registered as sound listener
[16:46:57] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[16:46:57] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:46:57] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[16:46:57] [ENEMY] [Enemy7] Registered as sound listener
[16:46:57] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[16:46:57] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:46:57] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[16:46:57] [ENEMY] [Enemy8] Registered as sound listener
[16:46:57] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[16:46:57] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:46:57] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[16:46:57] [ENEMY] [Enemy9] Registered as sound listener
[16:46:57] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[16:46:57] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:46:57] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[16:46:57] [ENEMY] [Enemy10] Registered as sound listener
[16:46:57] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[16:46:57] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:46:57] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:57] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:57] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:57] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:57] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:57] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:57] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:57] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:46:57] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:46:57] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:46:57] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:46:57] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:46:57] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:46:57] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:46:57] [INFO] [LastChance] Found player: Player
[16:46:57] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:46:57] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:46:57] [INFO] [LastChance] Connected to player Died signal (C#)
[16:46:57] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:46:57] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:46:57] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:46:57] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:46:57] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:46:57] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (471.25485, 1551.1995)
[16:46:58] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[16:46:58] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Frag)
[16:46:58] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:46:58] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1443.8334)
[16:46:58] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:46:58] [INFO] [Player.Grenade] Step 1 complete! Drag: (34.681458, 19.664795)
[16:46:58] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:46:58] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:46:58] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:46:58] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:46:58] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(471,1571), corner_timer=0.30
[16:46:58] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(471,1571), corner_timer=0.30
[16:46:58] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(571,1572), corner_timer=-0.02
[16:46:58] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:46:58] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(571,1572), corner_timer=-0.02
[16:46:58] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:46:58] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(576,1572), corner_timer=0.30
[16:46:58] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(576,1572), corner_timer=0.30
[16:46:59] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(652,1572), corner_timer=-0.02
[16:46:59] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[16:46:59] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(653,1572), corner_timer=0.30
[16:46:59] [INFO] [Player.Grenade.Simple] Throwing! Target: (404.3979, 1700.732), Distance: 257,3, Speed: 392,9, Friction: 300,0
[16:46:59] [INFO] [Player.Grenade] Player rotated for throw: 0 -> 2,6694853
[16:46:59] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:46:59] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(-0.8906119, 0.45476413), speed=392,9, spawn=(601.9073, 1599.8799)
[16:46:59] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:46:59] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:46:59] [INFO] [Player.Grenade] State reset to IDLE
[16:46:59] [INFO] [Player.Grenade] State reset to IDLE
[16:46:59] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:46:59] [INFO] [Player.Grenade] Player rotation restored to 0
[16:46:59] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(656,1574), corner_timer=-0.02
[16:46:59] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[16:46:59] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:46:59] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(656,1575), corner_timer=0.30
[16:46:59] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(656,1656), corner_timer=-0.02
[16:46:59] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[16:46:59] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(656,1661), corner_timer=0.30
[16:47:00] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(656,1728), corner_timer=-0.02
[16:47:00] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[16:47:00] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(656,1729), corner_timer=0.30
[16:47:00] [INFO] [GrenadeTimer] Frag grenade landed - EXPLODING!
[16:47:00] [INFO] [GrenadeTimer] EXPLODED at (383.69095, 1711.3057)!
[16:47:00] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[16:47:00] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[16:47:00] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(383.6909, 1711.306), source=NEUTRAL (FragGrenade), range=2938, listeners=19
[16:47:00] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[16:47:00] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=10
[16:47:00] [INFO] [GrenadeTimer] Wall detected between explosion and player at distance 117px from explosion
[16:47:00] [INFO] [GrenadeTimer] Visual effect blocked by wall - player cannot see explosion at (383.69095, 1711.3057)
[16:47:00] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:47:00] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(656,1730), corner_timer=-0.02
[16:47:00] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[16:47:00] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(656,1730), corner_timer=0.30
[16:47:00] [ENEMY] [Enemy8] Hit taken, damage: 1, health: 3/3 -> 2/3
[16:47:00] [ENEMY] [Enemy8] ImpactEffectsManager found, calling spawn_blood_effect
[16:47:00] [INFO] [ImpactEffects] spawn_blood_effect called at (1900, 1450), dir=(0.988417, -0.15176), lethal=false
[16:47:00] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:47:00] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:47:00] [INFO] [ImpactEffects] Blood effect spawned at (1900, 1450) (scale=1)
[16:47:00] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:47:01] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(656,1730), corner_timer=-0.02
[16:47:01] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[16:47:01] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(656,1730), corner_timer=0.30
[16:47:01] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:47:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:01] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:47:01] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:47:01] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:47:01] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:47:01] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:47:01] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:47:01] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:47:01] [INFO] [EnemyGrenade] Initialized: 1 grenades
[16:47:01] [ENEMY] [Enemy1] Death animation component initialized
[16:47:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:01] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:47:01] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:47:01] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:47:01] [ENEMY] [Enemy2] Death animation component initialized
[16:47:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:01] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:47:01] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:47:01] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:47:01] [ENEMY] [Enemy3] Death animation component initialized
[16:47:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:01] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:47:01] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:47:01] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:47:01] [INFO] [EnemyGrenade] Initialized: 1 grenades
[16:47:01] [ENEMY] [Enemy4] Death animation component initialized
[16:47:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:01] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:47:01] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:47:01] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:47:01] [ENEMY] [Enemy5] Death animation component initialized
[16:47:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:01] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:47:01] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:47:01] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:47:01] [ENEMY] [Enemy6] Death animation component initialized
[16:47:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:01] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:47:01] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:47:01] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:47:01] [ENEMY] [Enemy7] Death animation component initialized
[16:47:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:01] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:47:01] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:47:01] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:47:01] [ENEMY] [Enemy8] Death animation component initialized
[16:47:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:01] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:47:01] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:47:01] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:47:01] [ENEMY] [Enemy9] Death animation component initialized
[16:47:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:01] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:47:01] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:47:01] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:47:01] [INFO] [EnemyGrenade] Initialized: 1 grenades
[16:47:01] [ENEMY] [Enemy10] Death animation component initialized
[16:47:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:01] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:47:01] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:47:01] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:47:01] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[16:47:01] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:47:01] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:47:01] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:47:01] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:47:01] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:47:01] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:47:01] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:47:01] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[16:47:01] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:47:01] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:47:01] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:47:01] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:47:01] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:47:01] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:47:01] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:47:01] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:47:01] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:47:01] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:47:01] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:47:01] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:47:01] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:47:01] [INFO] [ScoreManager] Level started with 10 enemies
[16:47:01] [INFO] [BloodDecal] Blood puddle created at (1949.143, 1480.82) (added to group)
[16:47:01] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:47:01] [INFO] [CinemaEffects] Found player node: Player
[16:47:01] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:47:01] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[16:47:01] [ENEMY] [Enemy1] Registered as sound listener
[16:47:01] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[16:47:01] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:47:01] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[16:47:01] [ENEMY] [Enemy2] Registered as sound listener
[16:47:01] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[16:47:01] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:47:01] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[16:47:01] [ENEMY] [Enemy3] Registered as sound listener
[16:47:01] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[16:47:01] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:47:01] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[16:47:01] [ENEMY] [Enemy4] Registered as sound listener
[16:47:01] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[16:47:01] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:47:01] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[16:47:01] [ENEMY] [Enemy5] Registered as sound listener
[16:47:01] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[16:47:01] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:47:01] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[16:47:01] [ENEMY] [Enemy6] Registered as sound listener
[16:47:01] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[16:47:01] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:47:01] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[16:47:01] [ENEMY] [Enemy7] Registered as sound listener
[16:47:01] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[16:47:01] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:47:01] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[16:47:01] [ENEMY] [Enemy8] Registered as sound listener
[16:47:01] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[16:47:01] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:47:01] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[16:47:01] [ENEMY] [Enemy9] Registered as sound listener
[16:47:01] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[16:47:01] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:47:01] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[16:47:01] [ENEMY] [Enemy10] Registered as sound listener
[16:47:01] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[16:47:01] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:47:01] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:01] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:01] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:01] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:01] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:01] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:01] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:01] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:01] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:47:01] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:47:01] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:47:01] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:47:01] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:47:01] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:47:01] [INFO] [LastChance] Found player: Player
[16:47:01] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:47:01] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:47:01] [INFO] [LastChance] Connected to player Died signal (C#)
[16:47:01] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:47:01] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:47:01] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:47:01] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:47:01] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:47:01] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (361.7906, 1391.5956)
[16:47:01] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[16:47:01] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Frag)
[16:47:01] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:47:01] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[16:47:01] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:47:01] [INFO] [Player.Grenade] Step 1 complete! Drag: (201.89166, -18.701294)
[16:47:01] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:47:01] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:47:02] [INFO] [Player.Grenade.Simple] Throwing! Target: (708.024, 1285.3989), Distance: 232,5, Speed: 373,5, Friction: 300,0
[16:47:02] [INFO] [Player.Grenade] Player rotated for throw: 0 -> 0,13634123
[16:47:02] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:47:02] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(0.99072, 0.13591923), speed=373,5, spawn=(509.4432, 1258.1552)
[16:47:02] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:47:02] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:47:02] [INFO] [Player.Grenade] State reset to IDLE
[16:47:02] [INFO] [Player.Grenade] State reset to IDLE
[16:47:02] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:47:02] [INFO] [Player.Grenade] Player rotation restored to 0
[16:47:02] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:47:02] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:47:02] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:47:02] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1250), corner_timer=0.30
[16:47:02] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1250), corner_timer=0.30
[16:47:03] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,1250), corner_timer=-0.02
[16:47:03] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:47:03] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,1250), corner_timer=-0.02
[16:47:03] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:47:03] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,1250), corner_timer=0.30
[16:47:03] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,1250), corner_timer=0.30
[16:47:03] [INFO] [GrenadeTimer] Frag grenade landed - EXPLODING!
[16:47:03] [INFO] [GrenadeTimer] EXPLODED at (728.9509, 1288.2705)!
[16:47:03] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[16:47:03] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[16:47:03] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(728.9509, 1288.271), source=NEUTRAL (FragGrenade), range=2938, listeners=20
[16:47:03] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[16:47:03] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=9
[16:47:03] [INFO] [GrenadeTimer] Spawned C# explosion effect at (728.9509, 1288.2705)
[16:47:03] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,1250), corner_timer=-0.02
[16:47:03] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[16:47:03] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,1250), corner_timer=0.30
[16:47:03] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,1250), corner_timer=-0.02
[16:47:03] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[16:47:03] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,1250), corner_timer=0.30
[16:47:03] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:47:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:03] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:47:03] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:47:03] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:47:03] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:47:03] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:47:03] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:47:03] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:47:03] [ENEMY] [Enemy1] Death animation component initialized
[16:47:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:03] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:47:03] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:47:03] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:47:03] [ENEMY] [Enemy2] Death animation component initialized
[16:47:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:03] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:47:03] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:47:03] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:47:03] [ENEMY] [Enemy3] Death animation component initialized
[16:47:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:03] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:47:03] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:47:03] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:47:03] [ENEMY] [Enemy4] Death animation component initialized
[16:47:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:03] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:47:03] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:47:03] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:47:03] [INFO] [EnemyGrenade] Initialized: 1 grenades
[16:47:03] [ENEMY] [Enemy5] Death animation component initialized
[16:47:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:03] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:47:03] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:47:03] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:47:03] [ENEMY] [Enemy6] Death animation component initialized
[16:47:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:03] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:47:03] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:47:03] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:47:03] [ENEMY] [Enemy7] Death animation component initialized
[16:47:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:03] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:47:03] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:47:03] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:47:03] [INFO] [EnemyGrenade] Initialized: 1 grenades
[16:47:03] [ENEMY] [Enemy8] Death animation component initialized
[16:47:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:03] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:47:03] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:47:03] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:47:03] [ENEMY] [Enemy9] Death animation component initialized
[16:47:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:03] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:47:03] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:47:03] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:47:03] [ENEMY] [Enemy10] Death animation component initialized
[16:47:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:03] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:47:03] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:47:03] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:47:03] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[16:47:03] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:47:03] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:47:03] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:47:03] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:47:03] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:47:03] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:47:03] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:47:03] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[16:47:03] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:47:03] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:47:03] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:47:03] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:47:03] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:47:03] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:47:03] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:47:03] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:47:03] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:47:03] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:47:03] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:47:03] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:47:03] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:47:03] [INFO] [ScoreManager] Level started with 10 enemies
[16:47:03] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:47:03] [INFO] [CinemaEffects] Found player node: Player
[16:47:03] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:47:03] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[16:47:03] [ENEMY] [Enemy1] Registered as sound listener
[16:47:03] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[16:47:03] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:47:03] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[16:47:03] [ENEMY] [Enemy2] Registered as sound listener
[16:47:03] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[16:47:03] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:47:03] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[16:47:03] [ENEMY] [Enemy3] Registered as sound listener
[16:47:03] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[16:47:03] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:47:03] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[16:47:03] [ENEMY] [Enemy4] Registered as sound listener
[16:47:03] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[16:47:03] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:47:03] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[16:47:03] [ENEMY] [Enemy5] Registered as sound listener
[16:47:03] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[16:47:03] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:47:03] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[16:47:03] [ENEMY] [Enemy6] Registered as sound listener
[16:47:03] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[16:47:03] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:47:03] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[16:47:03] [ENEMY] [Enemy7] Registered as sound listener
[16:47:03] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[16:47:03] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:47:03] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[16:47:03] [ENEMY] [Enemy8] Registered as sound listener
[16:47:03] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[16:47:03] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:47:03] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[16:47:03] [ENEMY] [Enemy9] Registered as sound listener
[16:47:03] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[16:47:03] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:47:03] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[16:47:03] [ENEMY] [Enemy10] Registered as sound listener
[16:47:03] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[16:47:03] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:47:03] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:03] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:03] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:03] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:03] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:03] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:03] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=78.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:03] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:03] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:47:03] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:47:03] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:47:03] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:47:03] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:47:03] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:47:03] [INFO] [LastChance] Found player: Player
[16:47:03] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:47:03] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:47:03] [INFO] [LastChance] Connected to player Died signal (C#)
[16:47:03] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:47:04] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:47:04] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:47:04] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:47:04] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:47:04] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (632.713, 1298.757)
[16:47:04] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[16:47:04] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Frag)
[16:47:04] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:47:04] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[16:47:04] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:47:04] [INFO] [Player.Grenade] Step 1 complete! Drag: (139.40344, 25.380371)
[16:47:04] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:47:04] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:47:05] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:47:05] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:47:05] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1250), corner_timer=0.30
[16:47:05] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1250), corner_timer=0.30
[16:47:05] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,1250), corner_timer=-0.02
[16:47:05] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:47:05] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,1250), corner_timer=-0.02
[16:47:05] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:47:05] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,1250), corner_timer=0.30
[16:47:05] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,1250), corner_timer=0.30
[16:47:05] [INFO] [Player.Grenade.Simple] Throwing! Target: (1026.8004, 1427.6624), Distance: 630,5, Speed: 615,1, Friction: 300,0
[16:47:05] [INFO] [Player.Grenade] Player rotated for throw: 0 -> 0,2987924
[16:47:05] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:47:05] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(0.95569265, 0.2943663), speed=615,1, spawn=(507.34155, 1267.662)
[16:47:05] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:47:05] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:47:05] [INFO] [Player.Grenade] State reset to IDLE
[16:47:05] [INFO] [Player.Grenade] State reset to IDLE
[16:47:05] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:47:05] [INFO] [Player.Grenade] Player rotation restored to 0
[16:47:06] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,1250), corner_timer=-0.02
[16:47:06] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[16:47:06] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,1250), corner_timer=0.30
[16:47:06] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:47:06] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,1250), corner_timer=-0.02
[16:47:06] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[16:47:06] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,1250), corner_timer=0.30
[16:47:06] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(450,1250), corner_timer=-0.02
[16:47:06] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[16:47:06] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(450,1250), corner_timer=0.30
[16:47:07] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(450,1250), corner_timer=-0.02
[16:47:07] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[16:47:07] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(450,1250), corner_timer=0.30
[16:47:07] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:47:07] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(450,1250), corner_timer=-0.02
[16:47:07] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[16:47:07] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(450,1250), corner_timer=0.30
[16:47:07] [INFO] [GrenadeTimer] Frag grenade landed - EXPLODING!
[16:47:07] [INFO] [GrenadeTimer] EXPLODED at (1062.8972, 1438.6584)!
[16:47:07] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[16:47:07] [ENEMY] [Enemy10] Hit taken, damage: 1, health: 4/4 -> 3/4
[16:47:07] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[16:47:07] [INFO] [ImpactEffects] spawn_blood_effect called at (1159.099, 1601.934), dir=(0.507636, 0.861572), lethal=false
[16:47:07] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:47:07] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:47:07] [INFO] [ImpactEffects] Wall found for blood splatter at (1173.278, 1626) (dist=27 px)
[16:47:07] [INFO] [BloodDecal] Blood puddle created at (1173.278, 1625) (added to group)
[16:47:07] [INFO] [ImpactEffects] Blood effect spawned at (1159.099, 1601.934) (scale=1)
[16:47:07] [ENEMY] [Enemy10] Hit taken, damage: 1, health: 3/4 -> 2/4
[16:47:07] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[16:47:07] [INFO] [ImpactEffects] spawn_blood_effect called at (1159.099, 1601.934), dir=(0.507636, 0.861572), lethal=false
[16:47:07] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:47:07] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:47:07] [INFO] [ImpactEffects] Wall found for blood splatter at (1173.278, 1626) (dist=27 px)
[16:47:07] [INFO] [BloodDecal] Blood puddle created at (1173.278, 1625) (added to group)
[16:47:07] [INFO] [ImpactEffects] Blood effect spawned at (1159.099, 1601.934) (scale=1)
[16:47:07] [ENEMY] [Enemy10] Hit taken, damage: 1, health: 2/4 -> 1/4
[16:47:07] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[16:47:07] [INFO] [ImpactEffects] spawn_blood_effect called at (1159.099, 1601.934), dir=(0.507636, 0.861572), lethal=false
[16:47:07] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:47:07] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:47:07] [INFO] [ImpactEffects] Wall found for blood splatter at (1173.278, 1626) (dist=27 px)
[16:47:07] [INFO] [BloodDecal] Blood puddle created at (1173.278, 1625) (added to group)
[16:47:07] [INFO] [ImpactEffects] Blood effect spawned at (1159.099, 1601.934) (scale=1)
[16:47:07] [ENEMY] [Enemy10] Hit taken, damage: 1, health: 1/4 -> 0/4
[16:47:07] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[16:47:07] [INFO] [ImpactEffects] spawn_blood_effect called at (1159.099, 1601.934), dir=(0.507636, 0.861572), lethal=true
[16:47:07] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:47:07] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[16:47:07] [INFO] [ImpactEffects] Wall found for blood splatter at (1173.278, 1626) (dist=27 px)
[16:47:07] [INFO] [BloodDecal] Blood puddle created at (1173.278, 1625) (added to group)
[16:47:07] [INFO] [ImpactEffects] Blood effect spawned at (1159.099, 1601.934) (scale=1.5)
[16:47:07] [ENEMY] [Enemy10] Enemy died (ricochet: false, penetration: false)
[16:47:07] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[16:47:07] [INFO] [SoundPropagation] Unregistered listener: Enemy10 (remaining: 19)
[16:47:07] [INFO] [DeathAnim] Started - Angle: 59.5 deg, Index: 15
[16:47:07] [ENEMY] [Enemy10] Death animation started with hit direction: (0.507636, 0.861572)
[16:47:07] [INFO] [GrenadeTimer] Damaged enemy at distance 189,5
[16:47:07] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[16:47:07] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(1062.897, 1438.658), source=NEUTRAL (FragGrenade), range=2938, listeners=19
[16:47:07] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[16:47:07] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=9
[16:47:07] [INFO] [GrenadeTimer] Spawned C# explosion effect at (1062.8972, 1438.6584)
[16:47:07] [INFO] [BloodyFeet:Enemy10] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[16:47:07] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(450,1250), corner_timer=-0.02
[16:47:07] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[16:47:07] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(450,1250), corner_timer=0.30
[16:47:08] [ENEMY] [Enemy10] Ragdoll activated
[16:47:08] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[16:47:08] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(450,1250), corner_timer=-0.02
[16:47:08] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[16:47:08] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(450,1250), corner_timer=0.30
[16:47:08] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:47:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:08] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:47:08] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:47:08] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:47:08] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:47:08] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:47:08] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:47:08] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:47:08] [ENEMY] [Enemy1] Death animation component initialized
[16:47:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:08] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:47:08] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:47:08] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:47:08] [ENEMY] [Enemy2] Death animation component initialized
[16:47:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:08] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:47:08] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:47:08] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:47:08] [ENEMY] [Enemy3] Death animation component initialized
[16:47:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:08] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:47:08] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:47:08] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:47:08] [ENEMY] [Enemy4] Death animation component initialized
[16:47:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:08] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:47:08] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:47:08] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:47:08] [ENEMY] [Enemy5] Death animation component initialized
[16:47:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:08] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:47:08] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:47:08] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:47:08] [INFO] [EnemyGrenade] Initialized: 1 grenades
[16:47:08] [ENEMY] [Enemy6] Death animation component initialized
[16:47:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:08] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:47:08] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:47:08] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:47:08] [ENEMY] [Enemy7] Death animation component initialized
[16:47:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:08] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:47:08] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:47:08] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:47:08] [ENEMY] [Enemy8] Death animation component initialized
[16:47:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:08] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:47:08] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:47:08] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:47:08] [ENEMY] [Enemy9] Death animation component initialized
[16:47:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:08] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:47:08] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:47:08] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:47:08] [ENEMY] [Enemy10] Death animation component initialized
[16:47:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:08] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:47:08] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:47:08] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:47:08] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[16:47:08] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:47:08] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:47:08] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:47:08] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:47:08] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:47:08] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:47:08] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:47:08] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[16:47:08] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:47:08] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:47:08] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:47:08] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:47:08] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:47:08] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:47:08] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:47:08] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:47:08] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:47:08] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:47:08] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:47:08] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:47:08] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:47:08] [INFO] [ScoreManager] Level started with 10 enemies
[16:47:08] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:47:08] [INFO] [CinemaEffects] Found player node: Player
[16:47:08] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:47:08] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[16:47:08] [ENEMY] [Enemy1] Registered as sound listener
[16:47:08] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[16:47:08] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:47:08] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[16:47:08] [ENEMY] [Enemy2] Registered as sound listener
[16:47:08] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[16:47:08] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:47:08] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[16:47:08] [ENEMY] [Enemy3] Registered as sound listener
[16:47:08] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[16:47:08] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:47:08] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[16:47:08] [ENEMY] [Enemy4] Registered as sound listener
[16:47:08] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[16:47:08] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:47:08] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[16:47:08] [ENEMY] [Enemy5] Registered as sound listener
[16:47:08] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[16:47:08] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:47:08] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[16:47:08] [ENEMY] [Enemy6] Registered as sound listener
[16:47:08] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[16:47:08] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:47:08] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[16:47:08] [ENEMY] [Enemy7] Registered as sound listener
[16:47:08] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[16:47:08] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:47:08] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[16:47:08] [ENEMY] [Enemy8] Registered as sound listener
[16:47:08] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[16:47:08] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:47:08] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[16:47:08] [ENEMY] [Enemy9] Registered as sound listener
[16:47:08] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[16:47:08] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:47:08] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[16:47:08] [ENEMY] [Enemy10] Registered as sound listener
[16:47:08] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[16:47:08] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:47:08] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:08] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:08] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:08] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:08] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:08] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:08] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=157.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:08] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:08] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:47:08] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:47:08] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:47:08] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:47:08] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:47:08] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:47:08] [INFO] [LastChance] Found player: Player
[16:47:08] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:47:08] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:47:08] [INFO] [LastChance] Connected to player Died signal (C#)
[16:47:08] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:47:08] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:47:08] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:47:08] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:47:08] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:47:08] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (870.5227, 1380.2412)
[16:47:08] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[16:47:08] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Frag)
[16:47:08] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:47:08] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[16:47:08] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:47:08] [INFO] [Player.Grenade] Step 1 complete! Drag: (108.4436, -4.0074463)
[16:47:08] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:47:08] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:47:09] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:47:09] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:47:09] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(375,1043), corner_timer=0.30
[16:47:09] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(375,1043), corner_timer=0.30
[16:47:10] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(301,969), corner_timer=-0.02
[16:47:10] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:47:10] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(301,969), corner_timer=-0.02
[16:47:10] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:47:10] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(297,965), corner_timer=0.30
[16:47:10] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(297,965), corner_timer=0.30
[16:47:10] [INFO] [Player.Grenade.Simple] Throwing! Target: (612.6054, 696.4472), Distance: 420,2, Speed: 502,1, Friction: 300,0
[16:47:10] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,5731512
[16:47:10] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:47:10] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(0.8401964, -0.54228234), speed=502,1, spawn=(308.2169, 892.9067)
[16:47:10] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:47:10] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:47:10] [INFO] [Player.Grenade] State reset to IDLE
[16:47:10] [INFO] [Player.Grenade] State reset to IDLE
[16:47:10] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:47:10] [INFO] [Player.Grenade] Player rotation restored to 0
[16:47:10] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(241,909), corner_timer=-0.02
[16:47:10] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[16:47:10] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(240,908), corner_timer=0.30
[16:47:10] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:47:10] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(229,942), corner_timer=-0.02
[16:47:10] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[16:47:10] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(229,945), corner_timer=0.30
[16:47:11] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(228,954), corner_timer=-0.02
[16:47:11] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[16:47:11] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(228,954), corner_timer=0.30
[16:47:11] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(228,954), corner_timer=-0.02
[16:47:11] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[16:47:11] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(228,954), corner_timer=0.30
[16:47:11] [INFO] [GrenadeTimer] Frag grenade landed - EXPLODING!
[16:47:11] [INFO] [GrenadeTimer] EXPLODED at (639.6896, 678.9664)!
[16:47:11] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[16:47:11] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 4/4 -> 3/4
[16:47:11] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[16:47:11] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.647224, 0.7623), lethal=false
[16:47:11] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:47:11] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:47:11] [INFO] [ImpactEffects] Wall found for blood splatter at (750.9424, 810) (dist=78 px)
[16:47:11] [INFO] [BloodDecal] Blood puddle created at (750.9424, 809) (added to group)
[16:47:11] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[16:47:11] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 3/4 -> 2/4
[16:47:11] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[16:47:11] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.647224, 0.7623), lethal=false
[16:47:11] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:47:11] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:47:11] [INFO] [ImpactEffects] Wall found for blood splatter at (750.9424, 810) (dist=78 px)
[16:47:11] [INFO] [BloodDecal] Blood puddle created at (750.9424, 809) (added to group)
[16:47:11] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[16:47:11] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/4 -> 1/4
[16:47:11] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[16:47:11] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.647224, 0.7623), lethal=false
[16:47:11] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:47:11] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:47:11] [INFO] [ImpactEffects] Wall found for blood splatter at (750.9424, 810) (dist=78 px)
[16:47:11] [INFO] [BloodDecal] Blood puddle created at (750.9424, 809) (added to group)
[16:47:11] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[16:47:11] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 1/4 -> 0/4
[16:47:11] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[16:47:11] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.647224, 0.7623), lethal=true
[16:47:11] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:47:11] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[16:47:11] [INFO] [ImpactEffects] Wall found for blood splatter at (750.9424, 810) (dist=78 px)
[16:47:11] [INFO] [BloodDecal] Blood puddle created at (750.9424, 809) (added to group)
[16:47:11] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1.5)
[16:47:11] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[16:47:11] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[16:47:11] [ENEMY] [Enemy2] [AllyDeath] Witnessed at (700, 750), entering SEARCHING
[16:47:11] [ENEMY] [Enemy2] SEARCHING started: center=(700, 750), radius=100, waypoints=5
[16:47:11] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[16:47:11] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 18)
[16:47:11] [INFO] [DeathAnim] Started - Angle: 49.7 deg, Index: 15
[16:47:11] [ENEMY] [Enemy3] Death animation started with hit direction: (0.647224, 0.7623)
[16:47:11] [INFO] [GrenadeTimer] Damaged enemy at distance 93,2
[16:47:11] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[16:47:11] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(639.6896, 678.9664), source=NEUTRAL (FragGrenade), range=2938, listeners=18
[16:47:11] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[16:47:11] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=6
[16:47:11] [INFO] [GrenadeTimer] Spawned C# explosion effect at (639.6896, 678.9664)
[16:47:11] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=SEARCHING, target=113.0°, current=45.0°, player=(228,954), corner_timer=0.00
[16:47:11] [ENEMY] [Enemy2] SEARCHING corner check: angle 134.2°
[16:47:11] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:47:11] [ENEMY] [Enemy4] Memory: medium confidence (0.53) - transitioning to PURSUING
[16:47:11] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[16:47:11] [ENEMY] [Enemy1] Memory: medium confidence (0.53) - transitioning to PURSUING
[16:47:11] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[16:47:11] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=174.6°, current=168.8°, player=(228,954), corner_timer=0.00
[16:47:11] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=96.8°, current=33.8°, player=(228,954), corner_timer=0.00
[16:47:11] [ENEMY] [Enemy1] PURSUING corner check: angle -50.9°
[16:47:11] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[16:47:12] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(228,954), corner_timer=-0.02
[16:47:12] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[16:47:12] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(228,954), corner_timer=0.30
[16:47:12] [INFO] [BloodDecal] Blood puddle created at (728.0135, 802.659) (added to group)
[16:47:12] [INFO] [BloodDecal] Blood puddle created at (768.0579, 801.4666) (added to group)
[16:47:12] [INFO] [BloodDecal] Blood puddle created at (782.3152, 817.0107) (added to group)
[16:47:12] [INFO] [BloodDecal] Blood puddle created at (791.281, 812.1226) (added to group)
[16:47:12] [INFO] [BloodDecal] Blood puddle created at (800.7472, 845.1629) (added to group)
[16:47:12] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:47:12] [INFO] [BloodDecal] Blood puddle created at (820.1164, 841.6157) (added to group)
[16:47:12] [INFO] [BloodDecal] Blood puddle created at (834.7083, 862.2841) (added to group)
[16:47:12] [ENEMY] [Enemy2] SEARCHING corner check: angle -60.5°
[16:47:12] [ENEMY] [Enemy1] PURSUING corner check: angle -51.1°
[16:47:12] [ENEMY] [Enemy3] Ragdoll activated
[16:47:12] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[16:47:12] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(228,954), corner_timer=-0.02
[16:47:12] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[16:47:12] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(228,954), corner_timer=0.30
[16:47:12] [ENEMY] [Enemy4] PURSUING corner check: angle -94.0°
[16:47:12] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=SEARCHING, target=137.9°, current=137.1°, player=(228,954), corner_timer=0.13
[16:47:12] [ENEMY] [Enemy2] SEARCHING: Player spotted! Transitioning to COMBAT
[16:47:12] [ENEMY] [Enemy2] State: SEARCHING -> COMBAT
[16:47:12] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=138.3°, current=-114.6°, player=(228,954), corner_timer=0.13
[16:47:12] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:47:12] [ENEMY] [Enemy1] PURSUING corner check: angle 153.7°
[16:47:12] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:47:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:12] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:47:12] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:47:12] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:47:12] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:47:12] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:47:12] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:47:12] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:47:12] [ENEMY] [Enemy1] Death animation component initialized
[16:47:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:12] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:47:12] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:47:12] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:47:12] [ENEMY] [Enemy2] Death animation component initialized
[16:47:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:12] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:47:12] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:47:12] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:47:12] [ENEMY] [Enemy3] Death animation component initialized
[16:47:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:12] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:47:12] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:47:12] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:47:12] [ENEMY] [Enemy4] Death animation component initialized
[16:47:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:12] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:47:12] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:47:12] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:47:12] [ENEMY] [Enemy5] Death animation component initialized
[16:47:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:12] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:47:12] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:47:12] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:47:12] [ENEMY] [Enemy6] Death animation component initialized
[16:47:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:12] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:47:12] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:47:12] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:47:12] [ENEMY] [Enemy7] Death animation component initialized
[16:47:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:12] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:47:12] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:47:12] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:47:12] [ENEMY] [Enemy8] Death animation component initialized
[16:47:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:12] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:47:12] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:47:12] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:47:12] [ENEMY] [Enemy9] Death animation component initialized
[16:47:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:12] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:47:12] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:47:12] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:47:12] [ENEMY] [Enemy10] Death animation component initialized
[16:47:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:12] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:47:12] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:47:12] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:47:12] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[16:47:12] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:47:12] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:47:12] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:47:12] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:47:12] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:47:12] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:47:12] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:47:12] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[16:47:12] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:47:12] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:47:12] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:47:12] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:47:12] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:47:12] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:47:12] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:47:12] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:47:12] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:47:12] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:47:12] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:47:12] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:47:12] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:47:12] [INFO] [ScoreManager] Level started with 10 enemies
[16:47:12] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:47:12] [INFO] [CinemaEffects] Found player node: Player
[16:47:12] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:47:12] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[16:47:12] [ENEMY] [Enemy1] Registered as sound listener
[16:47:12] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[16:47:12] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:47:12] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[16:47:12] [ENEMY] [Enemy2] Registered as sound listener
[16:47:12] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[16:47:12] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:47:12] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[16:47:12] [ENEMY] [Enemy3] Registered as sound listener
[16:47:12] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[16:47:12] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:47:12] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[16:47:12] [ENEMY] [Enemy4] Registered as sound listener
[16:47:12] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[16:47:12] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:47:12] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[16:47:12] [ENEMY] [Enemy5] Registered as sound listener
[16:47:12] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[16:47:12] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:47:12] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[16:47:12] [ENEMY] [Enemy6] Registered as sound listener
[16:47:12] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[16:47:12] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:47:12] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[16:47:12] [ENEMY] [Enemy7] Registered as sound listener
[16:47:12] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[16:47:12] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:47:12] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[16:47:12] [ENEMY] [Enemy8] Registered as sound listener
[16:47:12] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[16:47:12] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:47:12] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[16:47:12] [ENEMY] [Enemy9] Registered as sound listener
[16:47:12] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[16:47:12] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:47:12] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[16:47:12] [ENEMY] [Enemy10] Registered as sound listener
[16:47:12] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[16:47:12] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:47:12] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:12] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:12] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=281.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:12] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:12] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:12] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:12] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:12] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:12] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:47:12] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:47:12] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:47:12] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:47:12] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:47:12] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:47:12] [INFO] [LastChance] Found player: Player
[16:47:12] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:47:12] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:47:12] [INFO] [LastChance] Connected to player Died signal (C#)
[16:47:12] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:47:14] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:47:14] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:47:14] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(547,1546), corner_timer=0.30
[16:47:14] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(547,1546), corner_timer=0.30
[16:47:14] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(621,1620), corner_timer=-0.02
[16:47:14] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:47:14] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(621,1620), corner_timer=-0.02
[16:47:14] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:47:14] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(625,1624), corner_timer=0.30
[16:47:14] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(625,1624), corner_timer=0.30
[16:47:14] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:47:14] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:47:14] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:47:14] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:47:14] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (359.99954, 1775.5027)
[16:47:14] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(665,1672), corner_timer=-0.02
[16:47:14] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[16:47:15] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(665,1673), corner_timer=0.30
[16:47:15] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[16:47:15] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Frag)
[16:47:15] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:47:15] [INFO] [Player.Grenade] Timer started, grenade created at (665.9152, 1673.4258)
[16:47:15] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:47:15] [INFO] [Player.Grenade] Step 1 complete! Drag: (34.99283, 9.94043)
[16:47:15] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:47:15] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:47:15] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(665,1673), corner_timer=-0.02
[16:47:15] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[16:47:15] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(665,1673), corner_timer=0.30
[16:47:15] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(665,1673), corner_timer=-0.02
[16:47:15] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[16:47:15] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(665,1673), corner_timer=0.30
[16:47:15] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(665,1673), corner_timer=-0.02
[16:47:15] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[16:47:16] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(665,1673), corner_timer=0.30
[16:47:16] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:47:16] [INFO] [Player.Grenade.Simple] Throwing! Target: (399.35135, 1675.4082), Distance: 239,6, Speed: 379,2, Friction: 300,0
[16:47:16] [INFO] [Player.Grenade] Player rotated for throw: 0 -> 3,134165
[16:47:16] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:47:16] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(-0.9999724, 0.007427531), speed=379,2, spawn=(605.9188, 1673.8739)
[16:47:16] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:47:16] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:47:16] [INFO] [Player.Grenade] State reset to IDLE
[16:47:16] [INFO] [Player.Grenade] State reset to IDLE
[16:47:16] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:47:16] [INFO] [Player.Grenade] Player rotation restored to 0
[16:47:16] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(665,1676), corner_timer=-0.02
[16:47:16] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[16:47:16] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(666,1678), corner_timer=0.30
[16:47:16] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:47:16] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:47:16] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(716,1733), corner_timer=-0.02
[16:47:16] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[16:47:16] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(718,1735), corner_timer=0.30
[16:47:16] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:47:17] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(736,1751), corner_timer=-0.02
[16:47:17] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[16:47:17] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(736,1751), corner_timer=0.30
[16:47:17] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:47:17] [INFO] [GrenadeTimer] Frag grenade landed - EXPLODING!
[16:47:17] [INFO] [GrenadeTimer] EXPLODED at (377.74582, 1675.5691)!
[16:47:17] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[16:47:17] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[16:47:17] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(377.7458, 1675.569), source=NEUTRAL (FragGrenade), range=2938, listeners=19
[16:47:17] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[16:47:17] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=10
[16:47:17] [INFO] [GrenadeTimer] Wall detected between explosion and player at distance 125px from explosion
[16:47:17] [INFO] [GrenadeTimer] Visual effect blocked by wall - player cannot see explosion at (377.74582, 1675.5691)
[16:47:17] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(736,1751), corner_timer=-0.02
[16:47:17] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[16:47:17] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(736,1751), corner_timer=0.30
[16:47:17] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:47:17] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(736,1751), corner_timer=-0.02
[16:47:17] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[16:47:17] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(736,1751), corner_timer=0.30
[16:47:17] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:47:18] [ENEMY] [Enemy9] Hit taken, damage: 1, health: 2/2 -> 1/2
[16:47:18] [ENEMY] [Enemy9] ImpactEffectsManager found, calling spawn_blood_effect
[16:47:18] [INFO] [ImpactEffects] spawn_blood_effect called at (2100, 1550), dir=(-0.979187, 0.202959), lethal=false
[16:47:18] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:47:18] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:47:18] [INFO] [ImpactEffects] Blood effect spawned at (2100, 1550) (scale=1)
[16:47:18] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:47:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:18] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:47:18] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:47:18] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:47:18] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:47:18] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:47:18] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:47:18] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:47:18] [ENEMY] [Enemy1] Death animation component initialized
[16:47:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:18] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:47:18] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:47:18] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:47:18] [ENEMY] [Enemy2] Death animation component initialized
[16:47:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:18] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:47:18] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:47:18] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:47:18] [ENEMY] [Enemy3] Death animation component initialized
[16:47:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:18] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:47:18] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:47:18] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:47:18] [INFO] [EnemyGrenade] Initialized: 1 grenades
[16:47:18] [ENEMY] [Enemy4] Death animation component initialized
[16:47:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:18] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:47:18] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:47:18] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:47:18] [ENEMY] [Enemy5] Death animation component initialized
[16:47:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:18] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:47:18] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:47:18] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:47:18] [ENEMY] [Enemy6] Death animation component initialized
[16:47:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:18] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:47:18] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:47:18] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:47:18] [ENEMY] [Enemy7] Death animation component initialized
[16:47:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:18] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:47:18] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:47:18] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:47:18] [ENEMY] [Enemy8] Death animation component initialized
[16:47:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:18] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:47:18] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:47:18] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:47:18] [ENEMY] [Enemy9] Death animation component initialized
[16:47:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:18] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:47:18] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:47:18] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:47:18] [ENEMY] [Enemy10] Death animation component initialized
[16:47:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:18] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:47:18] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:47:18] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:47:18] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[16:47:18] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:47:18] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:47:18] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:47:18] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:47:18] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:47:18] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:47:18] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:47:18] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[16:47:18] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:47:18] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:47:18] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:47:18] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:47:18] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:47:18] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:47:18] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:47:18] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:47:18] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:47:18] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:47:18] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:47:18] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:47:18] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:47:18] [INFO] [ScoreManager] Level started with 10 enemies
[16:47:18] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:47:18] [INFO] [CinemaEffects] Found player node: Player
[16:47:18] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:47:18] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[16:47:18] [ENEMY] [Enemy1] Registered as sound listener
[16:47:18] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[16:47:18] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:47:18] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[16:47:18] [ENEMY] [Enemy2] Registered as sound listener
[16:47:18] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[16:47:18] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:47:18] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[16:47:18] [ENEMY] [Enemy3] Registered as sound listener
[16:47:18] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[16:47:18] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:47:18] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[16:47:18] [ENEMY] [Enemy4] Registered as sound listener
[16:47:18] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[16:47:18] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:47:18] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[16:47:18] [ENEMY] [Enemy5] Registered as sound listener
[16:47:18] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[16:47:18] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:47:18] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[16:47:18] [ENEMY] [Enemy6] Registered as sound listener
[16:47:18] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[16:47:18] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:47:18] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[16:47:18] [ENEMY] [Enemy7] Registered as sound listener
[16:47:18] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[16:47:18] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:47:18] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[16:47:18] [ENEMY] [Enemy8] Registered as sound listener
[16:47:18] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[16:47:18] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:47:18] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[16:47:18] [ENEMY] [Enemy9] Registered as sound listener
[16:47:18] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[16:47:18] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:47:18] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[16:47:18] [ENEMY] [Enemy10] Registered as sound listener
[16:47:18] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[16:47:18] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:47:18] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:18] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:18] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:18] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:18] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:18] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:18] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=157.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:18] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:18] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:47:18] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:47:18] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:47:18] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:47:18] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:47:18] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:47:18] [INFO] [LastChance] Found player: Player
[16:47:18] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:47:18] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:47:18] [INFO] [LastChance] Connected to player Died signal (C#)
[16:47:18] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:47:18] [INFO] [BloodDecal] Blood puddle created at (2039.384, 1590.739) (added to group)
[16:47:18] [INFO] [BloodDecal] Blood puddle created at (1982.926, 1588.179) (added to group)
[16:47:18] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:47:18] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:47:18] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:47:18] [INFO] [BloodDecal] Blood puddle created at (1992.602, 1608.043) (added to group)
[16:47:18] [INFO] [BloodDecal] Blood puddle created at (2024.075, 1608.48) (added to group)
[16:47:18] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:47:18] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (314.15536, 1282.0593)
[16:47:18] [INFO] [BloodDecal] Blood puddle created at (1969.409, 1577.672) (added to group)
[16:47:18] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[16:47:18] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Frag)
[16:47:18] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:47:18] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[16:47:18] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:47:18] [INFO] [Player.Grenade] Step 1 complete! Drag: (128.56592, 20.03711)
[16:47:18] [INFO] [BloodDecal] Blood puddle created at (1976.787, 1646.727) (added to group)
[16:47:18] [INFO] [BloodDecal] Blood puddle created at (1971.668, 1649.447) (added to group)
[16:47:18] [INFO] [BloodDecal] Blood puddle created at (1941.078, 1670.879) (added to group)
[16:47:18] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:47:18] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:47:18] [INFO] [BloodDecal] Blood puddle created at (1970.574, 1628.406) (added to group)
[16:47:18] [INFO] [BloodDecal] Blood puddle created at (1958.331, 1636.679) (added to group)
[16:47:19] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:47:19] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:47:19] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(484,1256), corner_timer=0.30
[16:47:19] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(484,1256), corner_timer=0.30
[16:47:19] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(530,1302), corner_timer=-0.02
[16:47:19] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:47:19] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(530,1302), corner_timer=-0.02
[16:47:19] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:47:20] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(530,1303), corner_timer=0.30
[16:47:20] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(530,1303), corner_timer=0.30
[16:47:20] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(531,1304), corner_timer=-0.02
[16:47:20] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[16:47:20] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(531,1304), corner_timer=0.30
[16:47:20] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(531,1304), corner_timer=-0.02
[16:47:20] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[16:47:20] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(531,1304), corner_timer=0.30
[16:47:20] [INFO] [Player.Grenade.Simple] Throwing! Target: (358.07895, 1463.5244), Distance: 203,7, Speed: 349,6, Friction: 300,0
[16:47:20] [INFO] [Player.Grenade] Player rotated for throw: 0 -> 2,398254
[16:47:20] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:47:20] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(-0.7362132, 0.6767496), speed=349,6, spawn=(487.33282, 1344.7103)
[16:47:20] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:47:20] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:47:20] [INFO] [Player.Grenade] State reset to IDLE
[16:47:20] [INFO] [Player.Grenade] State reset to IDLE
[16:47:20] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:47:20] [INFO] [Player.Grenade] Player rotation restored to 0
[16:47:20] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(532,1304), corner_timer=-0.02
[16:47:20] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[16:47:21] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(533,1304), corner_timer=0.30
[16:47:21] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:47:21] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(591,1336), corner_timer=-0.02
[16:47:21] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[16:47:21] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(594,1340), corner_timer=0.30
[16:47:21] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:47:21] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(632,1371), corner_timer=-0.02
[16:47:21] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[16:47:21] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(632,1371), corner_timer=0.30
[16:47:21] [INFO] [GrenadeTimer] Frag grenade landed - EXPLODING!
[16:47:21] [INFO] [GrenadeTimer] EXPLODED at (343.9094, 1476.5493)!
[16:47:21] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[16:47:21] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[16:47:21] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(343.9094, 1476.549), source=NEUTRAL (FragGrenade), range=2938, listeners=20
[16:47:21] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[16:47:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=10
[16:47:21] [INFO] [GrenadeTimer] Wall detected between explosion and player at distance 189px from explosion
[16:47:21] [INFO] [GrenadeTimer] Visual effect blocked by wall - player cannot see explosion at (343.9094, 1476.5493)
[16:47:21] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:47:22] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(632,1371), corner_timer=-0.02
[16:47:22] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[16:47:22] [ENEMY] [Enemy10] Hit taken, damage: 1, health: 3/3 -> 2/3
[16:47:22] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[16:47:22] [INFO] [ImpactEffects] spawn_blood_effect called at (1159.099, 1601.934), dir=(-0.995784, -0.091733), lethal=false
[16:47:22] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:47:22] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:47:22] [INFO] [ImpactEffects] Blood effect spawned at (1159.099, 1601.934) (scale=1)
[16:47:22] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(632,1371), corner_timer=0.30
[16:47:22] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:47:22] [INFO] [BloodDecal] Blood puddle created at (1098.958, 1602.03) (added to group)
[16:47:22] [INFO] [BloodDecal] Blood puddle created at (1112.408, 1610.608) (added to group)
[16:47:22] [INFO] [BloodDecal] Blood puddle created at (1099.104, 1599.036) (added to group)
[16:47:22] [INFO] [BloodDecal] Blood puddle created at (1108.639, 1637.946) (added to group)
[16:47:22] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(632,1371), corner_timer=-0.02
[16:47:22] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[16:47:22] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(632,1371), corner_timer=0.30
[16:47:22] [INFO] [BloodDecal] Blood puddle created at (1053.393, 1647.098) (added to group)
[16:47:22] [INFO] [BloodDecal] Blood puddle created at (1064.764, 1638.691) (added to group)
[16:47:22] [INFO] [BloodDecal] Blood puddle created at (1023.258, 1675.321) (added to group)
[16:47:22] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:47:22] [INFO] [BloodDecal] Blood puddle created at (1081.838, 1668.525) (added to group)
[16:47:22] [INFO] [BloodDecal] Blood puddle created at (1002.718, 1754.408) (added to group)
[16:47:22] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(632,1371), corner_timer=-0.02
[16:47:22] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[16:47:22] [INFO] [BloodDecal] Blood puddle created at (1051.669, 1630.952) (added to group)
[16:47:22] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(632,1371), corner_timer=0.30
[16:47:22] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:47:23] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(632,1371), corner_timer=-0.02
[16:47:23] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[16:47:23] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(632,1371), corner_timer=0.30
[16:47:23] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:47:23] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:47:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:23] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:47:23] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:47:23] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:47:23] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:47:23] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:47:23] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:47:23] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:47:23] [INFO] [EnemyGrenade] Initialized: 1 grenades
[16:47:23] [ENEMY] [Enemy1] Death animation component initialized
[16:47:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:23] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:47:23] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:47:23] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:47:23] [ENEMY] [Enemy2] Death animation component initialized
[16:47:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:23] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:47:23] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:47:23] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:47:23] [ENEMY] [Enemy3] Death animation component initialized
[16:47:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:23] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:47:23] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:47:23] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:47:23] [ENEMY] [Enemy4] Death animation component initialized
[16:47:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:23] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:47:23] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:47:23] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:47:23] [ENEMY] [Enemy5] Death animation component initialized
[16:47:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:23] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:47:23] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:47:23] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:47:23] [ENEMY] [Enemy6] Death animation component initialized
[16:47:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:23] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:47:23] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:47:23] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:47:23] [ENEMY] [Enemy7] Death animation component initialized
[16:47:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:23] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:47:23] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:47:23] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:47:23] [ENEMY] [Enemy8] Death animation component initialized
[16:47:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:23] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:47:23] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:47:23] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:47:23] [ENEMY] [Enemy9] Death animation component initialized
[16:47:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:23] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:47:23] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:47:23] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:47:23] [ENEMY] [Enemy10] Death animation component initialized
[16:47:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:23] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:47:23] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:47:23] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:47:23] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[16:47:23] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:47:23] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:47:23] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:47:23] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:47:23] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:47:23] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:47:23] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:47:23] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[16:47:23] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:47:23] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:47:23] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:47:23] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:47:23] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:47:23] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:47:23] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:47:23] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:47:23] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:47:23] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:47:23] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:47:23] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:47:23] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:47:23] [INFO] [ScoreManager] Level started with 10 enemies
[16:47:23] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:47:23] [INFO] [CinemaEffects] Found player node: Player
[16:47:23] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:47:23] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[16:47:23] [ENEMY] [Enemy1] Registered as sound listener
[16:47:23] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[16:47:23] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:47:23] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[16:47:23] [ENEMY] [Enemy2] Registered as sound listener
[16:47:23] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[16:47:23] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:47:23] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[16:47:23] [ENEMY] [Enemy3] Registered as sound listener
[16:47:23] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[16:47:23] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:47:23] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[16:47:23] [ENEMY] [Enemy4] Registered as sound listener
[16:47:23] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[16:47:23] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:47:23] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[16:47:23] [ENEMY] [Enemy5] Registered as sound listener
[16:47:23] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[16:47:23] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:47:23] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[16:47:23] [ENEMY] [Enemy6] Registered as sound listener
[16:47:23] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[16:47:23] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:47:23] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[16:47:23] [ENEMY] [Enemy7] Registered as sound listener
[16:47:23] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[16:47:23] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:47:23] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[16:47:23] [ENEMY] [Enemy8] Registered as sound listener
[16:47:23] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[16:47:23] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:47:23] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[16:47:23] [ENEMY] [Enemy9] Registered as sound listener
[16:47:23] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[16:47:23] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:47:23] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[16:47:23] [ENEMY] [Enemy10] Registered as sound listener
[16:47:23] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[16:47:23] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:47:23] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:23] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:23] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:23] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:23] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:23] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:23] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:23] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:23] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:47:23] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:47:23] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:47:23] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:47:23] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:47:23] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:47:23] [INFO] [LastChance] Found player: Player
[16:47:23] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:47:23] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:47:23] [INFO] [LastChance] Connected to player Died signal (C#)
[16:47:23] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:47:23] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:47:23] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:47:23] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:47:23] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:47:23] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (314.1985, 1408.961)
[16:47:23] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[16:47:23] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Frag)
[16:47:23] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:47:23] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[16:47:23] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:47:23] [INFO] [Player.Grenade] Step 1 complete! Drag: (299.9151, 7.346924)
[16:47:23] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:47:23] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:47:24] [INFO] [Player.Grenade.Simple] Throwing! Target: (1009.8948, 1444.3599), Distance: 385,5, Speed: 481,0, Friction: 300,0
[16:47:24] [INFO] [Player.Grenade] Player rotated for throw: 0 -> 0,51824903
[16:47:24] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:47:24] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(0.86868787, 0.49535987), speed=481,0, spawn=(721.1769, 1279.7216)
[16:47:24] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:47:24] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:47:24] [INFO] [Player.Grenade] State reset to IDLE
[16:47:24] [INFO] [Player.Grenade] State reset to IDLE
[16:47:24] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:47:24] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:47:24] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:47:24] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(675,1250), corner_timer=0.30
[16:47:24] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(675,1250), corner_timer=0.30
[16:47:25] [INFO] [Player.Grenade] Player rotation restored to 0
[16:47:25] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:47:25] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(674,1250), corner_timer=-0.02
[16:47:25] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:47:25] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(674,1250), corner_timer=-0.02
[16:47:25] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:47:25] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(671,1250), corner_timer=0.30
[16:47:25] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(671,1250), corner_timer=0.30
[16:47:25] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(597,1281), corner_timer=-0.02
[16:47:25] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[16:47:25] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(595,1283), corner_timer=0.30
[16:47:25] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(582,1295), corner_timer=-0.02
[16:47:25] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[16:47:25] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(582,1295), corner_timer=0.30
[16:47:26] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(582,1295), corner_timer=-0.02
[16:47:26] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[16:47:26] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(582,1295), corner_timer=0.30
[16:47:26] [INFO] [GrenadeTimer] Frag grenade landed - EXPLODING!
[16:47:26] [INFO] [GrenadeTimer] EXPLODED at (1036.4493, 1459.5018)!
[16:47:26] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[16:47:26] [ENEMY] [Enemy10] Hit taken, damage: 1, health: 3/3 -> 2/3
[16:47:26] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[16:47:26] [INFO] [ImpactEffects] spawn_blood_effect called at (1161.248, 1601.934), dir=(0.659014, 0.75213), lethal=false
[16:47:26] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:47:26] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:47:26] [INFO] [ImpactEffects] Wall found for blood splatter at (1182.334, 1626) (dist=31 px)
[16:47:26] [INFO] [BloodDecal] Blood puddle created at (1182.334, 1625) (added to group)
[16:47:26] [INFO] [ImpactEffects] Blood effect spawned at (1161.248, 1601.934) (scale=1)
[16:47:26] [ENEMY] [Enemy10] Hit taken, damage: 1, health: 2/3 -> 1/3
[16:47:26] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[16:47:26] [INFO] [ImpactEffects] spawn_blood_effect called at (1161.248, 1601.934), dir=(0.659014, 0.75213), lethal=false
[16:47:26] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:47:26] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:47:26] [INFO] [ImpactEffects] Wall found for blood splatter at (1182.334, 1626) (dist=31 px)
[16:47:26] [INFO] [BloodDecal] Blood puddle created at (1182.334, 1625) (added to group)
[16:47:26] [INFO] [ImpactEffects] Blood effect spawned at (1161.248, 1601.934) (scale=1)
[16:47:26] [ENEMY] [Enemy10] Hit taken, damage: 1, health: 1/3 -> 0/3
[16:47:26] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[16:47:26] [INFO] [ImpactEffects] spawn_blood_effect called at (1161.248, 1601.934), dir=(0.659014, 0.75213), lethal=true
[16:47:26] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:47:26] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[16:47:26] [INFO] [ImpactEffects] Wall found for blood splatter at (1182.334, 1626) (dist=31 px)
[16:47:26] [INFO] [BloodDecal] Blood puddle created at (1182.334, 1625) (added to group)
[16:47:26] [INFO] [ImpactEffects] Blood effect spawned at (1161.248, 1601.934) (scale=1.5)
[16:47:26] [ENEMY] [Enemy10] Enemy died (ricochet: false, penetration: false)
[16:47:26] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[16:47:26] [INFO] [SoundPropagation] Unregistered listener: Enemy10 (remaining: 19)
[16:47:26] [INFO] [DeathAnim] Started - Angle: 48.8 deg, Index: 15
[16:47:26] [ENEMY] [Enemy10] Death animation started with hit direction: (0.659014, 0.75213)
[16:47:26] [INFO] [GrenadeTimer] Damaged enemy at distance 189,4
[16:47:26] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[16:47:26] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(1036.449, 1459.502), source=NEUTRAL (FragGrenade), range=2938, listeners=19
[16:47:26] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[16:47:26] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=9
[16:47:26] [INFO] [GrenadeTimer] Wall detected between explosion and player at distance 132px from explosion
[16:47:26] [INFO] [GrenadeTimer] Visual effect blocked by wall - player cannot see explosion at (1036.4493, 1459.5018)
[16:47:26] [ENEMY] [Enemy9] Hit taken, damage: 1, health: 3/3 -> 2/3
[16:47:26] [ENEMY] [Enemy9] ImpactEffectsManager found, calling spawn_blood_effect
[16:47:26] [INFO] [ImpactEffects] spawn_blood_effect called at (2100, 1550), dir=(0.991051, 0.133482), lethal=false
[16:47:26] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:47:26] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:47:26] [INFO] [ImpactEffects] Blood effect spawned at (2100, 1550) (scale=1)
[16:47:26] [ENEMY] [Enemy10] Ragdoll activated
[16:47:26] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[16:47:26] [INFO] [BloodDecal] Blood puddle created at (2168.267, 1541.344) (added to group)
[16:47:27] [INFO] [BloodDecal] Blood puddle created at (2227.958, 1580.308) (added to group)
[16:47:27] [INFO] [BloodDecal] Blood puddle created at (2210.691, 1577.768) (added to group)
[16:47:27] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:47:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:27] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:47:27] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:47:27] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:47:27] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:47:27] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:47:27] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:47:27] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:47:27] [ENEMY] [Enemy1] Death animation component initialized
[16:47:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:27] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:47:27] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:47:27] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:47:27] [ENEMY] [Enemy2] Death animation component initialized
[16:47:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:27] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:47:27] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:47:27] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:47:27] [ENEMY] [Enemy3] Death animation component initialized
[16:47:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:27] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:47:27] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:47:27] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:47:27] [ENEMY] [Enemy4] Death animation component initialized
[16:47:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:27] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:47:27] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:47:27] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:47:27] [ENEMY] [Enemy5] Death animation component initialized
[16:47:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:27] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:47:27] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:47:27] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:47:27] [ENEMY] [Enemy6] Death animation component initialized
[16:47:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:27] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:47:27] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:47:27] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:47:27] [ENEMY] [Enemy7] Death animation component initialized
[16:47:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:27] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:47:27] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:47:27] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:47:27] [INFO] [EnemyGrenade] Initialized: 1 grenades
[16:47:27] [ENEMY] [Enemy8] Death animation component initialized
[16:47:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:27] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:47:27] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:47:27] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:47:27] [ENEMY] [Enemy9] Death animation component initialized
[16:47:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:27] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:47:27] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:47:27] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:47:27] [ENEMY] [Enemy10] Death animation component initialized
[16:47:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:27] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:47:27] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:47:27] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:47:27] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[16:47:27] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:47:27] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:47:27] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:47:27] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:47:27] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:47:27] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:47:27] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:47:27] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[16:47:27] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:47:27] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:47:27] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:47:27] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:47:27] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:47:27] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:47:27] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:47:27] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:47:27] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:47:27] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:47:27] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:47:27] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:47:27] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:47:27] [INFO] [ScoreManager] Level started with 10 enemies
[16:47:27] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:47:27] [INFO] [CinemaEffects] Found player node: Player
[16:47:27] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:47:27] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[16:47:27] [ENEMY] [Enemy1] Registered as sound listener
[16:47:27] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[16:47:27] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:47:27] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[16:47:27] [ENEMY] [Enemy2] Registered as sound listener
[16:47:27] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[16:47:27] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:47:27] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[16:47:27] [ENEMY] [Enemy3] Registered as sound listener
[16:47:27] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[16:47:27] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:47:27] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[16:47:27] [ENEMY] [Enemy4] Registered as sound listener
[16:47:27] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[16:47:27] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:47:27] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[16:47:27] [ENEMY] [Enemy5] Registered as sound listener
[16:47:27] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[16:47:27] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:47:27] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[16:47:27] [ENEMY] [Enemy6] Registered as sound listener
[16:47:27] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[16:47:27] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:47:27] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[16:47:27] [ENEMY] [Enemy7] Registered as sound listener
[16:47:27] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[16:47:27] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:47:27] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[16:47:27] [ENEMY] [Enemy8] Registered as sound listener
[16:47:27] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[16:47:27] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:47:27] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[16:47:27] [ENEMY] [Enemy9] Registered as sound listener
[16:47:27] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[16:47:27] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:47:27] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[16:47:27] [ENEMY] [Enemy10] Registered as sound listener
[16:47:27] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[16:47:27] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:47:27] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:27] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:27] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:27] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:27] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:27] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:27] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=213.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:27] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:27] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:47:27] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:47:27] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:47:27] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:47:27] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:47:27] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:47:27] [INFO] [LastChance] Found player: Player
[16:47:27] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:47:27] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:47:27] [INFO] [LastChance] Connected to player Died signal (C#)
[16:47:27] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:47:27] [INFO] [BloodDecal] Blood puddle created at (2219.432, 1548.269) (added to group)
[16:47:27] [INFO] [BloodDecal] Blood puddle created at (2260.027, 1599.774) (added to group)
[16:47:27] [INFO] [BloodDecal] Blood puddle created at (2198.522, 1635.706) (added to group)
[16:47:27] [INFO] [BloodDecal] Blood puddle created at (2211.336, 1692.503) (added to group)
[16:47:27] [INFO] [BloodDecal] Blood puddle created at (2247.12, 1726.973) (added to group)
[16:47:27] [INFO] [BloodDecal] Blood puddle created at (2256.791, 1655.132) (added to group)
[16:47:27] [INFO] [BloodDecal] Blood puddle created at (2284.2, 1769.409) (added to group)
[16:47:27] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:47:27] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:47:27] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:47:27] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:47:27] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (861.0176, 1377.5696)
[16:47:27] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[16:47:27] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Frag)
[16:47:27] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:47:27] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[16:47:27] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:47:27] [INFO] [Player.Grenade] Step 1 complete! Drag: (114.078064, -39.40625)
[16:47:27] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:47:27] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:47:28] [INFO] [Player.Grenade.Simple] Throwing! Target: (738.98236, 1223.9518), Distance: 267,0, Speed: 400,2, Friction: 300,0
[16:47:28] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,08989481
[16:47:28] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:47:28] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(0.99596214, -0.08977378), speed=400,2, spawn=(509.75772, 1244.6135)
[16:47:28] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:47:28] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:47:28] [INFO] [Player.Grenade] State reset to IDLE
[16:47:28] [INFO] [Player.Grenade] State reset to IDLE
[16:47:28] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:47:28] [INFO] [Player.Grenade] Player rotation restored to 0
[16:47:28] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:47:28] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:47:28] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:47:28] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1250), corner_timer=0.30
[16:47:28] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1250), corner_timer=0.30
[16:47:29] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,1250), corner_timer=-0.02
[16:47:29] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:47:29] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,1250), corner_timer=-0.02
[16:47:29] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:47:29] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,1250), corner_timer=0.30
[16:47:29] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,1250), corner_timer=0.30
[16:47:29] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,1250), corner_timer=-0.02
[16:47:29] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[16:47:29] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,1250), corner_timer=0.30
[16:47:29] [INFO] [GrenadeTimer] Frag grenade landed - EXPLODING!
[16:47:29] [INFO] [GrenadeTimer] EXPLODED at (762.50964, 1221.8312)!
[16:47:29] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[16:47:29] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[16:47:29] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(762.5096, 1221.831), source=NEUTRAL (FragGrenade), range=2938, listeners=19
[16:47:29] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[16:47:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=8
[16:47:29] [INFO] [GrenadeTimer] Spawned C# explosion effect at (762.50964, 1221.8312)
[16:47:29] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,1250), corner_timer=-0.02
[16:47:29] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[16:47:29] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,1250), corner_timer=0.30
[16:47:29] [ENEMY] [Enemy1] Hit taken, damage: 1, health: 2/2 -> 1/2
[16:47:29] [ENEMY] [Enemy1] ImpactEffectsManager found, calling spawn_blood_effect
[16:47:29] [INFO] [ImpactEffects] spawn_blood_effect called at (300, 350), dir=(-0.338066, 0.941123), lethal=false
[16:47:29] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:47:29] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:47:29] [INFO] [ImpactEffects] Wall found for blood splatter at (272.6996, 426) (dist=80 px)
[16:47:29] [INFO] [BloodDecal] Blood puddle created at (272.6996, 425) (added to group)
[16:47:29] [INFO] [ImpactEffects] Blood effect spawned at (300, 350) (scale=1)
[16:47:29] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:47:29] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:29] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:47:29] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:47:29] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:47:29] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:47:29] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:47:29] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:47:29] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:47:30] [ENEMY] [Enemy1] Death animation component initialized
[16:47:30] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:30] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:47:30] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:47:30] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:47:30] [ENEMY] [Enemy2] Death animation component initialized
[16:47:30] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:30] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:47:30] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:47:30] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:47:30] [ENEMY] [Enemy3] Death animation component initialized
[16:47:30] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:30] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:47:30] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:47:30] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:47:30] [ENEMY] [Enemy4] Death animation component initialized
[16:47:30] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:30] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:47:30] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:47:30] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:47:30] [ENEMY] [Enemy5] Death animation component initialized
[16:47:30] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:30] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:47:30] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:47:30] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:47:30] [ENEMY] [Enemy6] Death animation component initialized
[16:47:30] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:30] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:47:30] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:47:30] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:47:30] [ENEMY] [Enemy7] Death animation component initialized
[16:47:30] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:30] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:47:30] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:47:30] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:47:30] [ENEMY] [Enemy8] Death animation component initialized
[16:47:30] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:30] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:47:30] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:47:30] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:47:30] [ENEMY] [Enemy9] Death animation component initialized
[16:47:30] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:30] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:47:30] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:47:30] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:47:30] [ENEMY] [Enemy10] Death animation component initialized
[16:47:30] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:30] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:47:30] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:47:30] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:47:30] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[16:47:30] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:47:30] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:47:30] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:47:30] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:47:30] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:47:30] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:47:30] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:47:30] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[16:47:30] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:47:30] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:47:30] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:47:30] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:47:30] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:47:30] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:47:30] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:47:30] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:47:30] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:47:30] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:47:30] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:47:30] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:47:30] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:47:30] [INFO] [ScoreManager] Level started with 10 enemies
[16:47:30] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:47:30] [INFO] [CinemaEffects] Found player node: Player
[16:47:30] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:47:30] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[16:47:30] [ENEMY] [Enemy1] Registered as sound listener
[16:47:30] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[16:47:30] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:47:30] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[16:47:30] [ENEMY] [Enemy2] Registered as sound listener
[16:47:30] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[16:47:30] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:47:30] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[16:47:30] [ENEMY] [Enemy3] Registered as sound listener
[16:47:30] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[16:47:30] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:47:30] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[16:47:30] [ENEMY] [Enemy4] Registered as sound listener
[16:47:30] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[16:47:30] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:47:30] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[16:47:30] [ENEMY] [Enemy5] Registered as sound listener
[16:47:30] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[16:47:30] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:47:30] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[16:47:30] [ENEMY] [Enemy6] Registered as sound listener
[16:47:30] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[16:47:30] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:47:30] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[16:47:30] [ENEMY] [Enemy7] Registered as sound listener
[16:47:30] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[16:47:30] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:47:30] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[16:47:30] [ENEMY] [Enemy8] Registered as sound listener
[16:47:30] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[16:47:30] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:47:30] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[16:47:30] [ENEMY] [Enemy9] Registered as sound listener
[16:47:30] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[16:47:30] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:47:30] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[16:47:30] [ENEMY] [Enemy10] Registered as sound listener
[16:47:30] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[16:47:30] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:47:30] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:30] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:30] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=281.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:30] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:30] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:30] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:30] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:30] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:30] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:47:30] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:47:30] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:47:30] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:47:30] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:47:30] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:47:30] [INFO] [LastChance] Found player: Player
[16:47:30] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:47:30] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:47:30] [INFO] [LastChance] Connected to player Died signal (C#)
[16:47:30] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:47:30] [INFO] [BloodDecal] Blood puddle created at (257.1136, 417.1255) (added to group)
[16:47:30] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:47:30] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:47:30] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:47:30] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:47:30] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (677.8159, 1237.3098)
[16:47:30] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[16:47:30] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Frag)
[16:47:30] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:47:30] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[16:47:30] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:47:30] [INFO] [Player.Grenade] Step 1 complete! Drag: (81.4715, 22.040771)
[16:47:30] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:47:30] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:47:31] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:47:31] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:47:31] [INFO] [Player.Grenade.Simple] Throwing! Target: (748.16205, 1350.8535), Distance: 295,5, Speed: 421,1, Friction: 300,0
[16:47:31] [INFO] [Player.Grenade] Player rotated for throw: 0 -> 0,3261696
[16:47:31] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:47:31] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(0.9472766, 0.32041696), speed=421,1, spawn=(506.8366, 1269.225)
[16:47:31] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:47:31] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:47:31] [INFO] [Player.Grenade] State reset to IDLE
[16:47:31] [INFO] [Player.Grenade] State reset to IDLE
[16:47:31] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:47:31] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1250), corner_timer=0.30
[16:47:31] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1250), corner_timer=0.30
[16:47:31] [INFO] [Player.Grenade] Player rotation restored to 0
[16:47:31] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:47:31] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,1250), corner_timer=-0.02
[16:47:31] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:47:31] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,1250), corner_timer=-0.02
[16:47:31] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:47:31] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,1250), corner_timer=0.30
[16:47:31] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,1250), corner_timer=0.30
[16:47:32] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,1250), corner_timer=-0.02
[16:47:32] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[16:47:32] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,1250), corner_timer=0.30
[16:47:32] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,1250), corner_timer=-0.02
[16:47:32] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[16:47:32] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,1250), corner_timer=0.30
[16:47:32] [INFO] [GrenadeTimer] Frag grenade landed - EXPLODING!
[16:47:32] [INFO] [GrenadeTimer] EXPLODED at (772.4253, 1359.0608)!
[16:47:32] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[16:47:32] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[16:47:32] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(772.4253, 1359.061), source=NEUTRAL (FragGrenade), range=2938, listeners=20
[16:47:32] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[16:47:32] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=8
[16:47:32] [INFO] [GrenadeTimer] Spawned C# explosion effect at (772.4253, 1359.0608)
[16:47:32] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(450,1250), corner_timer=-0.02
[16:47:32] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[16:47:32] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(450,1250), corner_timer=0.30
[16:47:33] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(450,1250), corner_timer=-0.02
[16:47:33] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[16:47:33] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(450,1250), corner_timer=0.30
[16:47:33] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:47:33] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:33] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:47:33] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:47:33] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:47:33] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:47:33] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:47:33] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:47:33] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:47:33] [ENEMY] [Enemy1] Death animation component initialized
[16:47:33] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:33] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:47:33] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:47:33] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:47:33] [ENEMY] [Enemy2] Death animation component initialized
[16:47:33] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:33] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:47:33] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:47:33] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:47:33] [ENEMY] [Enemy3] Death animation component initialized
[16:47:33] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:33] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:47:33] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:47:33] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:47:33] [INFO] [EnemyGrenade] Initialized: 1 grenades
[16:47:33] [ENEMY] [Enemy4] Death animation component initialized
[16:47:33] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:33] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:47:33] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:47:33] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:47:33] [ENEMY] [Enemy5] Death animation component initialized
[16:47:33] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:33] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:47:33] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:47:33] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:47:33] [ENEMY] [Enemy6] Death animation component initialized
[16:47:33] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:33] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:47:33] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:47:33] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:47:33] [ENEMY] [Enemy7] Death animation component initialized
[16:47:33] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:33] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:47:33] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:47:33] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:47:33] [ENEMY] [Enemy8] Death animation component initialized
[16:47:33] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:33] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:47:33] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:47:33] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:47:33] [ENEMY] [Enemy9] Death animation component initialized
[16:47:33] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:33] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:47:33] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:47:33] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:47:33] [ENEMY] [Enemy10] Death animation component initialized
[16:47:33] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:33] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:47:33] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:47:33] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:47:33] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[16:47:33] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:47:33] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:47:33] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:47:33] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:47:33] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:47:33] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:47:33] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:47:33] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[16:47:33] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:47:33] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:47:33] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:47:33] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:47:33] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:47:33] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:47:33] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:47:33] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:47:33] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:47:33] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:47:33] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:47:33] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:47:33] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:47:33] [INFO] [ScoreManager] Level started with 10 enemies
[16:47:33] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:47:33] [INFO] [CinemaEffects] Found player node: Player
[16:47:33] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:47:33] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[16:47:33] [ENEMY] [Enemy1] Registered as sound listener
[16:47:33] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[16:47:33] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:47:33] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[16:47:33] [ENEMY] [Enemy2] Registered as sound listener
[16:47:33] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[16:47:33] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:47:33] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[16:47:33] [ENEMY] [Enemy3] Registered as sound listener
[16:47:33] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[16:47:33] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:47:33] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[16:47:33] [ENEMY] [Enemy4] Registered as sound listener
[16:47:33] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[16:47:33] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:47:33] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[16:47:33] [ENEMY] [Enemy5] Registered as sound listener
[16:47:33] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[16:47:33] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:47:33] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[16:47:33] [ENEMY] [Enemy6] Registered as sound listener
[16:47:33] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[16:47:33] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:47:33] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[16:47:33] [ENEMY] [Enemy7] Registered as sound listener
[16:47:33] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[16:47:33] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:47:33] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[16:47:33] [ENEMY] [Enemy8] Registered as sound listener
[16:47:33] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[16:47:33] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:47:33] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[16:47:33] [ENEMY] [Enemy9] Registered as sound listener
[16:47:33] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[16:47:33] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:47:33] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[16:47:33] [ENEMY] [Enemy10] Registered as sound listener
[16:47:33] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[16:47:33] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:47:33] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:33] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:33] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=281.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:33] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:33] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:33] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:33] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=157.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:33] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:33] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:47:33] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:47:33] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:47:33] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:47:33] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:47:33] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:47:33] [INFO] [LastChance] Found player: Player
[16:47:33] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:47:33] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:47:33] [INFO] [LastChance] Connected to player Died signal (C#)
[16:47:33] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:47:33] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:47:33] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:47:33] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:47:33] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:47:33] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (664.77985, 1380.909)
[16:47:33] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[16:47:33] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Frag)
[16:47:33] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:47:33] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[16:47:33] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:47:33] [INFO] [Player.Grenade] Step 1 complete! Drag: (131.38672, 18.701294)
[16:47:33] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:47:33] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:47:34] [INFO] [Player.Grenade.Simple] Throwing! Target: (766.75085, 1376.9016), Distance: 326,2, Speed: 442,4, Friction: 300,0
[16:47:34] [INFO] [Player.Grenade] Player rotated for throw: 0 -> 0,38105404
[16:47:34] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:47:34] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(0.9282732, 0.37189913), speed=442,4, spawn=(505.69638, 1272.314)
[16:47:34] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:47:34] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:47:34] [INFO] [Player.Grenade] State reset to IDLE
[16:47:34] [INFO] [Player.Grenade] State reset to IDLE
[16:47:34] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:47:34] [INFO] [Player.Grenade] Player rotation restored to 0
[16:47:35] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:47:35] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:47:35] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1250), corner_timer=0.30
[16:47:35] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1250), corner_timer=0.30
[16:47:35] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:47:35] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,1250), corner_timer=-0.02
[16:47:35] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:47:35] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,1250), corner_timer=-0.02
[16:47:35] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:47:35] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,1250), corner_timer=0.30
[16:47:35] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,1250), corner_timer=0.30
[16:47:35] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,1250), corner_timer=-0.02
[16:47:35] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[16:47:35] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,1250), corner_timer=0.30
[16:47:36] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,1250), corner_timer=-0.02
[16:47:36] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[16:47:36] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,1250), corner_timer=0.30
[16:47:36] [INFO] [GrenadeTimer] Frag grenade landed - EXPLODING!
[16:47:36] [INFO] [GrenadeTimer] EXPLODED at (792.29364, 1387.135)!
[16:47:36] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[16:47:36] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[16:47:36] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(792.2936, 1387.135), source=NEUTRAL (FragGrenade), range=2938, listeners=20
[16:47:36] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[16:47:36] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=8
[16:47:36] [INFO] [GrenadeTimer] Spawned C# explosion effect at (792.29364, 1387.135)
[16:47:36] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(450,1250), corner_timer=-0.02
[16:47:36] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[16:47:36] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(450,1250), corner_timer=0.30
[16:47:36] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(450,1250), corner_timer=-0.02
[16:47:36] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[16:47:36] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(450,1250), corner_timer=0.30
[16:47:36] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:47:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:36] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:47:36] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:47:36] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:47:36] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:47:36] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:47:36] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:47:36] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:47:36] [INFO] [EnemyGrenade] Initialized: 1 grenades
[16:47:36] [ENEMY] [Enemy1] Death animation component initialized
[16:47:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:36] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:47:36] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:47:36] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:47:36] [ENEMY] [Enemy2] Death animation component initialized
[16:47:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:36] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:47:36] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:47:36] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:47:36] [ENEMY] [Enemy3] Death animation component initialized
[16:47:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:36] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:47:36] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:47:36] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:47:36] [ENEMY] [Enemy4] Death animation component initialized
[16:47:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:36] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:47:36] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:47:36] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:47:36] [ENEMY] [Enemy5] Death animation component initialized
[16:47:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:36] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:47:36] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:47:36] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:47:36] [ENEMY] [Enemy6] Death animation component initialized
[16:47:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:36] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:47:36] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:47:36] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:47:36] [ENEMY] [Enemy7] Death animation component initialized
[16:47:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:36] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:47:36] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:47:36] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:47:37] [ENEMY] [Enemy8] Death animation component initialized
[16:47:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:37] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:47:37] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:47:37] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:47:37] [ENEMY] [Enemy9] Death animation component initialized
[16:47:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:37] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:47:37] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:47:37] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:47:37] [ENEMY] [Enemy10] Death animation component initialized
[16:47:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:37] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:47:37] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:47:37] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:47:37] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[16:47:37] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:47:37] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:47:37] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:47:37] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:47:37] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:47:37] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:47:37] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:47:37] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[16:47:37] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:47:37] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:47:37] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:47:37] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:47:37] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:47:37] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:47:37] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:47:37] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:47:37] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:47:37] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:47:37] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:47:37] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:47:37] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:47:37] [INFO] [ScoreManager] Level started with 10 enemies
[16:47:37] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:47:37] [INFO] [CinemaEffects] Found player node: Player
[16:47:37] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:47:37] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[16:47:37] [ENEMY] [Enemy1] Registered as sound listener
[16:47:37] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[16:47:37] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:47:37] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[16:47:37] [ENEMY] [Enemy2] Registered as sound listener
[16:47:37] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[16:47:37] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:47:37] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[16:47:37] [ENEMY] [Enemy3] Registered as sound listener
[16:47:37] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[16:47:37] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:47:37] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[16:47:37] [ENEMY] [Enemy4] Registered as sound listener
[16:47:37] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[16:47:37] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:47:37] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[16:47:37] [ENEMY] [Enemy5] Registered as sound listener
[16:47:37] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[16:47:37] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:47:37] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[16:47:37] [ENEMY] [Enemy6] Registered as sound listener
[16:47:37] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[16:47:37] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:47:37] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[16:47:37] [ENEMY] [Enemy7] Registered as sound listener
[16:47:37] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[16:47:37] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:47:37] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[16:47:37] [ENEMY] [Enemy8] Registered as sound listener
[16:47:37] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[16:47:37] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:47:37] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[16:47:37] [ENEMY] [Enemy9] Registered as sound listener
[16:47:37] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[16:47:37] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:47:37] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[16:47:37] [ENEMY] [Enemy10] Registered as sound listener
[16:47:37] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[16:47:37] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:47:37] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:37] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:37] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:37] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:37] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:37] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:37] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:37] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:37] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:47:37] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:47:37] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:47:37] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:47:37] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:47:37] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:47:37] [INFO] [LastChance] Found player: Player
[16:47:37] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:47:37] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:47:37] [INFO] [LastChance] Connected to player Died signal (C#)
[16:47:37] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:47:38] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:47:38] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:47:38] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:47:38] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:47:38] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (643.88116, 1440.1372)
[16:47:38] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[16:47:38] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Frag)
[16:47:38] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:47:38] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1484.5555)
[16:47:38] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:47:38] [INFO] [Player.Grenade] Step 1 complete! Drag: (47.469543, 16.776001)
[16:47:38] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:47:38] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:47:38] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1484), corner_timer=0.30
[16:47:38] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1484), corner_timer=0.30
[16:47:38] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:47:38] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:47:38] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,1484), corner_timer=-0.02
[16:47:38] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:47:38] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,1484), corner_timer=-0.02
[16:47:38] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:47:38] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,1484), corner_timer=0.30
[16:47:38] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,1484), corner_timer=0.30
[16:47:39] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(478,1482), corner_timer=-0.02
[16:47:39] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[16:47:39] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(482,1481), corner_timer=0.30
[16:47:39] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(509,1459), corner_timer=-0.02
[16:47:39] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[16:47:39] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(509,1459), corner_timer=0.30
[16:47:39] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(509,1459), corner_timer=-0.02
[16:47:39] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[16:47:39] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(509,1459), corner_timer=0.30
[16:47:40] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(509,1459), corner_timer=-0.02
[16:47:40] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[16:47:40] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(509,1459), corner_timer=0.30
[16:47:40] [INFO] [Player.Grenade.Simple] Throwing! Target: (352.06644, 1332.2318), Distance: 165,6, Speed: 315,2, Friction: 300,0
[16:47:40] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -2,4619608
[16:47:40] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:47:40] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(-0.7778041, -0.6285068), speed=315,2, spawn=(463.0873, 1421.9425)
[16:47:40] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:47:40] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:47:40] [INFO] [Player.Grenade] State reset to IDLE
[16:47:40] [INFO] [Player.Grenade] State reset to IDLE
[16:47:40] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:47:40] [INFO] [Player.Grenade] Player rotation restored to 0
[16:47:40] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:47:40] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:47:40] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(593,1470), corner_timer=-0.02
[16:47:40] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[16:47:40] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(599,1470), corner_timer=0.30
[16:47:40] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:47:41] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(691,1470), corner_timer=-0.02
[16:47:41] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[16:47:41] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(694,1470), corner_timer=0.30
[16:47:41] [INFO] [GrenadeTimer] Frag grenade landed - EXPLODING!
[16:47:41] [INFO] [GrenadeTimer] EXPLODED at (339.98303, 1322.4684)!
[16:47:41] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[16:47:41] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[16:47:41] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(339.983, 1322.468), source=NEUTRAL (FragGrenade), range=2938, listeners=20
[16:47:41] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[16:47:41] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=10
[16:47:41] [INFO] [GrenadeTimer] Wall detected between explosion and player at distance 174px from explosion
[16:47:41] [INFO] [GrenadeTimer] Visual effect blocked by wall - player cannot see explosion at (339.98303, 1322.4684)
[16:47:41] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:47:41] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(706,1470), corner_timer=-0.02
[16:47:41] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[16:47:41] [ENEMY] [Enemy2] Hit taken, damage: 1, health: 3/3 -> 2/3
[16:47:41] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[16:47:41] [INFO] [ImpactEffects] spawn_blood_effect called at (400, 550), dir=(0.059959, -0.998201), lethal=false
[16:47:41] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:47:41] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:47:41] [INFO] [ImpactEffects] Blood effect spawned at (400, 550) (scale=1)
[16:47:41] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(706,1470), corner_timer=0.30
[16:47:41] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:47:41] [INFO] [BloodDecal] Blood puddle created at (407.2479, 479.1137) (added to group)
[16:47:41] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(706,1470), corner_timer=-0.02
[16:47:41] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[16:47:41] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(706,1470), corner_timer=0.30
[16:47:41] [INFO] [BloodDecal] Blood puddle created at (412.0906, 463.7586) (added to group)
[16:47:41] [INFO] [BloodDecal] Blood puddle created at (411.9284, 507.9033) (added to group)
[16:47:41] [INFO] [BloodDecal] Blood puddle created at (452.3866, 473.3582) (added to group)
[16:47:41] [ENEMY] [Enemy7] Hit taken, damage: 1, health: 4/4 -> 3/4
[16:47:41] [ENEMY] [Enemy7] ImpactEffectsManager found, calling spawn_blood_effect
[16:47:41] [INFO] [ImpactEffects] spawn_blood_effect called at (1611.476, 899.1388), dir=(-0.995132, -0.09855), lethal=false
[16:47:41] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:47:41] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:47:41] [INFO] [ImpactEffects] Blood effect spawned at (1611.476, 899.1388) (scale=1)
[16:47:41] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:47:41] [INFO] [BloodDecal] Blood puddle created at (442.3134, 517.3969) (added to group)
[16:47:41] [INFO] [BloodDecal] Blood puddle created at (437.2194, 478.3666) (added to group)
[16:47:41] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:47:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:41] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:47:41] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:47:41] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:47:41] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:47:41] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:47:41] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:47:41] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:47:41] [INFO] [EnemyGrenade] Initialized: 1 grenades
[16:47:41] [ENEMY] [Enemy1] Death animation component initialized
[16:47:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:41] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:47:41] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:47:41] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:47:41] [ENEMY] [Enemy2] Death animation component initialized
[16:47:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:41] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:47:41] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:47:41] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:47:41] [ENEMY] [Enemy3] Death animation component initialized
[16:47:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:41] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:47:41] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:47:41] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:47:41] [ENEMY] [Enemy4] Death animation component initialized
[16:47:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:41] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:47:41] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:47:41] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:47:41] [INFO] [EnemyGrenade] Initialized: 1 grenades
[16:47:41] [ENEMY] [Enemy5] Death animation component initialized
[16:47:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:41] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:47:41] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:47:41] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:47:41] [ENEMY] [Enemy6] Death animation component initialized
[16:47:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:41] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:47:41] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:47:41] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:47:41] [ENEMY] [Enemy7] Death animation component initialized
[16:47:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:41] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:47:41] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:47:41] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:47:41] [ENEMY] [Enemy8] Death animation component initialized
[16:47:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:41] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:47:41] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:47:41] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:47:41] [ENEMY] [Enemy9] Death animation component initialized
[16:47:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:41] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:47:41] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:47:41] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:47:41] [INFO] [EnemyGrenade] Initialized: 1 grenades
[16:47:41] [ENEMY] [Enemy10] Death animation component initialized
[16:47:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:41] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:47:41] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:47:41] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:47:41] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[16:47:41] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:47:41] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:47:41] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:47:41] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:47:41] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:47:41] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:47:41] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:47:41] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[16:47:41] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:47:41] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:47:41] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:47:41] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:47:41] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:47:41] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:47:41] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:47:41] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:47:41] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:47:41] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:47:41] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:47:41] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:47:41] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:47:41] [INFO] [ScoreManager] Level started with 10 enemies
[16:47:41] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:47:41] [INFO] [CinemaEffects] Found player node: Player
[16:47:41] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:47:41] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[16:47:41] [ENEMY] [Enemy1] Registered as sound listener
[16:47:41] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[16:47:41] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:47:41] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[16:47:41] [ENEMY] [Enemy2] Registered as sound listener
[16:47:41] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[16:47:41] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:47:41] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[16:47:41] [ENEMY] [Enemy3] Registered as sound listener
[16:47:41] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[16:47:41] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:47:41] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[16:47:41] [ENEMY] [Enemy4] Registered as sound listener
[16:47:41] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[16:47:41] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:47:41] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[16:47:41] [ENEMY] [Enemy5] Registered as sound listener
[16:47:41] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[16:47:41] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:47:41] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[16:47:41] [ENEMY] [Enemy6] Registered as sound listener
[16:47:41] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[16:47:41] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:47:41] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[16:47:41] [ENEMY] [Enemy7] Registered as sound listener
[16:47:41] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[16:47:41] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:47:41] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[16:47:41] [ENEMY] [Enemy8] Registered as sound listener
[16:47:41] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[16:47:41] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:47:41] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[16:47:41] [ENEMY] [Enemy9] Registered as sound listener
[16:47:41] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[16:47:41] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:47:41] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[16:47:41] [ENEMY] [Enemy10] Registered as sound listener
[16:47:41] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[16:47:41] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:47:41] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:41] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:41] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=281.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:41] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:41] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:41] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=225.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:41] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=213.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:41] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:41] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:47:41] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:47:41] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:47:41] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:47:41] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:47:41] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:47:41] [INFO] [LastChance] Found player: Player
[16:47:41] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:47:41] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:47:41] [INFO] [LastChance] Connected to player Died signal (C#)
[16:47:41] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:47:41] [INFO] [BloodDecal] Blood puddle created at (425.3849, 485.4265) (added to group)
[16:47:42] [INFO] [BloodDecal] Blood puddle created at (451.9037, 516.2508) (added to group)
[16:47:42] [INFO] [BloodDecal] Blood puddle created at (420.941, 540.4995) (added to group)
[16:47:42] [INFO] [BloodDecal] Blood puddle created at (391.9113, 477.8764) (added to group)
[16:47:42] [INFO] [BloodDecal] Blood puddle created at (1553.987, 905.4362) (added to group)
[16:47:42] [INFO] [BloodDecal] Blood puddle created at (1541.235, 876.783) (added to group)
[16:47:42] [INFO] [BloodDecal] Blood puddle created at (1554.172, 887.7246) (added to group)
[16:47:42] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:47:42] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:47:42] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:47:42] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:47:42] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (312.38797, 1122.4304)
[16:47:42] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[16:47:42] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Frag)
[16:47:42] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:47:42] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[16:47:42] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:47:42] [INFO] [Player.Grenade] Step 1 complete! Drag: (104.52304, 0.66796875)
[16:47:42] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:47:42] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:47:42] [INFO] [BloodDecal] Blood puddle created at (1451.824, 901.8632) (added to group)
[16:47:43] [INFO] [Player.Grenade.Simple] Throwing! Target: (648.5868, 1388.924), Distance: 223,0, Speed: 365,8, Friction: 300,0
[16:47:43] [INFO] [Player.Grenade] Player rotated for throw: 0 -> 0,5831635
[16:47:43] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:47:43] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(0.8347248, 0.55066735), speed=365,8, spawn=(488.0835, 1283.04)
[16:47:43] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:47:43] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:47:43] [INFO] [Player.Grenade] State reset to IDLE
[16:47:43] [INFO] [Player.Grenade] State reset to IDLE
[16:47:43] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:47:43] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:47:43] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:47:43] [INFO] [Player.Grenade] Player rotation restored to 0
[16:47:43] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(419,1250), corner_timer=0.30
[16:47:43] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(419,1250), corner_timer=0.30
[16:47:43] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:47:43] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(319,1256), corner_timer=-0.02
[16:47:43] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:47:43] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(319,1256), corner_timer=-0.02
[16:47:43] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:47:43] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(314,1258), corner_timer=0.30
[16:47:43] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(314,1258), corner_timer=0.30
[16:47:44] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(267,1291), corner_timer=-0.02
[16:47:44] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[16:47:44] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(267,1291), corner_timer=0.30
[16:47:44] [INFO] [GrenadeTimer] Frag grenade landed - EXPLODING!
[16:47:44] [INFO] [GrenadeTimer] EXPLODED at (645.0055, 1380.3)!
[16:47:44] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[16:47:44] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[16:47:44] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(645.0055, 1380.3), source=NEUTRAL (FragGrenade), range=2938, listeners=20
[16:47:44] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[16:47:44] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=10
[16:47:44] [INFO] [GrenadeTimer] Spawned C# explosion effect at (645.0055, 1380.3)
[16:47:44] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(267,1292), corner_timer=-0.02
[16:47:44] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[16:47:44] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(267,1292), corner_timer=0.30
[16:47:44] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(267,1292), corner_timer=-0.02
[16:47:44] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[16:47:44] [ENEMY] [Enemy5] Hit taken, damage: 1, health: 3/3 -> 2/3
[16:47:44] [ENEMY] [Enemy5] ImpactEffectsManager found, calling spawn_blood_effect
[16:47:44] [INFO] [ImpactEffects] spawn_blood_effect called at (1700, 350), dir=(-0.870644, -0.491914), lethal=false
[16:47:44] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:47:44] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:47:44] [INFO] [ImpactEffects] Wall found for blood splatter at (1653.982, 324) (dist=52 px)
[16:47:44] [INFO] [BloodDecal] Blood puddle created at (1653.982, 325) (added to group)
[16:47:44] [INFO] [ImpactEffects] Blood effect spawned at (1700, 350) (scale=1)
[16:47:44] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(267,1292), corner_timer=0.30
[16:47:45] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:47:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:45] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:47:45] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:47:45] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:47:45] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:47:45] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:47:45] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:47:45] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:47:45] [ENEMY] [Enemy1] Death animation component initialized
[16:47:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:45] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:47:45] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:47:45] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:47:45] [INFO] [EnemyGrenade] Initialized: 1 grenades
[16:47:45] [ENEMY] [Enemy2] Death animation component initialized
[16:47:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:45] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:47:45] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:47:45] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:47:45] [ENEMY] [Enemy3] Death animation component initialized
[16:47:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:45] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:47:45] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:47:45] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:47:45] [ENEMY] [Enemy4] Death animation component initialized
[16:47:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:45] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:47:45] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:47:45] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:47:45] [ENEMY] [Enemy5] Death animation component initialized
[16:47:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:45] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:47:45] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:47:45] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:47:45] [ENEMY] [Enemy6] Death animation component initialized
[16:47:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:45] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:47:45] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:47:45] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:47:45] [ENEMY] [Enemy7] Death animation component initialized
[16:47:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:45] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:47:45] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:47:45] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:47:45] [ENEMY] [Enemy8] Death animation component initialized
[16:47:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:45] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:47:45] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:47:45] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:47:45] [ENEMY] [Enemy9] Death animation component initialized
[16:47:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:45] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:47:45] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:47:45] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:47:45] [ENEMY] [Enemy10] Death animation component initialized
[16:47:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:45] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:47:45] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:47:45] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:47:45] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[16:47:45] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:47:45] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:47:45] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:47:45] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:47:45] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:47:45] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:47:45] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:47:45] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[16:47:45] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:47:45] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:47:45] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:47:45] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:47:45] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:47:45] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:47:45] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:47:45] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:47:45] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:47:45] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:47:45] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:47:45] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:47:45] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:47:45] [INFO] [ScoreManager] Level started with 10 enemies
[16:47:45] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:47:45] [INFO] [CinemaEffects] Found player node: Player
[16:47:45] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:47:45] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[16:47:45] [ENEMY] [Enemy1] Registered as sound listener
[16:47:45] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[16:47:45] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:47:45] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[16:47:45] [ENEMY] [Enemy2] Registered as sound listener
[16:47:45] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[16:47:45] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:47:45] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[16:47:45] [ENEMY] [Enemy3] Registered as sound listener
[16:47:45] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[16:47:45] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:47:45] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[16:47:45] [ENEMY] [Enemy4] Registered as sound listener
[16:47:45] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[16:47:45] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:47:45] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[16:47:45] [ENEMY] [Enemy5] Registered as sound listener
[16:47:45] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[16:47:45] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:47:45] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[16:47:45] [ENEMY] [Enemy6] Registered as sound listener
[16:47:45] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[16:47:45] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:47:45] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[16:47:45] [ENEMY] [Enemy7] Registered as sound listener
[16:47:45] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[16:47:45] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:47:45] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[16:47:45] [ENEMY] [Enemy8] Registered as sound listener
[16:47:45] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[16:47:45] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:47:45] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[16:47:45] [ENEMY] [Enemy9] Registered as sound listener
[16:47:45] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[16:47:45] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:47:45] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[16:47:45] [ENEMY] [Enemy10] Registered as sound listener
[16:47:45] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[16:47:45] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:47:45] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:45] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:45] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:45] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:45] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:45] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:45] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=78.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:45] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:45] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:47:45] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:47:45] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:47:45] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:47:45] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:47:45] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:47:45] [INFO] [LastChance] Found player: Player
[16:47:45] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:47:45] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:47:45] [INFO] [LastChance] Connected to player Died signal (C#)
[16:47:45] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:47:45] [INFO] [BloodDecal] Blood puddle created at (1656.094, 343.3606) (added to group)
[16:47:45] [INFO] [BloodDecal] Blood puddle created at (1596.547, 371.398) (added to group)
[16:47:45] [INFO] [BloodDecal] Blood puddle created at (1600.041, 375.6032) (added to group)
[16:47:45] [INFO] [BloodDecal] Blood puddle created at (1597.593, 324.8526) (added to group)
[16:47:45] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:47:45] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:47:45] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:47:45] [INFO] [BloodDecal] Blood puddle created at (1588.918, 387.7) (added to group)
[16:47:45] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:47:45] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (591.2934, 1384.2487)
[16:47:45] [INFO] [BloodDecal] Blood puddle created at (1549.121, 412.0239) (added to group)
[16:47:45] [INFO] [BloodDecal] Blood puddle created at (1539.384, 347.3702) (added to group)
[16:47:45] [INFO] [BloodDecal] Blood puddle created at (1629.166, 341.6224) (added to group)
[16:47:45] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[16:47:45] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Frag)
[16:47:45] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:47:45] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[16:47:45] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:47:45] [INFO] [Player.Grenade] Step 1 complete! Drag: (49.279602, 10.686401)
[16:47:45] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:47:45] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:47:46] [INFO] [Player.Grenade.Simple] Throwing! Target: (642.20306, 1495.7886), Distance: 293,1, Speed: 419,3, Friction: 300,0
[16:47:46] [INFO] [Player.Grenade] Player rotated for throw: 0 -> 0,90461713
[16:47:46] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:47:46] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(0.6179866, 0.7861886), speed=419,3, spawn=(486.0792, 1297.1713)
[16:47:46] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:47:46] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:47:46] [INFO] [Player.Grenade] State reset to IDLE
[16:47:46] [INFO] [Player.Grenade] State reset to IDLE
[16:47:46] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:47:46] [INFO] [Player.Grenade] Player rotation restored to 0
[16:47:46] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:47:46] [INFO] [GrenadeTimer] Frag grenade landed - EXPLODING!
[16:47:46] [INFO] [GrenadeTimer] EXPLODED at (554.4807, 1380.3615)!
[16:47:46] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[16:47:46] [INFO] [Player] Spawning blood effect at (371.66666, 1250), dir=(-0.8141967, -0.5805892), lethal=False (C#)
[16:47:46] [INFO] [ImpactEffects] spawn_blood_effect called at (371.6667, 1250), dir=(-0.814197, -0.580589), lethal=false
[16:47:46] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:47:46] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:47:46] [INFO] [ImpactEffects] Blood effect spawned at (371.6667, 1250) (scale=1)
[16:47:46] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[16:47:46] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[16:47:46] [INFO] [PenultimateHit] Starting penultimate hit effect:
[16:47:46] [INFO] [PenultimateHit]   - Time scale: 0.10
[16:47:46] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[16:47:46] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[16:47:46] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[16:47:46] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[16:47:46] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[16:47:46] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[16:47:46] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[16:47:46] [INFO] [Player] Spawning blood effect at (371.66666, 1250), dir=(-0.8141967, -0.5805892), lethal=True (C#)
[16:47:46] [INFO] [ImpactEffects] spawn_blood_effect called at (371.6667, 1250), dir=(-0.814197, -0.580589), lethal=true
[16:47:46] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:47:46] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[16:47:46] [INFO] [ImpactEffects] Blood effect spawned at (371.6667, 1250) (scale=1.5)
[16:47:46] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[16:47:46] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[16:47:46] [INFO] [CinemaEffects] Player died - triggering death effects
[16:47:46] [INFO] [CinemaEffects] Death effects triggered - starting cigarette burn, expanding spots, and end of reel (top-right)
[16:47:46] [INFO] [PenultimateHit] Player died - ending penultimate effect
[16:47:46] [INFO] [PenultimateHit] Ending penultimate hit effect
[16:47:46] [INFO] [PenultimateHit] Starting visual effects fade-out over 400ms
[16:47:46] [INFO] [LastChance] Player died
[16:47:46] [INFO] [GrenadeTimer] Damaged player at distance 224,5
[16:47:46] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[16:47:46] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(554.4807, 1380.361), source=NEUTRAL (FragGrenade), range=2938, listeners=20
[16:47:46] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[16:47:46] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=10
[16:47:46] [INFO] [GrenadeTimer] Spawned C# explosion effect at (554.4807, 1380.3615)
[16:47:46] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:47:46] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:47:46] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(355,1250), corner_timer=0.30
[16:47:46] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(355,1250), corner_timer=0.30
[16:47:46] [ENEMY] [Enemy2] Hit taken, damage: 1, health: 4/4 -> 3/4
[16:47:46] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[16:47:46] [INFO] [ImpactEffects] spawn_blood_effect called at (400, 550), dir=(-0.2046, -0.978846), lethal=false
[16:47:46] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:47:46] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:47:46] [INFO] [ImpactEffects] Blood effect spawned at (400, 550) (scale=1)
[16:47:46] [INFO] [BloodDecal] Blood puddle created at (325.4994, 1228.193) (added to group)
[16:47:46] [INFO] [BloodDecal] Blood puddle created at (309.4211, 1235.092) (added to group)
[16:47:46] [INFO] [BloodDecal] Blood puddle created at (321.3276, 1233.009) (added to group)
[16:47:46] [INFO] [BloodDecal] Blood puddle created at (308.9087, 1252.661) (added to group)
[16:47:46] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[16:47:46] [INFO] [BloodDecal] Blood puddle created at (289.9375, 1210.883) (added to group)
[16:47:46] [INFO] [BloodDecal] Blood puddle created at (274.5773, 1222.349) (added to group)
[16:47:46] [INFO] [BloodDecal] Blood puddle created at (318.7213, 1266.59) (added to group)
[16:47:46] [INFO] [BloodDecal] Blood puddle created at (295.9622, 1196.951) (added to group)
[16:47:46] [INFO] [BloodDecal] Blood puddle created at (252.6681, 1258.116) (added to group)
[16:47:46] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(258,1250), corner_timer=-0.02
[16:47:46] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:47:46] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(258,1250), corner_timer=-0.02
[16:47:46] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:47:46] [INFO] [BloodDecal] Blood puddle created at (290.6874, 1204.166) (added to group)
[16:47:46] [INFO] [BloodDecal] Blood puddle created at (305.36, 1202.719) (added to group)
[16:47:46] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(255,1250), corner_timer=0.30
[16:47:46] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(255,1250), corner_timer=0.30
[16:47:46] [INFO] [PenultimateHit] Visual effects fade-out complete
[16:47:46] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[16:47:46] [INFO] [PenultimateHit] Called player RefreshHealthVisual (C#)
[16:47:46] [INFO] [BloodDecal] Blood puddle created at (246.6169, 1254.041) (added to group)
[16:47:46] [INFO] [BloodDecal] Blood puddle created at (253.2725, 1263.538) (added to group)
[16:47:46] [INFO] [BloodDecal] Blood puddle created at (267.8405, 1209.126) (added to group)
[16:47:46] [INFO] [BloodDecal] Blood puddle created at (261.6241, 1226.136) (added to group)
[16:47:46] [INFO] [BloodDecal] Blood puddle created at (261.8747, 1230.025) (added to group)
[16:47:47] [INFO] [BloodDecal] Blood puddle created at (401.6877, 511.614) (added to group)
[16:47:47] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:47:47] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:47] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:47:47] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:47:47] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:47:47] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:47:47] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:47:47] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:47:47] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:47:47] [INFO] [CinemaEffects] Death effects reset
[16:47:47] [ENEMY] [Enemy1] Death animation component initialized
[16:47:47] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:47] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:47:47] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:47:47] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:47:47] [ENEMY] [Enemy2] Death animation component initialized
[16:47:47] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:47] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:47:47] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:47:47] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:47:47] [ENEMY] [Enemy3] Death animation component initialized
[16:47:47] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:47] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:47:47] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:47:47] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:47:47] [INFO] [EnemyGrenade] Initialized: 1 grenades
[16:47:47] [ENEMY] [Enemy4] Death animation component initialized
[16:47:47] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:47] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:47:47] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:47:47] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:47:47] [ENEMY] [Enemy5] Death animation component initialized
[16:47:47] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:47] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:47:47] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:47:47] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:47:47] [ENEMY] [Enemy6] Death animation component initialized
[16:47:47] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:47] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:47:47] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:47:47] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:47:47] [ENEMY] [Enemy7] Death animation component initialized
[16:47:47] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:47] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:47:47] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:47:47] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:47:47] [ENEMY] [Enemy8] Death animation component initialized
[16:47:47] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:47] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:47:47] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:47:47] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:47:47] [ENEMY] [Enemy9] Death animation component initialized
[16:47:47] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:47] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:47:47] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:47:47] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:47:47] [ENEMY] [Enemy10] Death animation component initialized
[16:47:47] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:47] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:47:47] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:47:47] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:47:47] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[16:47:47] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:47:47] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:47:47] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:47:47] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:47:47] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:47:47] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:47:47] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:47:47] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[16:47:47] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:47:47] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:47:47] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:47:47] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:47:47] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:47:47] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:47:47] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:47:47] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:47:47] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:47:47] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:47:47] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:47:47] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:47:47] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:47:47] [INFO] [ScoreManager] Level started with 10 enemies
[16:47:47] [INFO] [BloodDecal] Blood puddle created at (241.9039, 1195.532) (added to group)
[16:47:47] [INFO] [BloodDecal] Blood puddle created at (389.1708, 512.7827) (added to group)
[16:47:47] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:47:47] [INFO] [CinemaEffects] Found player node: Player
[16:47:47] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:47:47] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[16:47:47] [ENEMY] [Enemy1] Registered as sound listener
[16:47:47] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[16:47:47] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:47:47] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[16:47:47] [ENEMY] [Enemy2] Registered as sound listener
[16:47:47] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[16:47:47] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:47:47] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[16:47:47] [ENEMY] [Enemy3] Registered as sound listener
[16:47:47] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[16:47:47] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:47:47] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[16:47:47] [ENEMY] [Enemy4] Registered as sound listener
[16:47:47] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[16:47:47] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:47:47] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[16:47:47] [ENEMY] [Enemy5] Registered as sound listener
[16:47:47] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[16:47:47] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:47:47] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[16:47:47] [ENEMY] [Enemy6] Registered as sound listener
[16:47:47] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[16:47:47] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:47:47] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[16:47:47] [ENEMY] [Enemy7] Registered as sound listener
[16:47:47] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[16:47:47] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:47:47] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[16:47:47] [ENEMY] [Enemy8] Registered as sound listener
[16:47:47] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[16:47:47] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:47:47] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[16:47:47] [ENEMY] [Enemy9] Registered as sound listener
[16:47:47] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[16:47:47] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:47:47] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[16:47:47] [ENEMY] [Enemy10] Registered as sound listener
[16:47:47] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[16:47:47] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:47:47] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:47] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:47] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:47] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:47] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:47] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:47] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:47] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:47] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:47:47] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:47:47] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:47:47] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:47:47] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:47:47] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:47:47] [INFO] [LastChance] Found player: Player
[16:47:47] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:47:47] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:47:47] [INFO] [LastChance] Connected to player Died signal (C#)
[16:47:47] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:47:47] [INFO] [BloodDecal] Blood puddle created at (273.664, 1227.706) (added to group)
[16:47:47] [INFO] [BloodDecal] Blood puddle created at (263.2189, 1292.403) (added to group)
[16:47:47] [INFO] [BloodDecal] Blood puddle created at (239.586, 1294.616) (added to group)
[16:47:47] [INFO] [BloodDecal] Blood puddle created at (272.451, 1161.281) (added to group)
[16:47:47] [INFO] [BloodDecal] Blood puddle created at (240.3921, 1254.04) (added to group)
[16:47:47] [INFO] [BloodDecal] Blood puddle created at (273.4311, 1255.385) (added to group)
[16:47:47] [INFO] [BloodDecal] Blood puddle created at (394.0291, 501.7631) (added to group)
[16:47:47] [INFO] [BloodDecal] Blood puddle created at (318.2908, 1238.2) (added to group)
[16:47:47] [INFO] [BloodDecal] Blood puddle created at (183.5003, 1304.902) (added to group)
[16:47:47] [INFO] [BloodDecal] Blood puddle created at (315.7832, 1243.328) (added to group)
[16:47:47] [INFO] [BloodDecal] Blood puddle created at (211.8656, 1275.991) (added to group)
[16:47:47] [INFO] [BloodDecal] Blood puddle created at (183.0058, 1262.034) (added to group)
[16:47:47] [INFO] [BloodDecal] Blood puddle created at (276.9158, 1294.441) (added to group)
[16:47:47] [INFO] [BloodDecal] Blood puddle created at (314.8161, 1260.064) (added to group)
[16:47:47] [INFO] [BloodDecal] Blood puddle created at (350.0483, 520.3158) (added to group)
[16:47:47] [INFO] [BloodDecal] Blood puddle created at (365.4838, 515.088) (added to group)
[16:47:47] [INFO] [BloodDecal] Blood puddle created at (388.5914, 447.4654) (added to group)
[16:47:47] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:47:47] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:47:47] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:47:47] [INFO] [BloodDecal] Blood puddle created at (405.16, 530.5337) (added to group)
[16:47:47] [INFO] [BloodDecal] Blood puddle created at (423.8985, 451.8724) (added to group)
[16:47:47] [INFO] [BloodyFeet:Enemy2] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[16:47:47] [INFO] [BloodDecal] Blood puddle created at (350.3174, 548.1306) (added to group)
[16:47:47] [INFO] [BloodDecal] Blood puddle created at (259.9913, 488.6771) (added to group)
[16:47:47] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:47:47] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (613.44556, 1320.7979)
[16:47:47] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[16:47:47] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Frag)
[16:47:47] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:47:47] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[16:47:47] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:47:47] [INFO] [Player.Grenade] Step 1 complete! Drag: (453.44226, -2.6716309)
[16:47:48] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:47:48] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:47:48] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:47:48] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:47:48] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1250), corner_timer=0.30
[16:47:48] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1250), corner_timer=0.30
[16:47:48] [INFO] [Player.Grenade.Simple] Throwing! Target: (728.1649, 954.7866), Distance: 400,9, Speed: 490,5, Friction: 300,0
[16:47:48] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,8151228
[16:47:48] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:47:48] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(0.68577904, -0.7278098), speed=490,5, spawn=(491.14673, 1206.3314)
[16:47:48] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:47:48] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:47:48] [INFO] [Player.Grenade] State reset to IDLE
[16:47:48] [INFO] [Player.Grenade] State reset to IDLE
[16:47:48] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:47:48] [INFO] [Player.Grenade] Player rotation restored to 0
[16:47:48] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,1250), corner_timer=-0.02
[16:47:48] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:47:48] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,1250), corner_timer=-0.02
[16:47:48] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:47:48] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,1250), corner_timer=0.30
[16:47:48] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,1250), corner_timer=0.30
[16:47:49] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:47:49] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,1250), corner_timer=-0.02
[16:47:49] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[16:47:49] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,1250), corner_timer=0.30
[16:47:49] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,1250), corner_timer=-0.02
[16:47:49] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[16:47:49] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,1250), corner_timer=0.30
[16:47:49] [INFO] [GrenadeTimer] Frag grenade landed - EXPLODING!
[16:47:49] [INFO] [GrenadeTimer] EXPLODED at (682.6918, 1031.9896)!
[16:47:49] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[16:47:49] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[16:47:49] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(682.6918, 1031.99), source=NEUTRAL (FragGrenade), range=2938, listeners=20
[16:47:49] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[16:47:49] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=8
[16:47:49] [INFO] [GrenadeTimer] Spawned C# explosion effect at (682.6918, 1031.9896)
[16:47:49] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(450,1250), corner_timer=-0.02
[16:47:49] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[16:47:49] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(450,1250), corner_timer=0.30
[16:47:50] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(450,1250), corner_timer=-0.02
[16:47:50] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[16:47:50] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(450,1250), corner_timer=0.30
[16:47:50] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:47:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:50] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:47:50] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:47:50] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:47:50] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:47:50] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:47:50] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:47:50] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:47:50] [ENEMY] [Enemy1] Death animation component initialized
[16:47:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:50] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:47:50] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:47:50] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:47:50] [ENEMY] [Enemy2] Death animation component initialized
[16:47:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:50] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:47:50] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:47:50] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:47:50] [ENEMY] [Enemy3] Death animation component initialized
[16:47:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:50] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:47:50] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:47:50] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:47:50] [ENEMY] [Enemy4] Death animation component initialized
[16:47:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:50] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:47:50] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:47:50] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:47:50] [ENEMY] [Enemy5] Death animation component initialized
[16:47:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:50] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:47:50] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:47:50] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:47:50] [ENEMY] [Enemy6] Death animation component initialized
[16:47:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:50] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:47:50] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:47:50] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:47:50] [ENEMY] [Enemy7] Death animation component initialized
[16:47:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:50] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:47:50] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:47:50] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:47:50] [ENEMY] [Enemy8] Death animation component initialized
[16:47:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:50] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:47:50] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:47:50] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:47:50] [ENEMY] [Enemy9] Death animation component initialized
[16:47:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:50] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:47:50] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:47:50] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:47:50] [ENEMY] [Enemy10] Death animation component initialized
[16:47:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:50] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:47:50] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:47:50] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:47:50] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[16:47:50] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:47:50] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:47:50] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:47:50] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:47:50] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:47:50] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:47:50] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:47:50] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[16:47:50] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:47:50] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:47:50] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:47:50] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:47:50] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:47:50] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:47:50] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:47:50] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:47:50] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:47:50] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:47:50] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:47:50] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:47:50] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:47:50] [INFO] [ScoreManager] Level started with 10 enemies
[16:47:50] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:47:50] [INFO] [CinemaEffects] Found player node: Player
[16:47:50] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:47:50] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[16:47:50] [ENEMY] [Enemy1] Registered as sound listener
[16:47:50] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[16:47:50] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:47:50] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[16:47:50] [ENEMY] [Enemy2] Registered as sound listener
[16:47:50] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[16:47:50] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:47:50] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[16:47:50] [ENEMY] [Enemy3] Registered as sound listener
[16:47:50] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[16:47:50] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:47:50] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[16:47:50] [ENEMY] [Enemy4] Registered as sound listener
[16:47:50] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[16:47:50] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:47:50] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[16:47:50] [ENEMY] [Enemy5] Registered as sound listener
[16:47:50] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[16:47:50] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:47:50] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[16:47:50] [ENEMY] [Enemy6] Registered as sound listener
[16:47:50] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[16:47:50] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:47:50] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[16:47:50] [ENEMY] [Enemy7] Registered as sound listener
[16:47:50] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[16:47:50] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:47:50] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[16:47:50] [ENEMY] [Enemy8] Registered as sound listener
[16:47:50] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[16:47:50] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:47:50] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[16:47:50] [ENEMY] [Enemy9] Registered as sound listener
[16:47:50] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[16:47:50] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:47:50] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[16:47:50] [ENEMY] [Enemy10] Registered as sound listener
[16:47:50] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[16:47:50] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:47:50] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:50] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:50] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=236.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:50] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:50] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:50] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:50] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:50] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:50] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:47:50] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:47:50] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:47:50] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:47:50] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:47:50] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:47:50] [INFO] [LastChance] Found player: Player
[16:47:50] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:47:50] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:47:50] [INFO] [LastChance] Connected to player Died signal (C#)
[16:47:50] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:47:50] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:47:50] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:47:50] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:47:50] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:47:50] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (571.401, 1062.3191)
[16:47:50] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[16:47:50] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Frag)
[16:47:50] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:47:50] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[16:47:50] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:47:50] [INFO] [Player.Grenade] Step 1 complete! Drag: (206.94879, 32.727295)
[16:47:50] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:47:50] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:47:51] [INFO] [Player.Grenade.Simple] Throwing! Target: (824.26135, 890), Distance: 532,8, Speed: 565,4, Friction: 300,0
[16:47:51] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,7659779
[16:47:51] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:47:51] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(0.72070473, -0.6932421), speed=565,4, spawn=(493.24228, 1208.4055)
[16:47:51] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:47:51] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:47:51] [INFO] [Player.Grenade] State reset to IDLE
[16:47:51] [INFO] [Player.Grenade] State reset to IDLE
[16:47:51] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:47:51] [INFO] [Player.Grenade] Player rotation restored to 0
[16:47:51] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:47:52] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:47:52] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:47:52] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1250), corner_timer=0.30
[16:47:52] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1250), corner_timer=0.30
[16:47:52] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,1250), corner_timer=-0.02
[16:47:52] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:47:52] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,1250), corner_timer=-0.02
[16:47:52] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:47:52] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,1250), corner_timer=0.30
[16:47:52] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,1250), corner_timer=0.30
[16:47:52] [INFO] [GrenadeTimer] Frag grenade landed - EXPLODING!
[16:47:52] [INFO] [GrenadeTimer] EXPLODED at (711.8643, 1031.7001)!
[16:47:52] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[16:47:52] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[16:47:52] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(711.8643, 1031.7), source=NEUTRAL (FragGrenade), range=2938, listeners=20
[16:47:52] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[16:47:52] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=8
[16:47:52] [INFO] [GrenadeTimer] Spawned C# explosion effect at (711.8643, 1031.7001)
[16:47:52] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,1250), corner_timer=-0.02
[16:47:52] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[16:47:52] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,1250), corner_timer=0.30
[16:47:52] [ENEMY] [Enemy8] Hit taken, damage: 1, health: 3/3 -> 2/3
[16:47:52] [ENEMY] [Enemy8] ImpactEffectsManager found, calling spawn_blood_effect
[16:47:52] [INFO] [ImpactEffects] spawn_blood_effect called at (1900, 1450), dir=(-0.995848, 0.091034), lethal=false
[16:47:52] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:47:52] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:47:52] [INFO] [ImpactEffects] Blood effect spawned at (1900, 1450) (scale=1)
[16:47:52] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:47:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:52] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:47:52] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:47:52] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:47:52] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:47:52] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:47:52] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:47:52] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:47:53] [ENEMY] [Enemy1] Death animation component initialized
[16:47:53] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:53] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:47:53] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:47:53] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:47:53] [ENEMY] [Enemy2] Death animation component initialized
[16:47:53] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:53] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:47:53] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:47:53] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:47:53] [ENEMY] [Enemy3] Death animation component initialized
[16:47:53] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:53] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:47:53] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:47:53] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:47:53] [ENEMY] [Enemy4] Death animation component initialized
[16:47:53] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:53] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:47:53] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:47:53] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:47:53] [ENEMY] [Enemy5] Death animation component initialized
[16:47:53] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:53] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:47:53] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:47:53] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:47:53] [ENEMY] [Enemy6] Death animation component initialized
[16:47:53] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:53] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:47:53] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:47:53] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:47:53] [INFO] [EnemyGrenade] Initialized: 1 grenades
[16:47:53] [ENEMY] [Enemy7] Death animation component initialized
[16:47:53] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:53] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:47:53] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:47:53] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:47:53] [ENEMY] [Enemy8] Death animation component initialized
[16:47:53] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:53] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:47:53] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:47:53] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:47:53] [ENEMY] [Enemy9] Death animation component initialized
[16:47:53] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:53] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:47:53] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:47:53] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:47:53] [INFO] [EnemyGrenade] Initialized: 1 grenades
[16:47:53] [ENEMY] [Enemy10] Death animation component initialized
[16:47:53] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:53] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:47:53] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:47:53] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:47:53] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[16:47:53] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:47:53] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:47:53] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:47:53] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:47:53] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:47:53] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:47:53] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:47:53] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[16:47:53] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:47:53] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:47:53] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:47:53] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:47:53] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:47:53] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:47:53] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:47:53] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:47:53] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:47:53] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:47:53] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:47:53] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:47:53] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:47:53] [INFO] [ScoreManager] Level started with 10 enemies
[16:47:53] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:47:53] [INFO] [CinemaEffects] Found player node: Player
[16:47:53] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:47:53] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[16:47:53] [ENEMY] [Enemy1] Registered as sound listener
[16:47:53] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[16:47:53] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:47:53] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[16:47:53] [ENEMY] [Enemy2] Registered as sound listener
[16:47:53] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[16:47:53] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:47:53] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[16:47:53] [ENEMY] [Enemy3] Registered as sound listener
[16:47:53] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[16:47:53] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:47:53] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[16:47:53] [ENEMY] [Enemy4] Registered as sound listener
[16:47:53] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[16:47:53] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:47:53] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[16:47:53] [ENEMY] [Enemy5] Registered as sound listener
[16:47:53] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[16:47:53] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:47:53] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[16:47:53] [ENEMY] [Enemy6] Registered as sound listener
[16:47:53] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[16:47:53] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:47:53] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[16:47:53] [ENEMY] [Enemy7] Registered as sound listener
[16:47:53] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[16:47:53] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:47:53] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[16:47:53] [ENEMY] [Enemy8] Registered as sound listener
[16:47:53] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[16:47:53] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:47:53] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[16:47:53] [ENEMY] [Enemy9] Registered as sound listener
[16:47:53] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[16:47:53] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:47:53] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[16:47:53] [ENEMY] [Enemy10] Registered as sound listener
[16:47:53] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[16:47:53] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:47:53] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:53] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:53] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:53] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:53] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:53] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:53] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=78.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:53] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:53] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:47:53] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:47:53] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:47:53] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:47:53] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:47:53] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:47:53] [INFO] [LastChance] Found player: Player
[16:47:53] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:47:53] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:47:53] [INFO] [LastChance] Connected to player Died signal (C#)
[16:47:53] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:47:53] [INFO] [BloodDecal] Blood puddle created at (1838.619, 1478.661) (added to group)
[16:47:53] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:47:53] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:47:53] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:47:53] [INFO] [BloodDecal] Blood puddle created at (1821.553, 1493.946) (added to group)
[16:47:53] [INFO] [BloodDecal] Blood puddle created at (1801.049, 1455.4) (added to group)
[16:47:53] [INFO] [BloodDecal] Blood puddle created at (1797.978, 1439.509) (added to group)
[16:47:53] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:47:53] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (608.739, 1020.90906)
[16:47:53] [INFO] [BloodDecal] Blood puddle created at (1780.356, 1446.632) (added to group)
[16:47:53] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[16:47:53] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Frag)
[16:47:53] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:47:53] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[16:47:53] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:47:53] [INFO] [Player.Grenade] Step 1 complete! Drag: (261.7837, 3.3395996)
[16:47:53] [INFO] [BloodDecal] Blood puddle created at (1814.37, 1484.881) (added to group)
[16:47:53] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:47:53] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:47:53] [INFO] [BloodDecal] Blood puddle created at (1797.537, 1460.744) (added to group)
[16:47:53] [INFO] [BloodDecal] Blood puddle created at (1801.579, 1487.939) (added to group)
[16:47:53] [INFO] [BloodDecal] Blood puddle created at (1787.419, 1584.493) (added to group)
[16:47:53] [INFO] [BloodDecal] Blood puddle created at (1741.488, 1556.349) (added to group)
[16:47:53] [INFO] [Player.Grenade.Simple] Throwing! Target: (877.7108, 890), Distance: 578,9, Speed: 589,4, Friction: 300,0
[16:47:53] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,69965
[16:47:53] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:47:53] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(0.76506764, -0.6439499), speed=589,4, spawn=(495.90405, 1211.363)
[16:47:53] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:47:53] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:47:53] [INFO] [Player.Grenade] State reset to IDLE
[16:47:53] [INFO] [Player.Grenade] State reset to IDLE
[16:47:53] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:47:54] [INFO] [Player.Grenade] Player rotation restored to 0
[16:47:54] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:47:54] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:47:54] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:47:54] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1250), corner_timer=0.30
[16:47:54] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1250), corner_timer=0.30
[16:47:54] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,1250), corner_timer=-0.02
[16:47:54] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:47:54] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,1250), corner_timer=-0.02
[16:47:54] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:47:54] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,1250), corner_timer=0.30
[16:47:54] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,1250), corner_timer=0.30
[16:47:55] [INFO] [GrenadeTimer] Frag grenade landed - EXPLODING!
[16:47:55] [INFO] [GrenadeTimer] EXPLODED at (776.86536, 1031.7)!
[16:47:55] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[16:47:55] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[16:47:55] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(776.8654, 1031.7), source=NEUTRAL (FragGrenade), range=2938, listeners=20
[16:47:55] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[16:47:55] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=8
[16:47:55] [INFO] [GrenadeTimer] Spawned C# explosion effect at (776.86536, 1031.7)
[16:47:55] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,1250), corner_timer=-0.02
[16:47:55] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[16:47:55] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,1250), corner_timer=0.30
[16:47:55] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:47:55] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:55] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:47:55] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:47:55] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:47:55] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:47:55] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:47:55] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:47:55] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:47:55] [ENEMY] [Enemy1] Death animation component initialized
[16:47:55] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:55] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:47:55] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:47:55] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:47:55] [ENEMY] [Enemy2] Death animation component initialized
[16:47:55] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:55] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:47:55] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:47:55] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:47:55] [ENEMY] [Enemy3] Death animation component initialized
[16:47:55] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:55] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:47:55] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:47:55] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:47:55] [ENEMY] [Enemy4] Death animation component initialized
[16:47:55] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:55] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:47:55] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:47:55] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:47:55] [ENEMY] [Enemy5] Death animation component initialized
[16:47:55] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:55] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:47:55] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:47:55] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:47:55] [ENEMY] [Enemy6] Death animation component initialized
[16:47:55] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:55] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:47:55] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:47:55] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:47:55] [ENEMY] [Enemy7] Death animation component initialized
[16:47:55] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:55] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:47:55] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:47:55] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:47:55] [ENEMY] [Enemy8] Death animation component initialized
[16:47:55] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:55] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:47:55] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:47:55] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:47:55] [ENEMY] [Enemy9] Death animation component initialized
[16:47:55] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:55] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:47:55] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:47:55] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:47:55] [ENEMY] [Enemy10] Death animation component initialized
[16:47:55] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:55] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:47:55] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:47:55] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:47:55] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[16:47:55] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:47:55] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:47:55] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:47:55] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:47:55] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:47:55] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:47:55] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:47:55] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[16:47:55] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:47:55] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:47:55] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:47:55] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:47:55] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:47:55] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:47:55] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:47:55] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:47:55] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:47:55] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:47:55] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:47:55] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:47:55] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:47:55] [INFO] [ScoreManager] Level started with 10 enemies
[16:47:55] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:47:55] [INFO] [CinemaEffects] Found player node: Player
[16:47:55] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:47:55] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[16:47:55] [ENEMY] [Enemy1] Registered as sound listener
[16:47:55] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[16:47:55] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:47:55] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[16:47:55] [ENEMY] [Enemy2] Registered as sound listener
[16:47:55] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[16:47:55] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:47:55] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[16:47:55] [ENEMY] [Enemy3] Registered as sound listener
[16:47:55] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[16:47:55] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:47:55] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[16:47:55] [ENEMY] [Enemy4] Registered as sound listener
[16:47:55] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[16:47:55] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:47:55] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[16:47:55] [ENEMY] [Enemy5] Registered as sound listener
[16:47:55] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[16:47:55] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:47:55] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[16:47:55] [ENEMY] [Enemy6] Registered as sound listener
[16:47:55] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[16:47:55] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:47:55] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[16:47:55] [ENEMY] [Enemy7] Registered as sound listener
[16:47:55] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[16:47:55] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:47:55] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[16:47:55] [ENEMY] [Enemy8] Registered as sound listener
[16:47:55] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[16:47:55] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:47:55] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[16:47:55] [ENEMY] [Enemy9] Registered as sound listener
[16:47:55] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[16:47:55] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:47:55] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[16:47:55] [ENEMY] [Enemy10] Registered as sound listener
[16:47:55] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[16:47:55] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:47:55] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:55] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:55] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:55] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:55] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:55] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:55] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:55] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:55] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:47:55] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:47:55] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:47:55] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:47:55] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:47:55] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:47:55] [INFO] [LastChance] Found player: Player
[16:47:55] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:47:55] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:47:55] [INFO] [LastChance] Connected to player Died signal (C#)
[16:47:55] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:47:55] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:47:55] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:47:55] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:47:55] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:47:55] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (741.0447, 916.7161)
[16:47:55] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[16:47:55] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Frag)
[16:47:55] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:47:55] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[16:47:55] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:47:55] [INFO] [Player.Grenade] Step 1 complete! Drag: (48.861084, -6.0111084)
[16:47:56] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:47:56] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:47:56] [INFO] [Player.Grenade.Simple] Throwing! Target: (785.38654, 890), Distance: 501,1, Speed: 548,3, Friction: 300,0
[16:47:56] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,8207788
[16:47:56] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:47:56] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(0.68165165, -0.73167694), speed=548,3, spawn=(490.8991, 1206.0994)
[16:47:56] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:47:56] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:47:56] [INFO] [Player.Grenade] State reset to IDLE
[16:47:56] [INFO] [Player.Grenade] State reset to IDLE
[16:47:56] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:47:56] [INFO] [Player.Grenade] Player rotation restored to 0
[16:47:56] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:47:57] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:47:57] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:47:57] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1250), corner_timer=0.30
[16:47:57] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1250), corner_timer=0.30
[16:47:57] [INFO] [GrenadeTimer] Frag grenade landed - EXPLODING!
[16:47:57] [INFO] [GrenadeTimer] EXPLODED at (699.65936, 1031.9607)!
[16:47:57] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[16:47:57] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[16:47:57] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(699.6594, 1031.961), source=NEUTRAL (FragGrenade), range=2938, listeners=20
[16:47:57] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[16:47:57] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=8
[16:47:57] [INFO] [GrenadeTimer] Spawned C# explosion effect at (699.65936, 1031.9607)
[16:47:57] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,1250), corner_timer=-0.02
[16:47:57] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:47:57] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,1250), corner_timer=-0.02
[16:47:57] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:47:57] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,1250), corner_timer=0.30
[16:47:57] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,1250), corner_timer=0.30
[16:47:57] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,1250), corner_timer=-0.02
[16:47:57] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[16:47:57] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,1250), corner_timer=0.30
[16:47:57] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:47:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:57] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:47:57] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:47:57] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:47:57] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:47:57] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:47:57] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:47:57] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:47:57] [ENEMY] [Enemy1] Death animation component initialized
[16:47:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:57] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:47:57] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:47:57] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:47:57] [ENEMY] [Enemy2] Death animation component initialized
[16:47:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:57] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:47:57] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:47:57] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:47:57] [ENEMY] [Enemy3] Death animation component initialized
[16:47:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:57] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:47:57] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:47:57] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:47:57] [ENEMY] [Enemy4] Death animation component initialized
[16:47:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:57] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:47:57] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:47:57] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:47:57] [ENEMY] [Enemy5] Death animation component initialized
[16:47:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:57] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:47:57] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:47:57] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:47:57] [ENEMY] [Enemy6] Death animation component initialized
[16:47:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:57] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:47:57] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:47:57] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:47:57] [ENEMY] [Enemy7] Death animation component initialized
[16:47:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:57] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:47:57] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:47:57] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:47:57] [ENEMY] [Enemy8] Death animation component initialized
[16:47:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:57] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:47:57] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:47:57] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:47:57] [ENEMY] [Enemy9] Death animation component initialized
[16:47:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:57] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:47:57] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:47:57] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:47:57] [ENEMY] [Enemy10] Death animation component initialized
[16:47:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:47:57] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:47:57] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:47:57] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:47:57] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[16:47:57] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:47:57] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:47:57] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:47:57] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:47:57] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:47:57] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:47:57] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:47:57] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[16:47:57] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:47:57] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:47:57] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:47:57] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:47:57] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:47:57] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:47:57] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:47:57] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:47:57] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:47:57] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:47:57] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:47:57] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:47:57] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:47:57] [INFO] [ScoreManager] Level started with 10 enemies
[16:47:57] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:47:57] [INFO] [CinemaEffects] Found player node: Player
[16:47:57] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:47:57] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[16:47:57] [ENEMY] [Enemy1] Registered as sound listener
[16:47:57] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[16:47:57] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:47:57] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[16:47:57] [ENEMY] [Enemy2] Registered as sound listener
[16:47:57] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[16:47:57] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:47:57] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[16:47:57] [ENEMY] [Enemy3] Registered as sound listener
[16:47:57] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[16:47:57] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:47:57] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[16:47:57] [ENEMY] [Enemy4] Registered as sound listener
[16:47:57] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[16:47:57] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:47:57] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[16:47:57] [ENEMY] [Enemy5] Registered as sound listener
[16:47:57] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[16:47:57] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:47:57] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[16:47:57] [ENEMY] [Enemy6] Registered as sound listener
[16:47:57] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[16:47:57] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:47:57] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[16:47:57] [ENEMY] [Enemy7] Registered as sound listener
[16:47:57] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[16:47:57] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:47:57] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[16:47:57] [ENEMY] [Enemy8] Registered as sound listener
[16:47:57] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[16:47:57] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:47:57] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[16:47:57] [ENEMY] [Enemy9] Registered as sound listener
[16:47:57] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[16:47:57] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:47:57] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[16:47:57] [ENEMY] [Enemy10] Registered as sound listener
[16:47:57] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[16:47:57] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:47:57] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:57] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:57] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=236.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:57] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:57] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:57] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:57] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=78.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:57] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:47:57] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:47:57] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:47:57] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:47:57] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:47:57] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:47:57] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:47:57] [INFO] [LastChance] Found player: Player
[16:47:57] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:47:57] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:47:57] [INFO] [LastChance] Connected to player Died signal (C#)
[16:47:57] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:47:58] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:47:58] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:47:58] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:47:58] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:47:58] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (628.37964, 953.45087)
[16:47:58] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[16:47:58] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Frag)
[16:47:58] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:47:58] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[16:47:58] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:47:58] [INFO] [Player.Grenade] Step 1 complete! Drag: (79.80487, -6.679077)
[16:47:58] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:47:58] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:47:58] [INFO] [Player.Grenade.Simple] Throwing! Target: (742.6384, 890), Distance: 468,6, Speed: 530,2, Friction: 300,0
[16:47:58] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,8882482
[16:47:58] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:47:58] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(0.63077235, -0.77596796), speed=530,2, spawn=(487.84634, 1203.4419)
[16:47:58] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:47:58] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:47:58] [INFO] [Player.Grenade] State reset to IDLE
[16:47:58] [INFO] [Player.Grenade] State reset to IDLE
[16:47:58] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:47:58] [INFO] [Player.Grenade] Player rotation restored to 0
[16:47:59] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:47:59] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:47:59] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:47:59] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1250), corner_timer=0.30
[16:47:59] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1250), corner_timer=0.30
[16:47:59] [INFO] [GrenadeTimer] Frag grenade landed - EXPLODING!
[16:47:59] [INFO] [GrenadeTimer] EXPLODED at (665.61646, 1031.7001)!
[16:47:59] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[16:47:59] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[16:47:59] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(665.6165, 1031.7), source=NEUTRAL (FragGrenade), range=2938, listeners=20
[16:47:59] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[16:47:59] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=8
[16:47:59] [INFO] [GrenadeTimer] Spawned C# explosion effect at (665.61646, 1031.7001)
[16:47:59] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,1250), corner_timer=-0.02
[16:47:59] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:47:59] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,1250), corner_timer=-0.02
[16:47:59] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:47:59] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,1250), corner_timer=0.30
[16:47:59] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,1250), corner_timer=0.30
[16:48:00] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,1250), corner_timer=-0.02
[16:48:00] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[16:48:00] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,1250), corner_timer=0.30
[16:48:00] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:48:00] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:48:00] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:48:00] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:48:00] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:48:00] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:48:00] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:48:00] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:48:00] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:48:00] [ENEMY] [Enemy1] Death animation component initialized
[16:48:00] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:48:00] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:48:00] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:48:00] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:48:00] [ENEMY] [Enemy2] Death animation component initialized
[16:48:00] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:48:00] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:48:00] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:48:00] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:48:00] [ENEMY] [Enemy3] Death animation component initialized
[16:48:00] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:48:00] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:48:00] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:48:00] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:48:00] [ENEMY] [Enemy4] Death animation component initialized
[16:48:00] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:48:00] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:48:00] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:48:00] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:48:00] [ENEMY] [Enemy5] Death animation component initialized
[16:48:00] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:48:00] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:48:00] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:48:00] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:48:00] [ENEMY] [Enemy6] Death animation component initialized
[16:48:00] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:48:00] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:48:00] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:48:00] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:48:00] [ENEMY] [Enemy7] Death animation component initialized
[16:48:00] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:48:00] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:48:00] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:48:00] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:48:00] [ENEMY] [Enemy8] Death animation component initialized
[16:48:00] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:48:00] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:48:00] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:48:00] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:48:00] [ENEMY] [Enemy9] Death animation component initialized
[16:48:00] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:48:00] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:48:00] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:48:00] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:48:00] [ENEMY] [Enemy10] Death animation component initialized
[16:48:00] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:48:00] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:48:00] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:48:00] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:48:00] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[16:48:00] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:48:00] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:48:00] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:48:00] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:48:00] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:48:00] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:48:00] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:48:00] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[16:48:00] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:48:00] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:48:00] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:48:00] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:48:00] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:48:00] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:48:00] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:48:00] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:48:00] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:48:00] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:48:00] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:48:00] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:48:00] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:48:00] [INFO] [ScoreManager] Level started with 10 enemies
[16:48:00] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:48:00] [INFO] [CinemaEffects] Found player node: Player
[16:48:00] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:48:00] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[16:48:00] [ENEMY] [Enemy1] Registered as sound listener
[16:48:00] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[16:48:00] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:48:00] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[16:48:00] [ENEMY] [Enemy2] Registered as sound listener
[16:48:00] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[16:48:00] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:48:00] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[16:48:00] [ENEMY] [Enemy3] Registered as sound listener
[16:48:00] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[16:48:00] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:48:00] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[16:48:00] [ENEMY] [Enemy4] Registered as sound listener
[16:48:00] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[16:48:00] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:48:00] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[16:48:00] [ENEMY] [Enemy5] Registered as sound listener
[16:48:00] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[16:48:00] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:48:00] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[16:48:00] [ENEMY] [Enemy6] Registered as sound listener
[16:48:00] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[16:48:00] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:48:00] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[16:48:00] [ENEMY] [Enemy7] Registered as sound listener
[16:48:00] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[16:48:00] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:48:00] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[16:48:00] [ENEMY] [Enemy8] Registered as sound listener
[16:48:00] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[16:48:00] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:48:00] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[16:48:00] [ENEMY] [Enemy9] Registered as sound listener
[16:48:00] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[16:48:00] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:48:00] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[16:48:00] [ENEMY] [Enemy10] Registered as sound listener
[16:48:00] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[16:48:00] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:48:00] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:48:00] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:48:00] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:48:00] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:48:00] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:48:00] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:48:00] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:48:00] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:48:00] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:48:00] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:48:00] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:48:00] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:48:00] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:48:00] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:48:00] [INFO] [LastChance] Found player: Player
[16:48:00] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:48:00] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:48:00] [INFO] [LastChance] Connected to player Died signal (C#)
[16:48:00] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:48:00] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:48:00] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:48:00] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:48:00] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:48:00] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (634.39215, 954.1188)
[16:48:00] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[16:48:00] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Frag)
[16:48:00] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:48:00] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[16:48:00] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:48:00] [INFO] [Player.Grenade] Step 1 complete! Drag: (40.71991, 0)
[16:48:00] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:48:00] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:48:01] [INFO] [Player.Grenade.Simple] Throwing! Target: (787.7572, 890), Distance: 503,0, Speed: 549,4, Friction: 300,0
[16:48:01] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,8172649
[16:48:01] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:48:01] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(0.68421835, -0.72927713), speed=549,4, spawn=(491.0531, 1206.2434)
[16:48:01] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:48:01] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:48:01] [INFO] [Player.Grenade] State reset to IDLE
[16:48:01] [INFO] [Player.Grenade] State reset to IDLE
[16:48:01] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:48:01] [INFO] [Player.Grenade] Player rotation restored to 0
[16:48:01] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:48:01] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:48:01] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:48:01] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1250), corner_timer=0.30
[16:48:01] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1250), corner_timer=0.30
[16:48:01] [INFO] [GrenadeTimer] Frag grenade landed - EXPLODING!
[16:48:01] [INFO] [GrenadeTimer] EXPLODED at (668.8226, 1031.7001)!
[16:48:01] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[16:48:01] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[16:48:01] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(668.8226, 1031.7), source=NEUTRAL (FragGrenade), range=2938, listeners=20
[16:48:01] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[16:48:01] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=8
[16:48:01] [INFO] [GrenadeTimer] Spawned C# explosion effect at (668.8226, 1031.7001)
[16:48:01] [INFO] [Player] Spawning blood effect at (450, 1250), dir=(-0.40878427, -0.9126311), lethal=False (C#)
[16:48:01] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 1250), dir=(-0.408784, -0.912631), lethal=false
[16:48:01] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:48:01] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:48:01] [INFO] [ImpactEffects] Blood effect spawned at (450, 1250) (scale=1)
[16:48:01] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[16:48:01] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[16:48:01] [INFO] [PenultimateHit] Starting penultimate hit effect:
[16:48:01] [INFO] [PenultimateHit]   - Time scale: 0.10
[16:48:01] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[16:48:01] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[16:48:01] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[16:48:01] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[16:48:01] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[16:48:01] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[16:48:01] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[16:48:02] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:48:02] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:48:02] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:48:02] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:48:02] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:48:02] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:48:02] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:48:02] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[16:48:02] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:48:02] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:48:02] [ENEMY] [Enemy1] Death animation component initialized
[16:48:02] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:48:02] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:48:02] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:48:02] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:48:02] [ENEMY] [Enemy2] Death animation component initialized
[16:48:02] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:48:02] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:48:02] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:48:02] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:48:02] [ENEMY] [Enemy3] Death animation component initialized
[16:48:02] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:48:02] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:48:02] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:48:02] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:48:02] [ENEMY] [Enemy4] Death animation component initialized
[16:48:02] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:48:02] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:48:02] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:48:02] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:48:02] [ENEMY] [Enemy5] Death animation component initialized
[16:48:02] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:48:02] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:48:02] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:48:02] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:48:02] [ENEMY] [Enemy6] Death animation component initialized
[16:48:02] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:48:02] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:48:02] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:48:02] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:48:02] [ENEMY] [Enemy7] Death animation component initialized
[16:48:02] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:48:02] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:48:02] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:48:02] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:48:02] [INFO] [EnemyGrenade] Initialized: 1 grenades
[16:48:02] [ENEMY] [Enemy8] Death animation component initialized
[16:48:02] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:48:02] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:48:02] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:48:02] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:48:02] [ENEMY] [Enemy9] Death animation component initialized
[16:48:02] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:48:02] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:48:02] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:48:02] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:48:02] [ENEMY] [Enemy10] Death animation component initialized
[16:48:02] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:48:02] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:48:02] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:48:02] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:48:02] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[16:48:02] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:48:02] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:48:02] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:48:02] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:48:02] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:48:02] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:48:02] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:48:02] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[16:48:02] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:48:02] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:48:02] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:48:02] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:48:02] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:48:02] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:48:02] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:48:02] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:48:02] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:48:02] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:48:02] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:48:02] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:48:02] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:48:02] [INFO] [ScoreManager] Level started with 10 enemies
[16:48:02] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:48:02] [INFO] [CinemaEffects] Found player node: Player
[16:48:02] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:48:02] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[16:48:02] [ENEMY] [Enemy1] Registered as sound listener
[16:48:02] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[16:48:02] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:48:02] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[16:48:02] [ENEMY] [Enemy2] Registered as sound listener
[16:48:02] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[16:48:02] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:48:02] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[16:48:02] [ENEMY] [Enemy3] Registered as sound listener
[16:48:02] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[16:48:02] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:48:02] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[16:48:02] [ENEMY] [Enemy4] Registered as sound listener
[16:48:02] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[16:48:02] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:48:02] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[16:48:02] [ENEMY] [Enemy5] Registered as sound listener
[16:48:02] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[16:48:02] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:48:02] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[16:48:02] [ENEMY] [Enemy6] Registered as sound listener
[16:48:02] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[16:48:02] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:48:02] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[16:48:02] [ENEMY] [Enemy7] Registered as sound listener
[16:48:02] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[16:48:02] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:48:02] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[16:48:02] [ENEMY] [Enemy8] Registered as sound listener
[16:48:02] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[16:48:02] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:48:02] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[16:48:02] [ENEMY] [Enemy9] Registered as sound listener
[16:48:02] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[16:48:02] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:48:02] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[16:48:02] [ENEMY] [Enemy10] Registered as sound listener
[16:48:02] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[16:48:02] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:48:02] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:48:02] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:48:02] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=236.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:48:02] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:48:02] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:48:02] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:48:02] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=213.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:48:02] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:48:02] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:48:02] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:48:02] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:48:02] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:48:02] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:48:02] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:48:02] [INFO] [LastChance] Found player: Player
[16:48:02] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:48:02] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:48:02] [INFO] [LastChance] Connected to player Died signal (C#)
[16:48:02] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:48:02] [INFO] [BloodDecal] Blood puddle created at (437.9232, 1187.639) (added to group)
[16:48:02] [INFO] [BloodDecal] Blood puddle created at (438.9415, 1219.457) (added to group)
[16:48:02] [INFO] [BloodDecal] Blood puddle created at (420.2716, 1229.424) (added to group)
[16:48:02] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[16:48:02] [INFO] [BloodDecal] Blood puddle created at (409.8862, 1203.861) (added to group)
[16:48:02] [INFO] [BloodDecal] Blood puddle created at (396.9476, 1226.634) (added to group)
[16:48:02] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:48:02] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:48:02] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:48:03] [INFO] [BloodDecal] Blood puddle created at (444.1847, 1218.336) (added to group)
[16:48:03] [INFO] [BloodDecal] Blood puddle created at (390.3813, 1155.003) (added to group)
[16:48:03] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:48:03] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (663.891, 959.462)
[16:48:03] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[16:48:03] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Frag)
[16:48:03] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:48:03] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[16:48:03] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:48:03] [INFO] [Player.Grenade] Step 1 complete! Drag: (57.51709, 0)
[16:48:03] [INFO] [BloodDecal] Blood puddle created at (311.7413, 1187.456) (added to group)
[16:48:03] [INFO] [BloodDecal] Blood puddle created at (355.9214, 1151.675) (added to group)
[16:48:03] [INFO] [BloodDecal] Blood puddle created at (371.5861, 1147.763) (added to group)
[16:48:03] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:48:03] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:48:03] [INFO] [Player.Grenade.Simple] Throwing! Target: (814.3079, 890), Distance: 524,5, Speed: 561,0, Friction: 300,0
[16:48:03] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,7794506
[16:48:03] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:48:03] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(0.7112998, -0.7028887), speed=561,0, spawn=(492.67798, 1207.8267)
[16:48:03] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:48:03] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:48:03] [INFO] [Player.Grenade] State reset to IDLE
[16:48:03] [INFO] [Player.Grenade] State reset to IDLE
[16:48:03] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:48:03] [INFO] [Player.Grenade] Player rotation restored to 0
[16:48:03] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:48:04] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:48:04] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:48:04] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1250), corner_timer=0.30
[16:48:04] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1250), corner_timer=0.30
[16:48:04] [INFO] [GrenadeTimer] Frag grenade landed - EXPLODING!
[16:48:04] [INFO] [GrenadeTimer] EXPLODED at (723.81036, 1031.7001)!
[16:48:04] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[16:48:04] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[16:48:04] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(723.8104, 1031.7), source=NEUTRAL (FragGrenade), range=2938, listeners=20
[16:48:04] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[16:48:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=8
[16:48:04] [INFO] [GrenadeTimer] Spawned C# explosion effect at (723.81036, 1031.7001)
[16:48:04] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,1250), corner_timer=-0.02
[16:48:04] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:48:04] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,1250), corner_timer=-0.02
[16:48:04] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:48:04] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,1250), corner_timer=0.30
[16:48:04] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,1250), corner_timer=0.30
[16:48:04] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,1250), corner_timer=-0.02
[16:48:04] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[16:48:04] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,1250), corner_timer=0.30
[16:48:05] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,1250), corner_timer=-0.02
[16:48:05] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[16:48:05] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,1250), corner_timer=0.30
[16:48:05] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(450,1250), corner_timer=-0.02
[16:48:05] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[16:48:05] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(450,1250), corner_timer=0.30
[16:48:05] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:48:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:48:05] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:48:05] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:48:05] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:48:05] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:48:05] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:48:05] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:48:05] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:48:05] [ENEMY] [Enemy1] Death animation component initialized
[16:48:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:48:05] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:48:05] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:48:05] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:48:05] [ENEMY] [Enemy2] Death animation component initialized
[16:48:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:48:05] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:48:05] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:48:05] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:48:05] [ENEMY] [Enemy3] Death animation component initialized
[16:48:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:48:05] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:48:05] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:48:05] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:48:05] [ENEMY] [Enemy4] Death animation component initialized
[16:48:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:48:05] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:48:05] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:48:05] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:48:05] [ENEMY] [Enemy5] Death animation component initialized
[16:48:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:48:05] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:48:05] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:48:05] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:48:05] [ENEMY] [Enemy6] Death animation component initialized
[16:48:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:48:05] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:48:05] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:48:05] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:48:05] [ENEMY] [Enemy7] Death animation component initialized
[16:48:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:48:05] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:48:05] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:48:05] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:48:05] [INFO] [EnemyGrenade] Initialized: 1 grenades
[16:48:05] [ENEMY] [Enemy8] Death animation component initialized
[16:48:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:48:05] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:48:05] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:48:05] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:48:05] [ENEMY] [Enemy9] Death animation component initialized
[16:48:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:48:05] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:48:05] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:48:05] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:48:05] [ENEMY] [Enemy10] Death animation component initialized
[16:48:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:48:05] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:48:05] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:48:05] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:48:05] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[16:48:05] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:48:05] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:48:05] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:48:05] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:48:05] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:48:05] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:48:05] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:48:05] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[16:48:05] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:48:05] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:48:05] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:48:05] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:48:05] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:48:05] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:48:05] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:48:05] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:48:05] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:48:05] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:48:05] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:48:05] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:48:05] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:48:05] [INFO] [ScoreManager] Level started with 10 enemies
[16:48:05] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:48:05] [INFO] [CinemaEffects] Found player node: Player
[16:48:05] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:48:05] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[16:48:05] [ENEMY] [Enemy1] Registered as sound listener
[16:48:05] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[16:48:05] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:48:05] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[16:48:05] [ENEMY] [Enemy2] Registered as sound listener
[16:48:05] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[16:48:05] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:48:05] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[16:48:05] [ENEMY] [Enemy3] Registered as sound listener
[16:48:05] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[16:48:05] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:48:05] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[16:48:05] [ENEMY] [Enemy4] Registered as sound listener
[16:48:05] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[16:48:05] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:48:05] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[16:48:05] [ENEMY] [Enemy5] Registered as sound listener
[16:48:05] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[16:48:05] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:48:05] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[16:48:05] [ENEMY] [Enemy6] Registered as sound listener
[16:48:05] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[16:48:05] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:48:05] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[16:48:05] [ENEMY] [Enemy7] Registered as sound listener
[16:48:05] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[16:48:05] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:48:05] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[16:48:05] [ENEMY] [Enemy8] Registered as sound listener
[16:48:05] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[16:48:05] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:48:05] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[16:48:05] [ENEMY] [Enemy9] Registered as sound listener
[16:48:05] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[16:48:05] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:48:05] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[16:48:05] [ENEMY] [Enemy10] Registered as sound listener
[16:48:05] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[16:48:05] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:48:05] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:48:05] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:48:05] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:48:05] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:48:05] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:48:05] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:48:05] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=78.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:48:05] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:48:05] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:48:05] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:48:05] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:48:05] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:48:05] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:48:05] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:48:05] [INFO] [LastChance] Found player: Player
[16:48:05] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:48:05] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:48:05] [INFO] [LastChance] Connected to player Died signal (C#)
[16:48:05] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:48:06] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:48:06] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:48:06] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:48:06] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:48:06] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (740.49786, 953.45087)
[16:48:06] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[16:48:06] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Frag)
[16:48:06] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:48:06] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[16:48:06] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:48:06] [INFO] [Player.Grenade] Step 1 complete! Drag: (79.63074, -0.6679077)
[16:48:06] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:48:06] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:48:07] [INFO] [Player.Grenade.Simple] Throwing! Target: (722.674, 959.462), Distance: 392,6, Speed: 485,3, Friction: 300,0
[16:48:07] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,8171056
[16:48:07] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:48:07] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(0.6843346, -0.7291682), speed=485,3, spawn=(491.06006, 1206.2499)
[16:48:07] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:48:07] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:48:07] [INFO] [Player.Grenade] State reset to IDLE
[16:48:07] [INFO] [Player.Grenade] State reset to IDLE
[16:48:07] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:48:07] [INFO] [Player.Grenade] Player rotation restored to 0
[16:48:07] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:48:07] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:48:07] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1250), corner_timer=0.30
[16:48:07] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1250), corner_timer=0.30
[16:48:07] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:48:07] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,1250), corner_timer=-0.02
[16:48:07] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:48:07] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,1250), corner_timer=-0.02
[16:48:07] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:48:07] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,1250), corner_timer=0.30
[16:48:07] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,1250), corner_timer=0.30
[16:48:07] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,1250), corner_timer=-0.02
[16:48:07] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[16:48:07] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,1250), corner_timer=0.30
[16:48:07] [INFO] [GrenadeTimer] Frag grenade landed - EXPLODING!
[16:48:07] [INFO] [GrenadeTimer] EXPLODED at (681.2193, 1031.7001)!
[16:48:07] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[16:48:07] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[16:48:07] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(681.2193, 1031.7), source=NEUTRAL (FragGrenade), range=2938, listeners=20
[16:48:07] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[16:48:07] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=8
[16:48:07] [INFO] [GrenadeTimer] Spawned C# explosion effect at (681.2193, 1031.7001)
[16:48:08] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,1250), corner_timer=-0.02
[16:48:08] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[16:48:08] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,1250), corner_timer=0.30
[16:48:08] [ENEMY] [Enemy8] Hit taken, damage: 1, health: 3/3 -> 2/3
[16:48:08] [ENEMY] [Enemy8] ImpactEffectsManager found, calling spawn_blood_effect
[16:48:08] [INFO] [ImpactEffects] spawn_blood_effect called at (1900, 1450), dir=(0.943525, 0.331301), lethal=false
[16:48:08] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:48:08] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:48:08] [INFO] [ImpactEffects] Wall found for blood splatter at (1960, 1471.068) (dist=63 px)
[16:48:08] [INFO] [BloodDecal] Blood puddle created at (1959, 1471.068) (added to group)
[16:48:08] [INFO] [ImpactEffects] Blood effect spawned at (1900, 1450) (scale=1)
[16:48:08] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(450,1250), corner_timer=-0.02
[16:48:08] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[16:48:08] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(450,1250), corner_timer=0.30
[16:48:08] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(450,1250), corner_timer=-0.02
[16:48:08] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[16:48:08] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(450,1250), corner_timer=0.30
[16:48:09] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:48:09] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(450,1250), corner_timer=-0.02
[16:48:09] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[16:48:09] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(450,1250), corner_timer=0.30
[16:48:09] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:48:09] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(450,1250), corner_timer=-0.02
[16:48:09] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[16:48:09] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(450,1250), corner_timer=0.30
[16:48:09] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:48:10] [INFO] ------------------------------------------------------------
[16:48:10] [INFO] GAME LOG ENDED: 2026-02-04T16:48:10
[16:48:10] [INFO] ============================================================
