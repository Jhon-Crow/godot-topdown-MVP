[16:58:29] [INFO] ============================================================
[16:58:29] [INFO] GAME LOG STARTED
[16:58:29] [INFO] ============================================================
[16:58:29] [INFO] Timestamp: 2026-02-04T16:58:29
[16:58:29] [INFO] Log file: I:/Загрузки/godot exe/вспышка/game_log_20260204_165829.txt
[16:58:29] [INFO] Executable: I:/Загрузки/godot exe/вспышка/Godot-Top-Down-Template.exe
[16:58:29] [INFO] OS: Windows
[16:58:29] [INFO] Debug build: false
[16:58:29] [INFO] Engine version: 4.3-stable (official)
[16:58:29] [INFO] Project: Godot Top-Down Template
[16:58:29] [INFO] ------------------------------------------------------------
[16:58:29] [INFO] [GameManager] GameManager ready
[16:58:29] [INFO] [ScoreManager] ScoreManager ready
[16:58:29] [INFO] [SoundPropagation] SoundPropagation autoload initialized
[16:58:29] [INFO] [ImpactEffects] Scenes loaded: DustEffect, BloodEffect, SparksEffect, BloodDecal
[16:58:29] [INFO] [ImpactEffects] ImpactEffectsManager ready - FULL VERSION with blood effects enabled
[16:58:29] [INFO] [ImpactEffects] Starting particle shader warmup (Issue #343 fix)...
[16:58:29] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:58:29] [INFO] [PenultimateHit] Saturation shader loaded successfully
[16:58:29] [INFO] [PenultimateHit] Starting shader warmup (Issue #343 fix)...
[16:58:29] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
[16:58:29] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
[16:58:29] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
[16:58:29] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
[16:58:29] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
[16:58:29] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:58:29] [INFO] [LastChance] Last chance shader loaded successfully
[16:58:29] [INFO] [LastChance] Starting shader warmup (Issue #343 fix)...
[16:58:29] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
[16:58:29] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
[16:58:29] [INFO] [LastChance]   Sepia intensity: 0.70
[16:58:29] [INFO] [LastChance]   Brightness: 0.60
[16:58:29] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
[16:58:29] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
[16:58:29] [INFO] [ExperimentalSettings] ExperimentalSettings initialized - FOV enabled: true, Complex grenade throwing: false
[16:58:29] [INFO] [CinemaEffects] CinemaEffectsManager initializing (v5.3 - overlay approach with simplified death circle)...
[16:58:29] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:58:29] [INFO] [CinemaEffects] Created effects layer at layer 99
[16:58:29] [INFO] [CinemaEffects] Cinema shader loaded successfully (v5.0 - no screen_texture)
[16:58:29] [INFO] [CinemaEffects] Starting cinema shader warmup (Issue #343 fix)...
[16:58:29] [INFO] [CinemaEffects] Cinema film effect initialized (v5.3) - Configuration:
[16:58:29] [INFO] [CinemaEffects]   Approach: Overlay-based (no screen_texture)
[16:58:29] [INFO] [CinemaEffects]   Grain intensity: 0.15
[16:58:29] [INFO] [CinemaEffects]   Warm tint: 0.12 intensity
[16:58:29] [INFO] [CinemaEffects]   Sunny effect: 0.08 intensity
[16:58:29] [INFO] [CinemaEffects]   Vignette: 0.25 intensity
[16:58:29] [INFO] [CinemaEffects]   Film defects: 1.5% probability
[16:58:29] [INFO] [CinemaEffects]   White specks: 0.70 intensity, 4.0% probability
[16:58:29] [INFO] [CinemaEffects]   Death effects: cigarette burn + expanding spots + end of reel circle (160px, blinks 2x)
[16:58:29] [INFO] [CinemaEffects] Enabling effect after 1 frame(s)...
[16:58:29] [INFO] [GrenadeTimerHelper] Autoload ready
[16:58:29] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:29] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:58:29] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:58:29] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:58:29] [INFO] [EnemyGrenade] Initialized: 1 grenades
[16:58:29] [ENEMY] [Enemy1] Death animation component initialized
[16:58:29] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:29] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:58:29] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:58:29] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:58:29] [ENEMY] [Enemy2] Death animation component initialized
[16:58:29] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:29] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:58:29] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:58:29] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:58:29] [ENEMY] [Enemy3] Death animation component initialized
[16:58:29] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:29] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:58:29] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:58:29] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:58:29] [ENEMY] [Enemy4] Death animation component initialized
[16:58:29] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:29] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:58:29] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:58:29] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:58:29] [ENEMY] [Enemy5] Death animation component initialized
[16:58:29] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:29] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:58:29] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:58:29] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:58:29] [ENEMY] [Enemy6] Death animation component initialized
[16:58:29] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:29] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:58:29] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:58:29] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:58:29] [ENEMY] [Enemy7] Death animation component initialized
[16:58:29] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:29] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:58:29] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:58:29] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:58:29] [ENEMY] [Enemy8] Death animation component initialized
[16:58:29] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:29] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:58:29] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:58:29] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:58:29] [ENEMY] [Enemy9] Death animation component initialized
[16:58:29] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:29] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:58:29] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:58:29] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:58:29] [ENEMY] [Enemy10] Death animation component initialized
[16:58:29] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:29] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:58:29] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:58:29] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:58:29] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[16:58:29] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:58:29] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:58:29] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:58:29] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:58:29] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:58:29] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:58:29] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:58:29] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[16:58:29] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:58:29] [INFO] [BloodDecal] Blood puddle created at (640, 360) (added to group)
[16:58:29] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:58:29] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:58:29] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:58:29] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:58:29] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:58:29] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:58:29] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:58:29] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:58:29] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:58:29] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:58:29] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:58:29] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:58:29] [INFO] [ScoreManager] Level started with 10 enemies
[16:58:29] [INFO] [CinemaEffects] Found player node: Player
[16:58:29] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:58:29] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:58:29] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
[16:58:29] [ENEMY] [Enemy1] Registered as sound listener
[16:58:29] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[16:58:29] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:58:29] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
[16:58:29] [ENEMY] [Enemy2] Registered as sound listener
[16:58:29] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[16:58:29] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:58:29] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
[16:58:29] [ENEMY] [Enemy3] Registered as sound listener
[16:58:29] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[16:58:29] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:58:29] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
[16:58:29] [ENEMY] [Enemy4] Registered as sound listener
[16:58:29] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[16:58:29] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:58:29] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
[16:58:29] [ENEMY] [Enemy5] Registered as sound listener
[16:58:29] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[16:58:29] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:58:29] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
[16:58:29] [ENEMY] [Enemy6] Registered as sound listener
[16:58:29] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[16:58:29] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:58:29] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
[16:58:29] [ENEMY] [Enemy7] Registered as sound listener
[16:58:29] [ENEMY] [Enemy7] Spawned at (1606.114, 893.8859), hp: 2, behavior: PATROL
[16:58:29] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:58:29] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
[16:58:29] [ENEMY] [Enemy8] Registered as sound listener
[16:58:29] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[16:58:29] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:58:29] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
[16:58:29] [ENEMY] [Enemy9] Registered as sound listener
[16:58:29] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[16:58:29] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:58:29] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
[16:58:29] [ENEMY] [Enemy10] Registered as sound listener
[16:58:29] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[16:58:29] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:58:29] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:29] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:29] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=281.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:29] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:29] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:29] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:29] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=157.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:29] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:29] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:58:29] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:58:29] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:58:29] [INFO] [PenultimateHit] Shader warmup complete in 198 ms
[16:58:29] [INFO] [LastChance] Shader warmup complete in 197 ms
[16:58:29] [INFO] [CinemaEffects] Cinema shader warmup complete in 171 ms
[16:58:29] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:58:29] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:58:29] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:58:29] [INFO] [LastChance] Found player: Player
[16:58:29] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:58:29] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:58:29] [INFO] [LastChance] Connected to player Died signal (C#)
[16:58:29] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:58:30] [INFO] [ImpactEffects] Particle shader warmup complete: 6 effects warmed up in 507 ms
[16:58:30] [INFO] [PauseMenu] Armory button pressed
[16:58:30] [INFO] [PauseMenu] Creating new armory menu instance
[16:58:30] [INFO] [PauseMenu] armory_menu_scene resource path: res://scenes/ui/ArmoryMenu.tscn
[16:58:30] [INFO] [PauseMenu] Instance created, class: CanvasLayer, name: ArmoryMenu
[16:58:30] [INFO] [PauseMenu] Script attached: res://scripts/ui/armory_menu.gd
[16:58:30] [INFO] [PauseMenu] back_pressed signal exists on instance
[16:58:30] [INFO] [PauseMenu] back_pressed signal connected
[16:58:30] [INFO] [PauseMenu] Armory menu instance added as child, is_inside_tree: true
[16:58:30] [INFO] [PauseMenu] _populate_weapon_grid method exists
[16:58:32] [INFO] [GrenadeManager] Grenade type changed from Flashbang to Frag Grenade
[16:58:32] [INFO] [GrenadeManager] Restarting level due to grenade type change
[16:58:32] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:58:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:32] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:58:32] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:58:32] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:58:32] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:58:32] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:58:32] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:58:32] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:58:32] [ENEMY] [Enemy1] Death animation component initialized
[16:58:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:32] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:58:32] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:58:32] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:58:32] [ENEMY] [Enemy2] Death animation component initialized
[16:58:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:32] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:58:32] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:58:32] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:58:32] [ENEMY] [Enemy3] Death animation component initialized
[16:58:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:32] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:58:32] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:58:32] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:58:32] [ENEMY] [Enemy4] Death animation component initialized
[16:58:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:32] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:58:32] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:58:32] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:58:32] [ENEMY] [Enemy5] Death animation component initialized
[16:58:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:32] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:58:32] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:58:32] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:58:32] [INFO] [EnemyGrenade] Initialized: 1 grenades
[16:58:32] [ENEMY] [Enemy6] Death animation component initialized
[16:58:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:32] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:58:32] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:58:32] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:58:32] [ENEMY] [Enemy7] Death animation component initialized
[16:58:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:32] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:58:32] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:58:32] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:58:32] [ENEMY] [Enemy8] Death animation component initialized
[16:58:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:32] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:58:32] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:58:32] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:58:32] [ENEMY] [Enemy9] Death animation component initialized
[16:58:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:32] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:58:32] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:58:32] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:58:32] [ENEMY] [Enemy10] Death animation component initialized
[16:58:32] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:32] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:58:32] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:58:32] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:58:32] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[16:58:32] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:58:32] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:58:32] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:58:32] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:58:32] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:58:32] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:58:32] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:58:32] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[16:58:32] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:58:32] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:58:32] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:58:32] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:58:32] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:58:32] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:58:32] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:58:32] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:58:32] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:58:32] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:58:32] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:58:32] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:58:32] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:58:32] [INFO] [ScoreManager] Level started with 10 enemies
[16:58:32] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:58:32] [INFO] [CinemaEffects] Found player node: Player
[16:58:32] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:58:32] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[16:58:32] [ENEMY] [Enemy1] Registered as sound listener
[16:58:32] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[16:58:32] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:58:32] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[16:58:32] [ENEMY] [Enemy2] Registered as sound listener
[16:58:32] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[16:58:32] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:58:32] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[16:58:32] [ENEMY] [Enemy3] Registered as sound listener
[16:58:32] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[16:58:32] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:58:32] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[16:58:32] [ENEMY] [Enemy4] Registered as sound listener
[16:58:32] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[16:58:32] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:58:32] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[16:58:32] [ENEMY] [Enemy5] Registered as sound listener
[16:58:32] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[16:58:32] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:58:32] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[16:58:32] [ENEMY] [Enemy6] Registered as sound listener
[16:58:32] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[16:58:32] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:58:32] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[16:58:32] [ENEMY] [Enemy7] Registered as sound listener
[16:58:32] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[16:58:32] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:58:32] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[16:58:32] [ENEMY] [Enemy8] Registered as sound listener
[16:58:32] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[16:58:32] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:58:32] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[16:58:32] [ENEMY] [Enemy9] Registered as sound listener
[16:58:32] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[16:58:32] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:58:32] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[16:58:32] [ENEMY] [Enemy10] Registered as sound listener
[16:58:32] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[16:58:32] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:58:32] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:32] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:32] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=281.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:32] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:32] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:32] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:32] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=78.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:32] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:32] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:58:32] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:58:32] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:58:32] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:58:32] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:58:32] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:58:32] [INFO] [LastChance] Found player: Player
[16:58:32] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:58:32] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:58:32] [INFO] [LastChance] Connected to player Died signal (C#)
[16:58:32] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:58:34] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:58:34] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:58:34] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(528,1499), corner_timer=0.30
[16:58:34] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(528,1499), corner_timer=0.30
[16:58:34] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(599,1573), corner_timer=-0.02
[16:58:34] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:58:34] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(599,1573), corner_timer=-0.02
[16:58:34] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:58:34] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(602,1576), corner_timer=0.30
[16:58:34] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(602,1576), corner_timer=0.30
[16:58:34] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:58:34] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:58:34] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:58:34] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(623,1603), corner_timer=-0.02
[16:58:34] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[16:58:34] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(623,1603), corner_timer=0.30
[16:58:34] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:58:34] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (366.0944, 1725.1484)
[16:58:34] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[16:58:34] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Frag)
[16:58:34] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:58:34] [INFO] [Player.Grenade] Timer started, grenade created at (623.1371, 1603.1488)
[16:58:34] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:58:34] [INFO] [Player.Grenade] Step 1 complete! Drag: (100.20926, -10.032837)
[16:58:34] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:58:34] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:58:35] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(623,1603), corner_timer=-0.02
[16:58:35] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[16:58:35] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(623,1603), corner_timer=0.30
[16:58:35] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(623,1603), corner_timer=-0.02
[16:58:35] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[16:58:35] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(623,1603), corner_timer=0.30
[16:58:35] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(623,1603), corner_timer=-0.02
[16:58:35] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[16:58:35] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(623,1603), corner_timer=0.30
[16:58:36] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:58:36] [INFO] [Player.Grenade.Simple] Throwing! Target: (434.90567, 1679.8896), Distance: 171,8, Speed: 321,1, Friction: 300,0
[16:58:36] [INFO] [Player.Grenade] Player rotated for throw: 0 -> 2,7010486
[16:58:36] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:58:36] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(-0.90451974, 0.42643172), speed=321,1, spawn=(568.8659, 1616.7347)
[16:58:36] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:58:36] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:58:36] [INFO] [Player.Grenade] State reset to IDLE
[16:58:36] [INFO] [Player.Grenade] State reset to IDLE
[16:58:36] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:58:36] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(623,1584), corner_timer=-0.02
[16:58:36] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[16:58:36] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(623,1581), corner_timer=0.30
[16:58:36] [INFO] [Player.Grenade] Player rotation restored to 0
[16:58:36] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:58:36] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:58:36] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(569,1509), corner_timer=-0.02
[16:58:36] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[16:58:36] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(565,1506), corner_timer=0.30
[16:58:36] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:58:36] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(467,1493), corner_timer=-0.02
[16:58:36] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[16:58:36] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(462,1493), corner_timer=0.30
[16:58:37] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:58:37] [INFO] [GrenadeTimer] Frag grenade landed - EXPLODING!
[16:58:37] [INFO] [GrenadeTimer] EXPLODED at (420.4292, 1686.7146)!
[16:58:37] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[16:58:37] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[16:58:37] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(420.4292, 1686.715), source=NEUTRAL (FragGrenade), range=2938, listeners=20
[16:58:37] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[16:58:37] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=10
[16:58:37] [INFO] [GrenadeTimer] Wall 'StorageRoom_WallTop' blocks view between explosion at (420.4292, 1686.7146) and player at (429.38614, 1493.5768)
[16:58:37] [INFO] [GrenadeTimer] Visual effect blocked by wall - player cannot see explosion at (420.4292, 1686.7146)
[16:58:37] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(425,1493), corner_timer=-0.02
[16:58:37] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[16:58:37] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(425,1493), corner_timer=0.30
[16:58:37] [INFO] [Player] Spawning blood effect at (425.49725, 1493.5768), dir=(-0.9961737, -0.08739525), lethal=False (C#)
[16:58:37] [INFO] [ImpactEffects] spawn_blood_effect called at (425.4973, 1493.577), dir=(-0.996174, -0.087395), lethal=false
[16:58:37] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:58:37] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:58:37] [INFO] [ImpactEffects] Blood effect spawned at (425.4973, 1493.577) (scale=1)
[16:58:37] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[16:58:37] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[16:58:37] [INFO] [PenultimateHit] Starting penultimate hit effect:
[16:58:37] [INFO] [PenultimateHit]   - Time scale: 0.10
[16:58:37] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[16:58:37] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[16:58:37] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[16:58:37] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[16:58:37] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[16:58:37] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[16:58:37] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[16:58:37] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:58:38] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:58:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:38] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:58:38] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:58:38] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:58:38] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:58:38] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:58:38] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[16:58:38] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:58:38] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:58:38] [ENEMY] [Enemy1] Death animation component initialized
[16:58:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:38] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:58:38] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:58:38] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:58:38] [ENEMY] [Enemy2] Death animation component initialized
[16:58:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:38] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:58:38] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:58:38] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:58:38] [INFO] [EnemyGrenade] Initialized: 1 grenades
[16:58:38] [ENEMY] [Enemy3] Death animation component initialized
[16:58:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:38] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:58:38] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:58:38] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:58:38] [ENEMY] [Enemy4] Death animation component initialized
[16:58:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:38] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:58:38] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:58:38] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:58:38] [ENEMY] [Enemy5] Death animation component initialized
[16:58:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:38] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:58:38] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:58:38] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:58:38] [ENEMY] [Enemy6] Death animation component initialized
[16:58:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:38] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:58:38] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:58:38] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:58:38] [ENEMY] [Enemy7] Death animation component initialized
[16:58:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:38] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:58:38] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:58:38] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:58:38] [ENEMY] [Enemy8] Death animation component initialized
[16:58:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:38] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:58:38] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:58:38] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:58:38] [ENEMY] [Enemy9] Death animation component initialized
[16:58:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:38] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:58:38] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:58:38] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:58:38] [ENEMY] [Enemy10] Death animation component initialized
[16:58:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:38] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:58:38] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:58:38] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:58:38] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[16:58:38] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:58:38] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:58:38] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:58:38] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:58:38] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:58:38] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:58:38] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:58:38] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[16:58:38] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:58:38] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:58:38] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:58:38] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:58:38] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:58:38] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:58:38] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:58:38] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:58:38] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:58:38] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:58:38] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:58:38] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:58:38] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:58:38] [INFO] [ScoreManager] Level started with 10 enemies
[16:58:38] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:58:38] [INFO] [CinemaEffects] Found player node: Player
[16:58:38] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:58:38] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[16:58:38] [ENEMY] [Enemy1] Registered as sound listener
[16:58:38] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[16:58:38] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:58:38] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[16:58:38] [ENEMY] [Enemy2] Registered as sound listener
[16:58:38] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[16:58:38] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:58:38] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[16:58:38] [ENEMY] [Enemy3] Registered as sound listener
[16:58:38] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[16:58:38] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:58:38] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[16:58:38] [ENEMY] [Enemy4] Registered as sound listener
[16:58:38] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[16:58:38] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:58:38] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[16:58:38] [ENEMY] [Enemy5] Registered as sound listener
[16:58:38] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[16:58:38] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:58:38] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[16:58:38] [ENEMY] [Enemy6] Registered as sound listener
[16:58:38] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[16:58:38] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:58:38] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[16:58:38] [ENEMY] [Enemy7] Registered as sound listener
[16:58:38] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[16:58:38] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:58:38] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[16:58:38] [ENEMY] [Enemy8] Registered as sound listener
[16:58:38] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[16:58:38] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:58:38] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[16:58:38] [ENEMY] [Enemy9] Registered as sound listener
[16:58:38] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[16:58:38] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:58:38] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[16:58:38] [ENEMY] [Enemy10] Registered as sound listener
[16:58:38] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[16:58:38] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:58:38] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:38] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:38] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:38] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:38] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:38] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:38] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=213.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:38] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:38] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:58:38] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:58:38] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:58:38] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:58:38] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:58:38] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:58:38] [INFO] [LastChance] Found player: Player
[16:58:38] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:58:38] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:58:38] [INFO] [LastChance] Connected to player Died signal (C#)
[16:58:38] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:58:38] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:58:38] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:58:38] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:58:38] [INFO] [BloodDecal] Blood puddle created at (318.7185, 1489.128) (added to group)
[16:58:38] [INFO] [BloodDecal] Blood puddle created at (301.844, 1524.94) (added to group)
[16:58:38] [INFO] [BloodDecal] Blood puddle created at (274.0048, 1559.289) (added to group)
[16:58:38] [INFO] [BloodDecal] Blood puddle created at (288.3574, 1490.216) (added to group)
[16:58:38] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:58:38] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (436.75113, 1314.1188)
[16:58:38] [INFO] [BloodDecal] Blood puddle created at (287.6982, 1582.335) (added to group)
[16:58:38] [INFO] [BloodDecal] Blood puddle created at (316.7666, 1553.561) (added to group)
[16:58:38] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[16:58:38] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Frag)
[16:58:38] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:58:38] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[16:58:38] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:58:38] [INFO] [Player.Grenade] Step 1 complete! Drag: (109.18155, 0)
[16:58:38] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:58:38] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:58:38] [INFO] [BloodDecal] Blood puddle created at (241.6491, 1482.646) (added to group)
[16:58:39] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:58:39] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:58:39] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1250), corner_timer=0.30
[16:58:39] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1250), corner_timer=0.30
[16:58:39] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,1250), corner_timer=-0.02
[16:58:39] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:58:39] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,1250), corner_timer=-0.02
[16:58:39] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:58:39] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,1250), corner_timer=0.30
[16:58:39] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,1250), corner_timer=0.30
[16:58:40] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,1250), corner_timer=-0.02
[16:58:40] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[16:58:40] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,1250), corner_timer=0.30
[16:58:40] [INFO] [Player.Grenade.Simple] Throwing! Target: (1001.4181, 1427.6624), Distance: 602,4, Speed: 601,2, Friction: 300,0
[16:58:40] [INFO] [Player.Grenade] Player rotated for throw: 0 -> 0,31168982
[16:58:40] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:58:40] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(0.95181674, 0.30666748), speed=601,2, spawn=(507.109, 1268.4)
[16:58:40] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:58:40] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:58:40] [INFO] [Player.Grenade] State reset to IDLE
[16:58:40] [INFO] [Player.Grenade] State reset to IDLE
[16:58:40] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:58:40] [INFO] [Player.Grenade] Player rotation restored to 0
[16:58:40] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,1250), corner_timer=-0.02
[16:58:40] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[16:58:40] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,1250), corner_timer=0.30
[16:58:40] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:58:40] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(450,1250), corner_timer=-0.02
[16:58:40] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[16:58:40] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(450,1250), corner_timer=0.30
[16:58:41] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(450,1250), corner_timer=-0.02
[16:58:41] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[16:58:41] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(450,1250), corner_timer=0.30
[16:58:41] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:58:41] [INFO] [GrenadeTimer] Frag grenade landed - EXPLODING!
[16:58:41] [INFO] [GrenadeTimer] EXPLODED at (954.9188, 1392.3)!
[16:58:41] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[16:58:41] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[16:58:41] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(954.9188, 1392.3), source=NEUTRAL (FragGrenade), range=2938, listeners=20
[16:58:41] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[16:58:41] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=9
[16:58:41] [INFO] [GrenadeTimer] Spawned C# explosion effect at (954.9188, 1392.3)
[16:58:41] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(450,1250), corner_timer=-0.02
[16:58:41] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[16:58:41] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(450,1250), corner_timer=0.30
[16:58:41] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:58:42] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(450,1250), corner_timer=-0.02
[16:58:42] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[16:58:42] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(450,1250), corner_timer=0.30
[16:58:42] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:58:42] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(450,1250), corner_timer=-0.02
[16:58:42] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[16:58:42] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(450,1250), corner_timer=0.30
[16:58:42] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:58:42] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:58:42] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:42] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:58:42] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:58:42] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:58:42] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:58:42] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:58:42] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:58:42] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:58:42] [ENEMY] [Enemy1] Death animation component initialized
[16:58:42] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:42] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:58:42] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:58:42] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:58:42] [ENEMY] [Enemy2] Death animation component initialized
[16:58:42] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:42] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:58:42] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:58:42] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:58:42] [ENEMY] [Enemy3] Death animation component initialized
[16:58:42] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:42] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:58:42] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:58:42] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:58:42] [ENEMY] [Enemy4] Death animation component initialized
[16:58:42] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:42] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:58:42] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:58:42] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:58:42] [ENEMY] [Enemy5] Death animation component initialized
[16:58:42] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:42] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:58:42] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:58:42] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:58:42] [ENEMY] [Enemy6] Death animation component initialized
[16:58:42] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:42] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:58:42] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:58:42] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:58:42] [ENEMY] [Enemy7] Death animation component initialized
[16:58:42] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:42] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:58:42] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:58:42] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:58:42] [ENEMY] [Enemy8] Death animation component initialized
[16:58:42] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:42] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:58:42] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:58:42] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:58:42] [ENEMY] [Enemy9] Death animation component initialized
[16:58:42] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:42] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:58:42] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:58:42] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:58:42] [ENEMY] [Enemy10] Death animation component initialized
[16:58:42] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:42] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:58:42] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:58:42] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:58:42] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[16:58:42] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:58:42] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:58:42] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:58:42] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:58:42] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:58:42] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:58:42] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:58:42] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[16:58:42] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:58:42] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:58:42] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:58:42] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:58:42] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:58:42] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:58:42] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:58:42] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:58:42] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:58:42] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:58:42] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:58:42] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:58:42] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:58:42] [INFO] [ScoreManager] Level started with 10 enemies
[16:58:42] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:58:42] [INFO] [CinemaEffects] Found player node: Player
[16:58:42] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:58:42] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[16:58:42] [ENEMY] [Enemy1] Registered as sound listener
[16:58:42] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[16:58:42] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:58:42] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[16:58:42] [ENEMY] [Enemy2] Registered as sound listener
[16:58:42] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[16:58:42] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:58:42] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[16:58:42] [ENEMY] [Enemy3] Registered as sound listener
[16:58:42] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[16:58:42] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:58:42] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[16:58:42] [ENEMY] [Enemy4] Registered as sound listener
[16:58:42] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[16:58:42] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:58:42] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[16:58:42] [ENEMY] [Enemy5] Registered as sound listener
[16:58:42] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[16:58:42] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:58:42] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[16:58:42] [ENEMY] [Enemy6] Registered as sound listener
[16:58:42] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[16:58:42] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:58:42] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[16:58:42] [ENEMY] [Enemy7] Registered as sound listener
[16:58:42] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[16:58:42] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:58:42] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[16:58:42] [ENEMY] [Enemy8] Registered as sound listener
[16:58:42] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[16:58:42] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:58:42] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[16:58:42] [ENEMY] [Enemy9] Registered as sound listener
[16:58:42] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[16:58:42] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:58:42] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[16:58:42] [ENEMY] [Enemy10] Registered as sound listener
[16:58:42] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[16:58:42] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:58:42] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:42] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:42] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:42] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:42] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:42] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:42] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:42] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:42] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:58:42] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:58:42] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:58:42] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:58:42] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:58:42] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:58:42] [INFO] [LastChance] Found player: Player
[16:58:42] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:58:42] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:58:42] [INFO] [LastChance] Connected to player Died signal (C#)
[16:58:42] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:58:42] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:58:42] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:58:42] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:58:43] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:58:43] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (890.0217, 1401.6141)
[16:58:43] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[16:58:43] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Frag)
[16:58:43] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:58:43] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[16:58:43] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:58:43] [INFO] [Player.Grenade] Step 1 complete! Drag: (87.1463, 30.72351)
[16:58:43] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:58:43] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:58:44] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:58:44] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:58:44] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(541,1186), corner_timer=0.30
[16:58:44] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(541,1186), corner_timer=0.30
[16:58:44] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(543,1183), corner_timer=-0.02
[16:58:44] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:58:44] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(543,1183), corner_timer=-0.02
[16:58:44] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:58:44] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(543,1183), corner_timer=0.30
[16:58:44] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(543,1183), corner_timer=0.30
[16:58:44] [INFO] [Player.Grenade.Simple] Throwing! Target: (1122.3362, 1488.5521), Distance: 689,5, Speed: 643,2, Friction: 300,0
[16:58:44] [INFO] [Player.Grenade] Player rotated for throw: 0 -> 0,48456785
[16:58:44] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:58:44] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(0.8848764, 0.465826), speed=643,2, spawn=(596.38446, 1211.675)
[16:58:44] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:58:44] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:58:44] [INFO] [Player.Grenade] State reset to IDLE
[16:58:44] [INFO] [Player.Grenade] State reset to IDLE
[16:58:44] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:58:44] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(543,1183), corner_timer=-0.02
[16:58:44] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[16:58:44] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(543,1183), corner_timer=0.30
[16:58:44] [INFO] [Player.Grenade] Player rotation restored to 0
[16:58:45] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:58:45] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(543,1183), corner_timer=-0.02
[16:58:45] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[16:58:45] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(543,1183), corner_timer=0.30
[16:58:45] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(531,1225), corner_timer=-0.02
[16:58:45] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[16:58:45] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(528,1229), corner_timer=0.30
[16:58:45] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(462,1293), corner_timer=-0.02
[16:58:45] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[16:58:45] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(459,1295), corner_timer=0.30
[16:58:46] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:58:46] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(449,1304), corner_timer=-0.02
[16:58:46] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[16:58:46] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(449,1304), corner_timer=0.30
[16:58:46] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:58:46] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(449,1304), corner_timer=-0.02
[16:58:46] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[16:58:46] [INFO] [GrenadeTimer] Frag grenade landed - EXPLODING!
[16:58:46] [INFO] [GrenadeTimer] EXPLODED at (1156.2434, 1506.4014)!
[16:58:46] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[16:58:46] [ENEMY] [Enemy10] Hit taken, damage: 1, health: 2/2 -> 1/2
[16:58:46] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[16:58:46] [INFO] [ImpactEffects] spawn_blood_effect called at (1159.099, 1601.934), dir=(0.029874, 0.999554), lethal=false
[16:58:46] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:58:46] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:58:46] [INFO] [ImpactEffects] Wall found for blood splatter at (1159.818, 1626) (dist=24 px)
[16:58:46] [INFO] [BloodDecal] Blood puddle created at (1159.818, 1625) (added to group)
[16:58:46] [INFO] [ImpactEffects] Blood effect spawned at (1159.099, 1601.934) (scale=1)
[16:58:46] [ENEMY] [Enemy10] Hit taken, damage: 1, health: 1/2 -> 0/2
[16:58:46] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[16:58:46] [INFO] [ImpactEffects] spawn_blood_effect called at (1159.099, 1601.934), dir=(0.029874, 0.999554), lethal=true
[16:58:46] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:58:46] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[16:58:46] [INFO] [ImpactEffects] Wall found for blood splatter at (1159.818, 1626) (dist=24 px)
[16:58:46] [INFO] [BloodDecal] Blood puddle created at (1159.818, 1625) (added to group)
[16:58:46] [INFO] [ImpactEffects] Blood effect spawned at (1159.099, 1601.934) (scale=1.5)
[16:58:46] [ENEMY] [Enemy10] Enemy died (ricochet: false, penetration: false)
[16:58:46] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[16:58:46] [INFO] [SoundPropagation] Unregistered listener: Enemy10 (remaining: 19)
[16:58:46] [INFO] [DeathAnim] Started - Angle: 88.3 deg, Index: 17
[16:58:46] [ENEMY] [Enemy10] Death animation started with hit direction: (0.029874, 0.999554)
[16:58:46] [INFO] [GrenadeTimer] Damaged enemy at distance 95,6
[16:58:46] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[16:58:46] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(1156.243, 1506.401), source=NEUTRAL (FragGrenade), range=2938, listeners=19
[16:58:46] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[16:58:46] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=9
[16:58:46] [INFO] [GrenadeTimer] Wall 'MainHall_WallLeft' blocks view between explosion at (1156.2434, 1506.4014) and player at (449.79352, 1304.2407)
[16:58:46] [INFO] [GrenadeTimer] Visual effect blocked by wall - player cannot see explosion at (1156.2434, 1506.4014)
[16:58:46] [INFO] [BloodyFeet:Enemy10] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[16:58:46] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(449,1304), corner_timer=0.30
[16:58:47] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(449,1304), corner_timer=-0.02
[16:58:47] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[16:58:47] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(449,1304), corner_timer=0.30
[16:58:47] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 3/3 -> 2/3
[16:58:47] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[16:58:47] [INFO] [ImpactEffects] spawn_blood_effect called at (800, 900), dir=(-0.187872, -0.982194), lethal=false
[16:58:47] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:58:47] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:58:47] [INFO] [ImpactEffects] Blood effect spawned at (800, 900) (scale=1)
[16:58:47] [ENEMY] [Enemy10] Ragdoll activated
[16:58:47] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[16:58:47] [INFO] [BloodDecal] Blood puddle created at (792.3506, 845.4866) (added to group)
[16:58:47] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(449,1304), corner_timer=-0.02
[16:58:47] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[16:58:47] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(449,1304), corner_timer=0.30
[16:58:47] [INFO] [BloodDecal] Blood puddle created at (765.8186, 876.5922) (added to group)
[16:58:47] [INFO] [BloodDecal] Blood puddle created at (784.2115, 867.7011) (added to group)
[16:58:47] [INFO] [BloodDecal] Blood puddle created at (762.4259, 875.0073) (added to group)
[16:58:47] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:58:47] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:47] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:58:47] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:58:47] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:58:47] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:58:47] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:58:47] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:58:47] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:58:47] [ENEMY] [Enemy1] Death animation component initialized
[16:58:47] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:47] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:58:47] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:58:47] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:58:47] [ENEMY] [Enemy2] Death animation component initialized
[16:58:47] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:47] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:58:47] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:58:47] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:58:47] [ENEMY] [Enemy3] Death animation component initialized
[16:58:47] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:47] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:58:47] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:58:47] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:58:47] [INFO] [EnemyGrenade] Initialized: 1 grenades
[16:58:47] [ENEMY] [Enemy4] Death animation component initialized
[16:58:47] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:47] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:58:47] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:58:47] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:58:47] [ENEMY] [Enemy5] Death animation component initialized
[16:58:47] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:47] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:58:47] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:58:47] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:58:47] [ENEMY] [Enemy6] Death animation component initialized
[16:58:47] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:47] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:58:47] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:58:47] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:58:47] [ENEMY] [Enemy7] Death animation component initialized
[16:58:47] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:47] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:58:47] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:58:47] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:58:47] [ENEMY] [Enemy8] Death animation component initialized
[16:58:47] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:47] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:58:47] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:58:47] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:58:47] [ENEMY] [Enemy9] Death animation component initialized
[16:58:47] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:47] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:58:47] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:58:47] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:58:47] [ENEMY] [Enemy10] Death animation component initialized
[16:58:47] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:47] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:58:47] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:58:47] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:58:47] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[16:58:47] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:58:47] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:58:47] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:58:47] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:58:47] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:58:47] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:58:47] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:58:47] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[16:58:47] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:58:47] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:58:47] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:58:47] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:58:47] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:58:47] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:58:47] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:58:47] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:58:47] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:58:47] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:58:47] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:58:47] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:58:47] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:58:47] [INFO] [ScoreManager] Level started with 10 enemies
[16:58:47] [INFO] [BloodDecal] Blood puddle created at (765.66, 846.5633) (added to group)
[16:58:47] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:58:47] [INFO] [CinemaEffects] Found player node: Player
[16:58:47] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:58:47] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[16:58:47] [ENEMY] [Enemy1] Registered as sound listener
[16:58:47] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[16:58:47] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:58:47] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[16:58:47] [ENEMY] [Enemy2] Registered as sound listener
[16:58:47] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[16:58:47] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:58:47] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[16:58:47] [ENEMY] [Enemy3] Registered as sound listener
[16:58:47] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[16:58:47] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:58:47] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[16:58:47] [ENEMY] [Enemy4] Registered as sound listener
[16:58:47] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[16:58:47] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:58:47] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[16:58:47] [ENEMY] [Enemy5] Registered as sound listener
[16:58:47] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[16:58:47] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:58:47] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[16:58:47] [ENEMY] [Enemy6] Registered as sound listener
[16:58:47] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[16:58:47] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:58:47] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[16:58:47] [ENEMY] [Enemy7] Registered as sound listener
[16:58:47] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[16:58:47] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:58:47] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[16:58:47] [ENEMY] [Enemy8] Registered as sound listener
[16:58:47] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[16:58:47] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:58:47] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[16:58:47] [ENEMY] [Enemy9] Registered as sound listener
[16:58:47] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[16:58:47] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:58:47] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[16:58:47] [ENEMY] [Enemy10] Registered as sound listener
[16:58:47] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[16:58:47] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:58:47] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:47] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:47] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:47] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:47] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:47] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:47] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=157.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:47] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:47] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:58:47] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:58:47] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:58:47] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:58:47] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:58:47] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:58:47] [INFO] [LastChance] Found player: Player
[16:58:47] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:58:47] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:58:47] [INFO] [LastChance] Connected to player Died signal (C#)
[16:58:47] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:58:47] [INFO] [BloodDecal] Blood puddle created at (764.2543, 817.6284) (added to group)
[16:58:47] [INFO] [BloodDecal] Blood puddle created at (800.5641, 807.4503) (added to group)
[16:58:47] [INFO] [BloodDecal] Blood puddle created at (809.638, 842.6072) (added to group)
[16:58:47] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:58:47] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:58:47] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:58:47] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:58:47] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (993.66364, 1484.4341)
[16:58:48] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[16:58:48] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Frag)
[16:58:48] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:58:48] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[16:58:48] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:58:48] [INFO] [Player.Grenade] Step 1 complete! Drag: (92.53046, 5.3432617)
[16:58:48] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:58:48] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:58:49] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:58:49] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:58:49] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(441,1076), corner_timer=0.30
[16:58:49] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(441,1076), corner_timer=0.30
[16:58:49] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(371,1000), corner_timer=-0.02
[16:58:49] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:58:49] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(371,1000), corner_timer=-0.02
[16:58:49] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:58:49] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(367,996), corner_timer=0.30
[16:58:49] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(367,996), corner_timer=0.30
[16:58:49] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(296,931), corner_timer=-0.02
[16:58:49] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[16:58:49] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(293,929), corner_timer=0.30
[16:58:49] [INFO] [Player.Grenade.Simple] Throwing! Target: (590.56226, 688.6919), Distance: 376,3, Speed: 475,1, Friction: 300,0
[16:58:49] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,6539452
[16:58:49] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:58:49] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(0.79369, -0.60832244), speed=475,1, spawn=(333.1238, 886.0052)
[16:58:49] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:58:49] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:58:49] [INFO] [Player.Grenade] State reset to IDLE
[16:58:49] [INFO] [Player.Grenade] State reset to IDLE
[16:58:49] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:58:49] [INFO] [Player.Grenade] Player rotation restored to 0
[16:58:50] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(279,933), corner_timer=-0.02
[16:58:50] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[16:58:50] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(281,935), corner_timer=0.30
[16:58:50] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:58:50] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(356,968), corner_timer=-0.02
[16:58:50] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[16:58:50] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(362,968), corner_timer=0.30
[16:58:50] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(466,968), corner_timer=-0.02
[16:58:50] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[16:58:50] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(472,968), corner_timer=0.30
[16:58:51] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:58:51] [INFO] [GrenadeTimer] Frag grenade landed - EXPLODING!
[16:58:51] [INFO] [GrenadeTimer] EXPLODED at (614.5113, 670.3359)!
[16:58:51] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[16:58:51] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/2 -> 1/2
[16:58:51] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[16:58:51] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.73159, 0.681745), lethal=false
[16:58:51] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:58:51] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:58:51] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[16:58:51] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 1/2 -> 0/2
[16:58:51] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[16:58:51] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.73159, 0.681745), lethal=true
[16:58:51] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:58:51] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[16:58:51] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1.5)
[16:58:51] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[16:58:51] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[16:58:51] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[16:58:51] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 18)
[16:58:51] [INFO] [DeathAnim] Started - Angle: 43.0 deg, Index: 14
[16:58:51] [ENEMY] [Enemy3] Death animation started with hit direction: (0.73159, 0.681745)
[16:58:51] [INFO] [GrenadeTimer] Damaged enemy at distance 116,9
[16:58:51] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[16:58:51] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(614.5113, 670.3359), source=NEUTRAL (FragGrenade), range=2938, listeners=18
[16:58:51] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[16:58:51] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=6
[16:58:51] [INFO] [GrenadeTimer] Wall 'Room2_WallLeft' blocks view between explosion at (614.5113, 670.3359) and player at (483.99432, 968.89777)
[16:58:51] [INFO] [GrenadeTimer] Visual effect blocked by wall - player cannot see explosion at (614.5113, 670.3359)
[16:58:51] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(483,968), corner_timer=-0.02
[16:58:51] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[16:58:51] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(483,968), corner_timer=0.30
[16:58:51] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:58:51] [INFO] [BloodDecal] Blood puddle created at (740.1293, 785.4467) (added to group)
[16:58:51] [INFO] [BloodDecal] Blood puddle created at (779.8161, 809.7903) (added to group)
[16:58:51] [INFO] [BloodDecal] Blood puddle created at (791.6001, 801.5491) (added to group)
[16:58:51] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(483,968), corner_timer=-0.02
[16:58:51] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[16:58:51] [INFO] [BloodDecal] Blood puddle created at (832.3763, 843.9443) (added to group)
[16:58:51] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(483,968), corner_timer=0.30
[16:58:51] [ENEMY] [Enemy3] Ragdoll activated
[16:58:51] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[16:58:51] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:58:51] [INFO] [BloodDecal] Blood puddle created at (883.8123, 884.4213) (added to group)
[16:58:51] [INFO] [BloodDecal] Blood puddle created at (866.4211, 910.1312) (added to group)
[16:58:51] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(483,968), corner_timer=-0.02
[16:58:51] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[16:58:51] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(483,968), corner_timer=0.30
[16:58:52] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:58:53] [INFO] [PauseMenu] Armory button pressed
[16:58:53] [INFO] [PauseMenu] Creating new armory menu instance
[16:58:53] [INFO] [PauseMenu] armory_menu_scene resource path: res://scenes/ui/ArmoryMenu.tscn
[16:58:53] [INFO] [PauseMenu] Instance created, class: CanvasLayer, name: ArmoryMenu
[16:58:53] [INFO] [PauseMenu] Script attached: res://scripts/ui/armory_menu.gd
[16:58:53] [INFO] [PauseMenu] back_pressed signal exists on instance
[16:58:53] [INFO] [PauseMenu] back_pressed signal connected
[16:58:53] [INFO] [PauseMenu] Armory menu instance added as child, is_inside_tree: true
[16:58:53] [INFO] [PauseMenu] _populate_weapon_grid method exists
[16:58:54] [INFO] [GrenadeManager] Grenade type changed from Frag Grenade to Flashbang
[16:58:54] [INFO] [GrenadeManager] Restarting level due to grenade type change
[16:58:54] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:58:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:54] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:58:54] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:58:54] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:58:54] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:58:54] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:58:54] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:58:54] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:58:54] [ENEMY] [Enemy1] Death animation component initialized
[16:58:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:54] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:58:54] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:58:54] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:58:54] [ENEMY] [Enemy2] Death animation component initialized
[16:58:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:54] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:58:54] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:58:54] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:58:54] [ENEMY] [Enemy3] Death animation component initialized
[16:58:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:54] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:58:54] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:58:54] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:58:54] [ENEMY] [Enemy4] Death animation component initialized
[16:58:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:54] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:58:54] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:58:54] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:58:54] [ENEMY] [Enemy5] Death animation component initialized
[16:58:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:54] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:58:54] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:58:54] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:58:54] [ENEMY] [Enemy6] Death animation component initialized
[16:58:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:54] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:58:54] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:58:54] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:58:54] [ENEMY] [Enemy7] Death animation component initialized
[16:58:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:54] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:58:54] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:58:54] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:58:54] [ENEMY] [Enemy8] Death animation component initialized
[16:58:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:54] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:58:54] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:58:54] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:58:54] [ENEMY] [Enemy9] Death animation component initialized
[16:58:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:54] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:58:54] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:58:54] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:58:54] [ENEMY] [Enemy10] Death animation component initialized
[16:58:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:54] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:58:54] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:58:54] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:58:54] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[16:58:54] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:58:54] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:58:54] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:58:54] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:58:54] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:58:54] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:58:54] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:58:54] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[16:58:54] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:58:54] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:58:54] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:58:54] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:58:54] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:58:54] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:58:54] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:58:54] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:58:54] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:58:54] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:58:54] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:58:54] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:58:54] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:58:54] [INFO] [ScoreManager] Level started with 10 enemies
[16:58:54] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:58:54] [INFO] [CinemaEffects] Found player node: Player
[16:58:54] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:58:54] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[16:58:54] [ENEMY] [Enemy1] Registered as sound listener
[16:58:54] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[16:58:54] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:58:54] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[16:58:54] [ENEMY] [Enemy2] Registered as sound listener
[16:58:54] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[16:58:54] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:58:54] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[16:58:54] [ENEMY] [Enemy3] Registered as sound listener
[16:58:54] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[16:58:54] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:58:54] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[16:58:54] [ENEMY] [Enemy4] Registered as sound listener
[16:58:54] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[16:58:54] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:58:54] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[16:58:54] [ENEMY] [Enemy5] Registered as sound listener
[16:58:54] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[16:58:54] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:58:54] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[16:58:54] [ENEMY] [Enemy6] Registered as sound listener
[16:58:54] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[16:58:54] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:58:54] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[16:58:54] [ENEMY] [Enemy7] Registered as sound listener
[16:58:54] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[16:58:54] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:58:54] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[16:58:54] [ENEMY] [Enemy8] Registered as sound listener
[16:58:54] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[16:58:54] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:58:54] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[16:58:54] [ENEMY] [Enemy9] Registered as sound listener
[16:58:54] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[16:58:54] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:58:54] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[16:58:54] [ENEMY] [Enemy10] Registered as sound listener
[16:58:54] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[16:58:54] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:58:54] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:54] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:54] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:54] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:54] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:54] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:54] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:54] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:54] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:58:54] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:58:54] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:58:54] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:58:54] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:58:54] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:58:54] [INFO] [LastChance] Found player: Player
[16:58:54] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:58:54] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:58:54] [INFO] [LastChance] Connected to player Died signal (C#)
[16:58:54] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:58:54] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:58:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:54] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:58:54] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:58:54] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:58:54] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:58:54] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:58:54] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:58:54] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:58:54] [ENEMY] [Enemy1] Death animation component initialized
[16:58:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:54] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:58:54] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:58:54] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:58:54] [ENEMY] [Enemy2] Death animation component initialized
[16:58:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:54] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:58:54] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:58:54] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:58:54] [ENEMY] [Enemy3] Death animation component initialized
[16:58:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:54] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:58:54] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:58:54] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:58:54] [ENEMY] [Enemy4] Death animation component initialized
[16:58:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:54] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:58:54] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:58:54] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:58:54] [ENEMY] [Enemy5] Death animation component initialized
[16:58:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:54] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:58:54] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:58:54] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:58:54] [ENEMY] [Enemy6] Death animation component initialized
[16:58:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:54] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:58:54] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:58:54] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:58:54] [ENEMY] [Enemy7] Death animation component initialized
[16:58:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:54] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:58:54] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:58:54] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:58:54] [ENEMY] [Enemy8] Death animation component initialized
[16:58:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:54] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:58:54] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:58:54] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:58:54] [ENEMY] [Enemy9] Death animation component initialized
[16:58:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:54] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:58:54] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:58:54] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:58:54] [ENEMY] [Enemy10] Death animation component initialized
[16:58:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:58:54] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:58:54] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:58:54] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:58:54] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[16:58:54] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:58:54] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:58:54] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:58:54] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:58:54] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:58:54] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:58:54] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:58:54] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[16:58:54] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:58:54] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:58:54] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:58:54] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:58:54] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:58:54] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:58:54] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:58:54] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:58:54] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:58:54] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:58:54] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:58:54] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:58:54] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:58:54] [INFO] [ScoreManager] Level started with 10 enemies
[16:58:54] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:58:54] [INFO] [CinemaEffects] Found player node: Player
[16:58:54] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:58:54] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 20)
[16:58:54] [ENEMY] [Enemy1] Registered as sound listener
[16:58:54] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[16:58:54] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:58:54] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 21)
[16:58:54] [ENEMY] [Enemy2] Registered as sound listener
[16:58:54] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[16:58:54] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:58:54] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 22)
[16:58:54] [ENEMY] [Enemy3] Registered as sound listener
[16:58:54] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[16:58:54] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:58:54] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 23)
[16:58:54] [ENEMY] [Enemy4] Registered as sound listener
[16:58:54] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[16:58:54] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:58:54] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 24)
[16:58:54] [ENEMY] [Enemy5] Registered as sound listener
[16:58:54] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[16:58:54] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:58:54] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 25)
[16:58:54] [ENEMY] [Enemy6] Registered as sound listener
[16:58:54] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[16:58:54] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:58:54] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 26)
[16:58:54] [ENEMY] [Enemy7] Registered as sound listener
[16:58:54] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[16:58:54] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:58:54] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 27)
[16:58:54] [ENEMY] [Enemy8] Registered as sound listener
[16:58:54] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[16:58:54] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:58:54] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 28)
[16:58:54] [ENEMY] [Enemy9] Registered as sound listener
[16:58:54] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[16:58:54] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:58:54] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 29)
[16:58:54] [ENEMY] [Enemy10] Registered as sound listener
[16:58:54] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[16:58:54] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:58:54] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:54] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:54] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:54] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:54] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:54] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=225.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:54] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:54] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:58:54] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:58:54] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:58:54] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:58:54] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:58:54] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:58:54] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:58:54] [INFO] [LastChance] Found player: Player
[16:58:54] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:58:54] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:58:54] [INFO] [LastChance] Connected to player Died signal (C#)
[16:58:54] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:58:55] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:58:55] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:58:55] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:58:55] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:58:55] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (569.6524, 1126.4379)
[16:58:55] [INFO] [GrenadeTimer] Initialized for Flashbang grenade, effect radius: 400
[16:58:55] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Flashbang)
[16:58:55] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:58:55] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[16:58:55] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:58:55] [INFO] [Player.Grenade] Step 1 complete! Drag: (172.02136, -3.3394775)
[16:58:55] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:58:55] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:58:56] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:58:56] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:58:56] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(406,1041), corner_timer=0.30
[16:58:56] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(406,1041), corner_timer=0.30
[16:58:56] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(332,967), corner_timer=-0.02
[16:58:56] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:58:56] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(332,967), corner_timer=-0.02
[16:58:56] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:58:56] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(328,963), corner_timer=0.30
[16:58:56] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(328,963), corner_timer=0.30
[16:58:56] [INFO] [Player.Grenade.Simple] Throwing! Target: (671.39624, 628.7515), Distance: 493,2, Speed: 544,0, Friction: 300,0
[16:58:56] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,6249741
[16:58:56] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:58:56] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(0.8109783, -0.5850763), speed=544,0, spawn=(326.61646, 877.4912)
[16:58:56] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:58:56] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:58:56] [INFO] [Player.Grenade] State reset to IDLE
[16:58:56] [INFO] [Player.Grenade] State reset to IDLE
[16:58:56] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:58:57] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(275,910), corner_timer=-0.02
[16:58:57] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[16:58:57] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(273,909), corner_timer=0.30
[16:58:57] [INFO] [Player.Grenade] Player rotation restored to 0
[16:58:57] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:58:57] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(261,955), corner_timer=-0.02
[16:58:57] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[16:58:57] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(261,958), corner_timer=0.30
[16:58:57] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(260,972), corner_timer=-0.02
[16:58:57] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[16:58:57] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(260,972), corner_timer=0.30
[16:58:58] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(260,972), corner_timer=-0.02
[16:58:58] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[16:58:58] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(260,972), corner_timer=0.30
[16:58:58] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:58:58] [INFO] [GrenadeTimer] Flashbang grenade landed at (677.4335, 624.396)
[16:58:58] [INFO] [SoundPropagation] Sound emitted: type=GRENADE_LANDING, pos=(677.4335, 624.396), source=NEUTRAL (FlashbangGrenade), range=112, listeners=29
[16:58:58] [INFO] [SoundPropagation] Cleaned up 19 invalid listeners
[16:58:58] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=10, self=0, below_threshold=0
[16:58:58] [INFO] [GrenadeTimer] Emitted grenade landing sound at (677.4335, 624.396)
[16:58:58] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=164.5°, current=-168.8°, player=(260,872), corner_timer=0.00
[16:58:58] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[16:58:58] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(260,872), corner_timer=-0.02
[16:58:58] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[16:58:58] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(260,866), corner_timer=0.30
[16:58:58] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=165.7°, current=-9.4°, player=(260,861), corner_timer=0.00
[16:58:58] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:58:58] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(260,820), corner_timer=-0.02
[16:58:58] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[16:58:58] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(260,820), corner_timer=0.30
[16:58:58] [ENEMY] [Enemy4] Memory: high confidence (0.86) - transitioning to PURSUING
[16:58:58] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[16:58:58] [ENEMY] [Enemy2] Memory: high confidence (0.86) - transitioning to PURSUING
[16:58:58] [ENEMY] [Enemy2] State: IDLE -> PURSUING
[16:58:58] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=-171.6°, current=-101.3°, player=(260,820), corner_timer=0.00
[16:58:58] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=117.3°, current=45.0°, player=(260,820), corner_timer=0.00
[16:58:59] [ENEMY] [Enemy2] PURSUING corner check: angle 29.0°
[16:58:59] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[16:58:59] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:58:59] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[16:58:59] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(260,820), corner_timer=-0.02
[16:58:59] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[16:58:59] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(260,820), corner_timer=0.30
[16:58:59] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=171.4°, current=123.0°, player=(260,820), corner_timer=0.00
[16:58:59] [INFO] [GrenadeTimer] Timer expired - EXPLODING!
[16:58:59] [INFO] [GrenadeTimer] EXPLODED at (680.5225, 622.16736)!
[16:58:59] [INFO] [GrenadeTimer] Applying flashbang effects (radius: 400, blindness: 12s, stun: 6s)
[16:58:59] [ENEMY] [Enemy2] Flashbang: blind=1.9s, stun=1.0s
[16:58:59] [ENEMY] [Enemy2] Status: BLINDED applied
[16:58:59] [ENEMY] [Enemy2] Status: STUNNED applied
[16:58:59] [INFO] [GrenadeTimer] Applied flashbang to enemy at distance 335,9 (intensity: 0,16)
[16:58:59] [ENEMY] [Enemy3] Flashbang: blind=5.6s, stun=2.8s
[16:58:59] [ENEMY] [Enemy3] Status: BLINDED applied
[16:58:59] [ENEMY] [Enemy3] Status: STUNNED applied
[16:58:59] [INFO] [GrenadeTimer] Applied flashbang to enemy at distance 212,1 (intensity: 0,47)
[16:58:59] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(680.5225, 622.1674), source=NEUTRAL (FlashbangGrenade), range=2938, listeners=10
[16:58:59] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=0, below_threshold=6
[16:58:59] [INFO] [GrenadeTimer] Wall 'Room1_WallBottom' blocks view between explosion at (680.5225, 622.16736) and player at (260.6503, 820.3369)
[16:58:59] [INFO] [GrenadeTimer] Visual effect blocked by wall - player cannot see explosion at (680.5225, 622.16736)
[16:58:59] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=PURSUING, target=171.4°, current=125.9°, player=(260,820), corner_timer=0.00
[16:58:59] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:58:59] [ENEMY] [Enemy4] PURSUING corner check: angle -94.0°
[16:58:59] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(260,820), corner_timer=-0.02
[16:58:59] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[16:58:59] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(260,820), corner_timer=0.30
[16:58:59] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:58:59] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(260,820), corner_timer=-0.02
[16:58:59] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[16:58:59] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(260,820), corner_timer=0.30
[16:59:00] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:59:00] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.5°, current=89.5°, player=(260,820), corner_timer=-0.02
[16:59:00] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[16:59:00] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(260,820), corner_timer=0.30
[16:59:00] [ENEMY] [Enemy2] Status: STUNNED removed
[16:59:00] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:59:00] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.4°, current=89.5°, player=(260,820), corner_timer=-0.02
[16:59:00] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[16:59:00] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.3°, player=(260,820), corner_timer=0.30
[16:59:00] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:59:00] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:59:00] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:59:00] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:59:00] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:59:00] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:59:00] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:59:00] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:59:00] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:59:00] [ENEMY] [Enemy1] Death animation component initialized
[16:59:00] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:59:00] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:59:00] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:59:00] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:59:00] [ENEMY] [Enemy2] Death animation component initialized
[16:59:00] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:59:00] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:59:00] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:59:00] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:59:00] [ENEMY] [Enemy3] Death animation component initialized
[16:59:00] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:59:00] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:59:00] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:59:00] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:59:00] [ENEMY] [Enemy4] Death animation component initialized
[16:59:00] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:59:00] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:59:00] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:59:00] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:59:00] [ENEMY] [Enemy5] Death animation component initialized
[16:59:00] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:59:00] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:59:00] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:59:00] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:59:00] [ENEMY] [Enemy6] Death animation component initialized
[16:59:00] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:59:00] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:59:00] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:59:00] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:59:00] [ENEMY] [Enemy7] Death animation component initialized
[16:59:00] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:59:00] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:59:00] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:59:00] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:59:00] [ENEMY] [Enemy8] Death animation component initialized
[16:59:00] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:59:00] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:59:00] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:59:00] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:59:00] [ENEMY] [Enemy9] Death animation component initialized
[16:59:00] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:59:00] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:59:00] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:59:00] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:59:00] [ENEMY] [Enemy10] Death animation component initialized
[16:59:00] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:59:00] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:59:00] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:59:00] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:59:00] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[16:59:00] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:59:00] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:59:00] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:59:00] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:59:00] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:59:00] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:59:00] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:59:00] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[16:59:00] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:59:00] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:59:00] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:59:00] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:59:00] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:59:00] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:59:00] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:59:00] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:59:00] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:59:00] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:59:00] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:59:00] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:59:00] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:59:00] [INFO] [ScoreManager] Level started with 10 enemies
[16:59:00] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:59:00] [INFO] [CinemaEffects] Found player node: Player
[16:59:00] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:59:00] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[16:59:00] [ENEMY] [Enemy1] Registered as sound listener
[16:59:00] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[16:59:00] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:59:00] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[16:59:00] [ENEMY] [Enemy2] Registered as sound listener
[16:59:00] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[16:59:00] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:59:00] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[16:59:00] [ENEMY] [Enemy3] Registered as sound listener
[16:59:00] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[16:59:00] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:59:00] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[16:59:00] [ENEMY] [Enemy4] Registered as sound listener
[16:59:00] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[16:59:00] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:59:00] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[16:59:00] [ENEMY] [Enemy5] Registered as sound listener
[16:59:00] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[16:59:00] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:59:00] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[16:59:00] [ENEMY] [Enemy6] Registered as sound listener
[16:59:00] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[16:59:00] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:59:00] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[16:59:00] [ENEMY] [Enemy7] Registered as sound listener
[16:59:00] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[16:59:00] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:59:00] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[16:59:00] [ENEMY] [Enemy8] Registered as sound listener
[16:59:00] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[16:59:00] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:59:00] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[16:59:00] [ENEMY] [Enemy9] Registered as sound listener
[16:59:00] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[16:59:00] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:59:00] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[16:59:00] [ENEMY] [Enemy10] Registered as sound listener
[16:59:00] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[16:59:00] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:59:00] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:59:00] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:59:00] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=236.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:59:00] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:59:00] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:59:00] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:59:00] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=157.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:59:00] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:59:00] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:59:00] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:59:00] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:59:00] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:59:00] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:59:00] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:59:00] [INFO] [LastChance] Found player: Player
[16:59:00] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:59:00] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:59:00] [INFO] [LastChance] Connected to player Died signal (C#)
[16:59:00] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:59:00] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:59:00] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[16:59:00] [INFO] [Player.Grenade] G pressed - starting grab animation
[16:59:01] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[16:59:01] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (644.05084, 952.11505)
[16:59:01] [INFO] [GrenadeTimer] Initialized for Flashbang grenade, effect radius: 400
[16:59:01] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Flashbang)
[16:59:01] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[16:59:01] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[16:59:01] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[16:59:01] [INFO] [Player.Grenade] Step 1 complete! Drag: (95.75055, 26.048218)
[16:59:01] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[16:59:01] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[16:59:02] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:59:02] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:59:02] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1017), corner_timer=0.30
[16:59:02] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1017), corner_timer=0.30
[16:59:02] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(398,934), corner_timer=-0.02
[16:59:02] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:59:02] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(398,934), corner_timer=-0.02
[16:59:02] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:59:02] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(394,930), corner_timer=0.30
[16:59:02] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(394,930), corner_timer=0.30
[16:59:02] [INFO] [Player.Grenade.Simple] Throwing! Target: (652.0212, 662.49884), Distance: 376,7, Speed: 475,4, Friction: 300,0
[16:59:02] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,6518748
[16:59:02] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[16:59:02] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(0.7949478, -0.60667783), speed=475,4, spawn=(393.89505, 859.4921)
[16:59:02] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[16:59:02] [INFO] [Player.Grenade.Simple] Grenade thrown!
[16:59:02] [INFO] [Player.Grenade] State reset to IDLE
[16:59:02] [INFO] [Player.Grenade] State reset to IDLE
[16:59:02] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[16:59:02] [INFO] [Player.Grenade] Player rotation restored to 0
[16:59:02] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(328,886), corner_timer=-0.02
[16:59:02] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[16:59:02] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(326,885), corner_timer=0.30
[16:59:03] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[16:59:03] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(322,883), corner_timer=-0.02
[16:59:03] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[16:59:03] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(322,883), corner_timer=0.30
[16:59:03] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(322,884), corner_timer=-0.02
[16:59:03] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[16:59:03] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(322,885), corner_timer=0.30
[16:59:03] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(322,961), corner_timer=-0.02
[16:59:03] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[16:59:03] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(322,967), corner_timer=0.30
[16:59:04] [INFO] [GrenadeTimer] Flashbang grenade landed at (658.8624, 657.2776)
[16:59:04] [INFO] [SoundPropagation] Sound emitted: type=GRENADE_LANDING, pos=(658.8624, 657.2776), source=NEUTRAL (FlashbangGrenade), range=112, listeners=20
[16:59:04] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[16:59:04] [ENEMY] [Enemy3] Heard GRENADE_LANDING at (658.8624, 657.2776), intensity=0.24
[16:59:04] [ENEMY] [Enemy3] EVADING_GRENADE (from sound): escaping from (658.8624, 657.2776)
[16:59:04] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=9, self=0, below_threshold=0
[16:59:04] [INFO] [GrenadeTimer] Emitted grenade landing sound at (658.8624, 657.2776)
[16:59:04] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=173.4°, current=-94.9°, player=(322,1009), corner_timer=0.00
[16:59:04] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:59:04] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(322,997), corner_timer=-0.02
[16:59:04] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[16:59:04] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(322,993), corner_timer=0.30
[16:59:04] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:59:04] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(322,899), corner_timer=-0.02
[16:59:04] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[16:59:04] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(322,895), corner_timer=0.30
[16:59:04] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[16:59:04] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[16:59:04] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=236.3°, current=44.7°, player=(322,885), corner_timer=0.00
[16:59:04] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:59:05] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(322,878), corner_timer=-0.02
[16:59:05] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[16:59:05] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(322,878), corner_timer=0.30
[16:59:05] [INFO] [GrenadeTimer] Timer expired - EXPLODING!
[16:59:05] [INFO] [GrenadeTimer] EXPLODED at (662.0703, 654.82935)!
[16:59:05] [INFO] [GrenadeTimer] Applying flashbang effects (radius: 400, blindness: 12s, stun: 6s)
[16:59:05] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(662.0703, 654.8293), source=NEUTRAL (FlashbangGrenade), range=2938, listeners=10
[16:59:05] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=0, below_threshold=6
[16:59:05] [INFO] [GrenadeTimer] Spawned C# explosion effect at (662.0703, 654.82935)
[16:59:05] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:59:05] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(322,878), corner_timer=-0.02
[16:59:05] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[16:59:05] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(322,878), corner_timer=0.30
[16:59:05] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:59:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:59:05] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:59:05] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:59:05] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:59:05] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:59:05] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:59:05] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:59:05] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:59:05] [ENEMY] [Enemy1] Death animation component initialized
[16:59:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:59:05] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:59:05] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:59:05] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:59:05] [ENEMY] [Enemy2] Death animation component initialized
[16:59:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:59:05] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:59:05] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:59:05] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:59:05] [ENEMY] [Enemy3] Death animation component initialized
[16:59:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:59:05] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:59:05] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:59:05] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:59:05] [ENEMY] [Enemy4] Death animation component initialized
[16:59:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:59:05] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:59:05] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:59:05] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:59:05] [ENEMY] [Enemy5] Death animation component initialized
[16:59:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:59:05] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:59:05] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:59:05] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:59:05] [ENEMY] [Enemy6] Death animation component initialized
[16:59:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:59:05] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:59:05] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:59:05] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:59:05] [ENEMY] [Enemy7] Death animation component initialized
[16:59:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:59:05] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:59:05] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:59:05] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:59:05] [ENEMY] [Enemy8] Death animation component initialized
[16:59:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:59:05] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:59:05] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:59:05] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:59:05] [ENEMY] [Enemy9] Death animation component initialized
[16:59:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:59:05] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:59:05] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:59:05] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:59:05] [ENEMY] [Enemy10] Death animation component initialized
[16:59:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:59:05] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:59:05] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:59:05] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:59:05] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[16:59:05] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:59:05] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:59:05] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:59:05] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:59:05] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:59:05] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:59:05] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:59:05] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[16:59:05] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:59:05] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:59:05] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:59:05] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:59:05] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:59:05] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:59:05] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:59:05] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:59:05] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:59:05] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:59:05] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:59:05] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:59:05] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:59:05] [INFO] [ScoreManager] Level started with 10 enemies
[16:59:05] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:59:05] [INFO] [CinemaEffects] Found player node: Player
[16:59:05] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:59:05] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[16:59:05] [ENEMY] [Enemy1] Registered as sound listener
[16:59:05] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[16:59:05] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:59:05] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[16:59:05] [ENEMY] [Enemy2] Registered as sound listener
[16:59:05] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[16:59:05] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:59:05] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[16:59:05] [ENEMY] [Enemy3] Registered as sound listener
[16:59:05] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[16:59:05] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:59:05] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[16:59:05] [ENEMY] [Enemy4] Registered as sound listener
[16:59:05] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[16:59:05] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:59:05] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[16:59:05] [ENEMY] [Enemy5] Registered as sound listener
[16:59:05] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[16:59:05] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:59:05] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[16:59:05] [ENEMY] [Enemy6] Registered as sound listener
[16:59:05] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[16:59:05] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:59:05] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[16:59:05] [ENEMY] [Enemy7] Registered as sound listener
[16:59:05] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[16:59:05] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:59:05] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[16:59:05] [ENEMY] [Enemy8] Registered as sound listener
[16:59:05] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[16:59:05] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:59:05] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[16:59:05] [ENEMY] [Enemy9] Registered as sound listener
[16:59:05] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[16:59:05] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:59:05] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[16:59:05] [ENEMY] [Enemy10] Registered as sound listener
[16:59:05] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[16:59:05] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:59:05] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:59:05] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:59:05] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:59:05] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:59:05] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:59:05] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:59:05] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:59:05] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[16:59:05] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:59:05] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:59:05] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:59:05] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:59:05] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:59:05] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:59:05] [INFO] [LastChance] Found player: Player
[16:59:05] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:59:05] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:59:05] [INFO] [LastChance] Connected to player Died signal (C#)
[16:59:05] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:59:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=20
[16:59:06] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[16:59:06] [ENEMY] [Enemy4] Heard gunshot at (450, 1256), source_type=0, intensity=0.01, distance=499
[16:59:06] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
[16:59:06] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=135.0°, current=-101.3°, player=(450,1250), corner_timer=0.00
[16:59:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 1256), source=PLAYER (AssaultRifle), range=1469, listeners=10
[16:59:06] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
[16:59:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1256), shooter_id=583998114735, bullet_pos=(704.36346, 1024.902)
[16:59:06] [INFO] [Bullet] Using shooter_position, distance=343,66708
[16:59:06] [INFO] [Bullet] Distance to wall: 343,66708 (23,400925% of viewport)
[16:59:06] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1256), shooter_id=583998114735, bullet_pos=(706.6133, 1027.403)
[16:59:06] [INFO] [Bullet] Using shooter_position, distance=343,66696
[16:59:06] [INFO] [Bullet] Distance to wall: 343,66696 (23,400917% of viewport)
[16:59:06] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1256), shooter_id=583998114735, bullet_pos=(1095.9086, 1391.3121)
[16:59:06] [INFO] [Bullet] Using shooter_position, distance=659,92975
[16:59:06] [INFO] [Bullet] Distance to wall: 659,92975 (44,935833% of viewport)
[16:59:06] [ENEMY] [Enemy3] Memory: medium confidence (0.59) - transitioning to PURSUING
[16:59:06] [ENEMY] [Enemy3] State: IDLE -> PURSUING
[16:59:06] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=120.4°, current=123.7°, player=(409,1245), corner_timer=0.00
[16:59:06] [ENEMY] [Enemy3] PURSUING corner check: angle -129.3°
[16:59:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1256), shooter_id=583998114735, bullet_pos=(1069.5645, 1372.5118)
[16:59:06] [INFO] [Bullet] Using shooter_position, distance=630,42456
[16:59:06] [INFO] [Bullet] Distance to wall: 630,42456 (42,92677% of viewport)
[16:59:06] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[16:59:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(355.2977, 1202.924), source=PLAYER (AssaultRifle), range=1469, listeners=10
[16:59:06] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=5
[16:59:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1256), shooter_id=583998114735, bullet_pos=(1360.2195, 1020.4186)
[16:59:06] [INFO] [Bullet] Using shooter_position, distance=940,21173
[16:59:06] [INFO] [Bullet] Distance to wall: 940,21173 (64,020744% of viewport)
[16:59:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1256), shooter_id=583998114735, bullet_pos=(1363.0226, 1024.559)
[16:59:06] [INFO] [Bullet] Using shooter_position, distance=941,8998
[16:59:06] [INFO] [Bullet] Distance to wall: 941,8998 (64,13569% of viewport)
[16:59:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(355.2977, 1202.9237), shooter_id=583998114735, bullet_pos=(521.4495, 1002.5065)
[16:59:06] [INFO] [Bullet] Using shooter_position, distance=260,33344
[16:59:06] [INFO] [Bullet] Distance to wall: 260,33344 (17,726582% of viewport)
[16:59:06] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(355.2977, 1202.9237), shooter_id=583998114735, bullet_pos=(518.4981, 998.47046)
[16:59:06] [INFO] [Bullet] Using shooter_position, distance=261,6018
[16:59:06] [INFO] [Bullet] Distance to wall: 261,6018 (17,812948% of viewport)
[16:59:06] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(355.2977, 1202.9237), shooter_id=583998114735, bullet_pos=(515.84, 1002.7054)
[16:59:06] [INFO] [Bullet] Using shooter_position, distance=256,6344
[16:59:06] [INFO] [Bullet] Distance to wall: 256,6344 (17,474709% of viewport)
[16:59:06] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(328.074, 1175.7), source=PLAYER (AssaultRifle), range=1469, listeners=10
[16:59:06] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=0, below_threshold=4
[16:59:06] [ENEMY] [Enemy3] PURSUING corner check: angle -161.0°
[16:59:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(328.074, 1175.7004), shooter_id=583998114735, bullet_pos=(507.85138, 987.4093)
[16:59:06] [INFO] [Bullet] Using shooter_position, distance=260,33334
[16:59:06] [INFO] [Bullet] Distance to wall: 260,33334 (17,726576% of viewport)
[16:59:06] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(328.074, 1175.7004), shooter_id=583998114735, bullet_pos=(504.6641, 983.5569)
[16:59:06] [INFO] [Bullet] Using shooter_position, distance=260,9659
[16:59:06] [INFO] [Bullet] Distance to wall: 260,9659 (17,76965% of viewport)
[16:59:06] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:06] [INFO] [Bullet] Starting wall penetration at (504.6641, 983.5569)
[16:59:06] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[16:59:06] [INFO] [Bullet] Exiting penetration at (478.9002, 952.41644) after traveling 35,416668 pixels through wall
[16:59:06] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[16:59:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(300.8503, 1148.477), source=PLAYER (AssaultRifle), range=1469, listeners=10
[16:59:07] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=0, below_threshold=4
[16:59:07] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:59:07] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:59:07] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(293,1134), corner_timer=0.30
[16:59:07] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(293,1134), corner_timer=0.30
[16:59:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 1256), shooter_id=583998114735, bullet_pos=(1570.3981, 794.80164)
[16:59:07] [INFO] [Bullet] Using shooter_position, distance=1211,6088
[16:59:07] [INFO] [Bullet] Distance to wall: 1211,6088 (82,50067% of viewport)
[16:59:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(300.8503, 1148.4772), shooter_id=583998114735, bullet_pos=(522.7838, 943.6613)
[16:59:07] [INFO] [Bullet] Using shooter_position, distance=302,00003
[16:59:07] [INFO] [Bullet] Distance to wall: 302,00003 (20,563738% of viewport)
[16:59:07] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:07] [INFO] [Bullet] Starting wall penetration at (522.7838, 943.6613)
[16:59:07] [INFO] [Bullet] Raycast backward hit penetrating body at distance 45,011723
[16:59:07] [INFO] [Bullet] Body exited signal received for penetrating body
[16:59:07] [INFO] [Bullet] Exiting penetration at (557.0782, 912.0121) after traveling 41,666668 pixels through wall
[16:59:07] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[16:59:07] [ENEMY] [Enemy7] Hit taken, damage: 1, health: 3/3 -> 2/3
[16:59:07] [ENEMY] [Enemy7] ImpactEffectsManager found, calling spawn_blood_effect
[16:59:07] [INFO] [ImpactEffects] spawn_blood_effect called at (1632.615, 894.9208), dir=(1, 0), lethal=false
[16:59:07] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:59:07] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:59:07] [INFO] [ImpactEffects] Blood effect spawned at (1632.615, 894.9208) (scale=1)
[16:59:07] [ENEMY] [Enemy3] PURSUING corner check: angle 19.0°
[16:59:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(250.9767, 1071.236), source=PLAYER (AssaultRifle), range=1469, listeners=10
[16:59:07] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=0, below_threshold=4
[16:59:07] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
[16:59:07] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P3:corner, state=RETREATING, target=19.0°, current=163.2°, player=(250,1056), corner_timer=0.25
[16:59:07] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[16:59:07] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[16:59:07] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=145.0°, player=(250,1052), corner_timer=-0.00
[16:59:07] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:59:07] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=53.0°, player=(250,1052), corner_timer=-0.00
[16:59:07] [ENEMY] [Enemy10] PATROL corner check: angle 14.7°
[16:59:07] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=142.8°, player=(250,1047), corner_timer=0.30
[16:59:07] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.7°, current=54.9°, player=(250,1047), corner_timer=0.30
[16:59:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(355.2977, 1202.9237), shooter_id=583998114735, bullet_pos=(889.7379, 1748.273)
[16:59:07] [INFO] [Bullet] Using shooter_position, distance=763,5654
[16:59:07] [INFO] [Bullet] Distance to wall: 763,5654 (51,992577% of viewport)
[16:59:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(250.667, 1036.164), source=PLAYER (AssaultRifle), range=1469, listeners=10
[16:59:07] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=0, below_threshold=4
[16:59:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(250.97667, 1071.236), shooter_id=583998114735, bullet_pos=(504.77823, 878.5364)
[16:59:07] [INFO] [Bullet] Using shooter_position, distance=318,66653
[16:59:07] [INFO] [Bullet] Distance to wall: 318,66653 (21,698591% of viewport)
[16:59:07] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:07] [INFO] [BloodDecal] Blood puddle created at (1680.095, 900.2251) (added to group)
[16:59:07] [INFO] [BloodDecal] Blood puddle created at (1712.182, 895.0588) (added to group)
[16:59:07] [INFO] [BloodyFeet:Enemy7] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[16:59:07] [INFO] [BloodDecal] Blood puddle created at (1738.898, 959.8322) (added to group)
[16:59:07] [INFO] [BloodDecal] Blood puddle created at (1739.671, 893.2631) (added to group)
[16:59:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(250.667, 1000.964), source=PLAYER (AssaultRifle), range=1469, listeners=10
[16:59:07] [ENEMY] [Enemy2] Heard gunshot at (250.667, 1000.964), source_type=0, intensity=0.01, distance=475
[16:59:07] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[16:59:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(250.66696, 1036.1641), shooter_id=583998114735, bullet_pos=(506.88535, 846.68945)
[16:59:07] [INFO] [Bullet] Using shooter_position, distance=318,66672
[16:59:07] [INFO] [Bullet] Distance to wall: 318,66672 (21,698603% of viewport)
[16:59:07] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:07] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=108.6°, current=-101.3°, player=(250,994), corner_timer=0.00
[16:59:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(250.97667, 1071.236), shooter_id=583998114735, bullet_pos=(277.97443, 700.5022)
[16:59:07] [INFO] [Bullet] Using shooter_position, distance=371,71548
[16:59:07] [INFO] [Bullet] Distance to wall: 371,71548 (25,310791% of viewport)
[16:59:07] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:07] [INFO] [Bullet] Starting wall penetration at (277.97443, 700.5022)
[16:59:07] [ENEMY] [Enemy1] Memory: medium confidence (0.63) - transitioning to PURSUING
[16:59:07] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[16:59:07] [INFO] [Bullet] Raycast backward hit penetrating body at distance 13,085518
[16:59:07] [INFO] [Bullet] Body exited signal received for penetrating body
[16:59:07] [INFO] [Bullet] Exiting penetration at (251.75432, 679.9202) after traveling 28,333334 pixels through wall
[16:59:07] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[16:59:07] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=94.5°, current=-157.5°, player=(250,981), corner_timer=0.00
[16:59:07] [ENEMY] [Enemy1] PURSUING corner check: angle -50.9°
[16:59:07] [INFO] [BloodDecal] Blood puddle created at (1772.03, 910.244) (added to group)
[16:59:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(250.66696, 1000.96387), shooter_id=583998114735, bullet_pos=(509.38242, 814.91327)
[16:59:07] [INFO] [Bullet] Using shooter_position, distance=318,66678
[16:59:07] [INFO] [Bullet] Distance to wall: 318,66678 (21,698608% of viewport)
[16:59:07] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(250.66696, 1036.1641), shooter_id=583998114735, bullet_pos=(327.251, 700.3988)
[16:59:07] [INFO] [Bullet] Using shooter_position, distance=344,3885
[16:59:07] [INFO] [Bullet] Distance to wall: 344,3885 (23,450047% of viewport)
[16:59:07] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:07] [INFO] [BloodDecal] Blood puddle created at (1783.42, 985.0151) (added to group)
[16:59:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(355.2977, 1202.9237), shooter_id=583998114735, bullet_pos=(756.8263, 2075.2998)
[16:59:07] [INFO] [Bullet] Using shooter_position, distance=960,34644
[16:59:07] [INFO] [Bullet] Distance to wall: 960,34644 (65,391754% of viewport)
[16:59:07] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.5°, player=(250,946), corner_timer=-0.01
[16:59:07] [ENEMY] [Enemy10] PATROL corner check: angle 7.4°
[16:59:07] [INFO] [BloodDecal] Blood puddle created at (1712.947, 997.5903) (added to group)
[16:59:07] [INFO] [BloodDecal] Blood puddle created at (1760.547, 998.2673) (added to group)
[16:59:07] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.4°, current=16.6°, player=(250,942), corner_timer=0.30
[16:59:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(250.66696, 1000.96387), shooter_id=583998114735, bullet_pos=(305.60544, 704.71155)
[16:59:07] [INFO] [Bullet] Using shooter_position, distance=301,30328
[16:59:07] [INFO] [Bullet] Distance to wall: 301,30328 (20,516296% of viewport)
[16:59:07] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:07] [INFO] [BloodDecal] Blood puddle created at (1753.442, 952.1594) (added to group)
[16:59:07] [INFO] [BloodDecal] Blood puddle created at (1832.719, 922.545) (added to group)
[16:59:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(250.66696, 1036.1641), shooter_id=583998114735, bullet_pos=(52.562504, 860.78375)
[16:59:07] [INFO] [Bullet] Using shooter_position, distance=264,582
[16:59:07] [INFO] [Bullet] Distance to wall: 264,582 (18,015875% of viewport)
[16:59:07] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(250.667, 882.1632), source=PLAYER (AssaultRifle), range=1469, listeners=10
[16:59:08] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=4, self=0, below_threshold=2
[16:59:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(250.66696, 1000.96387), shooter_id=583998114735, bullet_pos=(56.31241, 860.56055)
[16:59:08] [INFO] [Bullet] Using shooter_position, distance=239,764
[16:59:08] [INFO] [Bullet] Distance to wall: 239,764 (16,325974% of viewport)
[16:59:08] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:08] [ENEMY] [Enemy1] PURSUING corner check: angle -51.9°
[16:59:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(254.806, 848.6776), source=PLAYER (AssaultRifle), range=1469, listeners=10
[16:59:08] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=4, self=0, below_threshold=2
[16:59:08] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=7.3°, player=(254,842), corner_timer=-0.01
[16:59:08] [ENEMY] [Enemy10] PATROL corner check: angle 3.8°
[16:59:08] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.8°, current=9.5°, player=(256,838), corner_timer=0.30
[16:59:08] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[16:59:08] [ENEMY] [Enemy4] PURSUING corner check: angle -87.6°
[16:59:08] [ENEMY] [Enemy1] PURSUING corner check: angle 153.8°
[16:59:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(254.80595, 848.6776), shooter_id=583998114735, bullet_pos=(937.12915, 623.02924)
[16:59:08] [INFO] [Bullet] Using shooter_position, distance=718,66693
[16:59:08] [INFO] [Bullet] Distance to wall: 718,66693 (48,935352% of viewport)
[16:59:08] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.8°, player=(320,764), corner_timer=-0.01
[16:59:08] [ENEMY] [Enemy10] PATROL corner check: angle 2.0°
[16:59:08] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=2.0°, current=6.0°, player=(324,761), corner_timer=0.30
[16:59:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(250.66696, 882.1632), shooter_id=583998114735, bullet_pos=(1374.3535, 330.04495)
[16:59:08] [INFO] [Bullet] Using shooter_position, distance=1252,0009
[16:59:08] [INFO] [Bullet] Distance to wall: 1252,0009 (85,251045% of viewport)
[16:59:08] [INFO] [Bullet] Distance-based penetration chance: 47,207115%
[16:59:08] [INFO] [Bullet] Penetration failed (distance roll)
[16:59:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(356.5901, 750.2184), source=PLAYER (AssaultRifle), range=1469, listeners=10
[16:59:08] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[16:59:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(390.653, 747.4731), source=PLAYER (AssaultRifle), range=1469, listeners=10
[16:59:08] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[16:59:09] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=2.0°, player=(417,741), corner_timer=-0.01
[16:59:09] [ENEMY] [Enemy10] PATROL corner check: angle 1.1°
[16:59:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(356.59012, 750.2184), shooter_id=583998114735, bullet_pos=(908.1855, 771.349)
[16:59:09] [INFO] [Bullet] Using shooter_position, distance=551,99994
[16:59:09] [INFO] [Bullet] Distance to wall: 551,99994 (37,586693% of viewport)
[16:59:09] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:09] [INFO] [Bullet] Starting wall penetration at (908.1855, 771.349)
[16:59:09] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.1°, current=4.3°, player=(421,741), corner_timer=0.30
[16:59:09] [INFO] [Bullet] Raycast backward hit penetrating body at distance 10,498417
[16:59:09] [INFO] [Bullet] Body exited signal received for penetrating body
[16:59:09] [INFO] [Bullet] Exiting penetration at (946.4907, 772.8164) after traveling 33,333336 pixels through wall
[16:59:09] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[16:59:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(390.65298, 747.47314), shooter_id=583998114735, bullet_pos=(699.93634, 824.23376)
[16:59:09] [INFO] [Bullet] Using shooter_position, distance=318,6666
[16:59:09] [INFO] [Bullet] Distance to wall: 318,6666 (21,698595% of viewport)
[16:59:09] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:09] [INFO] [Bullet] Starting wall penetration at (699.93634, 824.23376)
[16:59:09] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[16:59:09] [INFO] [Bullet] Exiting penetration at (737.1409, 833.4675) after traveling 33,333336 pixels through wall
[16:59:09] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[16:59:09] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
[16:59:09] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=-114.3°, current=-115.2°, player=(487,741), corner_timer=0.10
[16:59:09] [ENEMY] [Enemy1] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=77.6°, current=78.8°, player=(504,741), corner_timer=0.15
[16:59:09] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[16:59:09] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
[16:59:09] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.1°, player=(521,744), corner_timer=-0.01
[16:59:09] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:59:09] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=-106.4°, current=-56.2°, player=(525,745), corner_timer=0.10
[16:59:09] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.6°, current=3.3°, player=(525,745), corner_timer=0.30
[16:59:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(540.1627, 758.3134), source=PLAYER (AssaultRifle), range=1469, listeners=10
[16:59:09] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[16:59:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(540.16266, 758.31335), shooter_id=583998114735, bullet_pos=(527.3781, 842.68353)
[16:59:09] [INFO] [Bullet] Using shooter_position, distance=85,3333
[16:59:09] [INFO] [Bullet] Distance to wall: 85,3333 (5,8105016% of viewport)
[16:59:09] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:09] [INFO] [Bullet] Starting wall penetration at (527.3781, 842.68353)
[16:59:09] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[16:59:09] [INFO] [Bullet] Exiting penetration at (521.6351, 880.58417) after traveling 33,333336 pixels through wall
[16:59:09] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[16:59:09] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=-101.2°, current=-52.6°, player=(550,759), corner_timer=0.10
[16:59:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(566.1899, 780.4583), source=PLAYER (AssaultRifle), range=1469, listeners=10
[16:59:09] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[16:59:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(566.18994, 780.4583), shooter_id=583998114735, bullet_pos=(526.65924, 927.22797)
[16:59:09] [INFO] [Bullet] Using shooter_position, distance=152,00003
[16:59:09] [INFO] [Bullet] Distance to wall: 152,00003 (10,349962% of viewport)
[16:59:09] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:09] [INFO] [Bullet] Starting wall penetration at (526.65924, 927.22797)
[16:59:09] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[16:59:09] [INFO] [Bullet] Exiting penetration at (516.6899, 964.24225) after traveling 33,333332 pixels through wall
[16:59:09] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[16:59:09] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.9°, current=-126.7°, player=(581,790), corner_timer=-0.01
[16:59:09] [ENEMY] [Enemy7] PATROL corner check: angle 89.9°
[16:59:09] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.9°, current=-129.0°, player=(584,793), corner_timer=0.30
[16:59:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(591.0801, 805.3484), source=PLAYER (AssaultRifle), range=1469, listeners=10
[16:59:09] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=0, below_threshold=5
[16:59:09] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:59:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(591.0801, 805.34845), shooter_id=583998114735, bullet_pos=(523.2378, 977.81836)
[16:59:09] [INFO] [Bullet] Using shooter_position, distance=185,33333
[16:59:09] [INFO] [Bullet] Distance to wall: 185,33333 (12,619688% of viewport)
[16:59:09] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(591.0801, 805.34845), shooter_id=583998114735, bullet_pos=(535.0972, 1008.97064)
[16:59:09] [INFO] [Bullet] Using shooter_position, distance=211,17783
[16:59:09] [INFO] [Bullet] Distance to wall: 211,17783 (14,379486% of viewport)
[16:59:09] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:09] [INFO] [LastChance] Threat detected: Bullet
[16:59:09] [INFO] [LastChance] Not in hard mode - effect disabled
[16:59:09] [INFO] [LastChance] Cannot trigger effect - conditions not met
[16:59:09] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/2 -> 1/2
[16:59:09] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[16:59:09] [INFO] [ImpactEffects] spawn_blood_effect called at (572.8711, 966.9819), dir=(1, 0), lethal=false
[16:59:09] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:59:09] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:59:09] [INFO] [ImpactEffects] Blood effect spawned at (572.8711, 966.9819) (scale=1)
[16:59:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(610.4516, 832.5245), source=PLAYER (AssaultRifle), range=1469, listeners=10
[16:59:09] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=1, self=0, below_threshold=5
[16:59:09] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[16:59:09] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 1/2 -> 0/2
[16:59:09] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[16:59:09] [INFO] [ImpactEffects] spawn_blood_effect called at (572.8711, 966.9819), dir=(1, 0), lethal=true
[16:59:09] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:59:09] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[16:59:09] [INFO] [ImpactEffects] Blood effect spawned at (572.8711, 966.9819) (scale=1.5)
[16:59:09] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[16:59:09] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[16:59:09] [ENEMY] [Enemy3] [AllyDeath] Notified 3 enemies
[16:59:09] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[16:59:09] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[16:59:09] [ENEMY] [Enemy3] Death animation started with hit direction: (1, 0)
[16:59:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(617.209, 869.3255), source=PLAYER (AssaultRifle), range=1469, listeners=9
[16:59:10] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=5
[16:59:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(461.0204, 541.8994), source=ENEMY (Enemy1), range=1469, listeners=9
[16:59:10] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[16:59:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(617.20905, 869.3255), shooter_id=583998114735, bullet_pos=(561.2221, 1010.6388)
[16:59:10] [INFO] [Bullet] Using shooter_position, distance=151,99995
[16:59:10] [INFO] [Bullet] Distance to wall: 151,99995 (10,3499565% of viewport)
[16:59:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:10] [INFO] [Bullet] Starting wall penetration at (561.2221, 1010.6388)
[16:59:10] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23,961653
[16:59:10] [INFO] [Bullet] Body exited signal received for penetrating body
[16:59:10] [INFO] [Bullet] Exiting penetration at (547.1026, 1046.277) after traveling 33,333336 pixels through wall
[16:59:10] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[16:59:10] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.0°, current=178.1°, player=(617,880), corner_timer=-0.01
[16:59:10] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[16:59:10] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=179.0°, player=(617,885), corner_timer=0.30
[16:59:10] [INFO] [LastChance] Threat detected: @Area2D@2573
[16:59:10] [INFO] [LastChance] Not in hard mode - effect disabled
[16:59:10] [INFO] [LastChance] Cannot trigger effect - conditions not met
[16:59:10] [ENEMY] [Enemy2] PURSUING corner check: angle -49.8°
[16:59:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(617.4061, 904.444), source=PLAYER (AssaultRifle), range=1469, listeners=9
[16:59:10] [ENEMY] [Enemy4] Heard gunshot at (617.4061, 904.444), source_type=0, intensity=0.54, distance=68
[16:59:10] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=5
[16:59:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(461.0204, 541.8994), source=ENEMY (Enemy1), range=1469, listeners=9
[16:59:10] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[16:59:10] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[16:59:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(617.4061, 904.44403), shooter_id=583998114735, bullet_pos=(576.23865, 1015.74097)
[16:59:10] [INFO] [Bullet] Using shooter_position, distance=118,66663
[16:59:10] [INFO] [Bullet] Distance to wall: 118,66663 (8,080229% of viewport)
[16:59:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:10] [INFO] [Bullet] Starting wall penetration at (576.23865, 1015.74097)
[16:59:10] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:59:10] [INFO] [Bullet] Raycast backward hit penetrating body at distance 29,52737
[16:59:10] [INFO] [Player] Spawning blood effect at (619.18, 910.90924), dir=(1, 0), lethal=False (C#)
[16:59:10] [INFO] [ImpactEffects] spawn_blood_effect called at (619.18, 910.9092), dir=(1, 0), lethal=false
[16:59:10] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:59:10] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:59:10] [INFO] [ImpactEffects] Blood effect spawned at (619.18, 910.9092) (scale=1)
[16:59:10] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[16:59:10] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[16:59:10] [INFO] [PenultimateHit] Starting penultimate hit effect:
[16:59:10] [INFO] [PenultimateHit]   - Time scale: 0.10
[16:59:10] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[16:59:10] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[16:59:10] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[16:59:10] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[16:59:10] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[16:59:10] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[16:59:10] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[16:59:10] [INFO] [Bullet] Body exited signal received for penetrating body
[16:59:10] [INFO] [Bullet] Exiting penetration at (562.9402, 1051.6936) after traveling 33,333336 pixels through wall
[16:59:10] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[16:59:10] [INFO] [BloodDecal] Blood puddle created at (654.6528, 969.5339) (added to group)
[16:59:10] [INFO] [BloodyFeet:Enemy4] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[16:59:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(623.9349, 931.9897), source=PLAYER (AssaultRifle), range=1469, listeners=9
[16:59:10] [ENEMY] [Enemy4] Heard gunshot at (623.9349, 931.9897), source_type=0, intensity=1.00, distance=50
[16:59:10] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=5
[16:59:10] [INFO] [LastChance] Threat detected: @Area2D@2581
[16:59:10] [INFO] [LastChance] Not in hard mode - effect disabled
[16:59:10] [INFO] [LastChance] Cannot trigger effect - conditions not met
[16:59:10] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[16:59:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(623.9349, 931.9897), shooter_id=583998114735, bullet_pos=(584.9198, 998.3737)
[16:59:10] [INFO] [Bullet] Using shooter_position, distance=77,00011
[16:59:10] [INFO] [Bullet] Distance to wall: 77,00011 (5,243079% of viewport)
[16:59:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:10] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
[16:59:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(460.1984, 540.6526), source=ENEMY (Enemy1), range=1469, listeners=9
[16:59:10] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[16:59:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(623.9349, 931.9897), shooter_id=583998114735, bullet_pos=(526.1494, 925.59955)
[16:59:11] [INFO] [Bullet] Using shooter_position, distance=97,99403
[16:59:11] [INFO] [Bullet] Distance to wall: 97,99403 (6,672594% of viewport)
[16:59:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:11] [INFO] [Bullet] Starting wall penetration at (526.1494, 925.59955)
[16:59:11] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[16:59:11] [INFO] [Bullet] Exiting penetration at (520.78284, 918.9543) after traveling 3,541667 pixels through wall
[16:59:11] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[16:59:11] [INFO] [BloodDecal] Blood puddle created at (673.4067, 957.6188) (added to group)
[16:59:11] [INFO] [Player] Spawning blood effect at (632.8728, 941.96185), dir=(1, 0), lethal=True (C#)
[16:59:11] [INFO] [ImpactEffects] spawn_blood_effect called at (632.8728, 941.9619), dir=(1, 0), lethal=true
[16:59:11] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:59:11] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[16:59:11] [INFO] [ImpactEffects] Blood effect spawned at (632.8728, 941.9619) (scale=1.5)
[16:59:11] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[16:59:11] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[16:59:11] [INFO] [CinemaEffects] Player died - triggering death effects
[16:59:11] [INFO] [CinemaEffects] Death effects triggered - starting cigarette burn, expanding spots, and end of reel (top-right)
[16:59:11] [INFO] [PenultimateHit] Player died - ending penultimate effect
[16:59:11] [INFO] [PenultimateHit] Ending penultimate hit effect
[16:59:11] [INFO] [PenultimateHit] Starting visual effects fade-out over 400ms
[16:59:11] [INFO] [LastChance] Player died
[16:59:11] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[16:59:11] [INFO] [BloodDecal] Blood puddle created at (648.3375, 983.1597) (added to group)
[16:59:11] [INFO] [BloodDecal] Blood puddle created at (674.5467, 972.1497) (added to group)
[16:59:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450.9006, 521.9688), source=ENEMY (Enemy1), range=1469, listeners=9
[16:59:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[16:59:11] [INFO] [BloodDecal] Blood puddle created at (634.8511, 973.6433) (added to group)
[16:59:11] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P3:corner, state=RETREATING, target=-87.6°, current=-102.1°, player=(646,955), corner_timer=0.10
[16:59:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(650.4094, 963.6104), source=PLAYER (AssaultRifle), range=1469, listeners=9
[16:59:11] [ENEMY] [Enemy4] Heard gunshot at (650.4094, 963.6104), source_type=0, intensity=1.00, distance=13
[16:59:11] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=5
[16:59:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(513.0079, 586.90485)
[16:59:11] [INFO] [Bullet] WARNING: Unable to determine shooter position
[16:59:11] [INFO] [Bullet] Using shooter_position, distance=779,50903
[16:59:11] [INFO] [Bullet] Distance to wall: 779,50903 (53,078205% of viewport)
[16:59:11] [INFO] [Bullet] Distance-based penetration chance: 84,742096%
[16:59:11] [INFO] [Bullet] Starting wall penetration at (513.0079, 586.90485)
[16:59:11] [ENEMY] [Enemy4] ROT_CHANGE: P3:corner -> P2:combat_state, state=COMBAT, target=9.4°, current=-99.2°, player=(650,957), corner_timer=0.10
[16:59:11] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[16:59:11] [INFO] [Bullet] Raycast backward hit penetrating body at distance 35,67456
[16:59:11] [INFO] [BloodDecal] Blood puddle created at (655.9496, 973.7289) (added to group)
[16:59:11] [INFO] [BloodDecal] Blood puddle created at (651.261, 999.3481) (added to group)
[16:59:11] [INFO] [BloodDecal] Blood puddle created at (683.3519, 959.2527) (added to group)
[16:59:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(650.4094, 963.6104), shooter_id=583998114735, bullet_pos=(734.83636, 1004.17566)
[16:59:11] [INFO] [Bullet] Using shooter_position, distance=93,66668
[16:59:11] [INFO] [Bullet] Distance to wall: 93,66668 (6,377937% of viewport)
[16:59:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:11] [INFO] [Bullet] Body exited signal received for penetrating body
[16:59:11] [INFO] [Bullet] Exiting penetration at (559.67456, 586.90485) after traveling 41,666668 pixels through wall
[16:59:11] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[16:59:11] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P3:corner, state=RETREATING, target=-87.6°, current=-96.3°, player=(654,959), corner_timer=0.10
[16:59:11] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=175.8°, current=124.3°, player=(658,961), corner_timer=-0.01
[16:59:11] [ENEMY] [Enemy7] PATROL corner check: angle 89.0°
[16:59:11] [ENEMY] [Enemy3] Ragdoll activated
[16:59:11] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[16:59:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(916.99365, 605.9103)
[16:59:11] [INFO] [Bullet] WARNING: Unable to determine shooter position
[16:59:11] [INFO] [Bullet] Using shooter_position, distance=1099,0927
[16:59:11] [INFO] [Bullet] Distance to wall: 1099,0927 (74,83924% of viewport)
[16:59:11] [INFO] [Bullet] Distance-based penetration chance: 59,35422%
[16:59:11] [INFO] [Bullet] Starting wall penetration at (916.99365, 605.9103)
[16:59:11] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.0°, current=127.2°, player=(662,963), corner_timer=0.30
[16:59:11] [INFO] [Bullet] Raycast backward hit penetrating body at distance 27,66034
[16:59:11] [INFO] [Bullet] Body exited signal received for penetrating body
[16:59:11] [INFO] [Bullet] Exiting penetration at (963.66034, 605.9103) after traveling 41,666668 pixels through wall
[16:59:11] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[16:59:11] [ENEMY] [Enemy4] ROT_CHANGE: P3:corner -> P1:visible, state=RETREATING, target=20.8°, current=-27.6°, player=(667,964), corner_timer=0.10
[16:59:11] [INFO] [BloodDecal] Blood puddle created at (699.2899, 966.2863) (added to group)
[16:59:11] [INFO] [BloodDecal] Blood puddle created at (661.7576, 993.4747) (added to group)
[16:59:11] [INFO] [BloodDecal] Blood puddle created at (692.7997, 954.1677) (added to group)
[16:59:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(677.1296, 972.4929), source=PLAYER (AssaultRifle), range=1469, listeners=9
[16:59:11] [ENEMY] [Enemy4] Heard gunshot at (677.1296, 972.4929), source_type=0, intensity=1.00, distance=28
[16:59:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
[16:59:11] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[16:59:11] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:59:11] [INFO] [BloodDecal] Blood puddle created at (681.3822, 945.9114) (added to group)
[16:59:11] [INFO] [BloodDecal] Blood puddle created at (697.6324, 924.7445) (added to group)
[16:59:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(677.1296, 972.4929), shooter_id=583998114735, bullet_pos=(708.446, 1002.92413)
[16:59:11] [INFO] [Bullet] Using shooter_position, distance=43,66665
[16:59:11] [INFO] [Bullet] Distance to wall: 43,66665 (2,9733424% of viewport)
[16:59:11] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[16:59:11] [INFO] [Bullet] Starting wall penetration at (708.446, 1002.92413)
[16:59:11] [ENEMY] [Enemy1] ROT_CHANGE: P1:visible -> P3:corner, state=RETREATING, target=153.8°, current=64.1°, player=(682,967), corner_timer=0.15
[16:59:11] [INFO] [Bullet] Raycast backward hit penetrating body at distance 16,424269
[16:59:11] [INFO] [Bullet] Body exited signal received for penetrating body
[16:59:11] [INFO] [Bullet] Exiting penetration at (741.91394, 1035.446) after traveling 41,666668 pixels through wall
[16:59:11] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[16:59:11] [INFO] [BloodDecal] Blood puddle created at (686.5675, 961.3829) (added to group)
[16:59:11] [INFO] [BloodDecal] Blood puddle created at (708.9148, 921.0055) (added to group)
[16:59:11] [INFO] [BloodDecal] Blood puddle created at (710.3565, 961.5878) (added to group)
[16:59:11] [INFO] [BloodDecal] Blood puddle created at (716.427, 935.2908) (added to group)
[16:59:11] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
[16:59:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(709.5757, 973.2763), source=PLAYER (AssaultRifle), range=1469, listeners=9
[16:59:11] [ENEMY] [Enemy4] Heard gunshot at (709.5757, 973.2763), source_type=0, intensity=1.00, distance=50
[16:59:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
[16:59:11] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
[16:59:11] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P3:corner, state=RETREATING, target=-49.8°, current=24.2°, player=(709,967), corner_timer=0.01
[16:59:11] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[16:59:11] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[16:59:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(709.5757, 973.2763), shooter_id=583998114735, bullet_pos=(726.6076, 1013.48444)
[16:59:11] [INFO] [Bullet] Using shooter_position, distance=43,66669
[16:59:11] [INFO] [Bullet] Distance to wall: 43,66669 (2,9733453% of viewport)
[16:59:11] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[16:59:11] [INFO] [Bullet] Starting wall penetration at (726.6076, 1013.48444)
[16:59:11] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
[16:59:11] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[16:59:11] [INFO] [Bullet] Raycast backward hit penetrating body at distance 35,246624
[16:59:11] [INFO] [BloodDecal] Blood puddle created at (679.915, 980.9587) (added to group)
[16:59:11] [INFO] [BloodDecal] Blood puddle created at (689.3284, 947.3979) (added to group)
[16:59:11] [INFO] [Bullet] Body exited signal received for penetrating body
[16:59:11] [INFO] [Bullet] Exiting penetration at (744.80963, 1056.455) after traveling 41,666668 pixels through wall
[16:59:11] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[16:59:11] [INFO] [BloodDecal] Blood puddle created at (684.3867, 985.6413) (added to group)
[16:59:11] [INFO] [PenultimateHit] Visual effects fade-out complete
[16:59:11] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[16:59:11] [INFO] [PenultimateHit] Called player RefreshHealthVisual (C#)
[16:59:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(650.4094, 963.6104), shooter_id=583998114735, bullet_pos=(1374.7731, 780.4515)
[16:59:11] [INFO] [Bullet] Using shooter_position, distance=747,1612
[16:59:11] [INFO] [Bullet] Distance to wall: 747,1612 (50,87558% of viewport)
[16:59:11] [INFO] [BloodDecal] Blood puddle created at (793.6774, 956.9151) (added to group)
[16:59:11] [INFO] [BloodDecal] Blood puddle created at (763.6788, 940.0183) (added to group)
[16:59:11] [INFO] [BloodDecal] Blood puddle created at (734.8292, 999.3089) (added to group)
[16:59:11] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=176.3°, current=89.0°, player=(764,967), corner_timer=-0.02
[16:59:11] [ENEMY] [Enemy7] PATROL corner check: angle 89.2°
[16:59:11] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.2°, current=91.9°, player=(770,967), corner_timer=0.30
[16:59:11] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:59:11] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:59:11] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[16:59:11] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[16:59:11] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[16:59:11] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[16:59:11] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[16:59:11] [INFO] [LastChance] Resetting all effects (scene change detected)
[16:59:11] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[16:59:11] [INFO] [CinemaEffects] Death effects reset
[16:59:11] [ENEMY] [Enemy1] Death animation component initialized
[16:59:11] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:59:11] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[16:59:11] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[16:59:11] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[16:59:11] [ENEMY] [Enemy2] Death animation component initialized
[16:59:11] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:59:11] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[16:59:11] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[16:59:11] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[16:59:11] [ENEMY] [Enemy3] Death animation component initialized
[16:59:11] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:59:11] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[16:59:11] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[16:59:11] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[16:59:11] [ENEMY] [Enemy4] Death animation component initialized
[16:59:11] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:59:11] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[16:59:11] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[16:59:11] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[16:59:11] [ENEMY] [Enemy5] Death animation component initialized
[16:59:11] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:59:11] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[16:59:11] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[16:59:11] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[16:59:11] [INFO] [EnemyGrenade] Initialized: 1 grenades
[16:59:11] [ENEMY] [Enemy6] Death animation component initialized
[16:59:11] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:59:11] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[16:59:11] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[16:59:11] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[16:59:11] [ENEMY] [Enemy7] Death animation component initialized
[16:59:11] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:59:11] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[16:59:11] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[16:59:11] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[16:59:11] [ENEMY] [Enemy8] Death animation component initialized
[16:59:11] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:59:11] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[16:59:11] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[16:59:11] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[16:59:11] [ENEMY] [Enemy9] Death animation component initialized
[16:59:11] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:59:11] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[16:59:11] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[16:59:11] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[16:59:11] [ENEMY] [Enemy10] Death animation component initialized
[16:59:11] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[16:59:11] [INFO] [BloodyFeet:Player] Footprint scene loaded
[16:59:11] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[16:59:11] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[16:59:11] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[16:59:11] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[16:59:11] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[16:59:11] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[16:59:11] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[16:59:11] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[16:59:11] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[16:59:11] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[16:59:11] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[16:59:11] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[16:59:11] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[16:59:11] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[16:59:11] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[16:59:11] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[16:59:11] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[16:59:11] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[16:59:11] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[16:59:11] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[16:59:11] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[16:59:11] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[16:59:11] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[16:59:11] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[16:59:11] [INFO] [ScoreManager] Level started with 10 enemies
[16:59:11] [INFO] [BloodDecal] Blood puddle created at (733.5115, 983.6013) (added to group)
[16:59:11] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[16:59:11] [INFO] [CinemaEffects] Found player node: Player
[16:59:11] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[16:59:11] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[16:59:11] [ENEMY] [Enemy1] Registered as sound listener
[16:59:11] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[16:59:11] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[16:59:11] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[16:59:11] [ENEMY] [Enemy2] Registered as sound listener
[16:59:11] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[16:59:11] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[16:59:11] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[16:59:11] [ENEMY] [Enemy3] Registered as sound listener
[16:59:11] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[16:59:11] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[16:59:11] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[16:59:11] [ENEMY] [Enemy4] Registered as sound listener
[16:59:11] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[16:59:11] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[16:59:11] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[16:59:11] [ENEMY] [Enemy5] Registered as sound listener
[16:59:11] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[16:59:11] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[16:59:11] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[16:59:11] [ENEMY] [Enemy6] Registered as sound listener
[16:59:11] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[16:59:11] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[16:59:11] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[16:59:11] [ENEMY] [Enemy7] Registered as sound listener
[16:59:11] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[16:59:11] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[16:59:11] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[16:59:11] [ENEMY] [Enemy8] Registered as sound listener
[16:59:11] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[16:59:11] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[16:59:11] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[16:59:11] [ENEMY] [Enemy9] Registered as sound listener
[16:59:11] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[16:59:11] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[16:59:11] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[16:59:11] [ENEMY] [Enemy10] Registered as sound listener
[16:59:11] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[16:59:11] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[16:59:11] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[16:59:11] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[16:59:11] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1249), corner_timer=0.00
[16:59:11] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[16:59:11] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[16:59:11] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[16:59:11] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[16:59:11] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[16:59:11] [INFO] [Player] Detecting weapon pose (frame 3)...
[16:59:11] [INFO] [Player] Detected weapon: Rifle (default pose)
[16:59:11] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[16:59:11] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[16:59:11] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[16:59:11] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[16:59:11] [INFO] [LastChance] Found player: Player
[16:59:11] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[16:59:11] [INFO] [LastChance] Connected to player Damaged signal (C#)
[16:59:11] [INFO] [LastChance] Connected to player Died signal (C#)
[16:59:11] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[16:59:11] [INFO] [BloodDecal] Blood puddle created at (800.435, 989.376) (added to group)
[16:59:13] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:59:13] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[16:59:13] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(429,972), corner_timer=0.30
[16:59:13] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(429,972), corner_timer=0.30
[16:59:13] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(410,876), corner_timer=-0.02
[16:59:13] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[16:59:13] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(410,876), corner_timer=-0.02
[16:59:13] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[16:59:13] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(410,870), corner_timer=0.30
[16:59:13] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(410,870), corner_timer=0.30
[16:59:13] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=164.2°, current=123.7°, player=(410,832), corner_timer=0.00
[16:59:13] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[16:59:13] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=166.2°, current=-65.3°, player=(410,821), corner_timer=0.00
[16:59:13] [ENEMY] [Enemy4] Memory: high confidence (0.89) - transitioning to PURSUING
[16:59:13] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[16:59:13] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=-167.0°, current=168.8°, player=(410,810), corner_timer=0.00
[16:59:13] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[16:59:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(417.1497, 780.2278), source=PLAYER (AssaultRifle), range=1469, listeners=19
[16:59:13] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[16:59:13] [ENEMY] [Enemy1] Heard gunshot at (417.1497, 780.2278), source_type=0, intensity=0.01, distance=446
[16:59:13] [ENEMY] [Enemy2] Heard gunshot at (417.1497, 780.2278), source_type=0, intensity=0.05, distance=231
[16:59:13] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[16:59:13] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=74.6°, current=-157.5°, player=(417,774), corner_timer=0.00
[16:59:13] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=85.6°, current=-67.5°, player=(417,774), corner_timer=0.00
[16:59:13] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(419,769), corner_timer=-0.02
[16:59:13] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[16:59:13] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(421,765), corner_timer=0.30
[16:59:13] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 3/3 -> 2/3
[16:59:13] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[16:59:13] [INFO] [ImpactEffects] spawn_blood_effect called at (652.8677, 758.8033), dir=(1, 0), lethal=false
[16:59:13] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:59:13] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:59:13] [INFO] [ImpactEffects] Blood effect spawned at (652.8677, 758.8033) (scale=1)
[16:59:13] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=-179.8°, current=180.0°, player=(426,757), corner_timer=0.00
[16:59:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(434.4185, 755.5564), source=PLAYER (AssaultRifle), range=1469, listeners=10
[16:59:14] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[16:59:14] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/3 -> 1/3
[16:59:14] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[16:59:14] [INFO] [ImpactEffects] spawn_blood_effect called at (652.8677, 758.8033), dir=(1, 0), lethal=false
[16:59:14] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:59:14] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:59:14] [INFO] [ImpactEffects] Blood effect spawned at (652.8677, 758.8033) (scale=1)
[16:59:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(457.9387, 742.8513), source=PLAYER (AssaultRifle), range=1469, listeners=10
[16:59:14] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[16:59:14] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[16:59:14] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 1/3 -> 0/3
[16:59:14] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[16:59:14] [INFO] [ImpactEffects] spawn_blood_effect called at (650.7244, 755.114), dir=(1, 0), lethal=true
[16:59:14] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:59:14] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[16:59:14] [INFO] [ImpactEffects] Blood effect spawned at (650.7244, 755.114) (scale=1.5)
[16:59:14] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[16:59:14] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[16:59:14] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[16:59:14] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[16:59:14] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[16:59:14] [ENEMY] [Enemy3] Death animation started with hit direction: (1, 0)
[16:59:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(475.6266, 740.7264), source=PLAYER (AssaultRifle), range=1469, listeners=9
[16:59:14] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[16:59:14] [INFO] [BloodDecal] Blood puddle created at (728.5361, 744.7418) (added to group)
[16:59:14] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(477,734), corner_timer=-0.00
[16:59:14] [ENEMY] [Enemy10] PATROL corner check: angle 3.6°
[16:59:14] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.6°, current=9.1°, player=(478,735), corner_timer=0.30
[16:59:14] [ENEMY] [Enemy4] PURSUING corner check: angle -89.6°
[16:59:14] [INFO] [BloodDecal] Blood puddle created at (699.3219, 802.8146) (added to group)
[16:59:14] [INFO] [BloodDecal] Blood puddle created at (758.9384, 800.4186) (added to group)
[16:59:14] [INFO] [BloodDecal] Blood puddle created at (728.3411, 777.9807) (added to group)
[16:59:14] [INFO] [BloodDecal] Blood puddle created at (777.2, 781.1313) (added to group)
[16:59:14] [INFO] [BloodDecal] Blood puddle created at (702.8226, 784.0636) (added to group)
[16:59:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(475.6266, 740.72644), shooter_id=781986041270, bullet_pos=(926.5073, 772.51843)
[16:59:14] [INFO] [Bullet] Using shooter_position, distance=452,00018
[16:59:14] [INFO] [Bullet] Distance to wall: 452,00018 (30,777527% of viewport)
[16:59:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:14] [INFO] [Bullet] Starting wall penetration at (926.5073, 772.51843)
[16:59:14] [INFO] [Bullet] Raycast backward hit penetrating body at distance 28,817095
[16:59:14] [INFO] [Bullet] Body exited signal received for penetrating body
[16:59:14] [INFO] [Bullet] Exiting penetration at (964.7457, 775.21466) after traveling 33,333332 pixels through wall
[16:59:14] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[16:59:14] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[16:59:14] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[16:59:14] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=-133.8°, current=-111.1°, player=(478,748), corner_timer=0.17
[16:59:14] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P2:combat_state, state=PURSUING, target=-132.6°, current=-122.6°, player=(471,759), corner_timer=0.10
[16:59:14] [INFO] [BloodDecal] Blood puddle created at (749.4796, 741.3508) (added to group)
[16:59:14] [INFO] [BloodDecal] Blood puddle created at (811.7054, 772.9103) (added to group)
[16:59:14] [INFO] [BloodDecal] Blood puddle created at (763.4907, 783.8485) (added to group)
[16:59:14] [INFO] [BloodDecal] Blood puddle created at (743.0538, 782.6255) (added to group)
[16:59:14] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.6°, player=(465,773), corner_timer=-0.01
[16:59:14] [ENEMY] [Enemy10] PATROL corner check: angle 1.9°
[16:59:14] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.9°, current=5.8°, player=(464,775), corner_timer=0.30
[16:59:14] [INFO] [BloodDecal] Blood puddle created at (743.3008, 797.9202) (added to group)
[16:59:14] [INFO] [BloodDecal] Blood puddle created at (860.9705, 846.2231) (added to group)
[16:59:14] [INFO] [BloodDecal] Blood puddle created at (833.1546, 766.8998) (added to group)
[16:59:14] [ENEMY] [Enemy3] Ragdoll activated
[16:59:14] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[16:59:14] [INFO] [BloodDecal] Blood puddle created at (773.5103, 811.0933) (added to group)
[16:59:14] [INFO] [BloodDecal] Blood puddle created at (734.8204, 778.2906) (added to group)
[16:59:14] [INFO] [BloodDecal] Blood puddle created at (729.7778, 796.0268) (added to group)
[16:59:14] [INFO] [BloodDecal] Blood puddle created at (830.0964, 778.5673) (added to group)
[16:59:14] [INFO] [BloodDecal] Blood puddle created at (807.0644, 755.5801) (added to group)
[16:59:14] [INFO] [BloodDecal] Blood puddle created at (786.8223, 775.0229) (added to group)
[16:59:14] [INFO] [BloodDecal] Blood puddle created at (763.6859, 809.4896) (added to group)
[16:59:14] [INFO] [BloodDecal] Blood puddle created at (839.5429, 771.7261) (added to group)
[16:59:14] [INFO] [BloodDecal] Blood puddle created at (798.5574, 827.3351) (added to group)
[16:59:14] [INFO] [BloodDecal] Blood puddle created at (785.044, 802.9911) (added to group)
[16:59:14] [INFO] [BloodDecal] Blood puddle created at (830.6357, 746.9091) (added to group)
[16:59:15] [INFO] [BloodDecal] Blood puddle created at (863.3029, 853.2761) (added to group)
[16:59:15] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.9°, player=(484,796), corner_timer=-0.01
[16:59:15] [ENEMY] [Enemy10] PATROL corner check: angle 1.0°
[16:59:15] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.0°, current=4.1°, player=(484,796), corner_timer=0.30
[16:59:15] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:59:15] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=-119.9°, current=-120.9°, player=(500,780), corner_timer=0.02
[16:59:15] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-129.0°, player=(515,776), corner_timer=-0.01
[16:59:15] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[16:59:15] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[16:59:15] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-131.3°, player=(519,776), corner_timer=0.30
[16:59:15] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=-101.7°, current=-39.6°, player=(543,775), corner_timer=0.02
[16:59:15] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:59:15] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=56.7°, current=57.5°, player=(548,775), corner_timer=0.00
[16:59:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.5876, 781.7598), source=PLAYER (AssaultRifle), range=1469, listeners=9
[16:59:15] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
[16:59:15] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 4/4 -> 3/4
[16:59:15] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[16:59:15] [INFO] [ImpactEffects] spawn_blood_effect called at (569.3171, 899.3445), dir=(1, 0), lethal=false
[16:59:15] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:59:15] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:59:15] [INFO] [ImpactEffects] Blood effect spawned at (569.3171, 899.3445) (scale=1)
[16:59:16] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[16:59:16] [ENEMY] [Enemy3] Death animation completed
[16:59:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(584.8486, 788.8552), source=PLAYER (AssaultRifle), range=1469, listeners=9
[16:59:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=5
[16:59:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(584.84863, 788.8552), shooter_id=781986041270, bullet_pos=(609.7854, 1006.0952)
[16:59:16] [INFO] [Bullet] Using shooter_position, distance=218,66655
[16:59:16] [INFO] [Bullet] Distance to wall: 218,66655 (14,889409% of viewport)
[16:59:16] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:16] [INFO] [Bullet] Starting wall penetration at (609.7854, 1006.0952)
[16:59:16] [INFO] [Bullet] Raycast backward hit penetrating body at distance 20,310974
[16:59:16] [INFO] [Bullet] Body exited signal received for penetrating body
[16:59:16] [INFO] [Bullet] Exiting penetration at (614.1569, 1044.1785) after traveling 33,333336 pixels through wall
[16:59:16] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[16:59:16] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[16:59:16] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P3:corner, state=RETREATING, target=-89.6°, current=-127.3°, player=(607,798), corner_timer=0.02
[16:59:16] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.0°, current=175.9°, player=(607,798), corner_timer=-0.01
[16:59:16] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[16:59:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(610.4108, 807.3281), source=PLAYER (AssaultRifle), range=1469, listeners=9
[16:59:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
[16:59:16] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=178.1°, player=(610,801), corner_timer=0.30
[16:59:16] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 3/4 -> 2/4
[16:59:16] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[16:59:16] [INFO] [ImpactEffects] spawn_blood_effect called at (565.3676, 900.9589), dir=(1, 0), lethal=false
[16:59:16] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:59:16] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:59:16] [INFO] [ImpactEffects] Blood effect spawned at (565.3676, 900.9589) (scale=1)
[16:59:16] [ENEMY] [Enemy4] ROT_CHANGE: P3:corner -> P1:visible, state=RETREATING, target=-63.2°, current=-100.9°, player=(615,807), corner_timer=0.02
[16:59:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(571.7023, 901.8704), source=ENEMY (Enemy4), range=1469, listeners=9
[16:59:16] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[16:59:16] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:59:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(624.754, 833.3865), source=PLAYER (AssaultRifle), range=1469, listeners=9
[16:59:16] [ENEMY] [Enemy4] Heard gunshot at (624.754, 833.3865), source_type=0, intensity=0.37, distance=83
[16:59:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
[16:59:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(0, 0), shooter_id=0, bullet_pos=(695.80804, 842.6978)
[16:59:16] [INFO] [Bullet] WARNING: Unable to determine shooter position
[16:59:16] [INFO] [Bullet] Using shooter_position, distance=1092,8351
[16:59:16] [INFO] [Bullet] Distance to wall: 1092,8351 (74,41315% of viewport)
[16:59:16] [INFO] [Bullet] Distance-based penetration chance: 59,851326%
[16:59:16] [INFO] [Bullet] Penetration failed (distance roll)
[16:59:16] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[16:59:16] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 2/4 -> 1/4
[16:59:16] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[16:59:16] [INFO] [ImpactEffects] spawn_blood_effect called at (582.2602, 903.3895), dir=(1, 0), lethal=false
[16:59:16] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:59:16] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:59:16] [INFO] [ImpactEffects] Blood effect spawned at (582.2602, 903.3895) (scale=1)
[16:59:16] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P3:corner, state=RETREATING, target=-89.6°, current=180.0°, player=(625,831), corner_timer=0.02
[16:59:16] [ENEMY] [Enemy1] PURSUING corner check: angle -135.4°
[16:59:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(628.7159, 866.1973), source=PLAYER (AssaultRifle), range=1469, listeners=9
[16:59:16] [ENEMY] [Enemy4] Heard gunshot at (628.7159, 866.1973), source_type=0, intensity=0.94, distance=52
[16:59:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
[16:59:16] [INFO] [BloodDecal] Blood puddle created at (670.1718, 925.759) (added to group)
[16:59:16] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 1/4 -> 0/4
[16:59:16] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[16:59:16] [INFO] [ImpactEffects] spawn_blood_effect called at (596.7883, 906.8442), dir=(1, 0), lethal=true
[16:59:16] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:59:16] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[16:59:16] [INFO] [ImpactEffects] Blood effect spawned at (596.7883, 906.8442) (scale=1.5)
[16:59:16] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
[16:59:16] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
[16:59:16] [ENEMY] [Enemy4] [AllyDeath] Notified 1 enemies
[16:59:16] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 8)
[16:59:16] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[16:59:16] [ENEMY] [Enemy4] Death animation started with hit direction: (1, 0)
[16:59:16] [INFO] [BloodDecal] Blood puddle created at (692.9899, 973.4119) (added to group)
[16:59:16] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=53.7°, current=53.8°, player=(632,876), corner_timer=0.00
[16:59:16] [INFO] [BloodDecal] Blood puddle created at (654.7249, 928.6661) (added to group)
[16:59:16] [INFO] [BloodDecal] Blood puddle created at (632.6558, 906.1185) (added to group)
[16:59:16] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[16:59:16] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.0°, current=125.2°, player=(637,887), corner_timer=-0.01
[16:59:16] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[16:59:16] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=127.5°, player=(639,890), corner_timer=0.30
[16:59:16] [INFO] [BloodDecal] Blood puddle created at (645.6501, 903.2917) (added to group)
[16:59:16] [INFO] [BloodDecal] Blood puddle created at (686.6054, 988.5878) (added to group)
[16:59:16] [INFO] [BloodDecal] Blood puddle created at (664.9215, 904.5657) (added to group)
[16:59:16] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[16:59:16] [INFO] [BloodDecal] Blood puddle created at (653.0853, 934.598) (added to group)
[16:59:16] [INFO] [BloodDecal] Blood puddle created at (698.801, 962.2435) (added to group)
[16:59:16] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:59:16] [ENEMY] [Enemy1] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=57.0°, current=31.6°, player=(659,913), corner_timer=0.06
[16:59:16] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
[16:59:16] [INFO] [BloodDecal] Blood puddle created at (731.2782, 938.8241) (added to group)
[16:59:16] [INFO] [BloodDecal] Blood puddle created at (748.0045, 990.3147) (added to group)
[16:59:16] [INFO] [BloodDecal] Blood puddle created at (625.716, 921.7385) (added to group)
[16:59:16] [INFO] [BloodDecal] Blood puddle created at (634.2231, 923.0244) (added to group)
[16:59:16] [INFO] [BloodDecal] Blood puddle created at (677.5771, 949.0615) (added to group)
[16:59:16] [ENEMY] [Enemy1] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=56.0°, current=86.6°, player=(677,932), corner_timer=0.06
[16:59:16] [INFO] [BloodDecal] Blood puddle created at (648.3064, 926.3397) (added to group)
[16:59:16] [INFO] [BloodDecal] Blood puddle created at (769.1475, 916.0409) (added to group)
[16:59:16] [INFO] [BloodDecal] Blood puddle created at (647.0417, 935.1989) (added to group)
[16:59:16] [INFO] [BloodDecal] Blood puddle created at (671.6947, 894.6202) (added to group)
[16:59:16] [INFO] [BloodDecal] Blood puddle created at (680.2628, 918.4671) (added to group)
[16:59:16] [INFO] [BloodDecal] Blood puddle created at (711.798, 948.0368) (added to group)
[16:59:16] [INFO] [BloodDecal] Blood puddle created at (684.6463, 973.9744) (added to group)
[16:59:16] [INFO] [BloodDecal] Blood puddle created at (672.3993, 972.7953) (added to group)
[16:59:16] [INFO] [BloodDecal] Blood puddle created at (683.2334, 920.2859) (added to group)
[16:59:16] [INFO] [BloodDecal] Blood puddle created at (717.5049, 965.4446) (added to group)
[16:59:16] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.5°, current=89.6°, player=(709,961), corner_timer=-0.01
[16:59:16] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[16:59:16] [INFO] [BloodDecal] Blood puddle created at (679.6475, 942.3275) (added to group)
[16:59:17] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=91.9°, player=(713,963), corner_timer=0.30
[16:59:17] [INFO] [BloodDecal] Blood puddle created at (742.2396, 940.5751) (added to group)
[16:59:17] [INFO] [BloodDecal] Blood puddle created at (706.3956, 968.8569) (added to group)
[16:59:17] [INFO] [BloodDecal] Blood puddle created at (701.3793, 936.5772) (added to group)
[16:59:17] [ENEMY] [Enemy4] Ragdoll activated
[16:59:17] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[16:59:17] [INFO] [BloodDecal] Blood puddle created at (699.773, 990.0593) (added to group)
[16:59:17] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:59:17] [INFO] [BloodDecal] Blood puddle created at (757.3071, 904.6803) (added to group)
[16:59:17] [INFO] [BloodDecal] Blood puddle created at (759.8207, 967.5527) (added to group)
[16:59:17] [INFO] [BloodDecal] Blood puddle created at (750.1693, 974.6052) (added to group)
[16:59:17] [INFO] [BloodDecal] Blood puddle created at (688.5186, 948.2677) (added to group)
[16:59:17] [INFO] [BloodDecal] Blood puddle created at (798.5662, 981.8159) (added to group)
[16:59:17] [INFO] [BloodDecal] Blood puddle created at (709.3757, 984.2625) (added to group)
[16:59:17] [INFO] [BloodDecal] Blood puddle created at (728.2255, 966.3085) (added to group)
[16:59:17] [INFO] [BloodDecal] Blood puddle created at (727.6404, 947.3855) (added to group)
[16:59:17] [INFO] [BloodDecal] Blood puddle created at (774.9317, 980.1284) (added to group)
[16:59:17] [INFO] [BloodDecal] Blood puddle created at (761.611, 980.163) (added to group)
[16:59:17] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[16:59:17] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.1°, current=89.5°, player=(808,969), corner_timer=-0.01
[16:59:17] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[16:59:17] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=91.8°, player=(812,968), corner_timer=0.30
[16:59:17] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:59:17] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=176.9°, current=89.4°, player=(886,903), corner_timer=-0.01
[16:59:17] [ENEMY] [Enemy7] PATROL corner check: angle 89.3°
[16:59:17] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.3°, current=91.7°, player=(889,900), corner_timer=0.30
[16:59:17] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=25.9°, current=26.2°, player=(895,881), corner_timer=0.00
[16:59:17] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:59:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(895.935, 884.6379), source=PLAYER (AssaultRifle), range=1469, listeners=8
[16:59:17] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=7
[16:59:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(895.935, 884.6379), shooter_id=781986041270, bullet_pos=(756.9204, 823.1647)
[16:59:17] [INFO] [Bullet] Using shooter_position, distance=152,00003
[16:59:17] [INFO] [Bullet] Distance to wall: 152,00003 (10,349962% of viewport)
[16:59:17] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:17] [INFO] [Bullet] Starting wall penetration at (756.9204, 823.1647)
[16:59:17] [INFO] [Bullet] Raycast backward hit penetrating body at distance 5,7820544
[16:59:18] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[16:59:18] [INFO] [Bullet] Max penetration distance exceeded: 66,66667 >= 48
[16:59:18] [INFO] [Bullet] Body exited signal received for penetrating body
[16:59:18] [INFO] [Bullet] Exiting penetration at (691.3762, 794.1806) after traveling 66,66667 pixels through wall
[16:59:18] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[16:59:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(895.935, 859.1077), source=PLAYER (AssaultRifle), range=1469, listeners=8
[16:59:18] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=7
[16:59:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(895.935, 825.2225), source=PLAYER (AssaultRifle), range=1469, listeners=8
[16:59:18] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=7
[16:59:18] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=176.8°, current=89.3°, player=(895,819), corner_timer=-0.01
[16:59:18] [ENEMY] [Enemy7] PATROL corner check: angle 89.3°
[16:59:18] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.3°, current=91.6°, player=(895,814), corner_timer=0.30
[16:59:18] [ENEMY] [Enemy4] Death animation completed
[16:59:18] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:59:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(895.935, 790.0223), source=PLAYER (AssaultRifle), range=1469, listeners=8
[16:59:18] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=7
[16:59:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(895.935, 825.22253), shooter_id=781986041270, bullet_pos=(500.15778, 688.68616)
[16:59:18] [INFO] [Bullet] Using shooter_position, distance=418,6667
[16:59:18] [INFO] [Bullet] Distance to wall: 418,6667 (28,507784% of viewport)
[16:59:18] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:18] [INFO] [Bullet] Starting wall penetration at (500.15778, 688.68616)
[16:59:18] [INFO] [Bullet] Raycast backward hit penetrating body at distance 36,229225
[16:59:18] [INFO] [Bullet] Body exited signal received for penetrating body
[16:59:18] [INFO] [Bullet] Exiting penetration at (463.92023, 676.1848) after traveling 33,333336 pixels through wall
[16:59:18] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[16:59:18] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[16:59:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(895.935, 754.8221), source=PLAYER (AssaultRifle), range=1469, listeners=8
[16:59:18] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=7
[16:59:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(895.935, 859.1077), shooter_id=781986041270, bullet_pos=(49.616783, 501.76474)
[16:59:18] [INFO] [Bullet] Using shooter_position, distance=918,66675
[16:59:18] [INFO] [Bullet] Distance to wall: 918,66675 (62,55371% of viewport)
[16:59:18] [INFO] [Bullet] Distance-based penetration chance: 73,68734%
[16:59:18] [INFO] [Bullet] Starting wall penetration at (49.616783, 501.76474)
[16:59:18] [INFO] [Bullet] Raycast backward hit penetrating body at distance 19,210571
[16:59:18] [INFO] [Bullet] Body exited signal received for penetrating body
[16:59:18] [INFO] [Bullet] Exiting penetration at (14.302338, 486.85388) after traveling 33,333332 pixels through wall
[16:59:18] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[16:59:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(895.935, 719.6219), source=PLAYER (AssaultRifle), range=1469, listeners=8
[16:59:18] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=7
[16:59:18] [ENEMY] [Enemy2] Hit taken, damage: 1, health: 2/2 -> 1/2
[16:59:18] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[16:59:18] [INFO] [ImpactEffects] spawn_blood_effect called at (568.8141, 688.9601), dir=(1, 0), lethal=false
[16:59:18] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:59:18] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[16:59:18] [INFO] [ImpactEffects] Blood effect spawned at (568.8141, 688.9601) (scale=1)
[16:59:18] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=68.4°, current=180.0°, player=(895,713), corner_timer=0.00
[16:59:18] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=176.7°, current=89.3°, player=(895,713), corner_timer=-0.01
[16:59:18] [ENEMY] [Enemy7] PATROL corner check: angle 89.3°
[16:59:18] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.3°, current=91.6°, player=(895,709), corner_timer=0.30
[16:59:18] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:59:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(895.935, 684.4218), source=PLAYER (AssaultRifle), range=1469, listeners=8
[16:59:18] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
[16:59:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(895.935, 790.02234), shooter_id=781986041270, bullet_pos=(41.23394, 559.15265)
[16:59:18] [INFO] [Bullet] Using shooter_position, distance=885,33307
[16:59:18] [INFO] [Bullet] Distance to wall: 885,33307 (60,28396% of viewport)
[16:59:18] [INFO] [Bullet] Distance-based penetration chance: 76,33538%
[16:59:18] [INFO] [Bullet] Starting wall penetration at (41.23394, 559.15265)
[16:59:18] [INFO] [Bullet] Raycast backward hit penetrating body at distance 28,768457
[16:59:18] [INFO] [Bullet] Body exited signal received for penetrating body
[16:59:18] [INFO] [Bullet] Exiting penetration at (4.226921, 549.15643) after traveling 33,333332 pixels through wall
[16:59:18] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[16:59:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(895.935, 649.2216), source=PLAYER (AssaultRifle), range=1469, listeners=8
[16:59:18] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
[16:59:18] [INFO] [BloodDecal] Blood puddle created at (628.9369, 721.8564) (added to group)
[16:59:18] [INFO] [BloodyFeet:Player] Blood ran out - no more footprints
[16:59:18] [INFO] [BloodDecal] Blood puddle created at (634.1531, 714.9755) (added to group)
[16:59:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(895.935, 614.0214), source=PLAYER (AssaultRifle), range=1469, listeners=8
[16:59:18] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
[16:59:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(895.935, 719.62195), shooter_id=781986041270, bullet_pos=(65.72644, 528.1606)
[16:59:19] [INFO] [Bullet] Using shooter_position, distance=851,9998
[16:59:19] [INFO] [Bullet] Distance to wall: 851,9998 (58,014236% of viewport)
[16:59:19] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=176.7°, current=89.3°, player=(895,608), corner_timer=-0.01
[16:59:19] [ENEMY] [Enemy7] PATROL corner check: angle 89.3°
[16:59:19] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.3°, current=91.6°, player=(895,603), corner_timer=0.30
[16:59:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(895.935, 649.22156), shooter_id=781986041270, bullet_pos=(479.18817, 689.2703)
[16:59:19] [INFO] [Bullet] Using shooter_position, distance=418,66672
[16:59:19] [INFO] [Bullet] Distance to wall: 418,66672 (28,507788% of viewport)
[16:59:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:19] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:59:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(889.1901, 582.2428), source=PLAYER (AssaultRifle), range=1469, listeners=8
[16:59:19] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
[16:59:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(895.935, 684.42175), shooter_id=781986041270, bullet_pos=(54.11165, 553.1319)
[16:59:19] [INFO] [Bullet] Using shooter_position, distance=851,99976
[16:59:19] [INFO] [Bullet] Distance to wall: 851,99976 (58,014233% of viewport)
[16:59:19] [INFO] [Bullet] Distance-based penetration chance: 78,9834%
[16:59:19] [INFO] [Bullet] Starting wall penetration at (54.11165, 553.1319)
[16:59:19] [INFO] [Bullet] Raycast backward hit penetrating body at distance 15,954388
[16:59:19] [INFO] [BloodDecal] Blood puddle created at (702.0397, 674.3121) (added to group)
[16:59:19] [INFO] [Bullet] Body exited signal received for penetrating body
[16:59:19] [INFO] [Bullet] Exiting penetration at (16.236172, 547.22485) after traveling 33,333336 pixels through wall
[16:59:19] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[16:59:19] [INFO] [BloodDecal] Blood puddle created at (656.5534, 746.2593) (added to group)
[16:59:19] [INFO] [BloodDecal] Blood puddle created at (641.4764, 773.7776) (added to group)
[16:59:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(872.986, 560.0353), source=PLAYER (AssaultRifle), range=1469, listeners=8
[16:59:19] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=6
[16:59:19] [ENEMY] [Enemy2] Hit taken, damage: 1, health: 1/2 -> 0/2
[16:59:19] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[16:59:19] [INFO] [ImpactEffects] spawn_blood_effect called at (613.8155, 802.8437), dir=(1, 0), lethal=true
[16:59:19] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[16:59:19] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[16:59:19] [INFO] [ImpactEffects] Blood effect spawned at (613.8155, 802.8437) (scale=1.5)
[16:59:19] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
[16:59:19] [INFO] [ScoreManager] Kill registered. Combo: 3 (points: 3000)
[16:59:19] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 7)
[16:59:19] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[16:59:19] [ENEMY] [Enemy2] Death animation started with hit direction: (1, 0)
[16:59:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(895.935, 649.22156), shooter_id=781986041270, bullet_pos=(50.063866, 716.7008)
[16:59:19] [INFO] [Bullet] Using shooter_position, distance=848,5585
[16:59:19] [INFO] [Bullet] Distance to wall: 848,5585 (57,779907% of viewport)
[16:59:19] [INFO] [Bullet] Distance-based penetration chance: 79,256775%
[16:59:19] [INFO] [Bullet] Starting wall penetration at (50.063866, 716.7008)
[16:59:19] [INFO] [Bullet] Raycast backward hit penetrating body at distance 15,232605
[16:59:19] [INFO] [BloodDecal] Blood puddle created at (689.3077, 750.3434) (added to group)
[16:59:19] [INFO] [Bullet] Body exited signal received for penetrating body
[16:59:19] [INFO] [Bullet] Exiting penetration at (16.798422, 718.8272) after traveling 28,333336 pixels through wall
[16:59:19] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[16:59:19] [INFO] [BloodDecal] Blood puddle created at (699.908, 736.6424) (added to group)
[16:59:19] [INFO] [BloodDecal] Blood puddle created at (735.3126, 722.601) (added to group)
[16:59:19] [INFO] [BloodDecal] Blood puddle created at (745.5045, 807.4246) (added to group)
[16:59:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(848.3569, 548.356), source=PLAYER (AssaultRifle), range=1469, listeners=7
[16:59:19] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=0, below_threshold=6
[16:59:19] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=176.6°, current=89.3°, player=(848,542), corner_timer=-0.01
[16:59:19] [ENEMY] [Enemy7] PATROL corner check: angle 89.2°
[16:59:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(895.935, 614.02136), shooter_id=781986041270, bullet_pos=(60.42695, 906.8379)
[16:59:19] [INFO] [Bullet] Using shooter_position, distance=885,3334
[16:59:19] [INFO] [Bullet] Distance to wall: 885,3334 (60,283978% of viewport)
[16:59:19] [INFO] [Bullet] Distance-based penetration chance: 76,335365%
[16:59:19] [INFO] [Bullet] Penetration failed (distance roll)
[16:59:19] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.2°, current=91.5°, player=(845,541), corner_timer=0.30
[16:59:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(872.98596, 560.0353), shooter_id=781986041270, bullet_pos=(503.36337, 874.5629)
[16:59:19] [INFO] [Bullet] Using shooter_position, distance=485,3334
[16:59:19] [INFO] [Bullet] Distance to wall: 485,3334 (33,047245% of viewport)
[16:59:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:19] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:59:19] [ENEMY] [Enemy1] PURSUING corner check: angle -78.2°
[16:59:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(872.98596, 560.0353), shooter_id=781986041270, bullet_pos=(624.0881, 1001.2537)
[16:59:19] [INFO] [Bullet] Using shooter_position, distance=506,58057
[16:59:19] [INFO] [Bullet] Distance to wall: 506,58057 (34,494003% of viewport)
[16:59:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:19] [INFO] [BloodDecal] Blood puddle created at (670.8129, 811.6113) (added to group)
[16:59:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(848.35693, 548.35596), shooter_id=781986041270, bullet_pos=(508.00467, 845.7862)
[16:59:19] [INFO] [Bullet] Using shooter_position, distance=452,00046
[16:59:19] [INFO] [Bullet] Distance to wall: 452,00046 (30,777544% of viewport)
[16:59:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:19] [INFO] [Bullet] Starting wall penetration at (508.00467, 845.7862)
[16:59:19] [INFO] [Bullet] Raycast backward hit penetrating body at distance 27,702827
[16:59:19] [INFO] [Bullet] Body exited signal received for penetrating body
[16:59:19] [INFO] [Bullet] Exiting penetration at (479.14, 871.01074) after traveling 33,333336 pixels through wall
[16:59:19] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[16:59:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(872.98596, 560.0353), shooter_id=781986041270, bullet_pos=(725.42175, 891.33685)
[16:59:19] [INFO] [Bullet] Using shooter_position, distance=362,67883
[16:59:19] [INFO] [Bullet] Distance to wall: 362,67883 (24,695469% of viewport)
[16:59:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:19] [INFO] [BloodDecal] Blood puddle created at (722.5397, 803.8769) (added to group)
[16:59:19] [INFO] [BloodDecal] Blood puddle created at (698.3947, 793.0114) (added to group)
[16:59:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(872.98596, 560.0353), shooter_id=781986041270, bullet_pos=(797.0728, 997.1922)
[16:59:19] [INFO] [Bullet] Using shooter_position, distance=443,69922
[16:59:19] [INFO] [Bullet] Distance to wall: 443,69922 (30,212297% of viewport)
[16:59:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
[16:59:19] [INFO] [Bullet] Starting wall penetration at (797.0728, 997.1922)
[16:59:19] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[16:59:19] [INFO] [Bullet] Exiting penetration at (811.3502, 1018.2853) after traveling 20,470833 pixels through wall
[16:59:19] [INFO] [Bullet] Damage multiplier after penetration: 0,1125
[16:59:19] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=176.6°, current=89.2°, player=(775,568), corner_timer=-0.01
[16:59:19] [ENEMY] [Enemy7] PATROL corner check: angle 89.2°
[16:59:19] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.2°, current=91.5°, player=(773,569), corner_timer=0.30
[16:59:19] [ENEMY] [Enemy2] Ragdoll activated
[16:59:19] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[16:59:19] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:59:19] [ENEMY] [Enemy1] PURSUING corner check: angle -76.0°
[16:59:20] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=176.6°, current=89.2°, player=(761,575), corner_timer=-0.01
[16:59:20] [ENEMY] [Enemy7] PATROL corner check: angle 89.2°
[16:59:20] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.2°, current=91.5°, player=(761,575), corner_timer=0.30
[16:59:20] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:59:20] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=176.6°, current=89.2°, player=(761,575), corner_timer=-0.01
[16:59:20] [ENEMY] [Enemy7] PATROL corner check: angle 89.2°
[16:59:20] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.2°, current=91.5°, player=(761,575), corner_timer=0.30
[16:59:20] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[16:59:20] [INFO] ------------------------------------------------------------
[16:59:20] [INFO] GAME LOG ENDED: 2026-02-04T16:59:20
[16:59:20] [INFO] ============================================================
