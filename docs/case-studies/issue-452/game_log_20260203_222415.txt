[22:24:15] [INFO] ============================================================
[22:24:15] [INFO] GAME LOG STARTED
[22:24:15] [INFO] ============================================================
[22:24:15] [INFO] Timestamp: 2026-02-03T22:24:15
[22:24:15] [INFO] Log file: I:/Загрузки/godot exe/враги от гранат/game_log_20260203_222415.txt
[22:24:15] [INFO] Executable: I:/Загрузки/godot exe/враги от гранат/Godot-Top-Down-Template.exe
[22:24:15] [INFO] OS: Windows
[22:24:15] [INFO] Debug build: false
[22:24:15] [INFO] Engine version: 4.3-stable (official)
[22:24:15] [INFO] Project: Godot Top-Down Template
[22:24:15] [INFO] ------------------------------------------------------------
[22:24:15] [INFO] [GameManager] GameManager ready
[22:24:15] [INFO] [ScoreManager] ScoreManager ready
[22:24:15] [INFO] [SoundPropagation] SoundPropagation autoload initialized
[22:24:15] [INFO] [ImpactEffects] Scenes loaded: DustEffect, BloodEffect, SparksEffect, BloodDecal
[22:24:15] [INFO] [ImpactEffects] ImpactEffectsManager ready - FULL VERSION with blood effects enabled
[22:24:15] [INFO] [ImpactEffects] Starting particle shader warmup (Issue #343 fix)...
[22:24:15] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:24:15] [INFO] [PenultimateHit] Saturation shader loaded successfully
[22:24:15] [INFO] [PenultimateHit] Starting shader warmup (Issue #343 fix)...
[22:24:15] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
[22:24:15] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
[22:24:15] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
[22:24:15] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
[22:24:15] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
[22:24:15] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:24:15] [INFO] [LastChance] Last chance shader loaded successfully
[22:24:15] [INFO] [LastChance] Starting shader warmup (Issue #343 fix)...
[22:24:15] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
[22:24:15] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
[22:24:15] [INFO] [LastChance]   Sepia intensity: 0.70
[22:24:15] [INFO] [LastChance]   Brightness: 0.60
[22:24:15] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
[22:24:15] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
[22:24:15] [INFO] [ExperimentalSettings] ExperimentalSettings initialized - FOV enabled: true, Complex grenade throwing: false
[22:24:15] [INFO] [CinemaEffects] CinemaEffectsManager initializing (v5.2 - overlay approach with enhanced death effects)...
[22:24:15] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:24:15] [INFO] [CinemaEffects] Created effects layer at layer 99
[22:24:15] [INFO] [CinemaEffects] Cinema shader loaded successfully (v5.0 - no screen_texture)
[22:24:15] [INFO] [CinemaEffects] Starting cinema shader warmup (Issue #343 fix)...
[22:24:15] [INFO] [CinemaEffects] Cinema film effect initialized (v5.2) - Configuration:
[22:24:15] [INFO] [CinemaEffects]   Approach: Overlay-based (no screen_texture)
[22:24:15] [INFO] [CinemaEffects]   Grain intensity: 0.15
[22:24:15] [INFO] [CinemaEffects]   Warm tint: 0.12 intensity
[22:24:15] [INFO] [CinemaEffects]   Sunny effect: 0.08 intensity
[22:24:15] [INFO] [CinemaEffects]   Vignette: 0.25 intensity
[22:24:15] [INFO] [CinemaEffects]   Film defects: 1.5% probability
[22:24:15] [INFO] [CinemaEffects]   White specks: 0.70 intensity, 4.0% probability
[22:24:15] [INFO] [CinemaEffects]   Death effects: cigarette burn + expanding spots + end of reel (top-right)
[22:24:15] [INFO] [CinemaEffects] Enabling effect after 1 frame(s)...
[22:24:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:15] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:24:15] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:24:15] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:24:15] [ENEMY] [Enemy1] Death animation component initialized
[22:24:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:15] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:24:15] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:24:15] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:24:15] [ENEMY] [Enemy2] Death animation component initialized
[22:24:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:15] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:24:15] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:24:15] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:24:15] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:24:15] [ENEMY] [Enemy3] Death animation component initialized
[22:24:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:15] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:24:15] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:24:15] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:24:15] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:24:15] [ENEMY] [Enemy4] Death animation component initialized
[22:24:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:15] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:24:15] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:24:15] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:24:15] [ENEMY] [Enemy5] Death animation component initialized
[22:24:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:15] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:24:15] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:24:15] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:24:15] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:24:15] [ENEMY] [Enemy6] Death animation component initialized
[22:24:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:15] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:24:15] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:24:15] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:24:15] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:24:15] [ENEMY] [Enemy7] Death animation component initialized
[22:24:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:15] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:24:15] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:24:15] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:24:15] [ENEMY] [Enemy8] Death animation component initialized
[22:24:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:15] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:24:15] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:24:15] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:24:15] [ENEMY] [Enemy9] Death animation component initialized
[22:24:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:15] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:24:15] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:24:15] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:24:15] [ENEMY] [Enemy10] Death animation component initialized
[22:24:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:15] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:24:15] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:24:15] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:24:15] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[22:24:15] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:24:15] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:24:15] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:24:15] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:24:15] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:24:15] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:24:15] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:24:15] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[22:24:15] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:24:15] [INFO] [BloodDecal] Blood puddle created at (640, 360) (added to group)
[22:24:15] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:24:15] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:24:15] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:24:15] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:24:15] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:24:15] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:24:15] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:24:15] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:24:15] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:24:15] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:24:15] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:24:15] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:24:15] [INFO] [ScoreManager] Level started with 10 enemies
[22:24:15] [INFO] [CinemaEffects] Found player node: Player
[22:24:15] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:24:15] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:24:15] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
[22:24:15] [ENEMY] [Enemy1] Registered as sound listener
[22:24:15] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[22:24:15] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:24:15] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
[22:24:15] [ENEMY] [Enemy2] Registered as sound listener
[22:24:15] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[22:24:15] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:24:15] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
[22:24:15] [ENEMY] [Enemy3] Registered as sound listener
[22:24:15] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[22:24:15] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:24:15] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
[22:24:15] [ENEMY] [Enemy4] Registered as sound listener
[22:24:15] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[22:24:15] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:24:15] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
[22:24:15] [ENEMY] [Enemy5] Registered as sound listener
[22:24:15] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[22:24:15] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:24:15] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
[22:24:15] [ENEMY] [Enemy6] Registered as sound listener
[22:24:15] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[22:24:15] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:24:15] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
[22:24:15] [ENEMY] [Enemy7] Registered as sound listener
[22:24:15] [ENEMY] [Enemy7] Spawned at (1606.114, 893.8859), hp: 2, behavior: PATROL
[22:24:15] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:24:15] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
[22:24:15] [ENEMY] [Enemy8] Registered as sound listener
[22:24:15] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[22:24:15] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:24:15] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
[22:24:15] [ENEMY] [Enemy9] Registered as sound listener
[22:24:15] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[22:24:15] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:24:15] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
[22:24:15] [ENEMY] [Enemy10] Registered as sound listener
[22:24:15] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[22:24:15] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:24:15] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:15] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:15] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:15] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:15] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:15] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:15] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:15] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:15] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:24:15] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:24:15] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:24:15] [INFO] [PenultimateHit] Shader warmup complete in 178 ms
[22:24:15] [INFO] [LastChance] Shader warmup complete in 176 ms
[22:24:15] [INFO] [CinemaEffects] Cinema shader warmup complete in 149 ms
[22:24:15] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:24:15] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:24:15] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:24:15] [INFO] [LastChance] Found player: Player
[22:24:15] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:24:15] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:24:15] [INFO] [LastChance] Connected to player Died signal (C#)
[22:24:15] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:24:15] [INFO] [ImpactEffects] Particle shader warmup complete: 5 effects warmed up in 430 ms
[22:24:16] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:24:16] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[22:24:16] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1050), corner_timer=0.30
[22:24:16] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1050), corner_timer=0.30
[22:24:17] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,946), corner_timer=-0.02
[22:24:17] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:24:17] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,946), corner_timer=-0.02
[22:24:17] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[22:24:17] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,941), corner_timer=0.30
[22:24:17] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,941), corner_timer=0.30
[22:24:17] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:24:17] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:24:17] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:24:17] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:24:17] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (639.9977, 781.1787)
[22:24:17] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,899), corner_timer=-0.02
[22:24:17] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[22:24:17] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,899), corner_timer=0.30
[22:24:17] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[22:24:17] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:24:17] [INFO] [GrenadeBase] Timer activated! 4.0 seconds until explosion
[22:24:17] [INFO] [Player.Grenade] Timer started, grenade created at (450, 899.9444)
[22:24:17] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:24:17] [INFO] [Player.Grenade] Step 1 complete! Drag: (62.798157, -5.3340454)
[22:24:17] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:24:17] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[22:24:17] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,899), corner_timer=-0.02
[22:24:17] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[22:24:17] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,899), corner_timer=0.30
[22:24:18] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(419,899), corner_timer=-0.02
[22:24:18] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[22:24:18] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(415,899), corner_timer=0.30
[22:24:18] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(336,899), corner_timer=-0.02
[22:24:18] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[22:24:18] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(334,899), corner_timer=0.30
[22:24:18] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:18] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(330,899), corner_timer=-0.02
[22:24:18] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[22:24:18] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(330,899), corner_timer=0.30
[22:24:19] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:19] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(330,899), corner_timer=-0.02
[22:24:19] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[22:24:19] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(330,899), corner_timer=0.30
[22:24:19] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:19] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(330,899), corner_timer=-0.02
[22:24:19] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[22:24:19] [INFO] [Player.Grenade.Simple] Throwing! Target: (682.08734, 633.4512), Distance: 441,7, Speed: 514,8, Friction: 300,0
[22:24:19] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,64919245
[22:24:19] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.796572, -0.604543), Speed: 514.8 (clamped from 514.8, max: 1352.8)
[22:24:19] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:24:19] [INFO] [Player.Grenade.Simple] Grenade thrown!
[22:24:19] [INFO] [Player.Grenade] State reset to IDLE
[22:24:19] [INFO] [Player.Grenade] State reset to IDLE
[22:24:19] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:24:19] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(330,899), corner_timer=0.30
[22:24:19] [INFO] [Player.Grenade] Player rotation restored to 0
[22:24:19] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:19] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[22:24:19] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (650.84, 1126.096)
[22:24:19] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=97.4°, current=-152.5°, player=(330,899), corner_timer=0.00
[22:24:19] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:24:19] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(330,899), corner_timer=-0.02
[22:24:19] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[22:24:19] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(330,899), corner_timer=0.30
[22:24:20] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:20] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(330,899), corner_timer=-0.02
[22:24:20] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[22:24:20] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(330,899), corner_timer=0.30
[22:24:20] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:20] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.5°, current=89.5°, player=(330,899), corner_timer=-0.02
[22:24:20] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[22:24:20] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(330,899), corner_timer=0.30
[22:24:20] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:20] [ENEMY] [Enemy4] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[22:24:20] [ENEMY] [Enemy4] EVADING_GRENADE started: escaping to (883.9998, 1114.387)
[22:24:20] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=68.6°, current=-89.8°, player=(330,899), corner_timer=0.00
[22:24:20] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.4°, current=89.5°, player=(330,899), corner_timer=-0.02
[22:24:20] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[22:24:20] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.3°, player=(330,899), corner_timer=0.30
[22:24:21] [INFO] [SoundPropagation] Sound emitted: type=GRENADE_LANDING, pos=(688.6584, 628.4648), source=NEUTRAL (FlashbangGrenade), range=112, listeners=10
[22:24:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=10, self=0, below_threshold=0
[22:24:21] [INFO] [GrenadeBase] Grenade landed at (688.6584, 628.4648)
[22:24:21] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:21] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.5°, player=(330,899), corner_timer=-0.02
[22:24:21] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[22:24:21] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(330,899), corner_timer=0.30
[22:24:21] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:21] [INFO] [GrenadeBase] EXPLODED at (691.7222, 626.1396)!
[22:24:21] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(691.7222, 626.1396), source=NEUTRAL (FlashbangGrenade), range=2937, listeners=10
[22:24:21] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=0, below_threshold=6
[22:24:21] [ENEMY] [Enemy3] Status: BLINDED applied
[22:24:21] [ENEMY] [Enemy3] Status: STUNNED applied
[22:24:21] [ENEMY] [Enemy4] Status: BLINDED applied
[22:24:21] [ENEMY] [Enemy4] Status: STUNNED applied
[22:24:21] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(330,899), corner_timer=-0.02
[22:24:21] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[22:24:21] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(330,899), corner_timer=0.30
[22:24:21] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:21] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(330,899), corner_timer=-0.02
[22:24:21] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[22:24:21] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(330,899), corner_timer=0.30
[22:24:22] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:22] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:24:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:22] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:24:22] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:24:22] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:24:22] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:24:22] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:24:22] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:24:22] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:24:22] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:24:22] [ENEMY] [Enemy1] Death animation component initialized
[22:24:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:22] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:24:22] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:24:22] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:24:22] [ENEMY] [Enemy2] Death animation component initialized
[22:24:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:22] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:24:22] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:24:22] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:24:22] [ENEMY] [Enemy3] Death animation component initialized
[22:24:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:22] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:24:22] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:24:22] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:24:22] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:24:22] [ENEMY] [Enemy4] Death animation component initialized
[22:24:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:22] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:24:22] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:24:22] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:24:22] [ENEMY] [Enemy5] Death animation component initialized
[22:24:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:22] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:24:22] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:24:22] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:24:22] [ENEMY] [Enemy6] Death animation component initialized
[22:24:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:22] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:24:22] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:24:22] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:24:22] [ENEMY] [Enemy7] Death animation component initialized
[22:24:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:22] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:24:22] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:24:22] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:24:22] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:24:22] [ENEMY] [Enemy8] Death animation component initialized
[22:24:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:22] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:24:22] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:24:22] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:24:22] [ENEMY] [Enemy9] Death animation component initialized
[22:24:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:22] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:24:22] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:24:22] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:24:22] [ENEMY] [Enemy10] Death animation component initialized
[22:24:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:22] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:24:22] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:24:22] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:24:22] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[22:24:22] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:24:22] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:24:22] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:24:22] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:24:22] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:24:22] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:24:22] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:24:22] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[22:24:22] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:24:22] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:24:22] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:24:22] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:24:22] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:24:22] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:24:22] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:24:22] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:24:22] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:24:22] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:24:22] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:24:22] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:24:22] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:24:22] [INFO] [ScoreManager] Level started with 10 enemies
[22:24:22] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:24:22] [INFO] [CinemaEffects] Found player node: Player
[22:24:22] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:24:22] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[22:24:22] [ENEMY] [Enemy1] Registered as sound listener
[22:24:22] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[22:24:22] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:24:22] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[22:24:22] [ENEMY] [Enemy2] Registered as sound listener
[22:24:22] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[22:24:22] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:24:22] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[22:24:22] [ENEMY] [Enemy3] Registered as sound listener
[22:24:22] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[22:24:22] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:24:22] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[22:24:22] [ENEMY] [Enemy4] Registered as sound listener
[22:24:22] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[22:24:22] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:24:22] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[22:24:22] [ENEMY] [Enemy5] Registered as sound listener
[22:24:22] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[22:24:22] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:24:22] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[22:24:22] [ENEMY] [Enemy6] Registered as sound listener
[22:24:22] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[22:24:22] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:24:22] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[22:24:22] [ENEMY] [Enemy7] Registered as sound listener
[22:24:22] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[22:24:22] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:24:22] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[22:24:22] [ENEMY] [Enemy8] Registered as sound listener
[22:24:22] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[22:24:22] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:24:22] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[22:24:22] [ENEMY] [Enemy9] Registered as sound listener
[22:24:22] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[22:24:22] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:24:22] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[22:24:22] [ENEMY] [Enemy10] Registered as sound listener
[22:24:22] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[22:24:22] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:24:22] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:22] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:22] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:22] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:22] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:22] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:22] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:22] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:22] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:24:22] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:24:22] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:24:22] [INFO] [LastChance] Found player: Player
[22:24:22] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:24:22] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:24:22] [INFO] [LastChance] Connected to player Died signal (C#)
[22:24:22] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:24:22] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:24:22] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:24:22] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:24:23] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:24:23] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[22:24:23] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(454,1152), corner_timer=0.30
[22:24:23] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(454,1152), corner_timer=0.30
[22:24:24] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(517,1218), corner_timer=-0.02
[22:24:24] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:24:24] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(517,1218), corner_timer=-0.02
[22:24:24] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[22:24:24] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(520,1220), corner_timer=0.30
[22:24:24] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(520,1220), corner_timer=0.30
[22:24:24] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(547,1197), corner_timer=-0.02
[22:24:24] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[22:24:24] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:24:24] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:24:24] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:24:24] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(547,1193), corner_timer=0.30
[22:24:24] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:24:24] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (573.19275, 1063.9948)
[22:24:24] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[22:24:24] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:24:24] [INFO] [GrenadeBase] Timer activated! 4.0 seconds until explosion
[22:24:24] [INFO] [Player.Grenade] Timer started, grenade created at (548.04926, 1150.8126)
[22:24:24] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:24:24] [INFO] [Player.Grenade] Step 1 complete! Drag: (72.15076, 7.44812)
[22:24:24] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:24:24] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[22:24:24] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(548,1090), corner_timer=-0.02
[22:24:24] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[22:24:24] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(548,1084), corner_timer=0.30
[22:24:25] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(497,1040), corner_timer=-0.02
[22:24:25] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[22:24:25] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(492,1040), corner_timer=0.30
[22:24:25] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(407,992), corner_timer=-0.02
[22:24:25] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[22:24:25] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(403,988), corner_timer=0.30
[22:24:25] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:25] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(349,840), corner_timer=-0.02
[22:24:25] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[22:24:25] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(349,835), corner_timer=0.30
[22:24:26] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:26] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(392,748), corner_timer=-0.02
[22:24:26] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[22:24:26] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(394,744), corner_timer=0.30
[22:24:26] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:26] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(407,728), corner_timer=-0.02
[22:24:26] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[22:24:26] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(407,728), corner_timer=0.30
[22:24:26] [INFO] [Player.Grenade.Simple] Throwing! Target: (859.79083, 693.73376), Distance: 456,5, Speed: 523,4, Friction: 300,0
[22:24:26] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,07576983
[22:24:26] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.997131, -0.075697), Speed: 523.4 (clamped from 523.4, max: 1352.8)
[22:24:26] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:24:26] [INFO] [Player.Grenade.Simple] Grenade thrown!
[22:24:26] [INFO] [Player.Grenade] State reset to IDLE
[22:24:26] [INFO] [Player.Grenade] State reset to IDLE
[22:24:26] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:24:26] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:26] [INFO] [Player.Grenade] Player rotation restored to 0
[22:24:26] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(407,728), corner_timer=-0.02
[22:24:26] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[22:24:26] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(407,728), corner_timer=0.30
[22:24:27] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:24:27] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:27] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(407,728), corner_timer=-0.02
[22:24:27] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[22:24:27] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(407,728), corner_timer=0.30
[22:24:27] [ENEMY] [Enemy4] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[22:24:27] [ENEMY] [Enemy4] EVADING_GRENADE started: escaping to (686.3515, 1177.686)
[22:24:27] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-98.0°, current=-83.8°, player=(407,728), corner_timer=0.00
[22:24:27] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:27] [ENEMY] [Enemy4] ROT_CHANGE: P4:velocity -> P1:visible, state=EVADING_GRENADE, target=-167.1°, current=-128.9°, player=(407,728), corner_timer=0.00
[22:24:27] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[22:24:27] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (380.2115, 852.6491)
[22:24:27] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=173.4°, current=40.1°, player=(407,728), corner_timer=0.00
[22:24:27] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P1:visible, state=EVADING_GRENADE, target=-172.7°, current=140.9°, player=(407,728), corner_timer=0.00
[22:24:27] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.5°, current=89.5°, player=(407,728), corner_timer=-0.02
[22:24:27] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[22:24:27] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(407,728), corner_timer=0.30
[22:24:27] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:27] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[22:24:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(530.4707, 769.6775), source=ENEMY (Enemy3), range=1469, listeners=20
[22:24:27] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[22:24:27] [ENEMY] [Enemy1] Heard gunshot at (530.4707, 769.6775), source_type=1, intensity=0.01, distance=479
[22:24:27] [ENEMY] [Enemy2] Heard gunshot at (530.4707, 769.6775), source_type=1, intensity=0.04, distance=256
[22:24:27] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[22:24:27] [INFO] [LastChance] Threat detected: Bullet
[22:24:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:24:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:24:27] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=74.1°, current=33.8°, player=(407,728), corner_timer=0.00
[22:24:27] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=87.6°, current=-101.3°, player=(407,728), corner_timer=0.00
[22:24:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(463.9387, 755.3914), shooter_id=197300062799, bullet_pos=(345.538, 715.313)
[22:24:27] [INFO] [Bullet] Using shooter_position, distance=125.000038146973
[22:24:27] [INFO] [Bullet] Distance to wall: 125.000038146973 (8.51148245222944% of viewport)
[22:24:27] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:24:27] [INFO] [Bullet] Starting wall penetration at (345.538, 715.313)
[22:24:27] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[22:24:27] [INFO] [Bullet] Exiting penetration at (301.335, 700.3505) after traveling 41.6666641235352 pixels through wall
[22:24:27] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[22:24:27] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[22:24:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(463.9814, 783.2468), source=ENEMY (Enemy3), range=1469, listeners=10
[22:24:27] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[22:24:27] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:24:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(549.1552, 776.0382), source=ENEMY (Enemy4), range=1469, listeners=10
[22:24:27] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[22:24:27] [INFO] [LastChance] Threat detected: @Area2D@540
[22:24:27] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:24:27] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:24:27] [INFO] [Player] Spawning blood effect at (407.54147, 728.06635), dir=(1, 0), lethal=False (C#)
[22:24:27] [INFO] [ImpactEffects] spawn_blood_effect called at (407.5415, 728.0663), dir=(1, 0), lethal=false
[22:24:27] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:24:27] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:24:27] [INFO] [ImpactEffects] Blood effect spawned at (407.5415, 728.0663) (scale=1)
[22:24:27] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[22:24:27] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[22:24:27] [INFO] [Player] Spawning blood effect at (407.54147, 728.06635), dir=(1, 0), lethal=False (C#)
[22:24:27] [INFO] [ImpactEffects] spawn_blood_effect called at (407.5415, 728.0663), dir=(1, 0), lethal=false
[22:24:27] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:24:27] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:24:27] [INFO] [ImpactEffects] Blood effect spawned at (407.5415, 728.0663) (scale=1)
[22:24:27] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[22:24:27] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[22:24:27] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=EVADING_GRENADE, target=140.4°, current=-162.4°, player=(407,728), corner_timer=0.00
[22:24:27] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.4°, current=89.5°, player=(407,728), corner_timer=-0.02
[22:24:27] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[22:24:28] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.3°, player=(407,728), corner_timer=0.30
[22:24:28] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[22:24:28] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[22:24:28] [ENEMY] [Enemy3] Memory: high confidence (0.99) - transitioning to PURSUING
[22:24:28] [ENEMY] [Enemy3] State: IDLE -> PURSUING
[22:24:28] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:24:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(479.817, 776.0963), source=ENEMY (Enemy4), range=1469, listeners=10
[22:24:28] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[22:24:28] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=PURSUING, target=-91.8°, current=171.2°, player=(407,728), corner_timer=0.00
[22:24:28] [ENEMY] [Enemy3] PURSUING corner check: angle 174.7°
[22:24:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(419.1981, 745.1779), shooter_id=197635607151, bullet_pos=(349.7925, 699.0552)
[22:24:28] [INFO] [Bullet] Using shooter_position, distance=83.3333358764648
[22:24:28] [INFO] [Bullet] Distance to wall: 83.3333358764648 (5.67432007632112% of viewport)
[22:24:28] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:24:28] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=-89.1°, current=-92.4°, player=(407,728), corner_timer=0.30
[22:24:28] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[22:24:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(405.9903, 825.5721), source=ENEMY (Enemy3), range=1469, listeners=10
[22:24:28] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[22:24:28] [INFO] [LastChance] Threat detected: @Area2D@552
[22:24:28] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[22:24:28] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:24:28] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P4:velocity, state=EVADING_GRENADE, target=89.7°, current=169.1°, player=(407,728), corner_timer=0.00
[22:24:28] [INFO] [Player] Spawning blood effect at (407.54147, 728.06635), dir=(1, 0), lethal=False (C#)
[22:24:28] [INFO] [ImpactEffects] spawn_blood_effect called at (407.5415, 728.0663), dir=(1, 0), lethal=false
[22:24:28] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:24:28] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:24:28] [INFO] [ImpactEffects] Blood effect spawned at (407.5415, 728.0663) (scale=1)
[22:24:28] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[22:24:28] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[22:24:28] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[22:24:28] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:28] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
[22:24:28] [INFO] [SoundPropagation] Sound emitted: type=GRENADE_LANDING, pos=(867.4354, 693.1534), source=NEUTRAL (FlashbangGrenade), range=112, listeners=10
[22:24:28] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=10, self=0, below_threshold=0
[22:24:28] [INFO] [GrenadeBase] Grenade landed at (867.4354, 693.1534)
[22:24:28] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[22:24:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(415.1966, 803.6766), source=ENEMY (Enemy3), range=1469, listeners=10
[22:24:28] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (455.0232, 734.3857) (added to group)
[22:24:28] [INFO] [Player] Spawning blood effect at (407.54147, 728.06635), dir=(1, 0), lethal=True (C#)
[22:24:28] [INFO] [ImpactEffects] spawn_blood_effect called at (407.5415, 728.0663), dir=(1, 0), lethal=true
[22:24:28] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:24:28] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[22:24:28] [INFO] [ImpactEffects] Blood effect spawned at (407.5415, 728.0663) (scale=1.5)
[22:24:28] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[22:24:28] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[22:24:28] [INFO] [CinemaEffects] Player died - triggering death effects
[22:24:28] [INFO] [CinemaEffects] Death effects triggered - starting cigarette burn, expanding spots, and end of reel (top-right)
[22:24:28] [INFO] [PenultimateHit] Player died - ending penultimate effect
[22:24:28] [INFO] [LastChance] Player died
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (479.0167, 741.7203) (added to group)
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (461.9239, 724.8959) (added to group)
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (463.7656, 717.527) (added to group)
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (486.4547, 786.0495) (added to group)
[22:24:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(419.1981, 745.1779), shooter_id=197635607151, bullet_pos=(41.08914, 944.8159)
[22:24:28] [INFO] [Bullet] Using shooter_position, distance=427.576629638672
[22:24:28] [INFO] [Bullet] Distance to wall: 427.576629638672 (29.1144789561898% of viewport)
[22:24:28] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:24:28] [ENEMY] [Enemy4] EVADING_GRENADE: Escaped to safe distance
[22:24:28] [ENEMY] [Enemy4] State: EVADING_GRENADE -> IDLE
[22:24:28] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[22:24:28] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[22:24:28] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[22:24:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(441.2853, 802.151), source=ENEMY (Enemy3), range=1469, listeners=10
[22:24:28] [ENEMY] [Enemy4] Heard gunshot at (441.2853, 802.151), source_type=1, intensity=0.12, distance=143
[22:24:28] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[22:24:28] [ENEMY] [Enemy4] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=-107.7°, current=89.7°, player=(407,728), corner_timer=0.00
[22:24:28] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[22:24:28] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.5°, player=(407,728), corner_timer=-0.02
[22:24:28] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (521.5715, 733.4609) (added to group)
[22:24:28] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P4:velocity, state=RETREATING, target=89.7°, current=92.5°, player=(407,728), corner_timer=0.00
[22:24:28] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(407,728), corner_timer=0.30
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (518.157, 724.8854) (added to group)
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (487.6517, 777.2161) (added to group)
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (476.6805, 768.7922) (added to group)
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (491.142, 754.704) (added to group)
[22:24:28] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[22:24:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(465.5082, 806.0135), source=ENEMY (Enemy3), range=1469, listeners=10
[22:24:28] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (485.3087, 786.5063) (added to group)
[22:24:28] [INFO] [LastChance] Threat detected: @Area2D@593
[22:24:28] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:24:28] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:24:28] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (570.2771, 709.1545) (added to group)
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (584.2961, 757.9636) (added to group)
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (539.6429, 733.0898) (added to group)
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (474.0558, 723.0608) (added to group)
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (547.8727, 794.5817) (added to group)
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (471.2311, 746.2069) (added to group)
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (478.4084, 748.7081) (added to group)
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (509.3761, 764.7943) (added to group)
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (493.6067, 763.7435) (added to group)
[22:24:28] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[22:24:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(466.7324, 809.5197), source=ENEMY (Enemy3), range=1469, listeners=10
[22:24:28] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (477.3169, 799.1604) (added to group)
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (526.569, 799.4212) (added to group)
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (488.7468, 786.9099) (added to group)
[22:24:28] [INFO] [LastChance] Threat detected: @Area2D@608
[22:24:28] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:24:28] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (514.8796, 794.3284) (added to group)
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (512.7813, 725.9243) (added to group)
[22:24:28] [INFO] [BloodyFeet:Enemy3] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (543.1011, 777.2546) (added to group)
[22:24:28] [INFO] [GrenadeBase] EXPLODED at (871.6523, 692.8333)!
[22:24:28] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(871.6523, 692.8333), source=NEUTRAL (FlashbangGrenade), range=2937, listeners=10
[22:24:28] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (499.7245, 779.351) (added to group)
[22:24:28] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(407,728), corner_timer=-0.02
[22:24:28] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[22:24:28] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[22:24:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(467.4768, 814.27), source=ENEMY (Enemy3), range=1469, listeners=10
[22:24:28] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[22:24:28] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(407,728), corner_timer=0.30
[22:24:28] [INFO] [LastChance] Threat detected: Bullet
[22:24:28] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:24:28] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:24:28] [INFO] [EnemyGrenade] Unsafe throw distance (134 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:24:28] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (504.4885, 789.0272) (added to group)
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (492.1937, 742.16) (added to group)
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (554.0994, 771.603) (added to group)
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (556.5892, 789.1702) (added to group)
[22:24:28] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:24:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:28] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:24:28] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:24:28] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:24:28] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:24:28] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:24:28] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:24:28] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:24:28] [INFO] [CinemaEffects] Death effects reset
[22:24:28] [ENEMY] [Enemy1] Death animation component initialized
[22:24:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:28] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:24:28] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:24:28] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:24:28] [ENEMY] [Enemy2] Death animation component initialized
[22:24:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:28] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:24:28] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:24:28] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:24:28] [ENEMY] [Enemy3] Death animation component initialized
[22:24:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:28] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:24:28] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:24:28] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:24:28] [ENEMY] [Enemy4] Death animation component initialized
[22:24:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:28] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:24:28] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:24:28] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:24:28] [ENEMY] [Enemy5] Death animation component initialized
[22:24:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:28] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:24:28] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:24:28] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:24:28] [ENEMY] [Enemy6] Death animation component initialized
[22:24:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:28] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:24:28] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:24:28] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:24:28] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:24:28] [ENEMY] [Enemy7] Death animation component initialized
[22:24:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:28] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:24:28] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:24:28] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:24:28] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:24:28] [ENEMY] [Enemy8] Death animation component initialized
[22:24:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:28] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:24:28] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:24:28] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:24:28] [ENEMY] [Enemy9] Death animation component initialized
[22:24:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:28] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:24:28] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:24:28] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:24:28] [ENEMY] [Enemy10] Death animation component initialized
[22:24:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:28] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:24:28] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:24:28] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:24:28] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[22:24:28] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:24:28] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:24:28] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:24:28] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:24:28] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:24:28] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:24:28] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:24:28] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[22:24:28] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:24:28] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:24:28] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:24:28] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:24:28] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:24:28] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:24:28] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:24:28] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:24:28] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:24:28] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:24:28] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:24:28] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:24:28] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:24:28] [INFO] [ScoreManager] Level started with 10 enemies
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (589.9552, 802.3235) (added to group)
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (547.5347, 767.3069) (added to group)
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (521.474, 782.621) (added to group)
[22:24:28] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:24:28] [INFO] [CinemaEffects] Found player node: Player
[22:24:28] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:24:28] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[22:24:28] [ENEMY] [Enemy1] Registered as sound listener
[22:24:28] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[22:24:28] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:24:28] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[22:24:28] [ENEMY] [Enemy2] Registered as sound listener
[22:24:28] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[22:24:28] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:24:28] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[22:24:28] [ENEMY] [Enemy3] Registered as sound listener
[22:24:28] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[22:24:28] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:24:28] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[22:24:28] [ENEMY] [Enemy4] Registered as sound listener
[22:24:28] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[22:24:28] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:24:28] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[22:24:28] [ENEMY] [Enemy5] Registered as sound listener
[22:24:28] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[22:24:28] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:24:28] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[22:24:28] [ENEMY] [Enemy6] Registered as sound listener
[22:24:28] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[22:24:28] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:24:28] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[22:24:28] [ENEMY] [Enemy7] Registered as sound listener
[22:24:28] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[22:24:28] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:24:28] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[22:24:28] [ENEMY] [Enemy8] Registered as sound listener
[22:24:28] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[22:24:28] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:24:28] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[22:24:28] [ENEMY] [Enemy9] Registered as sound listener
[22:24:28] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[22:24:28] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:24:28] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[22:24:28] [ENEMY] [Enemy10] Registered as sound listener
[22:24:28] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[22:24:28] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:24:28] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:28] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:28] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:28] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:28] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:28] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:28] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=213.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:28] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:28] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:24:28] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:24:28] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:24:28] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:24:28] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:24:28] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:24:28] [INFO] [LastChance] Found player: Player
[22:24:28] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:24:28] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:24:28] [INFO] [LastChance] Connected to player Died signal (C#)
[22:24:28] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (555.6252, 744.1473) (added to group)
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (607.5462, 768.78) (added to group)
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (596.1246, 791.5723) (added to group)
[22:24:28] [INFO] [BloodDecal] Blood puddle created at (631.4094, 767.7415) (added to group)
[22:24:29] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:24:29] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:24:29] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:24:29] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:24:29] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (552.9052, 1110.1719)
[22:24:29] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[22:24:29] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:24:29] [INFO] [GrenadeBase] Timer activated! 4.0 seconds until explosion
[22:24:29] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1111.1666)
[22:24:29] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:24:29] [INFO] [Player.Grenade] Step 1 complete! Drag: (110.90503, -17.134766)
[22:24:29] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:24:29] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[22:24:30] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:24:30] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[22:24:30] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,836), corner_timer=0.30
[22:24:30] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,836), corner_timer=0.30
[22:24:30] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,746), corner_timer=-0.02
[22:24:30] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:24:30] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,746), corner_timer=-0.02
[22:24:30] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[22:24:30] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,744), corner_timer=0.30
[22:24:30] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,744), corner_timer=0.30
[22:24:30] [INFO] [Player.Grenade.Simple] Throwing! Target: (836.40704, 681.2269), Distance: 382,9, Speed: 479,3, Friction: 300,0
[22:24:30] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,13813251
[22:24:30] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.990475, -0.137694), Speed: 479.3 (clamped from 479.3, max: 1352.8)
[22:24:30] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:24:30] [INFO] [Player.Grenade.Simple] Grenade thrown!
[22:24:30] [INFO] [Player.Grenade] State reset to IDLE
[22:24:30] [INFO] [Player.Grenade] State reset to IDLE
[22:24:30] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:24:30] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,734), corner_timer=-0.02
[22:24:30] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[22:24:31] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,734), corner_timer=0.30
[22:24:31] [INFO] [Player.Grenade] Player rotation restored to 0
[22:24:31] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:24:31] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(410,751), corner_timer=-0.02
[22:24:31] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[22:24:31] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(406,755), corner_timer=0.30
[22:24:31] [ENEMY] [Enemy4] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[22:24:31] [ENEMY] [Enemy4] EVADING_GRENADE started: escaping to (722.6743, 1184.52)
[22:24:31] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-98.0°, current=-83.8°, player=(360,801), corner_timer=0.00
[22:24:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(348.4349, 819.2239), source=PLAYER (AssaultRifle), range=1469, listeners=20
[22:24:31] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[22:24:31] [ENEMY] [Enemy1] Heard gunshot at (348.4349, 819.2239), source_type=0, intensity=0.01, distance=472
[22:24:31] [ENEMY] [Enemy2] Heard gunshot at (348.4349, 819.2239), source_type=0, intensity=0.03, distance=274
[22:24:31] [ENEMY] [Enemy3] Heard gunshot at (348.4349, 819.2239), source_type=0, intensity=0.02, distance=358
[22:24:31] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:24:31] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=84.0°, current=-157.5°, player=(348,813), corner_timer=0.00
[22:24:31] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=101.1°, current=-67.5°, player=(348,813), corner_timer=0.00
[22:24:31] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=169.8°, current=11.3°, player=(348,813), corner_timer=0.00
[22:24:31] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=169.4°, current=-176.1°, player=(344,816), corner_timer=0.00
[22:24:31] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(331,824), corner_timer=-0.02
[22:24:31] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[22:24:31] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(326,826), corner_timer=0.30
[22:24:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(316.7467, 835.6689), source=PLAYER (AssaultRifle), range=1469, listeners=10
[22:24:31] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:24:31] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 4/4 -> 3/4
[22:24:31] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:24:31] [INFO] [ImpactEffects] spawn_blood_effect called at (663.368, 757.1941), dir=(1, 0), lethal=false
[22:24:31] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:24:31] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:24:31] [INFO] [ImpactEffects] Blood effect spawned at (663.368, 757.1941) (scale=1)
[22:24:31] [INFO] [BloodyFeet:Enemy3] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[22:24:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(641.4384, 761.7606), source=ENEMY (Enemy3), range=1469, listeners=10
[22:24:31] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[22:24:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(287.2454, 837.9384), source=PLAYER (AssaultRifle), range=1469, listeners=10
[22:24:31] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=4, self=0, below_threshold=2
[22:24:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(576.7444, 782.9143), shooter_id=400354708487, bullet_pos=(511.4223, 796.2356)
[22:24:31] [INFO] [Bullet] Using shooter_position, distance=66.6666259765625
[22:24:31] [INFO] [Bullet] Distance to wall: 66.6666259765625 (4.53945315185968% of viewport)
[22:24:31] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[22:24:31] [INFO] [Bullet] Starting wall penetration at (511.4223, 796.2356)
[22:24:31] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 3/4 -> 2/4
[22:24:31] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:24:31] [INFO] [ImpactEffects] spawn_blood_effect called at (628.8896, 764.2837), dir=(1, 0), lethal=false
[22:24:31] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:24:31] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:24:31] [INFO] [ImpactEffects] Blood effect spawned at (628.8896, 764.2837) (scale=1)
[22:24:31] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[22:24:31] [INFO] [Bullet] Exiting penetration at (473.8621, 803.8953) after traveling 33.3333320617676 pixels through wall
[22:24:31] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[22:24:31] [ENEMY] [Enemy4] ROT_CHANGE: P4:velocity -> P1:visible, state=EVADING_GRENADE, target=173.4°, current=165.2°, player=(279,830), corner_timer=0.00
[22:24:31] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[22:24:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(257.8643, 828.04), source=PLAYER (AssaultRifle), range=1469, listeners=10
[22:24:31] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=4, self=0, below_threshold=2
[22:24:31] [INFO] [BloodyFeet:Enemy4] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[22:24:31] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/4 -> 1/4
[22:24:31] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:24:31] [INFO] [ImpactEffects] spawn_blood_effect called at (611.9105, 773.1831), dir=(1, 0), lethal=false
[22:24:31] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:24:31] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:24:31] [INFO] [ImpactEffects] Blood effect spawned at (611.9105, 773.1831) (scale=1)
[22:24:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(613.242, 774.8499), source=ENEMY (Enemy3), range=1469, listeners=10
[22:24:31] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[22:24:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(546.6665, 790.7501), shooter_id=400354708487, bullet_pos=(515.441, 802.4155)
[22:24:32] [INFO] [Bullet] Using shooter_position, distance=33.3333129882813
[22:24:32] [INFO] [Bullet] Distance to wall: 33.3333129882813 (2.26972657592984% of viewport)
[22:24:32] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[22:24:32] [INFO] [Bullet] Starting wall penetration at (515.441, 802.4155)
[22:24:32] [INFO] [Bullet] Raycast backward hit penetrating body at distance 21.8500003814697
[22:24:32] [INFO] [Bullet] Body exited signal received for penetrating body
[22:24:32] [INFO] [Bullet] Exiting penetration at (479.5317, 815.8306) after traveling 33.3333358764648 pixels through wall
[22:24:32] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[22:24:32] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(239,815), corner_timer=-0.00
[22:24:32] [ENEMY] [Enemy10] PATROL corner check: angle 1.0°
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (713.147, 800.1775) (added to group)
[22:24:32] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.0°, current=4.0°, player=(235,814), corner_timer=0.30
[22:24:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(619.8997, 783.184), source=ENEMY (Enemy3), range=1469, listeners=10
[22:24:32] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[22:24:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(227.0092, 819.351), source=PLAYER (AssaultRifle), range=1469, listeners=10
[22:24:32] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=5, self=0, below_threshold=1
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (708.407, 799.8926) (added to group)
[22:24:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(554.0654, 796.1248), shooter_id=400354708487, bullet_pos=(520.918, 799.641)
[22:24:32] [INFO] [Bullet] Using shooter_position, distance=33.333309173584
[22:24:32] [INFO] [Bullet] Distance to wall: 33.333309173584 (2.26972631618009% of viewport)
[22:24:32] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[22:24:32] [INFO] [Bullet] Starting wall penetration at (520.918, 799.641)
[22:24:32] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 3/3 -> 2/3
[22:24:32] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[22:24:32] [INFO] [ImpactEffects] spawn_blood_effect called at (576.8715, 776.9561), dir=(1, 0), lethal=false
[22:24:32] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:24:32] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:24:32] [INFO] [ImpactEffects] Blood effect spawned at (576.8715, 776.9561) (scale=1)
[22:24:32] [INFO] [Bullet] Raycast backward hit penetrating body at distance 17.2979564666748
[22:24:32] [INFO] [Bullet] Body exited signal received for penetrating body
[22:24:32] [INFO] [Bullet] Exiting penetration at (482.7986, 803.6846) after traveling 33.3333320617676 pixels through wall
[22:24:32] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (769.7031, 764.8537) (added to group)
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (741.5368, 775.5408) (added to group)
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (751.6786, 748.4324) (added to group)
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (738.2292, 780.8145) (added to group)
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (687.1155, 774.4172) (added to group)
[22:24:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(626.5573, 791.518), source=ENEMY (Enemy3), range=1469, listeners=10
[22:24:32] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (727.3119, 794.0663) (added to group)
[22:24:32] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[22:24:32] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (675.7052, 782.0923) (added to group)
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (700.2079, 788.1596) (added to group)
[22:24:32] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 2/3 -> 1/3
[22:24:32] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[22:24:32] [INFO] [ImpactEffects] spawn_blood_effect called at (534.2188, 776.0841), dir=(-0.999369, -0.035531), lethal=false
[22:24:32] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:24:32] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:24:32] [INFO] [ImpactEffects] Blood effect spawned at (534.2188, 776.0841) (scale=1)
[22:24:32] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P4:velocity, state=EVADING_GRENADE, target=-179.9°, current=2.0°, player=(203,815), corner_timer=0.00
[22:24:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(196.5808, 823.5584), source=PLAYER (AssaultRifle), range=1469, listeners=10
[22:24:32] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=5, self=0, below_threshold=1
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (721.5614, 761.4922) (added to group)
[22:24:32] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 1/3 -> 0/3
[22:24:32] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[22:24:32] [INFO] [ImpactEffects] spawn_blood_effect called at (517.1572, 775.934), dir=(1, 0), lethal=true
[22:24:32] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:24:32] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[22:24:32] [INFO] [ImpactEffects] Blood effect spawned at (517.1572, 775.934) (scale=1.5)
[22:24:32] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
[22:24:32] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:24:32] [ENEMY] [Enemy4] [AllyDeath] Notified 3 enemies
[22:24:32] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 9)
[22:24:32] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[22:24:32] [ENEMY] [Enemy4] Death animation started with hit direction: (1, 0)
[22:24:32] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=51.4°, current=144.6°, player=(196,817), corner_timer=0.00
[22:24:32] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[22:24:32] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (777.8777, 771.1383) (added to group)
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (677.5416, 803.6776) (added to group)
[22:24:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(169.6839, 840.9545), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:24:32] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=5, self=0, below_threshold=1
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (703.707, 763.0668) (added to group)
[22:24:32] [INFO] [SoundPropagation] Sound emitted: type=GRENADE_LANDING, pos=(845.1216, 680.0153), source=NEUTRAL (FlashbangGrenade), range=112, listeners=9
[22:24:32] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=9, self=0, below_threshold=0
[22:24:32] [INFO] [GrenadeBase] Grenade landed at (845.1216, 680.0153)
[22:24:32] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (755.5926, 796.8337) (added to group)
[22:24:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(144.7913, 865.8353), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:24:32] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=2
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (686.3737, 794.5189) (added to group)
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (673.7639, 777.9998) (added to group)
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (742.8502, 746.8582) (added to group)
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (689.0585, 786.482) (added to group)
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (493.4232, 804.2962) (added to group)
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (452.2559, 820.7282) (added to group)
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (591.7662, 768.062) (added to group)
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (810.405, 817.608) (added to group)
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (695.6671, 805.8481) (added to group)
[22:24:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(196.58076, 823.5584), shooter_id=403575934151, bullet_pos=(916.2811, 736.05927)
[22:24:32] [INFO] [Bullet] Using shooter_position, distance=724,9998
[22:24:32] [INFO] [Bullet] Distance to wall: 724,9998 (49,366573% of viewport)
[22:24:32] [INFO] [Bullet] Distance-based penetration chance: 89,072334%
[22:24:32] [INFO] [Bullet] Starting wall penetration at (916.2811, 736.05927)
[22:24:32] [INFO] [Bullet] Raycast backward hit penetrating body at distance 18,469227
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (576.4761, 782.8085) (added to group)
[22:24:32] [INFO] [Bullet] Body exited signal received for penetrating body
[22:24:32] [INFO] [Bullet] Exiting penetration at (954.3342, 731.43286) after traveling 33,333332 pixels through wall
[22:24:32] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (611.3187, 758.5294) (added to group)
[22:24:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(119.4113, 889.5428), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:24:32] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=3
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (672.4524, 839.5346) (added to group)
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (663.6895, 786.829) (added to group)
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (610.2222, 751.5554) (added to group)
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (650.7078, 799.3574) (added to group)
[22:24:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(144.79126, 865.83527), shooter_id=403575934151, bullet_pos=(499.0288, 811.81165)
[22:24:32] [INFO] [Bullet] Using shooter_position, distance=358,33337
[22:24:32] [INFO] [Bullet] Distance to wall: 358,33337 (24,399578% of viewport)
[22:24:32] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:24:32] [INFO] [Bullet] Starting wall penetration at (499.0288, 811.81165)
[22:24:32] [INFO] [Bullet] Raycast backward hit penetrating body at distance 13,073383
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (706.3265, 807.4778) (added to group)
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (633.1716, 783.2732) (added to group)
[22:24:32] [INFO] [Bullet] Body exited signal received for penetrating body
[22:24:32] [INFO] [Bullet] Exiting penetration at (536.92395, 806.03235) after traveling 33,333336 pixels through wall
[22:24:32] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (609.7983, 812.2515) (added to group)
[22:24:32] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-129.0°, player=(105,891), corner_timer=-0.01
[22:24:32] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (393.7839, 818.0519) (added to group)
[22:24:32] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-131.3°, player=(102,893), corner_timer=0.30
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (632.4496, 779.6876) (added to group)
[22:24:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(169.68393, 840.9545), shooter_id=403575934151, bullet_pos=(920.9827, 737.90466)
[22:24:32] [INFO] [Bullet] Using shooter_position, distance=758,3332
[22:24:32] [INFO] [Bullet] Distance to wall: 758,3332 (51,636303% of viewport)
[22:24:32] [INFO] [Bullet] Distance-based penetration chance: 86,42432%
[22:24:32] [INFO] [Bullet] Starting wall penetration at (920.9827, 737.90466)
[22:24:32] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23,175425
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (597.4701, 776.6099) (added to group)
[22:24:32] [INFO] [Bullet] Body exited signal received for penetrating body
[22:24:32] [INFO] [Bullet] Exiting penetration at (958.96045, 732.69556) after traveling 33,333336 pixels through wall
[22:24:32] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (633.2067, 877.8645) (added to group)
[22:24:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(119.41128, 889.54285), shooter_id=403575934151, bullet_pos=(503.9186, 814.99805)
[22:24:32] [INFO] [Bullet] Using shooter_position, distance=391,6667
[22:24:32] [INFO] [Bullet] Distance to wall: 391,6667 (26,669306% of viewport)
[22:24:32] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (677.5513, 864.4508) (added to group)
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (457.718, 819.3395) (added to group)
[22:24:32] [ENEMY] [Enemy4] Ragdoll activated
[22:24:32] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (607.1522, 811.4109) (added to group)
[22:24:32] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (667.2463, 891.1343) (added to group)
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (665.9057, 889.4662) (added to group)
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (668.6989, 829.5509) (added to group)
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (602.7624, 859.0914) (added to group)
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (638.0285, 907.6129) (added to group)
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (698.1705, 910.3878) (added to group)
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (639.8814, 837.3531) (added to group)
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (609.259, 902.2086) (added to group)
[22:24:32] [INFO] [BloodDecal] Blood puddle created at (600.5923, 894.5048) (added to group)
[22:24:33] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.0°, current=175.9°, player=(91,907), corner_timer=-0.01
[22:24:33] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[22:24:33] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=178.1°, player=(93,906), corner_timer=0.30
[22:24:33] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:33] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.0°, current=125.2°, player=(157,844), corner_timer=-0.01
[22:24:33] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[22:24:33] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=127.5°, player=(161,841), corner_timer=0.30
[22:24:33] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:33] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
[22:24:33] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.5°, current=89.6°, player=(244,799), corner_timer=-0.01
[22:24:33] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[22:24:33] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=91.9°, player=(249,799), corner_timer=0.30
[22:24:33] [INFO] [GrenadeBase] EXPLODED at (849.2582, 679.4401)!
[22:24:33] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(849.2582, 679.4401), source=NEUTRAL (FlashbangGrenade), range=2937, listeners=9
[22:24:33] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=7
[22:24:33] [ENEMY] [Enemy3] Status: BLINDED applied
[22:24:33] [ENEMY] [Enemy3] Status: STUNNED applied
[22:24:33] [ENEMY] [Enemy4] Status: BLINDED applied
[22:24:33] [ENEMY] [Enemy4] Status: STUNNED applied
[22:24:34] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:34] [ENEMY] [Enemy4] Death animation completed
[22:24:34] [ENEMY] [Enemy1] PURSUING corner check: angle -138.5°
[22:24:34] [ENEMY] [Enemy2] PURSUING corner check: angle -126.4°
[22:24:34] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.1°, current=89.5°, player=(329,747), corner_timer=-0.01
[22:24:34] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[22:24:34] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=91.8°, player=(332,744), corner_timer=0.30
[22:24:34] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:34] [ENEMY] [Enemy1] PURSUING corner check: angle 42.4°
[22:24:34] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=176.9°, current=89.4°, player=(426,728), corner_timer=-0.01
[22:24:34] [ENEMY] [Enemy7] PATROL corner check: angle 89.3°
[22:24:34] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.3°, current=91.7°, player=(430,728), corner_timer=0.30
[22:24:34] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:34] [ENEMY] [Enemy1] PURSUING corner check: angle -175.6°
[22:24:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(480.9223, 734.065), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:24:34] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[22:24:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(515.2307, 735.983), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:24:35] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
[22:24:35] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=176.8°, current=89.3°, player=(526,733), corner_timer=-0.01
[22:24:35] [ENEMY] [Enemy7] PATROL corner check: angle 89.3°
[22:24:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(480.92227, 734.065), shooter_id=403575934151, bullet_pos=(798.76025, 1016.20624)
[22:24:35] [INFO] [Bullet] Using shooter_position, distance=424,9996
[22:24:35] [INFO] [Bullet] Distance to wall: 424,9996 (28,939005% of viewport)
[22:24:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:24:35] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.3°, current=91.6°, player=(529,734), corner_timer=0.30
[22:24:35] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[22:24:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(541.5518, 747.056), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:24:35] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
[22:24:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(480.92227, 734.065), shooter_id=403575934151, bullet_pos=(913.0827, 924.3286)
[22:24:35] [INFO] [Bullet] Using shooter_position, distance=472,18945
[22:24:35] [INFO] [Bullet] Distance to wall: 472,18945 (32,152252% of viewport)
[22:24:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:24:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(515.23065, 735.98303), shooter_id=403575934151, bullet_pos=(784.98364, 1019.94806)
[22:24:35] [INFO] [Bullet] Using shooter_position, distance=391,66672
[22:24:35] [INFO] [Bullet] Distance to wall: 391,66672 (26,669308% of viewport)
[22:24:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:24:35] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 1/4 -> 0/4
[22:24:35] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:24:35] [INFO] [ImpactEffects] spawn_blood_effect called at (639.4786, 813.0785), dir=(1, 0), lethal=true
[22:24:35] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:24:35] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[22:24:35] [INFO] [ImpactEffects] Wall found for blood splatter at (680, 813.0785) (dist=40 px)
[22:24:35] [INFO] [BloodDecal] Blood puddle created at (679, 813.0785) (added to group)
[22:24:35] [INFO] [ImpactEffects] Blood effect spawned at (639.4786, 813.0785) (scale=1.5)
[22:24:35] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[22:24:35] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
[22:24:35] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[22:24:35] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 8)
[22:24:35] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[22:24:35] [ENEMY] [Enemy3] Death animation started with hit direction: (1, 0)
[22:24:35] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(557.8082, 767.3547), source=PLAYER (AssaultRifle), range=1469, listeners=8
[22:24:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=4
[22:24:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(515.23065, 735.98303), shooter_id=403575934151, bullet_pos=(915.27576, 903.11914)
[22:24:35] [INFO] [Bullet] Using shooter_position, distance=433,55573
[22:24:35] [INFO] [Bullet] Distance to wall: 433,55573 (29,521608% of viewport)
[22:24:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:24:35] [INFO] [Bullet] Starting wall penetration at (915.27576, 903.11914)
[22:24:35] [INFO] [Bullet] Raycast backward hit penetrating body at distance 5,497886
[22:24:35] [INFO] [Bullet] Body exited signal received for penetrating body
[22:24:35] [INFO] [Bullet] Exiting penetration at (940.0933, 880.866) after traveling 28,333336 pixels through wall
[22:24:35] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[22:24:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(557.8082, 767.35474), shooter_id=403575934151, bullet_pos=(679.4533, 868.7054)
[22:24:35] [INFO] [Bullet] Using shooter_position, distance=158,33345
[22:24:35] [INFO] [Bullet] Distance to wall: 158,33345 (10,781216% of viewport)
[22:24:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:24:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(563.9999, 796.8792), source=PLAYER (AssaultRifle), range=1469, listeners=8
[22:24:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=4
[22:24:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(557.8082, 767.35474), shooter_id=403575934151, bullet_pos=(562.5976, 998.9733)
[22:24:35] [INFO] [Bullet] Using shooter_position, distance=231,6681
[22:24:35] [INFO] [Bullet] Distance to wall: 231,6681 (15,774708% of viewport)
[22:24:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:24:35] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=176.7°, current=89.3°, player=(564,804), corner_timer=-0.01
[22:24:35] [ENEMY] [Enemy7] PATROL corner check: angle 89.3°
[22:24:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(563.99994, 796.8792), shooter_id=403575934151, bullet_pos=(697.1959, 882.48444)
[22:24:35] [INFO] [Bullet] Using shooter_position, distance=158,33327
[22:24:35] [INFO] [Bullet] Distance to wall: 158,33327 (10,781204% of viewport)
[22:24:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:24:35] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.3°, current=91.6°, player=(564,808), corner_timer=0.30
[22:24:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(557.8082, 767.35474), shooter_id=403575934151, bullet_pos=(512.69696, 940.0031)
[22:24:35] [INFO] [Bullet] Using shooter_position, distance=178,44464
[22:24:35] [INFO] [Bullet] Distance to wall: 178,44464 (12,150624% of viewport)
[22:24:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:24:35] [INFO] [Bullet] Starting wall penetration at (512.69696, 940.0031)
[22:24:35] [INFO] [Bullet] Raycast backward hit penetrating body at distance 9,427515
[22:24:35] [INFO] [BloodDecal] Blood puddle created at (712.3535, 805.5988) (added to group)
[22:24:35] [INFO] [Bullet] Body exited signal received for penetrating body
[22:24:35] [INFO] [Bullet] Exiting penetration at (493.91016, 917.8018) after traveling 24,083334 pixels through wall
[22:24:35] [INFO] [Bullet] Damage multiplier after penetration: 0,225
[22:24:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(564.0662, 832.0186), source=PLAYER (AssaultRifle), range=1469, listeners=8
[22:24:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=4
[22:24:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(563.99994, 796.8792), shooter_id=403575934151, bullet_pos=(536.7521, 1007.3933)
[22:24:35] [INFO] [Bullet] Using shooter_position, distance=212,27019
[22:24:35] [INFO] [Bullet] Distance to wall: 212,27019 (14,453867% of viewport)
[22:24:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:24:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(564.0662, 832.0186), shooter_id=403575934151, bullet_pos=(688.9547, 826.73926)
[22:24:35] [INFO] [Bullet] Using shooter_position, distance=125,00003
[22:24:35] [INFO] [Bullet] Distance to wall: 125,00003 (8,511482% of viewport)
[22:24:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:24:35] [INFO] [Bullet] Starting wall penetration at (688.9547, 826.73926)
[22:24:35] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[22:24:35] [INFO] [Bullet] Exiting penetration at (727.25385, 825.12024) after traveling 33,333336 pixels through wall
[22:24:35] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:24:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(563.99994, 796.8792), shooter_id=403575934151, bullet_pos=(516.18335, 986.832)
[22:24:35] [INFO] [Bullet] Using shooter_position, distance=195,87872
[22:24:35] [INFO] [Bullet] Distance to wall: 195,87872 (13,337744% of viewport)
[22:24:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:24:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(563.99994, 796.8792), shooter_id=403575934151, bullet_pos=(519.30237, 982.9241)
[22:24:35] [INFO] [Bullet] Using shooter_position, distance=191,33887
[22:24:35] [INFO] [Bullet] Distance to wall: 191,33887 (13,028616% of viewport)
[22:24:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:24:35] [INFO] [Bullet] Starting wall penetration at (519.30237, 982.9241)
[22:24:35] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:35] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[22:24:35] [INFO] [Bullet] Exiting penetration at (535.1913, 963.01666) after traveling 20,470833 pixels through wall
[22:24:35] [INFO] [Bullet] Damage multiplier after penetration: 0,1125
[22:24:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(564.0662, 867.2188), source=PLAYER (AssaultRifle), range=1469, listeners=8
[22:24:35] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=5
[22:24:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(564.0662, 867.2188), shooter_id=403575934151, bullet_pos=(679.6216, 819.5539)
[22:24:35] [INFO] [Bullet] Using shooter_position, distance=124,99994
[22:24:35] [INFO] [Bullet] Distance to wall: 124,99994 (8,5114765% of viewport)
[22:24:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:24:35] [ENEMY] [Enemy3] Ragdoll activated
[22:24:35] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:24:35] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=176.7°, current=89.3°, player=(564,904), corner_timer=-0.01
[22:24:35] [ENEMY] [Enemy7] PATROL corner check: angle 89.3°
[22:24:35] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.3°, current=91.6°, player=(564,907), corner_timer=0.30
[22:24:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(564.0662, 867.2188), shooter_id=403575934151, bullet_pos=(920.8034, 977.56494)
[22:24:35] [INFO] [Bullet] Using shooter_position, distance=373,41357
[22:24:35] [INFO] [Bullet] Distance to wall: 373,41357 (25,426418% of viewport)
[22:24:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:24:35] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(564.0662, 867.2188), shooter_id=403575934151, bullet_pos=(896.7027, 993.84357)
[22:24:35] [INFO] [Bullet] Using shooter_position, distance=355,92255
[22:24:35] [INFO] [Bullet] Distance to wall: 355,92255 (24,235422% of viewport)
[22:24:35] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:24:36] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:36] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=176.6°, current=89.3°, player=(564,916), corner_timer=-0.01
[22:24:36] [ENEMY] [Enemy7] PATROL corner check: angle 89.2°
[22:24:36] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.2°, current=91.5°, player=(564,914), corner_timer=0.30
[22:24:36] [ENEMY] [Enemy2] PURSUING corner check: angle -108.4°
[22:24:36] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:36] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:24:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:36] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:24:36] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:24:36] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:24:36] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:24:36] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:24:36] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:24:36] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:24:36] [ENEMY] [Enemy1] Death animation component initialized
[22:24:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:36] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:24:36] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:24:36] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:24:36] [ENEMY] [Enemy2] Death animation component initialized
[22:24:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:36] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:24:36] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:24:36] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:24:36] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:24:36] [ENEMY] [Enemy3] Death animation component initialized
[22:24:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:36] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:24:36] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:24:36] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:24:36] [ENEMY] [Enemy4] Death animation component initialized
[22:24:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:36] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:24:36] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:24:36] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:24:36] [ENEMY] [Enemy5] Death animation component initialized
[22:24:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:36] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:24:36] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:24:36] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:24:36] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:24:36] [ENEMY] [Enemy6] Death animation component initialized
[22:24:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:36] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:24:36] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:24:36] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:24:36] [ENEMY] [Enemy7] Death animation component initialized
[22:24:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:36] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:24:36] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:24:36] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:24:36] [ENEMY] [Enemy8] Death animation component initialized
[22:24:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:36] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:24:36] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:24:36] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:24:36] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:24:36] [ENEMY] [Enemy9] Death animation component initialized
[22:24:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:36] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:24:36] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:24:36] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:24:36] [ENEMY] [Enemy10] Death animation component initialized
[22:24:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:36] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:24:36] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:24:36] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:24:36] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[22:24:36] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:24:36] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:24:36] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:24:36] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:24:36] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:24:36] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:24:36] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:24:36] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[22:24:36] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:24:36] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:24:36] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:24:36] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:24:36] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:24:36] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:24:36] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:24:36] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:24:36] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:24:36] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:24:36] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:24:36] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:24:36] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:24:36] [INFO] [ScoreManager] Level started with 10 enemies
[22:24:36] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:24:36] [INFO] [CinemaEffects] Found player node: Player
[22:24:36] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:24:36] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 9)
[22:24:36] [ENEMY] [Enemy1] Registered as sound listener
[22:24:36] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[22:24:36] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:24:36] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 10)
[22:24:36] [ENEMY] [Enemy2] Registered as sound listener
[22:24:36] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[22:24:36] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:24:36] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 11)
[22:24:36] [ENEMY] [Enemy3] Registered as sound listener
[22:24:36] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[22:24:36] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:24:36] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 12)
[22:24:36] [ENEMY] [Enemy4] Registered as sound listener
[22:24:36] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[22:24:36] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:24:36] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 13)
[22:24:36] [ENEMY] [Enemy5] Registered as sound listener
[22:24:36] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[22:24:36] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:24:36] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 14)
[22:24:36] [ENEMY] [Enemy6] Registered as sound listener
[22:24:36] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[22:24:36] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:24:36] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 15)
[22:24:36] [ENEMY] [Enemy7] Registered as sound listener
[22:24:36] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[22:24:36] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:24:36] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 16)
[22:24:36] [ENEMY] [Enemy8] Registered as sound listener
[22:24:36] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[22:24:36] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:24:36] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 17)
[22:24:36] [ENEMY] [Enemy9] Registered as sound listener
[22:24:36] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[22:24:36] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:24:36] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 18)
[22:24:36] [ENEMY] [Enemy10] Registered as sound listener
[22:24:36] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[22:24:36] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:24:36] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:24:36] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:24:36] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:24:36] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:24:36] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:24:36] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:24:36] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=78.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:24:36] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:24:36] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:24:36] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:24:36] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:24:36] [INFO] [LastChance] Found player: Player
[22:24:36] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:24:36] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:24:36] [INFO] [LastChance] Connected to player Died signal (C#)
[22:24:36] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:24:36] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:24:36] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:24:36] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:24:38] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=164.4°, current=123.7°, player=(449,820), corner_timer=0.00
[22:24:38] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[22:24:38] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=166.7°, current=-65.0°, player=(446,809), corner_timer=0.00
[22:24:38] [ENEMY] [Enemy4] Memory: high confidence (0.89) - transitioning to PURSUING
[22:24:38] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[22:24:38] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:24:38] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[22:24:38] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=-162.9°, current=-101.3°, player=(437,788), corner_timer=0.00
[22:24:38] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(437,788), corner_timer=0.30
[22:24:38] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(437,788), corner_timer=0.30
[22:24:38] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[22:24:38] [INFO] [PauseMenu] Armory button pressed
[22:24:38] [INFO] [PauseMenu] Creating new armory menu instance
[22:24:38] [INFO] [PauseMenu] armory_menu_scene resource path: res://scenes/ui/ArmoryMenu.tscn
[22:24:38] [INFO] [PauseMenu] Instance created, class: CanvasLayer, name: ArmoryMenu
[22:24:38] [INFO] [PauseMenu] Script attached: res://scripts/ui/armory_menu.gd
[22:24:38] [INFO] [PauseMenu] back_pressed signal exists on instance
[22:24:38] [INFO] [PauseMenu] back_pressed signal connected
[22:24:39] [INFO] [PauseMenu] Armory menu instance added as child, is_inside_tree: true
[22:24:39] [INFO] [PauseMenu] _populate_weapon_grid method exists
[22:24:41] [INFO] [GrenadeManager] Grenade type changed from Flashbang to Frag Grenade
[22:24:41] [INFO] [GrenadeManager] Restarting level due to grenade type change
[22:24:41] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:24:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:41] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:24:41] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:24:41] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:24:41] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:24:41] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:24:41] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:24:41] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:24:41] [ENEMY] [Enemy1] Death animation component initialized
[22:24:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:41] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:24:41] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:24:41] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:24:41] [ENEMY] [Enemy2] Death animation component initialized
[22:24:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:41] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:24:41] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:24:41] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:24:41] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:24:41] [ENEMY] [Enemy3] Death animation component initialized
[22:24:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:41] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:24:41] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:24:41] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:24:41] [ENEMY] [Enemy4] Death animation component initialized
[22:24:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:41] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:24:41] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:24:41] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:24:41] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:24:41] [ENEMY] [Enemy5] Death animation component initialized
[22:24:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:41] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:24:41] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:24:41] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:24:41] [ENEMY] [Enemy6] Death animation component initialized
[22:24:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:41] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:24:41] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:24:41] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:24:41] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:24:41] [ENEMY] [Enemy7] Death animation component initialized
[22:24:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:41] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:24:41] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:24:41] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:24:41] [ENEMY] [Enemy8] Death animation component initialized
[22:24:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:41] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:24:41] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:24:41] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:24:41] [ENEMY] [Enemy9] Death animation component initialized
[22:24:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:41] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:24:41] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:24:41] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:24:41] [ENEMY] [Enemy10] Death animation component initialized
[22:24:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:41] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:24:41] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:24:41] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:24:41] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:24:41] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:24:41] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:24:41] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:24:41] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:24:41] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:24:41] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:24:41] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:24:41] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[22:24:41] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:24:41] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:24:41] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:24:41] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:24:41] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:24:41] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:24:41] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:24:41] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:24:41] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:24:41] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:24:41] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:24:41] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:24:41] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:24:41] [INFO] [ScoreManager] Level started with 10 enemies
[22:24:41] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:24:41] [INFO] [CinemaEffects] Found player node: Player
[22:24:41] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:24:41] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 19)
[22:24:41] [ENEMY] [Enemy1] Registered as sound listener
[22:24:41] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[22:24:41] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:24:41] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 20)
[22:24:41] [ENEMY] [Enemy2] Registered as sound listener
[22:24:41] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[22:24:41] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:24:41] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 21)
[22:24:41] [ENEMY] [Enemy3] Registered as sound listener
[22:24:41] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[22:24:41] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:24:41] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 22)
[22:24:41] [ENEMY] [Enemy4] Registered as sound listener
[22:24:41] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[22:24:41] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:24:41] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 23)
[22:24:41] [ENEMY] [Enemy5] Registered as sound listener
[22:24:41] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[22:24:41] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:24:41] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 24)
[22:24:41] [ENEMY] [Enemy6] Registered as sound listener
[22:24:41] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[22:24:41] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:24:41] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 25)
[22:24:41] [ENEMY] [Enemy7] Registered as sound listener
[22:24:41] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[22:24:41] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:24:41] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 26)
[22:24:41] [ENEMY] [Enemy8] Registered as sound listener
[22:24:41] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[22:24:41] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:24:41] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 27)
[22:24:41] [ENEMY] [Enemy9] Registered as sound listener
[22:24:41] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[22:24:41] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:24:41] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 28)
[22:24:41] [ENEMY] [Enemy10] Registered as sound listener
[22:24:41] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[22:24:41] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:24:41] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:41] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:41] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=236.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:41] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:41] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:41] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:41] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=157.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:41] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:41] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:24:41] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:24:41] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:24:41] [INFO] [LastChance] Found player: Player
[22:24:41] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:24:41] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:24:41] [INFO] [LastChance] Connected to player Died signal (C#)
[22:24:41] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:24:41] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:24:41] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:24:41] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:24:41] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:24:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:41] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:24:41] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:24:41] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:24:41] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:24:41] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:24:41] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:24:41] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:24:41] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:24:41] [ENEMY] [Enemy1] Death animation component initialized
[22:24:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:41] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:24:41] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:24:41] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:24:41] [ENEMY] [Enemy2] Death animation component initialized
[22:24:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:41] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:24:41] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:24:41] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:24:41] [ENEMY] [Enemy3] Death animation component initialized
[22:24:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:41] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:24:41] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:24:41] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:24:41] [ENEMY] [Enemy4] Death animation component initialized
[22:24:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:41] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:24:41] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:24:41] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:24:41] [ENEMY] [Enemy5] Death animation component initialized
[22:24:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:41] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:24:41] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:24:41] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:24:41] [ENEMY] [Enemy6] Death animation component initialized
[22:24:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:41] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:24:41] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:24:41] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:24:41] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:24:41] [ENEMY] [Enemy7] Death animation component initialized
[22:24:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:41] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:24:41] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:24:41] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:24:41] [ENEMY] [Enemy8] Death animation component initialized
[22:24:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:41] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:24:41] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:24:41] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:24:41] [ENEMY] [Enemy9] Death animation component initialized
[22:24:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:41] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:24:41] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:24:41] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:24:41] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:24:41] [ENEMY] [Enemy10] Death animation component initialized
[22:24:41] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:41] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:24:41] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:24:41] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:24:41] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:24:41] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:24:41] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:24:41] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:24:41] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:24:41] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:24:41] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:24:41] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:24:41] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[22:24:41] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:24:41] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:24:41] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:24:41] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:24:41] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:24:41] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:24:41] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:24:41] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:24:41] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:24:41] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:24:41] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:24:41] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:24:41] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:24:41] [INFO] [ScoreManager] Level started with 10 enemies
[22:24:41] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:24:41] [INFO] [CinemaEffects] Found player node: Player
[22:24:41] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:24:41] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 29)
[22:24:41] [ENEMY] [Enemy1] Registered as sound listener
[22:24:41] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[22:24:41] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:24:41] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 30)
[22:24:41] [ENEMY] [Enemy2] Registered as sound listener
[22:24:41] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[22:24:41] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:24:41] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 31)
[22:24:41] [ENEMY] [Enemy3] Registered as sound listener
[22:24:41] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[22:24:41] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:24:41] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 32)
[22:24:41] [ENEMY] [Enemy4] Registered as sound listener
[22:24:41] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[22:24:41] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:24:41] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 33)
[22:24:41] [ENEMY] [Enemy5] Registered as sound listener
[22:24:41] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[22:24:41] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:24:41] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 34)
[22:24:41] [ENEMY] [Enemy6] Registered as sound listener
[22:24:41] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[22:24:41] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:24:41] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 35)
[22:24:41] [ENEMY] [Enemy7] Registered as sound listener
[22:24:41] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[22:24:41] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:24:41] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 36)
[22:24:41] [ENEMY] [Enemy8] Registered as sound listener
[22:24:41] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[22:24:41] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:24:41] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 37)
[22:24:41] [ENEMY] [Enemy9] Registered as sound listener
[22:24:41] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[22:24:41] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:24:41] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 38)
[22:24:41] [ENEMY] [Enemy10] Registered as sound listener
[22:24:41] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[22:24:41] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:24:41] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:41] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:41] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:41] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:41] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:41] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:41] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=157.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:41] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:41] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:24:41] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:24:41] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:24:41] [INFO] [LastChance] Found player: Player
[22:24:41] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:24:41] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:24:41] [INFO] [LastChance] Connected to player Died signal (C#)
[22:24:41] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:24:41] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:24:41] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:24:41] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:24:42] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:24:42] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:24:42] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:24:42] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:24:42] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (670.92957, 907.48987)
[22:24:42] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[22:24:42] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:24:42] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:24:42] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:24:42] [INFO] [Player.Grenade] Timer started, grenade created at (450, 924.1666)
[22:24:42] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:24:42] [INFO] [Player.Grenade] Step 1 complete! Drag: (273.40137, -27.273987)
[22:24:42] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:24:42] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[22:24:42] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:24:42] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[22:24:42] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,825), corner_timer=0.30
[22:24:42] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,825), corner_timer=0.30
[22:24:43] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(466,728), corner_timer=-0.02
[22:24:43] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:24:43] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(466,728), corner_timer=-0.02
[22:24:43] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[22:24:43] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(468,728), corner_timer=0.30
[22:24:43] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(468,728), corner_timer=0.30
[22:24:43] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(477,728), corner_timer=-0.02
[22:24:43] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[22:24:43] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(477,728), corner_timer=0.30
[22:24:43] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(477,728), corner_timer=-0.02
[22:24:43] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[22:24:43] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(477,728), corner_timer=0.30
[22:24:44] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(477,728), corner_timer=-0.02
[22:24:44] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[22:24:44] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(477,728), corner_timer=0.30
[22:24:44] [INFO] [Player.Grenade.Simple] Throwing! Target: (784.9683, 722.1128), Distance: 287,2, Speed: 401,0, Friction: 280,0
[22:24:44] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,019358447
[22:24:44] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.999813, -0.019357), Speed: 401.0 (clamped from 401.0, max: 1186.5)
[22:24:44] [INFO] [FragGrenade] Grenade thrown (simple mode) - impact detection enabled
[22:24:44] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:24:44] [INFO] [Player.Grenade.Simple] Grenade thrown!
[22:24:44] [INFO] [Player.Grenade] State reset to IDLE
[22:24:44] [INFO] [Player.Grenade] State reset to IDLE
[22:24:44] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:24:44] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(477,728), corner_timer=-0.02
[22:24:44] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[22:24:44] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(477,728), corner_timer=0.30
[22:24:44] [INFO] [Player.Grenade] Player rotation restored to 0
[22:24:44] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:24:44] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:45] [INFO] [GrenadeBase] Collision detected with Enemy3 (type: CharacterBody2D)
[22:24:45] [INFO] [FragGrenade] Impact detected! Body: Enemy3 (type: CharacterBody2D), triggering explosion
[22:24:45] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:24:45] [INFO] [GrenadeBase] EXPLODED at (686.1483, 720.7825)!
[22:24:45] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(686.1483, 720.7825), source=NEUTRAL (FragGrenade), range=2937, listeners=38
[22:24:45] [INFO] [SoundPropagation] Cleaned up 28 invalid listeners
[22:24:45] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[22:24:45] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 4/4 -> 3/4
[22:24:45] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:24:45] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.428385, 0.903596), lethal=false
[22:24:45] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:24:45] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:24:45] [INFO] [ImpactEffects] Wall found for blood splatter at (728.4453, 810) (dist=66 px)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (728.4453, 809) (added to group)
[22:24:45] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[22:24:45] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 3/4 -> 2/4
[22:24:45] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:24:45] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.428385, 0.903596), lethal=false
[22:24:45] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:24:45] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:24:45] [INFO] [ImpactEffects] Wall found for blood splatter at (728.4453, 810) (dist=66 px)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (728.4453, 809) (added to group)
[22:24:45] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[22:24:45] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/4 -> 1/4
[22:24:45] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:24:45] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.428385, 0.903596), lethal=false
[22:24:45] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:24:45] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:24:45] [INFO] [ImpactEffects] Wall found for blood splatter at (728.4453, 810) (dist=66 px)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (728.4453, 809) (added to group)
[22:24:45] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[22:24:45] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 1/4 -> 0/4
[22:24:45] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:24:45] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.428385, 0.903596), lethal=true
[22:24:45] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:24:45] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[22:24:45] [INFO] [ImpactEffects] Wall found for blood splatter at (728.4453, 810) (dist=66 px)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (728.4453, 809) (added to group)
[22:24:45] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1.5)
[22:24:45] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[22:24:45] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:24:45] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[22:24:45] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[22:24:45] [INFO] [DeathAnim] Started - Angle: 64.6 deg, Index: 16
[22:24:45] [ENEMY] [Enemy3] Death animation started with hit direction: (0.428385, 0.903596)
[22:24:45] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 32.3
[22:24:45] [INFO] [FragGrenade] Player found in blast radius at distance 208.8
[22:24:45] [INFO] [Player] Spawning blood effect at (477.42917, 728.067), dir=(-0.99939156, 0.03487966), lethal=False (C#)
[22:24:45] [INFO] [ImpactEffects] spawn_blood_effect called at (477.4292, 728.067), dir=(-0.999392, 0.03488), lethal=false
[22:24:45] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:24:45] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:24:45] [INFO] [ImpactEffects] Blood effect spawned at (477.4292, 728.067) (scale=1)
[22:24:45] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[22:24:45] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[22:24:45] [INFO] [Player] Spawning blood effect at (477.42917, 728.067), dir=(-0.99939156, 0.03487966), lethal=False (C#)
[22:24:45] [INFO] [ImpactEffects] spawn_blood_effect called at (477.4292, 728.067), dir=(-0.999392, 0.03488), lethal=false
[22:24:45] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:24:45] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:24:45] [INFO] [ImpactEffects] Blood effect spawned at (477.4292, 728.067) (scale=1)
[22:24:45] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[22:24:45] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[22:24:45] [INFO] [Player] Spawning blood effect at (477.42917, 728.067), dir=(-0.99939156, 0.03487966), lethal=False (C#)
[22:24:45] [INFO] [ImpactEffects] spawn_blood_effect called at (477.4292, 728.067), dir=(-0.999392, 0.03488), lethal=false
[22:24:45] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:24:45] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:24:45] [INFO] [ImpactEffects] Blood effect spawned at (477.4292, 728.067) (scale=1)
[22:24:45] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[22:24:45] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[22:24:45] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[22:24:45] [INFO] [Player] Spawning blood effect at (477.42917, 728.067), dir=(-0.99939156, 0.03487966), lethal=True (C#)
[22:24:45] [INFO] [ImpactEffects] spawn_blood_effect called at (477.4292, 728.067), dir=(-0.999392, 0.03488), lethal=true
[22:24:45] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:24:45] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[22:24:45] [INFO] [ImpactEffects] Blood effect spawned at (477.4292, 728.067) (scale=1.5)
[22:24:45] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[22:24:45] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[22:24:45] [INFO] [CinemaEffects] Player died - triggering death effects
[22:24:45] [INFO] [CinemaEffects] Death effects triggered - starting cigarette burn, expanding spots, and end of reel (top-right)
[22:24:45] [INFO] [PenultimateHit] Player died - ending penultimate effect
[22:24:45] [INFO] [LastChance] Player died
[22:24:45] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 208.8
[22:24:45] [INFO] [FragGrenade] Spawned shrapnel #1 at angle -9.6 degrees
[22:24:45] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 84.1 degrees
[22:24:45] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 168.0 degrees
[22:24:45] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 254.2 degrees
[22:24:45] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(477,728), corner_timer=-0.02
[22:24:45] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[22:24:45] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(477,728), corner_timer=0.30
[22:24:45] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (728.0067, 798.2598) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (720.3174, 803.6827) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (403.5495, 744.1336) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (433.6162, 753.0741) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (421.2831, 748.259) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (422.3862, 765.1807) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (389.1197, 741.4645) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (429.5966, 755.1782) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (412.8009, 720.1091) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (374.8073, 790.9944) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (392.7285, 733.6492) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (399.9832, 781.2016) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (375.9162, 740.5671) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (417.0888, 760.1696) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (383.131, 740.3864) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (362.8171, 802.5731) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (387.7213, 725.269) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (350.7882, 751.1032) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (408.6596, 759.7936) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (409.9365, 784.5607) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (373.8677, 747.021) (added to group)
[22:24:45] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(477,728), corner_timer=-0.02
[22:24:45] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (391.1623, 732.4482) (added to group)
[22:24:45] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(477,728), corner_timer=0.30
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (326.3571, 792.4115) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (354.7006, 780.9388) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (405.0862, 756.6687) (added to group)
[22:24:45] [ENEMY] [Enemy3] Ragdoll activated
[22:24:45] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (405.1189, 759.0298) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (351.3758, 797.4841) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (397.4586, 769.9904) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (364.0674, 748.6211) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (333.6208, 852.6278) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (354.537, 850.2975) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (334.1664, 757.0195) (added to group)
[22:24:45] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:24:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:45] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:24:45] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:24:45] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:24:45] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:24:45] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:24:45] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:24:45] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:24:45] [INFO] [CinemaEffects] Death effects reset
[22:24:45] [ENEMY] [Enemy1] Death animation component initialized
[22:24:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:45] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:24:45] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:24:45] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:24:45] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:24:45] [ENEMY] [Enemy2] Death animation component initialized
[22:24:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:45] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:24:45] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:24:45] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:24:45] [ENEMY] [Enemy3] Death animation component initialized
[22:24:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:45] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:24:45] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:24:45] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:24:45] [ENEMY] [Enemy4] Death animation component initialized
[22:24:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:45] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:24:45] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:24:45] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:24:45] [ENEMY] [Enemy5] Death animation component initialized
[22:24:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:45] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:24:45] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:24:45] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:24:45] [ENEMY] [Enemy6] Death animation component initialized
[22:24:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:45] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:24:45] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:24:45] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:24:45] [ENEMY] [Enemy7] Death animation component initialized
[22:24:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:45] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:24:45] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:24:45] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:24:45] [ENEMY] [Enemy8] Death animation component initialized
[22:24:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:45] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:24:45] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:24:45] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:24:45] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:24:45] [ENEMY] [Enemy9] Death animation component initialized
[22:24:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:45] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:24:45] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:24:45] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:24:45] [ENEMY] [Enemy10] Death animation component initialized
[22:24:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:45] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:24:45] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:24:45] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:24:45] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:24:45] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:24:45] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:24:45] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:24:45] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:24:45] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:24:45] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:24:45] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:24:45] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[22:24:45] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:24:45] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:24:45] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:24:45] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:24:45] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:24:45] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:24:45] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:24:45] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:24:45] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:24:45] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:24:45] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:24:45] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:24:45] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:24:45] [INFO] [ScoreManager] Level started with 10 enemies
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (353.1551, 834.2543) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (312.5154, 799.4282) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (323.67, 716.7745) (added to group)
[22:24:45] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:24:45] [INFO] [CinemaEffects] Found player node: Player
[22:24:45] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:24:45] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[22:24:45] [ENEMY] [Enemy1] Registered as sound listener
[22:24:45] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[22:24:45] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:24:45] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[22:24:45] [ENEMY] [Enemy2] Registered as sound listener
[22:24:45] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[22:24:45] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:24:45] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[22:24:45] [ENEMY] [Enemy3] Registered as sound listener
[22:24:45] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[22:24:45] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:24:45] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[22:24:45] [ENEMY] [Enemy4] Registered as sound listener
[22:24:45] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[22:24:45] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:24:45] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[22:24:45] [ENEMY] [Enemy5] Registered as sound listener
[22:24:45] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[22:24:45] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:24:45] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[22:24:45] [ENEMY] [Enemy6] Registered as sound listener
[22:24:45] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[22:24:45] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:24:45] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[22:24:45] [ENEMY] [Enemy7] Registered as sound listener
[22:24:45] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[22:24:45] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:24:45] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[22:24:45] [ENEMY] [Enemy8] Registered as sound listener
[22:24:45] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[22:24:45] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:24:45] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[22:24:45] [ENEMY] [Enemy9] Registered as sound listener
[22:24:45] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[22:24:45] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:24:45] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[22:24:45] [ENEMY] [Enemy10] Registered as sound listener
[22:24:45] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[22:24:45] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:24:45] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:45] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:45] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:45] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:45] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:45] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:45] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:45] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:45] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:24:45] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:24:45] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:24:45] [INFO] [LastChance] Found player: Player
[22:24:45] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:24:45] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:24:45] [INFO] [LastChance] Connected to player Died signal (C#)
[22:24:45] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (316.6038, 813.9191) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (325.3729, 865.2764) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (340.2503, 760.8444) (added to group)
[22:24:45] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:24:45] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:24:45] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (375.4288, 771.9786) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (301.3661, 744.2097) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (297.5078, 725.071) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (318.049, 879.7878) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (333.4742, 773.899) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (267.9154, 770.7027) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (370.2546, 816.2628) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (344.8035, 868.2377) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (294.2377, 796.0688) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (360.5209, 872.4411) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (318.3077, 859.2338) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (309.9033, 863.22) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (309.8516, 922.7361) (added to group)
[22:24:45] [INFO] [BloodDecal] Blood puddle created at (308.97, 867.2535) (added to group)
[22:24:46] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:24:46] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:24:46] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:24:46] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:24:46] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (662.0272, 1173.119)
[22:24:46] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[22:24:46] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:24:46] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:24:46] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:24:46] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1138.6666)
[22:24:46] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:24:46] [INFO] [Player.Grenade] Step 1 complete! Drag: (321.57635, 18.536987)
[22:24:46] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:24:46] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[22:24:47] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:24:47] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[22:24:47] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(458,883), corner_timer=0.30
[22:24:47] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(458,883), corner_timer=0.30
[22:24:47] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(480,788), corner_timer=-0.02
[22:24:47] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:24:47] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(480,788), corner_timer=-0.02
[22:24:47] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[22:24:47] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(480,782), corner_timer=0.30
[22:24:47] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(480,782), corner_timer=0.30
[22:24:47] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(480,728), corner_timer=-0.02
[22:24:47] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[22:24:47] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(480,728), corner_timer=0.30
[22:24:48] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(480,728), corner_timer=-0.02
[22:24:48] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[22:24:48] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(480,728), corner_timer=0.30
[22:24:48] [INFO] [Player.Grenade.Simple] Throwing! Target: (772.94324, 682.6801), Distance: 273,3, Speed: 391,2, Friction: 280,0
[22:24:48] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,15399075
[22:24:48] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.988167, -0.153383), Speed: 391.2 (clamped from 391.2, max: 1186.5)
[22:24:48] [INFO] [FragGrenade] Grenade thrown (simple mode) - impact detection enabled
[22:24:48] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:24:48] [INFO] [Player.Grenade.Simple] Grenade thrown!
[22:24:48] [INFO] [Player.Grenade] State reset to IDLE
[22:24:48] [INFO] [Player.Grenade] State reset to IDLE
[22:24:48] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:24:48] [INFO] [Player.Grenade] Player rotation restored to 0
[22:24:48] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(480,728), corner_timer=-0.02
[22:24:48] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[22:24:48] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(480,728), corner_timer=0.30
[22:24:48] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:24:48] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(480,728), corner_timer=-0.02
[22:24:48] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[22:24:48] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(480,728), corner_timer=0.30
[22:24:48] [ENEMY] [Enemy4] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[22:24:48] [ENEMY] [Enemy4] EVADING_GRENADE started: escaping to (805.8614, 1029.667)
[22:24:48] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-98.0°, current=-117.6°, player=(480,728), corner_timer=0.00
[22:24:49] [ENEMY] [Enemy4] ROT_CHANGE: P4:velocity -> P1:visible, state=EVADING_GRENADE, target=-164.1°, current=-156.4°, player=(480,728), corner_timer=0.00
[22:24:49] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:24:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(788.1396, 815.4951), source=ENEMY (Enemy4), range=1469, listeners=19
[22:24:49] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[22:24:49] [ENEMY] [Enemy2] Heard gunshot at (788.1396, 815.4951), source_type=1, intensity=0.01, distance=470
[22:24:49] [ENEMY] [Enemy3] Heard gunshot at (788.1396, 815.4951), source_type=1, intensity=0.21, distance=110
[22:24:49] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:24:49] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=65.6°, current=-67.5°, player=(480,728), corner_timer=0.00
[22:24:49] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-174.3°, current=11.3°, player=(480,728), corner_timer=0.00
[22:24:49] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[22:24:49] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (513.5474, 898.7578)
[22:24:49] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:49] [INFO] [LastChance] Threat detected: Bullet
[22:24:49] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:24:49] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:24:49] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=140.7°, current=17.7°, player=(480,728), corner_timer=0.00
[22:24:49] [INFO] [Player] Spawning blood effect at (480.79596, 728.0271), dir=(1, 0), lethal=False (C#)
[22:24:49] [INFO] [ImpactEffects] spawn_blood_effect called at (480.796, 728.0271), dir=(1, 0), lethal=false
[22:24:49] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:24:49] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:24:49] [INFO] [ImpactEffects] Blood effect spawned at (480.796, 728.0271) (scale=1)
[22:24:49] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[22:24:49] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[22:24:49] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[22:24:49] [ENEMY] [Enemy1] Memory: medium confidence (0.62) - transitioning to PURSUING
[22:24:49] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[22:24:49] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=64.4°, current=-157.5°, player=(480,728), corner_timer=0.00
[22:24:49] [ENEMY] [Enemy1] PURSUING corner check: angle -50.9°
[22:24:49] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:24:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(699.9426, 782.9041), source=ENEMY (Enemy4), range=1469, listeners=10
[22:24:49] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:24:49] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(480,728), corner_timer=-0.02
[22:24:49] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[22:24:49] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(480,728), corner_timer=0.30
[22:24:49] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:24:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(630.681, 779.7569), source=ENEMY (Enemy4), range=1469, listeners=10
[22:24:49] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[22:24:49] [INFO] [LastChance] Threat detected: Bullet
[22:24:49] [INFO] [LastChance] Triggering last chance effect!
[22:24:49] [INFO] [LastChance] Starting last chance effect:
[22:24:49] [INFO] [LastChance]   - Time will be frozen (except player)
[22:24:49] [INFO] [LastChance]   - Duration: 6.0 real seconds
[22:24:49] [INFO] [LastChance]   - Sepia intensity: 0.70
[22:24:49] [INFO] [LastChance]   - Brightness: 0.60
[22:24:49] [INFO] [LastChance] Pushed bullet Bullet from distance 91.3 to 200.0
[22:24:49] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[22:24:49] [INFO] [LastChance] Set player Player and all 24 children to PROCESS_MODE_ALWAYS
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[22:24:49] [INFO] [LastChance] Skipping player node: Player
[22:24:49] [INFO] [LastChance] Froze existing grenade: FragGrenade
[22:24:49] [INFO] [LastChance] Froze existing bullet casing: Casing
[22:24:49] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2172
[22:24:49] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2173
[22:24:49] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[22:24:49] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[22:24:49] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[22:24:49] [INFO] [BloodDecal] Blood puddle created at (548.0403, 720.0883) (added to group)
[22:24:49] [INFO] [BloodDecal] Blood puddle created at (539.5884, 756.8432) (added to group)
[22:24:49] [INFO] [BloodDecal] Blood puddle created at (562.6462, 718.0569) (added to group)
[22:24:49] [INFO] [BloodDecal] Blood puddle created at (530.8614, 731.2264) (added to group)
[22:24:49] [INFO] [BloodDecal] Blood puddle created at (543.1392, 738.1942) (added to group)
[22:24:49] [INFO] [BloodDecal] Blood puddle created at (581.2649, 746.0055) (added to group)
[22:24:49] [INFO] [BloodDecal] Blood puddle created at (605.4386, 760.8988) (added to group)
[22:24:49] [INFO] [BloodDecal] Blood puddle created at (620.6277, 746.3512) (added to group)
[22:24:49] [INFO] [BloodDecal] Blood puddle created at (660.0289, 885.8406) (added to group)
[22:24:49] [INFO] [BloodDecal] Blood puddle created at (618.0255, 772.392) (added to group)
[22:24:50] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:24:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:50] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:24:50] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:24:50] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:24:50] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:24:50] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:24:50] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:24:50] [INFO] [LastChance] Ending last chance effect
[22:24:50] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=false
[22:24:50] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=false
[22:24:50] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=false
[22:24:50] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=false
[22:24:50] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[22:24:50] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[22:24:50] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[22:24:50] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[22:24:50] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[22:24:50] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[22:24:50] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[22:24:50] [INFO] [LastChance] All process modes restored
[22:24:50] [INFO] [LastChance] Starting visual effects fade-out over 400ms
[22:24:50] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:24:50] [ENEMY] [Enemy1] Death animation component initialized
[22:24:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:50] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:24:50] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:24:50] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:24:50] [ENEMY] [Enemy2] Death animation component initialized
[22:24:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:50] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:24:50] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:24:50] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:24:50] [ENEMY] [Enemy3] Death animation component initialized
[22:24:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:50] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:24:50] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:24:50] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:24:50] [ENEMY] [Enemy4] Death animation component initialized
[22:24:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:50] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:24:50] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:24:50] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:24:50] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:24:50] [ENEMY] [Enemy5] Death animation component initialized
[22:24:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:50] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:24:50] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:24:50] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:24:50] [ENEMY] [Enemy6] Death animation component initialized
[22:24:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:50] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:24:50] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:24:50] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:24:50] [ENEMY] [Enemy7] Death animation component initialized
[22:24:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:50] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:24:50] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:24:50] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:24:50] [ENEMY] [Enemy8] Death animation component initialized
[22:24:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:50] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:24:50] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:24:50] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:24:50] [ENEMY] [Enemy9] Death animation component initialized
[22:24:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:50] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:24:50] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:24:50] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:24:50] [ENEMY] [Enemy10] Death animation component initialized
[22:24:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:50] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:24:50] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:24:50] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:24:50] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:24:50] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:24:50] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:24:50] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:24:50] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:24:50] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:24:50] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:24:50] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:24:50] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[22:24:50] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:24:50] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:24:50] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:24:50] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:24:50] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:24:50] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:24:50] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:24:50] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:24:50] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:24:50] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:24:50] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:24:50] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:24:50] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:24:50] [INFO] [ScoreManager] Level started with 10 enemies
[22:24:50] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:24:50] [INFO] [CinemaEffects] Found player node: Player
[22:24:50] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:24:50] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[22:24:50] [ENEMY] [Enemy1] Registered as sound listener
[22:24:50] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[22:24:50] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:24:50] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[22:24:50] [ENEMY] [Enemy2] Registered as sound listener
[22:24:50] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[22:24:50] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:24:50] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[22:24:50] [ENEMY] [Enemy3] Registered as sound listener
[22:24:50] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[22:24:50] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:24:50] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[22:24:50] [ENEMY] [Enemy4] Registered as sound listener
[22:24:50] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[22:24:50] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:24:50] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[22:24:50] [ENEMY] [Enemy5] Registered as sound listener
[22:24:50] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[22:24:50] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:24:50] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[22:24:50] [ENEMY] [Enemy6] Registered as sound listener
[22:24:50] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[22:24:50] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:24:50] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[22:24:50] [ENEMY] [Enemy7] Registered as sound listener
[22:24:50] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[22:24:50] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:24:50] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[22:24:50] [ENEMY] [Enemy8] Registered as sound listener
[22:24:50] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[22:24:50] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:24:50] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[22:24:50] [ENEMY] [Enemy9] Registered as sound listener
[22:24:50] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[22:24:50] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:24:50] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[22:24:50] [ENEMY] [Enemy10] Registered as sound listener
[22:24:50] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[22:24:50] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:24:50] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:50] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:50] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:50] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:50] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:50] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:50] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:50] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:24:50] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:24:50] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:24:50] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:24:50] [INFO] [LastChance] Found player: Player
[22:24:50] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:24:50] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:24:50] [INFO] [LastChance] Connected to player Died signal (C#)
[22:24:50] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:24:50] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:24:50] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:24:50] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:24:50] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:24:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:50] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:24:50] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:24:50] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:24:50] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:24:50] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:24:50] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:24:50] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:24:50] [ENEMY] [Enemy1] Death animation component initialized
[22:24:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:50] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:24:50] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:24:50] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:24:50] [ENEMY] [Enemy2] Death animation component initialized
[22:24:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:50] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:24:50] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:24:50] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:24:50] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:24:50] [ENEMY] [Enemy3] Death animation component initialized
[22:24:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:50] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:24:50] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:24:50] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:24:50] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:24:50] [ENEMY] [Enemy4] Death animation component initialized
[22:24:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:50] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:24:50] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:24:50] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:24:50] [ENEMY] [Enemy5] Death animation component initialized
[22:24:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:50] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:24:50] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:24:50] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:24:50] [ENEMY] [Enemy6] Death animation component initialized
[22:24:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:50] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:24:50] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:24:50] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:24:50] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:24:50] [ENEMY] [Enemy7] Death animation component initialized
[22:24:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:50] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:24:50] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:24:50] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:24:50] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:24:50] [ENEMY] [Enemy8] Death animation component initialized
[22:24:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:50] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:24:50] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:24:50] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:24:50] [ENEMY] [Enemy9] Death animation component initialized
[22:24:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:50] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:24:50] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:24:50] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:24:50] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:24:50] [ENEMY] [Enemy10] Death animation component initialized
[22:24:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:24:50] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:24:50] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:24:50] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:24:50] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:24:50] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:24:50] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:24:50] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:24:50] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:24:50] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:24:50] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:24:50] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:24:50] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[22:24:50] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:24:50] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:24:50] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:24:50] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:24:50] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:24:50] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:24:50] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:24:50] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:24:50] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:24:50] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:24:50] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:24:50] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:24:50] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:24:50] [INFO] [ScoreManager] Level started with 10 enemies
[22:24:50] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:24:50] [INFO] [CinemaEffects] Found player node: Player
[22:24:50] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:24:50] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[22:24:50] [ENEMY] [Enemy1] Registered as sound listener
[22:24:50] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[22:24:50] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:24:50] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[22:24:50] [ENEMY] [Enemy2] Registered as sound listener
[22:24:50] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[22:24:50] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:24:50] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[22:24:50] [ENEMY] [Enemy3] Registered as sound listener
[22:24:50] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[22:24:50] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:24:50] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[22:24:50] [ENEMY] [Enemy4] Registered as sound listener
[22:24:50] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[22:24:50] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:24:50] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
[22:24:50] [ENEMY] [Enemy5] Registered as sound listener
[22:24:50] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[22:24:50] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:24:50] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[22:24:50] [ENEMY] [Enemy6] Registered as sound listener
[22:24:50] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[22:24:50] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:24:50] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[22:24:50] [ENEMY] [Enemy7] Registered as sound listener
[22:24:50] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[22:24:50] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:24:50] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[22:24:50] [ENEMY] [Enemy8] Registered as sound listener
[22:24:50] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[22:24:50] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:24:50] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[22:24:50] [ENEMY] [Enemy9] Registered as sound listener
[22:24:50] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[22:24:50] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:24:50] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[22:24:50] [ENEMY] [Enemy10] Registered as sound listener
[22:24:50] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[22:24:50] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:24:50] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:24:50] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:24:50] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:24:50] [INFO] [LastChance] Found player: Player
[22:24:50] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:24:50] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:24:50] [INFO] [LastChance] Connected to player Died signal (C#)
[22:24:50] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:24:50] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:24:50] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:24:50] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:24:50] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:24:50] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:24:50] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:24:50] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:24:50] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:24:50] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:24:50] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:24:50] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:24:52] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:24:52] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[22:24:52] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1053), corner_timer=0.30
[22:24:52] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1053), corner_timer=0.30
[22:24:52] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,1053), corner_timer=-0.02
[22:24:52] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:24:52] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,1053), corner_timer=-0.02
[22:24:52] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[22:24:52] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,1053), corner_timer=0.30
[22:24:52] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,1053), corner_timer=0.30
[22:24:53] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,997), corner_timer=-0.02
[22:24:53] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[22:24:53] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,992), corner_timer=0.30
[22:24:53] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,887), corner_timer=-0.02
[22:24:53] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[22:24:53] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,882), corner_timer=0.30
[22:24:53] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(450,830), corner_timer=-0.02
[22:24:53] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[22:24:53] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(450,830), corner_timer=0.30
[22:24:54] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(450,830), corner_timer=-0.02
[22:24:54] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[22:24:54] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(450,830), corner_timer=0.30
[22:24:54] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:54] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(450,830), corner_timer=-0.02
[22:24:54] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[22:24:54] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(450,830), corner_timer=0.30
[22:24:54] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:54] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(450,830), corner_timer=-0.02
[22:24:54] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[22:24:54] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(450,830), corner_timer=0.30
[22:24:55] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:55] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(451,792), corner_timer=-0.02
[22:24:55] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[22:24:55] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(453,788), corner_timer=0.30
[22:24:55] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:55] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(525,743), corner_timer=-0.02
[22:24:55] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[22:24:55] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(531,743), corner_timer=0.30
[22:24:55] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:55] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(621,777), corner_timer=-0.02
[22:24:55] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[22:24:55] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(626,778), corner_timer=0.30
[22:24:56] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:56] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=57.7°, current=11.3°, player=(719,780), corner_timer=0.00
[22:24:56] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[22:24:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=30
[22:24:56] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
[22:24:56] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
[22:24:56] [ENEMY] [Enemy4] Heard gunshot at (700, 750), source_type=1, intensity=0.08, distance=180
[22:24:56] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:24:56] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-124.0°, current=168.8°, player=(719,780), corner_timer=0.00
[22:24:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(729.5317, 811.3064), shooter_id=827636844923, bullet_pos=(729.5317, 811.3064)
[22:24:56] [INFO] [Bullet] Using shooter_position, distance=0
[22:24:56] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[22:24:56] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[22:24:56] [INFO] [Bullet] Starting wall penetration at (729.5317, 811.3064)
[22:24:56] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=35.3°, current=-157.5°, player=(724,779), corner_timer=0.00
[22:24:56] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[22:24:56] [INFO] [Bullet] Exiting penetration at (754.4697, 850.7509) after traveling 41.6666679382324 pixels through wall
[22:24:56] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[22:24:56] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.5°, current=89.5°, player=(729,778), corner_timer=-0.02
[22:24:56] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[22:24:56] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(734,777), corner_timer=0.30
[22:24:56] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[22:24:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[22:24:56] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:24:56] [INFO] [Player] Spawning blood effect at (758.40045, 768.7419), dir=(1, 0), lethal=False (C#)
[22:24:56] [INFO] [ImpactEffects] spawn_blood_effect called at (758.4005, 768.7419), dir=(1, 0), lethal=false
[22:24:56] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:24:56] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:24:56] [INFO] [ImpactEffects] Blood effect spawned at (758.4005, 768.7419) (scale=1)
[22:24:56] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[22:24:56] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[22:24:56] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:24:56] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[22:24:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[22:24:56] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:24:56] [INFO] [Player] Spawning blood effect at (800.84705, 765.6623), dir=(1, 0), lethal=False (C#)
[22:24:56] [INFO] [ImpactEffects] spawn_blood_effect called at (800.847, 765.6623), dir=(1, 0), lethal=false
[22:24:56] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:24:56] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:24:56] [INFO] [ImpactEffects] Blood effect spawned at (800.847, 765.6623) (scale=1)
[22:24:56] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[22:24:56] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[22:24:56] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[22:24:56] [ENEMY] [Enemy1] Memory: medium confidence (0.60) - transitioning to PURSUING
[22:24:56] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[22:24:56] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=38.7°, current=168.8°, player=(818,765), corner_timer=0.00
[22:24:56] [ENEMY] [Enemy1] PURSUING corner check: angle -50.9°
[22:24:56] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[22:24:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[22:24:56] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:24:56] [INFO] [LastChance] Threat detected: Bullet
[22:24:56] [INFO] [LastChance] Triggering last chance effect!
[22:24:56] [INFO] [LastChance] Starting last chance effect:
[22:24:56] [INFO] [LastChance]   - Time will be frozen (except player)
[22:24:56] [INFO] [LastChance]   - Duration: 6.0 real seconds
[22:24:56] [INFO] [LastChance]   - Sepia intensity: 0.70
[22:24:56] [INFO] [LastChance]   - Brightness: 0.60
[22:24:56] [INFO] [LastChance] Pushed bullet Bullet from distance 60.3 to 200.0
[22:24:56] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[22:24:56] [INFO] [LastChance] Set player Player and all 24 children to PROCESS_MODE_ALWAYS
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[22:24:56] [INFO] [LastChance] Skipping player node: Player
[22:24:56] [INFO] [LastChance] Froze existing bullet casing: Casing
[22:24:56] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2688
[22:24:56] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2689
[22:24:56] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@2691
[22:24:56] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[22:24:56] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[22:24:56] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[22:24:56] [INFO] [BloodDecal] Blood puddle created at (836.5903, 813.0237) (added to group)
[22:24:56] [INFO] [BloodDecal] Blood puddle created at (824.6436, 795.2411) (added to group)
[22:24:56] [INFO] [BloodDecal] Blood puddle created at (851.7061, 785.3569) (added to group)
[22:24:56] [INFO] [BloodDecal] Blood puddle created at (846.9146, 761.4636) (added to group)
[22:24:56] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[22:24:56] [INFO] [BloodDecal] Blood puddle created at (882.6534, 802.4503) (added to group)
[22:24:56] [INFO] [BloodDecal] Blood puddle created at (843.4353, 827.0651) (added to group)
[22:24:56] [INFO] [BloodDecal] Blood puddle created at (893.6432, 816.2285) (added to group)
[22:24:56] [INFO] [BloodDecal] Blood puddle created at (899.1456, 750.4044) (added to group)
[22:24:56] [INFO] [BloodDecal] Blood puddle created at (910.1445, 819.3497) (added to group)
[22:24:56] [INFO] [BloodDecal] Blood puddle created at (879.0504, 825.2418) (added to group)
[22:24:56] [INFO] [BloodDecal] Blood puddle created at (875.7697, 824.8094) (added to group)
[22:24:56] [INFO] [BloodDecal] Blood puddle created at (903.0461, 819.0613) (added to group)
[22:24:56] [INFO] [BloodDecal] Blood puddle created at (873.6445, 831.2064) (added to group)
[22:24:56] [INFO] [BloodDecal] Blood puddle created at (852.7772, 878.7385) (added to group)
[22:24:56] [INFO] [BloodDecal] Blood puddle created at (902.2172, 829.4213) (added to group)
[22:24:56] [INFO] [BloodDecal] Blood puddle created at (871.1459, 864.1797) (added to group)
[22:24:57] [INFO] [BloodDecal] Blood puddle created at (905.0275, 777.894) (added to group)
[22:25:00] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:25:00] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:25:00] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:25:00] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:25:00] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (817.0387, 728.9279)
[22:25:01] [INFO] [LastChance] Freezing newly created grenade: FragGrenade
[22:25:01] [INFO] [LastChance] Registered frozen grenade: FragGrenade
[22:25:01] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[22:25:01] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:25:01] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:25:01] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:25:01] [INFO] [Player.Grenade] Timer started, grenade created at (596.2915, 765.6623)
[22:25:01] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:25:01] [INFO] [Player.Grenade] Step 1 complete! Drag: (87.51459, 7.346924)
[22:25:01] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:25:01] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[22:25:02] [INFO] [BloodyFeet:Player] Blood ran out - no more footprints
[22:25:02] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[22:25:02] [INFO] [LastChance] Ending last chance effect
[22:25:02] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=true
[22:25:02] [ENEMY] [Enemy1] Search mode: PURSUING -> SEARCHING at (700, 750)
[22:25:02] [ENEMY] [Enemy1] SEARCHING started: center=(700, 750), radius=100, waypoints=5
[22:25:02] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=true
[22:25:02] [ENEMY] [Enemy2] Search mode: COMBAT -> SEARCHING at (810.4582, 765.6623)
[22:25:02] [ENEMY] [Enemy2] SEARCHING started: center=(810.4582, 765.6623), radius=100, waypoints=5
[22:25:02] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=true
[22:25:02] [ENEMY] [Enemy3] Search mode: COMBAT -> SEARCHING at (822.7915, 765.6623)
[22:25:02] [ENEMY] [Enemy3] SEARCHING started: center=(822.7915, 765.6623), radius=100, waypoints=5
[22:25:02] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=true
[22:25:02] [ENEMY] [Enemy4] Search mode: COMBAT -> SEARCHING at (810.4582, 765.6623)
[22:25:02] [ENEMY] [Enemy4] SEARCHING started: center=(810.4582, 765.6623), radius=100, waypoints=5
[22:25:02] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[22:25:02] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[22:25:02] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[22:25:02] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[22:25:02] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[22:25:02] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[22:25:02] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[22:25:02] [INFO] [LastChance] All process modes restored
[22:25:02] [INFO] [LastChance] Unfroze grenade: FragGrenade
[22:25:02] [INFO] [LastChance] Unfroze bullet casing: Casing
[22:25:02] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2688
[22:25:02] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2689
[22:25:02] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@2691
[22:25:02] [INFO] [LastChance] Starting visual effects fade-out over 400ms
[22:25:02] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=SEARCHING, target=-78.3°, current=7.3°, player=(743,540), corner_timer=0.00
[22:25:02] [ENEMY] [Enemy3] SEARCHING corner check: angle -82.7°
[22:25:02] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.4°, current=89.5°, player=(743,540), corner_timer=-0.02
[22:25:02] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[22:25:02] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.3°, player=(743,540), corner_timer=0.30
[22:25:02] [ENEMY] [Enemy2] SEARCHING corner check: angle -66.2°
[22:25:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(766.0698, 766.2905), shooter_id=827636844923, bullet_pos=(915.6804, 804.6505)
[22:25:02] [INFO] [Bullet] Using shooter_position, distance=154.450088500977
[22:25:02] [INFO] [Bullet] Distance to wall: 154.450088500977 (10.516790534701% of viewport)
[22:25:02] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:25:02] [INFO] [Bullet] Starting wall penetration at (915.6804, 804.6505)
[22:25:02] [INFO] [Bullet] Raycast backward hit penetrating body at distance 26.1824722290039
[22:25:02] [INFO] [Bullet] Body exited signal received for penetrating body
[22:25:02] [INFO] [Bullet] Exiting penetration at (961.972, 810.5551) after traveling 41.6666679382324 pixels through wall
[22:25:02] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[22:25:02] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:25:02] [INFO] [Player.Grenade.Simple] Throwing! Target: (789.949, 808.05695), Distance: 245,6, Speed: 370,9, Friction: 280,0
[22:25:02] [INFO] [Player.Grenade] Player rotated for throw: 0 -> 1,398168
[22:25:02] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.171772, 0.985137), Speed: 370.9 (clamped from 370.9, max: 1186.5)
[22:25:02] [INFO] [FragGrenade] Grenade thrown (simple mode) - impact detection enabled
[22:25:02] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:25:02] [INFO] [Player.Grenade.Simple] Grenade thrown!
[22:25:02] [INFO] [Player.Grenade] State reset to IDLE
[22:25:02] [INFO] [Player.Grenade] State reset to IDLE
[22:25:02] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:25:02] [ENEMY] [Enemy2] GRENADE DANGER: Entering EVADING_GRENADE state from SEARCHING
[22:25:02] [ENEMY] [Enemy2] EVADING_GRENADE started: escaping to (518.8735, 623.4365)
[22:25:02] [INFO] [EnemyGrenade] Unsafe throw distance (142 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:25:02] [INFO] [BloodyFeet:Enemy4] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[22:25:02] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P3:corner, state=EVADING_GRENADE, target=-66.2°, current=-31.9°, player=(743,540), corner_timer=0.13
[22:25:02] [INFO] [EnemyGrenade] Unsafe throw distance (140 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:25:02] [ENEMY] [Enemy4] SEARCHING corner check: angle -175.5°
[22:25:02] [INFO] [Player.Grenade] Player rotation restored to 0
[22:25:02] [ENEMY] [Enemy2] EVADING_GRENADE: Escaped to safe distance
[22:25:02] [ENEMY] [Enemy2] SEARCHING started: center=(553.108, 649.528), radius=100, waypoints=5
[22:25:02] [ENEMY] [Enemy2] State: EVADING_GRENADE -> SEARCHING
[22:25:02] [INFO] [EnemyGrenade] Unsafe throw distance (138 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:25:02] [ENEMY] [Enemy2] ROT_CHANGE: P3:corner -> P2:combat_state, state=SEARCHING, target=-28.6°, current=-65.5°, player=(743,540), corner_timer=0.13
[22:25:02] [INFO] [EnemyGrenade] Unsafe throw distance (135 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:25:02] [ENEMY] [Enemy3] SEARCHING corner check: angle -82.7°
[22:25:02] [INFO] [EnemyGrenade] Unsafe throw distance (133 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:25:02] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.5°, player=(743,540), corner_timer=-0.02
[22:25:02] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[22:25:02] [INFO] [EnemyGrenade] Unsafe throw distance (130 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:25:02] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(743,540), corner_timer=0.30
[22:25:02] [INFO] [EnemyGrenade] Unsafe throw distance (128 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:25:03] [INFO] [EnemyGrenade] Unsafe throw distance (125 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:25:03] [INFO] [LastChance] Visual effects fade-out complete
[22:25:03] [INFO] [LastChance] Restored original colors to 5 player sprites
[22:25:03] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[22:25:03] [INFO] [EnemyGrenade] Unsafe throw distance (124 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:25:03] [INFO] [BloodyFeet:Enemy3] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[22:25:03] [ENEMY] [Enemy1] SEARCHING corner check: angle 153.2°
[22:25:03] [ENEMY] [Enemy4] GRENADE DANGER: Entering EVADING_GRENADE state from SEARCHING
[22:25:03] [ENEMY] [Enemy4] EVADING_GRENADE started: escaping to (888.3763, 495.1715)
[22:25:03] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P3:corner, state=EVADING_GRENADE, target=-175.5°, current=-137.2°, player=(743,540), corner_timer=0.22
[22:25:03] [INFO] [EnemyGrenade] Unsafe throw distance (122 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:25:03] [INFO] [EnemyGrenade] Unsafe throw distance (117 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:25:03] [INFO] [EnemyGrenade] Unsafe throw distance (113 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:25:03] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:25:03] [INFO] [EnemyGrenade] Unsafe throw distance (108 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:25:03] [INFO] [EnemyGrenade] Unsafe throw distance (104 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:25:03] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:25:03] [INFO] [EnemyGrenade] Unsafe throw distance (100 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:25:03] [INFO] [EnemyGrenade] Unsafe throw distance (96 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:25:03] [INFO] [EnemyGrenade] Unsafe throw distance (92 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:25:03] [INFO] [EnemyGrenade] Unsafe throw distance (88 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:25:03] [INFO] [EnemyGrenade] Unsafe throw distance (85 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:25:03] [INFO] [EnemyGrenade] Unsafe throw distance (81 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:25:03] [INFO] [EnemyGrenade] Unsafe throw distance (78 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:25:03] [INFO] [EnemyGrenade] Unsafe throw distance (75 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:25:03] [INFO] [EnemyGrenade] Unsafe throw distance (73 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:25:03] [INFO] [EnemyGrenade] Unsafe throw distance (71 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:25:03] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(743,538), corner_timer=-0.02
[22:25:03] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[22:25:03] [INFO] [EnemyGrenade] Unsafe throw distance (69 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:25:03] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(743,536), corner_timer=0.30
[22:25:03] [INFO] [EnemyGrenade] Unsafe throw distance (68 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:25:03] [INFO] [EnemyGrenade] Unsafe throw distance (67 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:25:03] [INFO] [EnemyGrenade] Unsafe throw distance (66 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:25:03] [ENEMY] [Enemy1] SEARCHING corner check: angle 153.2°
[22:25:03] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:25:03] [ENEMY] [Enemy4] EVADING_GRENADE: Escaped to safe distance
[22:25:03] [ENEMY] [Enemy4] SEARCHING started: center=(876.2011, 538.4484), radius=100, waypoints=5
[22:25:03] [ENEMY] [Enemy4] State: EVADING_GRENADE -> SEARCHING
[22:25:03] [ENEMY] [Enemy4] ROT_CHANGE: P3:corner -> P2:combat_state, state=SEARCHING, target=-170.2°, current=-175.5°, player=(743,509), corner_timer=0.22
[22:25:03] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(743,456), corner_timer=-0.02
[22:25:03] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[22:25:03] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(743,450), corner_timer=0.30
[22:25:03] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:25:03] [ENEMY] [Enemy1] SEARCHING corner check: angle -60.4°
[22:25:03] [INFO] [BloodyFeet:Enemy4] Blood ran out - no more footprints
[22:25:03] [INFO] [SoundPropagation] Sound emitted: type=GRENADE_LANDING, pos=(791.1785, 815.1093), source=NEUTRAL (FragGrenade), range=112, listeners=10
[22:25:03] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=9, self=0, below_threshold=0
[22:25:03] [INFO] [GrenadeBase] Grenade landed at (791.1785, 815.1093)
[22:25:03] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:25:03] [INFO] [GrenadeBase] EXPLODED at (791.1785, 815.1093)!
[22:25:03] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(791.1785, 815.1093), source=NEUTRAL (FragGrenade), range=2937, listeners=10
[22:25:03] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[22:25:03] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 3/3 -> 2/3
[22:25:03] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:25:03] [INFO] [ImpactEffects] spawn_blood_effect called at (887.9329, 781.8236), dir=(0.945608, -0.32531), lethal=false
[22:25:03] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:03] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:25:03] [INFO] [ImpactEffects] Wall found for blood splatter at (912, 773.544) (dist=25 px)
[22:25:03] [INFO] [BloodDecal] Blood puddle created at (911, 773.544) (added to group)
[22:25:03] [INFO] [ImpactEffects] Blood effect spawned at (887.9329, 781.8236) (scale=1)
[22:25:03] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/3 -> 1/3
[22:25:03] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:25:03] [INFO] [ImpactEffects] spawn_blood_effect called at (887.9329, 781.8236), dir=(0.945608, -0.32531), lethal=false
[22:25:03] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:03] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:25:03] [INFO] [ImpactEffects] Wall found for blood splatter at (912, 773.544) (dist=25 px)
[22:25:03] [INFO] [BloodDecal] Blood puddle created at (911, 773.544) (added to group)
[22:25:03] [INFO] [ImpactEffects] Blood effect spawned at (887.9329, 781.8236) (scale=1)
[22:25:03] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 1/3 -> 0/3
[22:25:03] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:25:03] [INFO] [ImpactEffects] spawn_blood_effect called at (887.9329, 781.8236), dir=(0.945608, -0.32531), lethal=true
[22:25:03] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:03] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[22:25:03] [INFO] [ImpactEffects] Wall found for blood splatter at (912, 773.544) (dist=25 px)
[22:25:03] [INFO] [BloodDecal] Blood puddle created at (911, 773.544) (added to group)
[22:25:03] [INFO] [ImpactEffects] Blood effect spawned at (887.9329, 781.8236) (scale=1.5)
[22:25:03] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[22:25:03] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:25:03] [ENEMY] [Enemy1] [AllyDeath] Witnessed at (887.9329, 781.8236), entering SEARCHING
[22:25:03] [ENEMY] [Enemy1] SEARCHING started: center=(887.9329, 781.8236), radius=100, waypoints=5
[22:25:03] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[22:25:03] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[22:25:03] [INFO] [DeathAnim] Started - Angle: -19.0 deg, Index: 10
[22:25:03] [ENEMY] [Enemy3] Death animation started with hit direction: (0.945608, -0.32531)
[22:25:03] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 102.3
[22:25:03] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 0.7 degrees
[22:25:03] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 103.7 degrees
[22:25:03] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 188.2 degrees
[22:25:03] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 284.1 degrees
[22:25:03] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(743,348), corner_timer=-0.02
[22:25:03] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[22:25:03] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(743,343), corner_timer=0.30
[22:25:04] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:25:04] [ENEMY] [Enemy1] SEARCHING corner check: angle -70.5°
[22:25:04] [ENEMY] [Enemy2] SEARCHING corner check: angle -90.0°
[22:25:04] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(743,311), corner_timer=-0.02
[22:25:04] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[22:25:04] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(743,311), corner_timer=0.30
[22:25:04] [ENEMY] [Enemy3] Ragdoll activated
[22:25:04] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:25:04] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:25:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:04] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:25:04] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:25:04] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:25:04] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:25:04] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:25:04] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:25:04] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:25:04] [ENEMY] [Enemy1] Death animation component initialized
[22:25:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:04] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:25:04] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:25:04] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:25:04] [ENEMY] [Enemy2] Death animation component initialized
[22:25:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:04] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:25:04] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:25:04] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:25:04] [ENEMY] [Enemy3] Death animation component initialized
[22:25:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:04] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:25:04] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:25:04] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:25:04] [ENEMY] [Enemy4] Death animation component initialized
[22:25:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:04] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:25:04] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:25:04] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:25:04] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:04] [ENEMY] [Enemy5] Death animation component initialized
[22:25:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:04] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:25:04] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:25:04] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:25:04] [ENEMY] [Enemy6] Death animation component initialized
[22:25:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:04] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:25:04] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:25:04] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:25:04] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:04] [ENEMY] [Enemy7] Death animation component initialized
[22:25:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:04] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:25:04] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:25:04] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:25:04] [ENEMY] [Enemy8] Death animation component initialized
[22:25:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:04] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:25:04] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:25:04] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:25:04] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:04] [ENEMY] [Enemy9] Death animation component initialized
[22:25:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:04] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:25:04] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:25:04] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:25:04] [ENEMY] [Enemy10] Death animation component initialized
[22:25:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:04] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:25:04] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:25:04] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:25:04] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:25:04] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:25:04] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:25:04] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:25:04] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:25:04] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:25:04] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:25:04] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:25:04] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[22:25:04] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:25:04] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:25:04] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:25:04] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:25:04] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:25:04] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:25:04] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:25:04] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:25:04] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:25:04] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:25:04] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:25:04] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:25:04] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:25:04] [INFO] [ScoreManager] Level started with 10 enemies
[22:25:04] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:25:04] [INFO] [CinemaEffects] Found player node: Player
[22:25:04] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:25:04] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[22:25:04] [ENEMY] [Enemy1] Registered as sound listener
[22:25:04] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[22:25:04] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:25:04] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[22:25:04] [ENEMY] [Enemy2] Registered as sound listener
[22:25:04] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[22:25:04] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:25:04] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[22:25:04] [ENEMY] [Enemy3] Registered as sound listener
[22:25:04] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[22:25:04] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:25:04] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[22:25:04] [ENEMY] [Enemy4] Registered as sound listener
[22:25:04] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[22:25:04] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:25:04] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[22:25:04] [ENEMY] [Enemy5] Registered as sound listener
[22:25:04] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[22:25:04] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:25:04] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[22:25:04] [ENEMY] [Enemy6] Registered as sound listener
[22:25:04] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[22:25:04] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:25:04] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[22:25:04] [ENEMY] [Enemy7] Registered as sound listener
[22:25:04] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[22:25:04] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:25:04] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[22:25:04] [ENEMY] [Enemy8] Registered as sound listener
[22:25:04] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[22:25:04] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:25:04] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[22:25:04] [ENEMY] [Enemy9] Registered as sound listener
[22:25:04] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[22:25:04] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:25:04] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[22:25:04] [ENEMY] [Enemy10] Registered as sound listener
[22:25:04] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[22:25:04] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:25:04] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:04] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:04] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:04] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:04] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:04] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:04] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:04] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:04] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:25:04] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:25:04] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:25:04] [INFO] [LastChance] Found player: Player
[22:25:04] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:25:04] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:25:04] [INFO] [LastChance] Connected to player Died signal (C#)
[22:25:04] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:25:04] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:25:04] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:25:04] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:25:05] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:25:05] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[22:25:05] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,891), corner_timer=0.30
[22:25:05] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,891), corner_timer=0.30
[22:25:06] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(436,792), corner_timer=-0.02
[22:25:06] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:25:06] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(436,792), corner_timer=-0.02
[22:25:06] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[22:25:06] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(433,788), corner_timer=0.30
[22:25:06] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(433,788), corner_timer=0.30
[22:25:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(429.6747, 790.0858), source=PLAYER (AssaultRifle), range=1469, listeners=19
[22:25:06] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[22:25:06] [ENEMY] [Enemy1] Heard gunshot at (429.6747, 790.0858), source_type=0, intensity=0.01, distance=459
[22:25:06] [ENEMY] [Enemy2] Heard gunshot at (429.6747, 790.0858), source_type=0, intensity=0.04, distance=242
[22:25:06] [ENEMY] [Enemy3] Heard gunshot at (429.6747, 790.0858), source_type=0, intensity=0.03, distance=273
[22:25:06] [ENEMY] [Enemy4] Heard gunshot at (429.6747, 790.0858), source_type=0, intensity=0.02, distance=386
[22:25:06] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:25:06] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=73.4°, current=33.8°, player=(429,784), corner_timer=0.00
[22:25:06] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=82.8°, current=-157.5°, player=(429,784), corner_timer=0.00
[22:25:06] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=172.8°, current=11.3°, player=(429,784), corner_timer=0.00
[22:25:06] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-162.6°, current=168.8°, player=(429,784), corner_timer=0.00
[22:25:06] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=173.7°, current=-173.1°, player=(426,780), corner_timer=0.00
[22:25:06] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/2 -> 1/2
[22:25:06] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:25:06] [INFO] [ImpactEffects] spawn_blood_effect called at (673.4624, 752.5681), dir=(1, 0), lethal=false
[22:25:06] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:06] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:25:06] [INFO] [ImpactEffects] Blood effect spawned at (673.4624, 752.5681) (scale=1)
[22:25:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(402.6002, 770.0608), source=PLAYER (AssaultRifle), range=1469, listeners=10
[22:25:06] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:25:06] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 1/2 -> 0/2
[22:25:06] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:25:06] [INFO] [ImpactEffects] spawn_blood_effect called at (638.2883, 753.8322), dir=(1, 0), lethal=true
[22:25:06] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:06] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[22:25:06] [INFO] [ImpactEffects] Blood effect spawned at (638.2883, 753.8322) (scale=1.5)
[22:25:06] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[22:25:06] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:25:06] [ENEMY] [Enemy3] [AllyDeath] Notified 3 enemies
[22:25:06] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[22:25:06] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[22:25:06] [ENEMY] [Enemy3] Death animation started with hit direction: (1, 0)
[22:25:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(371.6371, 763.6677), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:25:06] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[22:25:06] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.1°, player=(352,760), corner_timer=-0.00
[22:25:06] [ENEMY] [Enemy10] PATROL corner check: angle 7.2°
[22:25:06] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.2°, current=16.2°, player=(349,761), corner_timer=0.30
[22:25:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(342.4958, 770.3045), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:25:06] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[22:25:06] [INFO] [BloodDecal] Blood puddle created at (743.2778, 797.2123) (added to group)
[22:25:06] [INFO] [BloodDecal] Blood puddle created at (712.3781, 784.344) (added to group)
[22:25:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(321.3493, 787.2854), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:25:06] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[22:25:06] [INFO] [BloodDecal] Blood puddle created at (754.0167, 794.0114) (added to group)
[22:25:06] [INFO] [BloodDecal] Blood puddle created at (762.081, 755.1083) (added to group)
[22:25:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(371.63705, 763.66766), shooter_id=951335257582, bullet_pos=(929.3922, 738.25745)
[22:25:06] [INFO] [Bullet] Using shooter_position, distance=558,3337
[22:25:06] [INFO] [Bullet] Distance to wall: 558,3337 (38,017967% of viewport)
[22:25:06] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:25:06] [INFO] [Bullet] Starting wall penetration at (929.3922, 738.25745)
[22:25:06] [INFO] [Bullet] Raycast backward hit penetrating body at distance 31,718657
[22:25:06] [INFO] [BloodDecal] Blood puddle created at (676.1322, 758.1703) (added to group)
[22:25:06] [INFO] [BloodDecal] Blood puddle created at (691.1545, 784.5903) (added to group)
[22:25:06] [INFO] [Bullet] Body exited signal received for penetrating body
[22:25:06] [INFO] [Bullet] Exiting penetration at (967.6858, 736.5129) after traveling 33,333336 pixels through wall
[22:25:06] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:25:06] [INFO] [BloodDecal] Blood puddle created at (683.1679, 753.0718) (added to group)
[22:25:06] [INFO] [BloodDecal] Blood puddle created at (708.9192, 792.9782) (added to group)
[22:25:06] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[22:25:06] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[22:25:06] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[22:25:06] [INFO] [BloodDecal] Blood puddle created at (785.5065, 796.2594) (added to group)
[22:25:06] [INFO] [BloodDecal] Blood puddle created at (748.4266, 798.8311) (added to group)
[22:25:06] [INFO] [BloodDecal] Blood puddle created at (732.2599, 789.1115) (added to group)
[22:25:06] [INFO] [BloodDecal] Blood puddle created at (749.7875, 770.3579) (added to group)
[22:25:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(342.49576, 770.3045), shooter_id=951335257582, bullet_pos=(933.3268, 738.86285)
[22:25:06] [INFO] [Bullet] Using shooter_position, distance=591,66705
[22:25:06] [INFO] [Bullet] Distance to wall: 591,66705 (40,2877% of viewport)
[22:25:06] [INFO] [Bullet] Distance-based penetration chance: 99,664345%
[22:25:06] [INFO] [Bullet] Starting wall penetration at (933.3268, 738.86285)
[22:25:06] [INFO] [Bullet] Raycast backward hit penetrating body at distance 35,65634
[22:25:07] [INFO] [Bullet] Body exited signal received for penetrating body
[22:25:07] [INFO] [Bullet] Exiting penetration at (971.60596, 736.8258) after traveling 33,33334 pixels through wall
[22:25:07] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:25:07] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=7.1°, player=(303,805), corner_timer=-0.01
[22:25:07] [ENEMY] [Enemy10] PATROL corner check: angle 3.7°
[22:25:07] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.7°, current=9.3°, player=(302,805), corner_timer=0.30
[22:25:07] [INFO] [BloodDecal] Blood puddle created at (834.5444, 812.0275) (added to group)
[22:25:07] [INFO] [BloodDecal] Blood puddle created at (788.9821, 800.69) (added to group)
[22:25:07] [INFO] [BloodDecal] Blood puddle created at (772.2877, 784.2573) (added to group)
[22:25:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(321.34927, 787.2854), shooter_id=951335257582, bullet_pos=(911.0018, 738.50867)
[22:25:07] [INFO] [Bullet] Using shooter_position, distance=591,66644
[22:25:07] [INFO] [Bullet] Distance to wall: 591,66644 (40,28766% of viewport)
[22:25:07] [INFO] [Bullet] Distance-based penetration chance: 99,6644%
[22:25:07] [INFO] [Bullet] Starting wall penetration at (911.0018, 738.50867)
[22:25:07] [INFO] [Bullet] Raycast backward hit penetrating body at distance 13,24969
[22:25:07] [INFO] [BloodDecal] Blood puddle created at (774.8063, 756.5362) (added to group)
[22:25:07] [INFO] [Bullet] Body exited signal received for penetrating body
[22:25:07] [INFO] [Bullet] Exiting penetration at (949.2046, 735.3485) after traveling 33,333336 pixels through wall
[22:25:07] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:25:07] [ENEMY] [Enemy3] Ragdoll activated
[22:25:07] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:25:07] [INFO] [BloodDecal] Blood puddle created at (734.8176, 777.7645) (added to group)
[22:25:07] [INFO] [BloodDecal] Blood puddle created at (763.1556, 766.9408) (added to group)
[22:25:07] [INFO] [BloodDecal] Blood puddle created at (808.6914, 761.0361) (added to group)
[22:25:07] [INFO] [BloodDecal] Blood puddle created at (836.7401, 819.3796) (added to group)
[22:25:07] [INFO] [BloodDecal] Blood puddle created at (854.8181, 826.7315) (added to group)
[22:25:07] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.7°, player=(318,781), corner_timer=-0.01
[22:25:07] [ENEMY] [Enemy10] PATROL corner check: angle 2.0°
[22:25:07] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=2.0°, current=5.9°, player=(320,779), corner_timer=0.30
[22:25:07] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.9°, player=(415,775), corner_timer=-0.01
[22:25:07] [ENEMY] [Enemy10] PATROL corner check: angle 1.0°
[22:25:07] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.0°, current=4.2°, player=(419,775), corner_timer=0.30
[22:25:08] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.0°, player=(520,775), corner_timer=-0.01
[22:25:08] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:25:08] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.6°, current=3.3°, player=(524,775), corner_timer=0.30
[22:25:08] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:25:08] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:25:08] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:25:08] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:25:08] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=56.6°, current=57.0°, player=(548,775), corner_timer=0.00
[22:25:08] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:25:08] [ENEMY] [Enemy3] Death animation completed
[22:25:08] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:25:08] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (809.6864, 706.7669)
[22:25:08] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:25:08] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-129.0°, player=(562,775), corner_timer=-0.01
[22:25:08] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[22:25:08] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-131.3°, player=(563,775), corner_timer=0.30
[22:25:08] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:25:08] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:25:08] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:25:08] [ENEMY] [Enemy1] Warning: No valid flank position (both sides behind walls)
[22:25:08] [ENEMY] [Enemy1] FLANKING started: target=(630.6373, 586.686), side=right, pos=(244.3286, 401.9337)
[22:25:08] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
[22:25:08] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:25:08] [ENEMY] [Enemy1] FLANKING corner check: angle -115.4°
[22:25:08] [ENEMY] [Enemy4] PURSUING corner check: angle -50.8°
[22:25:08] [ENEMY] [Enemy2] PURSUING corner check: angle 162.1°
[22:25:08] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:25:08] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.0°, current=175.9°, player=(564,775), corner_timer=-0.01
[22:25:08] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[22:25:08] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:25:08] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=178.1°, player=(564,775), corner_timer=0.30
[22:25:09] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:25:09] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:25:09] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P2:combat_state, state=PURSUING, target=49.6°, current=71.7°, player=(564,775), corner_timer=0.17
[22:25:09] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=-136.2°, current=-137.3°, player=(564,775), corner_timer=0.05
[22:25:09] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[22:25:09] [ENEMY] [Enemy1] FLANKING corner check: angle 14.9°
[22:25:09] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.0°, current=125.2°, player=(564,775), corner_timer=-0.01
[22:25:09] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[22:25:09] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=127.5°, player=(564,775), corner_timer=0.30
[22:25:09] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:25:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(704.2267, 914.0672), source=ENEMY (Enemy4), range=1469, listeners=9
[22:25:09] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[22:25:09] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:25:09] [INFO] [LastChance] Threat detected: Bullet
[22:25:09] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:25:09] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:25:09] [INFO] [Player] Spawning blood effect at (564.14526, 775.3095), dir=(1, 0), lethal=False (C#)
[22:25:09] [INFO] [ImpactEffects] spawn_blood_effect called at (564.1453, 775.3095), dir=(1, 0), lethal=false
[22:25:09] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:09] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:25:09] [INFO] [ImpactEffects] Blood effect spawned at (564.1453, 775.3095) (scale=1)
[22:25:09] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[22:25:09] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[22:25:09] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:25:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(704, 914.0672), source=ENEMY (Enemy4), range=1469, listeners=9
[22:25:09] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=6
[22:25:09] [INFO] [LastChance] Threat detected: Bullet
[22:25:09] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[22:25:09] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:25:09] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:25:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:09] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:25:09] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:25:09] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:25:09] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:25:09] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:25:09] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:25:09] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:25:09] [ENEMY] [Enemy1] Death animation component initialized
[22:25:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:09] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:25:09] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:25:09] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:25:09] [ENEMY] [Enemy2] Death animation component initialized
[22:25:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:09] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:25:09] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:25:09] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:25:09] [ENEMY] [Enemy3] Death animation component initialized
[22:25:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:09] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:25:09] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:25:09] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:25:09] [ENEMY] [Enemy4] Death animation component initialized
[22:25:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:09] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:25:09] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:25:09] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:25:09] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:09] [ENEMY] [Enemy5] Death animation component initialized
[22:25:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:09] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:25:09] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:25:09] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:25:09] [ENEMY] [Enemy6] Death animation component initialized
[22:25:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:09] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:25:09] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:25:09] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:25:09] [ENEMY] [Enemy7] Death animation component initialized
[22:25:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:09] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:25:09] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:25:09] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:25:09] [ENEMY] [Enemy8] Death animation component initialized
[22:25:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:09] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:25:09] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:25:09] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:25:09] [ENEMY] [Enemy9] Death animation component initialized
[22:25:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:09] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:25:09] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:25:09] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:25:09] [ENEMY] [Enemy10] Death animation component initialized
[22:25:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:09] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:25:09] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:25:09] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:25:09] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:25:09] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:25:09] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:25:09] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:25:09] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:25:09] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:25:09] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:25:09] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:25:09] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[22:25:09] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:25:09] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:25:09] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:25:09] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:25:09] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:25:09] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:25:09] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:25:09] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:25:09] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:25:09] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:25:09] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:25:09] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:25:09] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:25:09] [INFO] [ScoreManager] Level started with 10 enemies
[22:25:09] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:25:09] [INFO] [CinemaEffects] Found player node: Player
[22:25:09] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:25:09] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[22:25:09] [ENEMY] [Enemy1] Registered as sound listener
[22:25:09] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[22:25:09] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:25:09] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[22:25:09] [ENEMY] [Enemy2] Registered as sound listener
[22:25:09] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[22:25:09] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:25:09] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[22:25:09] [ENEMY] [Enemy3] Registered as sound listener
[22:25:09] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[22:25:09] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:25:09] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[22:25:09] [ENEMY] [Enemy4] Registered as sound listener
[22:25:09] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[22:25:09] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:25:09] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[22:25:09] [ENEMY] [Enemy5] Registered as sound listener
[22:25:09] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[22:25:09] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:25:09] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[22:25:09] [ENEMY] [Enemy6] Registered as sound listener
[22:25:09] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[22:25:09] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:25:09] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[22:25:09] [ENEMY] [Enemy7] Registered as sound listener
[22:25:09] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[22:25:09] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:25:09] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[22:25:09] [ENEMY] [Enemy8] Registered as sound listener
[22:25:09] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[22:25:09] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:25:09] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[22:25:09] [ENEMY] [Enemy9] Registered as sound listener
[22:25:09] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[22:25:09] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:25:09] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[22:25:09] [ENEMY] [Enemy10] Registered as sound listener
[22:25:09] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[22:25:09] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:25:09] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:09] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:09] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=281.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:09] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:09] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:09] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:09] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:09] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:09] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:25:09] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:25:09] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:25:09] [INFO] [LastChance] Found player: Player
[22:25:09] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:25:09] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:25:09] [INFO] [LastChance] Connected to player Died signal (C#)
[22:25:09] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:25:09] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:25:09] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:25:09] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:25:09] [INFO] [BloodDecal] Blood puddle created at (619.6871, 807.0626) (added to group)
[22:25:09] [INFO] [BloodDecal] Blood puddle created at (681.4565, 801.5518) (added to group)
[22:25:09] [INFO] [BloodDecal] Blood puddle created at (645.7444, 790.0136) (added to group)
[22:25:09] [INFO] [BloodDecal] Blood puddle created at (664.5107, 802.9852) (added to group)
[22:25:09] [INFO] [BloodDecal] Blood puddle created at (637.7317, 794.6779) (added to group)
[22:25:10] [INFO] [BloodDecal] Blood puddle created at (691.0082, 788.4068) (added to group)
[22:25:10] [INFO] [BloodDecal] Blood puddle created at (656.5782, 880.4933) (added to group)
[22:25:11] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:25:11] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[22:25:11] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,918), corner_timer=0.30
[22:25:11] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,918), corner_timer=0.30
[22:25:11] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,814), corner_timer=-0.02
[22:25:11] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:25:11] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,814), corner_timer=-0.02
[22:25:11] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[22:25:11] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,808), corner_timer=0.30
[22:25:11] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,808), corner_timer=0.30
[22:25:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(444.6776, 786.0273), source=PLAYER (AssaultRifle), range=1469, listeners=19
[22:25:11] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[22:25:11] [ENEMY] [Enemy1] Heard gunshot at (444.6776, 786.0273), source_type=0, intensity=0.01, distance=459
[22:25:11] [ENEMY] [Enemy2] Heard gunshot at (444.6776, 786.0273), source_type=0, intensity=0.04, distance=240
[22:25:11] [ENEMY] [Enemy3] Heard gunshot at (444.6776, 786.0273), source_type=0, intensity=0.04, distance=258
[22:25:11] [ENEMY] [Enemy4] Heard gunshot at (444.6776, 786.0273), source_type=0, intensity=0.02, distance=373
[22:25:11] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:25:11] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=71.4°, current=-33.8°, player=(444,780), corner_timer=0.00
[22:25:11] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=79.0°, current=168.8°, player=(444,780), corner_timer=0.00
[22:25:11] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=173.3°, current=-78.7°, player=(444,780), corner_timer=0.00
[22:25:11] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-161.3°, current=168.8°, player=(444,780), corner_timer=0.00
[22:25:11] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/2 -> 1/2
[22:25:11] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:25:11] [INFO] [ImpactEffects] spawn_blood_effect called at (684.0908, 751.6968), dir=(1, 0), lethal=false
[22:25:11] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:11] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:25:11] [INFO] [ImpactEffects] Blood effect spawned at (684.0908, 751.6968) (scale=1)
[22:25:11] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=177.5°, current=180.0°, player=(433,762), corner_timer=0.00
[22:25:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(428.5829, 763.9818), source=PLAYER (AssaultRifle), range=1469, listeners=10
[22:25:11] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:25:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.0908, 751.6968), source=ENEMY (Enemy3), range=1469, listeners=10
[22:25:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:25:11] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 1/2 -> 0/2
[22:25:11] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:25:11] [INFO] [ImpactEffects] spawn_blood_effect called at (684.0908, 751.6968), dir=(1, 0), lethal=true
[22:25:11] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:11] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[22:25:11] [INFO] [ImpactEffects] Blood effect spawned at (684.0908, 751.6968) (scale=1.5)
[22:25:11] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[22:25:11] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:25:11] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[22:25:11] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[22:25:11] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[22:25:11] [ENEMY] [Enemy3] Death animation started with hit direction: (1, 0)
[22:25:11] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.1°, player=(408,748), corner_timer=-0.01
[22:25:11] [ENEMY] [Enemy10] PATROL corner check: angle 7.1°
[22:25:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(406.2476, 753.5811), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:25:11] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[22:25:11] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.1°, current=16.2°, player=(406,747), corner_timer=0.30
[22:25:11] [INFO] [LastChance] Threat detected: @Area2D@3319
[22:25:11] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:25:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:25:12] [INFO] [Player] Spawning blood effect at (392.5187, 747.56915), dir=(1, 0), lethal=False (C#)
[22:25:12] [INFO] [ImpactEffects] spawn_blood_effect called at (392.5187, 747.5692), dir=(1, 0), lethal=false
[22:25:12] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:12] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:25:12] [INFO] [ImpactEffects] Blood effect spawned at (392.5187, 747.5692) (scale=1)
[22:25:12] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[22:25:12] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[22:25:12] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[22:25:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(388.7295, 755.0795), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:25:12] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[22:25:12] [INFO] [BloodDecal] Blood puddle created at (740.0671, 764.2119) (added to group)
[22:25:12] [INFO] [BloodDecal] Blood puddle created at (749.2078, 782.1515) (added to group)
[22:25:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(406.2476, 753.58105), shooter_id=1089277527396, bullet_pos=(931.0829, 740.4314)
[22:25:12] [INFO] [Bullet] Using shooter_position, distance=525
[22:25:12] [INFO] [Bullet] Distance to wall: 525 (35,748215% of viewport)
[22:25:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:25:12] [INFO] [Bullet] Starting wall penetration at (931.0829, 740.4314)
[22:25:12] [INFO] [Bullet] Raycast backward hit penetrating body at distance 33,414658
[22:25:12] [INFO] [Bullet] Body exited signal received for penetrating body
[22:25:12] [INFO] [Bullet] Exiting penetration at (969.4042, 739.47125) after traveling 33,333336 pixels through wall
[22:25:12] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:25:12] [INFO] [BloodDecal] Blood puddle created at (745.6063, 793.9819) (added to group)
[22:25:12] [INFO] [BloodDecal] Blood puddle created at (748.9687, 792.5372) (added to group)
[22:25:12] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[22:25:12] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[22:25:12] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[22:25:12] [INFO] [BloodDecal] Blood puddle created at (800.2458, 733.041) (added to group)
[22:25:12] [INFO] [BloodDecal] Blood puddle created at (749.4628, 752.2574) (added to group)
[22:25:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(388.72952, 755.07947), shooter_id=1089277527396, bullet_pos=(913.1458, 730.33453)
[22:25:12] [INFO] [Bullet] Using shooter_position, distance=524,99976
[22:25:12] [INFO] [Bullet] Distance to wall: 524,99976 (35,7482% of viewport)
[22:25:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:25:12] [INFO] [Bullet] Starting wall penetration at (913.1458, 730.33453)
[22:25:12] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=7.0°, player=(376,757), corner_timer=-0.01
[22:25:12] [ENEMY] [Enemy10] PATROL corner check: angle 3.7°
[22:25:12] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:25:12] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:25:12] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:25:12] [INFO] [Bullet] Raycast backward hit penetrating body at distance 15,453699
[22:25:12] [INFO] [BloodDecal] Blood puddle created at (780.8442, 763.23) (added to group)
[22:25:12] [INFO] [Bullet] Body exited signal received for penetrating body
[22:25:12] [INFO] [Bullet] Exiting penetration at (951.4365, 728.5278) after traveling 33,333336 pixels through wall
[22:25:12] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:25:12] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.7°, current=9.2°, player=(376,757), corner_timer=0.30
[22:25:12] [INFO] [BloodDecal] Blood puddle created at (828.2783, 731.4652) (added to group)
[22:25:12] [INFO] [BloodDecal] Blood puddle created at (808.2535, 788.3329) (added to group)
[22:25:12] [INFO] [BloodDecal] Blood puddle created at (800.0283, 800.2079) (added to group)
[22:25:12] [INFO] [BloodDecal] Blood puddle created at (749.6097, 799.3459) (added to group)
[22:25:12] [INFO] [BloodDecal] Blood puddle created at (797.3163, 832.8224) (added to group)
[22:25:12] [INFO] [BloodDecal] Blood puddle created at (484.9937, 750.8512) (added to group)
[22:25:12] [INFO] [BloodDecal] Blood puddle created at (460.4523, 753.64) (added to group)
[22:25:12] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:25:12] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (674.8603, 750.2352)
[22:25:12] [INFO] [BloodDecal] Blood puddle created at (790.3025, 814.5171) (added to group)
[22:25:12] [INFO] [BloodDecal] Blood puddle created at (767.9755, 788.8557) (added to group)
[22:25:12] [INFO] [BloodDecal] Blood puddle created at (778.5668, 768.33) (added to group)
[22:25:12] [INFO] [BloodDecal] Blood puddle created at (820.6614, 783.7203) (added to group)
[22:25:12] [ENEMY] [Enemy3] Ragdoll activated
[22:25:12] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:25:12] [INFO] [BloodDecal] Blood puddle created at (873.3839, 890.7935) (added to group)
[22:25:12] [INFO] [BloodDecal] Blood puddle created at (838.6218, 772.8574) (added to group)
[22:25:12] [INFO] [BloodDecal] Blood puddle created at (811.3783, 753.123) (added to group)
[22:25:12] [INFO] [BloodDecal] Blood puddle created at (780.0636, 823.9426) (added to group)
[22:25:12] [INFO] [BloodDecal] Blood puddle created at (852.0519, 871.9584) (added to group)
[22:25:12] [INFO] [BloodDecal] Blood puddle created at (461.7056, 826.6768) (added to group)
[22:25:12] [INFO] [BloodDecal] Blood puddle created at (538.6019, 791.0256) (added to group)
[22:25:12] [INFO] [BloodDecal] Blood puddle created at (507.9474, 762.4371) (added to group)
[22:25:12] [INFO] [BloodDecal] Blood puddle created at (852.2974, 766.6256) (added to group)
[22:25:12] [INFO] [BloodDecal] Blood puddle created at (537.0923, 796.1769) (added to group)
[22:25:12] [INFO] [BloodDecal] Blood puddle created at (477.1175, 807.0338) (added to group)
[22:25:12] [INFO] [BloodDecal] Blood puddle created at (831.4503, 817.431) (added to group)
[22:25:12] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.6°, player=(376,757), corner_timer=-0.01
[22:25:12] [ENEMY] [Enemy10] PATROL corner check: angle 2.0°
[22:25:12] [INFO] [BloodDecal] Blood puddle created at (878.29, 809.5164) (added to group)
[22:25:12] [INFO] [BloodDecal] Blood puddle created at (556.333, 787.8962) (added to group)
[22:25:12] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=2.0°, current=5.9°, player=(376,757), corner_timer=0.30
[22:25:12] [INFO] [BloodDecal] Blood puddle created at (890.3994, 789.2057) (added to group)
[22:25:12] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[22:25:12] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:25:12] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:25:12] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:25:12] [INFO] [Player.Grenade] Timer started, grenade created at (376.608, 757.84875)
[22:25:12] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:25:12] [INFO] [Player.Grenade] Step 1 complete! Drag: (605.1392, -170.51007)
[22:25:13] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.9°, player=(376,757), corner_timer=-0.01
[22:25:13] [ENEMY] [Enemy10] PATROL corner check: angle 1.0°
[22:25:13] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:25:13] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[22:25:13] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.0°, current=4.2°, player=(376,757), corner_timer=0.30
[22:25:13] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.0°, player=(388,757), corner_timer=-0.01
[22:25:13] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:25:13] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.6°, current=3.3°, player=(390,757), corner_timer=0.30
[22:25:13] [ENEMY] [Enemy3] Death animation completed
[22:25:13] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[22:25:13] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-129.0°, player=(455,755), corner_timer=-0.01
[22:25:13] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[22:25:13] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-131.3°, player=(459,754), corner_timer=0.30
[22:25:13] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:25:14] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=57.7°, current=58.6°, player=(511,726), corner_timer=0.00
[22:25:14] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[22:25:14] [ENEMY] [Enemy1] PURSUING corner check: angle -138.4°
[22:25:14] [ENEMY] [Enemy4] PURSUING corner check: angle -39.9°
[22:25:14] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.0°, current=175.9°, player=(537,713), corner_timer=-0.01
[22:25:14] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[22:25:14] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=178.1°, player=(540,711), corner_timer=0.30
[22:25:14] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:25:14] [INFO] [Player.Grenade.Simple] Throwing! Target: (258.53818, 384.46103), Distance: 442,2, Speed: 497,6, Friction: 280,0
[22:25:14] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -2,3425384
[22:25:14] [INFO] [GrenadeBase] Simple mode throw! Dir: (-0.697385, -0.716697), Speed: 497.6 (clamped from 497.6, max: 1186.5)
[22:25:14] [INFO] [FragGrenade] Grenade thrown (simple mode) - impact detection enabled
[22:25:14] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:25:14] [INFO] [Player.Grenade.Simple] Grenade thrown!
[22:25:14] [INFO] [Player.Grenade] State reset to IDLE
[22:25:14] [INFO] [Player.Grenade] State reset to IDLE
[22:25:14] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:25:14] [ENEMY] [Enemy2] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[22:25:14] [ENEMY] [Enemy2] EVADING_GRENADE started: escaping to (450.139, 607.1196)
[22:25:14] [ENEMY] [Enemy1] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=49.9°, current=0.2°, player=(576,696), corner_timer=0.10
[22:25:14] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
[22:25:14] [INFO] [Player.Grenade] Player rotation restored to 0
[22:25:14] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:25:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(422.5174, 575.6523), source=ENEMY (Enemy2), range=1469, listeners=9
[22:25:14] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[22:25:14] [INFO] [LastChance] Threat detected: Bullet
[22:25:14] [INFO] [LastChance] Triggering last chance effect!
[22:25:14] [INFO] [LastChance] Starting last chance effect:
[22:25:14] [INFO] [LastChance]   - Time will be frozen (except player)
[22:25:14] [INFO] [LastChance]   - Duration: 6.0 real seconds
[22:25:14] [INFO] [LastChance]   - Sepia intensity: 0.70
[22:25:14] [INFO] [LastChance]   - Brightness: 0.60
[22:25:14] [INFO] [LastChance] Pushed bullet Bullet from distance 132.2 to 200.0
[22:25:14] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[22:25:14] [INFO] [LastChance] Set player Player and all 24 children to PROCESS_MODE_ALWAYS
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[22:25:14] [INFO] [LastChance] Skipping player node: Player
[22:25:14] [INFO] [LastChance] Froze existing bullet casing: Casing
[22:25:14] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3318
[22:25:14] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3320
[22:25:14] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3323
[22:25:14] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3325
[22:25:14] [INFO] [LastChance] Froze existing grenade: FragGrenade
[22:25:14] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3372
[22:25:14] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[22:25:14] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[22:25:14] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[22:25:14] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:25:15] [INFO] [ScoreManager] Combo ended at 1. Max combo: 1
[22:25:16] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@3388
[22:25:16] [INFO] [LastChance] Registered frozen player bullet: @Area2D@3388
[22:25:16] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@3389
[22:25:16] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@3389
[22:25:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(600.1554, 893.0046), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:25:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
[22:25:17] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@3390
[22:25:17] [INFO] [LastChance] Registered frozen player bullet: @Area2D@3390
[22:25:17] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@3391
[22:25:17] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@3391
[22:25:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(600.1554, 917.8934), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:25:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
[22:25:17] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@3393
[22:25:17] [INFO] [LastChance] Registered frozen player bullet: @Area2D@3393
[22:25:17] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@3394
[22:25:17] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@3394
[22:25:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(600.1554, 929.1712), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:25:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
[22:25:17] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@3395
[22:25:17] [INFO] [LastChance] Registered frozen player bullet: @Area2D@3395
[22:25:17] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@3396
[22:25:17] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@3396
[22:25:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(600.1554, 929.8934), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:25:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
[22:25:17] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@3397
[22:25:17] [INFO] [LastChance] Registered frozen player bullet: @Area2D@3397
[22:25:17] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@3398
[22:25:17] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@3398
[22:25:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(600.1554, 929.8934), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:25:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
[22:25:17] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@3399
[22:25:17] [INFO] [LastChance] Registered frozen player bullet: @Area2D@3399
[22:25:17] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@3400
[22:25:17] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@3400
[22:25:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(607.1554, 929.8934), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:25:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
[22:25:18] [INFO] [BloodyFeet:Player] Blood ran out - no more footprints
[22:25:18] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 0.9)
[22:25:19] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@3414
[22:25:19] [INFO] [LastChance] Registered frozen player bullet: @Area2D@3414
[22:25:19] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@3415
[22:25:19] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@3415
[22:25:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(893.6335, 538.9885), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:25:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
[22:25:19] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@3417
[22:25:19] [INFO] [LastChance] Registered frozen player bullet: @Area2D@3417
[22:25:19] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@3418
[22:25:19] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@3418
[22:25:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(924.874, 533.2167), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:25:19] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=7
[22:25:19] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@3420
[22:25:19] [INFO] [LastChance] Registered frozen player bullet: @Area2D@3420
[22:25:19] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@3421
[22:25:19] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@3421
[22:25:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(955.048, 543.0668), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:25:19] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=7
[22:25:20] [INFO] [BloodyFeet:Player] Blood ran out - no more footprints
[22:25:20] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[22:25:20] [INFO] [LastChance] Ending last chance effect
[22:25:20] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=true
[22:25:20] [ENEMY] [Enemy1] Search mode: COMBAT -> SEARCHING at (581.4282, 694.8428)
[22:25:20] [ENEMY] [Enemy1] SEARCHING started: center=(581.4282, 694.8428), radius=100, waypoints=5
[22:25:20] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=true
[22:25:20] [ENEMY] [Enemy2] Search mode: EVADING_GRENADE -> SEARCHING at (581.4282, 694.8428)
[22:25:20] [ENEMY] [Enemy2] SEARCHING started: center=(581.4282, 694.8428), radius=100, waypoints=5
[22:25:20] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=true
[22:25:20] [ENEMY] [Enemy4] Search mode: PURSUING -> SEARCHING at (444.6776, 786.0273)
[22:25:20] [ENEMY] [Enemy4] SEARCHING started: center=(444.6776, 786.0273), radius=100, waypoints=5
[22:25:20] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[22:25:20] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[22:25:20] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[22:25:20] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[22:25:20] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[22:25:20] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[22:25:20] [INFO] [LastChance] Reset memory for 9 enemies (player teleport effect)
[22:25:20] [INFO] [LastChance] All process modes restored
[22:25:20] [INFO] [LastChance] Unfroze player bullet: @Area2D@3388
[22:25:20] [INFO] [LastChance] Unfroze player bullet: @Area2D@3390
[22:25:20] [INFO] [LastChance] Unfroze player bullet: @Area2D@3393
[22:25:20] [INFO] [LastChance] Unfroze player bullet: @Area2D@3395
[22:25:20] [INFO] [LastChance] Unfroze player bullet: @Area2D@3397
[22:25:20] [INFO] [LastChance] Unfroze player bullet: @Area2D@3399
[22:25:20] [INFO] [LastChance] Unfroze player bullet: @Area2D@3414
[22:25:20] [INFO] [LastChance] Unfroze player bullet: @Area2D@3417
[22:25:20] [INFO] [LastChance] Unfroze player bullet: @Area2D@3420
[22:25:20] [INFO] [LastChance] Unfroze grenade: FragGrenade
[22:25:20] [INFO] [LastChance] Unfroze bullet casing: Casing
[22:25:20] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3318
[22:25:20] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3320
[22:25:20] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3323
[22:25:20] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3325
[22:25:20] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3372
[22:25:20] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3389
[22:25:20] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3391
[22:25:20] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3394
[22:25:20] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3396
[22:25:20] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3398
[22:25:20] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3400
[22:25:20] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3415
[22:25:20] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3418
[22:25:20] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@3421
[22:25:20] [INFO] [LastChance] Starting visual effects fade-out over 400ms
[22:25:20] [ENEMY] [Enemy1] ROT_CHANGE: P1:visible -> P2:combat_state, state=SEARCHING, target=21.9°, current=62.0°, player=(1019,671), corner_timer=0.10
[22:25:20] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P2:combat_state, state=SEARCHING, target=8.9°, current=36.9°, player=(1019,671), corner_timer=0.00
[22:25:20] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 4/4 -> 3/4
[22:25:20] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[22:25:20] [INFO] [ImpactEffects] spawn_blood_effect called at (710.7904, 914.0677), dir=(1, 0), lethal=false
[22:25:20] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:20] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:25:20] [INFO] [ImpactEffects] Blood effect spawned at (710.7904, 914.0677) (scale=1)
[22:25:20] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 3/4 -> 2/4
[22:25:20] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[22:25:20] [INFO] [ImpactEffects] spawn_blood_effect called at (710.7904, 914.0677), dir=(1, 0), lethal=false
[22:25:20] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:20] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:25:20] [INFO] [ImpactEffects] Blood effect spawned at (710.7904, 914.0677) (scale=1)
[22:25:20] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 2/4 -> 1/4
[22:25:20] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[22:25:20] [INFO] [ImpactEffects] spawn_blood_effect called at (710.7904, 914.0677), dir=(1, 0), lethal=false
[22:25:20] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:20] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:25:20] [INFO] [ImpactEffects] Blood effect spawned at (710.7904, 914.0677) (scale=1)
[22:25:20] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 1/4 -> 0/4
[22:25:20] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[22:25:20] [INFO] [ImpactEffects] spawn_blood_effect called at (710.7904, 914.0677), dir=(1, 0), lethal=true
[22:25:20] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:20] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[22:25:20] [INFO] [ImpactEffects] Blood effect spawned at (710.7904, 914.0677) (scale=1.5)
[22:25:20] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
[22:25:20] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:25:20] [ENEMY] [Enemy4] [AllyDeath] Notified 1 enemies
[22:25:20] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 8)
[22:25:20] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[22:25:20] [ENEMY] [Enemy4] Death animation started with hit direction: (1, 0)
[22:25:20] [INFO] [GrenadeBase] Collision detected with Enemy2 (type: CharacterBody2D)
[22:25:20] [INFO] [FragGrenade] Impact detected! Body: Enemy2 (type: CharacterBody2D), triggering explosion
[22:25:20] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:25:20] [INFO] [GrenadeBase] EXPLODED at (473.7001, 599.1674)!
[22:25:20] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(473.7001, 599.1674), source=NEUTRAL (FragGrenade), range=2937, listeners=8
[22:25:20] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=6
[22:25:20] [ENEMY] [Enemy2] Hit taken, damage: 1, health: 3/3 -> 2/3
[22:25:20] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[22:25:20] [INFO] [ImpactEffects] spawn_blood_effect called at (439.8968, 591.8351), dir=(-0.977274, -0.211982), lethal=false
[22:25:20] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:20] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:25:20] [INFO] [ImpactEffects] Blood effect spawned at (439.8968, 591.8351) (scale=1)
[22:25:20] [ENEMY] [Enemy2] Hit taken, damage: 1, health: 2/3 -> 1/3
[22:25:20] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[22:25:20] [INFO] [ImpactEffects] spawn_blood_effect called at (439.8968, 591.8351), dir=(-0.977274, -0.211982), lethal=false
[22:25:20] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:20] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:25:20] [INFO] [ImpactEffects] Blood effect spawned at (439.8968, 591.8351) (scale=1)
[22:25:20] [ENEMY] [Enemy2] Hit taken, damage: 1, health: 1/3 -> 0/3
[22:25:20] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[22:25:20] [INFO] [ImpactEffects] spawn_blood_effect called at (439.8968, 591.8351), dir=(-0.977274, -0.211982), lethal=true
[22:25:20] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:20] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[22:25:20] [INFO] [ImpactEffects] Blood effect spawned at (439.8968, 591.8351) (scale=1.5)
[22:25:20] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
[22:25:20] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
[22:25:20] [ENEMY] [Enemy2] [AllyDeath] Notified 1 enemies
[22:25:20] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 7)
[22:25:20] [INFO] [DeathAnim] Started - Angle: -167.8 deg, Index: 0
[22:25:20] [ENEMY] [Enemy2] Death animation started with hit direction: (-0.977274, -0.211982)
[22:25:20] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 34.6
[22:25:20] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 3.2 degrees
[22:25:20] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 100.9 degrees
[22:25:20] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 188.3 degrees
[22:25:20] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 289.1 degrees
[22:25:20] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.1°, current=125.8°, player=(1005,671), corner_timer=-0.00
[22:25:20] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[22:25:20] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=128.1°, player=(1003,671), corner_timer=0.30
[22:25:20] [ENEMY] [Enemy1] SEARCHING corner check: angle -76.6°
[22:25:20] [INFO] [GrenadeBase] Collision detected with Room1_WallRight (type: StaticBody2D)
[22:25:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(607.1554, 929.89343), shooter_id=1089277527396, bullet_pos=(922.29156, 898.7958)
[22:25:20] [INFO] [Bullet] Using shooter_position, distance=316,6668
[22:25:20] [INFO] [Bullet] Distance to wall: 316,6668 (21,562426% of viewport)
[22:25:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:25:20] [INFO] [Bullet] Starting wall penetration at (922.29156, 898.7958)
[22:25:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(600.1554, 929.1712), shooter_id=1089277527396, bullet_pos=(914.33856, 968.75354)
[22:25:20] [INFO] [Bullet] Using shooter_position, distance=316,66675
[22:25:20] [INFO] [Bullet] Distance to wall: 316,66675 (21,562422% of viewport)
[22:25:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:25:20] [INFO] [Bullet] Raycast backward hit penetrating body at distance 24,55834
[22:25:20] [INFO] [Bullet] Body exited signal received for penetrating body
[22:25:20] [INFO] [Bullet] Exiting penetration at (960.43964, 895.0313) after traveling 33,333336 pixels through wall
[22:25:20] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:25:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(893.6335, 538.98846), shooter_id=1089277527396, bullet_pos=(514.6817, 596.782)
[22:25:20] [INFO] [Bullet] Using shooter_position, distance=383,33347
[22:25:20] [INFO] [Bullet] Distance to wall: 383,33347 (26,101881% of viewport)
[22:25:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:25:20] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[22:25:20] [ENEMY] [Enemy1] Player reloading: false -> true
[22:25:20] [ENEMY] [Enemy2] Player reloading: false -> true
[22:25:20] [ENEMY] [Enemy4] Player reloading: false -> true
[22:25:20] [ENEMY] [Enemy5] Player reloading: false -> true
[22:25:20] [ENEMY] [Enemy6] Player reloading: false -> true
[22:25:20] [ENEMY] [Enemy7] Player reloading: false -> true
[22:25:20] [ENEMY] [Enemy8] Player reloading: false -> true
[22:25:20] [ENEMY] [Enemy9] Player reloading: false -> true
[22:25:20] [ENEMY] [Enemy10] Player reloading: false -> true
[22:25:20] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(995.7915, 671.9338), source=PLAYER (Player), range=900, listeners=7
[22:25:20] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=4, self=0, below_threshold=3
[22:25:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(924.874, 533.2167), shooter_id=1089277527396, bullet_pos=(513.7762, 601.11127)
[22:25:20] [INFO] [Bullet] Using shooter_position, distance=416,66666
[22:25:20] [INFO] [Bullet] Distance to wall: 416,66666 (28,3716% of viewport)
[22:25:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:25:20] [INFO] [Bullet] Starting wall penetration at (513.7762, 601.11127)
[22:25:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(471.916, 622.4539), shooter_id=1085720758668, bullet_pos=(728.4299, 820.4309)
[22:25:20] [INFO] [Bullet] Using shooter_position, distance=324.028198242188
[22:25:20] [INFO] [Bullet] Distance to wall: 324.028198242188 (22.0636758536277% of viewport)
[22:25:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:25:20] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=685), can_see=false
[22:25:20] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=774), can_see=false
[22:25:20] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=980), can_see=false
[22:25:20] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=656), can_see=false
[22:25:20] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1193), can_see=false
[22:25:20] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1411), can_see=false
[22:25:20] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=944), can_see=false
[22:25:20] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:25:20] [INFO] [Bullet] Raycast backward hit penetrating body at distance 45,153408
[22:25:20] [INFO] [Bullet] Body exited signal received for penetrating body
[22:25:20] [INFO] [Bullet] Exiting penetration at (475.9552, 607.3576) after traveling 33,333332 pixels through wall
[22:25:20] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:25:20] [INFO] [Player.Reload.Anim] LeftArm: pos=(14.220193, 3.7777777), target=(4, 2), base=(24, 6)
[22:25:20] [INFO] [Player.Reload.Anim] RightArm: pos=(-3.3313048, 6), target=(-2, 6), base=(-2, 6)
[22:25:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(600.1554, 929.1712), shooter_id=1089277527396, bullet_pos=(770.2748, 996.2633)
[22:25:20] [INFO] [Bullet] Using shooter_position, distance=182,87143
[22:25:20] [INFO] [Bullet] Distance to wall: 182,87143 (12,452052% of viewport)
[22:25:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:25:20] [INFO] [Bullet] Starting wall penetration at (770.2748, 996.2633)
[22:25:20] [INFO] [Bullet] Body exited signal received for penetrating body
[22:25:20] [INFO] [Bullet] Exiting penetration at (737.533, 1002.5155) after traveling 0 pixels through wall
[22:25:20] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[22:25:20] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[22:25:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(471.916, 622.4539), shooter_id=1085720758668, bullet_pos=(911.1599, 678.0264)
[22:25:20] [INFO] [Bullet] Using shooter_position, distance=442.745422363281
[22:25:20] [INFO] [Bullet] Distance to wall: 442.745422363281 (30.1473499457588% of viewport)
[22:25:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:25:20] [INFO] [BloodDecal] Blood puddle created at (746.082, 914.9574) (added to group)
[22:25:20] [INFO] [BloodDecal] Blood puddle created at (789.2401, 896.6788) (added to group)
[22:25:20] [INFO] [BloodDecal] Blood puddle created at (769.2444, 903.629) (added to group)
[22:25:20] [INFO] [BloodDecal] Blood puddle created at (784.1388, 907.7045) (added to group)
[22:25:20] [INFO] [BloodDecal] Blood puddle created at (792.1761, 959.0886) (added to group)
[22:25:20] [INFO] [LastChance] Visual effects fade-out complete
[22:25:20] [INFO] [LastChance] Restored original colors to 5 player sprites
[22:25:20] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[22:25:20] [INFO] [BloodDecal] Blood puddle created at (771.5718, 930.0525) (added to group)
[22:25:20] [INFO] [BloodDecal] Blood puddle created at (402.0056, 614.5753) (added to group)
[22:25:20] [INFO] [BloodDecal] Blood puddle created at (367.9906, 594.5801) (added to group)
[22:25:20] [INFO] [BloodDecal] Blood puddle created at (788.7476, 961.2682) (added to group)
[22:25:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(955.048, 543.0668), shooter_id=1089277527396, bullet_pos=(47.158134, 669.6114)
[22:25:20] [INFO] [Bullet] Using shooter_position, distance=916,6665
[22:25:20] [INFO] [Bullet] Distance to wall: 916,6665 (62,417507% of viewport)
[22:25:20] [INFO] [Bullet] Distance-based penetration chance: 73,846245%
[22:25:20] [INFO] [Bullet] Starting wall penetration at (47.158134, 669.6114)
[22:25:20] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23,028664
[22:25:20] [INFO] [BloodDecal] Blood puddle created at (800.0631, 902.6567) (added to group)
[22:25:20] [INFO] [BloodDecal] Blood puddle created at (800.9812, 940.4133) (added to group)
[22:25:20] [INFO] [BloodDecal] Blood puddle created at (376.1658, 576.2776) (added to group)
[22:25:20] [INFO] [BloodDecal] Blood puddle created at (342.1413, 634.8231) (added to group)
[22:25:20] [INFO] [Bullet] Body exited signal received for penetrating body
[22:25:20] [INFO] [Bullet] Exiting penetration at (9.191826, 674.90326) after traveling 33,333336 pixels through wall
[22:25:20] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:25:20] [INFO] [BloodDecal] Blood puddle created at (386.7558, 613.0555) (added to group)
[22:25:20] [INFO] [BloodDecal] Blood puddle created at (371.1732, 630.4356) (added to group)
[22:25:20] [INFO] [BloodDecal] Blood puddle created at (796.9938, 902.9578) (added to group)
[22:25:20] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.5°, current=89.6°, player=(992,671), corner_timer=-0.01
[22:25:20] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[22:25:20] [INFO] [BloodDecal] Blood puddle created at (799.5023, 950.163) (added to group)
[22:25:20] [INFO] [BloodDecal] Blood puddle created at (821.6627, 885.55) (added to group)
[22:25:20] [INFO] [BloodDecal] Blood puddle created at (815.6749, 940.2913) (added to group)
[22:25:20] [INFO] [BloodDecal] Blood puddle created at (793.8636, 903.857) (added to group)
[22:25:20] [INFO] [BloodDecal] Blood puddle created at (799.0863, 986.1892) (added to group)
[22:25:20] [INFO] [BloodDecal] Blood puddle created at (792.6761, 906.6114) (added to group)
[22:25:20] [INFO] [BloodDecal] Blood puddle created at (380.4406, 577.2195) (added to group)
[22:25:21] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=91.9°, player=(992,671), corner_timer=0.30
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (800.4176, 918.4121) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (800.8835, 954.5944) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (835.4375, 913.0497) (added to group)
[22:25:21] [ENEMY] [Enemy1] SEARCHING corner check: angle 152.5°
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (329.3316, 595.3128) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (360.3661, 592.21) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (350.3908, 568.5559) (added to group)
[22:25:21] [INFO] [Player.Reload.Anim] Phase changed to: PullBolt (duration: 0,35s)
[22:25:21] [ENEMY] [Enemy1] Player reloading: true -> false
[22:25:21] [ENEMY] [Enemy2] Player reloading: true -> false
[22:25:21] [ENEMY] [Enemy4] Player reloading: true -> false
[22:25:21] [ENEMY] [Enemy5] Player reloading: true -> false
[22:25:21] [ENEMY] [Enemy6] Player reloading: true -> false
[22:25:21] [ENEMY] [Enemy7] Player reloading: true -> false
[22:25:21] [ENEMY] [Enemy8] Player reloading: true -> false
[22:25:21] [ENEMY] [Enemy9] Player reloading: true -> false
[22:25:21] [ENEMY] [Enemy10] Player reloading: true -> false
[22:25:21] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (834.6676, 947.1019) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (773.1304, 972.5472) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (792.5486, 987.2853) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (317.8264, 618.231) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (360.4871, 575.8222) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (311.4229, 625.1262) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (336.3926, 631.4691) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (848.0255, 893.4465) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (806.7175, 962.9701) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (343.8336, 553.3413) (added to group)
[22:25:21] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (848.8719, 955.7111) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (850.1649, 933.8575) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (777.5283, 932.6656) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (816.9536, 964.2068) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (305.8657, 599.223) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (817.3666, 995.8696) (added to group)
[22:25:21] [ENEMY] [Enemy4] Ragdoll activated
[22:25:21] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (874.5956, 965.414) (added to group)
[22:25:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(471.916, 622.4539), shooter_id=1085720758668, bullet_pos=(526.7784, 341.6989)
[22:25:21] [INFO] [Bullet] Using shooter_position, distance=286.065093994141
[22:25:21] [INFO] [Bullet] Distance to wall: 286.065093994141 (19.478698277385% of viewport)
[22:25:21] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:25:21] [ENEMY] [Enemy2] Ragdoll activated
[22:25:21] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (878.7809, 944.5312) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (320.9163, 595.4531) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (342.3398, 632.6148) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (276.9976, 686.2792) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (356.8, 670.0603) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (338.8604, 612.364) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (896.2441, 986.1506) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (877.4392, 926.3984) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (311.8369, 654.2632) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (842.1678, 932.4047) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (850.0414, 934.7084) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (840.5723, 979.246) (added to group)
[22:25:21] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (859.7598, 971.9532) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (355.3117, 647.21) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (310.9753, 655.1865) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (347.9101, 667.4952) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (848.1846, 985.2838) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (300.7978, 629.0004) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (338.7383, 589.5366) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (308.6278, 582.1672) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (835.8483, 963.7482) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (358.314, 626.9877) (added to group)
[22:25:21] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.5°, player=(992,671), corner_timer=-0.01
[22:25:21] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (257.0397, 659.1562) (added to group)
[22:25:21] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=91.8°, player=(992,671), corner_timer=0.30
[22:25:21] [ENEMY] [Enemy1] SEARCHING corner check: angle 152.5°
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (288.5913, 594.312) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (332.7213, 645.9421) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (268.9017, 640.8995) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (322.8452, 665.0187) (added to group)
[22:25:21] [INFO] [BloodDecal] Blood puddle created at (238.1888, 685.7061) (added to group)
[22:25:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(471.916, 622.4539), shooter_id=1085720758668, bullet_pos=(768.4156, 56.927)
[22:25:21] [INFO] [Bullet] Using shooter_position, distance=638.539428710938
[22:25:21] [INFO] [Bullet] Distance to wall: 638.539428710938 (43.4793238714014% of viewport)
[22:25:21] [INFO] [Bullet] Distance-based penetration chance: 95.9407888166983%
[22:25:21] [INFO] [Bullet] Starting wall penetration at (768.4156, 56.927)
[22:25:21] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[22:25:21] [INFO] [Bullet] Exiting penetration at (784.8951, 37.50568) after traveling 20.4708366394043 pixels through wall
[22:25:21] [INFO] [Bullet] Damage multiplier after penetration: 0.1125
[22:25:21] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:25:21] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.0°, current=89.4°, player=(992,671), corner_timer=-0.01
[22:25:21] [ENEMY] [Enemy7] PATROL corner check: angle 89.3°
[22:25:21] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.3°, current=91.7°, player=(992,671), corner_timer=0.30
[22:25:21] [ENEMY] [Enemy1] SEARCHING corner check: angle -56.0°
[22:25:21] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:25:21] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:25:21] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:21] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:25:21] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:25:21] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:25:21] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:25:21] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:25:21] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:25:21] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:25:21] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:21] [ENEMY] [Enemy1] Death animation component initialized
[22:25:21] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:21] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:25:21] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:25:21] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:25:21] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:21] [ENEMY] [Enemy2] Death animation component initialized
[22:25:21] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:21] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:25:21] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:25:21] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:25:21] [ENEMY] [Enemy3] Death animation component initialized
[22:25:21] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:21] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:25:21] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:25:21] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:25:21] [ENEMY] [Enemy4] Death animation component initialized
[22:25:21] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:21] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:25:21] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:25:21] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:25:21] [ENEMY] [Enemy5] Death animation component initialized
[22:25:21] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:21] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:25:21] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:25:21] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:25:21] [ENEMY] [Enemy6] Death animation component initialized
[22:25:21] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:21] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:25:21] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:25:21] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:25:21] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:21] [ENEMY] [Enemy7] Death animation component initialized
[22:25:21] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:21] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:25:21] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:25:21] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:25:21] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:21] [ENEMY] [Enemy8] Death animation component initialized
[22:25:21] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:21] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:25:21] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:25:21] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:25:21] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:21] [ENEMY] [Enemy9] Death animation component initialized
[22:25:21] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:21] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:25:21] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:25:21] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:25:21] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:21] [ENEMY] [Enemy10] Death animation component initialized
[22:25:21] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:21] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:25:21] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:25:21] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:25:21] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:25:21] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:25:21] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:25:21] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:25:21] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:25:21] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:25:21] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:25:21] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:25:21] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[22:25:21] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:25:21] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:25:21] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:25:21] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:25:21] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:25:21] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:25:21] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:25:21] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:25:21] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:25:21] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:25:21] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:25:21] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:25:21] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:25:21] [INFO] [ScoreManager] Level started with 10 enemies
[22:25:21] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:25:21] [INFO] [CinemaEffects] Found player node: Player
[22:25:21] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:25:21] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 8)
[22:25:21] [ENEMY] [Enemy1] Registered as sound listener
[22:25:21] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[22:25:21] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:25:21] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 9)
[22:25:21] [ENEMY] [Enemy2] Registered as sound listener
[22:25:21] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[22:25:21] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:25:21] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 10)
[22:25:21] [ENEMY] [Enemy3] Registered as sound listener
[22:25:21] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[22:25:21] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:25:21] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 11)
[22:25:21] [ENEMY] [Enemy4] Registered as sound listener
[22:25:21] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[22:25:21] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:25:21] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 12)
[22:25:21] [ENEMY] [Enemy5] Registered as sound listener
[22:25:21] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[22:25:21] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:25:21] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 13)
[22:25:21] [ENEMY] [Enemy6] Registered as sound listener
[22:25:21] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[22:25:21] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:25:21] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 14)
[22:25:21] [ENEMY] [Enemy7] Registered as sound listener
[22:25:21] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[22:25:21] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:25:21] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 15)
[22:25:21] [ENEMY] [Enemy8] Registered as sound listener
[22:25:21] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[22:25:21] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:25:21] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 16)
[22:25:21] [ENEMY] [Enemy9] Registered as sound listener
[22:25:21] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[22:25:21] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:25:21] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 17)
[22:25:21] [ENEMY] [Enemy10] Registered as sound listener
[22:25:21] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[22:25:21] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:25:21] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:21] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:21] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=236.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:21] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:21] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:21] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:21] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=213.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:21] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:22] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:25:22] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:25:22] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:25:22] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:25:22] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:25:22] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:25:22] [INFO] [LastChance] Found player: Player
[22:25:22] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:25:22] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:25:22] [INFO] [LastChance] Connected to player Died signal (C#)
[22:25:22] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:25:22] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:25:22] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:25:22] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:25:22] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:25:22] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (775.36566, 948.3575)
[22:25:22] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[22:25:22] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:25:22] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:25:22] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:25:22] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1045.1666)
[22:25:22] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:25:22] [INFO] [Player.Grenade] Step 1 complete! Drag: (401.19952, 8.383118)
[22:25:22] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:25:22] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[22:25:23] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:25:23] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[22:25:23] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,858), corner_timer=0.30
[22:25:23] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,858), corner_timer=0.30
[22:25:23] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(406,772), corner_timer=-0.02
[22:25:23] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:25:23] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(406,772), corner_timer=-0.02
[22:25:23] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[22:25:23] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(401,769), corner_timer=0.30
[22:25:23] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(401,769), corner_timer=0.30
[22:25:23] [INFO] [Player.Grenade.Simple] Throwing! Target: (935.2733, 734.2118), Distance: 565,7, Speed: 562,9, Friction: 280,0
[22:25:23] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,05182089
[22:25:23] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.998658, -0.051798), Speed: 562.9 (clamped from 562.9, max: 1186.5)
[22:25:23] [INFO] [FragGrenade] Grenade thrown (simple mode) - impact detection enabled
[22:25:23] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:25:23] [INFO] [Player.Grenade.Simple] Grenade thrown!
[22:25:23] [INFO] [Player.Grenade] State reset to IDLE
[22:25:23] [INFO] [Player.Grenade] State reset to IDLE
[22:25:23] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:25:23] [INFO] [Player.Grenade] Player rotation restored to 0
[22:25:24] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(315,772), corner_timer=-0.02
[22:25:24] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[22:25:24] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(312,775), corner_timer=0.30
[22:25:24] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:25:24] [INFO] [GrenadeBase] Collision detected with Enemy3 (type: CharacterBody2D)
[22:25:24] [INFO] [FragGrenade] Impact detected! Body: Enemy3 (type: CharacterBody2D), triggering explosion
[22:25:24] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:25:24] [INFO] [GrenadeBase] EXPLODED at (667.5979, 747.886)!
[22:25:24] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(667.5979, 747.886), source=NEUTRAL (FragGrenade), range=2937, listeners=17
[22:25:24] [INFO] [SoundPropagation] Cleaned up 7 invalid listeners
[22:25:24] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[22:25:24] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 3/3 -> 2/3
[22:25:24] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:25:24] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.997878, 0.065105), lethal=false
[22:25:24] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:24] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:25:24] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[22:25:24] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/3 -> 1/3
[22:25:24] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:25:24] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.997878, 0.065105), lethal=false
[22:25:24] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:24] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:25:24] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[22:25:24] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 1/3 -> 0/3
[22:25:24] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:25:24] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.997878, 0.065105), lethal=true
[22:25:24] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:24] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[22:25:24] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1.5)
[22:25:24] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[22:25:24] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:25:24] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[22:25:24] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[22:25:24] [INFO] [DeathAnim] Started - Angle: 3.7 deg, Index: 12
[22:25:24] [ENEMY] [Enemy3] Death animation started with hit direction: (0.997878, 0.065105)
[22:25:24] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 32.5
[22:25:24] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 16.8 degrees
[22:25:24] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 94.8 degrees
[22:25:24] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 169.3 degrees
[22:25:24] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 288.5 degrees
[22:25:24] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(294,865), corner_timer=-0.02
[22:25:24] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[22:25:24] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(294,871), corner_timer=0.30
[22:25:24] [INFO] [BloodDecal] Blood puddle created at (769.4424, 747.9316) (added to group)
[22:25:24] [INFO] [BloodDecal] Blood puddle created at (746.6531, 790.7359) (added to group)
[22:25:24] [INFO] [BloodDecal] Blood puddle created at (765.9878, 804.4564) (added to group)
[22:25:24] [INFO] [BloodDecal] Blood puddle created at (783.8953, 759.0073) (added to group)
[22:25:24] [INFO] [BloodDecal] Blood puddle created at (764.2392, 743.7169) (added to group)
[22:25:24] [INFO] [BloodDecal] Blood puddle created at (785.9536, 743.2661) (added to group)
[22:25:24] [INFO] [BloodDecal] Blood puddle created at (782.7585, 774.0682) (added to group)
[22:25:24] [INFO] [BloodDecal] Blood puddle created at (792.473, 775.4059) (added to group)
[22:25:24] [INFO] [BloodDecal] Blood puddle created at (776.9122, 755.4777) (added to group)
[22:25:24] [INFO] [BloodDecal] Blood puddle created at (753.4155, 789.7645) (added to group)
[22:25:24] [INFO] [BloodDecal] Blood puddle created at (804.5335, 753.0774) (added to group)
[22:25:24] [INFO] [BloodDecal] Blood puddle created at (797.4976, 820.3428) (added to group)
[22:25:24] [INFO] [BloodDecal] Blood puddle created at (780.9676, 801.6559) (added to group)
[22:25:24] [INFO] [BloodDecal] Blood puddle created at (767.4743, 814.5601) (added to group)
[22:25:24] [INFO] [BloodDecal] Blood puddle created at (814.9496, 850.8231) (added to group)
[22:25:24] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:25:24] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:24] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:25:24] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:25:24] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:25:24] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:25:24] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:25:24] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:25:24] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:25:24] [ENEMY] [Enemy1] Death animation component initialized
[22:25:24] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:24] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:25:24] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:25:24] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:25:24] [ENEMY] [Enemy2] Death animation component initialized
[22:25:24] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:24] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:25:24] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:25:24] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:25:24] [ENEMY] [Enemy3] Death animation component initialized
[22:25:24] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:24] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:25:24] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:25:24] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:25:24] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:24] [ENEMY] [Enemy4] Death animation component initialized
[22:25:24] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:24] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:25:24] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:25:24] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:25:24] [ENEMY] [Enemy5] Death animation component initialized
[22:25:24] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:24] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:25:24] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:25:24] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:25:24] [ENEMY] [Enemy6] Death animation component initialized
[22:25:24] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:24] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:25:24] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:25:24] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:25:24] [ENEMY] [Enemy7] Death animation component initialized
[22:25:24] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:24] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:25:24] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:25:24] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:25:24] [ENEMY] [Enemy8] Death animation component initialized
[22:25:24] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:24] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:25:24] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:25:24] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:25:24] [ENEMY] [Enemy9] Death animation component initialized
[22:25:24] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:24] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:25:24] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:25:24] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:25:24] [ENEMY] [Enemy10] Death animation component initialized
[22:25:24] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:24] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:25:24] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:25:24] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:25:24] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:25:24] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:25:24] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:25:24] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:25:24] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:25:24] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:25:24] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:25:24] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:25:24] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[22:25:24] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:25:24] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:25:24] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:25:24] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:25:24] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:25:24] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:25:24] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:25:24] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:25:24] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:25:24] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:25:24] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:25:24] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:25:24] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:25:24] [INFO] [ScoreManager] Level started with 10 enemies
[22:25:24] [INFO] [BloodDecal] Blood puddle created at (787.4824, 764.9095) (added to group)
[22:25:24] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:25:24] [INFO] [CinemaEffects] Found player node: Player
[22:25:24] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:25:24] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[22:25:24] [ENEMY] [Enemy1] Registered as sound listener
[22:25:24] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[22:25:24] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:25:24] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[22:25:24] [ENEMY] [Enemy2] Registered as sound listener
[22:25:24] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[22:25:24] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:25:24] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[22:25:24] [ENEMY] [Enemy3] Registered as sound listener
[22:25:24] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[22:25:24] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:25:24] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[22:25:24] [ENEMY] [Enemy4] Registered as sound listener
[22:25:24] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[22:25:24] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:25:24] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[22:25:24] [ENEMY] [Enemy5] Registered as sound listener
[22:25:24] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[22:25:24] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:25:24] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[22:25:24] [ENEMY] [Enemy6] Registered as sound listener
[22:25:24] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[22:25:24] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:25:24] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[22:25:24] [ENEMY] [Enemy7] Registered as sound listener
[22:25:24] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[22:25:24] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:25:24] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[22:25:24] [ENEMY] [Enemy8] Registered as sound listener
[22:25:24] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[22:25:24] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:25:24] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[22:25:24] [ENEMY] [Enemy9] Registered as sound listener
[22:25:24] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[22:25:24] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:25:24] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[22:25:24] [ENEMY] [Enemy10] Registered as sound listener
[22:25:24] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[22:25:24] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:25:24] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:24] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:24] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=236.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:24] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:24] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:24] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:24] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=213.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:24] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:24] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:25:24] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:25:24] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:25:24] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:25:24] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:25:24] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:25:24] [INFO] [LastChance] Found player: Player
[22:25:24] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:25:24] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:25:24] [INFO] [LastChance] Connected to player Died signal (C#)
[22:25:24] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:25:24] [INFO] [BloodDecal] Blood puddle created at (837.1673, 753.0004) (added to group)
[22:25:24] [INFO] [BloodDecal] Blood puddle created at (830.9587, 874.1252) (added to group)
[22:25:24] [INFO] [BloodDecal] Blood puddle created at (850.6177, 779.7485) (added to group)
[22:25:24] [INFO] [BloodDecal] Blood puddle created at (810.9602, 766.7537) (added to group)
[22:25:24] [INFO] [BloodDecal] Blood puddle created at (816.0252, 796.5841) (added to group)
[22:25:24] [INFO] [BloodDecal] Blood puddle created at (794.963, 800.8325) (added to group)
[22:25:24] [INFO] [BloodDecal] Blood puddle created at (857.8086, 766.8926) (added to group)
[22:25:24] [INFO] [BloodDecal] Blood puddle created at (871.4777, 869.7448) (added to group)
[22:25:24] [INFO] [BloodDecal] Blood puddle created at (863.9198, 815.0545) (added to group)
[22:25:24] [INFO] [BloodDecal] Blood puddle created at (843.2659, 878.5069) (added to group)
[22:25:24] [INFO] [BloodDecal] Blood puddle created at (865.6852, 888.6929) (added to group)
[22:25:24] [INFO] [BloodDecal] Blood puddle created at (813.2393, 853.0428) (added to group)
[22:25:24] [INFO] [BloodDecal] Blood puddle created at (843.4875, 815.7474) (added to group)
[22:25:24] [INFO] [BloodDecal] Blood puddle created at (867.0309, 759.3946) (added to group)
[22:25:24] [INFO] [BloodDecal] Blood puddle created at (824.881, 815.7381) (added to group)
[22:25:24] [INFO] [BloodDecal] Blood puddle created at (858.5549, 881.2103) (added to group)
[22:25:24] [INFO] [BloodDecal] Blood puddle created at (828.583, 840.3777) (added to group)
[22:25:24] [INFO] [BloodDecal] Blood puddle created at (865.0217, 824.7168) (added to group)
[22:25:25] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:25:25] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:25:25] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:25:26] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:25:26] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (811.3873, 916.82837)
[22:25:26] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[22:25:26] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:25:26] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:25:26] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:25:26] [INFO] [Player.Grenade] Timer started, grenade created at (450, 891.1666)
[22:25:26] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:25:26] [INFO] [Player.Grenade] Step 1 complete! Drag: (356.18225, 22.726868)
[22:25:26] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:25:26] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[22:25:26] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:25:26] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[22:25:26] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,819), corner_timer=0.30
[22:25:26] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,819), corner_timer=0.30
[22:25:26] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,728), corner_timer=-0.02
[22:25:26] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:25:26] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,728), corner_timer=-0.02
[22:25:26] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[22:25:26] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,728), corner_timer=0.30
[22:25:26] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,728), corner_timer=0.30
[22:25:26] [INFO] [Player.Grenade.Simple] Throwing! Target: (733.5252, 697.9834), Distance: 261,1, Speed: 382,4, Friction: 280,0
[22:25:26] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,105478056
[22:25:26] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.994442, -0.105283), Speed: 382.4 (clamped from 382.4, max: 1186.5)
[22:25:26] [INFO] [FragGrenade] Grenade thrown (simple mode) - impact detection enabled
[22:25:26] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:25:26] [INFO] [Player.Grenade.Simple] Grenade thrown!
[22:25:26] [INFO] [Player.Grenade] State reset to IDLE
[22:25:26] [INFO] [Player.Grenade] State reset to IDLE
[22:25:26] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:25:26] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[22:25:26] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (497.0015, 915.2292)
[22:25:26] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=173.4°, current=-94.9°, player=(450,728), corner_timer=0.00
[22:25:26] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,728), corner_timer=-0.02
[22:25:26] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[22:25:26] [INFO] [Player.Grenade] Player rotation restored to 0
[22:25:27] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,728), corner_timer=0.30
[22:25:27] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:25:27] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[22:25:27] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[22:25:27] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=146.3°, current=57.3°, player=(410,728), corner_timer=0.00
[22:25:27] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(410,728), corner_timer=-0.02
[22:25:27] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[22:25:27] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(404,728), corner_timer=0.30
[22:25:27] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(325,728), corner_timer=-0.02
[22:25:27] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[22:25:27] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(323,728), corner_timer=0.30
[22:25:27] [ENEMY] [Enemy4] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[22:25:27] [ENEMY] [Enemy4] EVADING_GRENADE started: escaping to (835.1942, 1035.273)
[22:25:27] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-98.0°, current=-117.6°, player=(320,728), corner_timer=0.00
[22:25:27] [INFO] [BloodyFeet:Enemy4] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[22:25:27] [ENEMY] [Enemy4] ROT_CHANGE: P4:velocity -> P1:visible, state=EVADING_GRENADE, target=-169.7°, current=-156.4°, player=(319,730), corner_timer=0.00
[22:25:27] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=-164.1°, current=146.3°, player=(319,733), corner_timer=0.00
[22:25:27] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[22:25:27] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(316,747), corner_timer=-0.02
[22:25:27] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[22:25:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(315.3021, 756.9233), source=PLAYER (AssaultRifle), range=1469, listeners=19
[22:25:27] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[22:25:27] [ENEMY] [Enemy1] Heard gunshot at (315.3021, 756.9233), source_type=0, intensity=0.02, distance=407
[22:25:27] [ENEMY] [Enemy2] Heard gunshot at (315.3021, 756.9233), source_type=0, intensity=0.05, distance=224
[22:25:27] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:25:28] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=87.8°, current=-157.5°, player=(315,750), corner_timer=0.00
[22:25:28] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=112.9°, current=45.0°, player=(315,750), corner_timer=0.00
[22:25:28] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(315,750), corner_timer=0.30
[22:25:28] [INFO] [SoundPropagation] Sound emitted: type=GRENADE_LANDING, pos=(740.7155, 697.2223), source=NEUTRAL (FragGrenade), range=112, listeners=10
[22:25:28] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=9, self=0, below_threshold=0
[22:25:28] [INFO] [GrenadeBase] Grenade landed at (740.7155, 697.2223)
[22:25:28] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:25:28] [INFO] [GrenadeBase] EXPLODED at (740.7155, 697.2223)!
[22:25:28] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(740.7155, 697.2223), source=NEUTRAL (FragGrenade), range=2937, listeners=10
[22:25:28] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[22:25:28] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 3/3 -> 2/3
[22:25:28] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[22:25:28] [INFO] [ImpactEffects] spawn_blood_effect called at (709.0667, 781.3346), dir=(-0.352164, 0.935938), lethal=false
[22:25:28] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:28] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:25:28] [INFO] [ImpactEffects] Wall found for blood splatter at (698.2808, 810) (dist=30 px)
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (698.2808, 809) (added to group)
[22:25:28] [INFO] [ImpactEffects] Blood effect spawned at (709.0667, 781.3346) (scale=1)
[22:25:28] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 2/3 -> 1/3
[22:25:28] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[22:25:28] [INFO] [ImpactEffects] spawn_blood_effect called at (709.0667, 781.3346), dir=(-0.352164, 0.935938), lethal=false
[22:25:28] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:28] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:25:28] [INFO] [ImpactEffects] Wall found for blood splatter at (698.2808, 810) (dist=30 px)
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (698.2808, 809) (added to group)
[22:25:28] [INFO] [ImpactEffects] Blood effect spawned at (709.0667, 781.3346) (scale=1)
[22:25:28] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 1/3 -> 0/3
[22:25:28] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[22:25:28] [INFO] [ImpactEffects] spawn_blood_effect called at (709.0667, 781.3346), dir=(-0.352164, 0.935938), lethal=true
[22:25:28] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:28] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[22:25:28] [INFO] [ImpactEffects] Wall found for blood splatter at (698.2808, 810) (dist=30 px)
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (698.2808, 809) (added to group)
[22:25:28] [INFO] [ImpactEffects] Blood effect spawned at (709.0667, 781.3346) (scale=1.5)
[22:25:28] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
[22:25:28] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:25:28] [ENEMY] [Enemy4] [AllyDeath] Notified 2 enemies
[22:25:28] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 9)
[22:25:28] [INFO] [DeathAnim] Started - Angle: 110.6 deg, Index: 19
[22:25:28] [ENEMY] [Enemy4] Death animation started with hit direction: (-0.352164, 0.935938)
[22:25:28] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 89.9
[22:25:28] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 1.9 degrees
[22:25:28] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 83.6 degrees
[22:25:28] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 171.6 degrees
[22:25:28] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 276.9 degrees
[22:25:28] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 4/4 -> 3/4
[22:25:28] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:25:28] [INFO] [ImpactEffects] spawn_blood_effect called at (472.1953, 776.4415), dir=(1, 0), lethal=false
[22:25:28] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:28] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:25:28] [INFO] [ImpactEffects] Blood effect spawned at (472.1953, 776.4415) (scale=1)
[22:25:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(472.1953, 776.4415), source=ENEMY (Enemy3), range=1469, listeners=9
[22:25:28] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[22:25:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(298.144, 778.7203), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:25:28] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[22:25:28] [INFO] [LastChance] Threat detected: Bullet
[22:25:28] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:25:28] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:25:28] [INFO] [Player] Spawning blood effect at (298.144, 772.72034), dir=(-0.9891539, 0.14688282), lethal=False (C#)
[22:25:28] [INFO] [ImpactEffects] spawn_blood_effect called at (298.144, 772.7203), dir=(-0.989154, 0.146883), lethal=false
[22:25:28] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:28] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:25:28] [INFO] [ImpactEffects] Blood effect spawned at (298.144, 772.7203) (scale=1)
[22:25:28] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[22:25:28] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[22:25:28] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[22:25:28] [INFO] [Player] Spawning blood effect at (288.90088, 782.0179), dir=(1, 0), lethal=True (C#)
[22:25:28] [INFO] [ImpactEffects] spawn_blood_effect called at (288.9009, 782.0179), dir=(1, 0), lethal=true
[22:25:28] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:28] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[22:25:28] [INFO] [ImpactEffects] Blood effect spawned at (288.9009, 782.0179) (scale=1.5)
[22:25:28] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[22:25:28] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[22:25:28] [INFO] [CinemaEffects] Player died - triggering death effects
[22:25:28] [INFO] [CinemaEffects] Death effects triggered - starting cigarette burn, expanding spots, and end of reel (top-right)
[22:25:28] [INFO] [PenultimateHit] Player died - ending penultimate effect
[22:25:28] [INFO] [LastChance] Player died
[22:25:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(472.1953, 776.4415), source=ENEMY (Enemy3), range=1469, listeners=9
[22:25:28] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[22:25:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(273.0996, 802.983), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:25:28] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=2
[22:25:28] [INFO] [LastChance] Threat detected: Bullet
[22:25:28] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:25:28] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:25:28] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (535.8391, 765.4258) (added to group)
[22:25:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(480.7285, 776.3917), source=ENEMY (Enemy3), range=1469, listeners=9
[22:25:28] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[22:25:28] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:25:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(243.9642, 817.6241), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:25:28] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=2
[22:25:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(298.144, 778.72034), shooter_id=1293875677444, bullet_pos=(915.78186, 683.07404)
[22:25:28] [INFO] [Bullet] Using shooter_position, distance=624,99976
[22:25:28] [INFO] [Bullet] Distance to wall: 624,99976 (42,55738% of viewport)
[22:25:28] [INFO] [Bullet] Distance-based penetration chance: 97,01639%
[22:25:28] [INFO] [Bullet] Starting wall penetration at (915.78186, 683.07404)
[22:25:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(490.503, 777.8716), source=ENEMY (Enemy3), range=1469, listeners=9
[22:25:28] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[22:25:28] [INFO] [Bullet] Raycast backward hit penetrating body at distance 17,874176
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (240.0566, 812.134) (added to group)
[22:25:28] [INFO] [Bullet] Body exited signal received for penetrating body
[22:25:28] [INFO] [Bullet] Exiting penetration at (953.66364, 677.2077) after traveling 33,333336 pixels through wall
[22:25:28] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:25:28] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[22:25:28] [INFO] [LastChance] Threat detected: @Area2D@4158
[22:25:28] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:25:28] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (232.6296, 837.2941) (added to group)
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (550.8967, 809.4664) (added to group)
[22:25:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(498.6787, 775.9211), source=ENEMY (Enemy3), range=1469, listeners=9
[22:25:28] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[22:25:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(209.9013, 820.3694), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:25:28] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=2
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (376.8688, 806.556) (added to group)
[22:25:28] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 3/4 -> 2/4
[22:25:28] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:25:28] [INFO] [ImpactEffects] spawn_blood_effect called at (500.6034, 775.8912), dir=(0.978705, 0.205271), lethal=false
[22:25:28] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:28] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:25:28] [INFO] [ImpactEffects] Blood effect spawned at (500.6034, 775.8912) (scale=1)
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (203.3572, 854.049) (added to group)
[22:25:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(414.8397, 793.3997), shooter_id=1290654452892, bullet_pos=(66.40776, 907.5905)
[22:25:28] [INFO] [Bullet] Using shooter_position, distance=366.666564941406
[22:25:28] [INFO] [Bullet] Distance to wall: 366.666564941406 (24.9670006472203% of viewport)
[22:25:28] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:25:28] [INFO] [Bullet] Starting wall penetration at (66.40776, 907.5905)
[22:25:28] [INFO] [Bullet] Raycast backward hit penetrating body at distance 2.12489128112793
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (367.1133, 822.3167) (added to group)
[22:25:28] [INFO] [BloodyFeet:Enemy3] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[22:25:28] [INFO] [Bullet] Max penetration distance exceeded: 66.6666641235352 >= 48
[22:25:28] [INFO] [Bullet] Body exited signal received for penetrating body
[22:25:28] [INFO] [Bullet] Exiting penetration at (-1.694859, 929.9095) after traveling 66.6666641235352 pixels through wall
[22:25:28] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (186.3256, 841.6658) (added to group)
[22:25:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(273.09964, 802.983), shooter_id=1293875677444, bullet_pos=(909.2355, 633.47217)
[22:25:28] [INFO] [Bullet] Using shooter_position, distance=658,3333
[22:25:28] [INFO] [Bullet] Distance to wall: 658,3333 (44,827126% of viewport)
[22:25:28] [INFO] [Bullet] Distance-based penetration chance: 94,36835%
[22:25:28] [INFO] [Bullet] Starting wall penetration at (909.2355, 633.47217)
[22:25:28] [INFO] [LastChance] Threat detected: @Area2D@4168
[22:25:28] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:25:28] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:25:28] [INFO] [Bullet] Raycast backward hit penetrating body at distance 10,634895
[22:25:28] [ENEMY] [Enemy4] Ragdoll activated
[22:25:28] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (354.2326, 788.4573) (added to group)
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (345.502, 807.2591) (added to group)
[22:25:28] [INFO] [Bullet] Body exited signal received for penetrating body
[22:25:28] [INFO] [Bullet] Exiting penetration at (946.2763, 623.6019) after traveling 33,333332 pixels through wall
[22:25:28] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:25:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(506.7157, 775.9337), source=ENEMY (Enemy3), range=1469, listeners=9
[22:25:28] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (620.4566, 819.1588) (added to group)
[22:25:28] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[22:25:28] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[22:25:28] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-129.0°, player=(190,814), corner_timer=-0.01
[22:25:28] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[22:25:28] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=-44.9°, current=43.3°, player=(187,814), corner_timer=0.00
[22:25:28] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-131.3°, player=(187,814), corner_timer=0.30
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (348.3608, 809.8845) (added to group)
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (403.8621, 811.3082) (added to group)
[22:25:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(426.5894, 794.3735), shooter_id=1290654452892, bullet_pos=(41.31923, 901.9231)
[22:25:28] [INFO] [Bullet] Using shooter_position, distance=399.999969482422
[22:25:28] [INFO] [Bullet] Distance to wall: 399.999969482422 (27.2367334571442% of viewport)
[22:25:28] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:25:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(181.1013, 820.3694), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:25:28] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=2
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (389.388, 835.5076) (added to group)
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (568.6142, 792.7529) (added to group)
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (201.7746, 868.2251) (added to group)
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (380.5848, 853.0513) (added to group)
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (407.2424, 851.4957) (added to group)
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (378.264, 853.5073) (added to group)
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (354.8076, 848.2183) (added to group)
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (371.4455, 801.9731) (added to group)
[22:25:28] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (394.0697, 781.237) (added to group)
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (181.3602, 830.4424) (added to group)
[22:25:28] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:25:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:28] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:25:28] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:25:28] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:25:28] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:25:28] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:25:28] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:25:28] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:25:28] [INFO] [CinemaEffects] Death effects reset
[22:25:28] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:28] [ENEMY] [Enemy1] Death animation component initialized
[22:25:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:28] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:25:28] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:25:28] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:25:28] [ENEMY] [Enemy2] Death animation component initialized
[22:25:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:28] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:25:28] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:25:28] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:25:28] [ENEMY] [Enemy3] Death animation component initialized
[22:25:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:28] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:25:28] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:25:28] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:25:28] [ENEMY] [Enemy4] Death animation component initialized
[22:25:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:28] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:25:28] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:25:28] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:25:28] [ENEMY] [Enemy5] Death animation component initialized
[22:25:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:28] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:25:28] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:25:28] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:25:28] [ENEMY] [Enemy6] Death animation component initialized
[22:25:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:28] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:25:28] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:25:28] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:25:28] [ENEMY] [Enemy7] Death animation component initialized
[22:25:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:28] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:25:28] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:25:28] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:25:28] [ENEMY] [Enemy8] Death animation component initialized
[22:25:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:28] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:25:28] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:25:28] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:25:28] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:28] [ENEMY] [Enemy9] Death animation component initialized
[22:25:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:28] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:25:28] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:25:28] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:25:28] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:28] [ENEMY] [Enemy10] Death animation component initialized
[22:25:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:28] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:25:28] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:25:28] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:25:28] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:25:28] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:25:28] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:25:28] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:25:28] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:25:28] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:25:28] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:25:28] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:25:28] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[22:25:28] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:25:28] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:25:28] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:25:28] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:25:28] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:25:28] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:25:28] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:25:28] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:25:28] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:25:28] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:25:28] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:25:28] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:25:28] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:25:28] [INFO] [ScoreManager] Level started with 10 enemies
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (438.6362, 905.1332) (added to group)
[22:25:28] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:25:28] [INFO] [CinemaEffects] Found player node: Player
[22:25:28] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:25:28] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[22:25:28] [ENEMY] [Enemy1] Registered as sound listener
[22:25:28] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[22:25:28] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:25:28] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[22:25:28] [ENEMY] [Enemy2] Registered as sound listener
[22:25:28] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[22:25:28] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:25:28] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[22:25:28] [ENEMY] [Enemy3] Registered as sound listener
[22:25:28] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[22:25:28] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:25:28] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[22:25:28] [ENEMY] [Enemy4] Registered as sound listener
[22:25:28] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[22:25:28] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:25:28] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[22:25:28] [ENEMY] [Enemy5] Registered as sound listener
[22:25:28] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[22:25:28] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:25:28] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[22:25:28] [ENEMY] [Enemy6] Registered as sound listener
[22:25:28] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[22:25:28] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:25:28] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[22:25:28] [ENEMY] [Enemy7] Registered as sound listener
[22:25:28] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[22:25:28] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:25:28] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[22:25:28] [ENEMY] [Enemy8] Registered as sound listener
[22:25:28] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[22:25:28] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:25:28] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[22:25:28] [ENEMY] [Enemy9] Registered as sound listener
[22:25:28] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[22:25:28] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:25:28] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[22:25:28] [ENEMY] [Enemy10] Registered as sound listener
[22:25:28] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[22:25:28] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:25:28] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:25:28] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:25:28] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:25:28] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:25:28] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:25:28] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:25:28] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:25:28] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:25:28] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:25:28] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:25:28] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:25:28] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:25:28] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:25:28] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:25:28] [INFO] [LastChance] Found player: Player
[22:25:28] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:25:28] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:25:28] [INFO] [LastChance] Connected to player Died signal (C#)
[22:25:28] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (108.7264, 849.4006) (added to group)
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (463.0278, 837.7683) (added to group)
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (445.6149, 824.3647) (added to group)
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (175.7306, 894.7869) (added to group)
[22:25:28] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:25:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:28] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:25:28] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:25:28] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:25:28] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:25:28] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:25:28] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:25:28] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:25:28] [ENEMY] [Enemy1] Death animation component initialized
[22:25:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:28] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:25:28] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:25:28] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:25:28] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:28] [ENEMY] [Enemy2] Death animation component initialized
[22:25:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:28] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:25:28] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:25:28] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:25:28] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:28] [ENEMY] [Enemy3] Death animation component initialized
[22:25:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:28] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:25:28] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:25:28] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:25:28] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:28] [ENEMY] [Enemy4] Death animation component initialized
[22:25:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:28] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:25:28] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:25:28] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:25:28] [ENEMY] [Enemy5] Death animation component initialized
[22:25:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:28] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:25:28] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:25:28] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:25:28] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:28] [ENEMY] [Enemy6] Death animation component initialized
[22:25:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:28] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:25:28] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:25:28] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:25:28] [ENEMY] [Enemy7] Death animation component initialized
[22:25:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:28] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:25:28] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:25:28] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:25:28] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:28] [ENEMY] [Enemy8] Death animation component initialized
[22:25:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:28] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:25:28] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:25:28] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:25:28] [ENEMY] [Enemy9] Death animation component initialized
[22:25:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:28] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:25:28] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:25:28] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:25:28] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:28] [ENEMY] [Enemy10] Death animation component initialized
[22:25:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:28] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:25:28] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:25:28] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:25:28] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:25:28] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:25:28] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:25:28] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:25:28] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:25:28] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:25:28] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:25:28] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:25:28] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[22:25:28] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:25:28] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:25:28] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:25:28] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:25:28] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:25:28] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:25:28] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:25:28] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:25:28] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:25:28] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:25:28] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:25:28] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:25:28] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:25:28] [INFO] [ScoreManager] Level started with 10 enemies
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (135.7041, 879.6175) (added to group)
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (198.8442, 915.8626) (added to group)
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (580.1324, 789.1731) (added to group)
[22:25:28] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:25:28] [INFO] [CinemaEffects] Found player node: Player
[22:25:28] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:25:28] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 20)
[22:25:28] [ENEMY] [Enemy1] Registered as sound listener
[22:25:28] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[22:25:28] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:25:28] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 21)
[22:25:28] [ENEMY] [Enemy2] Registered as sound listener
[22:25:28] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[22:25:28] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:25:28] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 22)
[22:25:28] [ENEMY] [Enemy3] Registered as sound listener
[22:25:28] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[22:25:28] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:25:28] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 23)
[22:25:28] [ENEMY] [Enemy4] Registered as sound listener
[22:25:28] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[22:25:28] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:25:28] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 24)
[22:25:28] [ENEMY] [Enemy5] Registered as sound listener
[22:25:28] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[22:25:28] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:25:28] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 25)
[22:25:28] [ENEMY] [Enemy6] Registered as sound listener
[22:25:28] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[22:25:28] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:25:28] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 26)
[22:25:28] [ENEMY] [Enemy7] Registered as sound listener
[22:25:28] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[22:25:28] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:25:28] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 27)
[22:25:28] [ENEMY] [Enemy8] Registered as sound listener
[22:25:28] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[22:25:28] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:25:28] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 28)
[22:25:28] [ENEMY] [Enemy9] Registered as sound listener
[22:25:28] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[22:25:28] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:25:28] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 29)
[22:25:28] [ENEMY] [Enemy10] Registered as sound listener
[22:25:28] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[22:25:28] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:25:28] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:25:28] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:25:28] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:25:28] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:25:28] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:25:28] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=225.0°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:25:28] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=157.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:25:28] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:25:28] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:25:28] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:25:28] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:25:28] [INFO] [LastChance] Found player: Player
[22:25:28] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:25:28] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:25:28] [INFO] [LastChance] Connected to player Died signal (C#)
[22:25:28] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (437.8517, 890.6981) (added to group)
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (498.9001, 888.8521) (added to group)
[22:25:28] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:25:28] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:25:28] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:25:28] [INFO] [BloodDecal] Blood puddle created at (407.0603, 927.5642) (added to group)
[22:25:29] [INFO] [BloodDecal] Blood puddle created at (405.4545, 907.179) (added to group)
[22:25:29] [INFO] [BloodDecal] Blood puddle created at (606.2814, 857.8954) (added to group)
[22:25:29] [INFO] [BloodDecal] Blood puddle created at (598.2466, 813.0203) (added to group)
[22:25:29] [INFO] [BloodDecal] Blood puddle created at (630.1383, 826.2955) (added to group)
[22:25:29] [INFO] [BloodDecal] Blood puddle created at (704.4985, 913.749) (added to group)
[22:25:29] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:25:29] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:25:29] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:25:29] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:25:29] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (516.78217, 1126.3657)
[22:25:29] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[22:25:29] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:25:29] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:25:29] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:25:29] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1138.6666)
[22:25:29] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:25:29] [INFO] [Player.Grenade] Step 1 complete! Drag: (144.50067, -3.503662)
[22:25:29] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:25:29] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[22:25:30] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[22:25:30] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=163.8°, current=123.7°, player=(450,822), corner_timer=0.00
[22:25:30] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[22:25:30] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=165.6°, current=-65.8°, player=(450,814), corner_timer=0.00
[22:25:30] [ENEMY] [Enemy4] Memory: high confidence (0.89) - transitioning to PURSUING
[22:25:30] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[22:25:30] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:25:30] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[22:25:30] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=-164.0°, current=-67.5°, player=(450,799), corner_timer=0.00
[22:25:30] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,799), corner_timer=0.30
[22:25:30] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,799), corner_timer=0.30
[22:25:30] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[22:25:30] [INFO] [BloodyFeet:Enemy4] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[22:25:30] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(392,778), corner_timer=-0.02
[22:25:30] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:25:30] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(392,778), corner_timer=-0.02
[22:25:30] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[22:25:30] [INFO] [Player.Grenade.Simple] Throwing! Target: (635.3125, 721.09326), Distance: 226,2, Speed: 355,9, Friction: 280,0
[22:25:30] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,22769135
[22:25:30] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.97419, -0.225729), Speed: 355.9 (clamped from 355.9, max: 1186.5)
[22:25:30] [INFO] [FragGrenade] Grenade thrown (simple mode) - impact detection enabled
[22:25:30] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:25:30] [INFO] [Player.Grenade.Simple] Grenade thrown!
[22:25:30] [INFO] [Player.Grenade] State reset to IDLE
[22:25:30] [INFO] [Player.Grenade] State reset to IDLE
[22:25:30] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:25:30] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(386,778), corner_timer=0.30
[22:25:30] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(386,778), corner_timer=0.30
[22:25:30] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[22:25:30] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (828.0483, 1023.464)
[22:25:30] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=EVADING_GRENADE, target=175.5°, current=-135.4°, player=(370,778), corner_timer=0.00
[22:25:30] [INFO] [Player.Grenade] Player rotation restored to 0
[22:25:30] [ENEMY] [Enemy4] PURSUING corner check: angle -94.0°
[22:25:31] [ENEMY] [Enemy2] Memory: high confidence (0.90) - transitioning to PURSUING
[22:25:31] [ENEMY] [Enemy2] State: IDLE -> PURSUING
[22:25:31] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=106.2°, current=-101.3°, player=(333,778), corner_timer=0.00
[22:25:31] [ENEMY] [Enemy2] PURSUING corner check: angle 29.0°
[22:25:31] [INFO] [GrenadeBase] Collision detected with Enemy3 (type: CharacterBody2D)
[22:25:31] [INFO] [FragGrenade] Impact detected! Body: Enemy3 (type: CharacterBody2D), triggering explosion
[22:25:31] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:25:31] [INFO] [GrenadeBase] EXPLODED at (525.7236, 735.906)!
[22:25:31] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(525.7236, 735.906), source=NEUTRAL (FragGrenade), range=2937, listeners=29
[22:25:31] [INFO] [SoundPropagation] Cleaned up 19 invalid listeners
[22:25:31] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=0, below_threshold=6
[22:25:31] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/2 -> 1/2
[22:25:31] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:25:31] [INFO] [ImpactEffects] spawn_blood_effect called at (536.012, 769.6878), dir=(0.291344, 0.956618), lethal=false
[22:25:31] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:31] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:25:31] [INFO] [ImpactEffects] Blood effect spawned at (536.012, 769.6878) (scale=1)
[22:25:31] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 1/2 -> 0/2
[22:25:31] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:25:31] [INFO] [ImpactEffects] spawn_blood_effect called at (536.012, 769.6878), dir=(0.291344, 0.956618), lethal=true
[22:25:31] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:31] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[22:25:31] [INFO] [ImpactEffects] Blood effect spawned at (536.012, 769.6878) (scale=1.5)
[22:25:31] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[22:25:31] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:25:31] [ENEMY] [Enemy2] [AllyDeath] Witnessed at (536.012, 769.6878), entering SEARCHING
[22:25:31] [ENEMY] [Enemy2] SEARCHING started: center=(536.012, 769.6878), radius=100, waypoints=5
[22:25:31] [ENEMY] [Enemy3] [AllyDeath] Notified 3 enemies
[22:25:31] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[22:25:31] [INFO] [DeathAnim] Started - Angle: 73.1 deg, Index: 16
[22:25:31] [ENEMY] [Enemy3] Death animation started with hit direction: (0.291344, 0.956618)
[22:25:31] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 35.3
[22:25:31] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 2/2 -> 1/2
[22:25:31] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[22:25:31] [INFO] [ImpactEffects] spawn_blood_effect called at (623.843, 894.9315), dir=(0.525097, 0.851043), lethal=false
[22:25:31] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:31] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:25:31] [INFO] [ImpactEffects] Blood effect spawned at (623.843, 894.9315) (scale=1)
[22:25:31] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 1/2 -> 0/2
[22:25:31] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[22:25:31] [INFO] [ImpactEffects] spawn_blood_effect called at (623.843, 894.9315), dir=(0.525097, 0.851043), lethal=true
[22:25:31] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:31] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[22:25:31] [INFO] [ImpactEffects] Blood effect spawned at (623.843, 894.9315) (scale=1.5)
[22:25:31] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
[22:25:31] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
[22:25:31] [ENEMY] [Enemy4] [AllyDeath] Notified 1 enemies
[22:25:31] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 8)
[22:25:31] [INFO] [DeathAnim] Started - Angle: 58.3 deg, Index: 15
[22:25:31] [ENEMY] [Enemy4] Death animation started with hit direction: (0.525097, 0.851043)
[22:25:31] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 186.9
[22:25:31] [INFO] [FragGrenade] Player found in blast radius at distance 207.6
[22:25:31] [INFO] [Player] Spawning blood effect at (322.57938, 778.64984), dir=(-0.97857255, 0.20590273), lethal=False (C#)
[22:25:31] [INFO] [ImpactEffects] spawn_blood_effect called at (322.5794, 778.6498), dir=(-0.978573, 0.205903), lethal=false
[22:25:31] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:31] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:25:31] [INFO] [ImpactEffects] Blood effect spawned at (322.5794, 778.6498) (scale=1)
[22:25:31] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[22:25:31] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[22:25:31] [INFO] [Player] Spawning blood effect at (322.57938, 778.64984), dir=(-0.97857255, 0.20590273), lethal=False (C#)
[22:25:31] [INFO] [ImpactEffects] spawn_blood_effect called at (322.5794, 778.6498), dir=(-0.978573, 0.205903), lethal=false
[22:25:31] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:31] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:25:31] [INFO] [ImpactEffects] Blood effect spawned at (322.5794, 778.6498) (scale=1)
[22:25:31] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[22:25:31] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[22:25:31] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[22:25:31] [INFO] [Player] Spawning blood effect at (322.57938, 778.64984), dir=(-0.97857255, 0.20590273), lethal=True (C#)
[22:25:31] [INFO] [ImpactEffects] spawn_blood_effect called at (322.5794, 778.6498), dir=(-0.978573, 0.205903), lethal=true
[22:25:31] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:31] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[22:25:31] [INFO] [ImpactEffects] Blood effect spawned at (322.5794, 778.6498) (scale=1.5)
[22:25:31] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[22:25:31] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[22:25:31] [INFO] [CinemaEffects] Player died - triggering death effects
[22:25:31] [INFO] [CinemaEffects] Death effects triggered - starting cigarette burn, expanding spots, and end of reel (top-right)
[22:25:31] [INFO] [PenultimateHit] Player died - ending penultimate effect
[22:25:31] [INFO] [LastChance] Player died
[22:25:31] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 207.6
[22:25:31] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 8.4 degrees
[22:25:31] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 103.2 degrees
[22:25:31] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 181.5 degrees
[22:25:31] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 266.9 degrees
[22:25:31] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:25:31] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(320,778), corner_timer=-0.02
[22:25:31] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[22:25:31] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(319,778), corner_timer=0.30
[22:25:31] [ENEMY] [Enemy7] Hit taken, damage: 1, health: 4/4 -> 3/4
[22:25:31] [ENEMY] [Enemy7] ImpactEffectsManager found, calling spawn_blood_effect
[22:25:31] [INFO] [ImpactEffects] spawn_blood_effect called at (1698.427, 899.8815), dir=(0.989281, 0.146023), lethal=false
[22:25:31] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:31] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:25:31] [INFO] [ImpactEffects] Blood effect spawned at (1698.427, 899.8815) (scale=1)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (266.9481, 801.685) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (529.9959, 844.1753) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (665.5676, 942.5227) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (653.5049, 950.0786) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (262.7875, 782.8956) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (245.2639, 800.02) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (686.2534, 981.7643) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (633.355, 974.9074) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (527.2631, 881.4634) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (685.4802, 968.0397) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (663.1886, 998.48) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (259.7203, 831.5775) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (583.9587, 853.5696) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (577.9047, 871.4264) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (667.8671, 990.4958) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (221.6779, 847.5183) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (220.7682, 844.3182) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (238.9363, 804.5996) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (594.6805, 869.2842) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (578.2968, 849.1714) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (524.9815, 867.7565) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (220.7666, 839.5222) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (237.0907, 783.2075) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (266.6931, 848.6527) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (226.2523, 875.6607) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (569.9785, 847.8941) (added to group)
[22:25:31] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(318,778), corner_timer=-0.02
[22:25:31] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (534.462, 861.4854) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (206.9026, 781.3947) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (246.316, 817.0566) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (232.7337, 873.9227) (added to group)
[22:25:31] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(318,778), corner_timer=0.30
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (567.4145, 900.0291) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (243.5704, 873.9487) (added to group)
[22:25:31] [ENEMY] [Enemy2] SEARCHING corner check: angle -54.6°
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (611.4867, 889.8027) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (212.4716, 864.2583) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (182.4021, 813.7184) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (197.9744, 796.3817) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (219.7444, 876.0096) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (195.6149, 872.2985) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (230.6661, 852.2916) (added to group)
[22:25:31] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:25:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:31] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:25:31] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:25:31] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:25:31] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:25:31] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:25:31] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:25:31] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:25:31] [INFO] [CinemaEffects] Death effects reset
[22:25:31] [ENEMY] [Enemy1] Death animation component initialized
[22:25:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:31] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:25:31] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:25:31] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:25:31] [ENEMY] [Enemy2] Death animation component initialized
[22:25:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:31] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:25:31] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:25:31] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:25:31] [ENEMY] [Enemy3] Death animation component initialized
[22:25:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:31] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:25:31] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:25:31] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:25:31] [ENEMY] [Enemy4] Death animation component initialized
[22:25:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:31] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:25:31] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:25:31] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:25:31] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:31] [ENEMY] [Enemy5] Death animation component initialized
[22:25:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:31] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:25:31] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:25:31] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:25:31] [ENEMY] [Enemy6] Death animation component initialized
[22:25:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:31] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:25:31] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:25:31] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:25:31] [ENEMY] [Enemy7] Death animation component initialized
[22:25:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:31] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:25:31] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:25:31] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:25:31] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:31] [ENEMY] [Enemy8] Death animation component initialized
[22:25:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:31] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:25:31] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:25:31] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:25:31] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:31] [ENEMY] [Enemy9] Death animation component initialized
[22:25:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:31] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:25:31] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:25:31] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:25:31] [ENEMY] [Enemy10] Death animation component initialized
[22:25:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:31] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:25:31] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:25:31] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:25:31] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:25:31] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:25:31] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:25:31] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:25:31] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:25:31] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:25:31] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:25:31] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:25:31] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[22:25:31] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:25:31] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:25:31] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:25:31] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:25:31] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:25:31] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:25:31] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:25:31] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:25:31] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:25:31] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:25:31] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:25:31] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:25:31] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:25:31] [INFO] [ScoreManager] Level started with 10 enemies
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (178.127, 831.8195) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (215.094, 841.1707) (added to group)
[22:25:31] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:25:31] [INFO] [CinemaEffects] Found player node: Player
[22:25:31] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:25:31] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 9)
[22:25:31] [ENEMY] [Enemy1] Registered as sound listener
[22:25:31] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[22:25:31] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:25:31] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 10)
[22:25:31] [ENEMY] [Enemy2] Registered as sound listener
[22:25:31] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[22:25:31] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:25:31] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 11)
[22:25:31] [ENEMY] [Enemy3] Registered as sound listener
[22:25:31] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[22:25:31] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:25:31] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 12)
[22:25:31] [ENEMY] [Enemy4] Registered as sound listener
[22:25:31] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[22:25:31] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:25:31] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 13)
[22:25:31] [ENEMY] [Enemy5] Registered as sound listener
[22:25:31] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[22:25:31] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:25:31] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 14)
[22:25:31] [ENEMY] [Enemy6] Registered as sound listener
[22:25:31] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[22:25:31] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:25:31] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 15)
[22:25:31] [ENEMY] [Enemy7] Registered as sound listener
[22:25:31] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[22:25:31] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:25:31] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 16)
[22:25:31] [ENEMY] [Enemy8] Registered as sound listener
[22:25:31] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[22:25:31] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:25:31] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 17)
[22:25:31] [ENEMY] [Enemy9] Registered as sound listener
[22:25:31] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[22:25:31] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:25:31] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 18)
[22:25:31] [ENEMY] [Enemy10] Registered as sound listener
[22:25:31] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[22:25:31] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:25:31] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:31] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:31] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:31] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:31] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:31] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=225.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:31] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:31] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:31] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:25:31] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:25:31] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:25:31] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:25:31] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:25:31] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:25:31] [INFO] [LastChance] Found player: Player
[22:25:31] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:25:31] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:25:31] [INFO] [LastChance] Connected to player Died signal (C#)
[22:25:31] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (627.6923, 937.5834) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (531.1959, 938.4938) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (588.6412, 916.7933) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (192.7515, 837.2224) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (1756.664, 918.6364) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (238.0164, 864.3312) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (577.5503, 932.5195) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (230.2661, 911.5332) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (198.7484, 894.5045) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (201.628, 918.6223) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (1767.505, 964.3356) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (541.8071, 963.2165) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (184.2702, 839.5355) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (1757.016, 954.1019) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (1783.433, 987.4324) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (551.7562, 938.8314) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (575.4269, 935.8496) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (185.9987, 858.1611) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (181.9143, 852.0605) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (593.6808, 974.7158) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (183.5523, 858.2025) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (164.4902, 870.2902) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (597.9363, 942.761) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (601.5726, 944.8239) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (224.9255, 872.975) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (542.7047, 980.942) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (127.066, 890.9067) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (622.5623, 984.7177) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (114.1628, 958.1259) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (181.1912, 892.7415) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (160.9063, 994.0314) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (158.0987, 886.1574) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (178.9286, 973.8593) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (1848.358, 894.9117) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (1810.358, 958.5546) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (1820.479, 973.9773) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (1827.446, 970.4089) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (1858.993, 943.1733) (added to group)
[22:25:31] [INFO] [BloodDecal] Blood puddle created at (1820.921, 1080.538) (added to group)
[22:25:32] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:25:32] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:25:32] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:25:32] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:25:32] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (567.56744, 1091.6744)
[22:25:32] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[22:25:32] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:25:32] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:25:32] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:25:32] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1116.6666)
[22:25:32] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:25:32] [INFO] [Player.Grenade] Step 1 complete! Drag: (170.61847, 8.808105)
[22:25:32] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:25:32] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[22:25:33] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:25:33] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[22:25:33] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,836), corner_timer=0.30
[22:25:33] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,836), corner_timer=0.30
[22:25:33] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,749), corner_timer=-0.02
[22:25:33] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:25:33] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,749), corner_timer=-0.02
[22:25:33] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[22:25:33] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,747), corner_timer=0.30
[22:25:33] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,747), corner_timer=0.30
[22:25:33] [INFO] [Player.Grenade.Simple] Throwing! Target: (744.88135, 681.2042), Distance: 279,3, Speed: 395,5, Friction: 280,0
[22:25:33] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,19825594
[22:25:33] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.980412, -0.19696), Speed: 395.5 (clamped from 395.5, max: 1186.5)
[22:25:33] [INFO] [FragGrenade] Grenade thrown (simple mode) - impact detection enabled
[22:25:33] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:25:33] [INFO] [Player.Grenade.Simple] Grenade thrown!
[22:25:33] [INFO] [Player.Grenade] State reset to IDLE
[22:25:33] [INFO] [Player.Grenade] State reset to IDLE
[22:25:33] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:25:33] [INFO] [Player.Grenade] Player rotation restored to 0
[22:25:33] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,740), corner_timer=-0.02
[22:25:33] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[22:25:33] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,740), corner_timer=0.30
[22:25:33] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:25:34] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,740), corner_timer=-0.02
[22:25:34] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[22:25:34] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,740), corner_timer=0.30
[22:25:34] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[22:25:34] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (535.9976, 947.5486)
[22:25:34] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=140.7°, current=-10.3°, player=(450,740), corner_timer=0.00
[22:25:34] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(450,740), corner_timer=-0.02
[22:25:34] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[22:25:34] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(450,740), corner_timer=0.30
[22:25:34] [INFO] [BloodyFeet:Enemy3] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[22:25:34] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[22:25:34] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[22:25:34] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=315.0°, current=124.1°, player=(450,740), corner_timer=0.00
[22:25:34] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(450,740), corner_timer=-0.02
[22:25:34] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[22:25:34] [INFO] [SoundPropagation] Sound emitted: type=GRENADE_LANDING, pos=(751.7804, 679.8182), source=NEUTRAL (FragGrenade), range=112, listeners=18
[22:25:34] [INFO] [SoundPropagation] Cleaned up 8 invalid listeners
[22:25:34] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=10, self=0, below_threshold=0
[22:25:34] [INFO] [GrenadeBase] Grenade landed at (751.7804, 679.8182)
[22:25:34] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:25:34] [INFO] [GrenadeBase] EXPLODED at (751.7804, 679.8182)!
[22:25:34] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(751.7804, 679.8182), source=NEUTRAL (FragGrenade), range=2937, listeners=10
[22:25:34] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[22:25:34] [INFO] [FragGrenade] Spawned shrapnel #1 at angle -8.3 degrees
[22:25:34] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 104.8 degrees
[22:25:34] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 180.6 degrees
[22:25:34] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 277.6 degrees
[22:25:34] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(450,740), corner_timer=0.30
[22:25:35] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:25:35] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(450,740), corner_timer=-0.02
[22:25:35] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[22:25:35] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(450,740), corner_timer=0.30
[22:25:35] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:25:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:35] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:25:35] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:25:35] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:25:35] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:25:35] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:25:35] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:25:35] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:25:35] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:35] [ENEMY] [Enemy1] Death animation component initialized
[22:25:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:35] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:25:35] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:25:35] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:25:35] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:35] [ENEMY] [Enemy2] Death animation component initialized
[22:25:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:35] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:25:35] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:25:35] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:25:35] [ENEMY] [Enemy3] Death animation component initialized
[22:25:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:35] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:25:35] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:25:35] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:25:35] [ENEMY] [Enemy4] Death animation component initialized
[22:25:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:35] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:25:35] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:25:35] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:25:35] [ENEMY] [Enemy5] Death animation component initialized
[22:25:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:35] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:25:35] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:25:35] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:25:35] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:35] [ENEMY] [Enemy6] Death animation component initialized
[22:25:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:35] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:25:35] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:25:35] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:25:35] [ENEMY] [Enemy7] Death animation component initialized
[22:25:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:35] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:25:35] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:25:35] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:25:35] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:35] [ENEMY] [Enemy8] Death animation component initialized
[22:25:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:35] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:25:35] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:25:35] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:25:35] [ENEMY] [Enemy9] Death animation component initialized
[22:25:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:35] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:25:35] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:25:35] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:25:35] [ENEMY] [Enemy10] Death animation component initialized
[22:25:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:35] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:25:35] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:25:35] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:25:35] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:25:35] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:25:35] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:25:35] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:25:35] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:25:35] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:25:35] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:25:35] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:25:35] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[22:25:35] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:25:35] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:25:35] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:25:35] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:25:35] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:25:35] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:25:35] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:25:35] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:25:35] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:25:35] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:25:35] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:25:35] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:25:35] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:25:35] [INFO] [ScoreManager] Level started with 10 enemies
[22:25:35] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:25:35] [INFO] [CinemaEffects] Found player node: Player
[22:25:35] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:25:35] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[22:25:35] [ENEMY] [Enemy1] Registered as sound listener
[22:25:35] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[22:25:35] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:25:35] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[22:25:35] [ENEMY] [Enemy2] Registered as sound listener
[22:25:35] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[22:25:35] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:25:35] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[22:25:35] [ENEMY] [Enemy3] Registered as sound listener
[22:25:35] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[22:25:35] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:25:35] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[22:25:35] [ENEMY] [Enemy4] Registered as sound listener
[22:25:35] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[22:25:35] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:25:35] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[22:25:35] [ENEMY] [Enemy5] Registered as sound listener
[22:25:35] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[22:25:35] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:25:35] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[22:25:35] [ENEMY] [Enemy6] Registered as sound listener
[22:25:35] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[22:25:35] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:25:35] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[22:25:35] [ENEMY] [Enemy7] Registered as sound listener
[22:25:35] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[22:25:35] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:25:35] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[22:25:35] [ENEMY] [Enemy8] Registered as sound listener
[22:25:35] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[22:25:35] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:25:35] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[22:25:35] [ENEMY] [Enemy9] Registered as sound listener
[22:25:35] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[22:25:35] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:25:35] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[22:25:35] [ENEMY] [Enemy10] Registered as sound listener
[22:25:35] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[22:25:35] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:25:35] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:35] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:35] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=281.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:35] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:35] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:35] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:35] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:35] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:35] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:25:35] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:25:35] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:25:35] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:25:35] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:25:35] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:25:35] [INFO] [LastChance] Found player: Player
[22:25:35] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:25:35] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:25:35] [INFO] [LastChance] Connected to player Died signal (C#)
[22:25:35] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:25:35] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:25:35] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:25:35] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:25:36] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:25:36] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (649.10565, 1106.8035)
[22:25:36] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[22:25:36] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:25:36] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:25:36] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:25:36] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1127.6666)
[22:25:36] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:25:36] [INFO] [Player.Grenade] Step 1 complete! Drag: (122.483154, 28.402832)
[22:25:36] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:25:36] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[22:25:36] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:25:36] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[22:25:37] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,847), corner_timer=0.30
[22:25:37] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,847), corner_timer=0.30
[22:25:37] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,746), corner_timer=-0.02
[22:25:37] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:25:37] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,746), corner_timer=-0.02
[22:25:37] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[22:25:37] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,742), corner_timer=0.30
[22:25:37] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,742), corner_timer=0.30
[22:25:37] [INFO] [Player.Grenade.Simple] Throwing! Target: (702.79034, 673.70953), Distance: 230,3, Speed: 359,1, Friction: 280,0
[22:25:37] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,2115518
[22:25:37] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.977706, -0.209977), Speed: 359.1 (clamped from 359.1, max: 1186.5)
[22:25:37] [INFO] [FragGrenade] Grenade thrown (simple mode) - impact detection enabled
[22:25:37] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:25:37] [INFO] [Player.Grenade.Simple] Grenade thrown!
[22:25:37] [INFO] [Player.Grenade] State reset to IDLE
[22:25:37] [INFO] [Player.Grenade] State reset to IDLE
[22:25:37] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:25:37] [INFO] [Player.Grenade] Player rotation restored to 0
[22:25:37] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,728), corner_timer=-0.02
[22:25:37] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[22:25:37] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,728), corner_timer=0.30
[22:25:37] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:25:37] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[22:25:37] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (640.0681, 1011.549)
[22:25:37] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=140.7°, current=-55.3°, player=(450,728), corner_timer=0.00
[22:25:38] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,728), corner_timer=-0.02
[22:25:38] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[22:25:38] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,728), corner_timer=0.30
[22:25:38] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[22:25:38] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[22:25:38] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(450,728), corner_timer=-0.02
[22:25:38] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[22:25:38] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=168.8°, current=76.2°, player=(450,728), corner_timer=0.00
[22:25:38] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(450,728), corner_timer=0.30
[22:25:38] [INFO] [SoundPropagation] Sound emitted: type=GRENADE_LANDING, pos=(708.9141, 672.3945), source=NEUTRAL (FragGrenade), range=112, listeners=20
[22:25:38] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[22:25:38] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=10, self=0, below_threshold=0
[22:25:38] [INFO] [GrenadeBase] Grenade landed at (708.9141, 672.3945)
[22:25:38] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:25:38] [INFO] [GrenadeBase] EXPLODED at (708.9141, 672.3945)!
[22:25:38] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(708.9141, 672.3945), source=NEUTRAL (FragGrenade), range=2937, listeners=10
[22:25:38] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[22:25:38] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 1.3 degrees
[22:25:38] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 78.2 degrees
[22:25:38] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 168.1 degrees
[22:25:38] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 272.5 degrees
[22:25:38] [INFO] [Player] Spawning blood effect at (450, 728.0001), dir=(-0.9783377, 0.20701529), lethal=False (C#)
[22:25:38] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 728.0001), dir=(-0.978338, 0.207015), lethal=false
[22:25:38] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:38] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:25:38] [INFO] [ImpactEffects] Blood effect spawned at (450, 728.0001) (scale=1)
[22:25:38] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[22:25:38] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[22:25:38] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(450,728), corner_timer=-0.02
[22:25:38] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[22:25:38] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(450,728), corner_timer=0.30
[22:25:38] [INFO] [BloodDecal] Blood puddle created at (370.0151, 726.8929) (added to group)
[22:25:38] [INFO] [BloodDecal] Blood puddle created at (394.609, 761.754) (added to group)
[22:25:38] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:25:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:38] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:25:38] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:25:38] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:25:38] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:25:38] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:25:38] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:25:38] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:25:38] [ENEMY] [Enemy1] Death animation component initialized
[22:25:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:38] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:25:38] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:25:38] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:25:38] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:38] [ENEMY] [Enemy2] Death animation component initialized
[22:25:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:38] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:25:38] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:25:38] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:25:38] [ENEMY] [Enemy3] Death animation component initialized
[22:25:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:38] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:25:38] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:25:38] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:25:38] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:38] [ENEMY] [Enemy4] Death animation component initialized
[22:25:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:38] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:25:38] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:25:38] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:25:38] [ENEMY] [Enemy5] Death animation component initialized
[22:25:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:38] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:25:38] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:25:38] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:25:38] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:38] [ENEMY] [Enemy6] Death animation component initialized
[22:25:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:38] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:25:38] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:25:38] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:25:38] [ENEMY] [Enemy7] Death animation component initialized
[22:25:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:38] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:25:38] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:25:38] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:25:38] [ENEMY] [Enemy8] Death animation component initialized
[22:25:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:38] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:25:38] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:25:38] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:25:38] [ENEMY] [Enemy9] Death animation component initialized
[22:25:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:38] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:25:38] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:25:38] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:25:38] [ENEMY] [Enemy10] Death animation component initialized
[22:25:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:38] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:25:38] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:25:38] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:25:38] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:25:38] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:25:38] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:25:38] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:25:38] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:25:38] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:25:38] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:25:38] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:25:38] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[22:25:38] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:25:38] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:25:38] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:25:38] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:25:38] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:25:38] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:25:38] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:25:38] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:25:38] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:25:38] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:25:38] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:25:38] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:25:38] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:25:38] [INFO] [ScoreManager] Level started with 10 enemies
[22:25:38] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:25:38] [INFO] [CinemaEffects] Found player node: Player
[22:25:38] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:25:38] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[22:25:38] [ENEMY] [Enemy1] Registered as sound listener
[22:25:38] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[22:25:38] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:25:38] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[22:25:38] [ENEMY] [Enemy2] Registered as sound listener
[22:25:38] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[22:25:38] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:25:38] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[22:25:38] [ENEMY] [Enemy3] Registered as sound listener
[22:25:38] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[22:25:38] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:25:38] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[22:25:38] [ENEMY] [Enemy4] Registered as sound listener
[22:25:38] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[22:25:38] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:25:38] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[22:25:38] [ENEMY] [Enemy5] Registered as sound listener
[22:25:38] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[22:25:38] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:25:38] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[22:25:38] [ENEMY] [Enemy6] Registered as sound listener
[22:25:38] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[22:25:38] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:25:38] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[22:25:38] [ENEMY] [Enemy7] Registered as sound listener
[22:25:38] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[22:25:38] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:25:38] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[22:25:38] [ENEMY] [Enemy8] Registered as sound listener
[22:25:38] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[22:25:38] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:25:38] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[22:25:38] [ENEMY] [Enemy9] Registered as sound listener
[22:25:38] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[22:25:38] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:25:38] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[22:25:38] [ENEMY] [Enemy10] Registered as sound listener
[22:25:38] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[22:25:38] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:25:38] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:38] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:38] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=281.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:38] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:38] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:38] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:38] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:38] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:38] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:25:38] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:25:38] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:25:38] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:25:38] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:25:38] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:25:38] [INFO] [LastChance] Found player: Player
[22:25:38] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:25:38] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:25:38] [INFO] [LastChance] Connected to player Died signal (C#)
[22:25:38] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:25:38] [INFO] [BloodDecal] Blood puddle created at (358.608, 813.8834) (added to group)
[22:25:38] [INFO] [BloodDecal] Blood puddle created at (370.2582, 814.9654) (added to group)
[22:25:38] [INFO] [BloodDecal] Blood puddle created at (323.1371, 835.2799) (added to group)
[22:25:39] [INFO] [BloodDecal] Blood puddle created at (331.9856, 864.8618) (added to group)
[22:25:39] [INFO] [BloodDecal] Blood puddle created at (304.2523, 859.0046) (added to group)
[22:25:39] [INFO] [BloodDecal] Blood puddle created at (340.7494, 790.2128) (added to group)
[22:25:39] [INFO] [BloodDecal] Blood puddle created at (263.2249, 943.5532) (added to group)
[22:25:39] [INFO] [BloodDecal] Blood puddle created at (338.3825, 919.1722) (added to group)
[22:25:39] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:25:39] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:25:39] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:25:39] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:25:39] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:25:39] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (775.7777, 1121.22)
[22:25:39] [INFO] [Player.Grenade] Step 1 failed: drag not far enough right (20,764038 < 30)
[22:25:39] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:25:39] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (794.79486, 1023.01904)
[22:25:40] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[22:25:40] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:25:40] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:25:40] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:25:40] [INFO] [Player.Grenade] Timer started, grenade created at (450, 940.6666)
[22:25:40] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:25:40] [INFO] [Player.Grenade] Step 1 complete! Drag: (484.87384, -193.21716)
[22:25:40] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:25:40] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[22:25:40] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:25:40] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[22:25:40] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,836), corner_timer=0.30
[22:25:40] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,836), corner_timer=0.30
[22:25:40] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,741), corner_timer=-0.02
[22:25:40] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:25:40] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,741), corner_timer=-0.02
[22:25:40] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[22:25:40] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,738), corner_timer=0.30
[22:25:40] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,738), corner_timer=0.30
[22:25:41] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,728), corner_timer=-0.02
[22:25:41] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[22:25:41] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,728), corner_timer=0.30
[22:25:41] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,728), corner_timer=-0.02
[22:25:41] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[22:25:41] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,728), corner_timer=0.30
[22:25:41] [INFO] [Player.Grenade.Simple] Throwing! Target: (713.4861, 670.4819), Distance: 243,2, Speed: 369,1, Friction: 280,0
[22:25:41] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,21495928
[22:25:41] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.976985, -0.213308), Speed: 369.1 (clamped from 369.1, max: 1186.5)
[22:25:41] [INFO] [FragGrenade] Grenade thrown (simple mode) - impact detection enabled
[22:25:41] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:25:41] [INFO] [Player.Grenade.Simple] Grenade thrown!
[22:25:41] [INFO] [Player.Grenade] State reset to IDLE
[22:25:41] [INFO] [Player.Grenade] State reset to IDLE
[22:25:41] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:25:41] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(450,728), corner_timer=-0.02
[22:25:41] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[22:25:41] [INFO] [Player.Grenade] Player rotation restored to 0
[22:25:41] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(450,728), corner_timer=0.30
[22:25:41] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:25:42] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(450,728), corner_timer=-0.02
[22:25:42] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[22:25:42] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(450,728), corner_timer=0.30
[22:25:42] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[22:25:42] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (611.2445, 996.1294)
[22:25:42] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=140.7°, current=-55.3°, player=(450,728), corner_timer=0.00
[22:25:42] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:25:42] [ENEMY] [Enemy4] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[22:25:42] [ENEMY] [Enemy4] EVADING_GRENADE started: escaping to (832.2267, 1001.247)
[22:25:42] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=67.0°, current=-90.1°, player=(450,728), corner_timer=0.00
[22:25:42] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[22:25:42] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[22:25:42] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=168.8°, current=81.3°, player=(450,728), corner_timer=0.00
[22:25:42] [ENEMY] [Enemy4] EVADING_GRENADE: Escaped to safe distance
[22:25:42] [ENEMY] [Enemy4] State: EVADING_GRENADE -> IDLE
[22:25:42] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(450,728), corner_timer=-0.02
[22:25:42] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[22:25:42] [ENEMY] [Enemy4] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=191.3°, current=-36.6°, player=(450,728), corner_timer=0.00
[22:25:42] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(450,728), corner_timer=0.30
[22:25:42] [INFO] [SoundPropagation] Sound emitted: type=GRENADE_LANDING, pos=(719.9155, 669.0779), source=NEUTRAL (FragGrenade), range=112, listeners=20
[22:25:42] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[22:25:42] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=10, self=0, below_threshold=0
[22:25:42] [INFO] [GrenadeBase] Grenade landed at (719.9155, 669.0779)
[22:25:42] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:25:42] [INFO] [GrenadeBase] EXPLODED at (719.9155, 669.0779)!
[22:25:42] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(719.9155, 669.0779), source=NEUTRAL (FragGrenade), range=2937, listeners=10
[22:25:42] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[22:25:42] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 9.1 degrees
[22:25:42] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 109.0 degrees
[22:25:42] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 177.1 degrees
[22:25:42] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 288.2 degrees
[22:25:42] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:25:42] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(450,728), corner_timer=-0.02
[22:25:42] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[22:25:43] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(450,728), corner_timer=0.30
[22:25:43] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:25:43] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(450,728), corner_timer=-0.02
[22:25:43] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[22:25:43] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(450,728), corner_timer=0.30
[22:25:43] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:25:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:43] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:25:43] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:25:43] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:25:43] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:25:43] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:25:43] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:25:43] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:25:43] [ENEMY] [Enemy1] Death animation component initialized
[22:25:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:43] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:25:43] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:25:43] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:25:43] [ENEMY] [Enemy2] Death animation component initialized
[22:25:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:43] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:25:43] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:25:43] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:25:43] [ENEMY] [Enemy3] Death animation component initialized
[22:25:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:43] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:25:43] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:25:43] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:25:43] [ENEMY] [Enemy4] Death animation component initialized
[22:25:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:43] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:25:43] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:25:43] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:25:43] [ENEMY] [Enemy5] Death animation component initialized
[22:25:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:43] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:25:43] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:25:43] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:25:43] [ENEMY] [Enemy6] Death animation component initialized
[22:25:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:43] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:25:43] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:25:43] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:25:43] [ENEMY] [Enemy7] Death animation component initialized
[22:25:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:43] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:25:43] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:25:43] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:25:43] [ENEMY] [Enemy8] Death animation component initialized
[22:25:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:43] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:25:43] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:25:43] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:25:43] [ENEMY] [Enemy9] Death animation component initialized
[22:25:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:43] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:25:43] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:25:43] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:25:43] [ENEMY] [Enemy10] Death animation component initialized
[22:25:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:43] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:25:43] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:25:43] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:25:43] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:25:43] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:25:43] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:25:43] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:25:43] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:25:43] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:25:43] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:25:43] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:25:43] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[22:25:43] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:25:43] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:25:43] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:25:43] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:25:43] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:25:43] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:25:43] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:25:43] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:25:43] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:25:43] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:25:43] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:25:43] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:25:43] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:25:43] [INFO] [ScoreManager] Level started with 10 enemies
[22:25:43] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:25:43] [INFO] [CinemaEffects] Found player node: Player
[22:25:43] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:25:43] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[22:25:43] [ENEMY] [Enemy1] Registered as sound listener
[22:25:43] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[22:25:43] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:25:43] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[22:25:43] [ENEMY] [Enemy2] Registered as sound listener
[22:25:43] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[22:25:43] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:25:43] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[22:25:43] [ENEMY] [Enemy3] Registered as sound listener
[22:25:43] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[22:25:43] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:25:43] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[22:25:43] [ENEMY] [Enemy4] Registered as sound listener
[22:25:43] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[22:25:43] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:25:43] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[22:25:43] [ENEMY] [Enemy5] Registered as sound listener
[22:25:43] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[22:25:43] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:25:43] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[22:25:43] [ENEMY] [Enemy6] Registered as sound listener
[22:25:43] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[22:25:43] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:25:43] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[22:25:43] [ENEMY] [Enemy7] Registered as sound listener
[22:25:43] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[22:25:43] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:25:43] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[22:25:43] [ENEMY] [Enemy8] Registered as sound listener
[22:25:43] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[22:25:43] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:25:43] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[22:25:43] [ENEMY] [Enemy9] Registered as sound listener
[22:25:43] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[22:25:43] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:25:43] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[22:25:43] [ENEMY] [Enemy10] Registered as sound listener
[22:25:43] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[22:25:43] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:25:43] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:43] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:43] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:43] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:43] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:43] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:43] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=213.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:43] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:43] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:25:43] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:25:43] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:25:43] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:25:43] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:25:43] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:25:43] [INFO] [LastChance] Found player: Player
[22:25:43] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:25:43] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:25:43] [INFO] [LastChance] Connected to player Died signal (C#)
[22:25:43] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:25:44] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:25:44] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:25:44] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:25:44] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:25:44] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (436.24057, 1116.2546)
[22:25:44] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[22:25:44] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:25:44] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:25:44] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:25:44] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1072.6666)
[22:25:44] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:25:44] [INFO] [Player.Grenade] Step 1 complete! Drag: (266.97482, -30.021484)
[22:25:44] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:25:44] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[22:25:44] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:25:44] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[22:25:44] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,869), corner_timer=0.30
[22:25:44] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,869), corner_timer=0.30
[22:25:45] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=164.4°, current=123.7°, player=(450,819), corner_timer=0.00
[22:25:45] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[22:25:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=20
[22:25:45] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[22:25:45] [ENEMY] [Enemy2] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.02, distance=350
[22:25:45] [ENEMY] [Enemy4] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.07, distance=186
[22:25:45] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:25:45] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-161.2°, current=-101.3°, player=(450,781), corner_timer=0.00
[22:25:45] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=77.5°, current=-157.5°, player=(450,775), corner_timer=0.00
[22:25:45] [INFO] [LastChance] Threat detected: Bullet
[22:25:45] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:25:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:25:45] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,764), corner_timer=-0.02
[22:25:45] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:25:45] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,764), corner_timer=-0.02
[22:25:45] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[22:25:45] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,759), corner_timer=0.30
[22:25:45] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,759), corner_timer=0.30
[22:25:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[22:25:45] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:25:45] [INFO] [LastChance] Threat detected: @Area2D@5890
[22:25:45] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:25:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:25:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[22:25:45] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:25:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(618.0324, 769.3737), shooter_id=1702384111510, bullet_pos=(38.64483, 837.1076)
[22:25:45] [INFO] [Bullet] Using shooter_position, distance=583.333374023438
[22:25:45] [INFO] [Bullet] Distance to wall: 583.333374023438 (39.7202420927463% of viewport)
[22:25:45] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:25:45] [INFO] [Bullet] Starting wall penetration at (38.64483, 837.1076)
[22:25:45] [ENEMY] [Enemy1] Memory: medium confidence (0.61) - transitioning to PURSUING
[22:25:45] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[22:25:45] [INFO] [Bullet] Raycast backward hit penetrating body at distance 39.9765815734863
[22:25:45] [INFO] [Bullet] Body exited signal received for penetrating body
[22:25:45] [INFO] [Bullet] Exiting penetration at (-7.706177, 842.5263) after traveling 41.6666717529297 pixels through wall
[22:25:45] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[22:25:45] [INFO] [LastChance] Threat detected: @Area2D@5892
[22:25:45] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:25:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:25:45] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=68.4°, current=-33.8°, player=(450,728), corner_timer=0.00
[22:25:45] [ENEMY] [Enemy1] PURSUING corner check: angle -50.9°
[22:25:45] [INFO] [Player.Grenade.Simple] Throwing! Target: (630.64417, 778.0278), Distance: 147,8, Speed: 287,7, Friction: 280,0
[22:25:45] [INFO] [Player.Grenade] Player rotated for throw: 0 -> 0,2700964
[22:25:45] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.963745, 0.266824), Speed: 287.7 (clamped from 287.7, max: 1186.5)
[22:25:45] [INFO] [FragGrenade] Grenade thrown (simple mode) - impact detection enabled
[22:25:45] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:25:45] [INFO] [Player.Grenade.Simple] Grenade thrown!
[22:25:45] [INFO] [Player.Grenade] State reset to IDLE
[22:25:45] [INFO] [Player.Grenade] State reset to IDLE
[22:25:45] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:25:45] [INFO] [Player] Spawning blood effect at (450, 728.0143), dir=(1, 0), lethal=False (C#)
[22:25:45] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 728.0143), dir=(1, 0), lethal=false
[22:25:45] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:45] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:25:45] [INFO] [ImpactEffects] Blood effect spawned at (450, 728.0143) (scale=1)
[22:25:45] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[22:25:45] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[22:25:45] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[22:25:45] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (916.046, 556.1543)
[22:25:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(616.373, 758.3442), shooter_id=1702384111510, bullet_pos=(33.69134, 730.7775)
[22:25:45] [INFO] [Bullet] Using shooter_position, distance=583.333374023438
[22:25:45] [INFO] [Bullet] Distance to wall: 583.333374023438 (39.7202420927463% of viewport)
[22:25:45] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:25:45] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=EVADING_GRENADE, target=-41.1°, current=-123.6°, player=(450,728), corner_timer=0.00
[22:25:45] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,728), corner_timer=-0.02
[22:25:45] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[22:25:45] [INFO] [Player.Grenade] Player rotation restored to 0
[22:25:45] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,728), corner_timer=0.30
[22:25:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(616.373, 758.3442), shooter_id=1702384111510, bullet_pos=(179.5057, 714.989)
[22:25:45] [INFO] [Bullet] Using shooter_position, distance=439.013305664063
[22:25:45] [INFO] [Bullet] Distance to wall: 439.013305664063 (29.8932232569515% of viewport)
[22:25:45] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:25:45] [INFO] [Bullet] Starting wall penetration at (179.5057, 714.989)
[22:25:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(742.0853, 914.0652), source=ENEMY (Enemy4), range=1469, listeners=10
[22:25:45] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:25:45] [INFO] [Bullet] Body exited signal received for penetrating body
[22:25:45] [INFO] [Bullet] Exiting penetration at (219.6875, 710.6381) after traveling 0 pixels through wall
[22:25:45] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[22:25:45] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[22:25:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(674.1799, 918.4756), shooter_id=1702719655367, bullet_pos=(507.7216, 910.1429)
[22:25:45] [INFO] [Bullet] Using shooter_position, distance=166.666687011719
[22:25:45] [INFO] [Bullet] Distance to wall: 166.666687011719 (11.3486411916412% of viewport)
[22:25:45] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:25:45] [INFO] [Bullet] Starting wall penetration at (507.7216, 910.1429)
[22:25:45] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[22:25:45] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=-145.0°, current=-164.2°, player=(450,728), corner_timer=0.00
[22:25:45] [INFO] [Bullet] Raycast backward hit penetrating body at distance 38.9353828430176
[22:25:45] [INFO] [Bullet] Body exited signal received for penetrating body
[22:25:45] [INFO] [Bullet] Exiting penetration at (461.1133, 907.8097) after traveling 41.6666717529297 pixels through wall
[22:25:45] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[22:25:45] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:25:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(715.698, 914.0654), source=ENEMY (Enemy4), range=1469, listeners=10
[22:25:45] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:25:45] [INFO] [BloodDecal] Blood puddle created at (496.1715, 752.7468) (added to group)
[22:25:45] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:25:45] [INFO] [LastChance] Threat detected: Bullet
[22:25:45] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[22:25:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:25:45] [ENEMY] [Enemy1] PURSUING corner check: angle -51.1°
[22:25:45] [INFO] [BloodDecal] Blood puddle created at (548.5342, 739.4996) (added to group)
[22:25:45] [INFO] [BloodDecal] Blood puddle created at (558.3497, 724.0956) (added to group)
[22:25:45] [INFO] [Player] Spawning blood effect at (450, 733.068), dir=(1, 0), lethal=False (C#)
[22:25:45] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 733.068), dir=(1, 0), lethal=false
[22:25:45] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:45] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:25:45] [INFO] [ImpactEffects] Blood effect spawned at (450, 733.068) (scale=1)
[22:25:45] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[22:25:45] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[22:25:45] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[22:25:45] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:25:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(715.698, 914.0654), source=ENEMY (Enemy4), range=1469, listeners=10
[22:25:45] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:25:45] [INFO] [BloodDecal] Blood puddle created at (499.7371, 735.5572) (added to group)
[22:25:45] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,740), corner_timer=-0.02
[22:25:45] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[22:25:45] [INFO] [LastChance] Threat detected: @Area2D@5913
[22:25:45] [INFO] [LastChance] Triggering last chance effect!
[22:25:45] [INFO] [LastChance] Starting last chance effect:
[22:25:45] [INFO] [LastChance]   - Time will be frozen (except player)
[22:25:45] [INFO] [LastChance]   - Duration: 6.0 real seconds
[22:25:45] [INFO] [LastChance]   - Sepia intensity: 0.70
[22:25:45] [INFO] [LastChance]   - Brightness: 0.60
[22:25:45] [INFO] [LastChance] Pushed bullet @Area2D@5913 from distance 123.3 to 200.0
[22:25:45] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[22:25:45] [INFO] [LastChance] Set player Player and all 24 children to PROCESS_MODE_ALWAYS
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[22:25:45] [INFO] [LastChance] Skipping player node: Player
[22:25:45] [INFO] [LastChance] Froze existing grenade: FragGrenade
[22:25:45] [INFO] [LastChance] Froze existing bullet casing: Casing
[22:25:45] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@5891
[22:25:45] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@5893
[22:25:45] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@5901
[22:25:45] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@5906
[22:25:45] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@5914
[22:25:45] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[22:25:45] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[22:25:45] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[22:25:45] [INFO] [BloodDecal] Blood puddle created at (522.1452, 740.961) (added to group)
[22:25:46] [INFO] [BloodDecal] Blood puddle created at (540.1102, 743.8045) (added to group)
[22:25:46] [INFO] [BloodDecal] Blood puddle created at (635.7296, 870.4771) (added to group)
[22:25:46] [INFO] [BloodDecal] Blood puddle created at (559.4709, 765.68) (added to group)
[22:25:46] [INFO] [BloodDecal] Blood puddle created at (613.7414, 871.6412) (added to group)
[22:25:46] [INFO] [BloodDecal] Blood puddle created at (548.6885, 805.3479) (added to group)
[22:25:46] [INFO] [BloodDecal] Blood puddle created at (529.1137, 795.2843) (added to group)
[22:25:46] [INFO] [BloodDecal] Blood puddle created at (565.9391, 801.4201) (added to group)
[22:25:46] [INFO] [BloodDecal] Blood puddle created at (538.7828, 755.6735) (added to group)
[22:25:46] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:25:46] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:46] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:25:46] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:25:46] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:25:46] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:25:46] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:25:46] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:25:46] [INFO] [LastChance] Ending last chance effect
[22:25:46] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=false
[22:25:46] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=false
[22:25:46] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=false
[22:25:46] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=false
[22:25:46] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[22:25:46] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[22:25:46] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[22:25:46] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[22:25:46] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[22:25:46] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[22:25:46] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[22:25:46] [INFO] [LastChance] All process modes restored
[22:25:46] [INFO] [LastChance] Starting visual effects fade-out over 400ms
[22:25:46] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:25:46] [ENEMY] [Enemy1] Death animation component initialized
[22:25:46] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:46] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:25:46] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:25:46] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:25:46] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:46] [ENEMY] [Enemy2] Death animation component initialized
[22:25:46] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:46] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:25:46] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:25:46] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:25:46] [ENEMY] [Enemy3] Death animation component initialized
[22:25:46] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:46] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:25:46] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:25:46] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:25:46] [ENEMY] [Enemy4] Death animation component initialized
[22:25:46] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:46] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:25:46] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:25:46] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:25:46] [ENEMY] [Enemy5] Death animation component initialized
[22:25:46] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:46] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:25:46] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:25:46] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:25:46] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:46] [ENEMY] [Enemy6] Death animation component initialized
[22:25:46] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:46] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:25:46] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:25:46] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:25:46] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:46] [ENEMY] [Enemy7] Death animation component initialized
[22:25:46] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:46] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:25:46] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:25:46] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:25:46] [ENEMY] [Enemy8] Death animation component initialized
[22:25:46] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:46] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:25:46] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:25:46] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:25:46] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:46] [ENEMY] [Enemy9] Death animation component initialized
[22:25:46] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:46] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:25:46] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:25:46] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:25:46] [ENEMY] [Enemy10] Death animation component initialized
[22:25:46] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:46] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:25:46] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:25:46] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:25:46] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:25:46] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:25:46] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:25:46] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:25:46] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:25:46] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:25:46] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:25:46] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:25:46] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[22:25:46] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:25:46] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:25:46] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:25:46] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:25:46] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:25:46] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:25:46] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:25:46] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:25:46] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:25:46] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:25:46] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:25:46] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:25:46] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:25:46] [INFO] [ScoreManager] Level started with 10 enemies
[22:25:46] [INFO] [BloodDecal] Blood puddle created at (569.1727, 786.9703) (added to group)
[22:25:46] [INFO] [BloodDecal] Blood puddle created at (594.3147, 743.8135) (added to group)
[22:25:46] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:25:46] [INFO] [CinemaEffects] Found player node: Player
[22:25:46] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:25:46] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[22:25:46] [ENEMY] [Enemy1] Registered as sound listener
[22:25:46] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[22:25:46] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:25:46] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[22:25:46] [ENEMY] [Enemy2] Registered as sound listener
[22:25:46] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[22:25:46] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:25:46] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[22:25:46] [ENEMY] [Enemy3] Registered as sound listener
[22:25:46] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[22:25:46] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:25:46] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[22:25:46] [ENEMY] [Enemy4] Registered as sound listener
[22:25:46] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[22:25:46] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:25:46] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[22:25:46] [ENEMY] [Enemy5] Registered as sound listener
[22:25:46] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[22:25:46] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:25:46] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[22:25:46] [ENEMY] [Enemy6] Registered as sound listener
[22:25:46] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[22:25:46] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:25:46] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[22:25:46] [ENEMY] [Enemy7] Registered as sound listener
[22:25:46] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[22:25:46] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:25:46] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[22:25:46] [ENEMY] [Enemy8] Registered as sound listener
[22:25:46] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[22:25:46] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:25:46] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[22:25:46] [ENEMY] [Enemy9] Registered as sound listener
[22:25:46] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[22:25:46] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:25:46] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[22:25:46] [ENEMY] [Enemy10] Registered as sound listener
[22:25:46] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[22:25:46] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:25:46] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:46] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:46] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=236.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:46] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:46] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:46] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:46] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:46] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:46] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:25:46] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:25:46] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:25:46] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:25:46] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:25:46] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:25:46] [INFO] [LastChance] Found player: Player
[22:25:46] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:25:46] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:25:46] [INFO] [LastChance] Connected to player Died signal (C#)
[22:25:46] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:25:46] [INFO] [BloodDecal] Blood puddle created at (611.696, 803.8914) (added to group)
[22:25:47] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:25:47] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[22:25:47] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,964), corner_timer=0.30
[22:25:47] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,964), corner_timer=0.30
[22:25:48] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,860), corner_timer=-0.02
[22:25:48] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:25:48] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,860), corner_timer=-0.02
[22:25:48] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[22:25:48] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,856), corner_timer=0.30
[22:25:48] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,856), corner_timer=0.30
[22:25:48] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:25:48] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:25:48] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:25:48] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:25:48] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (533.10645, 815.6421)
[22:25:48] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[22:25:48] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:25:48] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:25:48] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:25:48] [INFO] [Player.Grenade] Timer started, grenade created at (450, 819.38885)
[22:25:48] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:25:48] [INFO] [Player.Grenade] Step 1 complete! Drag: (354.07245, 41.622803)
[22:25:48] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:25:48] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[22:25:48] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,819), corner_timer=-0.02
[22:25:48] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[22:25:48] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,819), corner_timer=0.30
[22:25:48] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,816), corner_timer=-0.02
[22:25:48] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[22:25:48] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,814), corner_timer=0.30
[22:25:49] [INFO] [Player.Grenade.Simple] Throwing! Target: (859.79083, 737.50073), Distance: 407,7, Speed: 477,8, Friction: 280,0
[22:25:49] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,09004403
[22:25:49] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.995949, -0.089922), Speed: 477.8 (clamped from 477.8, max: 1186.5)
[22:25:49] [INFO] [FragGrenade] Grenade thrown (simple mode) - impact detection enabled
[22:25:49] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:25:49] [INFO] [Player.Grenade.Simple] Grenade thrown!
[22:25:49] [INFO] [Player.Grenade] State reset to IDLE
[22:25:49] [INFO] [Player.Grenade] State reset to IDLE
[22:25:49] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:25:49] [INFO] [Player.Grenade] Player rotation restored to 0
[22:25:49] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(450,759), corner_timer=-0.02
[22:25:49] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[22:25:49] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(450,759), corner_timer=0.30
[22:25:49] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:25:49] [INFO] [GrenadeBase] Collision detected with Enemy3 (type: CharacterBody2D)
[22:25:49] [INFO] [FragGrenade] Impact detected! Body: Enemy3 (type: CharacterBody2D), triggering explosion
[22:25:49] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:25:49] [INFO] [GrenadeBase] EXPLODED at (668.1584, 754.8659)!
[22:25:49] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(668.1584, 754.8659), source=NEUTRAL (FragGrenade), range=2937, listeners=20
[22:25:49] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[22:25:49] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[22:25:49] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 4/4 -> 3/4
[22:25:49] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:25:49] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.988524, -0.151062), lethal=false
[22:25:49] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:49] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:25:49] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[22:25:49] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 3/4 -> 2/4
[22:25:49] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:25:49] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.988524, -0.151062), lethal=false
[22:25:49] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:49] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:25:49] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[22:25:49] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/4 -> 1/4
[22:25:49] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:25:49] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.988524, -0.151062), lethal=false
[22:25:49] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:49] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:25:49] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[22:25:49] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 1/4 -> 0/4
[22:25:49] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:25:49] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.988524, -0.151062), lethal=true
[22:25:49] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:49] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[22:25:49] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1.5)
[22:25:49] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[22:25:49] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:25:49] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[22:25:49] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[22:25:49] [INFO] [DeathAnim] Started - Angle: -8.7 deg, Index: 11
[22:25:49] [ENEMY] [Enemy3] Death animation started with hit direction: (0.988524, -0.151062)
[22:25:49] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 32.2
[22:25:49] [INFO] [FragGrenade] Player found in blast radius at distance 221.1
[22:25:49] [INFO] [Player] Spawning blood effect at (450, 791.05554), dir=(-0.9865184, 0.16365056), lethal=False (C#)
[22:25:49] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 791.0555), dir=(-0.986518, 0.163651), lethal=false
[22:25:49] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:49] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:25:49] [INFO] [ImpactEffects] Blood effect spawned at (450, 791.0555) (scale=1)
[22:25:49] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[22:25:49] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[22:25:49] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[22:25:49] [INFO] [Player] Spawning blood effect at (450, 791.05554), dir=(-0.9865184, 0.16365056), lethal=True (C#)
[22:25:49] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 791.0555), dir=(-0.986518, 0.163651), lethal=true
[22:25:49] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:49] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[22:25:49] [INFO] [ImpactEffects] Blood effect spawned at (450, 791.0555) (scale=1.5)
[22:25:49] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[22:25:49] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[22:25:49] [INFO] [CinemaEffects] Player died - triggering death effects
[22:25:49] [INFO] [CinemaEffects] Death effects triggered - starting cigarette burn, expanding spots, and end of reel (top-right)
[22:25:49] [INFO] [PenultimateHit] Player died - ending penultimate effect
[22:25:49] [INFO] [LastChance] Player died
[22:25:49] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 221.1
[22:25:49] [INFO] [FragGrenade] Spawned shrapnel #1 at angle -3.8 degrees
[22:25:49] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 98.4 degrees
[22:25:49] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 178.3 degrees
[22:25:49] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 267.9 degrees
[22:25:49] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(450,806), corner_timer=-0.02
[22:25:49] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[22:25:49] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(450,812), corner_timer=0.30
[22:25:49] [ENEMY] [Enemy2] Hit taken, damage: 1, health: 4/4 -> 3/4
[22:25:49] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[22:25:49] [INFO] [ImpactEffects] spawn_blood_effect called at (400, 550), dir=(-0.948666, -0.316279), lethal=false
[22:25:49] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:49] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:25:49] [INFO] [ImpactEffects] Blood effect spawned at (400, 550) (scale=1)
[22:25:49] [INFO] [BloodDecal] Blood puddle created at (754.8243, 729.6254) (added to group)
[22:25:49] [INFO] [BloodDecal] Blood puddle created at (403.4544, 803.5827) (added to group)
[22:25:49] [INFO] [BloodDecal] Blood puddle created at (790.0381, 740.2833) (added to group)
[22:25:49] [INFO] [BloodDecal] Blood puddle created at (388.419, 837.6903) (added to group)
[22:25:49] [INFO] [BloodDecal] Blood puddle created at (393.0575, 821.0581) (added to group)
[22:25:49] [INFO] [BloodDecal] Blood puddle created at (400.1322, 803.4262) (added to group)
[22:25:49] [INFO] [BloodDecal] Blood puddle created at (772.5031, 737.9719) (added to group)
[22:25:49] [INFO] [BloodDecal] Blood puddle created at (772.327, 735.2973) (added to group)
[22:25:49] [INFO] [BloodDecal] Blood puddle created at (781.6722, 772.488) (added to group)
[22:25:49] [INFO] [BloodDecal] Blood puddle created at (379.211, 857.905) (added to group)
[22:25:49] [INFO] [BloodDecal] Blood puddle created at (384.6803, 848.7556) (added to group)
[22:25:49] [INFO] [BloodDecal] Blood puddle created at (351.2541, 854.6402) (added to group)
[22:25:49] [INFO] [BloodDecal] Blood puddle created at (790.4819, 774.2839) (added to group)
[22:25:49] [INFO] [BloodDecal] Blood puddle created at (748.75, 758.0941) (added to group)
[22:25:49] [INFO] [BloodDecal] Blood puddle created at (342.1039, 792.2554) (added to group)
[22:25:49] [INFO] [BloodDecal] Blood puddle created at (794.3224, 793.4951) (added to group)
[22:25:49] [INFO] [BloodDecal] Blood puddle created at (348.1897, 879.7797) (added to group)
[22:25:49] [INFO] [BloodDecal] Blood puddle created at (750.1036, 745.7062) (added to group)
[22:25:49] [INFO] [BloodDecal] Blood puddle created at (803.3104, 729.6028) (added to group)
[22:25:49] [INFO] [BloodDecal] Blood puddle created at (771.8256, 777.9919) (added to group)
[22:25:49] [INFO] [BloodDecal] Blood puddle created at (759.2552, 789.7464) (added to group)
[22:25:49] [INFO] [BloodDecal] Blood puddle created at (763.5322, 792.2) (added to group)
[22:25:49] [INFO] [BloodDecal] Blood puddle created at (828.941, 775.9854) (added to group)
[22:25:49] [INFO] [BloodDecal] Blood puddle created at (368.4682, 827.2742) (added to group)
[22:25:49] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:25:49] [INFO] [BloodDecal] Blood puddle created at (788.4105, 791.6649) (added to group)
[22:25:49] [INFO] [BloodDecal] Blood puddle created at (354.7233, 838.1112) (added to group)
[22:25:49] [INFO] [BloodDecal] Blood puddle created at (764.8608, 768.4985) (added to group)
[22:25:49] [INFO] [BloodDecal] Blood puddle created at (341.0688, 892.4057) (added to group)
[22:25:49] [INFO] [BloodDecal] Blood puddle created at (779.2853, 745.6643) (added to group)
[22:25:49] [INFO] [BloodDecal] Blood puddle created at (820.7864, 791.8071) (added to group)
[22:25:49] [INFO] [BloodDecal] Blood puddle created at (789.2949, 773.8807) (added to group)
[22:25:49] [INFO] [BloodDecal] Blood puddle created at (759.2825, 758.6946) (added to group)
[22:25:49] [INFO] [BloodDecal] Blood puddle created at (365.4795, 528.8094) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (799.0549, 766.5529) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (832.0656, 811.7001) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (376.0331, 882.3384) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (311.3456, 811.3642) (added to group)
[22:25:50] [ENEMY] [Enemy3] Ragdoll activated
[22:25:50] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (777.6125, 818.9886) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (817.2728, 807.1249) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (346.0443, 831.959) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (778.6573, 780.6199) (added to group)
[22:25:50] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:25:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:50] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:25:50] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:25:50] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:25:50] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:25:50] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:25:50] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:25:50] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:25:50] [INFO] [CinemaEffects] Death effects reset
[22:25:50] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:50] [ENEMY] [Enemy1] Death animation component initialized
[22:25:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:50] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:25:50] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:25:50] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:25:50] [ENEMY] [Enemy2] Death animation component initialized
[22:25:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:50] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:25:50] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:25:50] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:25:50] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:50] [ENEMY] [Enemy3] Death animation component initialized
[22:25:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:50] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:25:50] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:25:50] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:25:50] [ENEMY] [Enemy4] Death animation component initialized
[22:25:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:50] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:25:50] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:25:50] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:25:50] [ENEMY] [Enemy5] Death animation component initialized
[22:25:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:50] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:25:50] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:25:50] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:25:50] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:50] [ENEMY] [Enemy6] Death animation component initialized
[22:25:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:50] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:25:50] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:25:50] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:25:50] [ENEMY] [Enemy7] Death animation component initialized
[22:25:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:50] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:25:50] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:25:50] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:25:50] [ENEMY] [Enemy8] Death animation component initialized
[22:25:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:50] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:25:50] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:25:50] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:25:50] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:50] [ENEMY] [Enemy9] Death animation component initialized
[22:25:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:50] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:25:50] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:25:50] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:25:50] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:25:50] [ENEMY] [Enemy10] Death animation component initialized
[22:25:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:25:50] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:25:50] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:25:50] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:25:50] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:25:50] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:25:50] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:25:50] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:25:50] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:25:50] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:25:50] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:25:50] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:25:50] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[22:25:50] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:25:50] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:25:50] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:25:50] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:25:50] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:25:50] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:25:50] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:25:50] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:25:50] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:25:50] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:25:50] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:25:50] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:25:50] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:25:50] [INFO] [ScoreManager] Level started with 10 enemies
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (869.9316, 756.037) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (803.1613, 843.0287) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (865.8009, 803.8371) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (280.5679, 858.309) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (308.22, 905.9023) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (351.7824, 552.6289) (added to group)
[22:25:50] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:25:50] [INFO] [CinemaEffects] Found player node: Player
[22:25:50] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:25:50] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[22:25:50] [ENEMY] [Enemy1] Registered as sound listener
[22:25:50] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[22:25:50] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:25:50] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[22:25:50] [ENEMY] [Enemy2] Registered as sound listener
[22:25:50] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[22:25:50] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:25:50] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[22:25:50] [ENEMY] [Enemy3] Registered as sound listener
[22:25:50] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[22:25:50] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:25:50] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[22:25:50] [ENEMY] [Enemy4] Registered as sound listener
[22:25:50] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[22:25:50] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:25:50] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[22:25:50] [ENEMY] [Enemy5] Registered as sound listener
[22:25:50] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[22:25:50] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:25:50] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[22:25:50] [ENEMY] [Enemy6] Registered as sound listener
[22:25:50] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[22:25:50] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:25:50] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[22:25:50] [ENEMY] [Enemy7] Registered as sound listener
[22:25:50] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[22:25:50] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:25:50] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[22:25:50] [ENEMY] [Enemy8] Registered as sound listener
[22:25:50] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[22:25:50] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:25:50] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[22:25:50] [ENEMY] [Enemy9] Registered as sound listener
[22:25:50] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[22:25:50] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:25:50] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[22:25:50] [ENEMY] [Enemy10] Registered as sound listener
[22:25:50] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[22:25:50] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:25:50] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:50] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:50] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:50] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:50] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:50] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:50] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:50] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:25:50] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:25:50] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:25:50] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:25:50] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:25:50] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:25:50] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:25:50] [INFO] [LastChance] Found player: Player
[22:25:50] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:25:50] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:25:50] [INFO] [LastChance] Connected to player Died signal (C#)
[22:25:50] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (825.6406, 826.6963) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (825.273, 766.8709) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (362.909, 907.1428) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (276.0409, 875.8001) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (295.2272, 811.6051) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (321.4843, 914.3921) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (864.6942, 817.0143) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (786.3763, 778.3735) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (866.1206, 779.7484) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (908.4465, 806.5193) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (888.4536, 768.8202) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (370.1915, 921.7089) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (360.6234, 898.8011) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (319.2263, 926.3099) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (817.0226, 859.5994) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (320.9389, 955.7934) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (846.9548, 856.3966) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (353.7299, 915.2278) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (832.6636, 867.0107) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (850.5599, 799.8596) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (799.8071, 784.3072) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (290.5056, 553.983) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (884.1711, 824.176) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (909.6409, 909.2139) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (857.4357, 888.314) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (288.855, 952.9536) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (301.0381, 883.7037) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (817.0197, 840.5505) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (821.205, 836.958) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (801.6083, 795.5174) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (326.0465, 897.2998) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (309.9339, 995.9625) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (336.9664, 549.0174) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (863.9319, 782.8599) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (236.1478, 581.4854) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (238.971, 518.4236) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (315.6481, 561.3157) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (285.1901, 586.3052) (added to group)
[22:25:50] [INFO] [BloodDecal] Blood puddle created at (277.6984, 584.526) (added to group)
[22:25:51] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:25:51] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[22:25:51] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,984), corner_timer=0.30
[22:25:51] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,984), corner_timer=0.30
[22:25:51] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,880), corner_timer=-0.02
[22:25:51] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:25:51] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,880), corner_timer=-0.02
[22:25:51] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[22:25:51] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,874), corner_timer=0.30
[22:25:51] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,874), corner_timer=0.30
[22:25:52] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,770), corner_timer=-0.02
[22:25:52] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[22:25:52] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,764), corner_timer=0.30
[22:25:52] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,728), corner_timer=-0.02
[22:25:52] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[22:25:52] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,728), corner_timer=0.30
[22:25:52] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(505,727), corner_timer=-0.02
[22:25:52] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[22:25:52] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(508,727), corner_timer=0.30
[22:25:53] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(553,675), corner_timer=-0.02
[22:25:53] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[22:25:53] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(556,673), corner_timer=0.30
[22:25:53] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:25:53] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(698,708), corner_timer=-0.02
[22:25:53] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[22:25:53] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(701,712), corner_timer=0.30
[22:25:53] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=-117.2°, current=-67.5°, player=(705,716), corner_timer=0.00
[22:25:53] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:25:53] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=-28.8°, current=11.3°, player=(725,736), corner_timer=0.00
[22:25:53] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[22:25:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=19
[22:25:53] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[22:25:53] [ENEMY] [Enemy2] Heard gunshot at (700, 750), source_type=1, intensity=0.02, distance=361
[22:25:53] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:25:53] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=29.9°, current=-101.3°, player=(729,739), corner_timer=0.00
[22:25:53] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:25:53] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:25:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(763.0128, 724.3099), shooter_id=1821770778297, bullet_pos=(909.1166, 644.1131)
[22:25:54] [INFO] [Bullet] Using shooter_position, distance=166.66682434082
[22:25:54] [INFO] [Bullet] Distance to wall: 166.66682434082 (11.3486505426323% of viewport)
[22:25:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:25:54] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[22:25:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[22:25:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:25:54] [INFO] [Player] Spawning blood effect at (759.8438, 756.7365), dir=(1, 0), lethal=False (C#)
[22:25:54] [INFO] [ImpactEffects] spawn_blood_effect called at (759.8438, 756.7365), dir=(1, 0), lethal=false
[22:25:54] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:54] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:25:54] [INFO] [ImpactEffects] Blood effect spawned at (759.8438, 756.7365) (scale=1)
[22:25:54] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[22:25:54] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[22:25:54] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:25:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(800, 900), source=ENEMY (Enemy4), range=1469, listeners=10
[22:25:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=1, below_threshold=7
[22:25:54] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[22:25:54] [INFO] [LastChance] Threat detected: @Area2D@6544
[22:25:54] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[22:25:54] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:25:54] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(776,764), corner_timer=-0.02
[22:25:54] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[22:25:54] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[22:25:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[22:25:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:25:54] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(779,765), corner_timer=0.30
[22:25:54] [INFO] [Player] Spawning blood effect at (781.74066, 766.33997), dir=(1, 0), lethal=False (C#)
[22:25:54] [INFO] [ImpactEffects] spawn_blood_effect called at (781.7407, 766.34), dir=(1, 0), lethal=false
[22:25:54] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:54] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:25:54] [INFO] [ImpactEffects] Blood effect spawned at (781.7407, 766.34) (scale=1)
[22:25:54] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[22:25:54] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[22:25:54] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:25:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(800, 900), source=ENEMY (Enemy4), range=1469, listeners=10
[22:25:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=1, below_threshold=7
[22:25:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(763.0128, 724.3099), shooter_id=1821770778297, bullet_pos=(503.4579, 501.4906)
[22:25:54] [INFO] [Bullet] Using shooter_position, distance=342.077728271484
[22:25:54] [INFO] [Bullet] Distance to wall: 342.077728271484 (23.2927015434816% of viewport)
[22:25:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:25:54] [INFO] [Bullet] Starting wall penetration at (503.4579, 501.4906)
[22:25:54] [INFO] [LastChance] Threat detected: @Area2D@6549
[22:25:54] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[22:25:54] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:25:54] [ENEMY] [Enemy1] Memory: medium confidence (0.60) - transitioning to PURSUING
[22:25:54] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[22:25:54] [INFO] [Bullet] Raycast backward hit penetrating body at distance 36.7512283325195
[22:25:54] [INFO] [Bullet] Body exited signal received for penetrating body
[22:25:54] [INFO] [Bullet] Exiting penetration at (465.3292, 488.0852) after traveling 35.4166679382324 pixels through wall
[22:25:54] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[22:25:54] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=40.7°, current=168.8°, player=(787,768), corner_timer=0.00
[22:25:54] [ENEMY] [Enemy1] PURSUING corner check: angle -50.9°
[22:25:54] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=26.5°, current=-22.9°, player=(788,769), corner_timer=0.00
[22:25:54] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:25:54] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[22:25:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700, 750), source=ENEMY (Enemy3), range=1469, listeners=10
[22:25:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:25:54] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:25:54] [INFO] [Player] Spawning blood effect at (791.5024, 770.6212), dir=(1, 0), lethal=False (C#)
[22:25:54] [INFO] [ImpactEffects] spawn_blood_effect called at (791.5024, 770.6212), dir=(1, 0), lethal=false
[22:25:54] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:25:54] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:25:54] [INFO] [ImpactEffects] Blood effect spawned at (791.5024, 770.6212) (scale=1)
[22:25:54] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[22:25:54] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[22:25:54] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[22:25:54] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[22:25:54] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[22:25:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(800, 900), source=ENEMY (Enemy4), range=1469, listeners=10
[22:25:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=1, below_threshold=7
[22:25:54] [INFO] [LastChance] Threat detected: @Area2D@6558
[22:25:54] [INFO] [LastChance] Triggering last chance effect!
[22:25:54] [INFO] [LastChance] Starting last chance effect:
[22:25:54] [INFO] [LastChance]   - Time will be frozen (except player)
[22:25:54] [INFO] [LastChance]   - Duration: 6.0 real seconds
[22:25:54] [INFO] [LastChance]   - Sepia intensity: 0.70
[22:25:54] [INFO] [LastChance]   - Brightness: 0.60
[22:25:54] [INFO] [LastChance] Pushed bullet @Area2D@6558 from distance 62.5 to 200.0
[22:25:54] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[22:25:54] [INFO] [LastChance] Set player Player and all 24 children to PROCESS_MODE_ALWAYS
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[22:25:54] [INFO] [LastChance] Skipping player node: Player
[22:25:54] [INFO] [LastChance] Froze existing bullet casing: Casing
[22:25:54] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@6543
[22:25:54] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@6545
[22:25:54] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@6547
[22:25:54] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@6550
[22:25:54] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@6553
[22:25:54] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@6559
[22:25:54] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[22:25:54] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[22:25:54] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[22:25:54] [INFO] [BloodDecal] Blood puddle created at (827.4103, 745.3881) (added to group)
[22:25:54] [INFO] [BloodDecal] Blood puddle created at (868.4731, 831.6814) (added to group)
[22:25:54] [INFO] [BloodDecal] Blood puddle created at (821.6293, 775.5413) (added to group)
[22:25:54] [INFO] [BloodDecal] Blood puddle created at (817.4614, 770.6422) (added to group)
[22:25:54] [INFO] [BloodDecal] Blood puddle created at (868.3482, 782.3068) (added to group)
[22:25:54] [INFO] [BloodDecal] Blood puddle created at (881.2198, 768.1788) (added to group)
[22:25:54] [INFO] [BloodDecal] Blood puddle created at (858.1105, 759.1234) (added to group)
[22:25:54] [INFO] [BloodDecal] Blood puddle created at (872.412, 781.0736) (added to group)
[22:25:54] [INFO] [BloodDecal] Blood puddle created at (852.492, 774.1016) (added to group)
[22:25:54] [INFO] [BloodDecal] Blood puddle created at (870.6851, 785.0749) (added to group)
[22:25:54] [INFO] [BloodDecal] Blood puddle created at (868.8457, 797.121) (added to group)
[22:25:54] [INFO] [BloodDecal] Blood puddle created at (878.9629, 832.859) (added to group)
[22:25:54] [INFO] [BloodDecal] Blood puddle created at (861.561, 809.2712) (added to group)
[22:25:54] [INFO] [BloodDecal] Blood puddle created at (866.8491, 848.1821) (added to group)
[22:25:54] [INFO] [BloodDecal] Blood puddle created at (856.2424, 803.9239) (added to group)
[22:25:54] [INFO] [BloodDecal] Blood puddle created at (870.4896, 811.7031) (added to group)
[22:25:54] [INFO] [BloodDecal] Blood puddle created at (905.2223, 755.297) (added to group)
[22:25:54] [INFO] [BloodDecal] Blood puddle created at (902.8388, 894.2841) (added to group)
[22:25:54] [INFO] [BloodDecal] Blood puddle created at (873.9775, 800.0935) (added to group)
[22:25:54] [INFO] [BloodDecal] Blood puddle created at (882.9076, 852.543) (added to group)
[22:25:54] [INFO] [BloodDecal] Blood puddle created at (880.5767, 801.0168) (added to group)
[22:25:56] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:25:56] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:25:56] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:25:56] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:25:56] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (767.0555, 760.6354)
[22:25:57] [INFO] [LastChance] Freezing newly created grenade: FragGrenade
[22:25:57] [INFO] [LastChance] Registered frozen grenade: FragGrenade
[22:25:57] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[22:25:57] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:25:57] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:25:57] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:25:57] [INFO] [Player.Grenade] Timer started, grenade created at (540.52234, 770.6543)
[22:25:57] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:25:57] [INFO] [Player.Grenade] Step 1 complete! Drag: (140.40613, 26.048218)
[22:25:57] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:25:57] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[22:25:58] [INFO] [BloodyFeet:Player] Blood ran out - no more footprints
[22:25:59] [INFO] [Player.Grenade.Simple] Throwing! Target: (275.2885, 584.5913), Distance: 383,3, Speed: 463,3, Friction: 280,0
[22:25:59] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -2,9192042
[22:25:59] [INFO] [GrenadeBase] Simple mode throw! Dir: (-0.975373, -0.22056), Speed: 463.3 (clamped from 463.3, max: 1186.5)
[22:25:59] [INFO] [FragGrenade] Grenade thrown (simple mode) - impact detection enabled
[22:25:59] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:25:59] [INFO] [Player.Grenade.Simple] Grenade thrown!
[22:25:59] [INFO] [Player.Grenade] State reset to IDLE
[22:25:59] [INFO] [Player.Grenade] State reset to IDLE
[22:25:59] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:25:59] [INFO] [Player.Grenade] Player rotation restored to 0
[22:25:59] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:26:00] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[22:26:00] [INFO] [LastChance] Ending last chance effect
[22:26:00] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=true
[22:26:00] [ENEMY] [Enemy1] Search mode: PURSUING -> SEARCHING at (700, 750)
[22:26:00] [ENEMY] [Enemy1] SEARCHING started: center=(700, 750), radius=100, waypoints=5
[22:26:00] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=true
[22:26:00] [ENEMY] [Enemy2] Search mode: COMBAT -> SEARCHING at (791.5024, 770.6212)
[22:26:00] [ENEMY] [Enemy2] SEARCHING started: center=(791.5024, 770.6212), radius=100, waypoints=4
[22:26:00] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=true
[22:26:00] [ENEMY] [Enemy3] Search mode: RETREATING -> SEARCHING at (791.5024, 770.6212)
[22:26:00] [ENEMY] [Enemy3] SEARCHING started: center=(791.5024, 770.6212), radius=100, waypoints=4
[22:26:00] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=true
[22:26:00] [ENEMY] [Enemy4] Search mode: COMBAT -> SEARCHING at (791.5024, 770.6212)
[22:26:00] [ENEMY] [Enemy4] SEARCHING started: center=(791.5024, 770.6212), radius=100, waypoints=4
[22:26:00] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[22:26:00] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[22:26:00] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[22:26:00] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[22:26:00] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[22:26:00] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[22:26:00] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[22:26:00] [INFO] [LastChance] All process modes restored
[22:26:00] [INFO] [LastChance] Unfroze grenade: FragGrenade
[22:26:00] [INFO] [LastChance] Unfroze bullet casing: Casing
[22:26:00] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@6543
[22:26:00] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@6545
[22:26:00] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@6547
[22:26:00] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@6550
[22:26:00] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@6553
[22:26:00] [INFO] [LastChance] Unfroze bullet casing: @RigidBody2D@6559
[22:26:00] [INFO] [LastChance] Starting visual effects fade-out over 400ms
[22:26:00] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P2:combat_state, state=SEARCHING, target=-6.2°, current=25.7°, player=(786,594), corner_timer=0.00
[22:26:00] [ENEMY] [Enemy2] GRENADE DANGER: Entering EVADING_GRENADE state from SEARCHING
[22:26:00] [ENEMY] [Enemy2] EVADING_GRENADE started: escaping to (566.9595, 641.4055)
[22:26:00] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=SEARCHING, target=-61.0°, current=12.7°, player=(786,594), corner_timer=0.00
[22:26:00] [ENEMY] [Enemy3] SEARCHING corner check: angle -77.3°
[22:26:00] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P2:combat_state, state=SEARCHING, target=-92.6°, current=-93.8°, player=(786,594), corner_timer=0.00
[22:26:00] [ENEMY] [Enemy4] SEARCHING corner check: angle 176.2°
[22:26:00] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=25.7°, current=22.9°, player=(790,591), corner_timer=0.00
[22:26:00] [ENEMY] [Enemy2] EVADING_GRENADE: Escaped to safe distance
[22:26:00] [ENEMY] [Enemy2] SEARCHING started: center=(529.0963, 634.593), radius=100, waypoints=5
[22:26:00] [ENEMY] [Enemy2] State: EVADING_GRENADE -> SEARCHING
[22:26:00] [INFO] [BloodyFeet:Enemy4] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[22:26:00] [ENEMY] [Enemy2] ROT_CHANGE: P4:velocity -> P2:combat_state, state=SEARCHING, target=-11.2°, current=10.6°, player=(808,581), corner_timer=0.00
[22:26:00] [ENEMY] [Enemy2] GRENADE DANGER: Entering EVADING_GRENADE state from SEARCHING
[22:26:00] [ENEMY] [Enemy2] EVADING_GRENADE started: escaping to (690.7014, 664.5372)
[22:26:00] [INFO] [GrenadeBase] Collision detected with Enemy2 (type: CharacterBody2D)
[22:26:00] [INFO] [FragGrenade] Impact detected! Body: Enemy2 (type: CharacterBody2D), triggering explosion
[22:26:00] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:26:00] [INFO] [GrenadeBase] EXPLODED at (570.9688, 654.1752)!
[22:26:00] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(570.9688, 654.1752), source=NEUTRAL (FragGrenade), range=2937, listeners=10
[22:26:00] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=0, below_threshold=6
[22:26:00] [ENEMY] [Enemy2] Hit taken, damage: 1, health: 4/4 -> 3/4
[22:26:00] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[22:26:00] [INFO] [ImpactEffects] spawn_blood_effect called at (539.5944, 636.4818), dir=(-0.871038, -0.491216), lethal=false
[22:26:00] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:00] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:26:00] [INFO] [ImpactEffects] Blood effect spawned at (539.5944, 636.4818) (scale=1)
[22:26:00] [ENEMY] [Enemy2] Hit taken, damage: 1, health: 3/4 -> 2/4
[22:26:00] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[22:26:00] [INFO] [ImpactEffects] spawn_blood_effect called at (539.5944, 636.4818), dir=(-0.871038, -0.491216), lethal=false
[22:26:00] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:00] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:26:00] [INFO] [ImpactEffects] Blood effect spawned at (539.5944, 636.4818) (scale=1)
[22:26:00] [ENEMY] [Enemy2] Hit taken, damage: 1, health: 2/4 -> 1/4
[22:26:00] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[22:26:00] [INFO] [ImpactEffects] spawn_blood_effect called at (539.5944, 636.4818), dir=(-0.871038, -0.491216), lethal=false
[22:26:00] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:00] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:26:00] [INFO] [ImpactEffects] Blood effect spawned at (539.5944, 636.4818) (scale=1)
[22:26:00] [ENEMY] [Enemy2] Hit taken, damage: 1, health: 1/4 -> 0/4
[22:26:00] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[22:26:00] [INFO] [ImpactEffects] spawn_blood_effect called at (539.5944, 636.4818), dir=(-0.871038, -0.491216), lethal=true
[22:26:00] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:00] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[22:26:00] [INFO] [ImpactEffects] Blood effect spawned at (539.5944, 636.4818) (scale=1.5)
[22:26:00] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
[22:26:00] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:26:00] [ENEMY] [Enemy2] [AllyDeath] Notified 3 enemies
[22:26:00] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 9)
[22:26:00] [INFO] [DeathAnim] Started - Angle: -150.6 deg, Index: 1
[22:26:00] [ENEMY] [Enemy2] Death animation started with hit direction: (-0.871038, -0.491216)
[22:26:00] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 36.0
[22:26:00] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 4/4 -> 3/4
[22:26:00] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:26:00] [INFO] [ImpactEffects] spawn_blood_effect called at (730.0461, 756.7712), dir=(0.84038, 0.541998), lethal=false
[22:26:00] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:00] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:26:00] [INFO] [ImpactEffects] Blood effect spawned at (730.0461, 756.7712) (scale=1)
[22:26:00] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 3/4 -> 2/4
[22:26:00] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:26:00] [INFO] [ImpactEffects] spawn_blood_effect called at (730.0461, 756.7712), dir=(0.84038, 0.541998), lethal=false
[22:26:00] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:00] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:26:00] [INFO] [ImpactEffects] Blood effect spawned at (730.0461, 756.7712) (scale=1)
[22:26:00] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/4 -> 1/4
[22:26:00] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:26:00] [INFO] [ImpactEffects] spawn_blood_effect called at (730.0461, 756.7712), dir=(0.84038, 0.541998), lethal=false
[22:26:00] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:00] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:26:00] [INFO] [ImpactEffects] Blood effect spawned at (730.0461, 756.7712) (scale=1)
[22:26:00] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 1/4 -> 0/4
[22:26:00] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:26:00] [INFO] [ImpactEffects] spawn_blood_effect called at (730.0461, 756.7712), dir=(0.84038, 0.541998), lethal=true
[22:26:00] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:00] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[22:26:00] [INFO] [ImpactEffects] Blood effect spawned at (730.0461, 756.7712) (scale=1.5)
[22:26:00] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[22:26:00] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
[22:26:00] [ENEMY] [Enemy4] [AllyDeath] Witnessed at (730.0461, 756.7712), entering SEARCHING
[22:26:00] [ENEMY] [Enemy4] SEARCHING started: center=(730.0461, 756.7712), radius=100, waypoints=5
[22:26:00] [ENEMY] [Enemy3] [AllyDeath] Notified 1 enemies
[22:26:00] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 8)
[22:26:00] [INFO] [DeathAnim] Started - Angle: 32.8 deg, Index: 14
[22:26:00] [ENEMY] [Enemy3] Death animation started with hit direction: (0.84038, 0.541998)
[22:26:00] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 189.3
[22:26:00] [INFO] [FragGrenade] Spawned shrapnel #1 at angle -9.9 degrees
[22:26:00] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 83.7 degrees
[22:26:00] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 185.8 degrees
[22:26:00] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 285.6 degrees
[22:26:00] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(828,576), corner_timer=-0.02
[22:26:00] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[22:26:00] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(833,575), corner_timer=0.30
[22:26:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(784.0929, 833.8368), shooter_id=1822106323545, bullet_pos=(688.4818, 47.96469)
[22:26:00] [INFO] [Bullet] Using shooter_position, distance=791.666931152344
[22:26:00] [INFO] [Bullet] Distance to wall: 791.666931152344 (53.906057089285% of viewport)
[22:26:00] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:26:00] [ENEMY] [Enemy1] SEARCHING corner check: angle 153.3°
[22:26:00] [ENEMY] [Enemy4] SEARCHING corner check: angle 170.5°
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (799.6143, 781.5082) (added to group)
[22:26:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(787.7864, 833.0566), shooter_id=1822106323545, bullet_pos=(719.3714, 55.59021)
[22:26:00] [INFO] [Bullet] Using shooter_position, distance=780.470703125
[22:26:00] [INFO] [Bullet] Distance to wall: 780.470703125 (53.1436853348552% of viewport)
[22:26:00] [INFO] [Bullet] Distance-based penetration chance: 84.665700442669%
[22:26:00] [INFO] [Bullet] Penetration failed (distance roll)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (791.4821, 795.3575) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (793.9378, 807.119) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (786.4716, 811.5768) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (818.0242, 801.5624) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (447.2184, 647.1874) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (776.398, 822.3674) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (497.0662, 615.2881) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (791.8407, 797.9047) (added to group)
[22:26:00] [INFO] [LastChance] Visual effects fade-out complete
[22:26:00] [INFO] [LastChance] Restored original colors to 5 player sprites
[22:26:00] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (470.8058, 642.8168) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (475.7644, 625.7437) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (479.4923, 612.8913) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (496.2141, 630.8969) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (480.9873, 587.4884) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (771.9446, 823.2791) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (829.5527, 798.2136) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (790.4656, 815.4073) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (433.0693, 620.3503) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (478.9673, 600.4224) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (833.9142, 817.1879) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (791.5765, 844.1589) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (792.5701, 795.1892) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (783.5265, 838.0987) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (831.0892, 835.5789) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (832.4283, 805.2785) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (806.0543, 831.1612) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (817.4137, 856.2632) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (820.8389, 808.5099) (added to group)
[22:26:00] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(937,575), corner_timer=-0.02
[22:26:00] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (502.6321, 618.6763) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (814.111, 858.0662) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (822.7293, 827.9664) (added to group)
[22:26:00] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(943,575), corner_timer=0.30
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (410.0161, 626.0117) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (453.2746, 612.3953) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (806.4885, 838.3062) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (478.8679, 584.9713) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (473.8743, 596.8537) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (469.2378, 577.6919) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (454.1829, 602.9005) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (816.714, 905.3036) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (809.1494, 878.0566) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (846.4031, 805.3022) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (861.903, 849.48) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (462.6306, 614.6754) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (438.1807, 628.0896) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (437.5215, 646.9855) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (449.4191, 648.543) (added to group)
[22:26:00] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (394.7162, 637.2416) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (815.4317, 880.781) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (850.4777, 844.1905) (added to group)
[22:26:00] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:26:00] [ENEMY] [Enemy2] Ragdoll activated
[22:26:00] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:26:00] [ENEMY] [Enemy3] Ragdoll activated
[22:26:00] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (411.8077, 669.1085) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (441.2376, 576.1331) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (847.9153, 827.3325) (added to group)
[22:26:00] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (432.2878, 659.6885) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (434.5776, 559.8322) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (830.9611, 865.6971) (added to group)
[22:26:00] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:26:00] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (844.1766, 921.3676) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (821.6451, 918.4854) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (798.4663, 869.6177) (added to group)
[22:26:00] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (423.093, 614.6937) (added to group)
[22:26:00] [INFO] [BloodDecal] Blood puddle created at (400.1246, 659.6431) (added to group)
[22:26:01] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:26:01] [INFO] [BloodDecal] Blood puddle created at (443.6805, 654.7571) (added to group)
[22:26:01] [INFO] [BloodDecal] Blood puddle created at (438.5855, 656.8501) (added to group)
[22:26:01] [INFO] [BloodDecal] Blood puddle created at (361.8658, 640.3508) (added to group)
[22:26:01] [INFO] [BloodDecal] Blood puddle created at (851.1144, 843.9601) (added to group)
[22:26:01] [INFO] [BloodyFeet:Enemy1] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[22:26:01] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:26:01] [INFO] [BloodDecal] Blood puddle created at (387.9576, 622.6575) (added to group)
[22:26:01] [INFO] [BloodDecal] Blood puddle created at (450.0811, 674.4672) (added to group)
[22:26:01] [INFO] [BloodDecal] Blood puddle created at (409.4611, 586.141) (added to group)
[22:26:01] [INFO] [BloodDecal] Blood puddle created at (395.804, 595.004) (added to group)
[22:26:01] [INFO] [BloodDecal] Blood puddle created at (385.1271, 658.8325) (added to group)
[22:26:01] [INFO] [BloodDecal] Blood puddle created at (908.3926, 852.1407) (added to group)
[22:26:01] [ENEMY] [Enemy1] SEARCHING corner check: angle 153.3°
[22:26:01] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:26:01] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:26:01] [INFO] [BloodDecal] Blood puddle created at (355.5714, 650.1579) (added to group)
[22:26:01] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:26:01] [INFO] [BloodDecal] Blood puddle created at (451.7058, 672.0241) (added to group)
[22:26:01] [INFO] [BloodDecal] Blood puddle created at (377.0171, 589.0928) (added to group)
[22:26:01] [INFO] [BloodDecal] Blood puddle created at (436.2808, 561.1219) (added to group)
[22:26:01] [INFO] [BloodDecal] Blood puddle created at (387.0094, 579.8206) (added to group)
[22:26:01] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:26:01] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:26:01] [INFO] [BloodDecal] Blood puddle created at (364.5876, 683.0079) (added to group)
[22:26:01] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:26:01] [INFO] [BloodDecal] Blood puddle created at (393.4492, 682.5681) (added to group)
[22:26:01] [INFO] [BloodDecal] Blood puddle created at (850.7334, 886.1146) (added to group)
[22:26:01] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:26:01] [INFO] [BloodDecal] Blood puddle created at (890.1075, 961.3521) (added to group)
[22:26:01] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:26:01] [INFO] [BloodDecal] Blood puddle created at (356.4581, 619.5821) (added to group)
[22:26:01] [INFO] [BloodDecal] Blood puddle created at (430.088, 633.0901) (added to group)
[22:26:01] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:26:01] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(1032,575), corner_timer=-0.02
[22:26:01] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[22:26:01] [INFO] [BloodDecal] Blood puddle created at (420.8808, 616.3748) (added to group)
[22:26:01] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:26:01] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(1034,575), corner_timer=0.30
[22:26:01] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:26:01] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:26:01] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:26:01] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:26:01] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:26:01] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:26:01] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:26:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:01] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:26:01] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:26:01] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:26:01] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:26:01] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:26:01] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:26:01] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:26:01] [ENEMY] [Enemy1] Death animation component initialized
[22:26:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:01] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:26:01] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:26:01] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:26:01] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:26:01] [ENEMY] [Enemy2] Death animation component initialized
[22:26:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:01] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:26:01] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:26:01] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:26:01] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:26:01] [ENEMY] [Enemy3] Death animation component initialized
[22:26:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:01] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:26:01] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:26:01] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:26:01] [ENEMY] [Enemy4] Death animation component initialized
[22:26:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:01] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:26:01] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:26:01] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:26:01] [ENEMY] [Enemy5] Death animation component initialized
[22:26:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:01] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:26:01] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:26:01] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:26:01] [ENEMY] [Enemy6] Death animation component initialized
[22:26:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:01] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:26:01] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:26:01] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:26:01] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:26:01] [ENEMY] [Enemy7] Death animation component initialized
[22:26:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:01] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:26:01] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:26:01] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:26:01] [ENEMY] [Enemy8] Death animation component initialized
[22:26:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:01] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:26:01] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:26:01] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:26:01] [ENEMY] [Enemy9] Death animation component initialized
[22:26:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:01] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:26:01] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:26:01] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:26:01] [ENEMY] [Enemy10] Death animation component initialized
[22:26:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:01] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:26:01] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:26:01] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:26:01] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:26:01] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:26:01] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:26:01] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:26:01] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:26:01] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:26:01] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:26:01] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:26:01] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[22:26:01] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:26:01] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:26:01] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:26:01] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:26:01] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:26:01] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:26:01] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:26:01] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:26:01] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:26:01] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:26:01] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:26:01] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:26:01] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:26:01] [INFO] [ScoreManager] Level started with 10 enemies
[22:26:01] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:26:01] [INFO] [CinemaEffects] Found player node: Player
[22:26:01] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:26:01] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 9)
[22:26:01] [ENEMY] [Enemy1] Registered as sound listener
[22:26:01] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[22:26:01] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:26:01] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 10)
[22:26:01] [ENEMY] [Enemy2] Registered as sound listener
[22:26:01] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[22:26:01] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:26:01] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 11)
[22:26:01] [ENEMY] [Enemy3] Registered as sound listener
[22:26:01] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[22:26:01] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:26:01] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 12)
[22:26:01] [ENEMY] [Enemy4] Registered as sound listener
[22:26:01] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[22:26:01] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:26:01] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 13)
[22:26:01] [ENEMY] [Enemy5] Registered as sound listener
[22:26:01] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[22:26:01] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:26:01] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 14)
[22:26:01] [ENEMY] [Enemy6] Registered as sound listener
[22:26:01] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[22:26:01] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:26:01] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 15)
[22:26:01] [ENEMY] [Enemy7] Registered as sound listener
[22:26:01] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[22:26:01] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:26:01] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 16)
[22:26:01] [ENEMY] [Enemy8] Registered as sound listener
[22:26:01] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[22:26:01] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:26:01] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 17)
[22:26:01] [ENEMY] [Enemy9] Registered as sound listener
[22:26:01] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[22:26:01] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:26:01] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 18)
[22:26:01] [ENEMY] [Enemy10] Registered as sound listener
[22:26:01] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[22:26:01] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:26:01] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:01] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:01] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=236.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:01] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:01] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:01] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:01] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=157.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:01] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:01] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:26:01] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:26:01] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:26:01] [INFO] [LastChance] Found player: Player
[22:26:01] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:26:01] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:26:01] [INFO] [LastChance] Connected to player Died signal (C#)
[22:26:01] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:26:01] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:26:01] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:26:01] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:26:02] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:26:02] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:26:02] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:26:02] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:26:02] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (594.7933, 1042.3071)
[22:26:02] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[22:26:02] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:26:02] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:26:02] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:26:02] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1056.1666)
[22:26:02] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:26:02] [INFO] [Player.Grenade] Step 1 complete! Drag: (69.00665, -18.99701)
[22:26:02] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:26:02] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[22:26:02] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:26:02] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[22:26:03] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,852), corner_timer=0.30
[22:26:03] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,852), corner_timer=0.30
[22:26:03] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(434,757), corner_timer=-0.02
[22:26:03] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:26:03] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(434,757), corner_timer=-0.02
[22:26:03] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[22:26:03] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(431,753), corner_timer=0.30
[22:26:03] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(431,753), corner_timer=0.30
[22:26:03] [INFO] [Player.Grenade.Simple] Throwing! Target: (729.5113, 726.3081), Distance: 287,7, Speed: 401,4, Friction: 280,0
[22:26:03] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,06217978
[22:26:03] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.998067, -0.06214), Speed: 401.4 (clamped from 401.4, max: 1186.5)
[22:26:03] [INFO] [FragGrenade] Grenade thrown (simple mode) - impact detection enabled
[22:26:03] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:26:03] [INFO] [Player.Grenade.Simple] Grenade thrown!
[22:26:03] [INFO] [Player.Grenade] State reset to IDLE
[22:26:03] [INFO] [Player.Grenade] State reset to IDLE
[22:26:03] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:26:03] [INFO] [Player.Grenade] Player rotation restored to 0
[22:26:03] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[22:26:03] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (437.1586, 868.6179)
[22:26:03] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(362,748), corner_timer=-0.02
[22:26:03] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[22:26:03] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=173.4°, current=-94.9°, player=(359,751), corner_timer=0.00
[22:26:03] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(359,751), corner_timer=0.30
[22:26:03] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:26:03] [INFO] [GrenadeBase] Collision detected with Enemy3 (type: CharacterBody2D)
[22:26:03] [INFO] [FragGrenade] Impact detected! Body: Enemy3 (type: CharacterBody2D), triggering explosion
[22:26:03] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:26:03] [INFO] [GrenadeBase] EXPLODED at (615.398, 724.9494)!
[22:26:03] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(615.398, 724.9494), source=NEUTRAL (FragGrenade), range=2937, listeners=18
[22:26:03] [INFO] [SoundPropagation] Cleaned up 8 invalid listeners
[22:26:03] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=0, below_threshold=6
[22:26:03] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 3/3 -> 2/3
[22:26:03] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:26:03] [INFO] [ImpactEffects] spawn_blood_effect called at (615.2354, 759.8389), dir=(-0.004662, 0.999989), lethal=false
[22:26:03] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:03] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:26:03] [INFO] [ImpactEffects] Blood effect spawned at (615.2354, 759.8389) (scale=1)
[22:26:03] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/3 -> 1/3
[22:26:03] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:26:03] [INFO] [ImpactEffects] spawn_blood_effect called at (615.2354, 759.8389), dir=(-0.004662, 0.999989), lethal=false
[22:26:03] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:03] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:26:03] [INFO] [ImpactEffects] Blood effect spawned at (615.2354, 759.8389) (scale=1)
[22:26:03] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 1/3 -> 0/3
[22:26:03] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:26:03] [INFO] [ImpactEffects] spawn_blood_effect called at (615.2354, 759.8389), dir=(-0.004662, 0.999989), lethal=true
[22:26:03] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:03] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[22:26:03] [INFO] [ImpactEffects] Blood effect spawned at (615.2354, 759.8389) (scale=1.5)
[22:26:03] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[22:26:03] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:26:03] [ENEMY] [Enemy2] [AllyDeath] Witnessed at (615.2354, 759.8389), entering SEARCHING
[22:26:03] [ENEMY] [Enemy2] SEARCHING started: center=(615.2354, 759.8389), radius=100, waypoints=5
[22:26:03] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[22:26:03] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[22:26:03] [INFO] [DeathAnim] Started - Angle: 90.3 deg, Index: 18
[22:26:03] [ENEMY] [Enemy3] Death animation started with hit direction: (-0.004662, 0.999989)
[22:26:03] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 34.9
[22:26:03] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 13.3 degrees
[22:26:03] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 79.3 degrees
[22:26:03] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 174.3 degrees
[22:26:03] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 287.6 degrees
[22:26:03] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=SEARCHING, target=104.0°, current=45.0°, player=(343,777), corner_timer=0.00
[22:26:03] [ENEMY] [Enemy2] SEARCHING corner check: angle 134.2°
[22:26:03] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(339,840), corner_timer=-0.02
[22:26:03] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[22:26:04] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(339,845), corner_timer=0.30
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (591.4974, 819.7266) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (602.6214, 810.6124) (added to group)
[22:26:04] [ENEMY] [Enemy1] Memory: medium confidence (0.52) - transitioning to PURSUING
[22:26:04] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (625.2541, 813.9188) (added to group)
[22:26:04] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=85.6°, current=168.8°, player=(339,862), corner_timer=0.00
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (622.2623, 847.8822) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (650.1671, 871.7703) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (596.387, 831.8702) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (595.9567, 827.8731) (added to group)
[22:26:04] [ENEMY] [Enemy1] PURSUING corner check: angle -63.3°
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (651.3345, 855.7557) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (605.5175, 904.9348) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (590.6531, 835.3174) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (572.8037, 903.2329) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (631.4839, 921.1854) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (622.4901, 864.3937) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (599.3622, 894.3286) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (611.1974, 924.2378) (added to group)
[22:26:04] [ENEMY] [Enemy2] SEARCHING corner check: angle -50.0°
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (638.8381, 924.2067) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (666.718, 954.1727) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (627.7256, 915.6296) (added to group)
[22:26:04] [ENEMY] [Enemy3] Ragdoll activated
[22:26:04] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (580.7136, 927.8535) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (662.2096, 957.7814) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (639.3516, 918.4009) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (558.1552, 941.5657) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (548.2078, 964.5279) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (594.4833, 910.4971) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (668.8481, 956.1844) (added to group)
[22:26:04] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(339,934), corner_timer=-0.02
[22:26:04] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[22:26:04] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(339,937), corner_timer=0.30
[22:26:04] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=SEARCHING, target=124.8°, current=124.8°, player=(339,939), corner_timer=0.17
[22:26:04] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:26:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(528.1885, 668.2681), source=ENEMY (Enemy2), range=1469, listeners=9
[22:26:04] [ENEMY] [Enemy4] Heard gunshot at (528.1885, 668.2681), source_type=1, intensity=0.02, distance=357
[22:26:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=4
[22:26:04] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=175.1°, current=-101.3°, player=(339,939), corner_timer=0.00
[22:26:04] [ENEMY] [Enemy2] SEARCHING: Player spotted! Transitioning to COMBAT
[22:26:04] [ENEMY] [Enemy2] State: SEARCHING -> COMBAT
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (606.9105, 991.3684) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (586.8967, 983.9043) (added to group)
[22:26:04] [INFO] [LastChance] Threat detected: Bullet
[22:26:04] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:26:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:26:04] [ENEMY] [Enemy1] PURSUING corner check: angle -58.4°
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (625.0884, 981.4114) (added to group)
[22:26:04] [INFO] [Player] Spawning blood effect at (339.5311, 946.95935), dir=(1, 0), lethal=False (C#)
[22:26:04] [INFO] [ImpactEffects] spawn_blood_effect called at (339.5311, 946.9594), dir=(1, 0), lethal=false
[22:26:04] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:04] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:26:04] [INFO] [ImpactEffects] Blood effect spawned at (339.5311, 946.9594) (scale=1)
[22:26:04] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[22:26:04] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[22:26:04] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:26:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(524.0663, 692.0437), source=ENEMY (Enemy2), range=1469, listeners=9
[22:26:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=4
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (594.2054, 997.6093) (added to group)
[22:26:04] [INFO] [LastChance] Threat detected: @Area2D@7080
[22:26:04] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[22:26:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:26:04] [INFO] [Player] Spawning blood effect at (339.5311, 946.95935), dir=(1, 0), lethal=False (C#)
[22:26:04] [INFO] [ImpactEffects] spawn_blood_effect called at (339.5311, 946.9594), dir=(1, 0), lethal=false
[22:26:04] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:04] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:26:04] [INFO] [ImpactEffects] Blood effect spawned at (339.5311, 946.9594) (scale=1)
[22:26:04] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[22:26:04] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[22:26:04] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[22:26:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(524.0662, 710.7312), source=ENEMY (Enemy2), range=1469, listeners=9
[22:26:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=4
[22:26:04] [INFO] [LastChance] Threat detected: Bullet
[22:26:04] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[22:26:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:26:04] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(339,946), corner_timer=-0.02
[22:26:04] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[22:26:04] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(339,946), corner_timer=0.30
[22:26:04] [INFO] [Player] Spawning blood effect at (339.5311, 946.95935), dir=(1, 0), lethal=False (C#)
[22:26:04] [INFO] [ImpactEffects] spawn_blood_effect called at (339.5311, 946.9594), dir=(1, 0), lethal=false
[22:26:04] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:04] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:26:04] [INFO] [ImpactEffects] Blood effect spawned at (339.5311, 946.9594) (scale=1)
[22:26:04] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[22:26:04] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[22:26:04] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[22:26:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(519.1511, 726.705), source=ENEMY (Enemy2), range=1469, listeners=9
[22:26:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=4
[22:26:04] [INFO] [LastChance] Threat detected: @Area2D@7087
[22:26:04] [INFO] [LastChance] Triggering last chance effect!
[22:26:04] [INFO] [LastChance] Starting last chance effect:
[22:26:04] [INFO] [LastChance]   - Time will be frozen (except player)
[22:26:04] [INFO] [LastChance]   - Duration: 6.0 real seconds
[22:26:04] [INFO] [LastChance]   - Sepia intensity: 0.70
[22:26:04] [INFO] [LastChance]   - Brightness: 0.60
[22:26:04] [INFO] [LastChance] Pushed bullet @Area2D@7087 from distance 133.5 to 200.0
[22:26:04] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[22:26:04] [INFO] [LastChance] Set player Player and all 24 children to PROCESS_MODE_ALWAYS
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[22:26:04] [INFO] [LastChance] Skipping player node: Player
[22:26:04] [INFO] [LastChance] Froze existing bullet casing: Casing
[22:26:04] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@7081
[22:26:04] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@7084
[22:26:04] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@7088
[22:26:04] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[22:26:04] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[22:26:04] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (422.8698, 975.5276) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (391.8309, 947.0842) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (402.0384, 989.6899) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (440.0699, 1006.862) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (385.6316, 946.9698) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (387.0542, 961.4103) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (397.2044, 955.1215) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (406.2237, 945.2924) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (390.9803, 952.9039) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (419.3508, 975.1187) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (426.3214, 1011.461) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (488.4528, 942.6664) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (422.8437, 983.426) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (508.5622, 1045.579) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (393.9535, 950.599) (added to group)
[22:26:04] [INFO] [BloodDecal] Blood puddle created at (462.4611, 963.5314) (added to group)
[22:26:05] [INFO] [BloodDecal] Blood puddle created at (459.2183, 978.7327) (added to group)
[22:26:05] [INFO] [BloodDecal] Blood puddle created at (419.1189, 953.446) (added to group)
[22:26:05] [INFO] [BloodDecal] Blood puddle created at (429.893, 999.9633) (added to group)
[22:26:05] [INFO] [BloodDecal] Blood puddle created at (452.4093, 1021.058) (added to group)
[22:26:05] [INFO] [BloodDecal] Blood puddle created at (474.1569, 1037.934) (added to group)
[22:26:05] [INFO] [BloodDecal] Blood puddle created at (415.0298, 973.893) (added to group)
[22:26:05] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:26:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:05] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:26:05] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:26:05] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:26:05] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:26:05] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:26:05] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:26:05] [INFO] [LastChance] Ending last chance effect
[22:26:05] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=false
[22:26:05] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=false
[22:26:05] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=false
[22:26:05] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=false
[22:26:05] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[22:26:05] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[22:26:05] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[22:26:05] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[22:26:05] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[22:26:05] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[22:26:05] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[22:26:05] [INFO] [LastChance] All process modes restored
[22:26:05] [INFO] [LastChance] Starting visual effects fade-out over 400ms
[22:26:05] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:26:05] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:26:05] [ENEMY] [Enemy1] Death animation component initialized
[22:26:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:05] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:26:05] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:26:05] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:26:05] [ENEMY] [Enemy2] Death animation component initialized
[22:26:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:05] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:26:05] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:26:05] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:26:05] [ENEMY] [Enemy3] Death animation component initialized
[22:26:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:05] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:26:05] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:26:05] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:26:05] [ENEMY] [Enemy4] Death animation component initialized
[22:26:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:05] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:26:05] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:26:05] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:26:05] [ENEMY] [Enemy5] Death animation component initialized
[22:26:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:05] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:26:05] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:26:05] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:26:05] [ENEMY] [Enemy6] Death animation component initialized
[22:26:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:05] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:26:05] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:26:05] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:26:05] [ENEMY] [Enemy7] Death animation component initialized
[22:26:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:05] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:26:05] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:26:05] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:26:05] [ENEMY] [Enemy8] Death animation component initialized
[22:26:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:05] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:26:05] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:26:05] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:26:05] [ENEMY] [Enemy9] Death animation component initialized
[22:26:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:05] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:26:05] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:26:05] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:26:05] [ENEMY] [Enemy10] Death animation component initialized
[22:26:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:05] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:26:05] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:26:05] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:26:05] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:26:05] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:26:05] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:26:05] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:26:05] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:26:05] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:26:05] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:26:05] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:26:05] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[22:26:05] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:26:05] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:26:05] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:26:05] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:26:05] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:26:05] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:26:05] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:26:05] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:26:05] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:26:05] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:26:05] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:26:05] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:26:05] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:26:05] [INFO] [ScoreManager] Level started with 10 enemies
[22:26:05] [INFO] [BloodDecal] Blood puddle created at (535.588, 1056.649) (added to group)
[22:26:05] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:26:05] [INFO] [CinemaEffects] Found player node: Player
[22:26:05] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:26:05] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[22:26:05] [ENEMY] [Enemy1] Registered as sound listener
[22:26:05] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[22:26:05] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:26:05] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[22:26:05] [ENEMY] [Enemy2] Registered as sound listener
[22:26:05] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[22:26:05] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:26:05] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[22:26:05] [ENEMY] [Enemy3] Registered as sound listener
[22:26:05] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[22:26:05] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:26:05] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[22:26:05] [ENEMY] [Enemy4] Registered as sound listener
[22:26:05] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[22:26:05] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:26:05] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[22:26:05] [ENEMY] [Enemy5] Registered as sound listener
[22:26:05] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[22:26:05] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:26:05] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[22:26:05] [ENEMY] [Enemy6] Registered as sound listener
[22:26:05] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[22:26:05] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:26:05] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[22:26:05] [ENEMY] [Enemy7] Registered as sound listener
[22:26:05] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[22:26:05] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:26:05] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[22:26:05] [ENEMY] [Enemy8] Registered as sound listener
[22:26:05] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[22:26:05] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:26:05] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[22:26:05] [ENEMY] [Enemy9] Registered as sound listener
[22:26:05] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[22:26:05] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:26:05] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[22:26:05] [ENEMY] [Enemy10] Registered as sound listener
[22:26:05] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[22:26:05] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:26:05] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:05] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:05] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=236.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:05] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:05] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:05] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:05] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:05] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:05] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:26:05] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:26:05] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:26:05] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:26:05] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:26:05] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:26:05] [INFO] [LastChance] Found player: Player
[22:26:05] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:26:05] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:26:05] [INFO] [LastChance] Connected to player Died signal (C#)
[22:26:05] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:26:05] [INFO] [BloodDecal] Blood puddle created at (464.5006, 1053.116) (added to group)
[22:26:05] [INFO] [BloodDecal] Blood puddle created at (513.4484, 1041.552) (added to group)
[22:26:05] [INFO] [BloodDecal] Blood puddle created at (440.7028, 1001.123) (added to group)
[22:26:05] [INFO] [BloodDecal] Blood puddle created at (456.7098, 980.017) (added to group)
[22:26:05] [INFO] [BloodDecal] Blood puddle created at (494.5922, 1020.373) (added to group)
[22:26:05] [INFO] [BloodDecal] Blood puddle created at (473.2226, 1010.116) (added to group)
[22:26:05] [INFO] [BloodDecal] Blood puddle created at (444.2572, 1104.949) (added to group)
[22:26:05] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:26:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:05] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:26:05] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:26:05] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:26:05] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:26:05] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:26:05] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:26:05] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:26:05] [ENEMY] [Enemy1] Death animation component initialized
[22:26:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:05] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:26:05] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:26:05] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:26:05] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:26:05] [ENEMY] [Enemy2] Death animation component initialized
[22:26:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:05] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:26:05] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:26:05] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:26:05] [ENEMY] [Enemy3] Death animation component initialized
[22:26:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:05] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:26:05] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:26:05] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:26:05] [ENEMY] [Enemy4] Death animation component initialized
[22:26:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:05] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:26:05] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:26:05] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:26:05] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:26:05] [ENEMY] [Enemy5] Death animation component initialized
[22:26:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:05] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:26:05] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:26:05] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:26:05] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:26:05] [ENEMY] [Enemy6] Death animation component initialized
[22:26:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:05] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:26:05] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:26:05] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:26:05] [ENEMY] [Enemy7] Death animation component initialized
[22:26:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:05] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:26:05] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:26:05] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:26:05] [ENEMY] [Enemy8] Death animation component initialized
[22:26:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:05] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:26:05] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:26:05] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:26:05] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:26:05] [ENEMY] [Enemy9] Death animation component initialized
[22:26:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:05] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:26:05] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:26:05] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:26:05] [ENEMY] [Enemy10] Death animation component initialized
[22:26:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:05] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:26:05] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:26:05] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:26:05] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:26:05] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:26:05] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:26:05] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:26:05] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:26:05] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:26:05] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:26:05] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:26:05] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[22:26:05] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:26:05] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:26:05] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:26:05] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:26:05] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:26:05] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:26:05] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:26:05] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:26:05] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:26:05] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:26:05] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:26:05] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:26:05] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:26:05] [INFO] [ScoreManager] Level started with 10 enemies
[22:26:05] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:26:05] [INFO] [CinemaEffects] Found player node: Player
[22:26:05] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:26:05] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 20)
[22:26:05] [ENEMY] [Enemy1] Registered as sound listener
[22:26:05] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[22:26:05] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:26:05] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 21)
[22:26:05] [ENEMY] [Enemy2] Registered as sound listener
[22:26:05] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[22:26:05] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:26:05] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 22)
[22:26:05] [ENEMY] [Enemy3] Registered as sound listener
[22:26:05] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[22:26:05] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:26:05] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 23)
[22:26:05] [ENEMY] [Enemy4] Registered as sound listener
[22:26:05] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[22:26:05] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:26:05] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 24)
[22:26:05] [ENEMY] [Enemy5] Registered as sound listener
[22:26:05] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[22:26:05] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:26:05] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 25)
[22:26:05] [ENEMY] [Enemy6] Registered as sound listener
[22:26:05] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[22:26:05] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:26:05] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 26)
[22:26:05] [ENEMY] [Enemy7] Registered as sound listener
[22:26:05] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[22:26:05] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:26:05] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 27)
[22:26:05] [ENEMY] [Enemy8] Registered as sound listener
[22:26:05] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[22:26:05] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:26:05] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 28)
[22:26:05] [ENEMY] [Enemy9] Registered as sound listener
[22:26:05] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[22:26:05] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:26:05] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 29)
[22:26:05] [ENEMY] [Enemy10] Registered as sound listener
[22:26:05] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[22:26:05] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:26:05] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:26:05] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:26:05] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:26:05] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:26:05] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:26:05] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=225.0°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:26:05] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=213.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:26:05] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:26:05] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:26:05] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:26:05] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:26:05] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:26:05] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:26:05] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:26:05] [INFO] [LastChance] Found player: Player
[22:26:05] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:26:05] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:26:05] [INFO] [LastChance] Connected to player Died signal (C#)
[22:26:05] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:26:06] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:26:06] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:26:06] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:26:07] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:26:07] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (552.1806, 702.17523)
[22:26:07] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[22:26:07] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:26:07] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:26:07] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:26:07] [INFO] [Player.Grenade] Timer started, grenade created at (450, 852.6666)
[22:26:07] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:26:07] [INFO] [Player.Grenade] Step 1 complete! Drag: (342.15308, 79.43744)
[22:26:07] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:26:07] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[22:26:07] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=164.4°, current=-168.8°, player=(450,819), corner_timer=0.00
[22:26:07] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[22:26:07] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=166.8°, current=-8.9°, player=(450,808), corner_timer=0.00
[22:26:07] [ENEMY] [Enemy4] Memory: high confidence (0.89) - transitioning to PURSUING
[22:26:07] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[22:26:07] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:26:07] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[22:26:07] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=-161.2°, current=-101.3°, player=(450,781), corner_timer=0.00
[22:26:07] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,781), corner_timer=0.30
[22:26:07] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,781), corner_timer=0.30
[22:26:07] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[22:26:07] [INFO] [Player.Grenade.Simple] Throwing! Target: (918.566, 718.1522), Distance: 475,2, Speed: 515,9, Friction: 280,0
[22:26:07] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,020978108
[22:26:07] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.99978, -0.020977), Speed: 515.9 (clamped from 515.9, max: 1186.5)
[22:26:07] [INFO] [FragGrenade] Grenade thrown (simple mode) - impact detection enabled
[22:26:07] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:26:07] [INFO] [Player.Grenade.Simple] Grenade thrown!
[22:26:07] [INFO] [Player.Grenade] State reset to IDLE
[22:26:07] [INFO] [Player.Grenade] State reset to IDLE
[22:26:07] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:26:07] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(446,728), corner_timer=-0.02
[22:26:07] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:26:07] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(446,728), corner_timer=-0.02
[22:26:07] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[22:26:07] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(445,728), corner_timer=0.30
[22:26:07] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(445,728), corner_timer=0.30
[22:26:07] [INFO] [Player.Grenade] Player rotation restored to 0
[22:26:07] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[22:26:07] [ENEMY] [Enemy4] PURSUING corner check: angle -94.0°
[22:26:07] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:26:07] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=-178.6°, current=134.7°, player=(378,746), corner_timer=0.00
[22:26:08] [INFO] [GrenadeBase] Collision detected with Enemy3 (type: CharacterBody2D)
[22:26:08] [INFO] [FragGrenade] Impact detected! Body: Enemy3 (type: CharacterBody2D), triggering explosion
[22:26:08] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:26:08] [INFO] [GrenadeBase] EXPLODED at (680.175, 720.9597)!
[22:26:08] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(680.175, 720.9597), source=NEUTRAL (FragGrenade), range=2937, listeners=29
[22:26:08] [INFO] [SoundPropagation] Cleaned up 19 invalid listeners
[22:26:08] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[22:26:08] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 3/3 -> 2/3
[22:26:08] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:26:08] [INFO] [ImpactEffects] spawn_blood_effect called at (684.4485, 753.7583), dir=(0.129201, 0.991618), lethal=false
[22:26:08] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:08] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:26:08] [INFO] [ImpactEffects] Wall found for blood splatter at (691.7764, 810) (dist=56 px)
[22:26:08] [INFO] [BloodDecal] Blood puddle created at (691.7764, 809) (added to group)
[22:26:08] [INFO] [ImpactEffects] Blood effect spawned at (684.4485, 753.7583) (scale=1)
[22:26:08] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/3 -> 1/3
[22:26:08] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:26:08] [INFO] [ImpactEffects] spawn_blood_effect called at (684.4485, 753.7583), dir=(0.129201, 0.991618), lethal=false
[22:26:08] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:08] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:26:08] [INFO] [ImpactEffects] Wall found for blood splatter at (691.7764, 810) (dist=56 px)
[22:26:08] [INFO] [BloodDecal] Blood puddle created at (691.7764, 809) (added to group)
[22:26:08] [INFO] [ImpactEffects] Blood effect spawned at (684.4485, 753.7583) (scale=1)
[22:26:08] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 1/3 -> 0/3
[22:26:08] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:26:08] [INFO] [ImpactEffects] spawn_blood_effect called at (684.4485, 753.7583), dir=(0.129201, 0.991618), lethal=true
[22:26:08] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:08] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[22:26:08] [INFO] [ImpactEffects] Wall found for blood splatter at (691.7764, 810) (dist=56 px)
[22:26:08] [INFO] [BloodDecal] Blood puddle created at (691.7764, 809) (added to group)
[22:26:08] [INFO] [ImpactEffects] Blood effect spawned at (684.4485, 753.7583) (scale=1.5)
[22:26:08] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[22:26:08] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:26:08] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[22:26:08] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[22:26:08] [INFO] [DeathAnim] Started - Angle: 82.6 deg, Index: 17
[22:26:08] [ENEMY] [Enemy3] Death animation started with hit direction: (0.129201, 0.991618)
[22:26:08] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 33.1
[22:26:08] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 2/2 -> 1/2
[22:26:08] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[22:26:08] [INFO] [ImpactEffects] spawn_blood_effect called at (613.2087, 895.7627), dir=(-0.357743, 0.93382), lethal=false
[22:26:08] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:08] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:26:08] [INFO] [ImpactEffects] Blood effect spawned at (613.2087, 895.7627) (scale=1)
[22:26:08] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 1/2 -> 0/2
[22:26:08] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[22:26:08] [INFO] [ImpactEffects] spawn_blood_effect called at (613.2087, 895.7627), dir=(-0.357743, 0.93382), lethal=true
[22:26:08] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:08] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[22:26:08] [INFO] [ImpactEffects] Blood effect spawned at (613.2087, 895.7627) (scale=1.5)
[22:26:08] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
[22:26:08] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
[22:26:08] [ENEMY] [Enemy4] [AllyDeath] Notified 1 enemies
[22:26:08] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 8)
[22:26:08] [INFO] [DeathAnim] Started - Angle: 111.0 deg, Index: 19
[22:26:08] [ENEMY] [Enemy4] Death animation started with hit direction: (-0.357743, 0.93382)
[22:26:08] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 187.2
[22:26:08] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 1.5 degrees
[22:26:08] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 89.4 degrees
[22:26:08] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 182.8 degrees
[22:26:08] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 284.6 degrees
[22:26:08] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(374,749), corner_timer=-0.02
[22:26:08] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[22:26:08] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(370,753), corner_timer=0.30
[22:26:08] [INFO] [BloodDecal] Blood puddle created at (671.4152, 810.8414) (added to group)
[22:26:08] [INFO] [BloodDecal] Blood puddle created at (606.9979, 968.1008) (added to group)
[22:26:08] [INFO] [BloodDecal] Blood puddle created at (588.5558, 955.8366) (added to group)
[22:26:08] [INFO] [BloodDecal] Blood puddle created at (620.0711, 983.165) (added to group)
[22:26:08] [INFO] [BloodDecal] Blood puddle created at (668.9905, 815.0787) (added to group)
[22:26:08] [INFO] [BloodDecal] Blood puddle created at (560.0763, 987.7011) (added to group)
[22:26:08] [INFO] [BloodDecal] Blood puddle created at (658.4465, 861.2827) (added to group)
[22:26:08] [INFO] [BloodDecal] Blood puddle created at (610.3691, 987.1823) (added to group)
[22:26:08] [INFO] [BloodDecal] Blood puddle created at (553.5189, 974.1827) (added to group)
[22:26:08] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(323,822), corner_timer=-0.02
[22:26:08] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[22:26:08] [INFO] [BloodDecal] Blood puddle created at (584.1143, 979.1826) (added to group)
[22:26:08] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(322,824), corner_timer=0.30
[22:26:08] [INFO] [BloodDecal] Blood puddle created at (591.4385, 995.739) (added to group)
[22:26:08] [INFO] [BloodDecal] Blood puddle created at (614.4519, 987.8222) (added to group)
[22:26:08] [INFO] [BloodDecal] Blood puddle created at (589.1329, 993.9439) (added to group)
[22:26:08] [INFO] [BloodDecal] Blood puddle created at (667.2565, 882.1619) (added to group)
[22:26:08] [INFO] [BloodDecal] Blood puddle created at (642.5457, 940.3105) (added to group)
[22:26:08] [ENEMY] [Enemy3] Ragdoll activated
[22:26:08] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:26:08] [ENEMY] [Enemy4] Ragdoll activated
[22:26:08] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:26:08] [INFO] [BloodDecal] Blood puddle created at (659.9398, 972.982) (added to group)
[22:26:08] [INFO] [BloodDecal] Blood puddle created at (642.2358, 925.983) (added to group)
[22:26:08] [INFO] [BloodDecal] Blood puddle created at (668.8606, 904.2056) (added to group)
[22:26:08] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(319,829), corner_timer=-0.02
[22:26:08] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[22:26:08] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(319,829), corner_timer=0.30
[22:26:09] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(319,829), corner_timer=-0.02
[22:26:09] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[22:26:09] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(319,829), corner_timer=0.30
[22:26:09] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:26:09] [ENEMY] [Enemy3] Death animation completed
[22:26:09] [ENEMY] [Enemy4] Death animation completed
[22:26:09] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(319,829), corner_timer=-0.02
[22:26:09] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[22:26:09] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:26:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:09] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:26:09] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:26:09] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:26:09] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:26:09] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:26:09] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:26:09] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:26:09] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:26:09] [ENEMY] [Enemy1] Death animation component initialized
[22:26:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:09] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:26:09] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:26:09] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:26:09] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:26:09] [ENEMY] [Enemy2] Death animation component initialized
[22:26:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:09] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:26:09] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:26:09] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:26:09] [ENEMY] [Enemy3] Death animation component initialized
[22:26:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:09] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:26:09] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:26:09] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:26:09] [ENEMY] [Enemy4] Death animation component initialized
[22:26:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:09] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:26:09] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:26:09] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:26:09] [ENEMY] [Enemy5] Death animation component initialized
[22:26:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:09] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:26:09] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:26:09] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:26:09] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:26:09] [ENEMY] [Enemy6] Death animation component initialized
[22:26:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:09] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:26:09] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:26:09] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:26:09] [ENEMY] [Enemy7] Death animation component initialized
[22:26:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:09] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:26:09] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:26:09] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:26:09] [ENEMY] [Enemy8] Death animation component initialized
[22:26:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:09] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:26:09] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:26:09] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:26:09] [ENEMY] [Enemy9] Death animation component initialized
[22:26:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:09] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:26:09] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:26:09] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:26:09] [ENEMY] [Enemy10] Death animation component initialized
[22:26:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:09] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:26:09] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:26:09] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:26:09] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:26:09] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:26:09] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:26:09] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:26:09] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:26:09] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:26:09] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:26:09] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:26:09] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[22:26:09] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:26:09] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:26:09] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:26:09] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:26:09] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:26:09] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:26:09] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:26:09] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:26:09] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:26:09] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:26:09] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:26:09] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:26:09] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:26:09] [INFO] [ScoreManager] Level started with 10 enemies
[22:26:09] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:26:09] [INFO] [CinemaEffects] Found player node: Player
[22:26:09] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:26:09] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 9)
[22:26:09] [ENEMY] [Enemy1] Registered as sound listener
[22:26:09] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[22:26:09] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:26:09] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 10)
[22:26:09] [ENEMY] [Enemy2] Registered as sound listener
[22:26:09] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[22:26:09] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:26:09] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 11)
[22:26:09] [ENEMY] [Enemy3] Registered as sound listener
[22:26:09] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[22:26:09] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:26:09] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 12)
[22:26:09] [ENEMY] [Enemy4] Registered as sound listener
[22:26:09] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[22:26:09] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:26:09] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 13)
[22:26:09] [ENEMY] [Enemy5] Registered as sound listener
[22:26:09] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[22:26:09] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:26:09] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 14)
[22:26:09] [ENEMY] [Enemy6] Registered as sound listener
[22:26:09] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[22:26:09] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:26:09] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 15)
[22:26:09] [ENEMY] [Enemy7] Registered as sound listener
[22:26:09] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[22:26:09] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:26:09] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 16)
[22:26:09] [ENEMY] [Enemy8] Registered as sound listener
[22:26:09] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[22:26:09] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:26:09] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 17)
[22:26:09] [ENEMY] [Enemy9] Registered as sound listener
[22:26:09] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[22:26:09] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:26:09] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 18)
[22:26:09] [ENEMY] [Enemy10] Registered as sound listener
[22:26:09] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[22:26:09] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:26:09] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:09] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:09] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:09] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:09] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:09] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:09] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:09] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:09] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:26:09] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:26:09] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:26:09] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:26:09] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:26:09] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:26:09] [INFO] [LastChance] Found player: Player
[22:26:09] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:26:09] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:26:09] [INFO] [LastChance] Connected to player Died signal (C#)
[22:26:09] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:26:10] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:26:10] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:26:10] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:26:10] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:26:10] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (803.343, 875.21936)
[22:26:10] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[22:26:10] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:26:10] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:26:10] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:26:10] [INFO] [Player.Grenade] Timer started, grenade created at (450, 918.6666)
[22:26:10] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:26:10] [INFO] [Player.Grenade] Step 1 complete! Drag: (190.49402, 1.53479)
[22:26:10] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:26:10] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[22:26:11] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:26:11] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[22:26:11] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,836), corner_timer=0.30
[22:26:11] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,836), corner_timer=0.30
[22:26:11] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=164.4°, current=123.7°, player=(450,819), corner_timer=0.00
[22:26:11] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[22:26:11] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=166.8°, current=-64.9°, player=(450,808), corner_timer=0.00
[22:26:11] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,731), corner_timer=-0.02
[22:26:11] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:26:11] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,731), corner_timer=-0.02
[22:26:11] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[22:26:11] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,728), corner_timer=0.30
[22:26:11] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,728), corner_timer=0.30
[22:26:11] [INFO] [Player.Grenade.Simple] Throwing! Target: (887.17615, 767.3345), Distance: 439,6, Speed: 496,1, Friction: 280,0
[22:26:11] [INFO] [Player.Grenade] Player rotated for throw: 0 -> 0,089698
[22:26:11] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.99598, 0.089578), Speed: 496.1 (clamped from 496.1, max: 1186.5)
[22:26:11] [INFO] [FragGrenade] Grenade thrown (simple mode) - impact detection enabled
[22:26:11] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:26:11] [INFO] [Player.Grenade.Simple] Grenade thrown!
[22:26:11] [INFO] [Player.Grenade] State reset to IDLE
[22:26:11] [INFO] [Player.Grenade] State reset to IDLE
[22:26:11] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:26:11] [ENEMY] [Enemy4] Memory: high confidence (0.86) - transitioning to PURSUING
[22:26:11] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[22:26:11] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=-153.9°, current=168.8°, player=(449,728), corner_timer=0.00
[22:26:11] [INFO] [Player.Grenade] Player rotation restored to 0
[22:26:11] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=-173.8°, current=-124.5°, player=(448,728), corner_timer=0.00
[22:26:11] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[22:26:11] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (590.0295, 746.9928)
[22:26:11] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[22:26:11] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(435,728), corner_timer=-0.02
[22:26:11] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[22:26:11] [INFO] [GrenadeBase] Collision detected with Enemy3 (type: CharacterBody2D)
[22:26:11] [INFO] [FragGrenade] Impact detected! Body: Enemy3 (type: CharacterBody2D), triggering explosion
[22:26:11] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:26:11] [INFO] [GrenadeBase] EXPLODED at (584.1839, 737.0117)!
[22:26:11] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(584.1839, 737.0117), source=NEUTRAL (FragGrenade), range=2937, listeners=18
[22:26:11] [INFO] [SoundPropagation] Cleaned up 8 invalid listeners
[22:26:11] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=0, below_threshold=6
[22:26:11] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/2 -> 1/2
[22:26:11] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:26:11] [INFO] [ImpactEffects] spawn_blood_effect called at (620.6121, 749.1843), dir=(0.94845, 0.316928), lethal=false
[22:26:11] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:11] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:26:11] [INFO] [ImpactEffects] Blood effect spawned at (620.6121, 749.1843) (scale=1)
[22:26:11] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 1/2 -> 0/2
[22:26:11] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:26:11] [INFO] [ImpactEffects] spawn_blood_effect called at (620.6121, 749.1843), dir=(0.94845, 0.316928), lethal=true
[22:26:11] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:11] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[22:26:11] [INFO] [ImpactEffects] Blood effect spawned at (620.6121, 749.1843) (scale=1.5)
[22:26:11] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[22:26:11] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:26:11] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[22:26:11] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[22:26:11] [INFO] [DeathAnim] Started - Angle: 18.5 deg, Index: 13
[22:26:11] [ENEMY] [Enemy3] Death animation started with hit direction: (0.94845, 0.316928)
[22:26:11] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 38.4
[22:26:11] [INFO] [FragGrenade] Player found in blast radius at distance 152.8
[22:26:11] [INFO] [Player] Spawning blood effect at (431.66666, 728.01514), dir=(-0.99826473, -0.058884952), lethal=False (C#)
[22:26:11] [INFO] [ImpactEffects] spawn_blood_effect called at (431.6667, 728.0151), dir=(-0.998265, -0.058885), lethal=false
[22:26:11] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:11] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:26:11] [INFO] [ImpactEffects] Blood effect spawned at (431.6667, 728.0151) (scale=1)
[22:26:11] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[22:26:11] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[22:26:11] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[22:26:11] [INFO] [Player] Spawning blood effect at (431.66666, 728.01514), dir=(-0.99826473, -0.058884952), lethal=True (C#)
[22:26:11] [INFO] [ImpactEffects] spawn_blood_effect called at (431.6667, 728.0151), dir=(-0.998265, -0.058885), lethal=true
[22:26:11] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:11] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[22:26:11] [INFO] [ImpactEffects] Blood effect spawned at (431.6667, 728.0151) (scale=1.5)
[22:26:11] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[22:26:11] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[22:26:11] [INFO] [CinemaEffects] Player died - triggering death effects
[22:26:11] [INFO] [CinemaEffects] Death effects triggered - starting cigarette burn, expanding spots, and end of reel (top-right)
[22:26:11] [INFO] [PenultimateHit] Player died - ending penultimate effect
[22:26:11] [INFO] [LastChance] Player died
[22:26:11] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 152.8
[22:26:11] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 6.8 degrees
[22:26:11] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 79.5 degrees
[22:26:11] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 163.5 degrees
[22:26:11] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 270.4 degrees
[22:26:11] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(431,728), corner_timer=0.30
[22:26:11] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:26:11] [INFO] [GrenadeBase] Collision detected with Room1_WallBottom (type: StaticBody2D)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (669.0839, 757.9745) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (666.2906, 782.4777) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (680.1057, 767.2479) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (704.0138, 806.4349) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (375.111, 716.1166) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (372.5487, 749.8869) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (382.4149, 769.909) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (354.9697, 731.7728) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (673.6, 807.8521) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (698.5616, 806.2974) (added to group)
[22:26:12] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(333,728), corner_timer=-0.02
[22:26:12] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (339.9738, 767.1734) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (343.5999, 719.5736) (added to group)
[22:26:12] [ENEMY] [Enemy4] PURSUING corner check: angle -94.0°
[22:26:12] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(327,728), corner_timer=0.30
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (695.9965, 772.6526) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (661.7891, 815.058) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (359.5872, 752.9319) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (357.8547, 713.4244) (added to group)
[22:26:12] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (664.6534, 813.9735) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (346.3492, 754.3212) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (384.3634, 730.3201) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (376.7047, 725.7663) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (681.646, 806.4625) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (680.1245, 795.813) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (672.8248, 821.179) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (357.9869, 755.1166) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (704.9799, 800.7616) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (350.9976, 796.9384) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (746.7131, 784.0878) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (286.8519, 714.7129) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (341.9845, 762.8669) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (274.6646, 753.55) (added to group)
[22:26:12] [ENEMY] [Enemy3] Ragdoll activated
[22:26:12] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (272.9691, 804.3409) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (308.8762, 810.96) (added to group)
[22:26:12] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:26:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:12] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:26:12] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:26:12] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:26:12] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:26:12] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:26:12] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:26:12] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:26:12] [INFO] [CinemaEffects] Death effects reset
[22:26:12] [ENEMY] [Enemy1] Death animation component initialized
[22:26:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:12] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:26:12] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:26:12] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:26:12] [ENEMY] [Enemy2] Death animation component initialized
[22:26:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:12] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:26:12] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:26:12] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:26:12] [ENEMY] [Enemy3] Death animation component initialized
[22:26:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:12] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:26:12] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:26:12] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:26:12] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:26:12] [ENEMY] [Enemy4] Death animation component initialized
[22:26:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:12] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:26:12] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:26:12] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:26:12] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:26:12] [ENEMY] [Enemy5] Death animation component initialized
[22:26:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:12] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:26:12] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:26:12] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:26:12] [ENEMY] [Enemy6] Death animation component initialized
[22:26:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:12] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:26:12] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:26:12] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:26:12] [ENEMY] [Enemy7] Death animation component initialized
[22:26:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:12] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:26:12] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:26:12] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:26:12] [ENEMY] [Enemy8] Death animation component initialized
[22:26:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:12] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:26:12] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:26:12] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:26:12] [ENEMY] [Enemy9] Death animation component initialized
[22:26:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:12] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:26:12] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:26:12] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:26:12] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:26:12] [ENEMY] [Enemy10] Death animation component initialized
[22:26:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:12] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:26:12] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:26:12] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:26:12] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:26:12] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:26:12] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:26:12] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:26:12] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:26:12] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:26:12] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:26:12] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:26:12] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[22:26:12] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:26:12] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:26:12] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:26:12] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:26:12] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:26:12] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:26:12] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:26:12] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:26:12] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:26:12] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:26:12] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:26:12] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:26:12] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:26:12] [INFO] [ScoreManager] Level started with 10 enemies
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (347.4583, 775.7851) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (256.0021, 830.5846) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (261.8387, 824.2247) (added to group)
[22:26:12] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:26:12] [INFO] [CinemaEffects] Found player node: Player
[22:26:12] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:26:12] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[22:26:12] [ENEMY] [Enemy1] Registered as sound listener
[22:26:12] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[22:26:12] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:26:12] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[22:26:12] [ENEMY] [Enemy2] Registered as sound listener
[22:26:12] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[22:26:12] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:26:12] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[22:26:12] [ENEMY] [Enemy3] Registered as sound listener
[22:26:12] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[22:26:12] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:26:12] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[22:26:12] [ENEMY] [Enemy4] Registered as sound listener
[22:26:12] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[22:26:12] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:26:12] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[22:26:12] [ENEMY] [Enemy5] Registered as sound listener
[22:26:12] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[22:26:12] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:26:12] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[22:26:12] [ENEMY] [Enemy6] Registered as sound listener
[22:26:12] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[22:26:12] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:26:12] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[22:26:12] [ENEMY] [Enemy7] Registered as sound listener
[22:26:12] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[22:26:12] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:26:12] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[22:26:12] [ENEMY] [Enemy8] Registered as sound listener
[22:26:12] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[22:26:12] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:26:12] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[22:26:12] [ENEMY] [Enemy9] Registered as sound listener
[22:26:12] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[22:26:12] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:26:12] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[22:26:12] [ENEMY] [Enemy10] Registered as sound listener
[22:26:12] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[22:26:12] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:26:12] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:12] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:12] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:12] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:12] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:12] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:12] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:12] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:12] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:26:12] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:26:12] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:26:12] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:26:12] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:26:12] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:26:12] [INFO] [LastChance] Found player: Player
[22:26:12] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:26:12] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:26:12] [INFO] [LastChance] Connected to player Died signal (C#)
[22:26:12] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (306.5943, 752.653) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (287.2651, 717.5764) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (270.808, 787.8035) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (298.4067, 794.7238) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (282.8997, 851.3706) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (257.1196, 870.5121) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (284.5913, 764.0627) (added to group)
[22:26:12] [INFO] [BloodDecal] Blood puddle created at (236.5245, 765.2191) (added to group)
[22:26:12] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:26:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:12] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:26:12] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:26:12] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:26:12] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:26:12] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:26:12] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:26:12] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:26:12] [ENEMY] [Enemy1] Death animation component initialized
[22:26:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:12] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:26:12] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:26:12] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:26:12] [ENEMY] [Enemy2] Death animation component initialized
[22:26:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:12] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:26:12] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:26:12] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:26:12] [ENEMY] [Enemy3] Death animation component initialized
[22:26:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:12] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:26:12] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:26:12] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:26:12] [ENEMY] [Enemy4] Death animation component initialized
[22:26:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:12] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:26:12] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:26:12] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:26:12] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:26:12] [ENEMY] [Enemy5] Death animation component initialized
[22:26:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:12] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:26:12] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:26:12] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:26:12] [ENEMY] [Enemy6] Death animation component initialized
[22:26:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:12] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:26:12] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:26:12] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:26:12] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:26:12] [ENEMY] [Enemy7] Death animation component initialized
[22:26:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:12] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:26:12] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:26:12] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:26:12] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:26:12] [ENEMY] [Enemy8] Death animation component initialized
[22:26:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:12] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:26:12] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:26:12] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:26:12] [ENEMY] [Enemy9] Death animation component initialized
[22:26:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:12] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:26:12] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:26:12] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:26:12] [ENEMY] [Enemy10] Death animation component initialized
[22:26:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:12] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:26:12] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:26:12] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:26:12] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:26:12] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:26:12] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:26:12] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:26:12] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:26:12] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:26:12] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:26:12] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:26:12] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[22:26:12] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:26:12] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:26:12] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:26:12] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:26:12] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:26:12] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:26:12] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:26:12] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:26:12] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:26:12] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:26:12] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:26:12] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:26:12] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:26:12] [INFO] [ScoreManager] Level started with 10 enemies
[22:26:12] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:26:12] [INFO] [CinemaEffects] Found player node: Player
[22:26:12] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:26:12] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 20)
[22:26:12] [ENEMY] [Enemy1] Registered as sound listener
[22:26:12] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[22:26:12] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:26:12] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 21)
[22:26:12] [ENEMY] [Enemy2] Registered as sound listener
[22:26:12] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[22:26:12] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:26:12] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 22)
[22:26:12] [ENEMY] [Enemy3] Registered as sound listener
[22:26:12] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[22:26:12] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:26:12] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 23)
[22:26:12] [ENEMY] [Enemy4] Registered as sound listener
[22:26:12] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[22:26:12] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:26:12] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 24)
[22:26:12] [ENEMY] [Enemy5] Registered as sound listener
[22:26:12] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[22:26:12] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:26:12] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 25)
[22:26:12] [ENEMY] [Enemy6] Registered as sound listener
[22:26:12] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[22:26:12] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:26:12] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 26)
[22:26:12] [ENEMY] [Enemy7] Registered as sound listener
[22:26:12] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[22:26:12] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:26:12] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 27)
[22:26:12] [ENEMY] [Enemy8] Registered as sound listener
[22:26:12] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[22:26:12] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:26:12] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 28)
[22:26:12] [ENEMY] [Enemy9] Registered as sound listener
[22:26:12] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[22:26:12] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:26:12] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 29)
[22:26:12] [ENEMY] [Enemy10] Registered as sound listener
[22:26:12] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[22:26:12] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:26:12] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:12] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:12] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=236.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:12] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:12] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:12] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:12] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:12] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:12] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:26:12] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:26:12] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:26:12] [INFO] [LastChance] Found player: Player
[22:26:12] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:26:12] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:26:12] [INFO] [LastChance] Connected to player Died signal (C#)
[22:26:12] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:26:12] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:26:12] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:26:12] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:26:13] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:26:13] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:26:13] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:26:13] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:26:13] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (783.80237, 1071.3816)
[22:26:13] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[22:26:13] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:26:13] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:26:13] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:26:13] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1067.1666)
[22:26:13] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:26:13] [INFO] [Player.Grenade] Step 1 complete! Drag: (276.5647, -41.04712)
[22:26:13] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:26:13] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[22:26:14] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:26:14] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[22:26:14] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,819), corner_timer=0.30
[22:26:14] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,819), corner_timer=0.30
[22:26:14] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(426,733), corner_timer=-0.02
[22:26:14] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:26:14] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(426,733), corner_timer=-0.02
[22:26:14] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[22:26:14] [INFO] [Player.Grenade.Simple] Throwing! Target: (845.0828, 806.70605), Distance: 427,5, Speed: 489,3, Friction: 280,0
[22:26:14] [INFO] [Player.Grenade] Player rotated for throw: 0 -> 0,1775157
[22:26:14] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.984285, 0.176585), Speed: 489.3 (clamped from 489.3, max: 1186.5)
[22:26:14] [INFO] [FragGrenade] Grenade thrown (simple mode) - impact detection enabled
[22:26:14] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:26:14] [INFO] [Player.Grenade.Simple] Grenade thrown!
[22:26:14] [INFO] [Player.Grenade] State reset to IDLE
[22:26:14] [INFO] [Player.Grenade] State reset to IDLE
[22:26:14] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:26:14] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(423,731), corner_timer=0.30
[22:26:14] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(423,731), corner_timer=0.30
[22:26:14] [INFO] [Player.Grenade] Player rotation restored to 0
[22:26:14] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:26:14] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(334,748), corner_timer=-0.02
[22:26:14] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[22:26:14] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(330,752), corner_timer=0.30
[22:26:14] [INFO] [GrenadeBase] Collision detected with Enemy3 (type: CharacterBody2D)
[22:26:14] [INFO] [FragGrenade] Impact detected! Body: Enemy3 (type: CharacterBody2D), triggering explosion
[22:26:14] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:26:14] [INFO] [GrenadeBase] EXPLODED at (691.2059, 781.2003)!
[22:26:14] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(691.2059, 781.2003), source=NEUTRAL (FragGrenade), range=2937, listeners=29
[22:26:14] [INFO] [SoundPropagation] Cleaned up 19 invalid listeners
[22:26:14] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[22:26:14] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 3/3 -> 2/3
[22:26:14] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:26:14] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.271289, -0.962498), lethal=false
[22:26:14] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:14] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:26:14] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[22:26:14] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/3 -> 1/3
[22:26:14] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:26:14] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.271289, -0.962498), lethal=false
[22:26:14] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:14] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:26:14] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[22:26:14] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 1/3 -> 0/3
[22:26:14] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:26:14] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.271289, -0.962498), lethal=true
[22:26:14] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:14] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[22:26:14] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1.5)
[22:26:14] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[22:26:14] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:26:14] [ENEMY] [Enemy2] [AllyDeath] Witnessed at (700, 750), entering SEARCHING
[22:26:14] [ENEMY] [Enemy2] SEARCHING started: center=(700, 750), radius=100, waypoints=5
[22:26:14] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[22:26:14] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[22:26:14] [INFO] [DeathAnim] Started - Angle: -74.3 deg, Index: 7
[22:26:14] [ENEMY] [Enemy3] Death animation started with hit direction: (0.271289, -0.962498)
[22:26:14] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 32.4
[22:26:14] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 19.1 degrees
[22:26:14] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 99.3 degrees
[22:26:14] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 192.4 degrees
[22:26:14] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 265.5 degrees
[22:26:15] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=SEARCHING, target=114.7°, current=45.0°, player=(287,794), corner_timer=0.00
[22:26:15] [ENEMY] [Enemy2] SEARCHING corner check: angle 134.2°
[22:26:15] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 3/3 -> 2/3
[22:26:15] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[22:26:15] [INFO] [ImpactEffects] spawn_blood_effect called at (800, 900), dir=(-0.968307, 0.249761), lethal=false
[22:26:15] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:15] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:26:15] [INFO] [ImpactEffects] Blood effect spawned at (800, 900) (scale=1)
[22:26:15] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(264,821), corner_timer=-0.02
[22:26:15] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[22:26:15] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(261,823), corner_timer=0.30
[22:26:15] [ENEMY] [Enemy1] Memory: medium confidence (0.52) - transitioning to PURSUING
[22:26:15] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[22:26:15] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=95.2°, current=33.8°, player=(256,829), corner_timer=0.00
[22:26:15] [ENEMY] [Enemy1] PURSUING corner check: angle -50.9°
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (749.902, 708.868) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (722.0992, 706.9521) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (721.062, 705.6144) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (702.0298, 718.3954) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (747.051, 692.1804) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (690.5328, 694.2106) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (711.9164, 718.022) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (747.8005, 686.0541) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (721.6083, 715.2655) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (731.423, 674.1982) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (726.4555, 916.9053) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (703.9125, 725.4709) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (718.4941, 688.1521) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (704.0734, 646.1495) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (712.3755, 963.3375) (added to group)
[22:26:15] [ENEMY] [Enemy2] SEARCHING corner check: angle -60.5°
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (765.6335, 722.0756) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (715.2952, 698.2044) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (721.1467, 987.3096) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (776.6715, 676.8711) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (742.4968, 658.6733) (added to group)
[22:26:15] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:26:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:15] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:26:15] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:26:15] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:26:15] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:26:15] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:26:15] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:26:15] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:26:15] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:26:15] [ENEMY] [Enemy1] Death animation component initialized
[22:26:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:15] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:26:15] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:26:15] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:26:15] [ENEMY] [Enemy2] Death animation component initialized
[22:26:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:15] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:26:15] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:26:15] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:26:15] [ENEMY] [Enemy3] Death animation component initialized
[22:26:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:15] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:26:15] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:26:15] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:26:15] [ENEMY] [Enemy4] Death animation component initialized
[22:26:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:15] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:26:15] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:26:15] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:26:15] [ENEMY] [Enemy5] Death animation component initialized
[22:26:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:15] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:26:15] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:26:15] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:26:15] [ENEMY] [Enemy6] Death animation component initialized
[22:26:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:15] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:26:15] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:26:15] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:26:15] [ENEMY] [Enemy7] Death animation component initialized
[22:26:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:15] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:26:15] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:26:15] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:26:15] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:26:15] [ENEMY] [Enemy8] Death animation component initialized
[22:26:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:15] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:26:15] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:26:15] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:26:15] [ENEMY] [Enemy9] Death animation component initialized
[22:26:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:15] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:26:15] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:26:15] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:26:15] [ENEMY] [Enemy10] Death animation component initialized
[22:26:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:15] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:26:15] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:26:15] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:26:15] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:26:15] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:26:15] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:26:15] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:26:15] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:26:15] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:26:15] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:26:15] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:26:15] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[22:26:15] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:26:15] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:26:15] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:26:15] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:26:15] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:26:15] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:26:15] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:26:15] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:26:15] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:26:15] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:26:15] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:26:15] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:26:15] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:26:15] [INFO] [ScoreManager] Level started with 10 enemies
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (715.8278, 641.677) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (732.7753, 677.415) (added to group)
[22:26:15] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:26:15] [INFO] [CinemaEffects] Found player node: Player
[22:26:15] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:26:15] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[22:26:15] [ENEMY] [Enemy1] Registered as sound listener
[22:26:15] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[22:26:15] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:26:15] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[22:26:15] [ENEMY] [Enemy2] Registered as sound listener
[22:26:15] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[22:26:15] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:26:15] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[22:26:15] [ENEMY] [Enemy3] Registered as sound listener
[22:26:15] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[22:26:15] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:26:15] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[22:26:15] [ENEMY] [Enemy4] Registered as sound listener
[22:26:15] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[22:26:15] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:26:15] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[22:26:15] [ENEMY] [Enemy5] Registered as sound listener
[22:26:15] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[22:26:15] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:26:15] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[22:26:15] [ENEMY] [Enemy6] Registered as sound listener
[22:26:15] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[22:26:15] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:26:15] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[22:26:15] [ENEMY] [Enemy7] Registered as sound listener
[22:26:15] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[22:26:15] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:26:15] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[22:26:15] [ENEMY] [Enemy8] Registered as sound listener
[22:26:15] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[22:26:15] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:26:15] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[22:26:15] [ENEMY] [Enemy9] Registered as sound listener
[22:26:15] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[22:26:15] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:26:15] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[22:26:15] [ENEMY] [Enemy10] Registered as sound listener
[22:26:15] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[22:26:15] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:26:15] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:15] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:15] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:15] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:15] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:15] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=225.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:15] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:15] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:15] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:26:15] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:26:15] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:26:15] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:26:15] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:26:15] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:26:15] [INFO] [LastChance] Found player: Player
[22:26:15] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:26:15] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:26:15] [INFO] [LastChance] Connected to player Died signal (C#)
[22:26:15] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (740.8268, 644.1121) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (733.373, 643.4943) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (732.9706, 653.8634) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (736.1745, 667.7966) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (710.6956, 727.9178) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (696.5574, 720.8645) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (693.7269, 724.6345) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (748.6422, 991.5776) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (697.6554, 933.9565) (added to group)
[22:26:15] [INFO] [BloodyFeet:Enemy3] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (769.7847, 707.1867) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (669.3155, 939.0535) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (689.0794, 716.7241) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (759.842, 628.7719) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (790.3887, 707.0021) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (834.3281, 672.3365) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (678.4715, 726.923) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (676.5513, 988.8874) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (778.4218, 665.6343) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (686.6355, 692.9883) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (763.5019, 662.8519) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (724.7806, 682.8428) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (692.8928, 956.4282) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (715.4304, 710.5621) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (727.0097, 622.9017) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (758.3179, 759.8427) (added to group)
[22:26:15] [INFO] [BloodDecal] Blood puddle created at (740.0631, 638.8157) (added to group)
[22:26:16] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:26:16] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[22:26:17] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,841), corner_timer=0.30
[22:26:17] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,841), corner_timer=0.30
[22:26:17] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=164.4°, current=-168.8°, player=(450,819), corner_timer=0.00
[22:26:17] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[22:26:17] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=166.8°, current=-8.9°, player=(450,808), corner_timer=0.00
[22:26:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(435.4636, 759.0681), source=PLAYER (AssaultRifle), range=1469, listeners=19
[22:26:17] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[22:26:17] [ENEMY] [Enemy1] Heard gunshot at (435.4636, 759.0681), source_type=0, intensity=0.01, distance=431
[22:26:17] [ENEMY] [Enemy2] Heard gunshot at (435.4636, 759.0681), source_type=0, intensity=0.06, distance=212
[22:26:17] [ENEMY] [Enemy4] Heard gunshot at (435.4636, 759.0681), source_type=0, intensity=0.02, distance=391
[22:26:17] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:26:17] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=71.4°, current=-33.8°, player=(435,753), corner_timer=0.00
[22:26:17] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=80.1°, current=168.8°, player=(435,753), corner_timer=0.00
[22:26:17] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-158.0°, current=168.8°, player=(435,753), corner_timer=0.00
[22:26:17] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(432,749), corner_timer=-0.02
[22:26:17] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:26:17] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(432,749), corner_timer=-0.02
[22:26:17] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[22:26:17] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(429,747), corner_timer=0.30
[22:26:17] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(429,747), corner_timer=0.30
[22:26:17] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 4/4 -> 3/4
[22:26:17] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:26:17] [INFO] [ImpactEffects] spawn_blood_effect called at (684.4485, 753.7583), dir=(1, 0), lethal=false
[22:26:17] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:17] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:26:17] [INFO] [ImpactEffects] Blood effect spawned at (684.4485, 753.7583) (scale=1)
[22:26:17] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=-177.0°, current=180.0°, player=(419,739), corner_timer=0.00
[22:26:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[22:26:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:26:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(412.7298, 742.6674), source=PLAYER (AssaultRifle), range=1469, listeners=10
[22:26:17] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:26:17] [INFO] [LastChance] Threat detected: Bullet
[22:26:17] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:26:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:26:17] [INFO] [Player] Spawning blood effect at (386.40292, 731.6653), dir=(1, 0), lethal=False (C#)
[22:26:17] [INFO] [ImpactEffects] spawn_blood_effect called at (386.4029, 731.6653), dir=(1, 0), lethal=false
[22:26:17] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:17] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:26:17] [INFO] [ImpactEffects] Blood effect spawned at (386.4029, 731.6653) (scale=1)
[22:26:17] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[22:26:17] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[22:26:17] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[22:26:17] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 3/4 -> 2/4
[22:26:17] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:26:17] [INFO] [ImpactEffects] spawn_blood_effect called at (684.4485, 753.7583), dir=(1, 0), lethal=false
[22:26:17] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:17] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:26:17] [INFO] [ImpactEffects] Blood effect spawned at (684.4485, 753.7583) (scale=1)
[22:26:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[22:26:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:26:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(382.0731, 737.5868), source=PLAYER (AssaultRifle), range=1469, listeners=10
[22:26:17] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:26:17] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[22:26:17] [INFO] [LastChance] Threat detected: @Area2D@8811
[22:26:17] [INFO] [LastChance] Triggering last chance effect!
[22:26:17] [INFO] [LastChance] Starting last chance effect:
[22:26:17] [INFO] [LastChance]   - Time will be frozen (except player)
[22:26:17] [INFO] [LastChance]   - Duration: 6.0 real seconds
[22:26:17] [INFO] [LastChance]   - Sepia intensity: 0.70
[22:26:17] [INFO] [LastChance]   - Brightness: 0.60
[22:26:17] [INFO] [LastChance] Pushed bullet @Area2D@8811 from distance 149.2 to 200.0
[22:26:17] [INFO] [LastChance] Pushed bullet @Area2D@8813 from distance 138.4 to 200.0
[22:26:17] [INFO] [LastChance] Pushed 2 threatening bullets away from player
[22:26:17] [INFO] [LastChance] Set player Player and all 24 children to PROCESS_MODE_ALWAYS
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[22:26:17] [INFO] [LastChance] Skipping player node: Player
[22:26:17] [INFO] [LastChance] Froze existing bullet casing: Casing
[22:26:17] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@8806
[22:26:17] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@8808
[22:26:17] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@8812
[22:26:17] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@8814
[22:26:17] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[22:26:17] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[22:26:17] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[22:26:17] [INFO] [LastChance] Freezing newly fired player bullet: Bullet
[22:26:17] [INFO] [LastChance] Registered frozen player bullet: Bullet
[22:26:17] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@8818
[22:26:17] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@8818
[22:26:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(346.8732, 737.5868), source=PLAYER (AssaultRifle), range=1469, listeners=10
[22:26:17] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:26:17] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@8822
[22:26:17] [INFO] [LastChance] Registered frozen player bullet: @Area2D@8822
[22:26:17] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@8823
[22:26:17] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@8823
[22:26:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(311.6732, 737.5868), source=PLAYER (AssaultRifle), range=1469, listeners=10
[22:26:17] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:26:17] [INFO] [BloodDecal] Blood puddle created at (436.7838, 768.6821) (added to group)
[22:26:17] [INFO] [BloodDecal] Blood puddle created at (750.5565, 806.241) (added to group)
[22:26:17] [INFO] [BloodDecal] Blood puddle created at (796.9399, 759.2985) (added to group)
[22:26:17] [INFO] [BloodDecal] Blood puddle created at (464.5081, 727.7808) (added to group)
[22:26:18] [INFO] [BloodDecal] Blood puddle created at (832.6378, 746.6067) (added to group)
[22:26:18] [INFO] [BloodDecal] Blood puddle created at (506.7666, 798.0171) (added to group)
[22:26:18] [INFO] [BloodDecal] Blood puddle created at (778.8242, 808.6554) (added to group)
[22:26:18] [INFO] [BloodDecal] Blood puddle created at (798.9429, 815.0041) (added to group)
[22:26:18] [INFO] [BloodDecal] Blood puddle created at (790.605, 796.3368) (added to group)
[22:26:18] [INFO] [BloodDecal] Blood puddle created at (455.4043, 806.4215) (added to group)
[22:26:18] [INFO] [BloodDecal] Blood puddle created at (786.9777, 806.1205) (added to group)
[22:26:18] [INFO] [BloodDecal] Blood puddle created at (812.7397, 735.0305) (added to group)
[22:26:18] [INFO] [BloodDecal] Blood puddle created at (769.1121, 810.1743) (added to group)
[22:26:18] [INFO] [BloodDecal] Blood puddle created at (496.7948, 824.8585) (added to group)
[22:26:18] [INFO] [BloodDecal] Blood puddle created at (534.0618, 759.9066) (added to group)
[22:26:18] [INFO] [BloodDecal] Blood puddle created at (831.9683, 789.6526) (added to group)
[22:26:18] [INFO] [BloodDecal] Blood puddle created at (845.943, 872.6125) (added to group)
[22:26:18] [INFO] [BloodDecal] Blood puddle created at (868.7848, 849.2761) (added to group)
[22:26:18] [INFO] [BloodDecal] Blood puddle created at (580.9991, 765.2642) (added to group)
[22:26:18] [INFO] [BloodDecal] Blood puddle created at (583.0405, 734.8645) (added to group)
[22:26:18] [INFO] [BloodDecal] Blood puddle created at (846.6436, 846.5352) (added to group)
[22:26:18] [INFO] [BloodDecal] Blood puddle created at (829.0585, 821.2583) (added to group)
[22:26:18] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:26:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:18] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:26:18] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:26:18] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:26:18] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:26:18] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:26:18] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:26:18] [INFO] [LastChance] Ending last chance effect
[22:26:18] [ENEMY] [Enemy1] Memory reset: confusion=2.0s, had_target=false
[22:26:18] [ENEMY] [Enemy2] Memory reset: confusion=2.0s, had_target=false
[22:26:18] [ENEMY] [Enemy3] Memory reset: confusion=2.0s, had_target=false
[22:26:18] [ENEMY] [Enemy4] Memory reset: confusion=2.0s, had_target=false
[22:26:18] [ENEMY] [Enemy5] Memory reset: confusion=2.0s, had_target=false
[22:26:18] [ENEMY] [Enemy6] Memory reset: confusion=2.0s, had_target=false
[22:26:18] [ENEMY] [Enemy7] Memory reset: confusion=2.0s, had_target=false
[22:26:18] [ENEMY] [Enemy8] Memory reset: confusion=2.0s, had_target=false
[22:26:18] [ENEMY] [Enemy9] Memory reset: confusion=2.0s, had_target=false
[22:26:18] [ENEMY] [Enemy10] Memory reset: confusion=2.0s, had_target=false
[22:26:18] [INFO] [LastChance] Reset memory for 10 enemies (player teleport effect)
[22:26:18] [INFO] [LastChance] All process modes restored
[22:26:18] [INFO] [LastChance] Starting visual effects fade-out over 400ms
[22:26:18] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:26:18] [ENEMY] [Enemy1] Death animation component initialized
[22:26:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:18] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:26:18] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:26:18] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:26:18] [ENEMY] [Enemy2] Death animation component initialized
[22:26:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:18] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:26:18] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:26:18] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:26:18] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:26:18] [ENEMY] [Enemy3] Death animation component initialized
[22:26:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:18] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:26:18] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:26:18] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:26:18] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:26:18] [ENEMY] [Enemy4] Death animation component initialized
[22:26:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:18] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:26:18] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:26:18] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:26:18] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:26:18] [ENEMY] [Enemy5] Death animation component initialized
[22:26:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:18] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:26:18] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:26:18] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:26:18] [ENEMY] [Enemy6] Death animation component initialized
[22:26:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:18] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:26:18] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:26:18] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:26:18] [ENEMY] [Enemy7] Death animation component initialized
[22:26:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:18] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:26:18] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:26:18] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:26:18] [ENEMY] [Enemy8] Death animation component initialized
[22:26:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:18] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:26:18] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:26:18] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:26:18] [ENEMY] [Enemy9] Death animation component initialized
[22:26:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:18] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:26:18] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:26:18] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:26:18] [ENEMY] [Enemy10] Death animation component initialized
[22:26:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:18] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:26:18] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:26:18] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:26:18] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:26:18] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:26:18] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:26:18] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:26:18] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:26:18] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:26:18] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:26:18] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:26:18] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[22:26:18] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:26:18] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:26:18] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:26:18] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:26:18] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:26:18] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:26:18] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:26:18] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:26:18] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:26:18] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:26:18] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:26:18] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:26:18] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:26:18] [INFO] [ScoreManager] Level started with 10 enemies
[22:26:18] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:26:18] [INFO] [CinemaEffects] Found player node: Player
[22:26:18] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:26:18] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[22:26:18] [ENEMY] [Enemy1] Registered as sound listener
[22:26:18] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[22:26:18] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:26:18] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[22:26:18] [ENEMY] [Enemy2] Registered as sound listener
[22:26:18] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[22:26:18] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:26:18] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[22:26:18] [ENEMY] [Enemy3] Registered as sound listener
[22:26:18] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[22:26:18] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:26:18] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[22:26:18] [ENEMY] [Enemy4] Registered as sound listener
[22:26:18] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[22:26:18] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:26:18] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[22:26:18] [ENEMY] [Enemy5] Registered as sound listener
[22:26:18] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[22:26:18] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:26:18] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[22:26:18] [ENEMY] [Enemy6] Registered as sound listener
[22:26:18] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[22:26:18] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:26:18] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[22:26:18] [ENEMY] [Enemy7] Registered as sound listener
[22:26:18] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[22:26:18] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:26:18] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[22:26:18] [ENEMY] [Enemy8] Registered as sound listener
[22:26:18] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[22:26:18] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:26:18] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[22:26:18] [ENEMY] [Enemy9] Registered as sound listener
[22:26:18] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[22:26:18] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:26:18] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[22:26:18] [ENEMY] [Enemy10] Registered as sound listener
[22:26:18] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[22:26:18] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:26:18] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:18] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:18] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:18] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:18] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:18] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:18] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:18] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[22:26:18] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:26:18] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:26:18] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:26:18] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:26:18] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:26:18] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:26:18] [INFO] [LastChance] Found player: Player
[22:26:18] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:26:18] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:26:18] [INFO] [LastChance] Connected to player Died signal (C#)
[22:26:18] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:26:20] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:26:20] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[22:26:20] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,847), corner_timer=0.30
[22:26:20] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,847), corner_timer=0.30
[22:26:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(445.6379, 778.4428), source=PLAYER (AssaultRifle), range=1469, listeners=20
[22:26:20] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[22:26:20] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:26:20] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/2 -> 1/2
[22:26:20] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:26:20] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(1, 0), lethal=false
[22:26:20] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:20] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:26:20] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[22:26:20] [INFO] [EnemyGrenade] Unsafe throw distance (265 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:26:20] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(435,753), corner_timer=-0.02
[22:26:20] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:26:20] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(435,753), corner_timer=-0.02
[22:26:20] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[22:26:20] [INFO] [EnemyGrenade] Unsafe throw distance (267 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:26:20] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(432,749), corner_timer=0.30
[22:26:20] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(432,749), corner_timer=0.30
[22:26:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(430.5654, 753.6453), source=PLAYER (AssaultRifle), range=1469, listeners=10
[22:26:20] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:26:20] [INFO] [EnemyGrenade] Unsafe throw distance (269 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:26:20] [INFO] [EnemyGrenade] Unsafe throw distance (272 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:26:20] [INFO] [EnemyGrenade] Unsafe throw distance (274 < 275 safe distance, blast=225, margin=50) - skipping throw
[22:26:20] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 1/2 -> 0/2
[22:26:20] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:26:20] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(1, 0), lethal=true
[22:26:20] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:20] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[22:26:20] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1.5)
[22:26:20] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[22:26:20] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:26:20] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[22:26:20] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[22:26:20] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[22:26:20] [ENEMY] [Enemy3] Death animation started with hit direction: (1, 0)
[22:26:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(412.0764, 742.8254), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:26:20] [ENEMY] [Enemy1] Heard gunshot at (412.0764, 742.8254), source_type=0, intensity=0.01, distance=409
[22:26:20] [ENEMY] [Enemy2] Heard gunshot at (412.0764, 742.8254), source_type=0, intensity=0.07, distance=193
[22:26:20] [ENEMY] [Enemy4] Heard gunshot at (412.0764, 742.8254), source_type=0, intensity=0.01, distance=419
[22:26:20] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[22:26:20] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=73.8°, current=-33.8°, player=(412,736), corner_timer=0.00
[22:26:20] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=86.3°, current=-157.5°, player=(412,736), corner_timer=0.00
[22:26:20] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-157.2°, current=168.8°, player=(412,736), corner_timer=0.00
[22:26:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(397.2938, 744.7155), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:26:20] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[22:26:20] [INFO] [BloodDecal] Blood puddle created at (778.9332, 731.2665) (added to group)
[22:26:20] [INFO] [BloodDecal] Blood puddle created at (750.1042, 765.7928) (added to group)
[22:26:20] [INFO] [BloodDecal] Blood puddle created at (766.014, 764.1264) (added to group)
[22:26:20] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.1°, player=(389,748), corner_timer=-0.01
[22:26:20] [ENEMY] [Enemy10] PATROL corner check: angle 7.1°
[22:26:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(412.07642, 742.82544), shooter_id=2306548435999, bullet_pos=(936.9588, 731.71466)
[22:26:20] [INFO] [Bullet] Using shooter_position, distance=525
[22:26:20] [INFO] [Bullet] Distance to wall: 525 (35,748215% of viewport)
[22:26:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:26:20] [INFO] [Bullet] Starting wall penetration at (936.9588, 731.71466)
[22:26:20] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.1°, current=16.2°, player=(388,750), corner_timer=0.30
[22:26:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(388.0495, 759.0851), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:26:20] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[22:26:20] [INFO] [Bullet] Raycast backward hit penetrating body at distance 39,29237
[22:26:20] [INFO] [Bullet] Body exited signal received for penetrating body
[22:26:20] [INFO] [Bullet] Exiting penetration at (975.28357, 730.9034) after traveling 33,333332 pixels through wall
[22:26:20] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:26:20] [INFO] [BloodDecal] Blood puddle created at (814.4148, 748.9014) (added to group)
[22:26:20] [INFO] [BloodDecal] Blood puddle created at (753.918, 750.8952) (added to group)
[22:26:20] [INFO] [BloodDecal] Blood puddle created at (775.4439, 748.2385) (added to group)
[22:26:20] [INFO] [BloodDecal] Blood puddle created at (784.1753, 782.0217) (added to group)
[22:26:20] [INFO] [BloodDecal] Blood puddle created at (832.0648, 813.9986) (added to group)
[22:26:20] [INFO] [BloodDecal] Blood puddle created at (768.9908, 784.6606) (added to group)
[22:26:20] [INFO] [BloodDecal] Blood puddle created at (766.5458, 791.951) (added to group)
[22:26:20] [INFO] [BloodDecal] Blood puddle created at (761.1125, 800.0812) (added to group)
[22:26:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(397.2938, 744.71545), shooter_id=2306548435999, bullet_pos=(922.20215, 734.9092)
[22:26:20] [INFO] [Bullet] Using shooter_position, distance=524,99994
[22:26:20] [INFO] [Bullet] Distance to wall: 524,99994 (35,748215% of viewport)
[22:26:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:26:20] [INFO] [Bullet] Starting wall penetration at (922.20215, 734.9092)
[22:26:20] [INFO] [Bullet] Raycast backward hit penetrating body at distance 24,53309
[22:26:20] [INFO] [BloodDecal] Blood puddle created at (772.9286, 779.2574) (added to group)
[22:26:20] [INFO] [Bullet] Body exited signal received for penetrating body
[22:26:20] [INFO] [Bullet] Exiting penetration at (960.5288, 734.1932) after traveling 33,333336 pixels through wall
[22:26:20] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:26:20] [INFO] [BloodDecal] Blood puddle created at (808.3237, 823.6774) (added to group)
[22:26:20] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[22:26:20] [INFO] [GrenadeBase] Grenade created at (660.3509, 744.7135) (frozen)
[22:26:20] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:26:20] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:26:20] [INFO] [GrenadeBase] LEGACY throw_grenade() called! Direction: (-0.991228, -0.132162), Speed: 552.7 (unfrozen)
[22:26:20] [INFO] [GrenadeBase] NOTE: Using DRAG-BASED system. If velocity-based is expected, ensure grenade has throw_grenade_velocity_based() method.
[22:26:20] [INFO] [FragGrenade] Grenade thrown (legacy) - impact detection enabled
[22:26:20] [INFO] [BloodDecal] Blood puddle created at (792.1414, 765.2026) (added to group)
[22:26:21] [INFO] [BloodDecal] Blood puddle created at (764.6297, 788.1864) (added to group)
[22:26:21] [INFO] [BloodDecal] Blood puddle created at (829.9794, 835.1006) (added to group)
[22:26:21] [INFO] [BloodDecal] Blood puddle created at (805.2225, 737.6703) (added to group)
[22:26:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(388.0495, 759.0851), shooter_id=2306548435999, bullet_pos=(912.4321, 733.63556)
[22:26:21] [INFO] [Bullet] Using shooter_position, distance=524,9999
[22:26:21] [INFO] [Bullet] Distance to wall: 524,9999 (35,748207% of viewport)
[22:26:21] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:26:21] [INFO] [Bullet] Starting wall penetration at (912.4321, 733.63556)
[22:26:21] [INFO] [Bullet] Raycast backward hit penetrating body at distance 14,737723
[22:26:21] [INFO] [BloodDecal] Blood puddle created at (862.2986, 833.11) (added to group)
[22:26:21] [INFO] [Bullet] Body exited signal received for penetrating body
[22:26:21] [INFO] [Bullet] Exiting penetration at (950.7204, 731.77734) after traveling 33,333336 pixels through wall
[22:26:21] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:26:21] [INFO] [BloodDecal] Blood puddle created at (813.1802, 816.265) (added to group)
[22:26:21] [ENEMY] [Enemy3] Ragdoll activated
[22:26:21] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:26:21] [INFO] [BloodDecal] Blood puddle created at (821.8267, 838.053) (added to group)
[22:26:21] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[22:26:21] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[22:26:21] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[22:26:21] [INFO] [BloodDecal] Blood puddle created at (911.0052, 904.2573) (added to group)
[22:26:21] [INFO] [BloodDecal] Blood puddle created at (839.1059, 741.5935) (added to group)
[22:26:21] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=7.0°, player=(384,841), corner_timer=-0.01
[22:26:21] [ENEMY] [Enemy10] PATROL corner check: angle 3.7°
[22:26:21] [INFO] [BloodDecal] Blood puddle created at (845.9453, 865.66) (added to group)
[22:26:21] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.7°, current=9.2°, player=(384,845), corner_timer=0.30
[22:26:21] [INFO] [BloodDecal] Blood puddle created at (819.6551, 812.4487) (added to group)
[22:26:21] [ENEMY] [Enemy2] GRENADE DANGER: Entering EVADING_GRENADE state from PURSUING
[22:26:21] [ENEMY] [Enemy2] EVADING_GRENADE started: escaping to (456.2554, 522.6969)
[22:26:21] [INFO] [BloodDecal] Blood puddle created at (910.001, 918.6573) (added to group)
[22:26:21] [INFO] [BloodDecal] Blood puddle created at (854.3992, 780.5037) (added to group)
[22:26:21] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=-25.9°, current=-6.9°, player=(384,867), corner_timer=0.00
[22:26:21] [ENEMY] [Enemy2] EVADING_GRENADE: Escaped to safe distance
[22:26:21] [ENEMY] [Enemy2] State: EVADING_GRENADE -> PURSUING
[22:26:21] [INFO] [BloodDecal] Blood puddle created at (902.5533, 765.6724) (added to group)
[22:26:21] [ENEMY] [Enemy2] ROT_CHANGE: P4:velocity -> P2:combat_state, state=PURSUING, target=96.0°, current=-25.2°, player=(384,872), corner_timer=0.00
[22:26:21] [INFO] [BloodDecal] Blood puddle created at (894.1837, 935.5208) (added to group)
[22:26:21] [INFO] [BloodDecal] Blood puddle created at (812.5397, 794.1047) (added to group)
[22:26:21] [INFO] [BloodDecal] Blood puddle created at (909.1499, 873.6959) (added to group)
[22:26:21] [INFO] [GrenadeBase] Collision detected with Room1_WallBottom (type: StaticBody2D)
[22:26:21] [INFO] [FragGrenade] Impact detected! Body: Room1_WallBottom (type: StaticBody2D), triggering explosion
[22:26:21] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:26:21] [INFO] [GrenadeBase] EXPLODED at (468.611, 720.1468)!
[22:26:21] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(468.611, 720.1468), source=NEUTRAL (FragGrenade), range=2937, listeners=9
[22:26:21] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=6
[22:26:21] [INFO] [FragGrenade] Player found in blast radius at distance 189.8
[22:26:21] [INFO] [Player] Spawning blood effect at (384.26968, 890.1682), dir=(-0.44438985, 0.8958335), lethal=False (C#)
[22:26:21] [INFO] [ImpactEffects] spawn_blood_effect called at (384.2697, 890.1682), dir=(-0.44439, 0.895833), lethal=false
[22:26:21] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:21] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:26:21] [INFO] [ImpactEffects] Blood effect spawned at (384.2697, 890.1682) (scale=1)
[22:26:21] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[22:26:21] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[22:26:21] [INFO] [Player] Spawning blood effect at (384.26968, 890.1682), dir=(-0.44438985, 0.8958335), lethal=False (C#)
[22:26:21] [INFO] [ImpactEffects] spawn_blood_effect called at (384.2697, 890.1682), dir=(-0.44439, 0.895833), lethal=false
[22:26:21] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:21] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:26:21] [INFO] [ImpactEffects] Blood effect spawned at (384.2697, 890.1682) (scale=1)
[22:26:21] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[22:26:21] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[22:26:21] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[22:26:21] [INFO] [Player] Spawning blood effect at (384.26968, 890.1682), dir=(-0.44438985, 0.8958335), lethal=True (C#)
[22:26:21] [INFO] [ImpactEffects] spawn_blood_effect called at (384.2697, 890.1682), dir=(-0.44439, 0.895833), lethal=true
[22:26:21] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:21] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[22:26:21] [INFO] [ImpactEffects] Blood effect spawned at (384.2697, 890.1682) (scale=1.5)
[22:26:21] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[22:26:21] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[22:26:21] [INFO] [CinemaEffects] Player died - triggering death effects
[22:26:21] [INFO] [CinemaEffects] Death effects triggered - starting cigarette burn, expanding spots, and end of reel (top-right)
[22:26:21] [INFO] [PenultimateHit] Player died - ending penultimate effect
[22:26:21] [INFO] [LastChance] Player died
[22:26:21] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 189.8
[22:26:21] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 4.5 degrees
[22:26:21] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 102.2 degrees
[22:26:21] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 172.6 degrees
[22:26:21] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 285.7 degrees
[22:26:21] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:26:21] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:26:21] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:26:21] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:26:21] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (875.1561, 760.1641)
[22:26:21] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.6°, player=(384,893), corner_timer=-0.01
[22:26:21] [ENEMY] [Enemy10] PATROL corner check: angle 2.0°
[22:26:21] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=2.0°, current=5.9°, player=(384,893), corner_timer=0.30
[22:26:21] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[22:26:21] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:26:21] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:26:21] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:26:21] [INFO] [Player.Grenade] Timer started, grenade created at (384.26968, 893.6349)
[22:26:21] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:26:21] [INFO] [Player.Grenade] Step 1 complete! Drag: (285.92908, 56.126648)
[22:26:21] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:26:21] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[22:26:21] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 2/2 -> 1/2
[22:26:21] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[22:26:21] [INFO] [ImpactEffects] spawn_blood_effect called at (783.704, 894.2213), dir=(0.370031, -0.92902), lethal=false
[22:26:21] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:21] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:26:21] [INFO] [ImpactEffects] Blood effect spawned at (783.704, 894.2213) (scale=1)
[22:26:21] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
[22:26:21] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[22:26:21] [INFO] [BloodDecal] Blood puddle created at (329.8653, 957.9956) (added to group)
[22:26:21] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[22:26:21] [INFO] [BloodDecal] Blood puddle created at (354.8378, 953.9534) (added to group)
[22:26:21] [INFO] [BloodDecal] Blood puddle created at (334.1688, 943.9087) (added to group)
[22:26:21] [INFO] [BloodDecal] Blood puddle created at (377.7411, 949.1168) (added to group)
[22:26:21] [INFO] [BloodDecal] Blood puddle created at (365.9863, 992.7495) (added to group)
[22:26:21] [INFO] [BloodDecal] Blood puddle created at (378.4047, 963.7718) (added to group)
[22:26:21] [INFO] [BloodDecal] Blood puddle created at (380.9005, 980.597) (added to group)
[22:26:21] [INFO] [BloodDecal] Blood puddle created at (352.9737, 985.1634) (added to group)
[22:26:21] [INFO] [BloodDecal] Blood puddle created at (369.111, 966.939) (added to group)
[22:26:21] [INFO] [BloodDecal] Blood puddle created at (377.5165, 994.8743) (added to group)
[22:26:21] [INFO] [BloodDecal] Blood puddle created at (349.8508, 971.9896) (added to group)
[22:26:21] [INFO] [BloodDecal] Blood puddle created at (381.3084, 967.2716) (added to group)
[22:26:21] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
[22:26:21] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[22:26:21] [INFO] [BloodDecal] Blood puddle created at (358.037, 1008.616) (added to group)
[22:26:21] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[22:26:21] [INFO] [BloodDecal] Blood puddle created at (303.4793, 996.9941) (added to group)
[22:26:21] [INFO] [BloodDecal] Blood puddle created at (313.6939, 975.223) (added to group)
[22:26:22] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.9°, player=(384,893), corner_timer=-0.01
[22:26:22] [ENEMY] [Enemy10] PATROL corner check: angle 1.0°
[22:26:22] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.0°, current=4.2°, player=(384,893), corner_timer=0.30
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (290.8105, 1021.733) (added to group)
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (817.9559, 863.1651) (added to group)
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (365.9996, 1040.767) (added to group)
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (352.4998, 1038.608) (added to group)
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (332.4885, 1092.128) (added to group)
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (341.0502, 1070.799) (added to group)
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (347.4803, 1057.787) (added to group)
[22:26:22] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:26:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:22] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:26:22] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:26:22] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:26:22] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:26:22] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:26:22] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:26:22] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:26:22] [INFO] [CinemaEffects] Death effects reset
[22:26:22] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:26:22] [ENEMY] [Enemy1] Death animation component initialized
[22:26:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:22] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:26:22] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:26:22] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:26:22] [ENEMY] [Enemy2] Death animation component initialized
[22:26:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:22] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:26:22] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:26:22] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:26:22] [ENEMY] [Enemy3] Death animation component initialized
[22:26:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:22] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:26:22] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:26:22] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:26:22] [ENEMY] [Enemy4] Death animation component initialized
[22:26:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:22] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:26:22] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:26:22] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:26:22] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:26:22] [ENEMY] [Enemy5] Death animation component initialized
[22:26:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:22] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:26:22] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:26:22] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:26:22] [ENEMY] [Enemy6] Death animation component initialized
[22:26:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:22] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:26:22] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:26:22] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:26:22] [ENEMY] [Enemy7] Death animation component initialized
[22:26:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:22] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:26:22] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:26:22] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:26:22] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:26:22] [ENEMY] [Enemy8] Death animation component initialized
[22:26:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:22] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:26:22] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:26:22] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:26:22] [ENEMY] [Enemy9] Death animation component initialized
[22:26:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:22] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:26:22] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:26:22] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:26:22] [ENEMY] [Enemy10] Death animation component initialized
[22:26:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:22] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:26:22] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:26:22] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:26:22] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:26:22] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:26:22] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:26:22] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:26:22] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:26:22] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:26:22] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:26:22] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:26:22] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[22:26:22] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:26:22] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:26:22] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:26:22] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:26:22] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:26:22] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:26:22] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:26:22] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:26:22] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:26:22] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:26:22] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:26:22] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:26:22] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:26:22] [INFO] [ScoreManager] Level started with 10 enemies
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (345.297, 1082.723) (added to group)
[22:26:22] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:26:22] [INFO] [CinemaEffects] Found player node: Player
[22:26:22] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:26:22] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[22:26:22] [ENEMY] [Enemy1] Registered as sound listener
[22:26:22] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[22:26:22] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:26:22] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[22:26:22] [ENEMY] [Enemy2] Registered as sound listener
[22:26:22] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[22:26:22] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:26:22] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[22:26:22] [ENEMY] [Enemy3] Registered as sound listener
[22:26:22] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[22:26:22] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:26:22] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[22:26:22] [ENEMY] [Enemy4] Registered as sound listener
[22:26:22] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[22:26:22] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:26:22] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[22:26:22] [ENEMY] [Enemy5] Registered as sound listener
[22:26:22] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[22:26:22] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:26:22] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[22:26:22] [ENEMY] [Enemy6] Registered as sound listener
[22:26:22] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[22:26:22] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:26:22] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[22:26:22] [ENEMY] [Enemy7] Registered as sound listener
[22:26:22] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[22:26:22] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:26:22] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[22:26:22] [ENEMY] [Enemy8] Registered as sound listener
[22:26:22] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[22:26:22] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:26:22] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[22:26:22] [ENEMY] [Enemy9] Registered as sound listener
[22:26:22] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[22:26:22] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:26:22] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[22:26:22] [ENEMY] [Enemy10] Registered as sound listener
[22:26:22] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[22:26:22] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:26:22] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:26:22] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:26:22] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:26:22] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:26:22] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:26:22] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:26:22] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=78.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:26:22] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:26:22] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:26:22] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:26:22] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:26:22] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:26:22] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:26:22] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:26:22] [INFO] [LastChance] Found player: Player
[22:26:22] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:26:22] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:26:22] [INFO] [LastChance] Connected to player Died signal (C#)
[22:26:22] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (322.3852, 1076.761) (added to group)
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (324.7066, 1066.147) (added to group)
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (343.4471, 1041.21) (added to group)
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (830.8723, 837.3463) (added to group)
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (303.1036, 1161.269) (added to group)
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (305.3104, 1088.606) (added to group)
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (297.6581, 1154.542) (added to group)
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (860.327, 817.9392) (added to group)
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (282.14, 1118.623) (added to group)
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (351.7938, 1076.89) (added to group)
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (331.4693, 1132.047) (added to group)
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (268.3288, 1152.671) (added to group)
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (332.953, 1209.55) (added to group)
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (324.0005, 1111.044) (added to group)
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (779.178, 862.1583) (added to group)
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (800.3576, 802.2405) (added to group)
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (282.9812, 1202.332) (added to group)
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (382.1671, 1140.453) (added to group)
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (292.9236, 1078.41) (added to group)
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (370.4088, 1125.703) (added to group)
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (285.4655, 1110.09) (added to group)
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (298.1274, 1140.737) (added to group)
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (862.7528, 822.4287) (added to group)
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (847.923, 816.2806) (added to group)
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (777.2352, 779.3166) (added to group)
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (793.8755, 890.5822) (added to group)
[22:26:22] [INFO] [BloodDecal] Blood puddle created at (888.3961, 907.6375) (added to group)
[22:26:22] [INFO] [BloodyFeet:Enemy4] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[22:26:22] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:26:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:22] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[22:26:22] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[22:26:22] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[22:26:22] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[22:26:22] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[22:26:22] [INFO] [LastChance] Resetting all effects (scene change detected)
[22:26:22] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[22:26:22] [ENEMY] [Enemy1] Death animation component initialized
[22:26:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:22] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[22:26:22] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[22:26:22] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[22:26:22] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:26:22] [ENEMY] [Enemy2] Death animation component initialized
[22:26:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:22] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[22:26:22] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[22:26:22] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[22:26:22] [ENEMY] [Enemy3] Death animation component initialized
[22:26:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:22] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[22:26:22] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[22:26:22] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[22:26:22] [ENEMY] [Enemy4] Death animation component initialized
[22:26:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:22] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[22:26:22] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[22:26:22] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[22:26:22] [ENEMY] [Enemy5] Death animation component initialized
[22:26:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:22] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[22:26:22] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[22:26:22] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[22:26:22] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:26:22] [ENEMY] [Enemy6] Death animation component initialized
[22:26:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:22] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[22:26:22] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[22:26:22] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[22:26:22] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:26:22] [ENEMY] [Enemy7] Death animation component initialized
[22:26:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:22] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[22:26:22] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[22:26:22] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[22:26:22] [ENEMY] [Enemy8] Death animation component initialized
[22:26:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:22] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[22:26:22] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[22:26:22] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[22:26:22] [ENEMY] [Enemy9] Death animation component initialized
[22:26:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:22] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[22:26:22] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[22:26:22] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[22:26:22] [INFO] [EnemyGrenade] Initialized: 1 grenades
[22:26:22] [ENEMY] [Enemy10] Death animation component initialized
[22:26:22] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[22:26:22] [INFO] [BloodyFeet:Player] Footprint scene loaded
[22:26:22] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[22:26:22] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[22:26:22] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[22:26:22] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[22:26:22] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[22:26:22] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[22:26:22] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[22:26:22] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[22:26:22] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[22:26:22] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[22:26:22] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[22:26:22] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[22:26:22] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[22:26:22] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[22:26:22] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[22:26:22] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[22:26:22] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[22:26:22] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[22:26:22] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[22:26:22] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[22:26:22] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[22:26:22] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[22:26:22] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[22:26:22] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[22:26:22] [INFO] [ScoreManager] Level started with 10 enemies
[22:26:22] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[22:26:22] [INFO] [CinemaEffects] Found player node: Player
[22:26:22] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[22:26:22] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 20)
[22:26:22] [ENEMY] [Enemy1] Registered as sound listener
[22:26:22] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[22:26:22] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[22:26:22] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 21)
[22:26:22] [ENEMY] [Enemy2] Registered as sound listener
[22:26:22] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[22:26:22] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[22:26:22] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 22)
[22:26:22] [ENEMY] [Enemy3] Registered as sound listener
[22:26:22] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[22:26:22] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[22:26:22] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 23)
[22:26:22] [ENEMY] [Enemy4] Registered as sound listener
[22:26:22] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[22:26:22] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[22:26:22] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 24)
[22:26:22] [ENEMY] [Enemy5] Registered as sound listener
[22:26:22] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[22:26:22] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[22:26:22] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 25)
[22:26:22] [ENEMY] [Enemy6] Registered as sound listener
[22:26:22] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[22:26:22] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[22:26:22] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 26)
[22:26:22] [ENEMY] [Enemy7] Registered as sound listener
[22:26:22] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[22:26:22] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[22:26:22] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 27)
[22:26:22] [ENEMY] [Enemy8] Registered as sound listener
[22:26:22] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[22:26:22] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[22:26:22] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 28)
[22:26:22] [ENEMY] [Enemy9] Registered as sound listener
[22:26:22] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[22:26:22] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[22:26:22] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 29)
[22:26:22] [ENEMY] [Enemy10] Registered as sound listener
[22:26:22] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[22:26:22] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[22:26:22] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:26:22] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:26:22] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:26:22] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:26:22] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:26:22] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:26:22] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=157.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:26:22] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[22:26:22] [INFO] [Player] Detecting weapon pose (frame 3)...
[22:26:22] [INFO] [Player] Detected weapon: Rifle (default pose)
[22:26:22] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[22:26:22] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[22:26:22] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[22:26:22] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[22:26:22] [INFO] [LastChance] Found player: Player
[22:26:22] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[22:26:22] [INFO] [LastChance] Connected to player Damaged signal (C#)
[22:26:22] [INFO] [LastChance] Connected to player Died signal (C#)
[22:26:22] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[22:26:24] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=164.4°, current=123.7°, player=(450,819), corner_timer=0.00
[22:26:24] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[22:26:24] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=166.8°, current=-64.9°, player=(450,808), corner_timer=0.00
[22:26:24] [ENEMY] [Enemy4] Memory: high confidence (0.89) - transitioning to PURSUING
[22:26:24] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[22:26:24] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:26:24] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[22:26:24] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=-161.9°, current=168.8°, player=(450,785), corner_timer=0.00
[22:26:24] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,785), corner_timer=0.30
[22:26:24] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,785), corner_timer=0.30
[22:26:24] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[22:26:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 780.6666), source=PLAYER (AssaultRifle), range=1469, listeners=29
[22:26:24] [INFO] [SoundPropagation] Cleaned up 19 invalid listeners
[22:26:24] [ENEMY] [Enemy1] Heard gunshot at (450, 780.6666), source_type=0, intensity=0.01, distance=456
[22:26:24] [ENEMY] [Enemy2] Heard gunshot at (450, 780.6666), source_type=0, intensity=0.04, distance=236
[22:26:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:26:24] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=70.5°, current=-33.8°, player=(450,774), corner_timer=0.00
[22:26:24] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=77.5°, current=-101.3°, player=(450,774), corner_timer=0.00
[22:26:24] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 3/3 -> 2/3
[22:26:24] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:26:24] [INFO] [ImpactEffects] spawn_blood_effect called at (684.4485, 753.7583), dir=(1, 0), lethal=false
[22:26:24] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:24] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:26:24] [INFO] [ImpactEffects] Blood effect spawned at (684.4485, 753.7583) (scale=1)
[22:26:24] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=177.9°, current=180.0°, player=(450,762), corner_timer=0.00
[22:26:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 765.7222), source=PLAYER (AssaultRifle), range=1469, listeners=10
[22:26:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:26:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[22:26:24] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[22:26:24] [INFO] [LastChance] Threat detected: @Area2D@9722
[22:26:24] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[22:26:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
[22:26:24] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/3 -> 1/3
[22:26:24] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:26:24] [INFO] [ImpactEffects] spawn_blood_effect called at (684.4485, 753.7583), dir=(1, 0), lethal=false
[22:26:24] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:24] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:26:24] [INFO] [ImpactEffects] Blood effect spawned at (684.4485, 753.7583) (scale=1)
[22:26:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 762.7888), source=PLAYER (AssaultRifle), range=1469, listeners=10
[22:26:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[22:26:24] [INFO] [Player] Spawning blood effect at (450, 756.7888), dir=(1, 0), lethal=False (C#)
[22:26:24] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 756.7888), dir=(1, 0), lethal=false
[22:26:24] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:24] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:26:24] [INFO] [ImpactEffects] Blood effect spawned at (450, 756.7888) (scale=1)
[22:26:24] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[22:26:24] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[22:26:24] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[22:26:24] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=57.6°, player=(450,756), corner_timer=-0.01
[22:26:24] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[22:26:24] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=51.7°, player=(450,756), corner_timer=-0.01
[22:26:24] [ENEMY] [Enemy10] PATROL corner check: angle 14.5°
[22:26:24] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.3°, player=(450,756), corner_timer=0.30
[22:26:24] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.5°, current=53.5°, player=(450,756), corner_timer=0.30
[22:26:24] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 1/3 -> 0/3
[22:26:24] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[22:26:24] [INFO] [ImpactEffects] spawn_blood_effect called at (678.8137, 750.7238), dir=(1, 0), lethal=true
[22:26:24] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:24] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[22:26:24] [INFO] [ImpactEffects] Blood effect spawned at (678.8137, 750.7238) (scale=1.5)
[22:26:24] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[22:26:24] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[22:26:24] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[22:26:24] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[22:26:24] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[22:26:24] [ENEMY] [Enemy3] Death animation started with hit direction: (1, 0)
[22:26:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 763.4288), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:26:24] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[22:26:24] [INFO] [BloodDecal] Blood puddle created at (732.5319, 778.8181) (added to group)
[22:26:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(445.3226, 772.2641), source=PLAYER (AssaultRifle), range=1469, listeners=9
[22:26:24] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[22:26:24] [ENEMY] [Enemy4] PURSUING corner check: angle -93.9°
[22:26:24] [INFO] [BloodDecal] Blood puddle created at (747.7285, 773.5787) (added to group)
[22:26:24] [INFO] [BloodDecal] Blood puddle created at (763.0436, 792.8246) (added to group)
[22:26:24] [INFO] [BloodDecal] Blood puddle created at (771.4088, 790.8636) (added to group)
[22:26:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 763.42883), shooter_id=2410164523226, bullet_pos=(908.0318, 746.80615)
[22:26:24] [INFO] [Bullet] Using shooter_position, distance=458,3333
[22:26:24] [INFO] [Bullet] Distance to wall: 458,3333 (31,20876% of viewport)
[22:26:24] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:26:24] [INFO] [Bullet] Starting wall penetration at (908.0318, 746.80615)
[22:26:24] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[22:26:24] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[22:26:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 10,346711
[22:26:24] [INFO] [Bullet] Body exited signal received for penetrating body
[22:26:24] [INFO] [Bullet] Exiting penetration at (946.3399, 745.4159) after traveling 33,333336 pixels through wall
[22:26:24] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:26:24] [INFO] [BloodDecal] Blood puddle created at (779.1199, 790.202) (added to group)
[22:26:24] [INFO] [BloodDecal] Blood puddle created at (773.693, 803.6681) (added to group)
[22:26:24] [INFO] [BloodDecal] Blood puddle created at (795.2368, 802.7753) (added to group)
[22:26:24] [INFO] [BloodDecal] Blood puddle created at (753.334, 792.746) (added to group)
[22:26:25] [INFO] [BloodDecal] Blood puddle created at (739.2781, 751.8613) (added to group)
[22:26:25] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.3°, player=(421,792), corner_timer=-0.01
[22:26:25] [ENEMY] [Enemy10] PATROL corner check: angle 7.3°
[22:26:25] [INFO] [BloodDecal] Blood puddle created at (812.464, 773.044) (added to group)
[22:26:25] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.3°, current=16.4°, player=(418,795), corner_timer=0.30
[22:26:25] [INFO] [BloodDecal] Blood puddle created at (801.855, 800.5172) (added to group)
[22:26:25] [INFO] [BloodDecal] Blood puddle created at (765.5236, 795.375) (added to group)
[22:26:25] [INFO] [BloodDecal] Blood puddle created at (759.1794, 779.283) (added to group)
[22:26:25] [INFO] [BloodDecal] Blood puddle created at (763.691, 731.0237) (added to group)
[22:26:25] [INFO] [BloodDecal] Blood puddle created at (771.5123, 763.0494) (added to group)
[22:26:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(445.32263, 772.2641), shooter_id=2410164523226, bullet_pos=(936.4291, 748.8049)
[22:26:25] [INFO] [Bullet] Using shooter_position, distance=491,6664
[22:26:25] [INFO] [Bullet] Distance to wall: 491,6664 (33,47847% of viewport)
[22:26:25] [INFO] [Bullet] Within ricochet range - trying ricochet first
[22:26:25] [INFO] [Bullet] Starting wall penetration at (936.4291, 748.8049)
[22:26:25] [INFO] [Bullet] Raycast backward hit penetrating body at distance 38,7629
[22:26:25] [INFO] [BloodDecal] Blood puddle created at (568.6765, 736.2894) (added to group)
[22:26:25] [INFO] [Bullet] Body exited signal received for penetrating body
[22:26:25] [INFO] [Bullet] Exiting penetration at (974.71875, 746.9758) after traveling 33,333336 pixels through wall
[22:26:25] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[22:26:25] [INFO] [BloodDecal] Blood puddle created at (542.6674, 784.6767) (added to group)
[22:26:25] [INFO] [BloodDecal] Blood puddle created at (748.415, 795.3484) (added to group)
[22:26:25] [INFO] [BloodDecal] Blood puddle created at (557.9677, 807.9521) (added to group)
[22:26:25] [INFO] [BloodDecal] Blood puddle created at (814.3869, 800.1953) (added to group)
[22:26:25] [INFO] [BloodDecal] Blood puddle created at (777.8623, 767.5389) (added to group)
[22:26:25] [INFO] [BloodDecal] Blood puddle created at (750.673, 784.7811) (added to group)
[22:26:25] [INFO] [BloodDecal] Blood puddle created at (821.7478, 812.0311) (added to group)
[22:26:25] [INFO] [BloodDecal] Blood puddle created at (854.9393, 774.4564) (added to group)
[22:26:25] [INFO] [BloodDecal] Blood puddle created at (900.9034, 876.4316) (added to group)
[22:26:25] [ENEMY] [Enemy3] Ragdoll activated
[22:26:25] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:26:25] [INFO] [BloodDecal] Blood puddle created at (802.2338, 821.5869) (added to group)
[22:26:25] [INFO] [BloodDecal] Blood puddle created at (813.9192, 832.3724) (added to group)
[22:26:25] [INFO] [BloodDecal] Blood puddle created at (884.2526, 807.9315) (added to group)
[22:26:25] [INFO] [BloodDecal] Blood puddle created at (824.655, 776.5002) (added to group)
[22:26:25] [INFO] [BloodDecal] Blood puddle created at (783.3652, 815.9337) (added to group)
[22:26:25] [INFO] [BloodDecal] Blood puddle created at (858.5941, 794.7474) (added to group)
[22:26:25] [INFO] [BloodDecal] Blood puddle created at (845.1702, 859.5481) (added to group)
[22:26:25] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=7.2°, player=(355,855), corner_timer=-0.01
[22:26:25] [ENEMY] [Enemy10] PATROL corner check: angle 3.8°
[22:26:25] [INFO] [BloodDecal] Blood puddle created at (850.6387, 817.9288) (added to group)
[22:26:25] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.8°, current=9.4°, player=(354,856), corner_timer=0.30
[22:26:25] [INFO] [BloodDecal] Blood puddle created at (646.0326, 804.4255) (added to group)
[22:26:25] [INFO] [BloodDecal] Blood puddle created at (853.5195, 829.5721) (added to group)
[22:26:25] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:26:25] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[22:26:25] [INFO] [Player.Grenade] G pressed - starting grab animation
[22:26:25] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[22:26:25] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (1026.8054, 765.0891)
[22:26:25] [INFO] [BloodDecal] Blood puddle created at (908.9149, 896.9921) (added to group)
[22:26:25] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[22:26:25] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[22:26:25] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[22:26:25] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[22:26:25] [INFO] [Player.Grenade] Timer started, grenade created at (346.7805, 863.40295)
[22:26:25] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[22:26:25] [INFO] [Player.Grenade] Step 1 complete! Drag: (85.511475, 14.312866)
[22:26:25] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[22:26:25] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[22:26:25] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.7°, player=(346,863), corner_timer=-0.01
[22:26:25] [ENEMY] [Enemy10] PATROL corner check: angle 2.0°
[22:26:25] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=2.0°, current=6.0°, player=(346,863), corner_timer=0.30
[22:26:26] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=2.0°, player=(359,860), corner_timer=-0.01
[22:26:26] [ENEMY] [Enemy10] PATROL corner check: angle 1.1°
[22:26:26] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.1°, current=4.2°, player=(361,859), corner_timer=0.30
[22:26:26] [ENEMY] [Enemy3] Death animation completed
[22:26:26] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.1°, player=(426,797), corner_timer=-0.01
[22:26:26] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:26:26] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.6°, current=3.3°, player=(430,794), corner_timer=0.30
[22:26:26] [ENEMY] [Enemy1] Warning: No valid flank position (both sides behind walls)
[22:26:26] [ENEMY] [Enemy1] FLANKING started: target=(259.6658, 768.4468), side=left, pos=(240.061, 401.9334)
[22:26:26] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
[22:26:26] [ENEMY] [Enemy2] PURSUING corner check: angle 166.9°
[22:26:26] [ENEMY] [Enemy1] FLANKING corner check: angle -115.7°
[22:26:26] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.9°, current=-129.0°, player=(472,747), corner_timer=-0.01
[22:26:26] [ENEMY] [Enemy7] PATROL corner check: angle 89.9°
[22:26:26] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.9°, current=-131.3°, player=(474,745), corner_timer=0.30
[22:26:26] [INFO] [Player.Grenade.Simple] Throwing! Target: (712.1499, 839.9498), Distance: 227,5, Speed: 357,0, Friction: 280,0
[22:26:26] [INFO] [Player.Grenade] Player rotated for throw: 0 -> 0,39487162
[22:26:26] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.923046, 0.38469), Speed: 357.0 (clamped from 357.0, max: 1186.5)
[22:26:26] [INFO] [FragGrenade] Grenade thrown (simple mode) - impact detection enabled
[22:26:26] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[22:26:26] [INFO] [Player.Grenade.Simple] Grenade thrown!
[22:26:26] [INFO] [Player.Grenade] State reset to IDLE
[22:26:26] [INFO] [Player.Grenade] State reset to IDLE
[22:26:26] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[22:26:27] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:26:27] [INFO] [Player.Grenade] Player rotation restored to 0
[22:26:27] [ENEMY] [Enemy4] PURSUING corner check: angle -36.5°
[22:26:27] [ENEMY] [Enemy1] FLANKING corner check: angle 14.9°
[22:26:27] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.8°, current=175.8°, player=(443,728), corner_timer=-0.01
[22:26:27] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[22:26:27] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=178.1°, player=(439,728), corner_timer=0.30
[22:26:27] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[22:26:27] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:26:27] [INFO] [GrenadeBase] Collision detected with Table1 (type: StaticBody2D)
[22:26:27] [INFO] [FragGrenade] Impact detected! Body: Table1 (type: StaticBody2D), triggering explosion
[22:26:27] [INFO] [FragGrenade] Impact detected - exploding immediately!
[22:26:27] [INFO] [GrenadeBase] EXPLODED at (671.6046, 824.841)!
[22:26:27] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(671.6046, 824.841), source=NEUTRAL (FragGrenade), range=2937, listeners=9
[22:26:27] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=7
[22:26:27] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 2/2 -> 1/2
[22:26:27] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[22:26:27] [INFO] [ImpactEffects] spawn_blood_effect called at (550.9855, 870.2161), dir=(-0.935964, 0.352096), lethal=false
[22:26:27] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:27] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[22:26:27] [INFO] [ImpactEffects] Wall found for blood splatter at (524, 880.3676) (dist=28 px)
[22:26:27] [INFO] [BloodDecal] Blood puddle created at (525, 880.3676) (added to group)
[22:26:27] [INFO] [ImpactEffects] Blood effect spawned at (550.9855, 870.2161) (scale=1)
[22:26:27] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 1/2 -> 0/2
[22:26:27] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[22:26:27] [INFO] [ImpactEffects] spawn_blood_effect called at (550.9855, 870.2161), dir=(-0.935964, 0.352096), lethal=true
[22:26:27] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[22:26:27] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[22:26:27] [INFO] [ImpactEffects] Wall found for blood splatter at (524, 880.3676) (dist=28 px)
[22:26:27] [INFO] [BloodDecal] Blood puddle created at (525, 880.3676) (added to group)
[22:26:27] [INFO] [ImpactEffects] Blood effect spawned at (550.9855, 870.2161) (scale=1.5)
[22:26:27] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
[22:26:27] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
[22:26:27] [ENEMY] [Enemy4] [AllyDeath] Notified 2 enemies
[22:26:27] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 8)
[22:26:27] [INFO] [DeathAnim] Started - Angle: 159.4 deg, Index: 22
[22:26:27] [ENEMY] [Enemy4] Death animation started with hit direction: (-0.935964, 0.352096)
[22:26:27] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 128.9
[22:26:27] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 17.8 degrees
[22:26:27] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 93.4 degrees
[22:26:27] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 173.0 degrees
[22:26:27] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 268.9 degrees
[22:26:27] [ENEMY] [Enemy1] FLANKING corner check: angle 117.3°
[22:26:27] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=124.1°, player=(356,772), corner_timer=-0.01
[22:26:27] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[22:26:27] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=126.9°, player=(352,776), corner_timer=0.30
[22:26:27] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:26:28] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
[22:26:28] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P3:corner, state=RETREATING, target=166.9°, current=123.7°, player=(287,838), corner_timer=0.02
[22:26:28] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[22:26:28] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[22:26:28] [ENEMY] [Enemy1] FLANKING corner check: angle -63.9°
[22:26:28] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(281,844), corner_timer=-0.02
[22:26:28] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[22:26:28] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(279,846), corner_timer=0.30
[22:26:28] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:26:28] [ENEMY] [Enemy4] Ragdoll activated
[22:26:28] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[22:26:28] [ENEMY] [Enemy1] FLANKING corner check: angle -101.9°
[22:26:28] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.5°, current=89.5°, player=(264,859), corner_timer=-0.02
[22:26:28] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[22:26:28] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(264,859), corner_timer=0.30
[22:26:28] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:26:28] [ENEMY] [Enemy1] FLANKING corner check: angle -98.2°
[22:26:28] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.4°, current=89.5°, player=(264,859), corner_timer=-0.02
[22:26:28] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[22:26:28] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.3°, player=(264,859), corner_timer=0.30
[22:26:28] [ENEMY] [Enemy4] Death animation completed
[22:26:28] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:26:29] [ENEMY] [Enemy1] FLANKING corner check: angle -73.0°
[22:26:29] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.5°, player=(264,859), corner_timer=-0.02
[22:26:29] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[22:26:29] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(264,859), corner_timer=0.30
[22:26:29] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:26:29] [ENEMY] [Enemy1] FLANKING corner check: angle -74.6°
[22:26:29] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(264,859), corner_timer=-0.02
[22:26:29] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[22:26:29] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(264,859), corner_timer=0.30
[22:26:29] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:26:29] [ENEMY] [Enemy1] FLANKING corner check: angle -71.9°
[22:26:29] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(264,859), corner_timer=-0.02
[22:26:29] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[22:26:29] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(264,859), corner_timer=0.30
[22:26:29] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:26:30] [ENEMY] [Enemy1] FLANKING corner check: angle -73.9°
[22:26:30] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(264,859), corner_timer=-0.02
[22:26:30] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[22:26:30] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(264,859), corner_timer=0.30
[22:26:30] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:26:30] [ENEMY] [Enemy2] State: SUPPRESSED -> IN_COVER
[22:26:30] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
[22:26:30] [ENEMY] [Enemy1] FLANKING corner check: angle -98.3°
[22:26:30] [ENEMY] [Enemy2] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=125.6°, current=166.9°, player=(264,859), corner_timer=0.02
[22:26:30] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(264,859), corner_timer=-0.02
[22:26:30] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[22:26:30] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(264,859), corner_timer=0.30
[22:26:30] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[22:26:30] [INFO] ------------------------------------------------------------
[22:26:30] [INFO] GAME LOG ENDED: 2026-02-03T22:26:30
[22:26:30] [INFO] ============================================================
