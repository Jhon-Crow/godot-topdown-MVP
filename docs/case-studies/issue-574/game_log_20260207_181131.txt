[18:11:31] [INFO] ============================================================
[18:11:31] [INFO] GAME LOG STARTED
[18:11:31] [INFO] ============================================================
[18:11:31] [INFO] Timestamp: 2026-02-07T18:11:31
[18:11:31] [INFO] Log file: I:/Загрузки/godot exe/фанарик/game_log_20260207_181131.txt
[18:11:31] [INFO] Executable: I:/Загрузки/godot exe/фанарик/Godot-Top-Down-Template.exe
[18:11:31] [INFO] OS: Windows
[18:11:31] [INFO] Debug build: false
[18:11:31] [INFO] Engine version: 4.3-stable (official)
[18:11:31] [INFO] Project: Godot Top-Down Template
[18:11:31] [INFO] ------------------------------------------------------------
[18:11:31] [INFO] [GameManager] GameManager ready
[18:11:31] [INFO] [ScoreManager] ScoreManager ready
[18:11:31] [INFO] [SoundPropagation] SoundPropagation autoload initialized
[18:11:31] [INFO] [ImpactEffects] Scenes loaded: DustEffect, BloodEffect, SparksEffect, BloodDecal
[18:11:31] [INFO] [ImpactEffects] ImpactEffectsManager ready - FULL VERSION with blood effects enabled
[18:11:31] [INFO] [ImpactEffects] Starting particle shader warmup (Issue #343 fix)...
[18:11:31] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[18:11:31] [INFO] [PenultimateHit] Saturation shader loaded successfully
[18:11:31] [INFO] [PenultimateHit] Starting shader warmup (Issue #343 fix)...
[18:11:31] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
[18:11:31] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
[18:11:31] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
[18:11:31] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
[18:11:31] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
[18:11:31] [INFO] [LastChance] Resetting all effects (scene change detected)
[18:11:31] [INFO] [LastChance] Last chance shader loaded successfully
[18:11:31] [INFO] [LastChance] Starting shader warmup (Issue #343 fix)...
[18:11:31] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
[18:11:31] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
[18:11:31] [INFO] [LastChance]   Sepia intensity: 0.70
[18:11:31] [INFO] [LastChance]   Brightness: 0.60
[18:11:31] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
[18:11:31] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
[18:11:31] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/DefensiveGrenade.tscn
[18:11:31] [INFO] [ExperimentalSettings] ExperimentalSettings initialized - FOV: true, Complex grenades: false, AI prediction: true, Debug: false, Invincibility: true, Realistic visibility: false
[18:11:31] [INFO] [CinemaEffects] CinemaEffectsManager initializing (v5.3 - overlay approach with simplified death circle)...
[18:11:31] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[18:11:31] [INFO] [CinemaEffects] Created effects layer at layer 99
[18:11:31] [INFO] [CinemaEffects] Cinema shader loaded successfully (v5.0 - no screen_texture)
[18:11:31] [INFO] [CinemaEffects] Starting cinema shader warmup (Issue #343 fix)...
[18:11:31] [INFO] [CinemaEffects] Cinema film effect initialized (v5.3) - Configuration:
[18:11:31] [INFO] [CinemaEffects]   Approach: Overlay-based (no screen_texture)
[18:11:31] [INFO] [CinemaEffects]   Grain intensity: 0.15
[18:11:31] [INFO] [CinemaEffects]   Warm tint: 0.12 intensity
[18:11:31] [INFO] [CinemaEffects]   Sunny effect: 0.08 intensity
[18:11:31] [INFO] [CinemaEffects]   Vignette: 0.25 intensity
[18:11:31] [INFO] [CinemaEffects]   Film defects: 1.5% probability
[18:11:31] [INFO] [CinemaEffects]   White specks: 0.70 intensity, 4.0% probability
[18:11:31] [INFO] [CinemaEffects]   Death effects: cigarette burn + expanding spots + end of reel circle (160px, blinks 2x)
[18:11:31] [INFO] [CinemaEffects] Enabling effect after 1 frame(s)...
[18:11:31] [INFO] [GrenadeTimerHelper] Autoload ready
[18:11:31] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[18:11:31] [INFO] [PowerFantasy] Saturation shader loaded successfully
[18:11:31] [INFO] [PowerFantasy] PowerFantasyEffectsManager ready - Configuration:
[18:11:31] [INFO] [PowerFantasy]   Kill effect duration: 300ms
[18:11:31] [INFO] [PowerFantasy]   Grenade effect duration: 2000ms (2.0s)
[18:11:31] [INFO] [ProgressManager] ProgressManager ready, loaded 4 entries
[18:11:31] [INFO] [ReplayManager] ReplayManager ready (C# version loaded and _Ready called)
[18:11:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:31] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[18:11:31] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[18:11:31] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[18:11:31] [ENEMY] [Enemy1] Death animation component initialized
[18:11:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:31] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[18:11:31] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[18:11:31] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[18:11:31] [ENEMY] [Enemy2] Death animation component initialized
[18:11:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:31] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[18:11:31] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[18:11:31] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[18:11:31] [ENEMY] [Enemy3] Death animation component initialized
[18:11:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:31] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[18:11:31] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[18:11:31] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[18:11:31] [ENEMY] [Enemy4] Death animation component initialized
[18:11:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:31] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[18:11:31] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[18:11:31] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[18:11:31] [ENEMY] [Enemy5] Death animation component initialized
[18:11:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:31] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[18:11:31] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[18:11:31] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[18:11:31] [ENEMY] [Enemy6] Death animation component initialized
[18:11:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:31] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[18:11:31] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[18:11:31] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[18:11:31] [ENEMY] [Enemy7] Death animation component initialized
[18:11:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:31] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[18:11:31] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[18:11:31] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[18:11:31] [ENEMY] [Enemy8] Death animation component initialized
[18:11:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:31] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[18:11:31] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[18:11:31] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[18:11:31] [ENEMY] [Enemy9] Death animation component initialized
[18:11:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:31] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[18:11:31] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[18:11:31] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[18:11:31] [ENEMY] [Enemy10] Death animation component initialized
[18:11:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:31] [INFO] [BloodyFeet:Player] Footprint scene loaded
[18:11:31] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[18:11:31] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[18:11:31] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[18:11:31] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[18:11:31] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[18:11:31] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[18:11:31] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[18:11:31] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[18:11:31] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[18:11:31] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[18:11:31] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[18:11:31] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 10/10
[18:11:31] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[18:11:31] [INFO] [BloodDecal] Blood puddle created at (640, 360) (added to group)
[18:11:31] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[18:11:31] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[18:11:31] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[18:11:31] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[18:11:31] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[18:11:31] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[18:11:31] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[18:11:31] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[18:11:31] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[18:11:31] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[18:11:31] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[18:11:31] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[18:11:31] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[18:11:31] [INFO] [ScoreManager] Level started with 10 enemies
[18:11:31] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[18:11:31] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[18:11:31] [INFO] [ReplayManager] Replay data cleared
[18:11:31] [INFO] [BuildingLevel] Previous replay data cleared
[18:11:31] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[18:11:31] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[18:11:31] [INFO] [ReplayManager] Level: BuildingLevel
[18:11:31] [INFO] [ReplayManager] Player: Player (valid: True)
[18:11:31] [INFO] [ReplayManager] Enemies count: 10
[18:11:31] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[18:11:31] [INFO] [ReplayManager]   Enemy 0: Enemy1
[18:11:31] [INFO] [ReplayManager]   Enemy 1: Enemy2
[18:11:31] [INFO] [ReplayManager]   Enemy 2: Enemy3
[18:11:31] [INFO] [ReplayManager]   Enemy 3: Enemy4
[18:11:31] [INFO] [ReplayManager]   Enemy 4: Enemy5
[18:11:31] [INFO] [ReplayManager]   Enemy 5: Enemy6
[18:11:31] [INFO] [ReplayManager]   Enemy 6: Enemy7
[18:11:31] [INFO] [ReplayManager]   Enemy 7: Enemy8
[18:11:31] [INFO] [ReplayManager]   Enemy 8: Enemy9
[18:11:31] [INFO] [ReplayManager]   Enemy 9: Enemy10
[18:11:31] [INFO] [BuildingLevel] Replay recording started successfully
[18:11:31] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[18:11:32] [INFO] [CinemaEffects] Found player node: Player
[18:11:32] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[18:11:32] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[18:11:32] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
[18:11:32] [ENEMY] [Enemy1] Registered as sound listener
[18:11:32] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[18:11:32] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[18:11:32] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
[18:11:32] [ENEMY] [Enemy2] Registered as sound listener
[18:11:32] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[18:11:32] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[18:11:32] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
[18:11:32] [ENEMY] [Enemy3] Registered as sound listener
[18:11:32] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[18:11:32] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[18:11:32] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
[18:11:32] [ENEMY] [Enemy4] Registered as sound listener
[18:11:32] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[18:11:32] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[18:11:32] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
[18:11:32] [ENEMY] [Enemy5] Registered as sound listener
[18:11:32] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[18:11:32] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[18:11:32] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
[18:11:32] [ENEMY] [Enemy6] Registered as sound listener
[18:11:32] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[18:11:32] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[18:11:32] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
[18:11:32] [ENEMY] [Enemy7] Registered as sound listener
[18:11:32] [ENEMY] [Enemy7] Spawned at (1606.114, 893.8859), hp: 3, behavior: PATROL
[18:11:32] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[18:11:32] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
[18:11:32] [ENEMY] [Enemy8] Registered as sound listener
[18:11:32] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[18:11:32] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[18:11:32] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
[18:11:32] [ENEMY] [Enemy9] Registered as sound listener
[18:11:32] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[18:11:32] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[18:11:32] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
[18:11:32] [ENEMY] [Enemy10] Registered as sound listener
[18:11:32] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[18:11:32] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[18:11:32] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:11:32] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:11:32] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=236.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:11:32] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:11:32] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:11:32] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:11:32] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=78.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:11:32] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:11:32] [INFO] [Player] Detecting weapon pose (frame 3)...
[18:11:32] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[18:11:32] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[18:11:32] [INFO] [PenultimateHit] Shader warmup complete in 467 ms
[18:11:32] [INFO] [LastChance] Shader warmup complete in 465 ms
[18:11:32] [INFO] [CinemaEffects] Cinema shader warmup complete in 406 ms
[18:11:32] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[18:11:32] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[18:11:32] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[18:11:32] [INFO] [LastChance] Found player: Player
[18:11:32] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[18:11:32] [INFO] [LastChance] Connected to player Damaged signal (C#)
[18:11:32] [INFO] [LastChance] Connected to player Died signal (C#)
[18:11:32] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[18:11:32] [INFO] [ImpactEffects] Particle shader warmup complete: 7 effects warmed up in 746 ms
[18:11:33] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[18:11:33] [INFO] [PauseMenu] Armory button pressed
[18:11:33] [INFO] [PauseMenu] Creating new armory menu instance
[18:11:33] [INFO] [PauseMenu] armory_menu_scene resource path: res://scenes/ui/ArmoryMenu.tscn
[18:11:33] [INFO] [PauseMenu] Instance created, class: CanvasLayer, name: ArmoryMenu
[18:11:33] [INFO] [PauseMenu] Script attached: res://scripts/ui/armory_menu.gd
[18:11:33] [INFO] [PauseMenu] back_pressed signal exists on instance
[18:11:33] [INFO] [PauseMenu] back_pressed signal connected
[18:11:33] [INFO] [PauseMenu] Armory menu instance added as child, is_inside_tree: true
[18:11:33] [INFO] [PauseMenu] _populate_weapon_grid method exists
[18:11:34] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[18:11:34] [INFO] [ActiveItemManager] Active item changed from None to Flashlight
[18:11:34] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[18:11:34] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:34] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[18:11:34] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[18:11:34] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[18:11:34] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[18:11:34] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[18:11:34] [INFO] [LastChance] Resetting all effects (scene change detected)
[18:11:34] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[18:11:34] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[18:11:34] [ENEMY] [Enemy1] Death animation component initialized
[18:11:34] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:34] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[18:11:34] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[18:11:34] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[18:11:34] [ENEMY] [Enemy2] Death animation component initialized
[18:11:34] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:34] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[18:11:34] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[18:11:34] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[18:11:34] [ENEMY] [Enemy3] Death animation component initialized
[18:11:34] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:34] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[18:11:34] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[18:11:34] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[18:11:34] [ENEMY] [Enemy4] Death animation component initialized
[18:11:34] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:34] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[18:11:34] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[18:11:34] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[18:11:34] [ENEMY] [Enemy5] Death animation component initialized
[18:11:34] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:34] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[18:11:34] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[18:11:34] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[18:11:34] [ENEMY] [Enemy6] Death animation component initialized
[18:11:34] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:34] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[18:11:34] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[18:11:34] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[18:11:34] [ENEMY] [Enemy7] Death animation component initialized
[18:11:34] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:34] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[18:11:34] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[18:11:34] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[18:11:34] [ENEMY] [Enemy8] Death animation component initialized
[18:11:34] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:34] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[18:11:34] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[18:11:34] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[18:11:34] [ENEMY] [Enemy9] Death animation component initialized
[18:11:34] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:34] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[18:11:34] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[18:11:34] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[18:11:34] [ENEMY] [Enemy10] Death animation component initialized
[18:11:34] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:34] [INFO] [BloodyFeet:Player] Footprint scene loaded
[18:11:34] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[18:11:34] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[18:11:34] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[18:11:34] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[18:11:34] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[18:11:34] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[18:11:34] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[18:11:34] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[18:11:34] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[18:11:34] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[18:11:34] [INFO] [Player.Flashlight] Flashlight is selected, initializing...
[18:11:34] [INFO] [FlashlightEffect] PointLight2D found, energy=0.0, shadow=true
[18:11:34] [INFO] [FlashlightEffect] Flashlight sound loaded
[18:11:34] [INFO] [Player.Flashlight] Flashlight equipped and attached to PlayerModel at offset (20, 0)
[18:11:34] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 10/10
[18:11:34] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[18:11:34] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[18:11:34] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[18:11:34] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[18:11:34] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[18:11:34] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[18:11:34] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[18:11:34] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[18:11:34] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[18:11:34] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[18:11:34] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[18:11:34] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[18:11:34] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[18:11:34] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[18:11:34] [INFO] [ScoreManager] Level started with 10 enemies
[18:11:34] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[18:11:34] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[18:11:34] [INFO] [ReplayManager] Replay data cleared
[18:11:34] [INFO] [BuildingLevel] Previous replay data cleared
[18:11:34] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[18:11:34] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[18:11:34] [INFO] [ReplayManager] Level: BuildingLevel
[18:11:34] [INFO] [ReplayManager] Player: Player (valid: True)
[18:11:34] [INFO] [ReplayManager] Enemies count: 10
[18:11:34] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[18:11:34] [INFO] [ReplayManager]   Enemy 0: Enemy1
[18:11:34] [INFO] [ReplayManager]   Enemy 1: Enemy2
[18:11:34] [INFO] [ReplayManager]   Enemy 2: Enemy3
[18:11:34] [INFO] [ReplayManager]   Enemy 3: Enemy4
[18:11:34] [INFO] [ReplayManager]   Enemy 4: Enemy5
[18:11:34] [INFO] [ReplayManager]   Enemy 5: Enemy6
[18:11:34] [INFO] [ReplayManager]   Enemy 6: Enemy7
[18:11:34] [INFO] [ReplayManager]   Enemy 7: Enemy8
[18:11:34] [INFO] [ReplayManager]   Enemy 8: Enemy9
[18:11:34] [INFO] [ReplayManager]   Enemy 9: Enemy10
[18:11:34] [INFO] [BuildingLevel] Replay recording started successfully
[18:11:34] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[18:11:34] [INFO] [CinemaEffects] Found player node: Player
[18:11:34] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[18:11:34] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[18:11:34] [ENEMY] [Enemy1] Registered as sound listener
[18:11:34] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[18:11:34] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[18:11:34] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[18:11:34] [ENEMY] [Enemy2] Registered as sound listener
[18:11:34] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[18:11:34] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[18:11:34] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[18:11:34] [ENEMY] [Enemy3] Registered as sound listener
[18:11:34] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[18:11:34] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[18:11:34] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[18:11:34] [ENEMY] [Enemy4] Registered as sound listener
[18:11:34] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[18:11:34] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[18:11:34] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[18:11:34] [ENEMY] [Enemy5] Registered as sound listener
[18:11:34] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[18:11:34] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[18:11:34] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[18:11:34] [ENEMY] [Enemy6] Registered as sound listener
[18:11:34] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[18:11:34] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[18:11:34] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[18:11:34] [ENEMY] [Enemy7] Registered as sound listener
[18:11:34] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[18:11:34] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[18:11:34] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[18:11:34] [ENEMY] [Enemy8] Registered as sound listener
[18:11:34] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[18:11:34] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[18:11:34] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[18:11:34] [ENEMY] [Enemy9] Registered as sound listener
[18:11:34] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[18:11:34] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[18:11:34] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[18:11:34] [ENEMY] [Enemy10] Registered as sound listener
[18:11:34] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[18:11:34] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[18:11:34] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[18:11:34] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:11:34] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:11:34] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:11:34] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:11:34] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:11:34] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:11:34] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=213.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:11:34] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:11:34] [INFO] [Player] Detecting weapon pose (frame 3)...
[18:11:34] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[18:11:34] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[18:11:34] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[18:11:34] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[18:11:34] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[18:11:34] [INFO] [LastChance] Found player: Player
[18:11:34] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[18:11:34] [INFO] [LastChance] Connected to player Damaged signal (C#)
[18:11:34] [INFO] [LastChance] Connected to player Died signal (C#)
[18:11:34] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[18:11:35] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[18:11:36] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[18:11:36] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[18:11:36] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,921), corner_timer=0.30
[18:11:36] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,921), corner_timer=0.30
[18:11:36] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,916), corner_timer=-0.02
[18:11:36] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[18:11:36] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,916), corner_timer=-0.02
[18:11:36] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[18:11:36] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,916), corner_timer=0.30
[18:11:36] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,916), corner_timer=0.30
[18:11:36] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[18:11:36] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,916), corner_timer=-0.02
[18:11:36] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[18:11:36] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,916), corner_timer=0.30
[18:11:37] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,916), corner_timer=-0.02
[18:11:37] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[18:11:37] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,916), corner_timer=0.30
[18:11:37] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(450,916), corner_timer=-0.02
[18:11:37] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[18:11:37] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(450,916), corner_timer=0.30
[18:11:37] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[18:11:37] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(450,916), corner_timer=-0.02
[18:11:37] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[18:11:37] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(450,916), corner_timer=0.30
[18:11:38] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:38] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(450,916), corner_timer=-0.02
[18:11:38] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[18:11:38] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(450,916), corner_timer=0.30
[18:11:38] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:38] [INFO] [ReplayManager] Recording frame 240 (4,0s): player_valid=True, enemies=10
[18:11:38] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(450,916), corner_timer=-0.02
[18:11:38] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[18:11:38] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(450,916), corner_timer=0.30
[18:11:38] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:39] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(419,916), corner_timer=-0.02
[18:11:39] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[18:11:39] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(415,916), corner_timer=0.30
[18:11:39] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:39] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(313,916), corner_timer=-0.02
[18:11:39] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[18:11:39] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(309,916), corner_timer=0.30
[18:11:39] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:39] [INFO] [ReplayManager] Recording frame 300 (5,0s): player_valid=True, enemies=10
[18:11:39] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(281,916), corner_timer=-0.02
[18:11:39] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[18:11:39] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(281,916), corner_timer=0.30
[18:11:39] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:40] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.5°, current=89.5°, player=(281,916), corner_timer=-0.02
[18:11:40] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[18:11:40] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(281,916), corner_timer=0.30
[18:11:40] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:40] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.4°, current=89.5°, player=(281,916), corner_timer=-0.02
[18:11:40] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[18:11:40] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.3°, player=(281,916), corner_timer=0.30
[18:11:40] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:40] [INFO] [ReplayManager] Recording frame 360 (6,0s): player_valid=True, enemies=10
[18:11:40] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.5°, player=(281,916), corner_timer=-0.02
[18:11:40] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:40] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(281,916), corner_timer=0.30
[18:11:40] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:41] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(281,916), corner_timer=-0.02
[18:11:41] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:41] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(281,916), corner_timer=0.30
[18:11:41] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:41] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(281,916), corner_timer=-0.02
[18:11:41] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:41] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(281,916), corner_timer=0.30
[18:11:41] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:41] [INFO] [ReplayManager] Recording frame 420 (7,0s): player_valid=True, enemies=10
[18:11:41] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(281,916), corner_timer=-0.02
[18:11:41] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:41] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(281,916), corner_timer=0.30
[18:11:41] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:42] [INFO] [Player.Debug] Debug mode toggled: ON
[18:11:42] [INFO] [ExperimentalSettings] Debug mode enabled
[18:11:42] [INFO] [GameManager] Debug mode toggled: ON
[18:11:42] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(281,916), corner_timer=-0.02
[18:11:42] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:42] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(281,916), corner_timer=0.30
[18:11:42] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:42] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(281,916), corner_timer=-0.02
[18:11:42] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:42] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[18:11:42] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:42] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[18:11:42] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[18:11:42] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[18:11:42] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[18:11:42] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[18:11:42] [INFO] [LastChance] Resetting all effects (scene change detected)
[18:11:42] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[18:11:42] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[18:11:42] [ENEMY] [Enemy1] Death animation component initialized
[18:11:42] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:42] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[18:11:42] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[18:11:42] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[18:11:42] [ENEMY] [Enemy2] Death animation component initialized
[18:11:42] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:42] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[18:11:42] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[18:11:42] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[18:11:42] [ENEMY] [Enemy3] Death animation component initialized
[18:11:42] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:42] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[18:11:42] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[18:11:42] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[18:11:42] [ENEMY] [Enemy4] Death animation component initialized
[18:11:42] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:42] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[18:11:42] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[18:11:42] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[18:11:42] [ENEMY] [Enemy5] Death animation component initialized
[18:11:42] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:42] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[18:11:42] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[18:11:42] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[18:11:42] [ENEMY] [Enemy6] Death animation component initialized
[18:11:42] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:42] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[18:11:42] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[18:11:42] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[18:11:42] [ENEMY] [Enemy7] Death animation component initialized
[18:11:42] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:42] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[18:11:42] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[18:11:42] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[18:11:42] [ENEMY] [Enemy8] Death animation component initialized
[18:11:42] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:42] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[18:11:42] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[18:11:42] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[18:11:42] [ENEMY] [Enemy9] Death animation component initialized
[18:11:42] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:42] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[18:11:42] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[18:11:42] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[18:11:42] [ENEMY] [Enemy10] Death animation component initialized
[18:11:42] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:42] [INFO] [BloodyFeet:Player] Footprint scene loaded
[18:11:42] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[18:11:42] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[18:11:42] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[18:11:42] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[18:11:42] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[18:11:42] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[18:11:42] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[18:11:42] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[18:11:42] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[18:11:42] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[18:11:42] [INFO] [Player.Flashlight] Flashlight is selected, initializing...
[18:11:42] [INFO] [FlashlightEffect] PointLight2D found, energy=0.0, shadow=true
[18:11:42] [INFO] [FlashlightEffect] Flashlight sound loaded
[18:11:42] [INFO] [Player.Flashlight] Flashlight equipped and attached to PlayerModel at offset (20, 0)
[18:11:42] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 10/10
[18:11:42] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[18:11:42] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[18:11:42] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[18:11:42] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[18:11:42] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[18:11:42] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[18:11:42] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[18:11:42] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[18:11:42] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[18:11:42] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[18:11:42] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[18:11:42] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[18:11:42] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[18:11:42] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[18:11:42] [INFO] [ScoreManager] Level started with 10 enemies
[18:11:42] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[18:11:42] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[18:11:42] [INFO] [ReplayManager] Replay data cleared
[18:11:42] [INFO] [BuildingLevel] Previous replay data cleared
[18:11:42] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[18:11:42] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[18:11:42] [INFO] [ReplayManager] Level: BuildingLevel
[18:11:42] [INFO] [ReplayManager] Player: Player (valid: True)
[18:11:42] [INFO] [ReplayManager] Enemies count: 10
[18:11:42] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[18:11:42] [INFO] [ReplayManager]   Enemy 0: Enemy1
[18:11:42] [INFO] [ReplayManager]   Enemy 1: Enemy2
[18:11:42] [INFO] [ReplayManager]   Enemy 2: Enemy3
[18:11:42] [INFO] [ReplayManager]   Enemy 3: Enemy4
[18:11:42] [INFO] [ReplayManager]   Enemy 4: Enemy5
[18:11:42] [INFO] [ReplayManager]   Enemy 5: Enemy6
[18:11:42] [INFO] [ReplayManager]   Enemy 6: Enemy7
[18:11:42] [INFO] [ReplayManager]   Enemy 7: Enemy8
[18:11:42] [INFO] [ReplayManager]   Enemy 8: Enemy9
[18:11:42] [INFO] [ReplayManager]   Enemy 9: Enemy10
[18:11:42] [INFO] [BuildingLevel] Replay recording started successfully
[18:11:42] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[18:11:42] [INFO] [CinemaEffects] Found player node: Player
[18:11:42] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[18:11:42] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[18:11:42] [ENEMY] [Enemy1] Registered as sound listener
[18:11:42] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[18:11:42] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[18:11:42] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[18:11:42] [ENEMY] [Enemy2] Registered as sound listener
[18:11:42] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[18:11:42] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[18:11:42] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[18:11:42] [ENEMY] [Enemy3] Registered as sound listener
[18:11:42] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[18:11:42] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[18:11:42] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[18:11:42] [ENEMY] [Enemy4] Registered as sound listener
[18:11:42] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[18:11:42] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[18:11:42] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
[18:11:42] [ENEMY] [Enemy5] Registered as sound listener
[18:11:42] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[18:11:42] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[18:11:42] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[18:11:42] [ENEMY] [Enemy6] Registered as sound listener
[18:11:42] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[18:11:42] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[18:11:42] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[18:11:42] [ENEMY] [Enemy7] Registered as sound listener
[18:11:42] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[18:11:42] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[18:11:42] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[18:11:42] [ENEMY] [Enemy8] Registered as sound listener
[18:11:42] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[18:11:42] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[18:11:42] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[18:11:42] [ENEMY] [Enemy9] Registered as sound listener
[18:11:42] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[18:11:42] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[18:11:42] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[18:11:42] [ENEMY] [Enemy10] Registered as sound listener
[18:11:42] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[18:11:42] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[18:11:42] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[18:11:42] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:11:42] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:11:42] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:11:42] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:11:42] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:11:42] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:11:42] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=213.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:11:42] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:11:42] [INFO] [Player] Detecting weapon pose (frame 3)...
[18:11:42] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[18:11:42] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[18:11:42] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[18:11:42] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[18:11:42] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[18:11:42] [INFO] [LastChance] Found player: Player
[18:11:42] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[18:11:42] [INFO] [LastChance] Connected to player Damaged signal (C#)
[18:11:42] [INFO] [LastChance] Connected to player Died signal (C#)
[18:11:42] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[18:11:43] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[18:11:44] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[18:11:44] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[18:11:44] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,995), corner_timer=0.30
[18:11:44] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,995), corner_timer=0.30
[18:11:44] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,892), corner_timer=-0.02
[18:11:44] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[18:11:44] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,892), corner_timer=-0.02
[18:11:44] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[18:11:44] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,888), corner_timer=0.30
[18:11:44] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,888), corner_timer=0.30
[18:11:44] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[18:11:44] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,855), corner_timer=-0.02
[18:11:44] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[18:11:44] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,855), corner_timer=0.30
[18:11:45] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,855), corner_timer=-0.02
[18:11:45] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[18:11:45] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,855), corner_timer=0.30
[18:11:45] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(450,855), corner_timer=-0.02
[18:11:45] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[18:11:45] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(450,855), corner_timer=0.30
[18:11:45] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[18:11:45] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(444,855), corner_timer=-0.02
[18:11:45] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[18:11:45] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(444,855), corner_timer=0.30
[18:11:46] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:46] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(360,855), corner_timer=-0.02
[18:11:46] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[18:11:46] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(355,855), corner_timer=0.30
[18:11:46] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:46] [INFO] [ReplayManager] Recording frame 240 (4,0s): player_valid=True, enemies=10
[18:11:46] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(299,830), corner_timer=-0.02
[18:11:46] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[18:11:46] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(298,826), corner_timer=0.30
[18:11:46] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:46] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(291,792), corner_timer=-0.02
[18:11:46] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[18:11:46] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(291,792), corner_timer=0.30
[18:11:47] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:47] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(291,792), corner_timer=-0.02
[18:11:47] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[18:11:47] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(291,792), corner_timer=0.30
[18:11:47] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:47] [INFO] [ReplayManager] Recording frame 300 (5,0s): player_valid=True, enemies=10
[18:11:47] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(291,792), corner_timer=-0.02
[18:11:47] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[18:11:47] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(291,792), corner_timer=0.30
[18:11:47] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:47] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.5°, current=89.5°, player=(291,792), corner_timer=-0.02
[18:11:47] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[18:11:47] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(291,792), corner_timer=0.30
[18:11:48] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:48] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.4°, current=89.5°, player=(291,792), corner_timer=-0.02
[18:11:48] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[18:11:48] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.3°, player=(291,792), corner_timer=0.30
[18:11:48] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:48] [INFO] [ReplayManager] Recording frame 360 (6,0s): player_valid=True, enemies=10
[18:11:48] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.5°, player=(291,818), corner_timer=-0.02
[18:11:48] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:48] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(291,822), corner_timer=0.30
[18:11:48] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:48] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(312,916), corner_timer=-0.02
[18:11:48] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:48] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(315,920), corner_timer=0.30
[18:11:49] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:49] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(389,994), corner_timer=-0.02
[18:11:49] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:49] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(393,998), corner_timer=0.30
[18:11:49] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:49] [INFO] [ReplayManager] Recording frame 420 (7,0s): player_valid=True, enemies=10
[18:11:49] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(465,1070), corner_timer=-0.02
[18:11:49] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:49] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(468,1073), corner_timer=0.30
[18:11:49] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:49] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(465,1107), corner_timer=-0.02
[18:11:49] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:49] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(462,1107), corner_timer=0.30
[18:11:50] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:50] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(412,1067), corner_timer=-0.02
[18:11:50] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:50] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(411,1063), corner_timer=0.30
[18:11:50] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:50] [INFO] [ReplayManager] Recording frame 480 (8,0s): player_valid=True, enemies=10
[18:11:50] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(405,1045), corner_timer=-0.02
[18:11:50] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:50] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(405,1045), corner_timer=0.30
[18:11:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(405.1015, 1051.334), source=PLAYER (MakarovPM), range=1469, listeners=30
[18:11:50] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
[18:11:50] [ENEMY] [Enemy3] Heard gunshot at (405.1015, 1051.334), source_type=0, intensity=0.01, distance=422
[18:11:50] [ENEMY] [Enemy4] Heard gunshot at (405.1015, 1051.334), source_type=0, intensity=0.01, distance=423
[18:11:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=0, below_threshold=4
[18:11:50] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=135.0°, current=-33.8°, player=(405,1045), corner_timer=0.00
[18:11:50] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=159.8°, current=-101.3°, player=(405,1045), corner_timer=0.00
[18:11:50] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(405.1015, 1051.334), shooter_id=459142072693, bullet_pos=(504.7573, 896.6585)
[18:11:50] [INFO] [Bullet] Using shooter_position, distance=183.999801635742
[18:11:50] [INFO] [Bullet] Distance to wall: 183.999801635742 (12.5288848391783% of viewport)
[18:11:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:11:50] [INFO] [Bullet] Caliber cannot penetrate walls
[18:11:50] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(405,1027), corner_timer=-0.02
[18:11:50] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:50] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(405,1023), corner_timer=0.30
[18:11:51] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:51] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[18:11:51] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[18:11:51] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(405,1008), corner_timer=-0.02
[18:11:51] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:51] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(405,1008), corner_timer=0.30
[18:11:51] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:51] [INFO] [ReplayManager] Recording frame 540 (9,0s): player_valid=True, enemies=10
[18:11:51] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(450,1008), corner_timer=-0.02
[18:11:51] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:51] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(455,1008), corner_timer=0.30
[18:11:51] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:51] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(483,1008), corner_timer=-0.02
[18:11:51] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:51] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(483,1008), corner_timer=0.30
[18:11:52] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:52] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(483,1008), corner_timer=-0.02
[18:11:52] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:52] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(483,1008), corner_timer=0.30
[18:11:52] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:52] [INFO] [ReplayManager] Recording frame 600 (10,0s): player_valid=True, enemies=10
[18:11:52] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(482,1008), corner_timer=-0.02
[18:11:52] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:52] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(482,1008), corner_timer=0.30
[18:11:52] [ENEMY] [Enemy3] PURSUING corner check: angle 30.4°
[18:11:52] [ENEMY] [Enemy4] PURSUING corner check: angle 33.9°
[18:11:52] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:52] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(477,1008), corner_timer=-0.02
[18:11:52] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:52] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(475,1008), corner_timer=0.30
[18:11:53] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:53] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(407,1008), corner_timer=-0.02
[18:11:53] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:53] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(405,1008), corner_timer=0.30
[18:11:53] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:53] [INFO] [ReplayManager] Recording frame 660 (11,0s): player_valid=True, enemies=10
[18:11:53] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(399,1008), corner_timer=-0.02
[18:11:53] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:53] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(399,1008), corner_timer=0.30
[18:11:53] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:53] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(399,1008), corner_timer=-0.02
[18:11:53] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:53] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(399,1008), corner_timer=0.30
[18:11:54] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:54] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(399,1008), corner_timer=-0.02
[18:11:54] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:54] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(399,1008), corner_timer=0.30
[18:11:54] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:54] [INFO] [ReplayManager] Recording frame 720 (12,0s): player_valid=True, enemies=10
[18:11:54] [ENEMY] [Enemy4] FLANKING started: target=(445.6303, 813.9582), side=left, pos=(552.9409, 962.4948)
[18:11:54] [ENEMY] [Enemy4] State: PURSUING -> FLANKING
[18:11:54] [ENEMY] [Enemy4] FLANKING corner check: angle -37.0°
[18:11:54] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(399,1008), corner_timer=-0.02
[18:11:54] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:54] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(399,1008), corner_timer=0.30
[18:11:54] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:54] [ENEMY] [Enemy4] FLANKING corner check: angle -42.9°
[18:11:54] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(399,1008), corner_timer=-0.02
[18:11:54] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:54] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(399,1008), corner_timer=0.30
[18:11:55] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:55] [ENEMY] [Enemy4] FLANKING corner check: angle -42.9°
[18:11:55] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(399,1008), corner_timer=-0.02
[18:11:55] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:55] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(399,1008), corner_timer=0.30
[18:11:55] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:55] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=FLANKING, target=115.4°, current=88.9°, player=(399,1008), corner_timer=0.08
[18:11:55] [ENEMY] [Enemy4] State: FLANKING -> COMBAT
[18:11:55] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=113.9°, current=29.0°, player=(399,1008), corner_timer=0.08
[18:11:55] [INFO] [ReplayManager] Recording frame 780 (13,0s): player_valid=True, enemies=10
[18:11:55] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(399,1008), corner_timer=-0.02
[18:11:55] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:55] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(399,1008), corner_timer=0.30
[18:11:55] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=111.0°, current=62.9°, player=(399,1008), corner_timer=0.08
[18:11:55] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(399.9338, 1014.668), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:11:55] [ENEMY] [Enemy2] Heard gunshot at (399.9338, 1014.668), source_type=0, intensity=0.01, distance=465
[18:11:55] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=4
[18:11:55] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=90.0°, current=168.8°, player=(399,1008), corner_timer=0.00
[18:11:55] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(399,1008), corner_timer=-0.02
[18:11:55] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:55] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(399,1008), corner_timer=0.30
[18:11:56] [ENEMY] [Enemy1] Memory: medium confidence (0.62) - transitioning to PURSUING
[18:11:56] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[18:11:56] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=81.4°, current=-33.8°, player=(399,1008), corner_timer=0.00
[18:11:56] [ENEMY] [Enemy1] PURSUING corner check: angle -50.9°
[18:11:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(399.9338, 1014.668), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:11:56] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=4
[18:11:56] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:56] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 3/3 -> 2/3
[18:11:56] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[18:11:56] [INFO] [ImpactEffects] spawn_blood_effect called at (488.4905, 777.6823), dir=(0.352786, -0.935704), lethal=false
[18:11:56] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:11:56] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:11:56] [INFO] [ImpactEffects] Blood effect spawned at (488.4905, 777.6823) (scale=0.5)
[18:11:56] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[18:11:56] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 2/3 -> 1/3
[18:11:56] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[18:11:56] [INFO] [ImpactEffects] spawn_blood_effect called at (494.3263, 776.5408), dir=(0.342384, -0.93956), lethal=false
[18:11:56] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:11:56] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:11:56] [INFO] [ImpactEffects] Blood effect spawned at (494.3263, 776.5408) (scale=0.5)
[18:11:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(494.3263, 776.5408), source=ENEMY (Enemy4), range=1469, listeners=10
[18:11:56] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[18:11:56] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(399,1008), corner_timer=-0.02
[18:11:56] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:56] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(399,1008), corner_timer=0.30
[18:11:56] [ENEMY] [Enemy1] PURSUING corner check: angle -51.1°
[18:11:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(500.695, 775.8956), source=ENEMY (Enemy4), range=1469, listeners=10
[18:11:56] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[18:11:56] [INFO] [BloodDecal] Blood puddle created at (495.204, 739.6277) (added to group)
[18:11:56] [INFO] [LastChance] Threat detected: @Area2D@886
[18:11:56] [INFO] [LastChance] Not in hard mode - effect disabled
[18:11:56] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:11:56] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[18:11:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(507.9406, 772.083), source=ENEMY (Enemy4), range=1469, listeners=10
[18:11:56] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[18:11:56] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(399.9338, 1014.668), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:11:56] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=4
[18:11:56] [INFO] [LastChance] Threat detected: @Area2D@888
[18:11:56] [INFO] [LastChance] Not in hard mode - effect disabled
[18:11:56] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:11:56] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P3:corner, state=RETREATING, target=-42.9°, current=26.3°, player=(399,1008), corner_timer=0.08
[18:11:56] [INFO] [BloodDecal] Blood puddle created at (534.6791, 739.3503) (added to group)
[18:11:56] [INFO] [BloodDecal] Blood puddle created at (530.1916, 755.444) (added to group)
[18:11:56] [INFO] [BloodyFeet:Enemy4] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[18:11:56] [INFO] [Player] Spawning blood effect at (399.9338, 1008.6678), dir=(1, 0), lethal=False (C#)
[18:11:56] [INFO] [ImpactEffects] spawn_blood_effect called at (399.9338, 1008.668), dir=(1, 0), lethal=false
[18:11:56] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:11:56] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:11:56] [INFO] [ImpactEffects] Blood effect spawned at (399.9338, 1008.668) (scale=1)
[18:11:56] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 9.0
[18:11:56] [INFO] [LastChance] Player health updated (C# Damaged): 9.0
[18:11:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(476.08755, 842.0996), shooter_id=456138950367, bullet_pos=(353.27478, 1412.3584)
[18:11:56] [INFO] [Bullet] Using shooter_position, distance=583,33356
[18:11:56] [INFO] [Bullet] Distance to wall: 583,33356 (39,720257% of viewport)
[18:11:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:11:56] [INFO] [Bullet] Starting wall penetration at (353.27478, 1412.3584)
[18:11:56] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
[18:11:56] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[18:11:56] [INFO] [Bullet] Raycast backward hit penetrating body at distance 47,03333
[18:11:56] [INFO] [Bullet] Body exited signal received for penetrating body
[18:11:56] [INFO] [Bullet] Exiting penetration at (343.44977, 1457.9791) after traveling 41,66667 pixels through wall
[18:11:56] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[18:11:56] [INFO] [ReplayManager] Recording frame 840 (14,0s): player_valid=True, enemies=10
[18:11:56] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[18:11:56] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[18:11:56] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[18:11:56] [INFO] [BloodDecal] Blood puddle created at (493.1668, 726.7509) (added to group)
[18:11:56] [INFO] [BloodDecal] Blood puddle created at (498.2989, 718.3689) (added to group)
[18:11:56] [INFO] [BloodDecal] Blood puddle created at (531.0005, 717.9986) (added to group)
[18:11:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(481.1754, 840.58636), shooter_id=456138950367, bullet_pos=(320.43988, 1401.338)
[18:11:56] [INFO] [Bullet] Using shooter_position, distance=583,3338
[18:11:56] [INFO] [Bullet] Distance to wall: 583,3338 (39,720272% of viewport)
[18:11:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:11:56] [INFO] [Bullet] Starting wall penetration at (320.43988, 1401.338)
[18:11:56] [INFO] [Bullet] Raycast backward hit penetrating body at distance 35,575317
[18:11:56] [INFO] [Bullet] Body exited signal received for penetrating body
[18:11:56] [INFO] [Bullet] Exiting penetration at (307.58102, 1446.1981) after traveling 41,666668 pixels through wall
[18:11:56] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[18:11:56] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(399,1008), corner_timer=-0.02
[18:11:56] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:56] [INFO] [BloodDecal] Blood puddle created at (559.9213, 725.1086) (added to group)
[18:11:56] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(399,1008), corner_timer=0.30
[18:11:56] [INFO] [BloodDecal] Blood puddle created at (595.7695, 707.9416) (added to group)
[18:11:56] [INFO] [BloodDecal] Blood puddle created at (577.0536, 730.3445) (added to group)
[18:11:56] [INFO] [BloodDecal] Blood puddle created at (493.4199, 728.3669) (added to group)
[18:11:56] [ENEMY] [Enemy1] PURSUING corner check: angle 153.7°
[18:11:56] [INFO] [BloodDecal] Blood puddle created at (504.7391, 698.2484) (added to group)
[18:11:56] [INFO] [BloodDecal] Blood puddle created at (553.2526, 730.834) (added to group)
[18:11:56] [INFO] [BloodDecal] Blood puddle created at (490.9094, 724.1484) (added to group)
[18:11:56] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:56] [INFO] [BloodDecal] Blood puddle created at (649.2596, 726.8203) (added to group)
[18:11:56] [INFO] [BloodDecal] Blood puddle created at (462.8576, 1059.426) (added to group)
[18:11:56] [INFO] [BloodDecal] Blood puddle created at (557.1107, 749.9281) (added to group)
[18:11:56] [INFO] [BloodDecal] Blood puddle created at (548.5704, 731.7042) (added to group)
[18:11:56] [INFO] [BloodDecal] Blood puddle created at (543.6943, 1072.987) (added to group)
[18:11:56] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(399,1008), corner_timer=-0.02
[18:11:56] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:56] [INFO] [BloodDecal] Blood puddle created at (517.8346, 679.9166) (added to group)
[18:11:56] [INFO] [BloodDecal] Blood puddle created at (483.3275, 1097.314) (added to group)
[18:11:56] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(399,1008), corner_timer=0.30
[18:11:56] [INFO] [BloodDecal] Blood puddle created at (561.418, 743.7197) (added to group)
[18:11:56] [INFO] [BloodDecal] Blood puddle created at (484.4656, 1062.582) (added to group)
[18:11:57] [INFO] [BloodDecal] Blood puddle created at (567.1887, 1117.475) (added to group)
[18:11:57] [INFO] [BloodDecal] Blood puddle created at (546.1785, 1092.025) (added to group)
[18:11:57] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:57] [INFO] [BloodDecal] Blood puddle created at (545.9371, 1102.655) (added to group)
[18:11:57] [INFO] [BloodDecal] Blood puddle created at (518.1421, 1134.273) (added to group)
[18:11:57] [INFO] [BloodDecal] Blood puddle created at (572.7817, 1111.795) (added to group)
[18:11:57] [INFO] [BloodDecal] Blood puddle created at (621.3237, 1057.519) (added to group)
[18:11:57] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(399,1008), corner_timer=-0.02
[18:11:57] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:57] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(399,1008), corner_timer=0.30
[18:11:57] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(399.9338, 1014.668), shooter_id=459142072693, bullet_pos=(752.6232, 60.42599)
[18:11:57] [INFO] [Bullet] Using shooter_position, distance=1017.33337402344
[18:11:57] [INFO] [Bullet] Distance to wall: 1017.33337402344 (69.2721001483756% of viewport)
[18:11:57] [INFO] [Bullet] Distance-based penetration chance: 65.8492164935618%
[18:11:57] [INFO] [Bullet] Penetration failed (distance roll)
[18:11:57] [INFO] [ReplayManager] Recording frame 900 (15,0s): player_valid=True, enemies=10
[18:11:57] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(399,1008), corner_timer=-0.02
[18:11:57] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:57] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(399,1008), corner_timer=0.30
[18:11:57] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:57] [ENEMY] [Enemy2] Warning: No valid flank position (both sides behind walls)
[18:11:57] [ENEMY] [Enemy2] FLANKING started: target=(211.838, 939.6974), side=left, pos=(338.5064, 663.9335)
[18:11:57] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
[18:11:57] [ENEMY] [Enemy2] FLANKING corner check: angle -40.7°
[18:11:57] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(399,1005), corner_timer=-0.02
[18:11:57] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:57] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(399,1003), corner_timer=0.30
[18:11:58] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:58] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[18:11:58] [ENEMY] [Enemy2] FLANKING corner check: angle -95.5°
[18:11:58] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
[18:11:58] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(399,919), corner_timer=-0.02
[18:11:58] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:58] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[18:11:58] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(399,913), corner_timer=0.30
[18:11:58] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[18:11:58] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
[18:11:58] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:58] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[18:11:58] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[18:11:58] [INFO] [ReplayManager] Recording frame 960 (16,0s): player_valid=True, enemies=10
[18:11:58] [ENEMY] [Enemy1] PURSUING corner check: angle 24.0°
[18:11:58] [ENEMY] [Enemy2] FLANKING corner check: angle -76.3°
[18:11:58] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(375,819), corner_timer=-0.02
[18:11:58] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:58] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
[18:11:58] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(372,815), corner_timer=0.30
[18:11:58] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[18:11:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(347.9239, 799.9085), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:11:58] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:11:58] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:58] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[18:11:58] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
[18:11:58] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[18:11:58] [ENEMY] [Enemy2] FLANKING corner check: angle -87.3°
[18:11:58] [ENEMY] [Enemy3] State: SUPPRESSED -> IN_COVER
[18:11:58] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(281,781), corner_timer=-0.02
[18:11:58] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:11:58] [ENEMY] [Enemy3] State: IN_COVER -> PURSUING
[18:11:58] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(276,781), corner_timer=0.30
[18:11:59] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:11:59] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[18:11:59] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:59] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[18:11:59] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[18:11:59] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[18:11:59] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[18:11:59] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[18:11:59] [INFO] [LastChance] Resetting all effects (scene change detected)
[18:11:59] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[18:11:59] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[18:11:59] [ENEMY] [Enemy1] Death animation component initialized
[18:11:59] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:59] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[18:11:59] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[18:11:59] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[18:11:59] [ENEMY] [Enemy2] Death animation component initialized
[18:11:59] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:59] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[18:11:59] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[18:11:59] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[18:11:59] [ENEMY] [Enemy3] Death animation component initialized
[18:11:59] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:59] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[18:11:59] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[18:11:59] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[18:11:59] [ENEMY] [Enemy4] Death animation component initialized
[18:11:59] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:59] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[18:11:59] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[18:11:59] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[18:11:59] [ENEMY] [Enemy5] Death animation component initialized
[18:11:59] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:59] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[18:11:59] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[18:11:59] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[18:11:59] [ENEMY] [Enemy6] Death animation component initialized
[18:11:59] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:59] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[18:11:59] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[18:11:59] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[18:11:59] [ENEMY] [Enemy7] Death animation component initialized
[18:11:59] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:59] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[18:11:59] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[18:11:59] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[18:11:59] [ENEMY] [Enemy8] Death animation component initialized
[18:11:59] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:59] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[18:11:59] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[18:11:59] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[18:11:59] [ENEMY] [Enemy9] Death animation component initialized
[18:11:59] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:59] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[18:11:59] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[18:11:59] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[18:11:59] [ENEMY] [Enemy10] Death animation component initialized
[18:11:59] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:11:59] [INFO] [BloodyFeet:Player] Footprint scene loaded
[18:11:59] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[18:11:59] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[18:11:59] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[18:11:59] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[18:11:59] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[18:11:59] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[18:11:59] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[18:11:59] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[18:11:59] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[18:11:59] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[18:11:59] [INFO] [Player.Flashlight] Flashlight is selected, initializing...
[18:11:59] [INFO] [FlashlightEffect] PointLight2D found, energy=0.0, shadow=true
[18:11:59] [INFO] [FlashlightEffect] Flashlight sound loaded
[18:11:59] [INFO] [Player.Flashlight] Flashlight equipped and attached to PlayerModel at offset (20, 0)
[18:11:59] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 10/10
[18:11:59] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[18:11:59] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[18:11:59] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[18:11:59] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[18:11:59] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[18:11:59] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[18:11:59] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[18:11:59] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[18:11:59] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[18:11:59] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[18:11:59] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[18:11:59] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[18:11:59] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[18:11:59] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[18:11:59] [INFO] [ScoreManager] Level started with 10 enemies
[18:11:59] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[18:11:59] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[18:11:59] [INFO] [ReplayManager] Replay data cleared
[18:11:59] [INFO] [BuildingLevel] Previous replay data cleared
[18:11:59] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[18:11:59] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[18:11:59] [INFO] [ReplayManager] Level: BuildingLevel
[18:11:59] [INFO] [ReplayManager] Player: Player (valid: True)
[18:11:59] [INFO] [ReplayManager] Enemies count: 10
[18:11:59] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[18:11:59] [INFO] [ReplayManager]   Enemy 0: Enemy1
[18:11:59] [INFO] [ReplayManager]   Enemy 1: Enemy2
[18:11:59] [INFO] [ReplayManager]   Enemy 2: Enemy3
[18:11:59] [INFO] [ReplayManager]   Enemy 3: Enemy4
[18:11:59] [INFO] [ReplayManager]   Enemy 4: Enemy5
[18:11:59] [INFO] [ReplayManager]   Enemy 5: Enemy6
[18:11:59] [INFO] [ReplayManager]   Enemy 6: Enemy7
[18:11:59] [INFO] [ReplayManager]   Enemy 7: Enemy8
[18:11:59] [INFO] [ReplayManager]   Enemy 8: Enemy9
[18:11:59] [INFO] [ReplayManager]   Enemy 9: Enemy10
[18:11:59] [INFO] [BuildingLevel] Replay recording started successfully
[18:11:59] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[18:11:59] [INFO] [CinemaEffects] Found player node: Player
[18:11:59] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[18:11:59] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[18:11:59] [ENEMY] [Enemy1] Registered as sound listener
[18:11:59] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[18:11:59] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[18:11:59] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[18:11:59] [ENEMY] [Enemy2] Registered as sound listener
[18:11:59] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[18:11:59] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[18:11:59] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[18:11:59] [ENEMY] [Enemy3] Registered as sound listener
[18:11:59] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[18:11:59] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[18:11:59] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[18:11:59] [ENEMY] [Enemy4] Registered as sound listener
[18:11:59] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[18:11:59] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[18:11:59] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[18:11:59] [ENEMY] [Enemy5] Registered as sound listener
[18:11:59] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[18:11:59] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[18:11:59] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[18:11:59] [ENEMY] [Enemy6] Registered as sound listener
[18:11:59] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[18:11:59] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[18:11:59] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[18:11:59] [ENEMY] [Enemy7] Registered as sound listener
[18:11:59] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[18:11:59] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[18:11:59] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[18:11:59] [ENEMY] [Enemy8] Registered as sound listener
[18:11:59] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[18:11:59] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[18:11:59] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[18:11:59] [ENEMY] [Enemy9] Registered as sound listener
[18:11:59] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[18:11:59] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[18:11:59] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[18:11:59] [ENEMY] [Enemy10] Registered as sound listener
[18:11:59] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[18:11:59] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[18:11:59] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[18:11:59] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:11:59] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:11:59] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:11:59] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:11:59] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:11:59] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:11:59] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=78.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:11:59] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:11:59] [INFO] [Player] Detecting weapon pose (frame 3)...
[18:11:59] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[18:11:59] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[18:11:59] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[18:11:59] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[18:11:59] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[18:11:59] [INFO] [LastChance] Found player: Player
[18:11:59] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[18:11:59] [INFO] [LastChance] Connected to player Damaged signal (C#)
[18:11:59] [INFO] [LastChance] Connected to player Died signal (C#)
[18:11:59] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[18:12:00] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[18:12:00] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[18:12:00] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[18:12:00] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(402,894), corner_timer=0.30
[18:12:00] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(402,894), corner_timer=0.30
[18:12:01] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(349,816), corner_timer=-0.02
[18:12:01] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[18:12:01] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(349,816), corner_timer=-0.02
[18:12:01] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[18:12:01] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(348,813), corner_timer=0.30
[18:12:01] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(348,813), corner_timer=0.30
[18:12:01] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[18:12:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(341.8361, 800.9247), source=PLAYER (MakarovPM), range=1469, listeners=20
[18:12:01] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[18:12:01] [ENEMY] [Enemy1] Heard gunshot at (341.8361, 800.9247), source_type=0, intensity=0.01, distance=453
[18:12:01] [ENEMY] [Enemy2] Heard gunshot at (341.8361, 800.9247), source_type=0, intensity=0.04, distance=258
[18:12:01] [ENEMY] [Enemy3] Heard gunshot at (341.8361, 800.9247), source_type=0, intensity=0.02, distance=362
[18:12:01] [ENEMY] [Enemy4] Heard gunshot at (341.8361, 800.9247), source_type=0, intensity=0.01, distance=469
[18:12:01] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:12:01] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=84.6°, current=-33.8°, player=(341,794), corner_timer=0.00
[18:12:01] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=103.4°, current=168.8°, player=(341,794), corner_timer=0.00
[18:12:01] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=172.9°, current=11.3°, player=(341,794), corner_timer=0.00
[18:12:01] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-167.1°, current=-67.5°, player=(341,794), corner_timer=0.00
[18:12:01] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=172.9°, current=-173.0°, player=(341,794), corner_timer=0.00
[18:12:01] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(341,794), corner_timer=-0.02
[18:12:01] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[18:12:01] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(341,794), corner_timer=0.30
[18:12:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(341.8066, 800.8434), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:01] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:12:01] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 3/3 -> 2/3
[18:12:01] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[18:12:01] [INFO] [ImpactEffects] spawn_blood_effect called at (620.6194, 759.939), dir=(0.998566, -0.053539), lethal=false
[18:12:01] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:12:01] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:12:01] [INFO] [ImpactEffects] Blood effect spawned at (620.6194, 759.939) (scale=0.5)
[18:12:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(341.8066, 800.8434), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:01] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:12:01] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/3 -> 1/3
[18:12:01] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[18:12:01] [INFO] [ImpactEffects] spawn_blood_effect called at (583.575, 764.5765), dir=(0.998354, -0.057348), lethal=false
[18:12:01] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:12:01] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:12:01] [INFO] [ImpactEffects] Blood effect spawned at (583.575, 764.5765) (scale=0.5)
[18:12:01] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[18:12:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(581.1318, 772.1943), source=ENEMY (Enemy3), range=1469, listeners=10
[18:12:01] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[18:12:01] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(341,794), corner_timer=-0.02
[18:12:01] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[18:12:01] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(341,794), corner_timer=0.30
[18:12:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(341.8066, 800.8434), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:01] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:12:01] [INFO] [BloodDecal] Blood puddle created at (698.433, 763.775) (added to group)
[18:12:01] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 1/3 -> 0/3
[18:12:01] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[18:12:01] [INFO] [ImpactEffects] spawn_blood_effect called at (578.6887, 779.812), dir=(0.998522, -0.054348), lethal=true
[18:12:01] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:12:01] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[18:12:01] [INFO] [ImpactEffects] Blood effect spawned at (578.6887, 779.812) (scale=0.75)
[18:12:01] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[18:12:01] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[18:12:01] [INFO] [PowerFantasy] Enemy killed - triggering 300ms last chance effect
[18:12:01] [INFO] [PowerFantasy] Starting power fantasy effect:
[18:12:01] [INFO] [PowerFantasy]   - Time scale: 0.10
[18:12:01] [INFO] [PowerFantasy]   - Duration: 300ms
[18:12:01] [ENEMY] [Enemy3] [AllyDeath] Notified 3 enemies
[18:12:01] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[18:12:01] [INFO] [DeathAnim] Started - Angle: -3.1 deg, Index: 11
[18:12:01] [ENEMY] [Enemy3] Death animation started with hit direction: (0.998522, -0.054348)
[18:12:01] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[18:12:01] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[18:12:01] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[18:12:01] [INFO] [BloodDecal] Blood puddle created at (714.4158, 793.3825) (added to group)
[18:12:01] [INFO] [BloodDecal] Blood puddle created at (703.0332, 770.1473) (added to group)
[18:12:02] [INFO] [PowerFantasy] Effect duration expired after 309.00 ms
[18:12:02] [INFO] [PowerFantasy] Ending power fantasy effect
[18:12:02] [INFO] [BloodDecal] Blood puddle created at (689.5089, 755.9946) (added to group)
[18:12:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(515.05054, 786.2676), shooter_id=6294694006117, bullet_pos=(48.98574, 942.8561)
[18:12:02] [INFO] [Bullet] Using shooter_position, distance=491,6669
[18:12:02] [INFO] [Bullet] Distance to wall: 491,6669 (33,478504% of viewport)
[18:12:02] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:02] [INFO] [Bullet] Starting wall penetration at (48.98574, 942.8561)
[18:12:02] [INFO] [ReplayManager] Recording frame 180 (2,7s): player_valid=True, enemies=10
[18:12:02] [INFO] [Bullet] Raycast backward hit penetrating body at distance 28,747862
[18:12:02] [INFO] [Bullet] Body exited signal received for penetrating body
[18:12:02] [INFO] [Bullet] Exiting penetration at (4.7490997, 957.7187) after traveling 41,666668 pixels through wall
[18:12:02] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[18:12:02] [INFO] [BloodDecal] Blood puddle created at (677.2898, 791.4244) (added to group)
[18:12:02] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(341,794), corner_timer=-0.01
[18:12:02] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[18:12:02] [INFO] [BloodDecal] Blood puddle created at (649.2344, 824.1696) (added to group)
[18:12:02] [INFO] [BloodDecal] Blood puddle created at (678.6894, 800.2266) (added to group)
[18:12:02] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(341,794), corner_timer=0.30
[18:12:02] [INFO] [BloodDecal] Blood puddle created at (795.0878, 791.7202) (added to group)
[18:12:02] [INFO] [BloodDecal] Blood puddle created at (677.2708, 792.312) (added to group)
[18:12:02] [INFO] [BloodDecal] Blood puddle created at (636.7986, 802.5093) (added to group)
[18:12:02] [INFO] [BloodDecal] Blood puddle created at (673.8417, 757.3742) (added to group)
[18:12:02] [INFO] [BloodDecal] Blood puddle created at (683.0651, 772.1916) (added to group)
[18:12:02] [INFO] [BloodDecal] Blood puddle created at (743.138, 779.8686) (added to group)
[18:12:02] [INFO] [BloodDecal] Blood puddle created at (667.9302, 763.6797) (added to group)
[18:12:02] [INFO] [BloodDecal] Blood puddle created at (857.9629, 833.2837) (added to group)
[18:12:02] [INFO] [BloodDecal] Blood puddle created at (678.0959, 807.1136) (added to group)
[18:12:02] [ENEMY] [Enemy3] Ragdoll activated
[18:12:02] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[18:12:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(341.8066, 800.8434), shooter_id=6298049448525, bullet_pos=(919.5288, 742.4487)
[18:12:02] [INFO] [Bullet] Using shooter_position, distance=580.665893554688
[18:12:02] [INFO] [Bullet] Distance to wall: 580.665893554688 (39.5386084425651% of viewport)
[18:12:02] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:02] [INFO] [Bullet] Caliber cannot penetrate walls
[18:12:02] [INFO] [BloodDecal] Blood puddle created at (675.3185, 826.167) (added to group)
[18:12:02] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(341,794), corner_timer=-0.02
[18:12:02] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[18:12:02] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(341,794), corner_timer=0.30
[18:12:02] [INFO] [BloodDecal] Blood puddle created at (720.62, 937.3556) (added to group)
[18:12:02] [INFO] [BloodDecal] Blood puddle created at (689.9984, 903.1482) (added to group)
[18:12:03] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:03] [INFO] [ReplayManager] Recording frame 240 (3,7s): player_valid=True, enemies=10
[18:12:03] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(341,794), corner_timer=-0.02
[18:12:03] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[18:12:03] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(341,793), corner_timer=0.30
[18:12:03] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:03] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(341,781), corner_timer=-0.02
[18:12:03] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[18:12:03] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(341,781), corner_timer=0.30
[18:12:03] [ENEMY] [Enemy1] PURSUING corner check: angle -40.4°
[18:12:03] [ENEMY] [Enemy2] PURSUING corner check: angle -161.9°
[18:12:03] [ENEMY] [Enemy4] PURSUING corner check: angle -175.2°
[18:12:03] [ENEMY] [Enemy3] Death animation completed
[18:12:03] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:03] [INFO] [BloodyFeet:Enemy4] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[18:12:04] [INFO] [ReplayManager] Recording frame 300 (4,7s): player_valid=True, enemies=10
[18:12:05] [INFO] [ReplayManager] Recording frame 360 (5,7s): player_valid=True, enemies=10
[18:12:06] [INFO] [ReplayManager] Recording frame 420 (6,7s): player_valid=True, enemies=10
[18:12:07] [INFO] [ScoreManager] Combo ended at 1. Max combo: 1
[18:12:07] [INFO] [ReplayManager] Recording frame 480 (7,7s): player_valid=True, enemies=10
[18:12:08] [INFO] [ReplayManager] Recording frame 540 (8,7s): player_valid=True, enemies=10
[18:12:09] [INFO] [ReplayManager] Recording frame 600 (9,7s): player_valid=True, enemies=10
[18:12:09] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(341,781), corner_timer=-0.02
[18:12:09] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[18:12:09] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(341,781), corner_timer=0.30
[18:12:09] [ENEMY] [Enemy1] PURSUING corner check: angle 126.1°
[18:12:09] [ENEMY] [Enemy4] PURSUING corner check: angle -87.1°
[18:12:09] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:09] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(341,781), corner_timer=-0.02
[18:12:09] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[18:12:09] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[18:12:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:09] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[18:12:09] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[18:12:09] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[18:12:09] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[18:12:09] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[18:12:09] [INFO] [LastChance] Resetting all effects (scene change detected)
[18:12:09] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[18:12:09] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[18:12:09] [ENEMY] [Enemy1] Death animation component initialized
[18:12:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:09] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[18:12:09] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[18:12:09] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[18:12:09] [ENEMY] [Enemy2] Death animation component initialized
[18:12:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:09] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[18:12:09] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[18:12:09] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[18:12:09] [ENEMY] [Enemy3] Death animation component initialized
[18:12:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:09] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[18:12:09] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[18:12:09] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[18:12:09] [ENEMY] [Enemy4] Death animation component initialized
[18:12:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:09] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[18:12:09] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[18:12:09] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[18:12:09] [ENEMY] [Enemy5] Death animation component initialized
[18:12:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:09] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[18:12:09] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[18:12:09] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[18:12:09] [ENEMY] [Enemy6] Death animation component initialized
[18:12:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:09] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[18:12:09] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[18:12:09] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[18:12:09] [INFO] [EnemyGrenade] Initialized: 1 grenades
[18:12:09] [ENEMY] [Enemy7] Death animation component initialized
[18:12:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:09] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[18:12:09] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[18:12:09] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[18:12:09] [ENEMY] [Enemy8] Death animation component initialized
[18:12:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:09] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[18:12:09] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[18:12:09] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[18:12:09] [ENEMY] [Enemy9] Death animation component initialized
[18:12:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:09] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[18:12:09] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[18:12:09] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[18:12:09] [ENEMY] [Enemy10] Death animation component initialized
[18:12:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:09] [INFO] [BloodyFeet:Player] Footprint scene loaded
[18:12:09] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[18:12:09] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[18:12:09] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[18:12:09] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[18:12:09] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[18:12:09] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[18:12:09] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[18:12:09] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[18:12:09] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[18:12:09] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[18:12:09] [INFO] [Player.Flashlight] Flashlight is selected, initializing...
[18:12:09] [INFO] [FlashlightEffect] PointLight2D found, energy=0.0, shadow=true
[18:12:09] [INFO] [FlashlightEffect] Flashlight sound loaded
[18:12:09] [INFO] [Player.Flashlight] Flashlight equipped and attached to PlayerModel at offset (20, 0)
[18:12:09] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 10/10
[18:12:09] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[18:12:09] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[18:12:09] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[18:12:09] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[18:12:09] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[18:12:09] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[18:12:09] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[18:12:09] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[18:12:09] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[18:12:09] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[18:12:09] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[18:12:09] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[18:12:09] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[18:12:09] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[18:12:09] [INFO] [ScoreManager] Level started with 10 enemies
[18:12:09] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[18:12:09] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[18:12:09] [INFO] [ReplayManager] Replay data cleared
[18:12:09] [INFO] [BuildingLevel] Previous replay data cleared
[18:12:09] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[18:12:09] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[18:12:09] [INFO] [ReplayManager] Level: BuildingLevel
[18:12:09] [INFO] [ReplayManager] Player: Player (valid: True)
[18:12:09] [INFO] [ReplayManager] Enemies count: 10
[18:12:09] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[18:12:09] [INFO] [ReplayManager]   Enemy 0: Enemy1
[18:12:09] [INFO] [ReplayManager]   Enemy 1: Enemy2
[18:12:09] [INFO] [ReplayManager]   Enemy 2: Enemy3
[18:12:09] [INFO] [ReplayManager]   Enemy 3: Enemy4
[18:12:09] [INFO] [ReplayManager]   Enemy 4: Enemy5
[18:12:09] [INFO] [ReplayManager]   Enemy 5: Enemy6
[18:12:09] [INFO] [ReplayManager]   Enemy 6: Enemy7
[18:12:09] [INFO] [ReplayManager]   Enemy 7: Enemy8
[18:12:09] [INFO] [ReplayManager]   Enemy 8: Enemy9
[18:12:09] [INFO] [ReplayManager]   Enemy 9: Enemy10
[18:12:09] [INFO] [BuildingLevel] Replay recording started successfully
[18:12:09] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[18:12:09] [INFO] [CinemaEffects] Found player node: Player
[18:12:09] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[18:12:09] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[18:12:09] [ENEMY] [Enemy1] Registered as sound listener
[18:12:09] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[18:12:09] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[18:12:09] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[18:12:09] [ENEMY] [Enemy2] Registered as sound listener
[18:12:09] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[18:12:09] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[18:12:09] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[18:12:09] [ENEMY] [Enemy3] Registered as sound listener
[18:12:09] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[18:12:09] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[18:12:09] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[18:12:09] [ENEMY] [Enemy4] Registered as sound listener
[18:12:09] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[18:12:09] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[18:12:09] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[18:12:09] [ENEMY] [Enemy5] Registered as sound listener
[18:12:09] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[18:12:09] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[18:12:09] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[18:12:09] [ENEMY] [Enemy6] Registered as sound listener
[18:12:09] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[18:12:09] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[18:12:09] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[18:12:09] [ENEMY] [Enemy7] Registered as sound listener
[18:12:09] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[18:12:09] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[18:12:09] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[18:12:09] [ENEMY] [Enemy8] Registered as sound listener
[18:12:09] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[18:12:09] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[18:12:09] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[18:12:09] [ENEMY] [Enemy9] Registered as sound listener
[18:12:09] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[18:12:09] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[18:12:09] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[18:12:09] [ENEMY] [Enemy10] Registered as sound listener
[18:12:09] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[18:12:09] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[18:12:09] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[18:12:09] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:09] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:09] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=281.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:09] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:09] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:09] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:09] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=78.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:09] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:09] [INFO] [Player] Detecting weapon pose (frame 3)...
[18:12:09] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[18:12:09] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[18:12:10] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[18:12:10] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[18:12:10] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[18:12:10] [INFO] [LastChance] Found player: Player
[18:12:10] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[18:12:10] [INFO] [LastChance] Connected to player Damaged signal (C#)
[18:12:10] [INFO] [LastChance] Connected to player Died signal (C#)
[18:12:10] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[18:12:10] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[18:12:11] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[18:12:11] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[18:12:11] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(628,1312), corner_timer=0.30
[18:12:11] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(628,1312), corner_timer=0.30
[18:12:11] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(706,1372), corner_timer=-0.02
[18:12:11] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[18:12:11] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(706,1372), corner_timer=-0.02
[18:12:11] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[18:12:11] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(712,1372), corner_timer=0.30
[18:12:11] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(712,1372), corner_timer=0.30
[18:12:11] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[18:12:12] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(816,1372), corner_timer=-0.02
[18:12:12] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[18:12:12] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(822,1372), corner_timer=0.30
[18:12:12] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(890,1356), corner_timer=-0.02
[18:12:12] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[18:12:12] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(891,1355), corner_timer=0.30
[18:12:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(892.9243, 1361.325), source=PLAYER (MakarovPM), range=1469, listeners=19
[18:12:12] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[18:12:12] [ENEMY] [Enemy4] Heard gunshot at (892.9243, 1361.325), source_type=0, intensity=0.01, distance=471
[18:12:12] [ENEMY] [Enemy10] Heard gunshot at (892.9243, 1361.325), source_type=0, intensity=0.02, distance=361
[18:12:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=8
[18:12:12] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=78.5°, current=168.8°, player=(892,1355), corner_timer=0.00
[18:12:12] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P2:combat_state, state=COMBAT, target=-137.6°, current=3.4°, player=(892,1355), corner_timer=0.12
[18:12:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(892.9243, 1361.325), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=8
[18:12:12] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[18:12:12] [ENEMY] [Enemy10] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=-140.4°, current=170.7°, player=(892,1355), corner_timer=0.12
[18:12:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(892.9243, 1361.325), shooter_id=7988236518883, bullet_pos=(1145.079, 1628.442)
[18:12:12] [INFO] [Bullet] Using shooter_position, distance=367.332946777344
[18:12:12] [INFO] [Bullet] Distance to wall: 367.332946777344 (25.0123758117974% of viewport)
[18:12:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:12] [INFO] [Bullet] Caliber cannot penetrate walls
[18:12:12] [ENEMY] [Enemy3] Memory: medium confidence (0.60) - transitioning to PURSUING
[18:12:12] [ENEMY] [Enemy3] State: IDLE -> PURSUING
[18:12:12] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=72.3°, current=-78.7°, player=(892,1355), corner_timer=0.00
[18:12:12] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[18:12:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(892.9243, 1361.325), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=8
[18:12:12] [ENEMY] [Enemy3] PURSUING corner check: angle -129.3°
[18:12:13] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[18:12:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(892.9243, 1361.325), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:13] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=8
[18:12:13] [ENEMY] [Enemy3] PURSUING corner check: angle -161.0°
[18:12:13] [ENEMY] [Enemy10] ROT_CHANGE: P1:visible -> P3:corner, state=RETREATING, target=3.5°, current=-158.9°, player=(892,1355), corner_timer=0.12
[18:12:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(892.9243, 1361.325), shooter_id=7988236518883, bullet_pos=(1194.003, 1625.683)
[18:12:13] [INFO] [Bullet] Using shooter_position, distance=400.666229248047
[18:12:13] [INFO] [Bullet] Distance to wall: 400.666229248047 (27.2821003097292% of viewport)
[18:12:13] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:13] [INFO] [Bullet] Caliber cannot penetrate walls
[18:12:13] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
[18:12:13] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[18:12:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(892.9243, 1361.325), shooter_id=7988236518883, bullet_pos=(1193.953, 1625.742)
[18:12:13] [INFO] [Bullet] Using shooter_position, distance=400.667022705078
[18:12:13] [INFO] [Bullet] Distance to wall: 400.667022705078 (27.2821543376775% of viewport)
[18:12:13] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:13] [INFO] [Bullet] Caliber cannot penetrate walls
[18:12:13] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[18:12:13] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:13] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[18:12:13] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[18:12:13] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[18:12:13] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[18:12:13] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[18:12:13] [INFO] [LastChance] Resetting all effects (scene change detected)
[18:12:13] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[18:12:13] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[18:12:13] [ENEMY] [Enemy1] Death animation component initialized
[18:12:13] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:13] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[18:12:13] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[18:12:13] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[18:12:13] [ENEMY] [Enemy2] Death animation component initialized
[18:12:13] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:13] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[18:12:13] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[18:12:13] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[18:12:13] [ENEMY] [Enemy3] Death animation component initialized
[18:12:13] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:13] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[18:12:13] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[18:12:13] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[18:12:13] [ENEMY] [Enemy4] Death animation component initialized
[18:12:13] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:13] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[18:12:13] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[18:12:13] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[18:12:13] [ENEMY] [Enemy5] Death animation component initialized
[18:12:13] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:13] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[18:12:13] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[18:12:13] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[18:12:13] [ENEMY] [Enemy6] Death animation component initialized
[18:12:13] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:13] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[18:12:13] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[18:12:13] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[18:12:13] [ENEMY] [Enemy7] Death animation component initialized
[18:12:13] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:13] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[18:12:13] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[18:12:13] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[18:12:13] [ENEMY] [Enemy8] Death animation component initialized
[18:12:13] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:13] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[18:12:13] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[18:12:13] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[18:12:13] [ENEMY] [Enemy9] Death animation component initialized
[18:12:13] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:13] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[18:12:13] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[18:12:13] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[18:12:13] [ENEMY] [Enemy10] Death animation component initialized
[18:12:13] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:13] [INFO] [BloodyFeet:Player] Footprint scene loaded
[18:12:13] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[18:12:13] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[18:12:13] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[18:12:13] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[18:12:13] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[18:12:13] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[18:12:13] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[18:12:13] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[18:12:13] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[18:12:13] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[18:12:13] [INFO] [Player.Flashlight] Flashlight is selected, initializing...
[18:12:13] [INFO] [FlashlightEffect] PointLight2D found, energy=0.0, shadow=true
[18:12:13] [INFO] [FlashlightEffect] Flashlight sound loaded
[18:12:13] [INFO] [Player.Flashlight] Flashlight equipped and attached to PlayerModel at offset (20, 0)
[18:12:13] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 10/10
[18:12:13] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[18:12:13] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[18:12:13] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[18:12:13] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[18:12:13] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[18:12:13] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[18:12:13] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[18:12:13] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[18:12:13] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[18:12:13] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[18:12:13] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[18:12:13] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[18:12:13] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[18:12:13] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[18:12:13] [INFO] [ScoreManager] Level started with 10 enemies
[18:12:13] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[18:12:13] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[18:12:13] [INFO] [ReplayManager] Replay data cleared
[18:12:13] [INFO] [BuildingLevel] Previous replay data cleared
[18:12:13] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[18:12:13] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[18:12:13] [INFO] [ReplayManager] Level: BuildingLevel
[18:12:13] [INFO] [ReplayManager] Player: Player (valid: True)
[18:12:13] [INFO] [ReplayManager] Enemies count: 10
[18:12:13] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[18:12:13] [INFO] [ReplayManager]   Enemy 0: Enemy1
[18:12:13] [INFO] [ReplayManager]   Enemy 1: Enemy2
[18:12:13] [INFO] [ReplayManager]   Enemy 2: Enemy3
[18:12:13] [INFO] [ReplayManager]   Enemy 3: Enemy4
[18:12:13] [INFO] [ReplayManager]   Enemy 4: Enemy5
[18:12:13] [INFO] [ReplayManager]   Enemy 5: Enemy6
[18:12:13] [INFO] [ReplayManager]   Enemy 6: Enemy7
[18:12:13] [INFO] [ReplayManager]   Enemy 7: Enemy8
[18:12:13] [INFO] [ReplayManager]   Enemy 8: Enemy9
[18:12:13] [INFO] [ReplayManager]   Enemy 9: Enemy10
[18:12:13] [INFO] [BuildingLevel] Replay recording started successfully
[18:12:13] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[18:12:13] [INFO] [CinemaEffects] Found player node: Player
[18:12:13] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[18:12:13] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[18:12:13] [ENEMY] [Enemy1] Registered as sound listener
[18:12:13] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[18:12:13] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[18:12:13] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[18:12:13] [ENEMY] [Enemy2] Registered as sound listener
[18:12:13] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[18:12:13] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[18:12:13] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[18:12:13] [ENEMY] [Enemy3] Registered as sound listener
[18:12:13] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[18:12:13] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[18:12:13] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[18:12:13] [ENEMY] [Enemy4] Registered as sound listener
[18:12:13] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[18:12:13] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[18:12:13] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[18:12:13] [ENEMY] [Enemy5] Registered as sound listener
[18:12:13] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[18:12:13] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[18:12:13] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[18:12:13] [ENEMY] [Enemy6] Registered as sound listener
[18:12:13] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[18:12:13] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[18:12:13] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[18:12:13] [ENEMY] [Enemy7] Registered as sound listener
[18:12:13] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[18:12:13] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[18:12:13] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[18:12:13] [ENEMY] [Enemy8] Registered as sound listener
[18:12:13] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[18:12:13] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[18:12:13] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[18:12:13] [ENEMY] [Enemy9] Registered as sound listener
[18:12:13] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[18:12:13] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[18:12:13] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[18:12:13] [ENEMY] [Enemy10] Registered as sound listener
[18:12:13] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[18:12:13] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[18:12:13] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[18:12:13] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:13] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:13] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:13] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:13] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:13] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=225.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:13] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=157.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:13] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:13] [INFO] [Player] Detecting weapon pose (frame 3)...
[18:12:13] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[18:12:13] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[18:12:13] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[18:12:13] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[18:12:13] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[18:12:13] [INFO] [LastChance] Found player: Player
[18:12:13] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[18:12:13] [INFO] [LastChance] Connected to player Damaged signal (C#)
[18:12:13] [INFO] [LastChance] Connected to player Died signal (C#)
[18:12:13] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[18:12:14] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[18:12:15] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[18:12:15] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[18:12:15] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(468,1182), corner_timer=0.30
[18:12:15] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(468,1182), corner_timer=0.30
[18:12:15] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(468,1078), corner_timer=-0.02
[18:12:15] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[18:12:15] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(468,1078), corner_timer=-0.02
[18:12:15] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[18:12:15] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(468,1072), corner_timer=0.30
[18:12:15] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(468,1072), corner_timer=0.30
[18:12:15] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[18:12:15] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(468,968), corner_timer=-0.02
[18:12:15] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[18:12:15] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(468,962), corner_timer=0.30
[18:12:16] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(468,858), corner_timer=-0.02
[18:12:16] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[18:12:16] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(468,852), corner_timer=0.30
[18:12:16] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(468,758), corner_timer=-0.02
[18:12:16] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[18:12:16] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(468,755), corner_timer=0.30
[18:12:16] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[18:12:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(468, 746.4444), source=PLAYER (MakarovPM), range=1469, listeners=20
[18:12:16] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[18:12:16] [ENEMY] [Enemy1] Heard gunshot at (468, 746.4444), source_type=0, intensity=0.01, distance=431
[18:12:16] [ENEMY] [Enemy2] Heard gunshot at (468, 746.4444), source_type=0, intensity=0.06, distance=208
[18:12:16] [ENEMY] [Enemy3] Heard gunshot at (468, 746.4444), source_type=0, intensity=0.05, distance=232
[18:12:16] [ENEMY] [Enemy4] Heard gunshot at (468, 746.4444), source_type=0, intensity=0.02, distance=366
[18:12:16] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:12:16] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=66.7°, current=-33.8°, player=(468,740), corner_timer=0.00
[18:12:16] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=70.4°, current=168.8°, player=(468,740), corner_timer=0.00
[18:12:16] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-177.6°, current=-33.8°, player=(468,740), corner_timer=0.00
[18:12:16] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-154.3°, current=-67.5°, player=(468,740), corner_timer=0.00
[18:12:16] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=-177.6°, current=-143.6°, player=(468,740), corner_timer=0.00
[18:12:16] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(468,740), corner_timer=-0.02
[18:12:16] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[18:12:16] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(468,740), corner_timer=0.30
[18:12:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(468, 746.4444), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:17] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:12:17] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[18:12:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(468, 746.4444), shooter_id=9331034557811, bullet_pos=(914.3695, 684.3535)
[18:12:17] [INFO] [Bullet] Using shooter_position, distance=450.667297363281
[18:12:17] [INFO] [Bullet] Distance to wall: 450.667297363281 (30.6867649815524% of viewport)
[18:12:17] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:17] [INFO] [Bullet] Caliber cannot penetrate walls
[18:12:17] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 4/4 -> 3/4
[18:12:17] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[18:12:17] [INFO] [ImpactEffects] spawn_blood_effect called at (679.7739, 766.5485), dir=(0.999997, -0.002347), lethal=false
[18:12:17] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:12:17] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:12:17] [INFO] [ImpactEffects] Blood effect spawned at (679.7739, 766.5485) (scale=0.5)
[18:12:17] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:17] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=-145.0°, current=-145.0°, player=(468,740), corner_timer=0.00
[18:12:17] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[18:12:17] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[18:12:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(468, 746.4444), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:17] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:12:17] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(468,740), corner_timer=-0.02
[18:12:17] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[18:12:17] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(468,740), corner_timer=0.30
[18:12:17] [INFO] [BloodDecal] Blood puddle created at (751.8752, 747.4833) (added to group)
[18:12:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(468, 746.4444), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:17] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:12:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(650.7258, 896.7183), source=ENEMY (Enemy4), range=1469, listeners=10
[18:12:17] [ENEMY] [Enemy3] Heard gunshot at (650.7258, 896.7183), source_type=1, intensity=0.71, distance=59
[18:12:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[18:12:17] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:17] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[18:12:17] [INFO] [LastChance] Threat detected: Bullet
[18:12:17] [INFO] [LastChance] Not in hard mode - effect disabled
[18:12:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:12:17] [INFO] [BloodDecal] Blood puddle created at (747.442, 779.7354) (added to group)
[18:12:17] [INFO] [Player] Spawning blood effect at (468, 740.4444), dir=(1, 0), lethal=False (C#)
[18:12:17] [INFO] [ImpactEffects] spawn_blood_effect called at (468, 740.4444), dir=(1, 0), lethal=false
[18:12:17] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:12:17] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:12:17] [INFO] [ImpactEffects] Blood effect spawned at (468, 740.4444) (scale=1)
[18:12:17] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 9.0
[18:12:17] [INFO] [LastChance] Player health updated (C# Damaged): 9.0
[18:12:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(637.975, 838.9615), source=ENEMY (Enemy3), range=1469, listeners=10
[18:12:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[18:12:17] [INFO] [BloodDecal] Blood puddle created at (803.8442, 775.6093) (added to group)
[18:12:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(650.7258, 896.7183), source=ENEMY (Enemy4), range=1469, listeners=10
[18:12:17] [ENEMY] [Enemy3] Heard gunshot at (650.7258, 896.7183), source_type=1, intensity=0.78, distance=57
[18:12:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[18:12:17] [INFO] [ReplayManager] Recording frame 240 (4,0s): player_valid=True, enemies=10
[18:12:17] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[18:12:17] [INFO] [LastChance] Threat detected: Bullet
[18:12:17] [INFO] [LastChance] Not in hard mode - effect disabled
[18:12:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:12:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(468, 746.4444), shooter_id=9331034557811, bullet_pos=(918.6639, 744.7709)
[18:12:17] [INFO] [Bullet] Using shooter_position, distance=450.6669921875
[18:12:17] [INFO] [Bullet] Distance to wall: 450.6669921875 (30.6867442015723% of viewport)
[18:12:17] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:17] [INFO] [Bullet] Caliber cannot penetrate walls
[18:12:17] [INFO] [Player] Spawning blood effect at (468, 740.4444), dir=(1, 0), lethal=False (C#)
[18:12:17] [INFO] [ImpactEffects] spawn_blood_effect called at (468, 740.4444), dir=(1, 0), lethal=false
[18:12:17] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:12:17] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:12:17] [INFO] [ImpactEffects] Blood effect spawned at (468, 740.4444) (scale=1)
[18:12:17] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 8.0
[18:12:17] [INFO] [LastChance] Player health updated (C# Damaged): 8.0
[18:12:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(627.2109, 850.074), source=ENEMY (Enemy3), range=1469, listeners=10
[18:12:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[18:12:17] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(468,740), corner_timer=-0.02
[18:12:17] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[18:12:17] [INFO] [LastChance] Threat detected: @Area2D@1758
[18:12:17] [INFO] [LastChance] Not in hard mode - effect disabled
[18:12:17] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:12:17] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[18:12:17] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(468,740), corner_timer=0.30
[18:12:17] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[18:12:17] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:17] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[18:12:17] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[18:12:17] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[18:12:17] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[18:12:17] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[18:12:17] [INFO] [LastChance] Resetting all effects (scene change detected)
[18:12:17] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[18:12:17] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[18:12:17] [ENEMY] [Enemy1] Death animation component initialized
[18:12:17] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:17] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[18:12:17] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[18:12:17] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[18:12:17] [INFO] [EnemyGrenade] Initialized: 1 grenades
[18:12:17] [ENEMY] [Enemy2] Death animation component initialized
[18:12:17] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:17] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[18:12:17] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[18:12:17] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[18:12:17] [ENEMY] [Enemy3] Death animation component initialized
[18:12:17] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:17] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[18:12:17] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[18:12:17] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[18:12:17] [ENEMY] [Enemy4] Death animation component initialized
[18:12:17] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:17] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[18:12:17] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[18:12:17] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[18:12:17] [ENEMY] [Enemy5] Death animation component initialized
[18:12:17] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:17] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[18:12:17] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[18:12:17] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[18:12:17] [ENEMY] [Enemy6] Death animation component initialized
[18:12:17] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:17] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[18:12:17] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[18:12:17] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[18:12:17] [ENEMY] [Enemy7] Death animation component initialized
[18:12:17] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:17] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[18:12:17] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[18:12:17] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[18:12:17] [ENEMY] [Enemy8] Death animation component initialized
[18:12:17] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:17] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[18:12:17] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[18:12:17] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[18:12:17] [ENEMY] [Enemy9] Death animation component initialized
[18:12:17] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:17] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[18:12:17] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[18:12:17] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[18:12:17] [ENEMY] [Enemy10] Death animation component initialized
[18:12:17] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:17] [INFO] [BloodyFeet:Player] Footprint scene loaded
[18:12:17] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[18:12:17] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[18:12:17] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[18:12:17] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[18:12:17] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[18:12:17] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[18:12:17] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[18:12:17] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[18:12:17] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[18:12:17] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[18:12:17] [INFO] [Player.Flashlight] Flashlight is selected, initializing...
[18:12:17] [INFO] [FlashlightEffect] PointLight2D found, energy=0.0, shadow=true
[18:12:17] [INFO] [FlashlightEffect] Flashlight sound loaded
[18:12:17] [INFO] [Player.Flashlight] Flashlight equipped and attached to PlayerModel at offset (20, 0)
[18:12:17] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 10/10
[18:12:17] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[18:12:17] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[18:12:17] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[18:12:17] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[18:12:17] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[18:12:17] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[18:12:17] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[18:12:17] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[18:12:17] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[18:12:17] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[18:12:17] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[18:12:17] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[18:12:17] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[18:12:17] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[18:12:17] [INFO] [ScoreManager] Level started with 10 enemies
[18:12:17] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[18:12:17] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[18:12:17] [INFO] [ReplayManager] Replay data cleared
[18:12:17] [INFO] [BuildingLevel] Previous replay data cleared
[18:12:17] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[18:12:17] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[18:12:17] [INFO] [ReplayManager] Level: BuildingLevel
[18:12:17] [INFO] [ReplayManager] Player: Player (valid: True)
[18:12:17] [INFO] [ReplayManager] Enemies count: 10
[18:12:17] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[18:12:17] [INFO] [ReplayManager]   Enemy 0: Enemy1
[18:12:17] [INFO] [ReplayManager]   Enemy 1: Enemy2
[18:12:17] [INFO] [ReplayManager]   Enemy 2: Enemy3
[18:12:17] [INFO] [ReplayManager]   Enemy 3: Enemy4
[18:12:17] [INFO] [ReplayManager]   Enemy 4: Enemy5
[18:12:17] [INFO] [ReplayManager]   Enemy 5: Enemy6
[18:12:17] [INFO] [ReplayManager]   Enemy 6: Enemy7
[18:12:17] [INFO] [ReplayManager]   Enemy 7: Enemy8
[18:12:17] [INFO] [ReplayManager]   Enemy 8: Enemy9
[18:12:17] [INFO] [ReplayManager]   Enemy 9: Enemy10
[18:12:17] [INFO] [BuildingLevel] Replay recording started successfully
[18:12:17] [INFO] [BloodDecal] Blood puddle created at (852.2055, 764.5998) (added to group)
[18:12:17] [INFO] [BloodDecal] Blood puddle created at (796.7168, 810.821) (added to group)
[18:12:17] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[18:12:17] [INFO] [CinemaEffects] Found player node: Player
[18:12:17] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[18:12:17] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[18:12:17] [ENEMY] [Enemy1] Registered as sound listener
[18:12:17] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[18:12:17] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[18:12:17] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[18:12:17] [ENEMY] [Enemy2] Registered as sound listener
[18:12:17] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[18:12:17] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[18:12:17] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[18:12:17] [ENEMY] [Enemy3] Registered as sound listener
[18:12:17] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[18:12:17] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[18:12:17] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[18:12:17] [ENEMY] [Enemy4] Registered as sound listener
[18:12:17] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[18:12:17] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[18:12:17] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[18:12:17] [ENEMY] [Enemy5] Registered as sound listener
[18:12:17] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[18:12:17] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[18:12:17] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[18:12:17] [ENEMY] [Enemy6] Registered as sound listener
[18:12:17] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[18:12:17] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[18:12:17] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[18:12:17] [ENEMY] [Enemy7] Registered as sound listener
[18:12:17] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[18:12:17] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[18:12:17] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[18:12:17] [ENEMY] [Enemy8] Registered as sound listener
[18:12:17] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[18:12:17] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[18:12:17] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[18:12:17] [ENEMY] [Enemy9] Registered as sound listener
[18:12:17] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[18:12:17] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[18:12:17] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[18:12:17] [ENEMY] [Enemy10] Registered as sound listener
[18:12:17] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[18:12:17] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[18:12:17] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[18:12:17] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:17] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:17] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:17] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:17] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:17] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:17] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=78.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:17] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:17] [INFO] [Player] Detecting weapon pose (frame 3)...
[18:12:17] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[18:12:17] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[18:12:18] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[18:12:18] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[18:12:18] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[18:12:18] [INFO] [LastChance] Found player: Player
[18:12:18] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[18:12:18] [INFO] [LastChance] Connected to player Damaged signal (C#)
[18:12:18] [INFO] [LastChance] Connected to player Died signal (C#)
[18:12:18] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[18:12:18] [INFO] [BloodDecal] Blood puddle created at (529.6738, 735.3812) (added to group)
[18:12:18] [INFO] [BloodDecal] Blood puddle created at (559.9278, 733.7095) (added to group)
[18:12:18] [INFO] [BloodDecal] Blood puddle created at (544.4581, 810.1423) (added to group)
[18:12:18] [INFO] [BloodDecal] Blood puddle created at (522.375, 784.4856) (added to group)
[18:12:18] [INFO] [BloodDecal] Blood puddle created at (523.5889, 765.6981) (added to group)
[18:12:18] [INFO] [BloodDecal] Blood puddle created at (529.3953, 769.4623) (added to group)
[18:12:18] [INFO] [BloodDecal] Blood puddle created at (566.6191, 752.8879) (added to group)
[18:12:18] [INFO] [BloodDecal] Blood puddle created at (572.5458, 723.6193) (added to group)
[18:12:18] [INFO] [BloodDecal] Blood puddle created at (568.4351, 839.0397) (added to group)
[18:12:18] [INFO] [BloodDecal] Blood puddle created at (590.431, 721.8376) (added to group)
[18:12:18] [INFO] [BloodDecal] Blood puddle created at (576.2966, 778.8921) (added to group)
[18:12:18] [INFO] [BloodDecal] Blood puddle created at (583.6988, 791.1442) (added to group)
[18:12:18] [INFO] [BloodDecal] Blood puddle created at (594.4869, 846.5301) (added to group)
[18:12:18] [INFO] [BloodDecal] Blood puddle created at (563.5881, 839.591) (added to group)
[18:12:18] [INFO] [BloodDecal] Blood puddle created at (612.499, 867.696) (added to group)
[18:12:18] [INFO] [BloodDecal] Blood puddle created at (592.4615, 814.3762) (added to group)
[18:12:18] [INFO] [BloodDecal] Blood puddle created at (677.3767, 813.1548) (added to group)
[18:12:18] [INFO] [BloodDecal] Blood puddle created at (646.5822, 822.6838) (added to group)
[18:12:18] [INFO] [BloodDecal] Blood puddle created at (650.5593, 742.2748) (added to group)
[18:12:18] [INFO] [BloodDecal] Blood puddle created at (634.7516, 817.5457) (added to group)
[18:12:18] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[18:12:19] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[18:12:19] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[18:12:19] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,825), corner_timer=0.30
[18:12:19] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,825), corner_timer=0.30
[18:12:19] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=164.4°, current=123.7°, player=(450,819), corner_timer=0.00
[18:12:19] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[18:12:19] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=166.5°, current=-65.1°, player=(450,810), corner_timer=0.00
[18:12:19] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,773), corner_timer=-0.02
[18:12:19] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[18:12:19] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,773), corner_timer=-0.02
[18:12:19] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[18:12:19] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,773), corner_timer=0.30
[18:12:19] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,773), corner_timer=0.30
[18:12:19] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[18:12:19] [ENEMY] [Enemy4] Memory: high confidence (0.85) - transitioning to PURSUING
[18:12:19] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[18:12:19] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=175.2°, current=-135.5°, player=(450,773), corner_timer=0.00
[18:12:19] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=-160.1°, current=-101.3°, player=(450,773), corner_timer=0.00
[18:12:19] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[18:12:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 779.4444), source=PLAYER (MakarovPM), range=1469, listeners=20
[18:12:19] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[18:12:19] [ENEMY] [Enemy1] Heard gunshot at (450, 779.4444), source_type=0, intensity=0.01, distance=455
[18:12:19] [ENEMY] [Enemy2] Heard gunshot at (450, 779.4444), source_type=0, intensity=0.05, distance=235
[18:12:19] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:12:19] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=70.5°, current=-157.5°, player=(450,773), corner_timer=0.00
[18:12:19] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=77.4°, current=-157.5°, player=(450,773), corner_timer=0.00
[18:12:20] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,773), corner_timer=-0.02
[18:12:20] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[18:12:20] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,773), corner_timer=0.30
[18:12:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 779.4444), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:20] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:12:20] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/2 -> 1/2
[18:12:20] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[18:12:20] [INFO] [ImpactEffects] spawn_blood_effect called at (684.4684, 753.8406), dir=(0.992296, -0.123885), lethal=false
[18:12:20] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:12:20] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:12:20] [INFO] [ImpactEffects] Blood effect spawned at (684.4684, 753.8406) (scale=0.5)
[18:12:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4684, 753.8406), source=ENEMY (Enemy3), range=1469, listeners=10
[18:12:20] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[18:12:20] [INFO] [LastChance] Threat detected: Bullet
[18:12:20] [INFO] [LastChance] Not in hard mode - effect disabled
[18:12:20] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:12:20] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[18:12:20] [INFO] [Player] Spawning blood effect at (450, 773.4444), dir=(1, 0), lethal=False (C#)
[18:12:20] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 773.4444), dir=(1, 0), lethal=false
[18:12:20] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:12:20] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:12:20] [INFO] [ImpactEffects] Blood effect spawned at (450, 773.4444) (scale=1)
[18:12:20] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 9.0
[18:12:20] [INFO] [LastChance] Player health updated (C# Damaged): 9.0
[18:12:20] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 1/2 -> 0/2
[18:12:20] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[18:12:20] [INFO] [ImpactEffects] spawn_blood_effect called at (682.2423, 755.3088), dir=(0.99357, -0.113221), lethal=true
[18:12:20] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:12:20] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[18:12:20] [INFO] [ImpactEffects] Blood effect spawned at (682.2423, 755.3088) (scale=0.75)
[18:12:20] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[18:12:20] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[18:12:20] [INFO] [PowerFantasy] Enemy killed - triggering 300ms last chance effect
[18:12:20] [INFO] [PowerFantasy] Starting power fantasy effect:
[18:12:20] [INFO] [PowerFantasy]   - Time scale: 0.10
[18:12:20] [INFO] [PowerFantasy]   - Duration: 300ms
[18:12:20] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[18:12:20] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[18:12:20] [INFO] [DeathAnim] Started - Angle: -6.5 deg, Index: 11
[18:12:20] [ENEMY] [Enemy3] Death animation started with hit direction: (0.99357, -0.113221)
[18:12:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(450, 779.4444), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:12:20] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[18:12:20] [INFO] [PowerFantasy] Effect duration expired after 309.00 ms
[18:12:20] [INFO] [PowerFantasy] Ending power fantasy effect
[18:12:20] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,773), corner_timer=-0.01
[18:12:20] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[18:12:20] [ENEMY] [Enemy4] PURSUING corner check: angle -90.4°
[18:12:20] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,773), corner_timer=0.30
[18:12:20] [INFO] [BloodDecal] Blood puddle created at (734.7913, 774.1492) (added to group)
[18:12:20] [INFO] [BloodDecal] Blood puddle created at (761.8157, 743.2856) (added to group)
[18:12:20] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[18:12:20] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[18:12:20] [INFO] [BloodDecal] Blood puddle created at (778.1911, 804.7662) (added to group)
[18:12:20] [INFO] [BloodDecal] Blood puddle created at (741.6279, 800.0007) (added to group)
[18:12:20] [INFO] [BloodDecal] Blood puddle created at (783.6151, 764.7895) (added to group)
[18:12:20] [INFO] [BloodyFeet:Enemy4] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[18:12:20] [INFO] [BloodDecal] Blood puddle created at (728.4431, 755.5522) (added to group)
[18:12:20] [INFO] [ReplayManager] Recording frame 180 (2,7s): player_valid=True, enemies=10
[18:12:20] [INFO] [BloodDecal] Blood puddle created at (757.3642, 785.8647) (added to group)
[18:12:20] [INFO] [BloodDecal] Blood puddle created at (854.8867, 848.762) (added to group)
[18:12:20] [INFO] [BloodDecal] Blood puddle created at (512.0874, 781.9619) (added to group)
[18:12:20] [INFO] [BloodDecal] Blood puddle created at (566.0881, 789.5463) (added to group)
[18:12:20] [INFO] [BloodDecal] Blood puddle created at (774.832, 763.9901) (added to group)
[18:12:20] [INFO] [BloodDecal] Blood puddle created at (793.0505, 727.3725) (added to group)
[18:12:20] [INFO] [BloodDecal] Blood puddle created at (750.9568, 762.0003) (added to group)
[18:12:20] [INFO] [BloodDecal] Blood puddle created at (764.5259, 793.1273) (added to group)
[18:12:21] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(450,773), corner_timer=-0.02
[18:12:21] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[18:12:21] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(450,773), corner_timer=0.30
[18:12:21] [INFO] [BloodDecal] Blood puddle created at (763.3677, 765.1737) (added to group)
[18:12:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(450, 779.4444), shooter_id=10784746768572, bullet_pos=(919.6511, 729.1865)
[18:12:21] [INFO] [Bullet] Using shooter_position, distance=472.332550048828
[18:12:21] [INFO] [Bullet] Distance to wall: 472.332550048828 (32.1619918757981% of viewport)
[18:12:21] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:21] [INFO] [Bullet] Caliber cannot penetrate walls
[18:12:21] [INFO] [BloodDecal] Blood puddle created at (788.8287, 776.7562) (added to group)
[18:12:21] [INFO] [BloodDecal] Blood puddle created at (815.5795, 832.7841) (added to group)
[18:12:21] [ENEMY] [Enemy3] Ragdoll activated
[18:12:21] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[18:12:21] [INFO] [BloodDecal] Blood puddle created at (864.4899, 737.7924) (added to group)
[18:12:21] [INFO] [BloodDecal] Blood puddle created at (833.785, 724.6028) (added to group)
[18:12:21] [INFO] [BloodDecal] Blood puddle created at (840.437, 818.0265) (added to group)
[18:12:21] [INFO] [BloodDecal] Blood puddle created at (838.0225, 796.3823) (added to group)
[18:12:21] [INFO] [BloodDecal] Blood puddle created at (819.3912, 812.0573) (added to group)
[18:12:21] [INFO] [BloodDecal] Blood puddle created at (811.4829, 846.7612) (added to group)
[18:12:21] [INFO] [BloodDecal] Blood puddle created at (789.981, 829.3389) (added to group)
[18:12:21] [INFO] [BloodDecal] Blood puddle created at (868.0197, 862.6255) (added to group)
[18:12:21] [INFO] [BloodDecal] Blood puddle created at (783.3327, 764.2143) (added to group)
[18:12:21] [INFO] [BloodDecal] Blood puddle created at (880.6469, 798.944) (added to group)
[18:12:21] [INFO] [BloodDecal] Blood puddle created at (780.5687, 811.9083) (added to group)
[18:12:21] [INFO] [BloodDecal] Blood puddle created at (786.9828, 773.6349) (added to group)
[18:12:21] [INFO] [BloodDecal] Blood puddle created at (839.5427, 857.5723) (added to group)
[18:12:21] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[18:12:21] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=-117.5°, current=-119.4°, player=(500,773), corner_timer=0.02
[18:12:21] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[18:12:21] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(517,773), corner_timer=-0.02
[18:12:21] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[18:12:21] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(522,773), corner_timer=0.30
[18:12:21] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=-99.7°, current=-40.9°, player=(544,773), corner_timer=0.02
[18:12:21] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=56.1°, current=57.0°, player=(550,773), corner_timer=0.00
[18:12:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(566.8334, 779.4444), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:12:21] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
[18:12:21] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[18:12:21] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=-82.5°, current=-32.9°, player=(582,774), corner_timer=0.02
[18:12:21] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(620.8935, 797.2136), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:12:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
[18:12:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(566.8334, 779.4444), shooter_id=10784746768572, bullet_pos=(627.3929, 1005.472)
[18:12:21] [INFO] [Bullet] Using shooter_position, distance=233.999664306641
[18:12:21] [INFO] [Bullet] Distance to wall: 233.999664306641 (15.93346743008% of viewport)
[18:12:21] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:21] [INFO] [Bullet] Caliber cannot penetrate walls
[18:12:21] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[18:12:21] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 2/2 -> 1/2
[18:12:21] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[18:12:21] [INFO] [ImpactEffects] spawn_blood_effect called at (577.1328, 902.6409), dir=(-0.560626, 0.828069), lethal=false
[18:12:21] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:12:21] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:12:21] [INFO] [ImpactEffects] Wall found for blood splatter at (524, 981.1204) (dist=94 px)
[18:12:21] [INFO] [BloodDecal] Blood puddle created at (525, 981.1204) (added to group)
[18:12:21] [INFO] [ImpactEffects] Blood effect spawned at (577.1328, 902.6409) (scale=0.5)
[18:12:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(639.1279, 836.616), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:12:21] [ENEMY] [Enemy4] Heard gunshot at (639.1279, 836.616), source_type=0, intensity=0.36, distance=83
[18:12:21] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=0, below_threshold=6
[18:12:21] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[18:12:21] [INFO] [ReplayManager] Recording frame 240 (3,7s): player_valid=True, enemies=10
[18:12:21] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(639,835), corner_timer=-0.02
[18:12:21] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[18:12:21] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 1/2 -> 0/2
[18:12:21] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[18:12:21] [INFO] [ImpactEffects] spawn_blood_effect called at (604.691, 911.0047), dir=(-0.600581, 0.799564), lethal=true
[18:12:21] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:12:21] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[18:12:21] [INFO] [ImpactEffects] Blood effect spawned at (604.691, 911.0047) (scale=0.75)
[18:12:21] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
[18:12:21] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
[18:12:21] [INFO] [PowerFantasy] Enemy killed - triggering 300ms last chance effect
[18:12:21] [INFO] [PowerFantasy] Starting power fantasy effect:
[18:12:21] [INFO] [PowerFantasy]   - Time scale: 0.10
[18:12:21] [INFO] [PowerFantasy]   - Duration: 300ms
[18:12:21] [ENEMY] [Enemy4] [AllyDeath] Notified 1 enemies
[18:12:21] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 8)
[18:12:21] [INFO] [DeathAnim] Started - Angle: 126.9 deg, Index: 20
[18:12:21] [ENEMY] [Enemy4] Death animation started with hit direction: (-0.600581, 0.799564)
[18:12:21] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(639,841), corner_timer=0.30
[18:12:22] [INFO] [PowerFantasy] Effect duration expired after 303.00 ms
[18:12:22] [INFO] [PowerFantasy] Ending power fantasy effect
[18:12:22] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=50.6°, current=50.6°, player=(639,861), corner_timer=0.00
[18:12:22] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:22] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[18:12:22] [ENEMY] [Enemy3] Death animation completed
[18:12:22] [INFO] [BloodDecal] Blood puddle created at (538.4012, 959.7064) (added to group)
[18:12:22] [INFO] [BloodDecal] Blood puddle created at (562.1434, 979.8134) (added to group)
[18:12:22] [INFO] [BloodDecal] Blood puddle created at (583.1919, 981.9107) (added to group)
[18:12:22] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=173.0°, player=(639,944), corner_timer=-0.01
[18:12:22] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[18:12:22] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.9°, player=(639,949), corner_timer=0.30
[18:12:22] [INFO] [BloodDecal] Blood puddle created at (540.0446, 994.0399) (added to group)
[18:12:22] [ENEMY] [Enemy1] PURSUING corner check: angle -142.6°
[18:12:22] [INFO] [BloodDecal] Blood puddle created at (550.4336, 997.6713) (added to group)
[18:12:22] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:22] [ENEMY] [Enemy4] Ragdoll activated
[18:12:22] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[18:12:22] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=121.3°, player=(659,983), corner_timer=-0.02
[18:12:22] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[18:12:22] [ENEMY] [Enemy1] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=60.4°, current=35.6°, player=(662,983), corner_timer=0.05
[18:12:22] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=124.1°, player=(662,983), corner_timer=0.30
[18:12:22] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
[18:12:22] [INFO] [ReplayManager] Recording frame 300 (4,5s): player_valid=True, enemies=10
[18:12:22] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:23] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(762,983), corner_timer=-0.02
[18:12:23] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[18:12:23] [ENEMY] [Enemy1] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=52.5°, current=55.6°, player=(768,983), corner_timer=0.02
[18:12:23] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(768,983), corner_timer=0.30
[18:12:23] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:23] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[18:12:23] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(859,962), corner_timer=-0.02
[18:12:23] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[18:12:23] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(862,959), corner_timer=0.30
[18:12:23] [ENEMY] [Enemy4] Death animation completed
[18:12:23] [INFO] [BloodyFeet:Player] Blood ran out - no more footprints
[18:12:23] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:23] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[18:12:23] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=27.0°, current=27.6°, player=(875,877), corner_timer=0.00
[18:12:23] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.5°, current=89.5°, player=(875,866), corner_timer=-0.02
[18:12:23] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[18:12:23] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[18:12:23] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(875,860), corner_timer=0.30
[18:12:23] [INFO] [ReplayManager] Recording frame 360 (5,5s): player_valid=True, enemies=10
[18:12:23] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:24] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.4°, current=89.5°, player=(875,761), corner_timer=-0.02
[18:12:24] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[18:12:24] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.3°, player=(875,758), corner_timer=0.30
[18:12:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(875.845, 758.1013), source=PLAYER (MakarovPM), range=1469, listeners=8
[18:12:24] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=7
[18:12:24] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(875.845, 743.6013), source=PLAYER (MakarovPM), range=1469, listeners=8
[18:12:24] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=7
[18:12:24] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.5°, player=(875,745), corner_timer=-0.02
[18:12:24] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:12:24] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(875,747), corner_timer=0.30
[18:12:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(875.845, 759.4901), source=PLAYER (MakarovPM), range=1469, listeners=8
[18:12:24] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=7
[18:12:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(875.845, 758.1013), shooter_id=10784746768572, bullet_pos=(526.5171, 598.6452)
[18:12:24] [INFO] [Bullet] Using shooter_position, distance=384.000335693359
[18:12:24] [INFO] [Bullet] Distance to wall: 384.000335693359 (26.1472889717146% of viewport)
[18:12:24] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:24] [INFO] [Bullet] Caliber cannot penetrate walls
[18:12:24] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[18:12:24] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:24] [ENEMY] [Enemy1] Player ammo empty: false -> true
[18:12:24] [ENEMY] [Enemy2] Player ammo empty: false -> true
[18:12:24] [ENEMY] [Enemy5] Player ammo empty: false -> true
[18:12:24] [ENEMY] [Enemy6] Player ammo empty: false -> true
[18:12:24] [ENEMY] [Enemy7] Player ammo empty: false -> true
[18:12:24] [ENEMY] [Enemy8] Player ammo empty: false -> true
[18:12:24] [ENEMY] [Enemy9] Player ammo empty: false -> true
[18:12:24] [ENEMY] [Enemy10] Player ammo empty: false -> true
[18:12:24] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(875.845, 790.1012), source=PLAYER (Player), range=600, listeners=8
[18:12:24] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (875.845, 790.1012), intensity=0.03, distance=277
[18:12:24] [ENEMY] [Enemy2] Vulnerability sound triggered pursuit - transitioning from RETREATING to PURSUING
[18:12:24] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=7, self=0, below_threshold=0
[18:12:24] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=715), can_see=false
[18:12:24] [ENEMY] [Enemy2] Player empty ammo - priority attack triggered
[18:12:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(617.5503, 689.8024), source=ENEMY (Enemy2), range=1469, listeners=8
[18:12:24] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=4
[18:12:24] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=934), can_see=false
[18:12:24] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1127), can_see=false
[18:12:24] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=744), can_see=false
[18:12:24] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1218), can_see=false
[18:12:24] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1441), can_see=false
[18:12:24] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=860), can_see=false
[18:12:24] [ENEMY] [Enemy2] Pursuing vulnerability sound at (875.845, 795.6012), distance=282
[18:12:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(875.845, 743.6013), shooter_id=10784746768572, bullet_pos=(523.7074, 590.4508)
[18:12:24] [INFO] [Bullet] Using shooter_position, distance=384
[18:12:24] [INFO] [Bullet] Distance to wall: 384 (26.1472661137365% of viewport)
[18:12:24] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:24] [INFO] [Bullet] Caliber cannot penetrate walls
[18:12:24] [INFO] [EnemyGrenade] Unsafe throw distance (140 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:24] [INFO] [LastChance] Threat detected: Bullet
[18:12:24] [INFO] [LastChance] Not in hard mode - effect disabled
[18:12:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:12:24] [INFO] [EnemyGrenade] Unsafe throw distance (138 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:24] [INFO] [EnemyGrenade] Unsafe throw distance (136 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:24] [ENEMY] [Enemy2] Hit taken, damage: 1, health: 2/2 -> 1/2
[18:12:24] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[18:12:24] [INFO] [ImpactEffects] spawn_blood_effect called at (633.4271, 698.8656), dir=(-0.944639, -0.328112), lethal=false
[18:12:24] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:12:24] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:12:24] [INFO] [ImpactEffects] Blood effect spawned at (633.4271, 698.8656) (scale=0.5)
[18:12:24] [INFO] [EnemyGrenade] Unsafe throw distance (270 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:24] [INFO] [EnemyGrenade] Unsafe throw distance (267 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(677.7427, 721.5432), shooter_id=10781039004501, bullet_pos=(910.26465, 813.3779)
[18:12:24] [INFO] [Bullet] Using shooter_position, distance=250,00017
[18:12:24] [INFO] [Bullet] Distance to wall: 250,00017 (17,022972% of viewport)
[18:12:24] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:24] [INFO] [Bullet] Starting wall penetration at (910.26465, 813.3779)
[18:12:24] [ENEMY] [Enemy2] Player empty ammo - priority attack triggered
[18:12:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(642.9622, 703.6457), source=ENEMY (Enemy2), range=1469, listeners=8
[18:12:24] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=5
[18:12:24] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(875.845, 834.1012), source=PLAYER (Player), range=600, listeners=8
[18:12:24] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (875.845, 834.1012), intensity=0.04, distance=262
[18:12:24] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=7, self=0, below_threshold=0
[18:12:24] [INFO] [Bullet] Raycast backward hit penetrating body at distance 18,99688
[18:12:24] [INFO] [Bullet] Body exited signal received for penetrating body
[18:12:24] [INFO] [Bullet] Exiting penetration at (953.66876, 830.5204) after traveling 41,66667 pixels through wall
[18:12:24] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[18:12:24] [INFO] [EnemyGrenade] Unsafe throw distance (262 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:24] [INFO] [EnemyGrenade] Unsafe throw distance (259 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:24] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(875,839), corner_timer=-0.02
[18:12:24] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:12:24] [INFO] [LastChance] Threat detected: @Area2D@2150
[18:12:24] [INFO] [LastChance] Not in hard mode - effect disabled
[18:12:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:12:24] [INFO] [EnemyGrenade] Unsafe throw distance (256 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:24] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(875,845), corner_timer=0.30
[18:12:24] [INFO] [EnemyGrenade] Unsafe throw distance (254 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:24] [INFO] [EnemyGrenade] Unsafe throw distance (252 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:24] [INFO] [ReplayManager] Recording frame 420 (6,5s): player_valid=True, enemies=10
[18:12:24] [INFO] [EnemyGrenade] Unsafe throw distance (250 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:24] [ENEMY] [Enemy2] Player empty ammo - priority attack triggered
[18:12:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(675.356, 722.1897), source=ENEMY (Enemy2), range=1469, listeners=8
[18:12:24] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=6
[18:12:24] [INFO] [EnemyGrenade] Unsafe throw distance (245 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:24] [INFO] [LastChance] Threat detected: Bullet
[18:12:24] [INFO] [LastChance] Not in hard mode - effect disabled
[18:12:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:12:24] [INFO] [EnemyGrenade] Unsafe throw distance (243 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:24] [INFO] [EnemyGrenade] Unsafe throw distance (242 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:24] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:24] [INFO] [EnemyGrenade] Unsafe throw distance (240 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:24] [INFO] [EnemyGrenade] Unsafe throw distance (238 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:24] [INFO] [Player] Spawning blood effect at (875.84503, 900.1012), dir=(1, 0), lethal=False (C#)
[18:12:24] [INFO] [ImpactEffects] spawn_blood_effect called at (875.845, 900.1012), dir=(1, 0), lethal=false
[18:12:24] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:12:24] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:12:24] [INFO] [ImpactEffects] Wall found for blood splatter at (912, 900.1012) (dist=36 px)
[18:12:24] [INFO] [BloodDecal] Blood puddle created at (911, 900.1012) (added to group)
[18:12:24] [INFO] [ImpactEffects] Blood effect spawned at (875.845, 900.1012) (scale=1)
[18:12:24] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 8.0
[18:12:24] [INFO] [LastChance] Player health updated (C# Damaged): 8.0
[18:12:24] [INFO] [EnemyGrenade] Unsafe throw distance (237 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:24] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[18:12:24] [INFO] [BloodDecal] Blood puddle created at (582.139, 669.3767) (added to group)
[18:12:25] [ENEMY] [Enemy2] Player empty ammo - priority attack triggered
[18:12:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(707.5477, 741.097), source=ENEMY (Enemy2), range=1469, listeners=8
[18:12:25] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=6
[18:12:25] [INFO] [BloodyFeet:Enemy2] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (234 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[18:12:25] [INFO] [LastChance] Threat detected: Bullet
[18:12:25] [INFO] [LastChance] Not in hard mode - effect disabled
[18:12:25] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (233 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (237 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (241 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [ENEMY] [Enemy1] PURSUING corner check: angle -80.4°
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (245 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(710.8438, 751.9004), source=ENEMY (Enemy2), range=1469, listeners=8
[18:12:25] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=6
[18:12:25] [INFO] [BloodDecal] Blood puddle created at (578.6912, 700.6695) (added to group)
[18:12:25] [INFO] [BloodDecal] Blood puddle created at (574.251, 704.3828) (added to group)
[18:12:25] [INFO] [BloodDecal] Blood puddle created at (560.9412, 671.1318) (added to group)
[18:12:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(750.5905, 807.1344), shooter_id=10781039004501, bullet_pos=(750.5905, 807.1344)
[18:12:25] [INFO] [Bullet] Using shooter_position, distance=0
[18:12:25] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[18:12:25] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[18:12:25] [INFO] [Bullet] Starting wall penetration at (750.5905, 807.1344)
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (249 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [Bullet] Raycast backward hit penetrating body at distance 34,367535
[18:12:25] [INFO] [LastChance] Threat detected: @Area2D@2187
[18:12:25] [INFO] [LastChance] Not in hard mode - effect disabled
[18:12:25] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:12:25] [INFO] [Bullet] Body exited signal received for penetrating body
[18:12:25] [INFO] [Bullet] Exiting penetration at (786.29297, 837.1863) after traveling 41,666668 pixels through wall
[18:12:25] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[18:12:25] [ENEMY] [Enemy2] Player empty ammo - priority attack triggered
[18:12:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(706.9095, 755.5012), source=ENEMY (Enemy2), range=1469, listeners=8
[18:12:25] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=6
[18:12:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(746.2027, 811.0588), shooter_id=10781039004501, bullet_pos=(746.2027, 811.0588)
[18:12:25] [INFO] [Bullet] Using shooter_position, distance=0
[18:12:25] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[18:12:25] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[18:12:25] [INFO] [Bullet] Starting wall penetration at (746.2027, 811.0588)
[18:12:25] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=137.5°, current=48.1°, player=(875,949), corner_timer=0.00
[18:12:25] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=257), can_see=false
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (257 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(875,949), corner_timer=-0.02
[18:12:25] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:12:25] [INFO] [Bullet] Raycast backward hit penetrating body at distance 25,761517
[18:12:25] [INFO] [LastChance] Threat detected: Bullet
[18:12:25] [INFO] [LastChance] Not in hard mode - effect disabled
[18:12:25] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:12:25] [INFO] [Bullet] Body exited signal received for penetrating body
[18:12:25] [INFO] [Bullet] Exiting penetration at (777.00244, 846.1181) after traveling 41,66667 pixels through wall
[18:12:25] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (261 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(875,954), corner_timer=0.30
[18:12:25] [INFO] [BloodDecal] Blood puddle created at (550.3642, 651.8506) (added to group)
[18:12:25] [INFO] [BloodDecal] Blood puddle created at (514.639, 677.7203) (added to group)
[18:12:25] [INFO] [BloodDecal] Blood puddle created at (532.9797, 680.7416) (added to group)
[18:12:25] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=772), can_see=false
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (265 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(701.008, 760.9025), source=ENEMY (Enemy2), range=1469, listeners=8
[18:12:25] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=6
[18:12:25] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1026), can_see=false
[18:12:25] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1190), can_see=false
[18:12:25] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=739), can_see=false
[18:12:25] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1136), can_see=false
[18:12:25] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1360), can_see=false
[18:12:25] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=702), can_see=false
[18:12:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(713.5765, 827.7802), shooter_id=10781039004501, bullet_pos=(713.5765, 827.7802)
[18:12:25] [INFO] [Bullet] Using shooter_position, distance=0
[18:12:25] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[18:12:25] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[18:12:25] [INFO] [Bullet] Starting wall penetration at (713.5765, 827.7802)
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (268 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[18:12:25] [INFO] [Bullet] Exiting penetration at (733.1642, 870.137) after traveling 41,666668 pixels through wall
[18:12:25] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (271 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[18:12:25] [INFO] [BloodDecal] Blood puddle created at (517.3263, 729.3904) (added to group)
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (273 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[18:12:25] [INFO] [EnemyGrenade] Throw path blocked to (869.4753, 979.7915)
[18:12:25] [INFO] [EnemyGrenade] Throw path blocked to (867.5145, 983.9337)
[18:12:25] [INFO] [BloodDecal] Blood puddle created at (570.2358, 690.8543) (added to group)
[18:12:25] [INFO] [EnemyGrenade] Throw path blocked to (865.2204, 983.9337)
[18:12:25] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (275 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (273 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (271 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (269 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [BloodDecal] Blood puddle created at (495.0877, 673.1323) (added to group)
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (266 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (264 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (261 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (259 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [ENEMY] [Enemy1] PURSUING corner check: angle -79.5°
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (256 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[18:12:25] [ENEMY] [Enemy1] Player reloading: false -> true
[18:12:25] [ENEMY] [Enemy2] Player reloading: false -> true
[18:12:25] [ENEMY] [Enemy5] Player reloading: false -> true
[18:12:25] [ENEMY] [Enemy6] Player reloading: false -> true
[18:12:25] [ENEMY] [Enemy7] Player reloading: false -> true
[18:12:25] [ENEMY] [Enemy8] Player reloading: false -> true
[18:12:25] [ENEMY] [Enemy9] Player reloading: false -> true
[18:12:25] [ENEMY] [Enemy10] Player reloading: false -> true
[18:12:25] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(824.0731, 983.9337), source=PLAYER (Player), range=900, listeners=8
[18:12:25] [ENEMY] [Enemy2] Heard player RELOAD at (824.0731, 983.9337), intensity=0.04, distance=253
[18:12:25] [ENEMY] [Enemy2] Vulnerability sound triggered pursuit - transitioning from SUPPRESSED to PURSUING
[18:12:25] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=3
[18:12:25] [ENEMY] [Enemy2] ROT_CHANGE: P4:velocity -> P2:combat_state, state=PURSUING, target=59.3°, current=97.3°, player=(824,983), corner_timer=0.00
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (253 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (245 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (242 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(813,983), corner_timer=-0.02
[18:12:25] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (238 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(807,983), corner_timer=0.30
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (235 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (231 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (229 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (226 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (224 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (222 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (220 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (219 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (218 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=92.5°, current=57.6°, player=(752,983), corner_timer=0.00
[18:12:25] [ENEMY] [Enemy2] Player reloading - priority attack triggered
[18:12:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(761.8851, 767.5104), source=ENEMY (Enemy2), range=1469, listeners=8
[18:12:25] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=5
[18:12:25] [INFO] [LastChance] Threat detected: Bullet
[18:12:25] [INFO] [LastChance] Not in hard mode - effect disabled
[18:12:25] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (216 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=637), can_see=false
[18:12:25] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P2:combat_state, state=PURSUING, target=97.4°, current=71.8°, player=(741,983), corner_timer=0.00
[18:12:25] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=true (dist=212), can_see=false
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (212 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [ENEMY] [Enemy2] Pursuing vulnerability sound at (747.0731, 983.9337), distance=211
[18:12:25] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1149), can_see=false
[18:12:25] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1321), can_see=false
[18:12:25] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=874), can_see=false
[18:12:25] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1249), can_see=false
[18:12:25] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1472), can_see=false
[18:12:25] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=746), can_see=false
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (208 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (204 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(766.772, 835.38324), shooter_id=10781039004501, bullet_pos=(759.2842, 1001.88153)
[18:12:25] [INFO] [Bullet] Using shooter_position, distance=166,66658
[18:12:25] [INFO] [Bullet] Distance to wall: 166,66658 (11,348634% of viewport)
[18:12:25] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:25] [INFO] [Bullet] Starting wall penetration at (759.2842, 1001.88153)
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (208 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [Bullet] Raycast backward hit penetrating body at distance 24,525864
[18:12:25] [INFO] [Bullet] Body exited signal received for penetrating body
[18:12:25] [INFO] [Bullet] Exiting penetration at (757.1876, 1048.5011) after traveling 41,66667 pixels through wall
[18:12:25] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (208 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (207 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (204 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (201 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(703,983), corner_timer=-0.02
[18:12:25] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (201 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(697,983), corner_timer=0.30
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (198 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [ReplayManager] Recording frame 480 (7,5s): player_valid=True, enemies=10
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (197 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (196 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (196 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (195 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[18:12:25] [ENEMY] [Enemy1] Player reloading: true -> false
[18:12:25] [ENEMY] [Enemy2] Player reloading: true -> false
[18:12:25] [ENEMY] [Enemy5] Player reloading: true -> false
[18:12:25] [ENEMY] [Enemy6] Player reloading: true -> false
[18:12:25] [ENEMY] [Enemy7] Player reloading: true -> false
[18:12:25] [ENEMY] [Enemy8] Player reloading: true -> false
[18:12:25] [ENEMY] [Enemy9] Player reloading: true -> false
[18:12:25] [ENEMY] [Enemy10] Player reloading: true -> false
[18:12:25] [ENEMY] [Enemy1] Player ammo empty: true -> false
[18:12:25] [ENEMY] [Enemy2] Player ammo empty: true -> false
[18:12:25] [ENEMY] [Enemy5] Player ammo empty: true -> false
[18:12:25] [ENEMY] [Enemy6] Player ammo empty: true -> false
[18:12:25] [ENEMY] [Enemy7] Player ammo empty: true -> false
[18:12:25] [ENEMY] [Enemy8] Player ammo empty: true -> false
[18:12:25] [ENEMY] [Enemy9] Player ammo empty: true -> false
[18:12:25] [ENEMY] [Enemy10] Player ammo empty: true -> false
[18:12:25] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (196 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (196 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (197 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (198 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:25] [INFO] [EnemyGrenade] Unsafe throw distance (199 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (201 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (202 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (204 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (206 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (208 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=148.1°, current=146.6°, player=(605,983), corner_timer=0.00
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (210 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (212 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (213 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(597,983), corner_timer=-0.02
[18:12:26] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:12:26] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[18:12:26] [ENEMY] [Enemy1] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=76.8°, current=76.5°, player=(593,983), corner_timer=0.25
[18:12:26] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (219 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(593,983), corner_timer=0.30
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (225 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [ENEMY] [Enemy1] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=77.3°, current=131.2°, player=(586,983), corner_timer=0.25
[18:12:26] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=-79.0°, current=163.1°, player=(586,983), corner_timer=0.00
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (230 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (235 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [ENEMY] [Enemy1] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=77.9°, current=125.9°, player=(580,983), corner_timer=0.25
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (238 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (242 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (245 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(573.5704, 988.1412), source=PLAYER (MakarovPM), range=1469, listeners=8
[18:12:26] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=0, below_threshold=5
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (248 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[18:12:26] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (251 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (252 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (253 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (253 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (253 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (253 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (253 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (252 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(573.5704, 988.1412), shooter_id=10784746768572, bullet_pos=(725.739, 884.6971)
[18:12:26] [INFO] [Bullet] Using shooter_position, distance=183.999877929688
[18:12:26] [INFO] [Bullet] Distance to wall: 183.999877929688 (12.5288900341733% of viewport)
[18:12:26] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:26] [INFO] [Bullet] Caliber cannot penetrate walls
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (251 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (250 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (249 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (248 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(557,948), corner_timer=-0.02
[18:12:26] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (246 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(557,943), corner_timer=0.30
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (245 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (244 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(556.4583, 936.6269), source=PLAYER (MakarovPM), range=1469, listeners=8
[18:12:26] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=4
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (242 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (241 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (241 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (240 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (239 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (239 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(556.4583, 936.6269), shooter_id=10784746768572, bullet_pos=(682.3832, 890.813)
[18:12:26] [INFO] [Bullet] Using shooter_position, distance=133.999954223633
[18:12:26] [INFO] [Bullet] Distance to wall: 133.999954223633 (9.12430328727561% of viewport)
[18:12:26] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:26] [INFO] [Bullet] Caliber cannot penetrate walls
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (238 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (238 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (237 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (237 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (237 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (237 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (237 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (237 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(554.4858, 909.8182), source=PLAYER (MakarovPM), range=1469, listeners=8
[18:12:26] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=4
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (237 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [ENEMY] [Enemy1] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=74.8°, current=75.3°, player=(554,902), corner_timer=0.25
[18:12:26] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (236 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (236 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(554,901), corner_timer=-0.02
[18:12:26] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (236 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(554,899), corner_timer=0.30
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (235 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (235 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(554.4858, 909.8182), shooter_id=10784746768572, bullet_pos=(677.8511, 857.5023)
[18:12:26] [INFO] [Bullet] Using shooter_position, distance=133.999786376953
[18:12:26] [INFO] [Bullet] Distance to wall: 133.999786376953 (9.12429185828655% of viewport)
[18:12:26] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:26] [INFO] [Bullet] Caliber cannot penetrate walls
[18:12:26] [INFO] [ReplayManager] Recording frame 540 (8,5s): player_valid=True, enemies=10
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (234 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (234 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (233 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (233 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [ENEMY] [Enemy1] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=73.1°, current=73.3°, player=(554,878), corner_timer=0.25
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (232 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (231 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (231 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (231 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:26] [INFO] [EnemyGrenade] Unsafe throw distance (230 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:27] [INFO] [EnemyGrenade] Unsafe throw distance (230 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:27] [INFO] [EnemyGrenade] Unsafe throw distance (230 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:27] [INFO] [EnemyGrenade] Unsafe throw distance (230 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:27] [INFO] [EnemyGrenade] Unsafe throw distance (230 < 275 safe distance, blast=225, margin=50) - skipping throw
[18:12:27] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[18:12:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:27] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[18:12:27] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[18:12:27] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[18:12:27] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[18:12:27] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[18:12:27] [INFO] [LastChance] Resetting all effects (scene change detected)
[18:12:27] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[18:12:27] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[18:12:27] [ENEMY] [Enemy1] Death animation component initialized
[18:12:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:27] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[18:12:27] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[18:12:27] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[18:12:27] [ENEMY] [Enemy2] Death animation component initialized
[18:12:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:27] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[18:12:27] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[18:12:27] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[18:12:27] [ENEMY] [Enemy3] Death animation component initialized
[18:12:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:27] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[18:12:27] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[18:12:27] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[18:12:27] [ENEMY] [Enemy4] Death animation component initialized
[18:12:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:27] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[18:12:27] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[18:12:27] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[18:12:27] [ENEMY] [Enemy5] Death animation component initialized
[18:12:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:27] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[18:12:27] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[18:12:27] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[18:12:27] [ENEMY] [Enemy6] Death animation component initialized
[18:12:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:27] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[18:12:27] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[18:12:27] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[18:12:27] [ENEMY] [Enemy7] Death animation component initialized
[18:12:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:27] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[18:12:27] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[18:12:27] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[18:12:27] [ENEMY] [Enemy8] Death animation component initialized
[18:12:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:27] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[18:12:27] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[18:12:27] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[18:12:27] [ENEMY] [Enemy9] Death animation component initialized
[18:12:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:27] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[18:12:27] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[18:12:27] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[18:12:27] [ENEMY] [Enemy10] Death animation component initialized
[18:12:27] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:27] [INFO] [BloodyFeet:Player] Footprint scene loaded
[18:12:27] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[18:12:27] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[18:12:27] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[18:12:27] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[18:12:27] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[18:12:27] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[18:12:27] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[18:12:27] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[18:12:27] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[18:12:27] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[18:12:27] [INFO] [Player.Flashlight] Flashlight is selected, initializing...
[18:12:27] [INFO] [FlashlightEffect] PointLight2D found, energy=0.0, shadow=true
[18:12:27] [INFO] [FlashlightEffect] Flashlight sound loaded
[18:12:27] [INFO] [Player.Flashlight] Flashlight equipped and attached to PlayerModel at offset (20, 0)
[18:12:27] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 10/10
[18:12:27] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[18:12:27] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[18:12:27] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[18:12:27] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[18:12:27] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[18:12:27] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[18:12:27] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[18:12:27] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[18:12:27] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[18:12:27] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[18:12:27] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[18:12:27] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[18:12:27] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[18:12:27] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[18:12:27] [INFO] [ScoreManager] Level started with 10 enemies
[18:12:27] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[18:12:27] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[18:12:27] [INFO] [ReplayManager] Replay data cleared
[18:12:27] [INFO] [BuildingLevel] Previous replay data cleared
[18:12:27] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[18:12:27] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[18:12:27] [INFO] [ReplayManager] Level: BuildingLevel
[18:12:27] [INFO] [ReplayManager] Player: Player (valid: True)
[18:12:27] [INFO] [ReplayManager] Enemies count: 10
[18:12:27] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[18:12:27] [INFO] [ReplayManager]   Enemy 0: Enemy1
[18:12:27] [INFO] [ReplayManager]   Enemy 1: Enemy2
[18:12:27] [INFO] [ReplayManager]   Enemy 2: Enemy3
[18:12:27] [INFO] [ReplayManager]   Enemy 3: Enemy4
[18:12:27] [INFO] [ReplayManager]   Enemy 4: Enemy5
[18:12:27] [INFO] [ReplayManager]   Enemy 5: Enemy6
[18:12:27] [INFO] [ReplayManager]   Enemy 6: Enemy7
[18:12:27] [INFO] [ReplayManager]   Enemy 7: Enemy8
[18:12:27] [INFO] [ReplayManager]   Enemy 8: Enemy9
[18:12:27] [INFO] [ReplayManager]   Enemy 9: Enemy10
[18:12:27] [INFO] [BuildingLevel] Replay recording started successfully
[18:12:27] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[18:12:27] [INFO] [CinemaEffects] Found player node: Player
[18:12:27] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[18:12:27] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 9)
[18:12:27] [ENEMY] [Enemy1] Registered as sound listener
[18:12:27] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[18:12:27] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[18:12:27] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 10)
[18:12:27] [ENEMY] [Enemy2] Registered as sound listener
[18:12:27] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[18:12:27] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[18:12:27] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 11)
[18:12:27] [ENEMY] [Enemy3] Registered as sound listener
[18:12:27] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[18:12:27] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[18:12:27] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 12)
[18:12:27] [ENEMY] [Enemy4] Registered as sound listener
[18:12:27] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[18:12:27] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[18:12:27] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 13)
[18:12:27] [ENEMY] [Enemy5] Registered as sound listener
[18:12:27] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[18:12:27] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[18:12:27] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 14)
[18:12:27] [ENEMY] [Enemy6] Registered as sound listener
[18:12:27] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[18:12:27] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[18:12:27] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 15)
[18:12:27] [ENEMY] [Enemy7] Registered as sound listener
[18:12:27] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[18:12:27] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[18:12:27] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 16)
[18:12:27] [ENEMY] [Enemy8] Registered as sound listener
[18:12:27] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[18:12:27] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[18:12:27] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 17)
[18:12:27] [ENEMY] [Enemy9] Registered as sound listener
[18:12:27] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[18:12:27] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[18:12:27] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 18)
[18:12:27] [ENEMY] [Enemy10] Registered as sound listener
[18:12:27] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[18:12:27] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[18:12:27] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[18:12:27] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:12:27] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:12:27] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=236.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:12:27] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:12:27] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:12:27] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:12:27] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:12:27] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:12:27] [INFO] [Player] Detecting weapon pose (frame 3)...
[18:12:27] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[18:12:27] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[18:12:27] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[18:12:27] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[18:12:27] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[18:12:27] [INFO] [LastChance] Found player: Player
[18:12:27] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[18:12:27] [INFO] [LastChance] Connected to player Damaged signal (C#)
[18:12:27] [INFO] [LastChance] Connected to player Died signal (C#)
[18:12:27] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[18:12:28] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[18:12:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(497.3118, 1062.674), source=PLAYER (MakarovPM), range=1469, listeners=18
[18:12:28] [INFO] [SoundPropagation] Cleaned up 8 invalid listeners
[18:12:28] [ENEMY] [Enemy3] Heard gunshot at (497.3118, 1062.674), source_type=0, intensity=0.02, distance=373
[18:12:28] [ENEMY] [Enemy4] Heard gunshot at (497.3118, 1062.674), source_type=0, intensity=0.02, distance=344
[18:12:28] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=6
[18:12:28] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=123.5°, current=-123.8°, player=(497,1056), corner_timer=0.00
[18:12:28] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=152.6°, current=-67.5°, player=(497,1056), corner_timer=0.00
[18:12:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(497.3118, 1062.674), shooter_id=13680141929902, bullet_pos=(590.3593, 1024.256)
[18:12:28] [INFO] [Bullet] Using shooter_position, distance=100.666656494141
[18:12:28] [INFO] [Bullet] Distance to wall: 100.666656494141 (6.85457775034477% of viewport)
[18:12:28] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:28] [INFO] [Bullet] Caliber cannot penetrate walls
[18:12:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(549.5065, 1062.676), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:28] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=6
[18:12:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(549.5065, 1062.676), shooter_id=13680141929902, bullet_pos=(641.6957, 1022.242)
[18:12:28] [INFO] [Bullet] Using shooter_position, distance=100.666748046875
[18:12:28] [INFO] [Bullet] Distance to wall: 100.666748046875 (6.85458398433881% of viewport)
[18:12:28] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:28] [INFO] [Bullet] Caliber cannot penetrate walls
[18:12:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(578.1176, 1062.676), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:28] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=6
[18:12:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(578.1176, 1062.676), shooter_id=13680141929902, bullet_pos=(670.3614, 1022.366)
[18:12:28] [INFO] [Bullet] Using shooter_position, distance=100.666725158691
[18:12:28] [INFO] [Bullet] Distance to wall: 100.666725158691 (6.8545824258403% of viewport)
[18:12:28] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:28] [INFO] [Bullet] Caliber cannot penetrate walls
[18:12:28] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[18:12:28] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[18:12:28] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(582,1056), corner_timer=0.30
[18:12:28] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(582,1056), corner_timer=0.30
[18:12:28] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[18:12:28] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[18:12:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(582.0065, 1062.676), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:28] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=6
[18:12:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(582.0065, 1062.676), shooter_id=13680141929902, bullet_pos=(710.5346, 1024.775)
[18:12:28] [INFO] [Bullet] Using shooter_position, distance=133.999984741211
[18:12:28] [INFO] [Bullet] Distance to wall: 133.999984741211 (9.12430536527362% of viewport)
[18:12:28] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:28] [INFO] [Bullet] Caliber cannot penetrate walls
[18:12:29] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(582,1056), corner_timer=-0.02
[18:12:29] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[18:12:29] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(582,1056), corner_timer=-0.02
[18:12:29] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[18:12:29] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(582,1056), corner_timer=0.30
[18:12:29] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(582,1056), corner_timer=0.30
[18:12:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(582.0065, 1062.676), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=6
[18:12:29] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[18:12:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(582.0065, 1062.676), shooter_id=13680141929902, bullet_pos=(745.374, 1026.461)
[18:12:29] [INFO] [Bullet] Using shooter_position, distance=167.333419799805
[18:12:29] [INFO] [Bullet] Distance to wall: 167.333419799805 (11.3940402531955% of viewport)
[18:12:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:29] [INFO] [Bullet] Caliber cannot penetrate walls
[18:12:29] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(582,1040), corner_timer=-0.02
[18:12:29] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[18:12:29] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(582,1040), corner_timer=0.30
[18:12:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(582.0065, 1046.008), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=6
[18:12:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(582.0065, 1046.008), shooter_id=13680141929902, bullet_pos=(680.4326, 1024.888)
[18:12:29] [INFO] [Bullet] Using shooter_position, distance=100.666580200195
[18:12:29] [INFO] [Bullet] Distance to wall: 100.666580200195 (6.85457255534975% of viewport)
[18:12:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(582.0065, 1046.008), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=6
[18:12:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(582.0065, 1046.008), shooter_id=13680141929902, bullet_pos=(663.6685, 1026.328)
[18:12:29] [INFO] [Bullet] Using shooter_position, distance=83.9999084472656
[18:12:29] [INFO] [Bullet] Distance to wall: 83.9999084472656 (5.71970822838582% of viewport)
[18:12:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:29] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(582,1040), corner_timer=-0.02
[18:12:29] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[18:12:29] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(582,1040), corner_timer=0.30
[18:12:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(582.0065, 1046.008), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=6
[18:12:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(582.0065, 1046.008), shooter_id=13680141929902, bullet_pos=(680.468, 1025.053)
[18:12:29] [INFO] [Bullet] Using shooter_position, distance=100.66658782959
[18:12:29] [INFO] [Bullet] Distance to wall: 100.66658782959 (6.85457307484925% of viewport)
[18:12:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:30] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(582,1040), corner_timer=-0.02
[18:12:30] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[18:12:30] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(582,1040), corner_timer=0.30
[18:12:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(582.0065, 1046.008), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:30] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=6
[18:12:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(582.0065, 1046.008), shooter_id=13680141929902, bullet_pos=(663.1122, 1024.147)
[18:12:30] [INFO] [Bullet] Using shooter_position, distance=84.0000991821289
[18:12:30] [INFO] [Bullet] Distance to wall: 84.0000991821289 (5.71972121587339% of viewport)
[18:12:30] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:30] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[18:12:30] [ENEMY] [Enemy3] PURSUING corner check: angle -149.5°
[18:12:30] [ENEMY] [Enemy1] Player ammo empty: false -> true
[18:12:30] [ENEMY] [Enemy2] Player ammo empty: false -> true
[18:12:30] [ENEMY] [Enemy3] Player ammo empty: false -> true
[18:12:30] [ENEMY] [Enemy4] Player ammo empty: false -> true
[18:12:30] [ENEMY] [Enemy5] Player ammo empty: false -> true
[18:12:30] [ENEMY] [Enemy6] Player ammo empty: false -> true
[18:12:30] [ENEMY] [Enemy7] Player ammo empty: false -> true
[18:12:30] [ENEMY] [Enemy8] Player ammo empty: false -> true
[18:12:30] [ENEMY] [Enemy9] Player ammo empty: false -> true
[18:12:30] [ENEMY] [Enemy10] Player ammo empty: false -> true
[18:12:30] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(582.0065, 1040.008), source=PLAYER (Player), range=600, listeners=10
[18:12:30] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (582.0065, 1040.008), intensity=0.06, distance=207
[18:12:30] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (582.0065, 1040.008), intensity=0.07, distance=194
[18:12:30] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=7, self=0, below_threshold=1
[18:12:30] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=745), can_see=false
[18:12:30] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=523), can_see=false
[18:12:30] [ENEMY] [Enemy3] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=207), can_see=false
[18:12:30] [ENEMY] [Enemy3] Pursuing vulnerability sound at (582.0065, 1040.008), distance=207
[18:12:30] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=194), can_see=false
[18:12:30] [ENEMY] [Enemy4] Pursuing vulnerability sound at (582.0065, 1040.008), distance=194
[18:12:30] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1314), can_see=false
[18:12:30] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1490), can_see=false
[18:12:30] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1125), can_see=false
[18:12:30] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1380), can_see=false
[18:12:30] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1601), can_see=false
[18:12:30] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=806), can_see=false
[18:12:30] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(582,1040), corner_timer=-0.02
[18:12:30] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[18:12:30] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(582,1040), corner_timer=0.30
[18:12:30] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:30] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(582.0065, 1040.008), source=PLAYER (Player), range=600, listeners=10
[18:12:30] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (582.0065, 1040.008), intensity=0.03, distance=276
[18:12:30] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (582.0065, 1040.008), intensity=0.07, distance=194
[18:12:30] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=7, self=0, below_threshold=1
[18:12:30] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=745), can_see=false
[18:12:30] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=523), can_see=false
[18:12:30] [ENEMY] [Enemy3] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=277), can_see=false
[18:12:30] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=197), can_see=false
[18:12:30] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1314), can_see=false
[18:12:30] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1490), can_see=false
[18:12:30] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1085), can_see=false
[18:12:30] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1380), can_see=false
[18:12:30] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1601), can_see=false
[18:12:30] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=805), can_see=false
[18:12:30] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(582,1040), corner_timer=-0.02
[18:12:30] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[18:12:30] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(582,1040), corner_timer=0.30
[18:12:31] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[18:12:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:31] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[18:12:31] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[18:12:31] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[18:12:31] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[18:12:31] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[18:12:31] [INFO] [LastChance] Resetting all effects (scene change detected)
[18:12:31] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[18:12:31] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[18:12:31] [ENEMY] [Enemy1] Death animation component initialized
[18:12:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:31] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[18:12:31] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[18:12:31] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[18:12:31] [ENEMY] [Enemy2] Death animation component initialized
[18:12:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:31] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[18:12:31] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[18:12:31] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[18:12:31] [ENEMY] [Enemy3] Death animation component initialized
[18:12:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:31] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[18:12:31] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[18:12:31] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[18:12:31] [ENEMY] [Enemy4] Death animation component initialized
[18:12:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:31] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[18:12:31] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[18:12:31] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[18:12:31] [ENEMY] [Enemy5] Death animation component initialized
[18:12:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:31] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[18:12:31] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[18:12:31] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[18:12:31] [ENEMY] [Enemy6] Death animation component initialized
[18:12:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:31] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[18:12:31] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[18:12:31] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[18:12:31] [ENEMY] [Enemy7] Death animation component initialized
[18:12:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:31] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[18:12:31] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[18:12:31] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[18:12:31] [ENEMY] [Enemy8] Death animation component initialized
[18:12:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:31] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[18:12:31] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[18:12:31] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[18:12:31] [ENEMY] [Enemy9] Death animation component initialized
[18:12:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:31] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[18:12:31] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[18:12:31] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[18:12:31] [ENEMY] [Enemy10] Death animation component initialized
[18:12:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:31] [INFO] [BloodyFeet:Player] Footprint scene loaded
[18:12:31] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[18:12:31] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[18:12:31] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[18:12:31] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[18:12:31] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[18:12:31] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[18:12:31] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[18:12:31] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[18:12:31] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[18:12:31] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[18:12:31] [INFO] [Player.Flashlight] Flashlight is selected, initializing...
[18:12:31] [INFO] [FlashlightEffect] PointLight2D found, energy=0.0, shadow=true
[18:12:31] [INFO] [FlashlightEffect] Flashlight sound loaded
[18:12:31] [INFO] [Player.Flashlight] Flashlight equipped and attached to PlayerModel at offset (20, 0)
[18:12:31] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 10/10
[18:12:31] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[18:12:31] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[18:12:31] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[18:12:31] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[18:12:31] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[18:12:31] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[18:12:31] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[18:12:31] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[18:12:31] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[18:12:31] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[18:12:31] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[18:12:31] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[18:12:31] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[18:12:31] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[18:12:31] [INFO] [ScoreManager] Level started with 10 enemies
[18:12:31] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[18:12:31] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[18:12:31] [INFO] [ReplayManager] Replay data cleared
[18:12:31] [INFO] [BuildingLevel] Previous replay data cleared
[18:12:31] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[18:12:31] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[18:12:31] [INFO] [ReplayManager] Level: BuildingLevel
[18:12:31] [INFO] [ReplayManager] Player: Player (valid: True)
[18:12:31] [INFO] [ReplayManager] Enemies count: 10
[18:12:31] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[18:12:31] [INFO] [ReplayManager]   Enemy 0: Enemy1
[18:12:31] [INFO] [ReplayManager]   Enemy 1: Enemy2
[18:12:31] [INFO] [ReplayManager]   Enemy 2: Enemy3
[18:12:31] [INFO] [ReplayManager]   Enemy 3: Enemy4
[18:12:31] [INFO] [ReplayManager]   Enemy 4: Enemy5
[18:12:31] [INFO] [ReplayManager]   Enemy 5: Enemy6
[18:12:31] [INFO] [ReplayManager]   Enemy 6: Enemy7
[18:12:31] [INFO] [ReplayManager]   Enemy 7: Enemy8
[18:12:31] [INFO] [ReplayManager]   Enemy 8: Enemy9
[18:12:31] [INFO] [ReplayManager]   Enemy 9: Enemy10
[18:12:31] [INFO] [BuildingLevel] Replay recording started successfully
[18:12:31] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[18:12:31] [INFO] [CinemaEffects] Found player node: Player
[18:12:31] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[18:12:31] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[18:12:31] [ENEMY] [Enemy1] Registered as sound listener
[18:12:31] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[18:12:31] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[18:12:31] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[18:12:31] [ENEMY] [Enemy2] Registered as sound listener
[18:12:31] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[18:12:31] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[18:12:31] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[18:12:31] [ENEMY] [Enemy3] Registered as sound listener
[18:12:31] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[18:12:31] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[18:12:31] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[18:12:31] [ENEMY] [Enemy4] Registered as sound listener
[18:12:31] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[18:12:31] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[18:12:31] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[18:12:31] [ENEMY] [Enemy5] Registered as sound listener
[18:12:31] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[18:12:31] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[18:12:31] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[18:12:31] [ENEMY] [Enemy6] Registered as sound listener
[18:12:31] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[18:12:31] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[18:12:31] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[18:12:31] [ENEMY] [Enemy7] Registered as sound listener
[18:12:31] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[18:12:31] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[18:12:31] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[18:12:31] [ENEMY] [Enemy8] Registered as sound listener
[18:12:31] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[18:12:31] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[18:12:31] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[18:12:31] [ENEMY] [Enemy9] Registered as sound listener
[18:12:31] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[18:12:31] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[18:12:31] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[18:12:31] [ENEMY] [Enemy10] Registered as sound listener
[18:12:31] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[18:12:31] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[18:12:31] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[18:12:31] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:31] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:31] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=281.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:31] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:31] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:31] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:31] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=157.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:31] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:31] [INFO] [Player] Detecting weapon pose (frame 3)...
[18:12:31] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[18:12:31] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[18:12:31] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[18:12:31] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[18:12:31] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[18:12:31] [INFO] [LastChance] Found player: Player
[18:12:31] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[18:12:31] [INFO] [LastChance] Connected to player Damaged signal (C#)
[18:12:31] [INFO] [LastChance] Connected to player Died signal (C#)
[18:12:31] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[18:12:32] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[18:12:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(520.6901, 1063.948), source=PLAYER (MakarovPM), range=1469, listeners=20
[18:12:32] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[18:12:32] [ENEMY] [Enemy3] Heard gunshot at (520.6901, 1063.948), source_type=0, intensity=0.02, distance=362
[18:12:32] [ENEMY] [Enemy4] Heard gunshot at (520.6901, 1063.948), source_type=0, intensity=0.02, distance=324
[18:12:32] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=6
[18:12:32] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=120.2°, current=-78.7°, player=(520,1057), corner_timer=0.00
[18:12:32] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=150.5°, current=-101.3°, player=(520,1057), corner_timer=0.00
[18:12:32] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[18:12:32] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[18:12:32] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(531,1046), corner_timer=0.30
[18:12:32] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(531,1046), corner_timer=0.30
[18:12:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(547.1231, 1046.067), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:32] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=6
[18:12:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(520.6901, 1063.948), shooter_id=15068959869896, bullet_pos=(700.7073, 1025.873)
[18:12:32] [INFO] [Bullet] Using shooter_position, distance=183.999862670898
[18:12:32] [INFO] [Bullet] Distance to wall: 183.999862670898 (12.5288889951743% of viewport)
[18:12:32] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(547.1231, 1046.067), shooter_id=15068959869896, bullet_pos=(662.4705, 1024.57)
[18:12:32] [INFO] [Bullet] Using shooter_position, distance=117.333381652832
[18:12:32] [INFO] [Bullet] Distance to wall: 117.333381652832 (7.98944571380522% of viewport)
[18:12:32] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.7824, 1046.067), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:32] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=6
[18:12:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(552.7824, 1046.067), shooter_id=15068959869896, bullet_pos=(634.1456, 1025.186)
[18:12:32] [INFO] [Bullet] Using shooter_position, distance=83.9999618530273
[18:12:32] [INFO] [Bullet] Distance to wall: 83.9999618530273 (5.71971186488234% of viewport)
[18:12:32] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:32] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(552,1040), corner_timer=-0.02
[18:12:32] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[18:12:32] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(552,1040), corner_timer=-0.02
[18:12:32] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[18:12:32] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(552,1040), corner_timer=0.30
[18:12:32] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(552,1040), corner_timer=0.30
[18:12:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.7824, 1046.067), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:33] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=6
[18:12:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(552.7824, 1046.067), shooter_id=15068959869896, bullet_pos=(617.3041, 1026.813)
[18:12:33] [INFO] [Bullet] Using shooter_position, distance=67.3332595825195
[18:12:33] [INFO] [Bullet] Distance to wall: 67.3332595825195 (4.5848454599204% of viewport)
[18:12:33] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[18:12:33] [INFO] [Bullet] Caliber cannot penetrate walls
[18:12:33] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[18:12:33] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[18:12:33] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[18:12:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.7824, 1046.067), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:33] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=6
[18:12:33] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(552,1040), corner_timer=-0.02
[18:12:33] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[18:12:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(552.7824, 1046.067), shooter_id=15068959869896, bullet_pos=(616.8439, 1025.333)
[18:12:33] [INFO] [Bullet] Using shooter_position, distance=67.3333740234375
[18:12:33] [INFO] [Bullet] Distance to wall: 67.3333740234375 (4.58485325241295% of viewport)
[18:12:33] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[18:12:33] [INFO] [Bullet] Caliber cannot penetrate walls
[18:12:33] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(552,1040), corner_timer=0.30
[18:12:33] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(552,1040), corner_timer=-0.02
[18:12:33] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[18:12:33] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(552,1040), corner_timer=0.30
[18:12:33] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[18:12:33] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:33] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[18:12:33] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[18:12:33] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[18:12:33] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[18:12:33] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[18:12:33] [INFO] [LastChance] Resetting all effects (scene change detected)
[18:12:33] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[18:12:33] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[18:12:33] [ENEMY] [Enemy1] Death animation component initialized
[18:12:33] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:33] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[18:12:33] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[18:12:33] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[18:12:33] [ENEMY] [Enemy2] Death animation component initialized
[18:12:33] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:33] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[18:12:33] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[18:12:33] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[18:12:33] [ENEMY] [Enemy3] Death animation component initialized
[18:12:33] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:33] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[18:12:33] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[18:12:33] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[18:12:33] [ENEMY] [Enemy4] Death animation component initialized
[18:12:33] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:33] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[18:12:33] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[18:12:33] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[18:12:33] [ENEMY] [Enemy5] Death animation component initialized
[18:12:33] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:33] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[18:12:33] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[18:12:33] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[18:12:33] [ENEMY] [Enemy6] Death animation component initialized
[18:12:33] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:33] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[18:12:33] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[18:12:33] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[18:12:33] [ENEMY] [Enemy7] Death animation component initialized
[18:12:33] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:33] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[18:12:33] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[18:12:33] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[18:12:33] [ENEMY] [Enemy8] Death animation component initialized
[18:12:33] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:33] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[18:12:33] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[18:12:33] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[18:12:33] [ENEMY] [Enemy9] Death animation component initialized
[18:12:33] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:33] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[18:12:33] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[18:12:33] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[18:12:33] [ENEMY] [Enemy10] Death animation component initialized
[18:12:33] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:33] [INFO] [BloodyFeet:Player] Footprint scene loaded
[18:12:33] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[18:12:33] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[18:12:33] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[18:12:33] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[18:12:33] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[18:12:33] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[18:12:33] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[18:12:33] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[18:12:33] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[18:12:33] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[18:12:33] [INFO] [Player.Flashlight] Flashlight is selected, initializing...
[18:12:33] [INFO] [FlashlightEffect] PointLight2D found, energy=0.0, shadow=true
[18:12:33] [INFO] [FlashlightEffect] Flashlight sound loaded
[18:12:33] [INFO] [Player.Flashlight] Flashlight equipped and attached to PlayerModel at offset (20, 0)
[18:12:33] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 10/10
[18:12:33] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[18:12:33] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[18:12:33] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[18:12:33] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[18:12:33] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[18:12:33] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[18:12:33] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[18:12:33] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[18:12:33] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[18:12:33] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[18:12:33] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[18:12:33] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[18:12:33] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[18:12:33] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[18:12:33] [INFO] [ScoreManager] Level started with 10 enemies
[18:12:33] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[18:12:33] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[18:12:33] [INFO] [ReplayManager] Replay data cleared
[18:12:33] [INFO] [BuildingLevel] Previous replay data cleared
[18:12:33] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[18:12:33] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[18:12:33] [INFO] [ReplayManager] Level: BuildingLevel
[18:12:33] [INFO] [ReplayManager] Player: Player (valid: True)
[18:12:33] [INFO] [ReplayManager] Enemies count: 10
[18:12:33] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[18:12:33] [INFO] [ReplayManager]   Enemy 0: Enemy1
[18:12:33] [INFO] [ReplayManager]   Enemy 1: Enemy2
[18:12:33] [INFO] [ReplayManager]   Enemy 2: Enemy3
[18:12:33] [INFO] [ReplayManager]   Enemy 3: Enemy4
[18:12:33] [INFO] [ReplayManager]   Enemy 4: Enemy5
[18:12:33] [INFO] [ReplayManager]   Enemy 5: Enemy6
[18:12:33] [INFO] [ReplayManager]   Enemy 6: Enemy7
[18:12:33] [INFO] [ReplayManager]   Enemy 7: Enemy8
[18:12:33] [INFO] [ReplayManager]   Enemy 8: Enemy9
[18:12:33] [INFO] [ReplayManager]   Enemy 9: Enemy10
[18:12:33] [INFO] [BuildingLevel] Replay recording started successfully
[18:12:33] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[18:12:33] [INFO] [CinemaEffects] Found player node: Player
[18:12:33] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[18:12:33] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[18:12:33] [ENEMY] [Enemy1] Registered as sound listener
[18:12:33] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[18:12:33] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[18:12:33] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[18:12:33] [ENEMY] [Enemy2] Registered as sound listener
[18:12:33] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[18:12:33] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[18:12:33] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[18:12:33] [ENEMY] [Enemy3] Registered as sound listener
[18:12:33] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[18:12:33] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[18:12:33] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[18:12:33] [ENEMY] [Enemy4] Registered as sound listener
[18:12:33] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[18:12:33] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[18:12:33] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[18:12:33] [ENEMY] [Enemy5] Registered as sound listener
[18:12:33] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[18:12:33] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[18:12:33] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[18:12:33] [ENEMY] [Enemy6] Registered as sound listener
[18:12:33] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[18:12:33] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[18:12:33] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[18:12:33] [ENEMY] [Enemy7] Registered as sound listener
[18:12:33] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[18:12:33] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[18:12:33] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[18:12:33] [ENEMY] [Enemy8] Registered as sound listener
[18:12:33] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[18:12:33] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[18:12:33] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[18:12:33] [ENEMY] [Enemy9] Registered as sound listener
[18:12:33] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[18:12:33] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[18:12:33] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[18:12:33] [ENEMY] [Enemy10] Registered as sound listener
[18:12:33] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[18:12:33] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[18:12:34] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[18:12:34] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:34] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:34] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:34] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:34] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:34] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:34] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=78.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:34] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:34] [INFO] [Player] Detecting weapon pose (frame 3)...
[18:12:34] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[18:12:34] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[18:12:34] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[18:12:34] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[18:12:34] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[18:12:34] [INFO] [LastChance] Found player: Player
[18:12:34] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[18:12:34] [INFO] [LastChance] Connected to player Damaged signal (C#)
[18:12:34] [INFO] [LastChance] Connected to player Died signal (C#)
[18:12:34] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[18:12:34] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[18:12:35] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[18:12:35] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[18:12:35] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,825), corner_timer=0.30
[18:12:35] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,825), corner_timer=0.30
[18:12:35] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=164.4°, current=-168.8°, player=(449,819), corner_timer=0.00
[18:12:35] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[18:12:35] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=166.7°, current=-8.9°, player=(448,809), corner_timer=0.00
[18:12:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(438.8892, 791.4436), source=PLAYER (MakarovPM), range=1469, listeners=20
[18:12:35] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[18:12:35] [ENEMY] [Enemy1] Heard gunshot at (438.8892, 791.4436), source_type=0, intensity=0.01, distance=463
[18:12:35] [ENEMY] [Enemy2] Heard gunshot at (438.8892, 791.4436), source_type=0, intensity=0.04, distance=245
[18:12:35] [ENEMY] [Enemy4] Heard gunshot at (438.8892, 791.4436), source_type=0, intensity=0.02, distance=377
[18:12:35] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:12:35] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=72.3°, current=33.8°, player=(438,785), corner_timer=0.00
[18:12:35] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=80.6°, current=-101.3°, player=(438,785), corner_timer=0.00
[18:12:35] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-162.4°, current=-101.3°, player=(438,785), corner_timer=0.00
[18:12:35] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(404,764), corner_timer=-0.02
[18:12:35] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[18:12:35] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(404,764), corner_timer=-0.02
[18:12:35] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[18:12:35] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(399,763), corner_timer=0.30
[18:12:35] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(399,763), corner_timer=0.30
[18:12:35] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(378.8111, 768.2426), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:35] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:12:35] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[18:12:35] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[18:12:35] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=RETREATING, target=-166.9°, current=81.4°, player=(340,762), corner_timer=0.00
[18:12:36] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(438.8892, 791.4436), shooter_id=16014624425691, bullet_pos=(911.691, 626.7461)
[18:12:36] [INFO] [Bullet] Using shooter_position, distance=500.666412353516
[18:12:36] [INFO] [Bullet] Distance to wall: 500.666412353516 (34.0912966615028% of viewport)
[18:12:36] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:36] [INFO] [Bullet] Caliber cannot penetrate walls
[18:12:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(307.6444, 768.2426), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:36] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:12:36] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[18:12:36] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[18:12:36] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[18:12:36] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(304,762), corner_timer=-0.02
[18:12:36] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[18:12:36] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(300,762), corner_timer=0.30
[18:12:36] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P1:visible, state=RETREATING, target=172.7°, current=124.7°, player=(284,762), corner_timer=0.00
[18:12:36] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 3/3 -> 2/3
[18:12:36] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[18:12:36] [INFO] [ImpactEffects] spawn_blood_effect called at (611.1249, 704.2661), dir=(0.973716, -0.227764), lethal=false
[18:12:36] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:12:36] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:12:36] [INFO] [ImpactEffects] Blood effect spawned at (611.1249, 704.2661) (scale=0.5)
[18:12:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(283.0888, 770.2426), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:36] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[18:12:36] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(283,769), corner_timer=-0.02
[18:12:36] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[18:12:36] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(283,771), corner_timer=0.30
[18:12:36] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=-142.0°, current=160.7°, player=(283,782), corner_timer=0.00
[18:12:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(283.0888, 789.4092), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:36] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[18:12:36] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[18:12:36] [INFO] [BloodDecal] Blood puddle created at (682.9737, 697.5155) (added to group)
[18:12:36] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[18:12:36] [INFO] [BloodDecal] Blood puddle created at (717.6989, 686.1394) (added to group)
[18:12:36] [INFO] [BloodDecal] Blood puddle created at (681.7094, 713.4047) (added to group)
[18:12:36] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(283,785), corner_timer=-0.02
[18:12:36] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[18:12:36] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(283,785), corner_timer=0.30
[18:12:36] [INFO] [BloodDecal] Blood puddle created at (683.3174, 732.1534) (added to group)
[18:12:36] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[18:12:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:36] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[18:12:36] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[18:12:36] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[18:12:36] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[18:12:36] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[18:12:36] [INFO] [LastChance] Resetting all effects (scene change detected)
[18:12:36] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[18:12:36] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[18:12:36] [ENEMY] [Enemy1] Death animation component initialized
[18:12:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:36] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[18:12:36] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[18:12:36] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[18:12:36] [ENEMY] [Enemy2] Death animation component initialized
[18:12:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:36] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[18:12:36] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[18:12:36] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[18:12:36] [ENEMY] [Enemy3] Death animation component initialized
[18:12:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:36] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[18:12:36] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[18:12:36] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[18:12:36] [ENEMY] [Enemy4] Death animation component initialized
[18:12:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:36] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[18:12:36] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[18:12:36] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[18:12:36] [ENEMY] [Enemy5] Death animation component initialized
[18:12:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:36] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[18:12:36] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[18:12:36] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[18:12:36] [ENEMY] [Enemy6] Death animation component initialized
[18:12:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:36] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[18:12:36] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[18:12:36] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[18:12:36] [ENEMY] [Enemy7] Death animation component initialized
[18:12:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:36] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[18:12:36] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[18:12:36] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[18:12:36] [ENEMY] [Enemy8] Death animation component initialized
[18:12:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:36] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[18:12:36] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[18:12:36] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[18:12:36] [INFO] [EnemyGrenade] Initialized: 1 grenades
[18:12:36] [ENEMY] [Enemy9] Death animation component initialized
[18:12:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:36] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[18:12:36] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[18:12:36] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[18:12:36] [ENEMY] [Enemy10] Death animation component initialized
[18:12:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:36] [INFO] [BloodyFeet:Player] Footprint scene loaded
[18:12:36] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[18:12:36] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[18:12:36] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[18:12:36] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[18:12:36] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[18:12:36] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[18:12:36] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[18:12:36] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[18:12:36] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[18:12:36] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[18:12:36] [INFO] [Player.Flashlight] Flashlight is selected, initializing...
[18:12:36] [INFO] [FlashlightEffect] PointLight2D found, energy=0.0, shadow=true
[18:12:36] [INFO] [FlashlightEffect] Flashlight sound loaded
[18:12:36] [INFO] [Player.Flashlight] Flashlight equipped and attached to PlayerModel at offset (20, 0)
[18:12:36] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 10/10
[18:12:36] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[18:12:36] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[18:12:36] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[18:12:36] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[18:12:36] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[18:12:36] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[18:12:36] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[18:12:36] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[18:12:36] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[18:12:36] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[18:12:36] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[18:12:36] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[18:12:36] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[18:12:36] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[18:12:36] [INFO] [ScoreManager] Level started with 10 enemies
[18:12:36] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[18:12:36] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[18:12:36] [INFO] [ReplayManager] Replay data cleared
[18:12:36] [INFO] [BuildingLevel] Previous replay data cleared
[18:12:36] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[18:12:36] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[18:12:36] [INFO] [ReplayManager] Level: BuildingLevel
[18:12:36] [INFO] [ReplayManager] Player: Player (valid: True)
[18:12:36] [INFO] [ReplayManager] Enemies count: 10
[18:12:36] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[18:12:36] [INFO] [ReplayManager]   Enemy 0: Enemy1
[18:12:36] [INFO] [ReplayManager]   Enemy 1: Enemy2
[18:12:36] [INFO] [ReplayManager]   Enemy 2: Enemy3
[18:12:36] [INFO] [ReplayManager]   Enemy 3: Enemy4
[18:12:36] [INFO] [ReplayManager]   Enemy 4: Enemy5
[18:12:36] [INFO] [ReplayManager]   Enemy 5: Enemy6
[18:12:36] [INFO] [ReplayManager]   Enemy 6: Enemy7
[18:12:36] [INFO] [ReplayManager]   Enemy 7: Enemy8
[18:12:36] [INFO] [ReplayManager]   Enemy 8: Enemy9
[18:12:36] [INFO] [ReplayManager]   Enemy 9: Enemy10
[18:12:36] [INFO] [BuildingLevel] Replay recording started successfully
[18:12:36] [INFO] [BloodDecal] Blood puddle created at (682.8879, 737.6306) (added to group)
[18:12:36] [INFO] [BloodDecal] Blood puddle created at (712.0611, 692.1499) (added to group)
[18:12:36] [INFO] [BloodDecal] Blood puddle created at (712.9833, 789.3344) (added to group)
[18:12:36] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[18:12:36] [INFO] [CinemaEffects] Found player node: Player
[18:12:36] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[18:12:36] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[18:12:36] [ENEMY] [Enemy1] Registered as sound listener
[18:12:36] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[18:12:36] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[18:12:36] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[18:12:36] [ENEMY] [Enemy2] Registered as sound listener
[18:12:36] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[18:12:36] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[18:12:36] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[18:12:36] [ENEMY] [Enemy3] Registered as sound listener
[18:12:36] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[18:12:36] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[18:12:36] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[18:12:36] [ENEMY] [Enemy4] Registered as sound listener
[18:12:36] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[18:12:36] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[18:12:36] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[18:12:36] [ENEMY] [Enemy5] Registered as sound listener
[18:12:36] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[18:12:36] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[18:12:36] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[18:12:36] [ENEMY] [Enemy6] Registered as sound listener
[18:12:36] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[18:12:36] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[18:12:36] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[18:12:36] [ENEMY] [Enemy7] Registered as sound listener
[18:12:36] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[18:12:36] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[18:12:36] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[18:12:36] [ENEMY] [Enemy8] Registered as sound listener
[18:12:36] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[18:12:36] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[18:12:36] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[18:12:36] [ENEMY] [Enemy9] Registered as sound listener
[18:12:36] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[18:12:36] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[18:12:36] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[18:12:36] [ENEMY] [Enemy10] Registered as sound listener
[18:12:36] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[18:12:36] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[18:12:37] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[18:12:37] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:37] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:37] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:37] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:37] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:37] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:37] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:37] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:37] [INFO] [Player] Detecting weapon pose (frame 3)...
[18:12:37] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[18:12:37] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[18:12:37] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[18:12:37] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[18:12:37] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[18:12:37] [INFO] [LastChance] Found player: Player
[18:12:37] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[18:12:37] [INFO] [LastChance] Connected to player Damaged signal (C#)
[18:12:37] [INFO] [LastChance] Connected to player Died signal (C#)
[18:12:37] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[18:12:37] [INFO] [BloodDecal] Blood puddle created at (783.6957, 765.1049) (added to group)
[18:12:37] [INFO] [BloodDecal] Blood puddle created at (823.7465, 694.126) (added to group)
[18:12:37] [INFO] [BloodDecal] Blood puddle created at (767.9008, 752.1067) (added to group)
[18:12:37] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[18:12:38] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[18:12:38] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[18:12:38] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,847), corner_timer=0.30
[18:12:38] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,847), corner_timer=0.30
[18:12:38] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,767), corner_timer=-0.02
[18:12:38] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[18:12:38] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,767), corner_timer=-0.02
[18:12:38] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[18:12:38] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,766), corner_timer=0.30
[18:12:38] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,766), corner_timer=0.30
[18:12:38] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[18:12:39] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(419,762), corner_timer=-0.02
[18:12:39] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[18:12:39] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(415,762), corner_timer=0.30
[18:12:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(392.8333, 768.4444), source=PLAYER (MakarovPM), range=1469, listeners=20
[18:12:39] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[18:12:39] [ENEMY] [Enemy1] Heard gunshot at (392.8333, 768.4444), source_type=0, intensity=0.01, distance=429
[18:12:39] [ENEMY] [Enemy2] Heard gunshot at (392.8333, 768.4444), source_type=0, intensity=0.05, distance=219
[18:12:39] [ENEMY] [Enemy3] Heard gunshot at (392.8333, 768.4444), source_type=0, intensity=0.03, distance=308
[18:12:39] [ENEMY] [Enemy4] Heard gunshot at (392.8333, 768.4444), source_type=0, intensity=0.01, distance=428
[18:12:39] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:12:39] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=77.3°, current=-33.8°, player=(392,762), corner_timer=0.00
[18:12:39] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=91.9°, current=-101.3°, player=(392,762), corner_timer=0.00
[18:12:39] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=177.7°, current=-33.8°, player=(392,762), corner_timer=0.00
[18:12:39] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-161.3°, current=-67.5°, player=(392,762), corner_timer=0.00
[18:12:39] [INFO] [BloodyFeet:Enemy3] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[18:12:39] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=177.7°, current=141.1°, player=(390,762), corner_timer=0.00
[18:12:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(378.1111, 768.4444), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:39] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:12:39] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/2 -> 1/2
[18:12:39] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[18:12:39] [INFO] [ImpactEffects] spawn_blood_effect called at (636.0491, 752.506), dir=(0.987903, -0.155074), lethal=false
[18:12:39] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:12:39] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:12:39] [INFO] [ImpactEffects] Blood effect spawned at (636.0491, 752.506) (scale=0.5)
[18:12:39] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(378,762), corner_timer=-0.02
[18:12:39] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[18:12:39] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(378,762), corner_timer=0.30
[18:12:39] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[18:12:39] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 1/2 -> 0/2
[18:12:39] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[18:12:39] [INFO] [ImpactEffects] spawn_blood_effect called at (617.3559, 757.7184), dir=(0.997, -0.077402), lethal=true
[18:12:39] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:12:39] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[18:12:39] [INFO] [ImpactEffects] Blood effect spawned at (617.3559, 757.7184) (scale=0.75)
[18:12:39] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[18:12:39] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[18:12:39] [INFO] [PowerFantasy] Enemy killed - triggering 300ms last chance effect
[18:12:39] [INFO] [PowerFantasy] Starting power fantasy effect:
[18:12:39] [INFO] [PowerFantasy]   - Time scale: 0.10
[18:12:39] [INFO] [PowerFantasy]   - Duration: 300ms
[18:12:39] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[18:12:39] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[18:12:39] [INFO] [DeathAnim] Started - Angle: -4.4 deg, Index: 11
[18:12:39] [ENEMY] [Enemy3] Death animation started with hit direction: (0.997, -0.077402)
[18:12:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(378.1111, 768.4444), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:12:39] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[18:12:39] [INFO] [ReplayManager] Recording frame 180 (2,8s): player_valid=True, enemies=10
[18:12:39] [INFO] [PowerFantasy] Effect duration expired after 312.00 ms
[18:12:39] [INFO] [PowerFantasy] Ending power fantasy effect
[18:12:40] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[18:12:40] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[18:12:40] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[18:12:40] [INFO] [BloodDecal] Blood puddle created at (682.9583, 778.1203) (added to group)
[18:12:40] [INFO] [BloodDecal] Blood puddle created at (717.7798, 761.8651) (added to group)
[18:12:40] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(378,762), corner_timer=-0.01
[18:12:40] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[18:12:40] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(378,762), corner_timer=0.30
[18:12:40] [INFO] [BloodDecal] Blood puddle created at (726.8454, 757.9529) (added to group)
[18:12:40] [INFO] [BloodDecal] Blood puddle created at (740.2451, 760.8477) (added to group)
[18:12:40] [INFO] [BloodDecal] Blood puddle created at (665.0844, 763.3302) (added to group)
[18:12:40] [INFO] [BloodDecal] Blood puddle created at (695.4612, 746.2175) (added to group)
[18:12:40] [INFO] [BloodDecal] Blood puddle created at (697.2244, 782.1944) (added to group)
[18:12:40] [INFO] [BloodDecal] Blood puddle created at (670.9165, 791.8992) (added to group)
[18:12:40] [INFO] [BloodDecal] Blood puddle created at (745.1178, 753.0338) (added to group)
[18:12:40] [INFO] [BloodDecal] Blood puddle created at (676.2523, 773.782) (added to group)
[18:12:40] [INFO] [BloodDecal] Blood puddle created at (664.6211, 802.4683) (added to group)
[18:12:40] [INFO] [BloodDecal] Blood puddle created at (670.9778, 781.1727) (added to group)
[18:12:40] [INFO] [BloodDecal] Blood puddle created at (688.4479, 771.0386) (added to group)
[18:12:40] [INFO] [BloodDecal] Blood puddle created at (760.34, 754.8468) (added to group)
[18:12:40] [INFO] [BloodDecal] Blood puddle created at (712.6216, 776.1932) (added to group)
[18:12:40] [INFO] [BloodDecal] Blood puddle created at (752.6486, 777.9935) (added to group)
[18:12:40] [ENEMY] [Enemy3] Ragdoll activated
[18:12:40] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[18:12:40] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(378,762), corner_timer=-0.02
[18:12:40] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[18:12:40] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(378,762), corner_timer=0.30
[18:12:40] [INFO] [BloodDecal] Blood puddle created at (720.0645, 788.2793) (added to group)
[18:12:40] [INFO] [BloodDecal] Blood puddle created at (738.9125, 799.4194) (added to group)
[18:12:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(378.1111, 768.4444), shooter_id=17077075183850, bullet_pos=(919.6727, 739.5251)
[18:12:40] [INFO] [Bullet] Using shooter_position, distance=542.333251953125
[18:12:40] [INFO] [Bullet] Distance to wall: 542.333251953125 (36.9284683884022% of viewport)
[18:12:40] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:40] [INFO] [Bullet] Caliber cannot penetrate walls
[18:12:40] [INFO] [BloodDecal] Blood puddle created at (767.1538, 808.3821) (added to group)
[18:12:40] [INFO] [BloodDecal] Blood puddle created at (824.5245, 767.6357) (added to group)
[18:12:40] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:40] [INFO] [ReplayManager] Recording frame 240 (3,7s): player_valid=True, enemies=10
[18:12:40] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(445,762), corner_timer=-0.02
[18:12:40] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[18:12:40] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(450,762), corner_timer=0.30
[18:12:41] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:41] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=56.7°, current=57.8°, player=(537,759), corner_timer=0.00
[18:12:41] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(551,753), corner_timer=-0.02
[18:12:41] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[18:12:41] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[18:12:41] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(556,751), corner_timer=0.30
[18:12:41] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(596.3291, 721.0889), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:12:41] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=4
[18:12:41] [ENEMY] [Enemy3] Death animation completed
[18:12:41] [ENEMY] [Enemy1] PURSUING corner check: angle -138.2°
[18:12:41] [ENEMY] [Enemy4] PURSUING corner check: angle -38.8°
[18:12:41] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(631,681), corner_timer=-0.02
[18:12:41] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[18:12:41] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(635,678), corner_timer=0.30
[18:12:41] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(674.7519, 671.4106), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:12:41] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=5
[18:12:41] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[18:12:41] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[18:12:41] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=-2.7°, current=19.7°, player=(696,665), corner_timer=0.00
[18:12:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(674.7519, 671.4106), shooter_id=17077075183850, bullet_pos=(523.1641, 600.5479)
[18:12:41] [INFO] [Bullet] Using shooter_position, distance=167.333190917969
[18:12:41] [INFO] [Bullet] Distance to wall: 167.333190917969 (11.3940246682104% of viewport)
[18:12:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:41] [INFO] [Bullet] Caliber cannot penetrate walls
[18:12:41] [ENEMY] [Enemy1] PURSUING corner check: angle 81.0°
[18:12:41] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[18:12:41] [INFO] [ReplayManager] Recording frame 300 (4,7s): player_valid=True, enemies=10
[18:12:41] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[18:12:41] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(735,665), corner_timer=-0.02
[18:12:41] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[18:12:41] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(740,665), corner_timer=0.30
[18:12:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(762.6717, 671.2171), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:12:42] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=5
[18:12:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(596.3291, 721.0889), shooter_id=17077075183850, bullet_pos=(53.30746, 464.3237)
[18:12:42] [INFO] [Bullet] Using shooter_position, distance=600.667053222656
[18:12:42] [INFO] [Bullet] Distance to wall: 600.667053222656 (40.9005241832466% of viewport)
[18:12:42] [INFO] [Bullet] Distance-based penetration chance: 98.9493884528789%
[18:12:42] [INFO] [Bullet] Caliber cannot penetrate walls
[18:12:42] [ENEMY] [Enemy4] PURSUING corner check: angle -92.3°
[18:12:42] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(811.9313, 685.0753), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:12:42] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=5
[18:12:42] [ENEMY] [Enemy1] PURSUING corner check: angle 128.4°
[18:12:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(762.6717, 671.2171), shooter_id=17077075183850, bullet_pos=(519.8336, 559.4286)
[18:12:42] [INFO] [Bullet] Using shooter_position, distance=267.333129882813
[18:12:42] [INFO] [Bullet] Distance to wall: 267.333129882813 (18.2032043959999% of viewport)
[18:12:42] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:42] [INFO] [Bullet] Caliber cannot penetrate walls
[18:12:42] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(831,697), corner_timer=-0.02
[18:12:42] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[18:12:42] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(835,700), corner_timer=0.30
[18:12:42] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[18:12:42] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[18:12:42] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[18:12:42] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:42] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[18:12:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(811.9313, 685.0753), shooter_id=17077075183850, bullet_pos=(526.5614, 546.2799)
[18:12:42] [INFO] [Bullet] Using shooter_position, distance=317.332885742188
[18:12:42] [INFO] [Bullet] Distance to wall: 317.332885742188 (21.6077797139086% of viewport)
[18:12:42] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:42] [INFO] [Bullet] Caliber cannot penetrate walls
[18:12:42] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[18:12:42] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[18:12:42] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.5°, current=89.5°, player=(877,787), corner_timer=-0.02
[18:12:42] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[18:12:42] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(877,793), corner_timer=0.30
[18:12:42] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[18:12:42] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:42] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[18:12:42] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[18:12:42] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=-8.3°, current=-9.0°, player=(861,868), corner_timer=0.02
[18:12:42] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[18:12:42] [INFO] [ReplayManager] Recording frame 360 (5,7s): player_valid=True, enemies=10
[18:12:42] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=-4.9°, current=-179.9°, player=(846,884), corner_timer=0.02
[18:12:42] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.4°, current=89.5°, player=(846,884), corner_timer=-0.02
[18:12:42] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[18:12:42] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.3°, player=(842,888), corner_timer=0.30
[18:12:43] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(772.2907, 964.6908), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:12:43] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=8
[18:12:43] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.5°, player=(768,962), corner_timer=-0.02
[18:12:43] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:12:43] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(764,966), corner_timer=0.30
[18:12:43] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[18:12:43] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 2/2 -> 1/2
[18:12:43] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[18:12:43] [INFO] [ImpactEffects] spawn_blood_effect called at (593.8071, 906.9529), dir=(-0.897613, -0.440785), lethal=false
[18:12:43] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:12:43] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:12:43] [INFO] [ImpactEffects] Wall found for blood splatter at (524, 872.6732) (dist=77 px)
[18:12:43] [INFO] [BloodDecal] Blood puddle created at (525, 872.6732) (added to group)
[18:12:43] [INFO] [ImpactEffects] Blood effect spawned at (593.8071, 906.9529) (scale=0.5)
[18:12:43] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=28.5°, current=26.2°, player=(735,983), corner_timer=0.02
[18:12:43] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(713.7742, 989.9332), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:12:43] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=7
[18:12:43] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[18:12:43] [INFO] [BloodyFeet:Player] Blood ran out - no more footprints
[18:12:43] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 1/2 -> 0/2
[18:12:43] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[18:12:43] [INFO] [ImpactEffects] spawn_blood_effect called at (586.2445, 909.562), dir=(-0.914335, -0.404959), lethal=true
[18:12:43] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:12:43] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[18:12:43] [INFO] [ImpactEffects] Wall found for blood splatter at (524, 881.9938) (dist=68 px)
[18:12:43] [INFO] [BloodDecal] Blood puddle created at (525, 881.9938) (added to group)
[18:12:43] [INFO] [ImpactEffects] Blood effect spawned at (586.2445, 909.562) (scale=0.75)
[18:12:43] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
[18:12:43] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
[18:12:43] [INFO] [PowerFantasy] Enemy killed - triggering 300ms last chance effect
[18:12:43] [INFO] [PowerFantasy] Starting power fantasy effect:
[18:12:43] [INFO] [PowerFantasy]   - Time scale: 0.10
[18:12:43] [INFO] [PowerFantasy]   - Duration: 300ms
[18:12:43] [ENEMY] [Enemy4] [AllyDeath] Notified 1 enemies
[18:12:43] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 8)
[18:12:43] [INFO] [DeathAnim] Started - Angle: -156.1 deg, Index: 1
[18:12:43] [ENEMY] [Enemy4] Death animation started with hit direction: (-0.914335, -0.404959)
[18:12:43] [ENEMY] [Enemy1] Player ammo empty: false -> true
[18:12:43] [ENEMY] [Enemy2] Player ammo empty: false -> true
[18:12:43] [ENEMY] [Enemy4] Player ammo empty: false -> true
[18:12:43] [ENEMY] [Enemy5] Player ammo empty: false -> true
[18:12:43] [ENEMY] [Enemy6] Player ammo empty: false -> true
[18:12:43] [ENEMY] [Enemy7] Player ammo empty: false -> true
[18:12:43] [ENEMY] [Enemy8] Player ammo empty: false -> true
[18:12:43] [ENEMY] [Enemy9] Player ammo empty: false -> true
[18:12:43] [ENEMY] [Enemy10] Player ammo empty: false -> true
[18:12:43] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(669.7742, 983.9332), source=PLAYER (Player), range=600, listeners=8
[18:12:43] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=7, self=0, below_threshold=1
[18:12:43] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=610), can_see=false
[18:12:43] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=551), can_see=false
[18:12:43] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1210), can_see=false
[18:12:43] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1387), can_see=false
[18:12:43] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(669,983), corner_timer=-0.02
[18:12:43] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=945), can_see=false
[18:12:43] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:12:43] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1316), can_see=false
[18:12:43] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1538), can_see=false
[18:12:43] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=788), can_see=false
[18:12:43] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(664,983), corner_timer=0.30
[18:12:43] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[18:12:43] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[18:12:43] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(658.2271, 983.9332), source=PLAYER (Player), range=600, listeners=8
[18:12:43] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=7, self=0, below_threshold=1
[18:12:43] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[18:12:43] [INFO] [BloodDecal] Blood puddle created at (540.6064, 916.2233) (added to group)
[18:12:43] [INFO] [PowerFantasy] Effect duration expired after 310.00 ms
[18:12:43] [INFO] [PowerFantasy] Ending power fantasy effect
[18:12:43] [INFO] [ReplayManager] Recording frame 420 (6,5s): player_valid=True, enemies=10
[18:12:43] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[18:12:43] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[18:12:43] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[18:12:43] [INFO] [BloodDecal] Blood puddle created at (530.6556, 899.8943) (added to group)
[18:12:44] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:44] [INFO] [BloodDecal] Blood puddle created at (525.5972, 894.8745) (added to group)
[18:12:44] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[18:12:44] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[18:12:44] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[18:12:44] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=554), can_see=false
[18:12:44] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=567), can_see=false
[18:12:44] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1252), can_see=false
[18:12:44] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1436), can_see=false
[18:12:44] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1004), can_see=false
[18:12:44] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1379), can_see=false
[18:12:44] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1602), can_see=false
[18:12:44] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=842), can_see=false
[18:12:44] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[18:12:44] [INFO] [BloodDecal] Blood puddle created at (525.2029, 915.3174) (added to group)
[18:12:44] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[18:12:44] [INFO] [BloodDecal] Blood puddle created at (548.5619, 891.132) (added to group)
[18:12:44] [ENEMY] [Enemy1] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=73.0°, current=122.5°, player=(601,950), corner_timer=0.15
[18:12:44] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) - pursuing to attack (dist=519)
[18:12:44] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
[18:12:44] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[18:12:44] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=176.6°, current=89.4°, player=(600,946), corner_timer=-0.01
[18:12:44] [ENEMY] [Enemy7] PATROL corner check: angle 89.2°
[18:12:44] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.2°, current=92.3°, player=(598,942), corner_timer=0.30
[18:12:44] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[18:12:44] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:44] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[18:12:44] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[18:12:44] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[18:12:44] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[18:12:44] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[18:12:44] [INFO] [LastChance] Resetting all effects (scene change detected)
[18:12:44] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[18:12:44] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[18:12:44] [ENEMY] [Enemy1] Death animation component initialized
[18:12:44] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:44] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[18:12:44] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[18:12:44] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[18:12:44] [ENEMY] [Enemy2] Death animation component initialized
[18:12:44] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:44] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[18:12:44] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[18:12:44] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[18:12:44] [ENEMY] [Enemy3] Death animation component initialized
[18:12:44] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:44] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[18:12:44] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[18:12:44] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[18:12:44] [ENEMY] [Enemy4] Death animation component initialized
[18:12:44] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:44] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[18:12:44] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[18:12:44] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[18:12:44] [ENEMY] [Enemy5] Death animation component initialized
[18:12:44] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:44] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[18:12:44] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[18:12:44] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[18:12:44] [ENEMY] [Enemy6] Death animation component initialized
[18:12:44] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:44] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[18:12:44] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[18:12:44] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[18:12:44] [ENEMY] [Enemy7] Death animation component initialized
[18:12:44] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:44] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[18:12:44] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[18:12:44] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[18:12:44] [ENEMY] [Enemy8] Death animation component initialized
[18:12:44] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:44] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[18:12:44] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[18:12:44] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[18:12:44] [ENEMY] [Enemy9] Death animation component initialized
[18:12:44] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:44] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[18:12:44] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[18:12:44] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[18:12:44] [ENEMY] [Enemy10] Death animation component initialized
[18:12:44] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:44] [INFO] [BloodyFeet:Player] Footprint scene loaded
[18:12:44] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[18:12:44] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[18:12:44] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[18:12:44] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[18:12:44] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[18:12:44] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[18:12:44] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[18:12:44] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[18:12:44] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[18:12:44] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[18:12:44] [INFO] [Player.Flashlight] Flashlight is selected, initializing...
[18:12:44] [INFO] [FlashlightEffect] PointLight2D found, energy=0.0, shadow=true
[18:12:44] [INFO] [FlashlightEffect] Flashlight sound loaded
[18:12:44] [INFO] [Player.Flashlight] Flashlight equipped and attached to PlayerModel at offset (20, 0)
[18:12:44] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 10/10
[18:12:44] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[18:12:44] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[18:12:44] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[18:12:44] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[18:12:44] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[18:12:44] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[18:12:44] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[18:12:44] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[18:12:44] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[18:12:44] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[18:12:44] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[18:12:44] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[18:12:44] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[18:12:44] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[18:12:44] [INFO] [ScoreManager] Level started with 10 enemies
[18:12:44] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[18:12:44] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[18:12:44] [INFO] [ReplayManager] Replay data cleared
[18:12:44] [INFO] [BuildingLevel] Previous replay data cleared
[18:12:44] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[18:12:44] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[18:12:44] [INFO] [ReplayManager] Level: BuildingLevel
[18:12:44] [INFO] [ReplayManager] Player: Player (valid: True)
[18:12:44] [INFO] [ReplayManager] Enemies count: 10
[18:12:44] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[18:12:44] [INFO] [ReplayManager]   Enemy 0: Enemy1
[18:12:44] [INFO] [ReplayManager]   Enemy 1: Enemy2
[18:12:44] [INFO] [ReplayManager]   Enemy 2: Enemy3
[18:12:44] [INFO] [ReplayManager]   Enemy 3: Enemy4
[18:12:44] [INFO] [ReplayManager]   Enemy 4: Enemy5
[18:12:44] [INFO] [ReplayManager]   Enemy 5: Enemy6
[18:12:44] [INFO] [ReplayManager]   Enemy 6: Enemy7
[18:12:44] [INFO] [ReplayManager]   Enemy 7: Enemy8
[18:12:44] [INFO] [ReplayManager]   Enemy 8: Enemy9
[18:12:44] [INFO] [ReplayManager]   Enemy 9: Enemy10
[18:12:44] [INFO] [BuildingLevel] Replay recording started successfully
[18:12:44] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[18:12:44] [INFO] [CinemaEffects] Found player node: Player
[18:12:44] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[18:12:44] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 9)
[18:12:44] [ENEMY] [Enemy1] Registered as sound listener
[18:12:44] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[18:12:44] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[18:12:44] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 10)
[18:12:44] [ENEMY] [Enemy2] Registered as sound listener
[18:12:44] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[18:12:44] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[18:12:44] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 11)
[18:12:44] [ENEMY] [Enemy3] Registered as sound listener
[18:12:44] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[18:12:44] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[18:12:44] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 12)
[18:12:44] [ENEMY] [Enemy4] Registered as sound listener
[18:12:44] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[18:12:44] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[18:12:44] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 13)
[18:12:44] [ENEMY] [Enemy5] Registered as sound listener
[18:12:44] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[18:12:44] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[18:12:44] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 14)
[18:12:44] [ENEMY] [Enemy6] Registered as sound listener
[18:12:44] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[18:12:44] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[18:12:44] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 15)
[18:12:44] [ENEMY] [Enemy7] Registered as sound listener
[18:12:44] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[18:12:44] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[18:12:44] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 16)
[18:12:44] [ENEMY] [Enemy8] Registered as sound listener
[18:12:44] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[18:12:44] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[18:12:44] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 17)
[18:12:44] [ENEMY] [Enemy9] Registered as sound listener
[18:12:44] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[18:12:44] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[18:12:44] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 18)
[18:12:44] [ENEMY] [Enemy10] Registered as sound listener
[18:12:44] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[18:12:44] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[18:12:44] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[18:12:44] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:12:44] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:12:44] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=281.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:12:44] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:12:44] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:12:44] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:12:44] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=78.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:12:44] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:12:44] [INFO] [Player] Detecting weapon pose (frame 3)...
[18:12:44] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[18:12:44] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[18:12:44] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[18:12:44] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[18:12:44] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[18:12:44] [INFO] [LastChance] Found player: Player
[18:12:44] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[18:12:44] [INFO] [LastChance] Connected to player Damaged signal (C#)
[18:12:44] [INFO] [LastChance] Connected to player Died signal (C#)
[18:12:44] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[18:12:45] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[18:12:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(443.4004, 821.2662), source=PLAYER (MakarovPM), range=1469, listeners=18
[18:12:45] [INFO] [SoundPropagation] Cleaned up 8 invalid listeners
[18:12:45] [ENEMY] [Enemy1] Heard gunshot at (443.4004, 821.2662), source_type=0, intensity=0.01, distance=493
[18:12:45] [ENEMY] [Enemy2] Heard gunshot at (443.4004, 821.2662), source_type=0, intensity=0.03, distance=275
[18:12:45] [ENEMY] [Enemy3] Heard gunshot at (443.4004, 821.2662), source_type=0, intensity=0.04, distance=266
[18:12:45] [ENEMY] [Enemy4] Heard gunshot at (443.4004, 821.2662), source_type=0, intensity=0.02, distance=365
[18:12:45] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:12:45] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=72.9°, current=-33.8°, player=(443,815), corner_timer=0.00
[18:12:45] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=80.7°, current=-101.3°, player=(443,815), corner_timer=0.00
[18:12:45] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=165.7°, current=-78.7°, player=(443,815), corner_timer=0.00
[18:12:45] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-166.6°, current=-101.3°, player=(443,815), corner_timer=0.00
[18:12:45] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[18:12:45] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[18:12:45] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(435,800), corner_timer=0.30
[18:12:45] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(435,800), corner_timer=0.30
[18:12:46] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=171.1°, current=123.9°, player=(425,794), corner_timer=0.00
[18:12:46] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[18:12:46] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(430,812), corner_timer=-0.02
[18:12:46] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[18:12:46] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(430,812), corner_timer=-0.02
[18:12:46] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[18:12:46] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(432,815), corner_timer=0.30
[18:12:46] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(432,815), corner_timer=0.30
[18:12:46] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[18:12:46] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=IN_COVER, target=139.3°, current=162.6°, player=(438,825), corner_timer=0.00
[18:12:46] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[18:12:46] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[18:12:46] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[18:12:46] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[18:12:46] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[18:12:46] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(443,907), corner_timer=-0.02
[18:12:46] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[18:12:46] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(443,912), corner_timer=0.30
[18:12:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(443.4004, 821.2662), shooter_id=19502204978596, bullet_pos=(1112.079, 295.431)
[18:12:46] [INFO] [Bullet] Using shooter_position, distance=850.666870117188
[18:12:46] [INFO] [Bullet] Distance to wall: 850.666870117188 (57.9234714247224% of viewport)
[18:12:46] [INFO] [Bullet] Distance-based penetration chance: 79.0892833378239%
[18:12:46] [INFO] [Bullet] Penetration failed (distance roll)
[18:12:46] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(396,976), corner_timer=-0.02
[18:12:46] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[18:12:46] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(391,977), corner_timer=0.30
[18:12:47] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(321,978), corner_timer=-0.02
[18:12:47] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[18:12:47] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(320,978), corner_timer=0.30
[18:12:47] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[18:12:47] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(318,978), corner_timer=-0.02
[18:12:47] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[18:12:47] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(318,978), corner_timer=0.30
[18:12:47] [ENEMY] [Enemy1] Warning: No valid flank position (both sides behind walls)
[18:12:47] [ENEMY] [Enemy1] FLANKING started: target=(134.1891, 901.9476), side=left, pos=(243.0488, 401.9332)
[18:12:47] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
[18:12:47] [ENEMY] [Enemy2] PURSUING corner check: angle 168.7°
[18:12:47] [ENEMY] [Enemy4] PURSUING corner check: angle -173.7°
[18:12:47] [ENEMY] [Enemy1] FLANKING corner check: angle -116.1°
[18:12:47] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:48] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(318,978), corner_timer=-0.02
[18:12:48] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[18:12:48] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(318,978), corner_timer=0.30
[18:12:48] [ENEMY] [Enemy1] FLANKING corner check: angle 15.4°
[18:12:48] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:48] [ENEMY] [Enemy4] PURSUING corner check: angle -85.6°
[18:12:48] [INFO] [ReplayManager] Recording frame 240 (4,0s): player_valid=True, enemies=10
[18:12:48] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(318,978), corner_timer=-0.02
[18:12:48] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[18:12:48] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(318,978), corner_timer=0.30
[18:12:48] [ENEMY] [Enemy1] FLANKING corner check: angle 116.8°
[18:12:48] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:48] [ENEMY] [Enemy3] State: SUPPRESSED -> IN_COVER
[18:12:48] [ENEMY] [Enemy3] State: IN_COVER -> PURSUING
[18:12:48] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=PURSUING, target=148.4°, current=159.8°, player=(318,978), corner_timer=0.00
[18:12:48] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(318,978), corner_timer=-0.02
[18:12:48] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[18:12:48] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(318,978), corner_timer=0.30
[18:12:48] [ENEMY] [Enemy1] FLANKING corner check: angle -63.2°
[18:12:48] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:49] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(318,978), corner_timer=-0.02
[18:12:49] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[18:12:49] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(318,978), corner_timer=0.30
[18:12:49] [ENEMY] [Enemy1] FLANKING corner check: angle -86.4°
[18:12:49] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:49] [INFO] [ReplayManager] Recording frame 300 (5,0s): player_valid=True, enemies=10
[18:12:49] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(318,978), corner_timer=-0.02
[18:12:49] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[18:12:49] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(318,978), corner_timer=0.30
[18:12:49] [ENEMY] [Enemy1] FLANKING corner check: angle 22.7°
[18:12:49] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:49] [ENEMY] [Enemy2] FLANKING started: target=(513.0723, 930.2814), side=right, pos=(413.5599, 649.7839)
[18:12:49] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
[18:12:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(318.9669, 984.4797), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:49] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=4, self=0, below_threshold=2
[18:12:49] [ENEMY] [Enemy1] ROT_CHANGE: P2:combat_state -> P1:visible, state=FLANKING, target=127.4°, current=172.4°, player=(318,978), corner_timer=0.18
[18:12:49] [ENEMY] [Enemy1] State: FLANKING -> COMBAT
[18:12:49] [ENEMY] [Enemy1] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=128.1°, current=-178.8°, player=(318,978), corner_timer=0.18
[18:12:49] [ENEMY] [Enemy2] FLANKING corner check: angle -100.6°
[18:12:49] [ENEMY] [Enemy1] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=128.4°, current=175.9°, player=(318,978), corner_timer=0.18
[18:12:49] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.5°, current=89.5°, player=(318,978), corner_timer=-0.02
[18:12:49] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[18:12:49] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(318,978), corner_timer=0.30
[18:12:49] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(318.9669, 984.4797), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:49] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=4, self=0, below_threshold=2
[18:12:50] [ENEMY] [Enemy2] FLANKING corner check: angle -35.7°
[18:12:50] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
[18:12:50] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=FLANKING, target=124.6°, current=125.4°, player=(318,978), corner_timer=0.30
[18:12:50] [ENEMY] [Enemy2] State: FLANKING -> COMBAT
[18:12:50] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.4°, current=89.5°, player=(318,978), corner_timer=-0.02
[18:12:50] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[18:12:50] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=125.0°, current=-163.6°, player=(318,978), corner_timer=0.30
[18:12:50] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.3°, player=(318,978), corner_timer=0.30
[18:12:50] [ENEMY] [Enemy4] FLANKING started: target=(394.6098, 793.3362), side=left, pos=(565.2795, 944.8404)
[18:12:50] [ENEMY] [Enemy4] State: PURSUING -> FLANKING
[18:12:50] [ENEMY] [Enemy3] PURSUING corner check: angle -134.2°
[18:12:50] [ENEMY] [Enemy1] Hit taken, damage: 1, health: 3/3 -> 2/3
[18:12:50] [ENEMY] [Enemy1] ImpactEffectsManager found, calling spawn_blood_effect
[18:12:50] [INFO] [ImpactEffects] spawn_blood_effect called at (486.0191, 777.976), dir=(0.671363, -0.741128), lethal=false
[18:12:50] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:12:50] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:12:50] [INFO] [ImpactEffects] Blood effect spawned at (486.0191, 777.976) (scale=0.5)
[18:12:50] [ENEMY] [Enemy4] FLANKING corner check: angle -39.2°
[18:12:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(318.9669, 984.4797), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:50] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=4, self=0, below_threshold=2
[18:12:50] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:50] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=127.1°, current=174.9°, player=(318,978), corner_timer=0.30
[18:12:50] [INFO] [ReplayManager] Recording frame 360 (6,0s): player_valid=True, enemies=10
[18:12:50] [ENEMY] [Enemy1] ROT_CHANGE: P1:visible -> P3:corner, state=RETREATING, target=22.7°, current=135.9°, player=(317,978), corner_timer=0.18
[18:12:50] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.5°, player=(315,978), corner_timer=-0.02
[18:12:50] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:12:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(314.578, 984.4797), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:50] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=4, self=0, below_threshold=2
[18:12:50] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(314,978), corner_timer=0.30
[18:12:50] [ENEMY] [Enemy2] Hit taken, damage: 1, health: 4/4 -> 3/4
[18:12:50] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[18:12:50] [INFO] [ImpactEffects] spawn_blood_effect called at (502.6118, 736.5588), dir=(0.619885, -0.784692), lethal=false
[18:12:50] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:12:50] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:12:50] [INFO] [ImpactEffects] Blood effect spawned at (502.6118, 736.5588) (scale=0.5)
[18:12:50] [ENEMY] [Enemy3] PURSUING corner check: angle 45.8°
[18:12:50] [INFO] [BloodDecal] Blood puddle created at (532.8644, 764.9772) (added to group)
[18:12:50] [INFO] [BloodyFeet:Enemy1] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[18:12:50] [ENEMY] [Enemy4] FLANKING corner check: angle -42.9°
[18:12:50] [INFO] [BloodDecal] Blood puddle created at (546.8895, 710.3332) (added to group)
[18:12:50] [INFO] [BloodDecal] Blood puddle created at (508.9481, 735.941) (added to group)
[18:12:50] [INFO] [BloodDecal] Blood puddle created at (562.9532, 715.3448) (added to group)
[18:12:50] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:50] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
[18:12:50] [INFO] [BloodDecal] Blood puddle created at (530.3539, 710.8426) (added to group)
[18:12:50] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
[18:12:50] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[18:12:50] [INFO] [BloodDecal] Blood puddle created at (535.6328, 707.0979) (added to group)
[18:12:50] [INFO] [BloodDecal] Blood puddle created at (555.6229, 758.1833) (added to group)
[18:12:50] [ENEMY] [Enemy2] Hit taken, damage: 1, health: 3/4 -> 2/4
[18:12:50] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[18:12:50] [INFO] [ImpactEffects] spawn_blood_effect called at (473.3359, 759.8237), dir=(0.606865, -0.794805), lethal=false
[18:12:50] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:12:50] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:12:50] [INFO] [ImpactEffects] Blood effect spawned at (473.3359, 759.8237) (scale=0.5)
[18:12:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(475.7048, 761.0483), source=ENEMY (Enemy2), range=1469, listeners=10
[18:12:50] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[18:12:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(313.078, 984.4797), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:50] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=4, self=0, below_threshold=2
[18:12:50] [INFO] [BloodDecal] Blood puddle created at (621.4622, 726.9839) (added to group)
[18:12:50] [INFO] [BloodDecal] Blood puddle created at (575.2231, 775.6982) (added to group)
[18:12:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(484.6251, 766.8391), source=ENEMY (Enemy2), range=1469, listeners=10
[18:12:50] [ENEMY] [Enemy4] Heard gunshot at (484.6251, 766.8391), source_type=1, intensity=0.47, distance=73
[18:12:50] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[18:12:50] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(312,978), corner_timer=-0.02
[18:12:50] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:12:50] [INFO] [BloodDecal] Blood puddle created at (537.1929, 725.4957) (added to group)
[18:12:50] [INFO] [BloodDecal] Blood puddle created at (518.3632, 711.1407) (added to group)
[18:12:50] [INFO] [BloodyFeet:Enemy4] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[18:12:50] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P3:corner, state=RETREATING, target=-35.7°, current=30.6°, player=(312,978), corner_timer=0.30
[18:12:50] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(312,978), corner_timer=0.30
[18:12:50] [INFO] [LastChance] Threat detected: @Area2D@3660
[18:12:50] [INFO] [LastChance] Not in hard mode - effect disabled
[18:12:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:12:50] [INFO] [BloodyFeet:Enemy2] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[18:12:50] [ENEMY] [Enemy2] ROT_CHANGE: P3:corner -> P1:visible, state=RETREATING, target=131.0°, current=81.5°, player=(311,978), corner_timer=0.30
[18:12:50] [INFO] [BloodDecal] Blood puddle created at (534.6776, 745.5173) (added to group)
[18:12:50] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P3:corner, state=RETREATING, target=-35.7°, current=37.3°, player=(309,978), corner_timer=0.30
[18:12:50] [INFO] [BloodDecal] Blood puddle created at (574.3598, 677.3027) (added to group)
[18:12:50] [INFO] [BloodDecal] Blood puddle created at (540.0044, 707.7968) (added to group)
[18:12:50] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[18:12:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(303.7447, 984.4797), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:50] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=4, self=0, below_threshold=2
[18:12:50] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P3:corner, state=RETREATING, target=-42.9°, current=76.0°, player=(303,978), corner_timer=0.10
[18:12:50] [INFO] [BloodDecal] Blood puddle created at (558.8979, 673.1395) (added to group)
[18:12:50] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[18:12:50] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:50] [INFO] [BloodDecal] Blood puddle created at (554.4634, 731.0734) (added to group)
[18:12:50] [INFO] [BloodDecal] Blood puddle created at (553.8976, 673.598) (added to group)
[18:12:50] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[18:12:50] [INFO] [BloodDecal] Blood puddle created at (571.8608, 705.8149) (added to group)
[18:12:51] [INFO] [BloodDecal] Blood puddle created at (541.3812, 636.7894) (added to group)
[18:12:51] [INFO] [BloodDecal] Blood puddle created at (550.6606, 718.1752) (added to group)
[18:12:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(441.46216, 819.85345), shooter_id=19498497215602, bullet_pos=(51.708572, 1556.4236)
[18:12:51] [INFO] [Bullet] Using shooter_position, distance=833,3327
[18:12:51] [INFO] [Bullet] Distance to wall: 833,3327 (56,743156% of viewport)
[18:12:51] [INFO] [BloodDecal] Blood puddle created at (518.7292, 749.5344) (added to group)
[18:12:51] [INFO] [BloodDecal] Blood puddle created at (594.5528, 658.6308) (added to group)
[18:12:51] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
[18:12:51] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[18:12:51] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[18:12:51] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(240,978), corner_timer=-0.02
[18:12:51] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:12:51] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
[18:12:51] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(234,978), corner_timer=0.30
[18:12:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(441.46216, 819.85345), shooter_id=19498497215602, bullet_pos=(165.17525, 1741.9813)
[18:12:51] [INFO] [Bullet] Using shooter_position, distance=962,62885
[18:12:51] [INFO] [Bullet] Distance to wall: 962,62885 (65,547165% of viewport)
[18:12:51] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
[18:12:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(218.2447, 984.4797), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:51] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=4, self=0, below_threshold=2
[18:12:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(303.7447, 984.4797), shooter_id=19502204978596, bullet_pos=(499.583, 713.9189)
[18:12:51] [INFO] [Bullet] Using shooter_position, distance=333.999694824219
[18:12:51] [INFO] [Bullet] Distance to wall: 333.999694824219 (22.7426533918636% of viewport)
[18:12:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:51] [INFO] [Bullet] Caliber cannot penetrate walls
[18:12:51] [INFO] [BloodDecal] Blood puddle created at (511.9228, 737.8688) (added to group)
[18:12:51] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[18:12:51] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[18:12:51] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[18:12:51] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[18:12:51] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
[18:12:51] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:51] [INFO] [BloodDecal] Blood puddle created at (608.1646, 753.6714) (added to group)
[18:12:51] [INFO] [BloodDecal] Blood puddle created at (613.4772, 766.004) (added to group)
[18:12:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(441.46216, 819.85345), shooter_id=19498497215602, bullet_pos=(62.409714, 1931.6605)
[18:12:51] [INFO] [Bullet] Using shooter_position, distance=1174,6471
[18:12:51] [INFO] [Bullet] Distance to wall: 1174,6471 (79,98389% of viewport)
[18:12:51] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[18:12:51] [INFO] [BloodDecal] Blood puddle created at (499.5528, 721.3008) (added to group)
[18:12:51] [INFO] [BloodDecal] Blood puddle created at (526.5517, 731.3055) (added to group)
[18:12:51] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[18:12:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(441.46216, 819.85345), shooter_id=19498497215602, bullet_pos=(128.34616, 2075.829)
[18:12:51] [INFO] [Bullet] Using shooter_position, distance=1294,4174
[18:12:51] [INFO] [Bullet] Distance to wall: 1294,4174 (88,13926% of viewport)
[18:12:51] [INFO] [ReplayManager] Recording frame 420 (7,0s): player_valid=True, enemies=10
[18:12:51] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[18:12:51] [INFO] [BloodDecal] Blood puddle created at (570.1692, 730.7424) (added to group)
[18:12:51] [INFO] [BloodDecal] Blood puddle created at (514.7535, 744.39) (added to group)
[18:12:51] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[18:12:51] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(138,978), corner_timer=-0.02
[18:12:51] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:12:51] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(134,978), corner_timer=0.30
[18:12:51] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
[18:12:51] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:51] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(117,978), corner_timer=-0.02
[18:12:51] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:12:51] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(117,978), corner_timer=0.30
[18:12:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(313.078, 984.4797), shooter_id=19502204978596, bullet_pos=(1024.52, 58.99767)
[18:12:51] [INFO] [Bullet] Using shooter_position, distance=1167.33325195313
[18:12:51] [INFO] [Bullet] Distance to wall: 1167.33325195313 (79.4858676620619% of viewport)
[18:12:51] [INFO] [Bullet] Distance-based penetration chance: 53.9331543942612%
[18:12:51] [INFO] [Bullet] Caliber cannot penetrate walls
[18:12:51] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:52] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(107,978), corner_timer=-0.02
[18:12:52] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:12:52] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(105,978), corner_timer=0.30
[18:12:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(218.2447, 984.4797), shooter_id=19502204978596, bullet_pos=(1015.517, 300.1856)
[18:12:52] [INFO] [Bullet] Using shooter_position, distance=1050.66760253906
[18:12:52] [INFO] [Bullet] Distance to wall: 1050.66760253906 (71.5418890642458% of viewport)
[18:12:52] [INFO] [Bullet] Distance-based penetration chance: 63.2011294250466%
[18:12:52] [INFO] [Bullet] Penetration failed (distance roll)
[18:12:52] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[18:12:52] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[18:12:52] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[18:12:52] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:52] [INFO] [ReplayManager] Recording frame 480 (8,0s): player_valid=True, enemies=10
[18:12:52] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[18:12:52] [ENEMY] [Enemy1] Player reloading: false -> true
[18:12:52] [ENEMY] [Enemy2] Player reloading: false -> true
[18:12:52] [ENEMY] [Enemy3] Player reloading: false -> true
[18:12:52] [ENEMY] [Enemy4] Player reloading: false -> true
[18:12:52] [ENEMY] [Enemy5] Player reloading: false -> true
[18:12:52] [ENEMY] [Enemy6] Player reloading: false -> true
[18:12:52] [ENEMY] [Enemy7] Player reloading: false -> true
[18:12:52] [ENEMY] [Enemy8] Player reloading: false -> true
[18:12:52] [ENEMY] [Enemy9] Player reloading: false -> true
[18:12:52] [ENEMY] [Enemy10] Player reloading: false -> true
[18:12:52] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(80.01657, 978.4797), source=PLAYER (Player), range=900, listeners=10
[18:12:52] [ENEMY] [Enemy3] Heard player RELOAD at (80.01657, 978.4797), intensity=0.01, distance=469
[18:12:52] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=6, self=0, below_threshold=3
[18:12:52] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=506), can_see=false
[18:12:52] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=false (dist=526), can_see=false
[18:12:52] [ENEMY] [Enemy3] Player vulnerable (reloading) but cannot attack: close=false (dist=469), can_see=false
[18:12:52] [ENEMY] [Enemy3] Pursuing vulnerability sound at (80.01657, 978.4797), distance=469
[18:12:52] [ENEMY] [Enemy4] Player vulnerable (reloading) but cannot attack: close=false (dist=503), can_see=false
[18:12:52] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1738), can_see=false
[18:12:52] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1943), can_see=false
[18:12:52] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=1533), can_see=false
[18:12:52] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1880), can_see=false
[18:12:52] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=2099), can_see=false
[18:12:52] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=1246), can_see=false
[18:12:52] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(80,978), corner_timer=-0.02
[18:12:52] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:12:52] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(80,978), corner_timer=0.30
[18:12:52] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:52] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(80,978), corner_timer=-0.02
[18:12:52] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:12:52] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(80,978), corner_timer=0.30
[18:12:52] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[18:12:52] [ENEMY] [Enemy1] Player reloading: true -> false
[18:12:52] [ENEMY] [Enemy2] Player reloading: true -> false
[18:12:52] [ENEMY] [Enemy3] Player reloading: true -> false
[18:12:52] [ENEMY] [Enemy4] Player reloading: true -> false
[18:12:52] [ENEMY] [Enemy5] Player reloading: true -> false
[18:12:52] [ENEMY] [Enemy6] Player reloading: true -> false
[18:12:52] [ENEMY] [Enemy7] Player reloading: true -> false
[18:12:52] [ENEMY] [Enemy8] Player reloading: true -> false
[18:12:52] [ENEMY] [Enemy9] Player reloading: true -> false
[18:12:52] [ENEMY] [Enemy10] Player reloading: true -> false
[18:12:52] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[18:12:52] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:53] [INFO] [BloodyFeet:Enemy3] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[18:12:53] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=156.7°, current=-167.0°, player=(80,978), corner_timer=-0.02
[18:12:53] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
[18:12:53] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[18:12:53] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(80,978), corner_timer=-0.02
[18:12:53] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:12:53] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(80,978), corner_timer=0.30
[18:12:53] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:53] [INFO] [ReplayManager] Recording frame 540 (9,0s): player_valid=True, enemies=10
[18:12:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.01657, 984.4797), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:53] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=4
[18:12:53] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(80,978), corner_timer=-0.02
[18:12:53] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:12:53] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(80,978), corner_timer=0.30
[18:12:53] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:53] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 3/3 -> 2/3
[18:12:53] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[18:12:53] [INFO] [ImpactEffects] spawn_blood_effect called at (377.6573, 853.5862), dir=(0.905597, -0.424138), lethal=false
[18:12:53] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:12:53] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:12:53] [INFO] [ImpactEffects] Blood effect spawned at (377.6573, 853.5862) (scale=0.5)
[18:12:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.01657, 984.4797), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:53] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=4
[18:12:53] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(80,978), corner_timer=-0.02
[18:12:53] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:12:53] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(80,978), corner_timer=0.30
[18:12:53] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[18:12:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(328.7409, 866.2265), source=ENEMY (Enemy3), range=1469, listeners=10
[18:12:53] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[18:12:53] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:53] [INFO] [BloodDecal] Blood puddle created at (443.6931, 872.7327) (added to group)
[18:12:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(329.0913, 855.5656), source=ENEMY (Enemy3), range=1469, listeners=10
[18:12:54] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[18:12:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.01657, 984.4797), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:54] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=4
[18:12:54] [INFO] [BloodDecal] Blood puddle created at (476.2193, 859.5445) (added to group)
[18:12:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(268.76553, 901.66016), shooter_id=19498849536890, bullet_pos=(60.35425, 1039.7352)
[18:12:54] [INFO] [Bullet] Using shooter_position, distance=249,99998
[18:12:54] [INFO] [Bullet] Distance to wall: 249,99998 (17,02296% of viewport)
[18:12:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:54] [INFO] [LastChance] Threat detected: @Area2D@3717
[18:12:54] [INFO] [LastChance] Not in hard mode - effect disabled
[18:12:54] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:12:54] [INFO] [BloodDecal] Blood puddle created at (477.7201, 832.5237) (added to group)
[18:12:54] [INFO] [BloodDecal] Blood puddle created at (448.7235, 790.2997) (added to group)
[18:12:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(329.4416, 844.9047), source=ENEMY (Enemy3), range=1469, listeners=10
[18:12:54] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[18:12:54] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=-88.1°, current=-155.7°, player=(80,980), corner_timer=-0.02
[18:12:54] [INFO] [BloodDecal] Blood puddle created at (474.0078, 861.9064) (added to group)
[18:12:54] [INFO] [BloodDecal] Blood puddle created at (432.0035, 833.3617) (added to group)
[18:12:54] [INFO] [Player] Spawning blood effect at (80.0683, 981.81305), dir=(1, 0), lethal=False (C#)
[18:12:54] [INFO] [ImpactEffects] spawn_blood_effect called at (80.0683, 981.813), dir=(1, 0), lethal=false
[18:12:54] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:12:54] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:12:54] [INFO] [ImpactEffects] Blood effect spawned at (80.0683, 981.813) (scale=1)
[18:12:54] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 9.0
[18:12:54] [INFO] [LastChance] Player health updated (C# Damaged): 9.0
[18:12:54] [INFO] [LastChance] Threat detected: @Area2D@3725
[18:12:54] [INFO] [LastChance] Not in hard mode - effect disabled
[18:12:54] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:12:54] [ENEMY] [Enemy4] State: SUPPRESSED -> IN_COVER
[18:12:54] [INFO] [BloodDecal] Blood puddle created at (475.4764, 888.6202) (added to group)
[18:12:54] [ENEMY] [Enemy4] State: IN_COVER -> PURSUING
[18:12:54] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(80,985), corner_timer=-0.02
[18:12:54] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:12:54] [ENEMY] [Enemy2] State: SUPPRESSED -> IN_COVER
[18:12:54] [ENEMY] [Enemy4] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=158.9°, current=-42.9°, player=(80,987), corner_timer=0.10
[18:12:54] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(80,987), corner_timer=0.30
[18:12:54] [INFO] [BloodDecal] Blood puddle created at (462.9438, 881.9584) (added to group)
[18:12:54] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
[18:12:54] [ENEMY] [Enemy2] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=157.9°, current=-35.7°, player=(80,993), corner_timer=0.30
[18:12:54] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
[18:12:54] [ENEMY] [Enemy1] State: IN_COVER -> PURSUING
[18:12:54] [ENEMY] [Enemy1] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=155.5°, current=22.7°, player=(80,1013), corner_timer=0.18
[18:12:54] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:54] [INFO] [BloodDecal] Blood puddle created at (149.2749, 1021.954) (added to group)
[18:12:54] [INFO] [BloodDecal] Blood puddle created at (137.9295, 987.4796) (added to group)
[18:12:54] [INFO] [ReplayManager] Recording frame 600 (10,0s): player_valid=True, enemies=10
[18:12:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.075, 1048.98), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:54] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=4
[18:12:54] [INFO] [BloodDecal] Blood puddle created at (186.8274, 1012.578) (added to group)
[18:12:54] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P1:visible, state=RETREATING, target=128.9°, current=119.5°, player=(80,1044), corner_timer=-0.02
[18:12:54] [INFO] [BloodDecal] Blood puddle created at (179.5558, 996.7043) (added to group)
[18:12:54] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(80,1047), corner_timer=-0.02
[18:12:54] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:12:54] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(80,1048), corner_timer=0.30
[18:12:54] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=-46.5°, current=-37.1°, player=(80,1049), corner_timer=-0.02
[18:12:54] [INFO] [BloodyFeet:Enemy3] Blood ran out - no more footprints
[18:12:54] [INFO] [BloodDecal] Blood puddle created at (205.0749, 979.9222) (added to group)
[18:12:54] [INFO] [BloodDecal] Blood puddle created at (207.9209, 1062.519) (added to group)
[18:12:54] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P1:visible, state=RETREATING, target=129.4°, current=108.2°, player=(80,1050), corner_timer=-0.02
[18:12:54] [INFO] [BloodDecal] Blood puddle created at (232.841, 1081.308) (added to group)
[18:12:54] [ENEMY] [Enemy1] State: PURSUING -> RETREATING
[18:12:54] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
[18:12:54] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:54] [ENEMY] [Enemy1] ROT_CHANGE: P2:combat_state -> P3:corner, state=RETREATING, target=22.7°, current=82.9°, player=(80,1050), corner_timer=0.18
[18:12:54] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
[18:12:54] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
[18:12:54] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P3:corner, state=RETREATING, target=-42.9°, current=-123.1°, player=(80,1050), corner_timer=0.10
[18:12:54] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[18:12:54] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
[18:12:54] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P3:corner, state=RETREATING, target=-35.7°, current=-113.0°, player=(80,1050), corner_timer=0.30
[18:12:54] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[18:12:54] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[18:12:54] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[18:12:54] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=-87.1°, current=-72.8°, player=(80,1050), corner_timer=-0.02
[18:12:54] [INFO] [BloodDecal] Blood puddle created at (194.705, 1029.533) (added to group)
[18:12:54] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P1:visible, state=RETREATING, target=128.9°, current=115.6°, player=(80,1050), corner_timer=-0.02
[18:12:54] [INFO] [BloodDecal] Blood puddle created at (201.0881, 1007.84) (added to group)
[18:12:54] [INFO] [BloodDecal] Blood puddle created at (182.0626, 1071.43) (added to group)
[18:12:54] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=-77.4°, current=-54.5°, player=(80,1050), corner_timer=-0.02
[18:12:54] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(80,1050), corner_timer=-0.02
[18:12:54] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:12:54] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(80,1050), corner_timer=0.30
[18:12:54] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P1:visible, state=RETREATING, target=125.2°, current=122.6°, player=(80,1050), corner_timer=-0.02
[18:12:54] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:54] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=-45.6°, current=-39.8°, player=(80,1050), corner_timer=-0.02
[18:12:55] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P1:visible, state=RETREATING, target=126.4°, current=107.0°, player=(80,1050), corner_timer=-0.02
[18:12:55] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=-91.5°, current=-77.2°, player=(80,1050), corner_timer=-0.02
[18:12:55] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(80,1050), corner_timer=-0.02
[18:12:55] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:12:55] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(80,1050), corner_timer=0.30
[18:12:55] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P1:visible, state=RETREATING, target=125.6°, current=119.3°, player=(80,1050), corner_timer=-0.02
[18:12:55] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:55] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=-67.6°, current=-57.9°, player=(80,1050), corner_timer=-0.02
[18:12:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.075, 1056.369), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:55] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=4
[18:12:55] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P1:visible, state=RETREATING, target=125.2°, current=126.9°, player=(80,1050), corner_timer=-0.02
[18:12:55] [INFO] [ReplayManager] Recording frame 660 (11,0s): player_valid=True, enemies=10
[18:12:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.01657, 984.4797), shooter_id=19502204978596, bullet_pos=(1373.011, 364.3822)
[18:12:55] [INFO] [Bullet] Using shooter_position, distance=1434.00012207031
[18:12:55] [INFO] [Bullet] Distance to wall: 1434.00012207031 (97.6437052054767% of viewport)
[18:12:55] [INFO] [Bullet] Distance-based penetration chance: 32.7490105936105%
[18:12:55] [INFO] [Bullet] Penetration failed (distance roll)
[18:12:55] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=-91.4°, current=-90.1°, player=(80,1050), corner_timer=-0.02
[18:12:55] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(80,1050), corner_timer=-0.02
[18:12:55] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:12:55] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(80,1050), corner_timer=0.30
[18:12:55] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P1:visible, state=RETREATING, target=123.5°, current=116.6°, player=(80,1050), corner_timer=-0.02
[18:12:55] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=-59.9°, current=-52.7°, player=(80,1050), corner_timer=-0.02
[18:12:55] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.075, 1056.369), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:55] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=4
[18:12:55] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P1:visible, state=RETREATING, target=124.0°, current=112.3°, player=(80,1050), corner_timer=-0.02
[18:12:55] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=-92.5°, current=-77.1°, player=(80,1050), corner_timer=-0.02
[18:12:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.075, 1056.369), shooter_id=19502204978596, bullet_pos=(412.5461, 704.631)
[18:12:55] [INFO] [Bullet] Using shooter_position, distance=484.000457763672
[18:12:55] [INFO] [Bullet] Distance to wall: 484.000457763672 (32.9564811674922% of viewport)
[18:12:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:55] [INFO] [Bullet] Caliber cannot penetrate walls
[18:12:55] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(80,1050), corner_timer=-0.02
[18:12:55] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:12:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.075, 1056.369), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:55] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=4
[18:12:55] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(80,1050), corner_timer=0.30
[18:12:55] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P1:visible, state=RETREATING, target=122.6°, current=119.6°, player=(80,1050), corner_timer=-0.02
[18:12:55] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=-50.2°, current=-45.9°, player=(80,1050), corner_timer=-0.02
[18:12:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.075, 1048.98), shooter_id=19502204978596, bullet_pos=(1371.84, 221.6366)
[18:12:55] [INFO] [Bullet] Using shooter_position, distance=1533.99963378906
[18:12:55] [INFO] [Bullet] Distance to wall: 1533.99963378906 (104.452855841294% of viewport)
[18:12:55] [INFO] [Bullet] Distance-based penetration chance: 29.1094288317412%
[18:12:55] [INFO] [Bullet] Penetration failed (distance roll)
[18:12:55] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:55] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P1:visible, state=RETREATING, target=123.3°, current=115.4°, player=(80,1050), corner_timer=-0.02
[18:12:56] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=-68.0°, current=-59.8°, player=(80,1050), corner_timer=-0.02
[18:12:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.075, 1056.369), shooter_id=19502204978596, bullet_pos=(344.5032, 712.2271)
[18:12:56] [INFO] [Bullet] Using shooter_position, distance=433.999664306641
[18:12:56] [INFO] [Bullet] Distance to wall: 433.999664306641 (29.5518351976511% of viewport)
[18:12:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:56] [INFO] [Bullet] Caliber cannot penetrate walls
[18:12:56] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P1:visible, state=RETREATING, target=123.0°, current=127.6°, player=(80,1050), corner_timer=-0.02
[18:12:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.075, 1056.369), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:56] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=4
[18:12:56] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(80,1050), corner_timer=-0.02
[18:12:56] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:12:56] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/3 -> 1/3
[18:12:56] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[18:12:56] [INFO] [ImpactEffects] spawn_blood_effect called at (275.5811, 749.2184), dir=(0.582317, -0.812962), lethal=false
[18:12:56] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:12:56] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:12:56] [INFO] [ImpactEffects] Wall found for blood splatter at (302.2403, 712) (dist=45 px)
[18:12:56] [INFO] [BloodDecal] Blood puddle created at (302.2403, 713) (added to group)
[18:12:56] [INFO] [ImpactEffects] Blood effect spawned at (275.5811, 749.2184) (scale=0.5)
[18:12:56] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(80,1050), corner_timer=0.30
[18:12:56] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=-89.0°, current=-90.8°, player=(80,1050), corner_timer=-0.02
[18:12:56] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P1:visible, state=RETREATING, target=121.3°, current=110.8°, player=(80,1050), corner_timer=-0.02
[18:12:56] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.075, 1056.369), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:12:56] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=4
[18:12:56] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=-87.8°, current=-76.6°, player=(80,1050), corner_timer=-0.02
[18:12:56] [INFO] [ReplayManager] Recording frame 720 (12,0s): player_valid=True, enemies=10
[18:12:56] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P1:visible, state=RETREATING, target=120.2°, current=111.4°, player=(80,1050), corner_timer=-0.02
[18:12:56] [ENEMY] [Enemy1] Player ammo empty: false -> true
[18:12:56] [ENEMY] [Enemy2] Player ammo empty: false -> true
[18:12:56] [ENEMY] [Enemy3] Player ammo empty: false -> true
[18:12:56] [ENEMY] [Enemy4] Player ammo empty: false -> true
[18:12:56] [ENEMY] [Enemy5] Player ammo empty: false -> true
[18:12:56] [ENEMY] [Enemy6] Player ammo empty: false -> true
[18:12:56] [ENEMY] [Enemy7] Player ammo empty: false -> true
[18:12:56] [ENEMY] [Enemy8] Player ammo empty: false -> true
[18:12:56] [ENEMY] [Enemy9] Player ammo empty: false -> true
[18:12:56] [ENEMY] [Enemy10] Player ammo empty: false -> true
[18:12:56] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(80.075, 1050.369), source=PLAYER (Player), range=600, listeners=10
[18:12:56] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (80.075, 1050.369), intensity=0.02, distance=347
[18:12:56] [ENEMY] [Enemy3] Vulnerability sound triggered pursuit - transitioning from RETREATING to PURSUING
[18:12:56] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=6, self=0, below_threshold=3
[18:12:56] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=535), can_see=false
[18:12:56] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=556), can_see=false
[18:12:56] [ENEMY] [Enemy3] Player empty ammo - priority attack triggered
[18:12:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(256.3633, 751.2459), source=ENEMY (Enemy3), range=1469, listeners=10
[18:12:56] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=1, below_threshold=2
[18:12:56] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=532), can_see=false
[18:12:56] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1765), can_see=false
[18:12:56] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1964), can_see=false
[18:12:56] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(80,1050), corner_timer=-0.02
[18:12:56] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1539), can_see=false
[18:12:56] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:12:56] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1863), can_see=false
[18:12:56] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=2081), can_see=false
[18:12:56] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1212), can_see=false
[18:12:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.075, 1056.369), shooter_id=19502204978596, bullet_pos=(234.0024, 704.5699)
[18:12:56] [INFO] [Bullet] Using shooter_position, distance=383.999969482422
[18:12:56] [INFO] [Bullet] Distance to wall: 383.999969482422 (26.1472640357385% of viewport)
[18:12:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:56] [INFO] [Bullet] Caliber cannot penetrate walls
[18:12:56] [ENEMY] [Enemy3] Pursuing vulnerability sound at (80.075, 1050.369), distance=342
[18:12:56] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(80,1050), corner_timer=0.30
[18:12:56] [INFO] [LastChance] Threat detected: Bullet
[18:12:56] [INFO] [LastChance] Not in hard mode - effect disabled
[18:12:56] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:12:56] [ENEMY] [Enemy3] Player empty ammo - priority attack triggered
[18:12:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(245.1723, 785.9774), source=ENEMY (Enemy3), range=1469, listeners=10
[18:12:56] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=1, below_threshold=2
[18:12:56] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(80.075, 1050.369), source=PLAYER (Player), range=600, listeners=10
[18:12:56] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (80.075, 1050.369), intensity=0.03, distance=306
[18:12:56] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=6, self=0, below_threshold=3
[18:12:56] [INFO] [Player] Spawning blood effect at (80.075005, 1050.3687), dir=(1, 0), lethal=False (C#)
[18:12:56] [INFO] [ImpactEffects] spawn_blood_effect called at (80.075, 1050.369), dir=(1, 0), lethal=false
[18:12:56] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:12:56] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:12:56] [INFO] [ImpactEffects] Blood effect spawned at (80.075, 1050.369) (scale=1)
[18:12:56] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 8.0
[18:12:56] [INFO] [LastChance] Player health updated (C# Damaged): 8.0
[18:12:56] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:56] [INFO] [BloodDecal] Blood puddle created at (346.595, 719.4381) (added to group)
[18:12:56] [INFO] [BloodDecal] Blood puddle created at (423.9505, 724.41) (added to group)
[18:12:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.075, 1056.369), shooter_id=19502204978596, bullet_pos=(227.9661, 701.9894)
[18:12:56] [INFO] [Bullet] Using shooter_position, distance=384.000518798828
[18:12:56] [INFO] [Bullet] Distance to wall: 384.000518798828 (26.1473014397027% of viewport)
[18:12:56] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:56] [INFO] [Bullet] Caliber cannot penetrate walls
[18:12:56] [INFO] [LastChance] Threat detected: @Area2D@3769
[18:12:56] [INFO] [LastChance] Not in hard mode - effect disabled
[18:12:56] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:12:56] [INFO] [Player] Spawning blood effect at (80.075005, 1050.3687), dir=(1, 0), lethal=False (C#)
[18:12:56] [INFO] [ImpactEffects] spawn_blood_effect called at (80.075, 1050.369), dir=(1, 0), lethal=false
[18:12:56] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:12:56] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:12:56] [INFO] [ImpactEffects] Blood effect spawned at (80.075, 1050.369) (scale=1)
[18:12:56] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 7.0
[18:12:56] [INFO] [LastChance] Player health updated (C# Damaged): 7.0
[18:12:56] [ENEMY] [Enemy3] Player empty ammo - priority attack triggered
[18:12:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(226.0951, 818.0686), source=ENEMY (Enemy3), range=1469, listeners=10
[18:12:56] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=1, below_threshold=2
[18:12:56] [INFO] [BloodDecal] Blood puddle created at (386.6462, 740.7933) (added to group)
[18:12:56] [INFO] [BloodDecal] Blood puddle created at (392.6795, 718.5985) (added to group)
[18:12:56] [INFO] [LastChance] Threat detected: Bullet
[18:12:56] [INFO] [LastChance] Not in hard mode - effect disabled
[18:12:56] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:12:56] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(80.075, 1050.369), source=PLAYER (Player), range=600, listeners=10
[18:12:56] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (80.075, 1050.369), intensity=0.04, distance=253
[18:12:56] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=6, self=0, below_threshold=3
[18:12:56] [INFO] [BloodDecal] Blood puddle created at (380.2128, 750.8073) (added to group)
[18:12:56] [INFO] [Player] Spawning blood effect at (80.075005, 1050.3687), dir=(1, 0), lethal=False (C#)
[18:12:56] [INFO] [ImpactEffects] spawn_blood_effect called at (80.075, 1050.369), dir=(1, 0), lethal=false
[18:12:56] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:12:56] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:12:56] [INFO] [ImpactEffects] Blood effect spawned at (80.075, 1050.369) (scale=1)
[18:12:56] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 6.0
[18:12:56] [INFO] [LastChance] Player health updated (C# Damaged): 6.0
[18:12:56] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
[18:12:56] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(80,1050), corner_timer=-0.02
[18:12:56] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:12:56] [INFO] [BloodDecal] Blood puddle created at (314.0194, 738.3875) (added to group)
[18:12:56] [ENEMY] [Enemy3] Player empty ammo - priority attack triggered
[18:12:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(207.0179, 850.1598), source=ENEMY (Enemy3), range=1469, listeners=10
[18:12:56] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=1, below_threshold=2
[18:12:56] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(80,1050), corner_timer=0.30
[18:12:56] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[18:12:56] [INFO] [BloodDecal] Blood puddle created at (123.059, 1063.768) (added to group)
[18:12:56] [INFO] [LastChance] Threat detected: Bullet
[18:12:56] [INFO] [LastChance] Not in hard mode - effect disabled
[18:12:56] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:12:56] [INFO] [BloodDecal] Blood puddle created at (304.5796, 753.5788) (added to group)
[18:12:56] [INFO] [BloodDecal] Blood puddle created at (150.0289, 1076.387) (added to group)
[18:12:56] [INFO] [Player] Spawning blood effect at (80.075005, 1050.3687), dir=(1, 0), lethal=False (C#)
[18:12:56] [INFO] [ImpactEffects] spawn_blood_effect called at (80.075, 1050.369), dir=(1, 0), lethal=false
[18:12:56] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:12:56] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:12:56] [INFO] [ImpactEffects] Blood effect spawned at (80.075, 1050.369) (scale=1)
[18:12:56] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 5.0
[18:12:56] [INFO] [LastChance] Player health updated (C# Damaged): 5.0
[18:12:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(203.4748, 851.5594), source=ENEMY (Enemy3), range=1469, listeners=10
[18:12:56] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=1, below_threshold=2
[18:12:56] [INFO] [BloodDecal] Blood puddle created at (147.0244, 1106.247) (added to group)
[18:12:56] [ENEMY] [Enemy3] Player empty ammo - priority attack triggered
[18:12:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(204.7464, 846.3798), source=ENEMY (Enemy3), range=1469, listeners=10
[18:12:56] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=1, below_threshold=2
[18:12:56] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:56] [INFO] [BloodDecal] Blood puddle created at (152.9226, 1109.814) (added to group)
[18:12:56] [INFO] [BloodDecal] Blood puddle created at (178.942, 1055.609) (added to group)
[18:12:56] [INFO] [BloodDecal] Blood puddle created at (150.6044, 1090.753) (added to group)
[18:12:56] [INFO] [BloodDecal] Blood puddle created at (139.5182, 1041.508) (added to group)
[18:12:56] [INFO] [LastChance] Threat detected: Bullet
[18:12:56] [INFO] [LastChance] Not in hard mode - effect disabled
[18:12:56] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:12:56] [INFO] [BloodDecal] Blood puddle created at (177.7759, 1128.897) (added to group)
[18:12:56] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=535), can_see=false
[18:12:56] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=556), can_see=false
[18:12:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(206.6539, 838.6105), source=ENEMY (Enemy3), range=1469, listeners=10
[18:12:56] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=1, below_threshold=2
[18:12:56] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=532), can_see=false
[18:12:56] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1765), can_see=false
[18:12:56] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1964), can_see=false
[18:12:56] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1539), can_see=false
[18:12:56] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1863), can_see=false
[18:12:56] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=2081), can_see=false
[18:12:56] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1212), can_see=false
[18:12:56] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=-76.2°, current=172.0°, player=(80,1050), corner_timer=-0.02
[18:12:56] [ENEMY] [Enemy3] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=249), can_see=false
[18:12:57] [INFO] [LastChance] Threat detected: @Area2D@3819
[18:12:57] [INFO] [LastChance] Not in hard mode - effect disabled
[18:12:57] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:12:57] [INFO] [Player] Spawning blood effect at (80.075005, 1050.3687), dir=(1, 0), lethal=False (C#)
[18:12:57] [INFO] [ImpactEffects] spawn_blood_effect called at (80.075, 1050.369), dir=(1, 0), lethal=false
[18:12:57] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:12:57] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:12:57] [INFO] [ImpactEffects] Blood effect spawned at (80.075, 1050.369) (scale=1)
[18:12:57] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 4.0
[18:12:57] [INFO] [LastChance] Player health updated (C# Damaged): 4.0
[18:12:57] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[18:12:57] [ENEMY] [Enemy1] Player reloading: false -> true
[18:12:57] [ENEMY] [Enemy2] Player reloading: false -> true
[18:12:57] [ENEMY] [Enemy3] Player reloading: false -> true
[18:12:57] [ENEMY] [Enemy4] Player reloading: false -> true
[18:12:57] [ENEMY] [Enemy5] Player reloading: false -> true
[18:12:57] [ENEMY] [Enemy6] Player reloading: false -> true
[18:12:57] [ENEMY] [Enemy7] Player reloading: false -> true
[18:12:57] [ENEMY] [Enemy8] Player reloading: false -> true
[18:12:57] [ENEMY] [Enemy9] Player reloading: false -> true
[18:12:57] [ENEMY] [Enemy10] Player reloading: false -> true
[18:12:57] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(80.075, 1050.369), source=PLAYER (Player), range=900, listeners=10
[18:12:57] [ENEMY] [Enemy3] Heard player RELOAD at (80.075, 1050.369), intensity=0.04, distance=254
[18:12:57] [ENEMY] [Enemy3] Vulnerability sound triggered pursuit - transitioning from RETREATING to PURSUING
[18:12:57] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=6, self=0, below_threshold=3
[18:12:57] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=PURSUING, target=120.3°, current=177.5°, player=(80,1050), corner_timer=-0.02
[18:12:57] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=120.4°, current=115.7°, player=(80,1050), corner_timer=-0.02
[18:12:57] [ENEMY] [Enemy3] Player reloading - priority attack triggered
[18:12:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(205.994, 835.5159), source=ENEMY (Enemy3), range=1469, listeners=10
[18:12:57] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=1, below_threshold=2
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (192.8568, 1048.39) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (218.243, 1167.223) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (181.0483, 1110.366) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (141.6158, 1065.698) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (136.1322, 1070.454) (added to group)
[18:12:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(174.45201, 913.1084), shooter_id=19498849536890, bullet_pos=(67.13545, 1272.4249)
[18:12:57] [INFO] [Bullet] Using shooter_position, distance=375,0003
[18:12:57] [INFO] [Bullet] Distance to wall: 375,0003 (25,53446% of viewport)
[18:12:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:57] [INFO] [Bullet] Starting wall penetration at (67.13545, 1272.4249)
[18:12:57] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[18:12:57] [INFO] [Bullet] Exiting penetration at (53.780506, 1317.1399) after traveling 41,66667 pixels through wall
[18:12:57] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[18:12:57] [INFO] [LastChance] Threat detected: Bullet
[18:12:57] [INFO] [LastChance] Not in hard mode - effect disabled
[18:12:57] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:12:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(176.59735, 902.9135), shooter_id=19498849536890, bullet_pos=(62.317013, 1125.2645)
[18:12:57] [INFO] [Bullet] Using shooter_position, distance=249,99994
[18:12:57] [INFO] [Bullet] Distance to wall: 249,99994 (17,022955% of viewport)
[18:12:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (203.0526, 1054.982) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (160.1967, 1034.347) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (165.0381, 1101.823) (added to group)
[18:12:57] [INFO] [Player] Spawning blood effect at (80.075005, 1050.3687), dir=(1, 0), lethal=False (C#)
[18:12:57] [INFO] [ImpactEffects] spawn_blood_effect called at (80.075, 1050.369), dir=(1, 0), lethal=false
[18:12:57] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:12:57] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:12:57] [INFO] [ImpactEffects] Blood effect spawned at (80.075, 1050.369) (scale=1)
[18:12:57] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[18:12:57] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[18:12:57] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(80,1050), corner_timer=-0.02
[18:12:57] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:12:57] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(80,1050), corner_timer=0.30
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (249.2465, 1159.836) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (191.7538, 1120.342) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (158.9843, 1105.187) (added to group)
[18:12:57] [ENEMY] [Enemy3] Player reloading - priority attack triggered
[18:12:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(188.0229, 868.2391), source=ENEMY (Enemy3), range=1469, listeners=10
[18:12:57] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=1, below_threshold=2
[18:12:57] [INFO] [LastChance] Threat detected: Bullet
[18:12:57] [INFO] [LastChance] Not in hard mode - effect disabled
[18:12:57] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (169.9315, 1146.964) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (223.0722, 1119.067) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (174.2554, 1051.724) (added to group)
[18:12:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(176.59735, 902.9135), shooter_id=19498849536890, bullet_pos=(227.89552, 1403.469)
[18:12:57] [INFO] [Bullet] Using shooter_position, distance=503,17722
[18:12:57] [INFO] [Bullet] Distance to wall: 503,17722 (34,262264% of viewport)
[18:12:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:57] [INFO] [Bullet] Starting wall penetration at (227.89552, 1403.469)
[18:12:57] [INFO] [Bullet] Raycast backward hit penetrating body at distance 30,489052
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (158.7758, 1055.067) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (147.3598, 1070.86) (added to group)
[18:12:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(160.26562, 930.3691), shooter_id=19498849536890, bullet_pos=(64.073654, 1115.1659)
[18:12:57] [INFO] [Bullet] Using shooter_position, distance=208,33328
[18:12:57] [INFO] [Bullet] Distance to wall: 208,33328 (14,185797% of viewport)
[18:12:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:57] [INFO] [Bullet] Body exited signal received for penetrating body
[18:12:57] [INFO] [Bullet] Exiting penetration at (248.5662, 1438.1998) after traveling 35,41667 pixels through wall
[18:12:57] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[18:12:57] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:57] [ENEMY] [Enemy3] Player reloading - priority attack triggered
[18:12:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(170.0518, 900.9623), source=ENEMY (Enemy3), range=1469, listeners=10
[18:12:57] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=1, below_threshold=2
[18:12:57] [INFO] [LastChance] Threat detected: @Area2D@3872
[18:12:57] [INFO] [LastChance] Not in hard mode - effect disabled
[18:12:57] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (284.3915, 1112.478) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (251.1523, 1106.704) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (194.6235, 1051.028) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (164.5877, 1104.726) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (140.2118, 1085.544) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (126.9031, 1049.573) (added to group)
[18:12:57] [INFO] [Player] Spawning blood effect at (80.075005, 1050.3687), dir=(1, 0), lethal=False (C#)
[18:12:57] [INFO] [ImpactEffects] spawn_blood_effect called at (80.075, 1050.369), dir=(1, 0), lethal=false
[18:12:57] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:12:57] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:12:57] [INFO] [ImpactEffects] Blood effect spawned at (80.075, 1050.369) (scale=1)
[18:12:57] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[18:12:57] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (252.8055, 1207.766) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (177.4961, 1129.929) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (166.4274, 1160.214) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (180.8697, 1137.627) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (221.3469, 1136.858) (added to group)
[18:12:57] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
[18:12:57] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[18:12:57] [ENEMY] [Enemy1] Player reloading: true -> false
[18:12:57] [ENEMY] [Enemy2] Player reloading: true -> false
[18:12:57] [ENEMY] [Enemy3] Player reloading: true -> false
[18:12:57] [ENEMY] [Enemy4] Player reloading: true -> false
[18:12:57] [ENEMY] [Enemy5] Player reloading: true -> false
[18:12:57] [ENEMY] [Enemy6] Player reloading: true -> false
[18:12:57] [ENEMY] [Enemy7] Player reloading: true -> false
[18:12:57] [ENEMY] [Enemy8] Player reloading: true -> false
[18:12:57] [ENEMY] [Enemy9] Player reloading: true -> false
[18:12:57] [ENEMY] [Enemy10] Player reloading: true -> false
[18:12:57] [ENEMY] [Enemy1] Player ammo empty: true -> false
[18:12:57] [ENEMY] [Enemy2] Player ammo empty: true -> false
[18:12:57] [ENEMY] [Enemy3] Player ammo empty: true -> false
[18:12:57] [ENEMY] [Enemy4] Player ammo empty: true -> false
[18:12:57] [ENEMY] [Enemy5] Player ammo empty: true -> false
[18:12:57] [ENEMY] [Enemy6] Player ammo empty: true -> false
[18:12:57] [ENEMY] [Enemy7] Player ammo empty: true -> false
[18:12:57] [ENEMY] [Enemy8] Player ammo empty: true -> false
[18:12:57] [ENEMY] [Enemy9] Player ammo empty: true -> false
[18:12:57] [ENEMY] [Enemy10] Player ammo empty: true -> false
[18:12:57] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[18:12:57] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[18:12:57] [INFO] [ReplayManager] Recording frame 780 (13,0s): player_valid=True, enemies=10
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (263.8429, 1118.674) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (246.5655, 1064.889) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (192.3786, 1098.361) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (141.2297, 1063.464) (added to group)
[18:12:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(160.26562, 930.3691), shooter_id=19498849536890, bullet_pos=(233.48936, 1391.0504)
[18:12:57] [INFO] [Bullet] Using shooter_position, distance=466,4644
[18:12:57] [INFO] [Bullet] Distance to wall: 466,4644 (31,762419% of viewport)
[18:12:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(144.3687, 931.5582), source=ENEMY (Enemy3), range=1469, listeners=10
[18:12:57] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=1, below_threshold=2
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (171.6454, 1150.801) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (225.3533, 1054.446) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (156.586, 1043.469) (added to group)
[18:12:57] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(80,1050), corner_timer=-0.02
[18:12:57] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:12:57] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(80,1050), corner_timer=0.30
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (291.1259, 1261.584) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (254.7902, 1241.971) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (192.6031, 1114.033) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (148.0826, 1079.718) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (162.9515, 1041.103) (added to group)
[18:12:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(134.0861, 928.7217), source=ENEMY (Enemy3), range=1469, listeners=10
[18:12:57] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=5, self=1, below_threshold=1
[18:12:57] [INFO] [LastChance] Threat detected: @Area2D@3903
[18:12:57] [INFO] [LastChance] Not in hard mode - effect disabled
[18:12:57] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:12:57] [ENEMY] [Enemy1] State: SUPPRESSED -> IN_COVER
[18:12:57] [ENEMY] [Enemy4] State: SUPPRESSED -> IN_COVER
[18:12:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(118.41625, 995.71735), shooter_id=19498849536890, bullet_pos=(63.87745, 1196.7854)
[18:12:57] [INFO] [Bullet] Using shooter_position, distance=208,3335
[18:12:57] [INFO] [Bullet] Distance to wall: 208,3335 (14,185812% of viewport)
[18:12:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:57] [ENEMY] [Enemy1] State: IN_COVER -> PURSUING
[18:12:57] [ENEMY] [Enemy2] State: SUPPRESSED -> IN_COVER
[18:12:57] [ENEMY] [Enemy4] State: IN_COVER -> PURSUING
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (158.5628, 1089.991) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (208.0594, 1068.019) (added to group)
[18:12:57] [ENEMY] [Enemy1] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=151.9°, current=22.7°, player=(80,1050), corner_timer=0.18
[18:12:57] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
[18:12:57] [ENEMY] [Enemy4] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=152.6°, current=-42.9°, player=(80,1050), corner_timer=0.10
[18:12:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(112.96078, 995.09534), shooter_id=19498849536890, bullet_pos=(64.62629, 1110.3723)
[18:12:57] [INFO] [Bullet] Using shooter_position, distance=125,000015
[18:12:57] [INFO] [Bullet] Distance to wall: 125,000015 (8,511481% of viewport)
[18:12:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:57] [ENEMY] [Enemy2] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=152.4°, current=-35.7°, player=(80,1050), corner_timer=0.30
[18:12:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(123.8034, 925.8853), source=ENEMY (Enemy3), range=1469, listeners=10
[18:12:57] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=5, self=1, below_threshold=1
[18:12:57] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[18:12:57] [INFO] [LastChance] Threat detected: @Area2D@3909
[18:12:57] [INFO] [LastChance] Not in hard mode - effect disabled
[18:12:57] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:12:57] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (299.6378, 1244.796) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (182.113, 1160.764) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (174.4554, 1080.506) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (175.7654, 1058.546) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (172.6764, 1052.09) (added to group)
[18:12:57] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=-164.6°, current=163.9°, player=(80,1050), corner_timer=-0.02
[18:12:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(107.67082, 994.30194), shooter_id=19498849536890, bullet_pos=(64.480064, 1111.603)
[18:12:57] [INFO] [Bullet] Using shooter_position, distance=124,99995
[18:12:57] [INFO] [Bullet] Distance to wall: 124,99995 (8,5114765% of viewport)
[18:12:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (206.1526, 1196.027) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (232.3966, 1111.47) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (197.3173, 1078.023) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (250.3525, 1138.498) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (143.6691, 1086.82) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (197.2395, 1120.539) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (220.2475, 1071.321) (added to group)
[18:12:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(112.96078, 995.09534), shooter_id=19498849536890, bullet_pos=(213.9422, 1397.633)
[18:12:57] [INFO] [Bullet] Using shooter_position, distance=415,01068
[18:12:57] [INFO] [Bullet] Distance to wall: 415,01068 (28,258842% of viewport)
[18:12:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:57] [INFO] [Bullet] Starting wall penetration at (213.9422, 1397.633)
[18:12:57] [INFO] [Bullet] Raycast backward hit penetrating body at distance 24,224693
[18:12:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(118.41625, 995.71735), shooter_id=19498849536890, bullet_pos=(244.6303, 1586.9496)
[18:12:57] [INFO] [Bullet] Using shooter_position, distance=604,554
[18:12:57] [INFO] [Bullet] Distance to wall: 604,554 (41,165195% of viewport)
[18:12:57] [INFO] [Bullet] Body exited signal received for penetrating body
[18:12:57] [INFO] [Bullet] Exiting penetration at (232.58266, 1433.4944) after traveling 35,416668 pixels through wall
[18:12:57] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (217.6939, 1215.624) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (170.1723, 1043.614) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (151.3387, 1096.152) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (164.4933, 1077.603) (added to group)
[18:12:57] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(80,1050), corner_timer=-0.02
[18:12:57] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (169.2414, 1072.531) (added to group)
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (209.1461, 1087.162) (added to group)
[18:12:57] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(80,1050), corner_timer=0.30
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (197.275, 1092.69) (added to group)
[18:12:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(118.41625, 995.71735), shooter_id=19498849536890, bullet_pos=(359.7234, 1404.4872)
[18:12:57] [INFO] [Bullet] Using shooter_position, distance=474,68085
[18:12:57] [INFO] [Bullet] Distance to wall: 474,68085 (32,321896% of viewport)
[18:12:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:57] [INFO] [Bullet] Starting wall penetration at (359.7234, 1404.4872)
[18:12:57] [INFO] [Bullet] Raycast backward hit penetrating body at distance 15,611019
[18:12:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(107.67082, 994.30194), shooter_id=19498849536890, bullet_pos=(208.99794, 1591.1326)
[18:12:57] [INFO] [Bullet] Using shooter_position, distance=605,371
[18:12:57] [INFO] [Bullet] Distance to wall: 605,371 (41,22082% of viewport)
[18:12:57] [INFO] [Bullet] Body exited signal received for penetrating body
[18:12:57] [INFO] [Bullet] Exiting penetration at (378.45172, 1374.7963) after traveling 30,104166 pixels through wall
[18:12:57] [INFO] [Bullet] Damage multiplier after penetration: 0,225
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (168.2436, 1095.09) (added to group)
[18:12:57] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:12:57] [INFO] [BloodDecal] Blood puddle created at (193.9334, 1129.743) (added to group)
[18:12:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(107.67082, 994.30194), shooter_id=19498849536890, bullet_pos=(248.52899, 1409.7659)
[18:12:57] [INFO] [Bullet] Using shooter_position, distance=438,69272
[18:12:57] [INFO] [Bullet] Distance to wall: 438,69272 (29,871395% of viewport)
[18:12:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:12:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(107.67082, 994.30194), shooter_id=19498849536890, bullet_pos=(297.43677, 1587.2715)
[18:12:58] [INFO] [Bullet] Using shooter_position, distance=622,59454
[18:12:58] [INFO] [Bullet] Distance to wall: 622,59454 (42,39361% of viewport)
[18:12:58] [INFO] [Bullet] Distance-based penetration chance: 97,20746%
[18:12:58] [INFO] [Bullet] Starting wall penetration at (297.43677, 1587.2715)
[18:12:58] [INFO] [Bullet] Body exited signal received for penetrating body
[18:12:58] [INFO] [Bullet] Exiting penetration at (305.562, 1616.7612) after traveling 0 pixels through wall
[18:12:58] [INFO] [Bullet] Damage multiplier after penetration: 0,1125
[18:12:58] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(80,1050), corner_timer=-0.02
[18:12:58] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:12:58] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(80,1050), corner_timer=0.30
[18:12:58] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[18:12:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:58] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[18:12:58] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[18:12:58] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[18:12:58] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[18:12:58] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[18:12:58] [INFO] [LastChance] Resetting all effects (scene change detected)
[18:12:58] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[18:12:58] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[18:12:58] [ENEMY] [Enemy1] Death animation component initialized
[18:12:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:58] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[18:12:58] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[18:12:58] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[18:12:58] [ENEMY] [Enemy2] Death animation component initialized
[18:12:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:58] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[18:12:58] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[18:12:58] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[18:12:58] [ENEMY] [Enemy3] Death animation component initialized
[18:12:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:58] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[18:12:58] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[18:12:58] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[18:12:58] [ENEMY] [Enemy4] Death animation component initialized
[18:12:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:58] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[18:12:58] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[18:12:58] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[18:12:58] [ENEMY] [Enemy5] Death animation component initialized
[18:12:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:58] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[18:12:58] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[18:12:58] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[18:12:58] [ENEMY] [Enemy6] Death animation component initialized
[18:12:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:58] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[18:12:58] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[18:12:58] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[18:12:58] [ENEMY] [Enemy7] Death animation component initialized
[18:12:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:58] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[18:12:58] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[18:12:58] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[18:12:58] [ENEMY] [Enemy8] Death animation component initialized
[18:12:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:58] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[18:12:58] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[18:12:58] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[18:12:58] [ENEMY] [Enemy9] Death animation component initialized
[18:12:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:58] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[18:12:58] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[18:12:58] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[18:12:58] [ENEMY] [Enemy10] Death animation component initialized
[18:12:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:12:58] [INFO] [BloodyFeet:Player] Footprint scene loaded
[18:12:58] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[18:12:58] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[18:12:58] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[18:12:58] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[18:12:58] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[18:12:58] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[18:12:58] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[18:12:58] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[18:12:58] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[18:12:58] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[18:12:58] [INFO] [Player.Flashlight] Flashlight is selected, initializing...
[18:12:58] [INFO] [FlashlightEffect] PointLight2D found, energy=0.0, shadow=true
[18:12:58] [INFO] [FlashlightEffect] Flashlight sound loaded
[18:12:58] [INFO] [Player.Flashlight] Flashlight equipped and attached to PlayerModel at offset (20, 0)
[18:12:58] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 10/10
[18:12:58] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[18:12:58] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[18:12:58] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[18:12:58] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[18:12:58] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[18:12:58] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[18:12:58] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[18:12:58] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[18:12:58] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[18:12:58] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[18:12:58] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[18:12:58] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[18:12:58] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[18:12:58] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[18:12:58] [INFO] [ScoreManager] Level started with 10 enemies
[18:12:58] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[18:12:58] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[18:12:58] [INFO] [ReplayManager] Replay data cleared
[18:12:58] [INFO] [BuildingLevel] Previous replay data cleared
[18:12:58] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[18:12:58] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[18:12:58] [INFO] [ReplayManager] Level: BuildingLevel
[18:12:58] [INFO] [ReplayManager] Player: Player (valid: True)
[18:12:58] [INFO] [ReplayManager] Enemies count: 10
[18:12:58] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[18:12:58] [INFO] [ReplayManager]   Enemy 0: Enemy1
[18:12:58] [INFO] [ReplayManager]   Enemy 1: Enemy2
[18:12:58] [INFO] [ReplayManager]   Enemy 2: Enemy3
[18:12:58] [INFO] [ReplayManager]   Enemy 3: Enemy4
[18:12:58] [INFO] [ReplayManager]   Enemy 4: Enemy5
[18:12:58] [INFO] [ReplayManager]   Enemy 5: Enemy6
[18:12:58] [INFO] [ReplayManager]   Enemy 6: Enemy7
[18:12:58] [INFO] [ReplayManager]   Enemy 7: Enemy8
[18:12:58] [INFO] [ReplayManager]   Enemy 8: Enemy9
[18:12:58] [INFO] [ReplayManager]   Enemy 9: Enemy10
[18:12:58] [INFO] [BuildingLevel] Replay recording started successfully
[18:12:58] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[18:12:58] [INFO] [CinemaEffects] Found player node: Player
[18:12:58] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[18:12:58] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[18:12:58] [ENEMY] [Enemy1] Registered as sound listener
[18:12:58] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[18:12:58] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[18:12:58] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[18:12:58] [ENEMY] [Enemy2] Registered as sound listener
[18:12:58] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[18:12:58] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[18:12:58] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[18:12:58] [ENEMY] [Enemy3] Registered as sound listener
[18:12:58] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[18:12:58] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[18:12:58] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[18:12:58] [ENEMY] [Enemy4] Registered as sound listener
[18:12:58] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[18:12:58] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[18:12:58] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[18:12:58] [ENEMY] [Enemy5] Registered as sound listener
[18:12:58] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[18:12:58] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[18:12:58] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[18:12:58] [ENEMY] [Enemy6] Registered as sound listener
[18:12:58] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[18:12:58] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[18:12:58] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[18:12:58] [ENEMY] [Enemy7] Registered as sound listener
[18:12:58] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[18:12:58] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[18:12:58] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[18:12:58] [ENEMY] [Enemy8] Registered as sound listener
[18:12:58] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[18:12:58] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[18:12:58] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[18:12:58] [ENEMY] [Enemy9] Registered as sound listener
[18:12:58] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[18:12:58] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[18:12:58] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[18:12:58] [ENEMY] [Enemy10] Registered as sound listener
[18:12:58] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[18:12:58] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[18:12:58] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[18:12:58] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:58] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:58] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=281.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:58] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:58] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:58] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:58] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:58] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:12:58] [INFO] [Player] Detecting weapon pose (frame 3)...
[18:12:58] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[18:12:58] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[18:12:58] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[18:12:58] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[18:12:58] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[18:12:58] [INFO] [LastChance] Found player: Player
[18:12:58] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[18:12:58] [INFO] [LastChance] Connected to player Damaged signal (C#)
[18:12:58] [INFO] [LastChance] Connected to player Died signal (C#)
[18:12:58] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[18:12:59] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[18:12:59] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[18:12:59] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[18:12:59] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(429,1015), corner_timer=0.30
[18:12:59] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(429,1015), corner_timer=0.30
[18:13:00] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(355,941), corner_timer=-0.02
[18:13:00] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[18:13:00] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(355,941), corner_timer=-0.02
[18:13:00] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[18:13:00] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(352,937), corner_timer=0.30
[18:13:00] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(352,937), corner_timer=0.30
[18:13:00] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[18:13:00] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(329,842), corner_timer=-0.02
[18:13:00] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[18:13:00] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(329,836), corner_timer=0.30
[18:13:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(353.0322, 781.5397), source=PLAYER (MakarovPM), range=1469, listeners=20
[18:13:00] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[18:13:00] [ENEMY] [Enemy1] Heard gunshot at (353.0322, 781.5397), source_type=0, intensity=0.01, distance=435
[18:13:00] [ENEMY] [Enemy2] Heard gunshot at (353.0322, 781.5397), source_type=0, intensity=0.04, distance=236
[18:13:00] [ENEMY] [Enemy3] Heard gunshot at (353.0322, 781.5397), source_type=0, intensity=0.02, distance=348
[18:13:00] [ENEMY] [Enemy4] Heard gunshot at (353.0322, 781.5397), source_type=0, intensity=0.01, distance=462
[18:13:00] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:13:00] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=82.9°, current=-33.8°, player=(353,775), corner_timer=0.00
[18:13:00] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=101.8°, current=-157.5°, player=(353,775), corner_timer=0.00
[18:13:00] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=175.8°, current=-78.7°, player=(353,775), corner_timer=0.00
[18:13:00] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-164.4°, current=-67.5°, player=(353,775), corner_timer=0.00
[18:13:00] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(369,757), corner_timer=-0.02
[18:13:00] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[18:13:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(353.0322, 781.5397), shooter_id=24724365119489, bullet_pos=(502.3436, 801.7025)
[18:13:00] [INFO] [Bullet] Using shooter_position, distance=150.666702270508
[18:13:00] [INFO] [Bullet] Distance to wall: 150.666702270508 (10.2591728092346% of viewport)
[18:13:00] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:00] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:00] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(370,755), corner_timer=0.30
[18:13:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(373.3155, 756.4537), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:00] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:13:00] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=-178.0°, current=134.4°, player=(374,742), corner_timer=0.00
[18:13:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(368.847, 740.7955), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:00] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:13:01] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(343,728), corner_timer=-0.02
[18:13:01] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[18:13:01] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(339,728), corner_timer=0.30
[18:13:01] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[18:13:01] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 3/3 -> 2/3
[18:13:01] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[18:13:01] [INFO] [ImpactEffects] spawn_blood_effect called at (613.6098, 754.3784), dir=(0.999995, -0.003211), lethal=false
[18:13:01] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:01] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:01] [INFO] [ImpactEffects] Blood effect spawned at (613.6098, 754.3784) (scale=0.5)
[18:13:01] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[18:13:01] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[18:13:01] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[18:13:01] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[18:13:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(300.6382, 754.3174), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:01] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=4
[18:13:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(373.3155, 756.4537), shooter_id=24724365119489, bullet_pos=(921.8009, 805.4168)
[18:13:01] [INFO] [Bullet] Using shooter_position, distance=550.66650390625
[18:13:01] [INFO] [Bullet] Distance to wall: 550.66650390625 (37.4958948373897% of viewport)
[18:13:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:01] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:01] [INFO] [BloodDecal] Blood puddle created at (658.3326, 754.7625) (added to group)
[18:13:01] [INFO] [BloodDecal] Blood puddle created at (702.3986, 777.6326) (added to group)
[18:13:01] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=107.5°, current=-175.1°, player=(265,783), corner_timer=0.00
[18:13:01] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(265,783), corner_timer=-0.02
[18:13:01] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[18:13:01] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(261,787), corner_timer=0.30
[18:13:01] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[18:13:01] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[18:13:01] [INFO] [BloodDecal] Blood puddle created at (680.2731, 793.8394) (added to group)
[18:13:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(246.1894, 808.673), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:01] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[18:13:01] [INFO] [BloodDecal] Blood puddle created at (726.8119, 794.1486) (added to group)
[18:13:01] [INFO] [BloodDecal] Blood puddle created at (724.432, 778.8787) (added to group)
[18:13:01] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(183.964, 870.8986), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:01] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=5, self=0, below_threshold=2
[18:13:01] [INFO] [BloodDecal] Blood puddle created at (707.6763, 796.1895) (added to group)
[18:13:01] [INFO] [BloodDecal] Blood puddle created at (713.3995, 803.186) (added to group)
[18:13:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(300.6382, 754.3174), shooter_id=24724365119489, bullet_pos=(916.4512, 711.0287)
[18:13:01] [INFO] [Bullet] Using shooter_position, distance=617.332580566406
[18:13:01] [INFO] [Bullet] Distance to wall: 617.332580566406 (42.0353105852851% of viewport)
[18:13:01] [INFO] [Bullet] Distance-based penetration chance: 97.625470983834%
[18:13:01] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(145.0732, 909.7896), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:01] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=3
[18:13:02] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(141,907), corner_timer=-0.02
[18:13:02] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[18:13:02] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(137,911), corner_timer=0.30
[18:13:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(183.964, 870.8986), shooter_id=24724365119489, bullet_pos=(511.2329, 804.1833)
[18:13:02] [INFO] [Bullet] Using shooter_position, distance=333.999755859375
[18:13:02] [INFO] [Bullet] Distance to wall: 333.999755859375 (22.7426575478596% of viewport)
[18:13:02] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:02] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(110.0714, 944.7914), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=3
[18:13:02] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(246.1894, 808.673), shooter_id=24724365119489, bullet_pos=(910.6569, 746.8925)
[18:13:02] [INFO] [Bullet] Using shooter_position, distance=667.333435058594
[18:13:02] [INFO] [Bullet] Distance to wall: 667.333435058594 (45.4399607111222% of viewport)
[18:13:02] [INFO] [Bullet] Distance-based penetration chance: 93.6533791703574%
[18:13:02] [INFO] [Bullet] Penetration failed (distance roll)
[18:13:02] [INFO] [ReplayManager] Recording frame 240 (4,0s): player_valid=True, enemies=10
[18:13:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(145.0732, 909.7896), shooter_id=24724365119489, bullet_pos=(499.5838, 813.5824)
[18:13:02] [INFO] [Bullet] Using shooter_position, distance=367.333068847656
[18:13:02] [INFO] [Bullet] Distance to wall: 367.333068847656 (25.0123841237895% of viewport)
[18:13:02] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:02] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:02] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(80,981), corner_timer=-0.02
[18:13:02] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[18:13:02] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(80,983), corner_timer=0.30
[18:13:02] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(110.0714, 944.7914), shooter_id=24724365119489, bullet_pos=(506.8998, 815.5857)
[18:13:02] [INFO] [Bullet] Using shooter_position, distance=417.333038330078
[18:13:02] [INFO] [Bullet] Distance to wall: 417.333038330078 (28.4169739876842% of viewport)
[18:13:02] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:02] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.07384, 1006.669), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:02] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=5, self=0, below_threshold=5
[18:13:02] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(80,1013), corner_timer=-0.02
[18:13:02] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[18:13:02] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(80,1017), corner_timer=0.30
[18:13:02] [ENEMY] [Enemy2] PURSUING corner check: angle 26.9°
[18:13:02] [ENEMY] [Enemy1] PURSUING corner check: angle -116.4°
[18:13:02] [ENEMY] [Enemy4] PURSUING corner check: angle -67.4°
[18:13:02] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:03] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(80,1111), corner_timer=-0.02
[18:13:03] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[18:13:03] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(80,1114), corner_timer=0.30
[18:13:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.07384, 1006.669), shooter_id=24724365119489, bullet_pos=(501.73, 706.9351)
[18:13:03] [INFO] [Bullet] Using shooter_position, distance=517.333801269531
[18:13:03] [INFO] [Bullet] Distance to wall: 517.333801269531 (35.22620982142% of viewport)
[18:13:03] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:03] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:03] [ENEMY] [Enemy1] PURSUING corner check: angle 36.8°
[18:13:03] [ENEMY] [Enemy4] PURSUING corner check: angle -88.4°
[18:13:03] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:03] [INFO] [ReplayManager] Recording frame 300 (5,0s): player_valid=True, enemies=10
[18:13:03] [ENEMY] [Enemy1] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=92.7°, current=103.9°, player=(80,1132), corner_timer=0.08
[18:13:03] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(80,1132), corner_timer=-0.02
[18:13:03] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[18:13:03] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(80,1132), corner_timer=0.30
[18:13:03] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
[18:13:03] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:03] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.5°, current=89.5°, player=(80,1132), corner_timer=-0.02
[18:13:03] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[18:13:03] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(80,1132), corner_timer=0.30
[18:13:03] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:04] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.4°, current=89.5°, player=(80,1132), corner_timer=-0.02
[18:13:04] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[18:13:04] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.3°, player=(80,1132), corner_timer=0.30
[18:13:04] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(88.00015, 667.1411), source=ENEMY (Enemy1), range=1469, listeners=10
[18:13:04] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=1, below_threshold=3
[18:13:04] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[18:13:04] [ENEMY] [Enemy1] Player reloading: false -> true
[18:13:04] [ENEMY] [Enemy2] Player reloading: false -> true
[18:13:04] [ENEMY] [Enemy3] Player reloading: false -> true
[18:13:04] [ENEMY] [Enemy4] Player reloading: false -> true
[18:13:04] [ENEMY] [Enemy5] Player reloading: false -> true
[18:13:04] [ENEMY] [Enemy6] Player reloading: false -> true
[18:13:04] [ENEMY] [Enemy7] Player reloading: false -> true
[18:13:04] [ENEMY] [Enemy8] Player reloading: false -> true
[18:13:04] [ENEMY] [Enemy9] Player reloading: false -> true
[18:13:04] [ENEMY] [Enemy10] Player reloading: false -> true
[18:13:04] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(80.07384, 1132.391), source=PLAYER (Player), range=900, listeners=10
[18:13:04] [ENEMY] [Enemy1] Heard player RELOAD at (80.07384, 1132.391), intensity=0.01, distance=465
[18:13:04] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=6, self=0, below_threshold=3
[18:13:04] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=465), can_see=true
[18:13:04] [ENEMY] [Enemy1] Player vulnerable (reloading) - pursuing to attack (dist=465)
[18:13:04] [ENEMY] [Enemy1] Pursuing vulnerability sound at (80.07384, 1132.391), distance=465
[18:13:04] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[18:13:04] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=false (dist=558), can_see=false
[18:13:04] [ENEMY] [Enemy3] Player vulnerable (reloading) but cannot attack: close=false (dist=599), can_see=false
[18:13:04] [ENEMY] [Enemy4] Player vulnerable (reloading) but cannot attack: close=false (dist=533), can_see=false
[18:13:04] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1799), can_see=false
[18:13:04] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1991), can_see=false
[18:13:04] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=1549), can_see=false
[18:13:04] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1847), can_see=false
[18:13:04] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=2063), can_see=false
[18:13:04] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=1177), can_see=false
[18:13:04] [ENEMY] [Enemy1] ROT_CHANGE: P1:visible -> P2:combat_state, state=PURSUING, target=91.6°, current=-23.6°, player=(80,1132), corner_timer=0.03
[18:13:04] [INFO] [ReplayManager] Recording frame 360 (6,0s): player_valid=True, enemies=10
[18:13:04] [INFO] [LastChance] Threat detected: Bullet
[18:13:04] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:04] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:04] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.5°, player=(80,1132), corner_timer=-0.02
[18:13:04] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:04] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(80,1132), corner_timer=0.30
[18:13:04] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:04] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[18:13:04] [ENEMY] [Enemy1] Player reloading: true -> false
[18:13:04] [ENEMY] [Enemy2] Player reloading: true -> false
[18:13:04] [ENEMY] [Enemy3] Player reloading: true -> false
[18:13:04] [ENEMY] [Enemy4] Player reloading: true -> false
[18:13:04] [ENEMY] [Enemy5] Player reloading: true -> false
[18:13:04] [ENEMY] [Enemy6] Player reloading: true -> false
[18:13:04] [ENEMY] [Enemy7] Player reloading: true -> false
[18:13:04] [ENEMY] [Enemy8] Player reloading: true -> false
[18:13:04] [ENEMY] [Enemy9] Player reloading: true -> false
[18:13:04] [ENEMY] [Enemy10] Player reloading: true -> false
[18:13:04] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[18:13:04] [ENEMY] [Enemy2] PURSUING corner check: angle -116.6°
[18:13:04] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(80,1132), corner_timer=-0.02
[18:13:04] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:04] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(80,1132), corner_timer=0.30
[18:13:04] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(94.6475, 734.8642), shooter_id=24720305032975, bullet_pos=(71.80082, 2068.001)
[18:13:04] [INFO] [Bullet] Using shooter_position, distance=1333,3325
[18:13:04] [INFO] [Bullet] Distance to wall: 1333,3325 (90,78907% of viewport)
[18:13:04] [INFO] [Bullet] Distance-based penetration chance: 40,746086%
[18:13:04] [INFO] [Bullet] Penetration failed (distance roll)
[18:13:04] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[18:13:04] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:04] [ENEMY] [Enemy2] PURSUING corner check: angle -88.2°
[18:13:04] [ENEMY] [Enemy4] FLANKING started: target=(242.299, 1249.365), side=right, pos=(566.3787, 913.7753)
[18:13:04] [ENEMY] [Enemy4] State: PURSUING -> FLANKING
[18:13:05] [ENEMY] [Enemy4] FLANKING corner check: angle -38.9°
[18:13:05] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(83,1132), corner_timer=-0.02
[18:13:05] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:05] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(85,1132), corner_timer=0.30
[18:13:05] [ENEMY] [Enemy3] State: SUPPRESSED -> IN_COVER
[18:13:05] [ENEMY] [Enemy3] State: IN_COVER -> PURSUING
[18:13:05] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=PURSUING, target=148.0°, current=173.2°, player=(95,1132), corner_timer=0.00
[18:13:05] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:05] [ENEMY] [Enemy1] Pursuing vulnerability sound at (80.07384, 1132.391), distance=597
[18:13:05] [INFO] [ReplayManager] Recording frame 420 (7,0s): player_valid=True, enemies=10
[18:13:05] [ENEMY] [Enemy4] FLANKING corner check: angle -42.9°
[18:13:05] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(168,1132), corner_timer=-0.02
[18:13:05] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:05] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(173,1132), corner_timer=0.30
[18:13:05] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(207.5757, 1138.391), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:05] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[18:13:05] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=FLANKING, target=131.0°, current=91.5°, player=(210,1132), corner_timer=0.03
[18:13:05] [ENEMY] [Enemy4] State: FLANKING -> COMBAT
[18:13:05] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=130.2°, current=48.3°, player=(210,1132), corner_timer=0.03
[18:13:05] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(210,1132), corner_timer=-0.02
[18:13:05] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:05] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(210,1132), corner_timer=0.30
[18:13:05] [ENEMY] [Enemy1] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=124.5°, current=152.5°, player=(210,1132), corner_timer=0.03
[18:13:05] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
[18:13:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(210.1313, 1138.391), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:05] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[18:13:05] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
[18:13:05] [ENEMY] [Enemy1] ROT_CHANGE: P1:visible -> P3:corner, state=RETREATING, target=36.8°, current=-171.2°, player=(210,1132), corner_timer=0.03
[18:13:05] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:05] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=127.9°, current=80.0°, player=(210,1132), corner_timer=0.03
[18:13:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(210.1313, 1138.391), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:05] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[18:13:05] [ENEMY] [Enemy1] ROT_CHANGE: P3:corner -> P1:visible, state=RETREATING, target=128.5°, current=176.3°, player=(210,1132), corner_timer=0.03
[18:13:06] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(210,1132), corner_timer=-0.02
[18:13:06] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(207.5757, 1138.391), shooter_id=24724365119489, bullet_pos=(473.1466, 713.9625)
[18:13:06] [INFO] [Bullet] Using shooter_position, distance=500.667083740234
[18:13:06] [INFO] [Bullet] Distance to wall: 500.667083740234 (34.0913423774591% of viewport)
[18:13:06] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:06] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:06] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(210,1132), corner_timer=0.30
[18:13:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(210.1313, 1138.391), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:06] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[18:13:06] [ENEMY] [Enemy1] ROT_CHANGE: P1:visible -> P3:corner, state=RETREATING, target=36.8°, current=156.4°, player=(210,1132), corner_timer=0.03
[18:13:06] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[18:13:06] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
[18:13:06] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:06] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
[18:13:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(210.1313, 1138.391), shooter_id=24724365119489, bullet_pos=(464.8772, 707.3787)
[18:13:06] [INFO] [Bullet] Using shooter_position, distance=500.666717529297
[18:13:06] [INFO] [Bullet] Distance to wall: 500.666717529297 (34.091317441483% of viewport)
[18:13:06] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:06] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(210.1313, 1138.391), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:06] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[18:13:06] [INFO] [ReplayManager] Recording frame 480 (8,0s): player_valid=True, enemies=10
[18:13:06] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(210,1132), corner_timer=-0.02
[18:13:06] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(210.1313, 1138.391), shooter_id=24724365119489, bullet_pos=(473.9595, 712.8771)
[18:13:06] [INFO] [Bullet] Using shooter_position, distance=500.667083740234
[18:13:06] [INFO] [Bullet] Distance to wall: 500.667083740234 (34.0913423774591% of viewport)
[18:13:06] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:06] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:06] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(210,1132), corner_timer=0.30
[18:13:06] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:06] [ENEMY] [Enemy2] FLANKING started: target=(386.0263, 1037.202), side=right, pos=(223.0583, 663.472)
[18:13:06] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
[18:13:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(210.1313, 1138.391), shooter_id=24724365119489, bullet_pos=(500.6805, 710.3558)
[18:13:06] [INFO] [Bullet] Using shooter_position, distance=517.332641601563
[18:13:06] [INFO] [Bullet] Distance to wall: 517.332641601563 (35.2261308574956% of viewport)
[18:13:06] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:06] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(210.1313, 1138.391), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:06] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[18:13:06] [ENEMY] [Enemy3] PURSUING corner check: angle -150.0°
[18:13:06] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(210,1132), corner_timer=-0.02
[18:13:06] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:06] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(210,1132), corner_timer=0.30
[18:13:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(210.1313, 1138.391), shooter_id=24724365119489, bullet_pos=(489.0083, 702.6603)
[18:13:06] [INFO] [Bullet] Using shooter_position, distance=517.333312988281
[18:13:06] [INFO] [Bullet] Distance to wall: 517.333312988281 (35.2261765734519% of viewport)
[18:13:06] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:06] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(210.1313, 1138.391), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:06] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=0, below_threshold=4
[18:13:06] [ENEMY] [Enemy2] FLANKING corner check: angle -82.4°
[18:13:06] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(210.1313, 1138.391), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:06] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=0, below_threshold=4
[18:13:07] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(210,1132), corner_timer=-0.02
[18:13:07] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:07] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(210,1132), corner_timer=0.30
[18:13:07] [ENEMY] [Enemy2] FLANKING corner check: angle -96.2°
[18:13:07] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(210.1313, 1138.391), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:07] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=0, below_threshold=4
[18:13:07] [INFO] [ReplayManager] Recording frame 540 (9,0s): player_valid=True, enemies=10
[18:13:07] [ENEMY] [Enemy1] Player ammo empty: false -> true
[18:13:07] [ENEMY] [Enemy2] Player ammo empty: false -> true
[18:13:07] [ENEMY] [Enemy3] Player ammo empty: false -> true
[18:13:07] [ENEMY] [Enemy4] Player ammo empty: false -> true
[18:13:07] [ENEMY] [Enemy5] Player ammo empty: false -> true
[18:13:07] [ENEMY] [Enemy6] Player ammo empty: false -> true
[18:13:07] [ENEMY] [Enemy7] Player ammo empty: false -> true
[18:13:07] [ENEMY] [Enemy8] Player ammo empty: false -> true
[18:13:07] [ENEMY] [Enemy9] Player ammo empty: false -> true
[18:13:07] [ENEMY] [Enemy10] Player ammo empty: false -> true
[18:13:07] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(210.1313, 1132.391), source=PLAYER (Player), range=600, listeners=10
[18:13:07] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (210.1313, 1132.391), intensity=0.01, distance=431
[18:13:07] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (210.1313, 1132.391), intensity=0.02, distance=343
[18:13:07] [ENEMY] [Enemy4] Vulnerability sound triggered pursuit - transitioning from RETREATING to PURSUING
[18:13:07] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=6, self=0, below_threshold=2
[18:13:07] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=534), can_see=false
[18:13:07] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=561), can_see=false
[18:13:07] [ENEMY] [Enemy3] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=431), can_see=false
[18:13:07] [ENEMY] [Enemy3] Pursuing vulnerability sound at (210.1313, 1132.391), distance=431
[18:13:07] [ENEMY] [Enemy4] Player empty ammo - priority attack triggered
[18:13:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(465.6475, 903.8293), source=ENEMY (Enemy4), range=1469, listeners=10
[18:13:07] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[18:13:07] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1683), can_see=false
[18:13:07] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1869), can_see=false
[18:13:07] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1421), can_see=false
[18:13:07] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1719), can_see=false
[18:13:07] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1935), can_see=false
[18:13:07] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1059), can_see=false
[18:13:07] [ENEMY] [Enemy4] Pursuing vulnerability sound at (210.1313, 1132.391), distance=339
[18:13:07] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(210,1132), corner_timer=-0.02
[18:13:07] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:07] [INFO] [LastChance] Threat detected: Bullet
[18:13:07] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:07] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(210,1132), corner_timer=0.30
[18:13:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(210.1313, 1138.391), shooter_id=24724365119489, bullet_pos=(502.1611, 817.3393)
[18:13:07] [INFO] [Bullet] Using shooter_position, distance=433.999633789063
[18:13:07] [INFO] [Bullet] Distance to wall: 433.999633789063 (29.5518331196531% of viewport)
[18:13:07] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:07] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:07] [ENEMY] [Enemy4] Player empty ammo - priority attack triggered
[18:13:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(449.0628, 935.2985), source=ENEMY (Enemy4), range=1469, listeners=10
[18:13:07] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[18:13:07] [INFO] [Player] Spawning blood effect at (210.13129, 1132.3911), dir=(1, 0), lethal=False (C#)
[18:13:07] [INFO] [ImpactEffects] spawn_blood_effect called at (210.1313, 1132.391), dir=(1, 0), lethal=false
[18:13:07] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:07] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:07] [INFO] [ImpactEffects] Blood effect spawned at (210.1313, 1132.391) (scale=1)
[18:13:07] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 9.0
[18:13:07] [INFO] [LastChance] Player health updated (C# Damaged): 9.0
[18:13:07] [INFO] [LastChance] Threat detected: @Area2D@4265
[18:13:07] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:07] [ENEMY] [Enemy2] FLANKING corner check: angle -53.1°
[18:13:07] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:07] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(210.1313, 1132.391), source=PLAYER (Player), range=600, listeners=10
[18:13:07] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (210.1313, 1132.391), intensity=0.01, distance=474
[18:13:07] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (210.1313, 1132.391), intensity=0.03, distance=284
[18:13:07] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=6, self=0, below_threshold=2
[18:13:07] [INFO] [Player] Spawning blood effect at (210.13129, 1132.3911), dir=(1, 0), lethal=False (C#)
[18:13:07] [INFO] [ImpactEffects] spawn_blood_effect called at (210.1313, 1132.391), dir=(1, 0), lethal=false
[18:13:07] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:07] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:07] [INFO] [ImpactEffects] Blood effect spawned at (210.1313, 1132.391) (scale=1)
[18:13:07] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 8.0
[18:13:07] [INFO] [LastChance] Player health updated (C# Damaged): 8.0
[18:13:07] [ENEMY] [Enemy4] Player empty ammo - priority attack triggered
[18:13:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(423.3658, 961.4568), source=ENEMY (Enemy4), range=1469, listeners=10
[18:13:07] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[18:13:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(210.1313, 1138.391), shooter_id=24724365119489, bullet_pos=(501.8043, 817.015)
[18:13:07] [INFO] [Bullet] Using shooter_position, distance=433.999755859375
[18:13:07] [INFO] [Bullet] Distance to wall: 433.999755859375 (29.5518414316452% of viewport)
[18:13:07] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:07] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:07] [INFO] [LastChance] Threat detected: Bullet
[18:13:07] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:07] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=FLANKING, target=124.5°, current=167.2°, player=(210,1132), corner_timer=0.20
[18:13:07] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) - pursuing to attack (dist=559)
[18:13:07] [ENEMY] [Enemy2] FLANKING started: target=(124.0903, 951.8448), side=left, pos=(526.6396, 672.2033)
[18:13:07] [ENEMY] [Enemy2] FLANKING started: target=(125.5503, 951.1563), side=left, pos=(528.6991, 677.123)
[18:13:07] [INFO] [Player] Spawning blood effect at (210.13129, 1132.3911), dir=(1, 0), lethal=False (C#)
[18:13:07] [INFO] [ImpactEffects] spawn_blood_effect called at (210.1313, 1132.391), dir=(1, 0), lethal=false
[18:13:07] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:07] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:07] [INFO] [ImpactEffects] Blood effect spawned at (210.1313, 1132.391) (scale=1)
[18:13:07] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 7.0
[18:13:07] [INFO] [LastChance] Player health updated (C# Damaged): 7.0
[18:13:07] [ENEMY] [Enemy2] FLANKING started: target=(127.031, 950.4726), side=left, pos=(530.7585, 682.0427)
[18:13:07] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[18:13:07] [ENEMY] [Enemy2] State: FLANKING -> PURSUING
[18:13:07] [ENEMY] [Enemy4] Player empty ammo - priority attack triggered
[18:13:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(394.2365, 984.8076), source=ENEMY (Enemy4), range=1469, listeners=10
[18:13:07] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[18:13:07] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(210.1313, 1132.391), source=PLAYER (Player), range=600, listeners=10
[18:13:07] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (210.1313, 1132.391), intensity=0.01, distance=490
[18:13:07] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (210.1313, 1132.391), intensity=0.05, distance=231
[18:13:07] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=6, self=0, below_threshold=2
[18:13:07] [INFO] [BloodDecal] Blood puddle created at (260.732, 1163.747) (added to group)
[18:13:07] [INFO] [LastChance] Threat detected: Bullet
[18:13:07] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:07] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P2:combat_state, state=PURSUING, target=125.9°, current=-25.8°, player=(210,1132), corner_timer=0.18
[18:13:07] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(210,1132), corner_timer=-0.02
[18:13:07] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:07] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(210,1132), corner_timer=0.30
[18:13:07] [INFO] [BloodDecal] Blood puddle created at (268.5248, 1126.875) (added to group)
[18:13:07] [INFO] [Player] Spawning blood effect at (210.13129, 1132.3911), dir=(1, 0), lethal=False (C#)
[18:13:07] [INFO] [ImpactEffects] spawn_blood_effect called at (210.1313, 1132.391), dir=(1, 0), lethal=false
[18:13:07] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:07] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:07] [INFO] [ImpactEffects] Blood effect spawned at (210.1313, 1132.391) (scale=1)
[18:13:07] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 6.0
[18:13:07] [INFO] [LastChance] Player health updated (C# Damaged): 6.0
[18:13:07] [INFO] [BloodDecal] Blood puddle created at (308.023, 1168.14) (added to group)
[18:13:07] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=131.2°, current=133.3°, player=(210,1132), corner_timer=0.13
[18:13:07] [ENEMY] [Enemy3] Player vulnerable (ammo_empty) - pursuing to attack (dist=474)
[18:13:07] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
[18:13:07] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[18:13:07] [ENEMY] [Enemy4] Player empty ammo - priority attack triggered
[18:13:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(385.9138, 991.4792), source=ENEMY (Enemy4), range=1469, listeners=10
[18:13:07] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[18:13:07] [INFO] [LastChance] Threat detected: Bullet
[18:13:07] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:07] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=534), can_see=false
[18:13:07] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=560), can_see=false
[18:13:07] [ENEMY] [Enemy3] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=460), can_see=true
[18:13:07] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1683), can_see=false
[18:13:07] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1869), can_see=false
[18:13:07] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1421), can_see=false
[18:13:07] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1719), can_see=false
[18:13:07] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1935), can_see=false
[18:13:07] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1059), can_see=false
[18:13:07] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:07] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(210.1313, 1132.391), source=PLAYER (Player), range=600, listeners=10
[18:13:07] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (210.1313, 1132.391), intensity=0.01, distance=456
[18:13:07] [ENEMY] [Enemy3] Vulnerability sound triggered pursuit - transitioning from RETREATING to PURSUING
[18:13:07] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (210.1313, 1132.391), intensity=0.05, distance=225
[18:13:07] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=6, self=0, below_threshold=2
[18:13:07] [INFO] [BloodDecal] Blood puddle created at (280.514, 1152.244) (added to group)
[18:13:07] [INFO] [Player] Spawning blood effect at (210.13129, 1132.3911), dir=(1, 0), lethal=False (C#)
[18:13:07] [INFO] [ImpactEffects] spawn_blood_effect called at (210.1313, 1132.391), dir=(1, 0), lethal=false
[18:13:07] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:07] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:07] [INFO] [ImpactEffects] Blood effect spawned at (210.1313, 1132.391) (scale=1)
[18:13:07] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 5.0
[18:13:07] [INFO] [LastChance] Player health updated (C# Damaged): 5.0
[18:13:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(210.1313, 1138.391), shooter_id=24724365119489, bullet_pos=(990.8232, 56.68871)
[18:13:07] [INFO] [Bullet] Using shooter_position, distance=1334.00146484375
[18:13:07] [INFO] [Bullet] Distance to wall: 1334.00146484375 (90.8346127536037% of viewport)
[18:13:07] [INFO] [Bullet] Distance-based penetration chance: 40.6929517874624%
[18:13:07] [INFO] [Bullet] Penetration failed (distance roll)
[18:13:07] [INFO] [BloodDecal] Blood puddle created at (260.7781, 1134.293) (added to group)
[18:13:07] [ENEMY] [Enemy4] Player empty ammo - priority attack triggered
[18:13:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(385.9138, 991.4792), source=ENEMY (Enemy4), range=1469, listeners=10
[18:13:07] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[18:13:07] [ENEMY] [Enemy2] PURSUING corner check: angle -110.9°
[18:13:07] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=PURSUING, target=126.9°, current=-141.2°, player=(210,1132), corner_timer=0.13
[18:13:07] [INFO] [LastChance] Threat detected: Bullet
[18:13:07] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:07] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:07] [INFO] [BloodDecal] Blood puddle created at (311.0156, 1170.598) (added to group)
[18:13:07] [INFO] [BloodDecal] Blood puddle created at (292.4656, 1193.038) (added to group)
[18:13:07] [INFO] [BloodDecal] Blood puddle created at (309.3815, 1176.597) (added to group)
[18:13:07] [INFO] [BloodDecal] Blood puddle created at (294.787, 1117.878) (added to group)
[18:13:07] [INFO] [BloodDecal] Blood puddle created at (274.4126, 1172.724) (added to group)
[18:13:07] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=127.3°, current=79.6°, player=(210,1132), corner_timer=0.13
[18:13:07] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(210.1313, 1132.391), source=PLAYER (Player), range=600, listeners=10
[18:13:07] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (210.1313, 1132.391), intensity=0.01, distance=433
[18:13:07] [ENEMY] [Enemy4] Heard player EMPTY_CLICK at (210.1313, 1132.391), intensity=0.05, distance=225
[18:13:07] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=6, self=0, below_threshold=2
[18:13:07] [INFO] [Player] Spawning blood effect at (210.13129, 1132.3911), dir=(1, 0), lethal=False (C#)
[18:13:07] [INFO] [ImpactEffects] spawn_blood_effect called at (210.1313, 1132.391), dir=(1, 0), lethal=false
[18:13:07] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:07] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:07] [INFO] [ImpactEffects] Blood effect spawned at (210.1313, 1132.391) (scale=1)
[18:13:07] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 4.0
[18:13:07] [INFO] [LastChance] Player health updated (C# Damaged): 4.0
[18:13:07] [INFO] [BloodDecal] Blood puddle created at (329.1018, 1164.449) (added to group)
[18:13:07] [INFO] [BloodDecal] Blood puddle created at (380.3344, 1199.374) (added to group)
[18:13:07] [INFO] [BloodDecal] Blood puddle created at (261.1497, 1147.474) (added to group)
[18:13:07] [INFO] [BloodDecal] Blood puddle created at (261.2484, 1148.521) (added to group)
[18:13:08] [ENEMY] [Enemy4] Player empty ammo - priority attack triggered
[18:13:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(385.9138, 991.4792), source=ENEMY (Enemy4), range=1469, listeners=10
[18:13:08] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[18:13:08] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(210,1132), corner_timer=-0.02
[18:13:08] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (397.7794, 1148.773) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (384.1117, 1136.38) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (298.1629, 1204.967) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (321.3472, 1181.196) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (276.9333, 1135.984) (added to group)
[18:13:08] [INFO] [LastChance] Threat detected: Bullet
[18:13:08] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:08] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(210,1132), corner_timer=0.30
[18:13:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(210.1313, 1138.391), shooter_id=24724365119489, bullet_pos=(1028.855, 64.15047)
[18:13:08] [INFO] [Bullet] Using shooter_position, distance=1350.6669921875
[18:13:08] [INFO] [Bullet] Distance to wall: 1350.6669921875 (91.9693991556422% of viewport)
[18:13:08] [INFO] [Bullet] Distance-based penetration chance: 39.3690343184175%
[18:13:08] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:08] [ENEMY] [Enemy3] Player empty ammo - priority attack triggered
[18:13:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(449.8831, 817.6599), source=ENEMY (Enemy3), range=1469, listeners=10
[18:13:08] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (320.2428, 1171.061) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (266.8116, 1158.977) (added to group)
[18:13:08] [INFO] [Player] Spawning blood effect at (210.13129, 1132.3911), dir=(1, 0), lethal=False (C#)
[18:13:08] [INFO] [ImpactEffects] spawn_blood_effect called at (210.1313, 1132.391), dir=(1, 0), lethal=false
[18:13:08] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:08] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:08] [INFO] [ImpactEffects] Blood effect spawned at (210.1313, 1132.391) (scale=1)
[18:13:08] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[18:13:08] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[18:13:08] [ENEMY] [Enemy4] Player empty ammo - priority attack triggered
[18:13:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(385.9138, 991.4792), source=ENEMY (Enemy4), range=1469, listeners=10
[18:13:08] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (372.2209, 1131.368) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (331.43, 1159.251) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (370.3933, 1226.112) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (303.4357, 1145.573) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (341.4177, 1202.684) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (290.5598, 1153.598) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (270.8994, 1137.575) (added to group)
[18:13:08] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
[18:13:08] [INFO] [LastChance] Threat detected: Bullet
[18:13:08] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:08] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[18:13:08] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:08] [INFO] [LastChance] Threat detected: @Area2D@4322
[18:13:08] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (376.5001, 1241.145) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (355.4085, 1162.636) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (338.4189, 1212.091) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (280.1258, 1119.677) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (279.5045, 1132.558) (added to group)
[18:13:08] [ENEMY] [Enemy3] Player empty ammo - priority attack triggered
[18:13:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(433.9786, 841.7813), source=ENEMY (Enemy3), range=1469, listeners=10
[18:13:08] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[18:13:08] [INFO] [Player] Spawning blood effect at (210.13129, 1132.3911), dir=(1, 0), lethal=False (C#)
[18:13:08] [INFO] [ImpactEffects] spawn_blood_effect called at (210.1313, 1132.391), dir=(1, 0), lethal=false
[18:13:08] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:08] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:08] [INFO] [ImpactEffects] Blood effect spawned at (210.1313, 1132.391) (scale=1)
[18:13:08] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[18:13:08] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[18:13:08] [INFO] [Player] Spawning blood effect at (210.13129, 1132.3911), dir=(1, 0), lethal=False (C#)
[18:13:08] [INFO] [ImpactEffects] spawn_blood_effect called at (210.1313, 1132.391), dir=(1, 0), lethal=false
[18:13:08] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:08] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:08] [INFO] [ImpactEffects] Blood effect spawned at (210.1313, 1132.391) (scale=1)
[18:13:08] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[18:13:08] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[18:13:08] [INFO] [PenultimateHit] Starting penultimate hit effect:
[18:13:08] [INFO] [PenultimateHit]   - Time scale: 0.10
[18:13:08] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[18:13:08] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[18:13:08] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[18:13:08] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[18:13:08] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[18:13:08] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[18:13:08] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (336.7039, 1200.419) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (382.6881, 1128.601) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (296.8207, 1177.652) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (306.0723, 1164.832) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (248.0611, 1163.599) (added to group)
[18:13:08] [ENEMY] [Enemy2] PURSUING corner check: angle -108.5°
[18:13:08] [ENEMY] [Enemy4] Player empty ammo - priority attack triggered
[18:13:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(385.9138, 991.4792), source=ENEMY (Enemy4), range=1469, listeners=10
[18:13:08] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[18:13:08] [INFO] [LastChance] Threat detected: Bullet
[18:13:08] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:08] [INFO] [ReplayManager] Recording frame 600 (10,0s): player_valid=True, enemies=10
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (325.0184, 1208.215) (added to group)
[18:13:08] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=534), can_see=false
[18:13:08] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=500), can_see=false
[18:13:08] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1683), can_see=false
[18:13:08] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1869), can_see=false
[18:13:08] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1420), can_see=false
[18:13:08] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1719), can_see=false
[18:13:08] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1935), can_see=false
[18:13:08] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1059), can_see=false
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (274.6328, 1136.618) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (306.719, 1183.423) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (297.9517, 1181.389) (added to group)
[18:13:08] [INFO] [LastChance] Threat detected: @Area2D@4346
[18:13:08] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (357.3701, 1184.601) (added to group)
[18:13:08] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[18:13:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:08] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[18:13:08] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[18:13:08] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[18:13:08] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[18:13:08] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[18:13:08] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[18:13:08] [INFO] [LastChance] Resetting all effects (scene change detected)
[18:13:08] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[18:13:08] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[18:13:08] [ENEMY] [Enemy1] Death animation component initialized
[18:13:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:08] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[18:13:08] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[18:13:08] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[18:13:08] [ENEMY] [Enemy2] Death animation component initialized
[18:13:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:08] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[18:13:08] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[18:13:08] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[18:13:08] [ENEMY] [Enemy3] Death animation component initialized
[18:13:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:08] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[18:13:08] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[18:13:08] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[18:13:08] [ENEMY] [Enemy4] Death animation component initialized
[18:13:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:08] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[18:13:08] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[18:13:08] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[18:13:08] [ENEMY] [Enemy5] Death animation component initialized
[18:13:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:08] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[18:13:08] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[18:13:08] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[18:13:08] [ENEMY] [Enemy6] Death animation component initialized
[18:13:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:08] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[18:13:08] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[18:13:08] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[18:13:08] [ENEMY] [Enemy7] Death animation component initialized
[18:13:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:08] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[18:13:08] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[18:13:08] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[18:13:08] [ENEMY] [Enemy8] Death animation component initialized
[18:13:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:08] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[18:13:08] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[18:13:08] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[18:13:08] [ENEMY] [Enemy9] Death animation component initialized
[18:13:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:08] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[18:13:08] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[18:13:08] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[18:13:08] [ENEMY] [Enemy10] Death animation component initialized
[18:13:08] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:08] [INFO] [BloodyFeet:Player] Footprint scene loaded
[18:13:08] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[18:13:08] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[18:13:08] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[18:13:08] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[18:13:08] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[18:13:08] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[18:13:08] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[18:13:08] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[18:13:08] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[18:13:08] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[18:13:08] [INFO] [Player.Flashlight] Flashlight is selected, initializing...
[18:13:08] [INFO] [FlashlightEffect] PointLight2D found, energy=0.0, shadow=true
[18:13:08] [INFO] [FlashlightEffect] Flashlight sound loaded
[18:13:08] [INFO] [Player.Flashlight] Flashlight equipped and attached to PlayerModel at offset (20, 0)
[18:13:08] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 10/10
[18:13:08] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[18:13:08] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[18:13:08] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[18:13:08] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[18:13:08] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[18:13:08] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[18:13:08] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[18:13:08] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[18:13:08] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[18:13:08] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[18:13:08] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[18:13:08] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[18:13:08] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[18:13:08] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[18:13:08] [INFO] [ScoreManager] Level started with 10 enemies
[18:13:08] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[18:13:08] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[18:13:08] [INFO] [ReplayManager] Replay data cleared
[18:13:08] [INFO] [BuildingLevel] Previous replay data cleared
[18:13:08] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[18:13:08] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[18:13:08] [INFO] [ReplayManager] Level: BuildingLevel
[18:13:08] [INFO] [ReplayManager] Player: Player (valid: True)
[18:13:08] [INFO] [ReplayManager] Enemies count: 10
[18:13:08] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[18:13:08] [INFO] [ReplayManager]   Enemy 0: Enemy1
[18:13:08] [INFO] [ReplayManager]   Enemy 1: Enemy2
[18:13:08] [INFO] [ReplayManager]   Enemy 2: Enemy3
[18:13:08] [INFO] [ReplayManager]   Enemy 3: Enemy4
[18:13:08] [INFO] [ReplayManager]   Enemy 4: Enemy5
[18:13:08] [INFO] [ReplayManager]   Enemy 5: Enemy6
[18:13:08] [INFO] [ReplayManager]   Enemy 6: Enemy7
[18:13:08] [INFO] [ReplayManager]   Enemy 7: Enemy8
[18:13:08] [INFO] [ReplayManager]   Enemy 8: Enemy9
[18:13:08] [INFO] [ReplayManager]   Enemy 9: Enemy10
[18:13:08] [INFO] [BuildingLevel] Replay recording started successfully
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (314.2238, 1119.284) (added to group)
[18:13:08] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[18:13:08] [INFO] [CinemaEffects] Found player node: Player
[18:13:08] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[18:13:08] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[18:13:08] [ENEMY] [Enemy1] Registered as sound listener
[18:13:08] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[18:13:08] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[18:13:08] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[18:13:08] [ENEMY] [Enemy2] Registered as sound listener
[18:13:08] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[18:13:08] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[18:13:08] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[18:13:08] [ENEMY] [Enemy3] Registered as sound listener
[18:13:08] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[18:13:08] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[18:13:08] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[18:13:08] [ENEMY] [Enemy4] Registered as sound listener
[18:13:08] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[18:13:08] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[18:13:08] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[18:13:08] [ENEMY] [Enemy5] Registered as sound listener
[18:13:08] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[18:13:08] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[18:13:08] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[18:13:08] [ENEMY] [Enemy6] Registered as sound listener
[18:13:08] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[18:13:08] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[18:13:08] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[18:13:08] [ENEMY] [Enemy7] Registered as sound listener
[18:13:08] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[18:13:08] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[18:13:08] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[18:13:08] [ENEMY] [Enemy8] Registered as sound listener
[18:13:08] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[18:13:08] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[18:13:08] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[18:13:08] [ENEMY] [Enemy9] Registered as sound listener
[18:13:08] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[18:13:08] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[18:13:08] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[18:13:08] [ENEMY] [Enemy10] Registered as sound listener
[18:13:08] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[18:13:08] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[18:13:08] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[18:13:08] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:13:08] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:13:08] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:13:08] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:13:08] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:13:08] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:13:08] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:13:08] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:13:08] [INFO] [Player] Detecting weapon pose (frame 3)...
[18:13:08] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[18:13:08] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[18:13:08] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[18:13:08] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[18:13:08] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[18:13:08] [INFO] [LastChance] Found player: Player
[18:13:08] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[18:13:08] [INFO] [LastChance] Connected to player Damaged signal (C#)
[18:13:08] [INFO] [LastChance] Connected to player Died signal (C#)
[18:13:08] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (368.6321, 1302.556) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (448.0201, 1234.684) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (325.2985, 1176.402) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (308.9428, 1232.447) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (339.2473, 1227.428) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (364.4095, 1163.933) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (306.8796, 1214.696) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (353.3427, 1195.585) (added to group)
[18:13:08] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (402.2513, 1164.074) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (311.8313, 1123.046) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (306.9255, 1199.535) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (292.5243, 1179.485) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (269.4531, 1164.706) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (265.8356, 1149.262) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (413.9573, 1220.221) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (341.227, 1259.736) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (275.6049, 1184.001) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (322.4988, 1249.536) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (356.2133, 1226.589) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (284.0698, 1183.628) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (278.2261, 1145.188) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (392.3684, 1328.37) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (387.3081, 1174.941) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (340.3261, 1168.229) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (339.5141, 1107.057) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (316.6373, 1231.739) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (382.1537, 1234.518) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (357.7357, 1119.98) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (347.9688, 1116.325) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (306.1808, 1221.828) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (367.0579, 1170.745) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (361.5542, 1220.954) (added to group)
[18:13:08] [INFO] [BloodDecal] Blood puddle created at (311.435, 1195.997) (added to group)
[18:13:09] [INFO] [BloodDecal] Blood puddle created at (289.4095, 1221.239) (added to group)
[18:13:09] [INFO] [BloodDecal] Blood puddle created at (419.31, 1223.197) (added to group)
[18:13:09] [INFO] [BloodDecal] Blood puddle created at (321.5086, 1175.458) (added to group)
[18:13:09] [INFO] [BloodDecal] Blood puddle created at (375.8134, 1193.974) (added to group)
[18:13:09] [INFO] [BloodDecal] Blood puddle created at (363.4193, 1167.825) (added to group)
[18:13:09] [INFO] [BloodDecal] Blood puddle created at (331.8954, 1179.182) (added to group)
[18:13:09] [INFO] [BloodDecal] Blood puddle created at (396.3042, 1191.924) (added to group)
[18:13:09] [INFO] [BloodDecal] Blood puddle created at (316.3708, 1205.084) (added to group)
[18:13:09] [INFO] [BloodDecal] Blood puddle created at (404.5173, 1170.228) (added to group)
[18:13:09] [INFO] [BloodDecal] Blood puddle created at (322.1837, 1229.774) (added to group)
[18:13:09] [INFO] [BloodDecal] Blood puddle created at (422.1911, 1149.108) (added to group)
[18:13:09] [INFO] [BloodDecal] Blood puddle created at (387.9704, 1217.69) (added to group)
[18:13:09] [INFO] [BloodDecal] Blood puddle created at (422.6622, 1214.18) (added to group)
[18:13:09] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[18:13:10] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[18:13:10] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[18:13:10] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,902), corner_timer=0.30
[18:13:10] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,902), corner_timer=0.30
[18:13:10] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(445,799), corner_timer=-0.02
[18:13:10] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[18:13:10] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(445,799), corner_timer=-0.02
[18:13:10] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[18:13:10] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(443,794), corner_timer=0.30
[18:13:10] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(443,794), corner_timer=0.30
[18:13:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(426.4059, 775.6015), source=PLAYER (MakarovPM), range=1469, listeners=20
[18:13:10] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[18:13:10] [ENEMY] [Enemy1] Heard gunshot at (426.4059, 775.6015), source_type=0, intensity=0.01, distance=444
[18:13:10] [ENEMY] [Enemy2] Heard gunshot at (426.4059, 775.6015), source_type=0, intensity=0.05, distance=227
[18:13:10] [ENEMY] [Enemy3] Heard gunshot at (426.4059, 775.6015), source_type=0, intensity=0.03, distance=275
[18:13:10] [ENEMY] [Enemy4] Heard gunshot at (426.4059, 775.6015), source_type=0, intensity=0.02, distance=394
[18:13:10] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:13:10] [INFO] [BloodyFeet:Player] Blood ran out - no more footprints
[18:13:10] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=73.2°, current=-33.8°, player=(426,769), corner_timer=0.00
[18:13:10] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=83.1°, current=-67.5°, player=(426,769), corner_timer=0.00
[18:13:10] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=175.9°, current=-33.8°, player=(426,769), corner_timer=0.00
[18:13:10] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-160.8°, current=-67.5°, player=(426,769), corner_timer=0.00
[18:13:10] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[18:13:10] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=176.7°, current=139.3°, player=(422,766), corner_timer=0.00
[18:13:10] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(373,750), corner_timer=-0.02
[18:13:10] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[18:13:10] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(369,750), corner_timer=0.30
[18:13:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(361.4939, 759.4757), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:10] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:13:10] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[18:13:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(426.4059, 775.6015), shooter_id=28410554354864, bullet_pos=(923.7543, 633.1971)
[18:13:11] [INFO] [Bullet] Using shooter_position, distance=517.333923339844
[18:13:11] [INFO] [Bullet] Distance to wall: 517.333923339844 (35.2262181334121% of viewport)
[18:13:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:11] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:11] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[18:13:11] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[18:13:11] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[18:13:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(298.6987, 813.713), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:11] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=4, self=0, below_threshold=2
[18:13:11] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(294,810), corner_timer=-0.02
[18:13:11] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[18:13:11] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=113.7°, current=177.0°, player=(290,813), corner_timer=0.00
[18:13:11] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(290,813), corner_timer=0.30
[18:13:11] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[18:13:11] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[18:13:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(220.9109, 838.3672), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:11] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=5, self=0, below_threshold=2
[18:13:11] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(198,845), corner_timer=-0.02
[18:13:11] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[18:13:11] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(194,849), corner_timer=0.30
[18:13:11] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[18:13:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(156.0067, 894.1256), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:11] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=5, self=0, below_threshold=2
[18:13:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(298.6987, 813.713), shooter_id=28410554354864, bullet_pos=(913.479, 600.6133)
[18:13:11] [INFO] [Bullet] Using shooter_position, distance=650.666015625
[18:13:11] [INFO] [Bullet] Distance to wall: 650.666015625 (44.305045473207% of viewport)
[18:13:11] [INFO] [Bullet] Distance-based penetration chance: 94.9774469479252%
[18:13:11] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:11] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(132,927), corner_timer=-0.02
[18:13:11] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[18:13:11] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(131,931), corner_timer=0.30
[18:13:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(361.4939, 759.4757), shooter_id=28410554354864, bullet_pos=(1361.81, 438.1228)
[18:13:11] [INFO] [Bullet] Using shooter_position, distance=1050.66625976563
[18:13:11] [INFO] [Bullet] Distance to wall: 1050.66625976563 (71.5417976323333% of viewport)
[18:13:11] [INFO] [Bullet] Distance-based penetration chance: 63.2012360956112%
[18:13:11] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(134.6147, 972.4111), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=3
[18:13:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(220.9109, 838.3672), shooter_id=28410554354864, bullet_pos=(916.2632, 662.1538)
[18:13:12] [INFO] [Bullet] Using shooter_position, distance=717.332641601563
[18:13:12] [INFO] [Bullet] Distance to wall: 717.332641601563 (48.8444986250667% of viewport)
[18:13:12] [INFO] [Bullet] Distance-based penetration chance: 89.6814182707555%
[18:13:12] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:12] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(196.1353, 1006.102), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=3
[18:13:12] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(216,991), corner_timer=-0.02
[18:13:12] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[18:13:12] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(219,988), corner_timer=0.30
[18:13:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(156.0067, 894.1256), shooter_id=28410554354864, bullet_pos=(923.7794, 666.9883)
[18:13:12] [INFO] [Bullet] Using shooter_position, distance=800.666137695313
[18:13:12] [INFO] [Bullet] Distance to wall: 800.666137695313 (54.5188296108774% of viewport)
[18:13:12] [INFO] [Bullet] Distance-based penetration chance: 83.0613654539764%
[18:13:12] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:12] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(196.1353, 1006.102), shooter_id=28410554354864, bullet_pos=(502.3243, 803.1686)
[18:13:12] [INFO] [Bullet] Using shooter_position, distance=367.333374023438
[18:13:12] [INFO] [Bullet] Distance to wall: 367.333374023438 (25.0124049037696% of viewport)
[18:13:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:12] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:12] [INFO] [ReplayManager] Recording frame 240 (4,0s): player_valid=True, enemies=10
[18:13:12] [ENEMY] [Enemy1] Warning: No valid flank position (both sides behind walls)
[18:13:12] [ENEMY] [Enemy1] FLANKING started: target=(110.7014, 889.1838), side=left, pos=(243.0722, 401.9338)
[18:13:12] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
[18:13:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(296.2486, 981.3636), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:12] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[18:13:12] [ENEMY] [Enemy2] PURSUING corner check: angle 176.6°
[18:13:12] [ENEMY] [Enemy1] FLANKING corner check: angle -116.1°
[18:13:12] [ENEMY] [Enemy4] PURSUING corner check: angle -178.7°
[18:13:12] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(308,980), corner_timer=-0.02
[18:13:12] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[18:13:12] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(311,981), corner_timer=0.30
[18:13:12] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(296.2486, 981.3636), shooter_id=28410554354864, bullet_pos=(498.4099, 806.4411)
[18:13:12] [INFO] [Bullet] Using shooter_position, distance=267.333343505859
[18:13:12] [INFO] [Bullet] Distance to wall: 267.333343505859 (18.203218941986% of viewport)
[18:13:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:12] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:13] [ENEMY] [Enemy1] FLANKING corner check: angle 15.4°
[18:13:13] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(313,1012), corner_timer=-0.02
[18:13:13] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[18:13:13] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(310,1013), corner_timer=0.30
[18:13:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(298.9442, 1021.036), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[18:13:13] [ENEMY] [Enemy4] PURSUING corner check: angle -86.6°
[18:13:13] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(134.6147, 972.4111), shooter_id=28410554354864, bullet_pos=(1361.258, 368.3018)
[18:13:13] [INFO] [Bullet] Using shooter_position, distance=1367.333984375
[18:13:13] [INFO] [Bullet] Distance to wall: 1367.333984375 (93.1042853015852% of viewport)
[18:13:13] [INFO] [Bullet] Distance-based penetration chance: 38.0450004814839%
[18:13:13] [INFO] [Bullet] Penetration failed (distance roll)
[18:13:13] [ENEMY] [Enemy1] FLANKING corner check: angle 116.8°
[18:13:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(298.9442, 1021.036), shooter_id=28410554354864, bullet_pos=(507.5818, 804.5399)
[18:13:13] [INFO] [Bullet] Using shooter_position, distance=300.666564941406
[18:13:13] [INFO] [Bullet] Distance to wall: 300.666564941406 (20.4729392839218% of viewport)
[18:13:13] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:13] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:13] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(213,1015), corner_timer=-0.02
[18:13:13] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[18:13:13] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(208,1015), corner_timer=0.30
[18:13:13] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:13] [INFO] [ReplayManager] Recording frame 300 (5,0s): player_valid=True, enemies=10
[18:13:13] [ENEMY] [Enemy1] FLANKING corner check: angle -63.2°
[18:13:13] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(146,1015), corner_timer=-0.02
[18:13:13] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[18:13:13] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(145,1015), corner_timer=0.30
[18:13:13] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[18:13:13] [ENEMY] [Enemy1] Player reloading: false -> true
[18:13:13] [ENEMY] [Enemy2] Player reloading: false -> true
[18:13:13] [ENEMY] [Enemy3] Player reloading: false -> true
[18:13:13] [ENEMY] [Enemy4] Player reloading: false -> true
[18:13:13] [ENEMY] [Enemy5] Player reloading: false -> true
[18:13:13] [ENEMY] [Enemy6] Player reloading: false -> true
[18:13:13] [ENEMY] [Enemy7] Player reloading: false -> true
[18:13:13] [ENEMY] [Enemy8] Player reloading: false -> true
[18:13:13] [ENEMY] [Enemy9] Player reloading: false -> true
[18:13:13] [ENEMY] [Enemy10] Player reloading: false -> true
[18:13:13] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(145.3692, 1015.853), source=PLAYER (Player), range=900, listeners=10
[18:13:13] [ENEMY] [Enemy1] Heard player RELOAD at (145.3692, 1015.853), intensity=0.01, distance=485
[18:13:13] [ENEMY] [Enemy2] Heard player RELOAD at (145.3692, 1015.853), intensity=0.01, distance=452
[18:13:13] [ENEMY] [Enemy3] Heard player RELOAD at (145.3692, 1015.853), intensity=0.01, distance=464
[18:13:13] [ENEMY] [Enemy3] Vulnerability sound triggered pursuit - transitioning from SUPPRESSED to PURSUING
[18:13:13] [ENEMY] [Enemy4] Heard player RELOAD at (145.3692, 1015.853), intensity=0.01, distance=425
[18:13:13] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
[18:13:13] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=485), can_see=false
[18:13:13] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=false (dist=452), can_see=false
[18:13:13] [ENEMY] [Enemy2] Pursuing vulnerability sound at (145.3692, 1015.853), distance=452
[18:13:13] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=PURSUING, target=154.6°, current=160.7°, player=(145,1015), corner_timer=0.00
[18:13:13] [ENEMY] [Enemy3] Player vulnerable (reloading) but cannot attack: close=false (dist=464), can_see=false
[18:13:13] [ENEMY] [Enemy3] Pursuing vulnerability sound at (145.3692, 1015.853), distance=464
[18:13:13] [ENEMY] [Enemy4] Player vulnerable (reloading) but cannot attack: close=false (dist=425), can_see=false
[18:13:13] [ENEMY] [Enemy4] Pursuing vulnerability sound at (145.3692, 1015.853), distance=425
[18:13:13] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1691), can_see=false
[18:13:13] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1891), can_see=false
[18:13:13] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=1471), can_see=false
[18:13:13] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1808), can_see=false
[18:13:13] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=2026), can_see=false
[18:13:13] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=1171), can_see=false
[18:13:13] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:13] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=148.7°, current=141.7°, player=(145,1015), corner_timer=0.00
[18:13:13] [ENEMY] [Enemy3] Player vulnerable (reloading) - pursuing to attack (dist=459)
[18:13:14] [ENEMY] [Enemy1] FLANKING corner check: angle -86.4°
[18:13:14] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.5°, current=89.5°, player=(145,1015), corner_timer=-0.02
[18:13:14] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[18:13:14] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
[18:13:14] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(145,1015), corner_timer=0.30
[18:13:14] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[18:13:14] [ENEMY] [Enemy1] Player reloading: true -> false
[18:13:14] [ENEMY] [Enemy2] Player reloading: true -> false
[18:13:14] [ENEMY] [Enemy3] Player reloading: true -> false
[18:13:14] [ENEMY] [Enemy4] Player reloading: true -> false
[18:13:14] [ENEMY] [Enemy5] Player reloading: true -> false
[18:13:14] [ENEMY] [Enemy6] Player reloading: true -> false
[18:13:14] [ENEMY] [Enemy7] Player reloading: true -> false
[18:13:14] [ENEMY] [Enemy8] Player reloading: true -> false
[18:13:14] [ENEMY] [Enemy9] Player reloading: true -> false
[18:13:14] [ENEMY] [Enemy10] Player reloading: true -> false
[18:13:14] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[18:13:14] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[18:13:14] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:14] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[18:13:14] [ENEMY] [Enemy1] FLANKING corner check: angle 22.7°
[18:13:14] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=140.2°, current=-171.4°, player=(145,1015), corner_timer=0.03
[18:13:14] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[18:13:14] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.4°, current=89.5°, player=(145,1015), corner_timer=-0.02
[18:13:14] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[18:13:14] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=140.7°, current=-149.8°, player=(145,1015), corner_timer=0.03
[18:13:14] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.3°, player=(145,1015), corner_timer=0.30
[18:13:14] [ENEMY] [Enemy1] ROT_CHANGE: P2:combat_state -> P1:visible, state=FLANKING, target=141.1°, current=-172.6°, player=(145,1015), corner_timer=0.18
[18:13:14] [ENEMY] [Enemy1] State: FLANKING -> COMBAT
[18:13:14] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=141.6°, current=-169.0°, player=(145,1015), corner_timer=0.03
[18:13:14] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:14] [ENEMY] [Enemy1] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=141.7°, current=-150.1°, player=(145,1015), corner_timer=0.18
[18:13:14] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=148.6°, current=99.7°, player=(145,1015), corner_timer=-0.02
[18:13:14] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[18:13:14] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=-90.0°, current=139.2°, player=(145,1015), corner_timer=0.00
[18:13:14] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=147.9°, current=72.4°, player=(145,1015), corner_timer=-0.02
[18:13:14] [INFO] [ReplayManager] Recording frame 360 (6,0s): player_valid=True, enemies=10
[18:13:14] [ENEMY] [Enemy1] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=142.2°, current=-169.5°, player=(145,1015), corner_timer=0.18
[18:13:14] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[18:13:14] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[18:13:14] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.5°, player=(145,1015), corner_timer=-0.02
[18:13:14] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:14] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=145.4°, current=98.2°, player=(145,1015), corner_timer=-0.02
[18:13:14] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(145,1015), corner_timer=0.30
[18:13:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(145.3692, 1021.853), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:14] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=5, self=0, below_threshold=2
[18:13:14] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(145.3692, 1021.853), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:14] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=5, self=0, below_threshold=2
[18:13:15] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(145,1015), corner_timer=-0.02
[18:13:15] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:15] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(145,1015), corner_timer=0.30
[18:13:15] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 3/3 -> 2/3
[18:13:15] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[18:13:15] [INFO] [ImpactEffects] spawn_blood_effect called at (392.0962, 860.0519), dir=(0.83962, -0.543173), lethal=false
[18:13:15] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:15] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:15] [INFO] [ImpactEffects] Blood effect spawned at (392.0962, 860.0519) (scale=0.5)
[18:13:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(376.469, 736.1195), source=ENEMY (Enemy2), range=1469, listeners=10
[18:13:15] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[18:13:15] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:15] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 2/3 -> 1/3
[18:13:15] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[18:13:15] [INFO] [ImpactEffects] spawn_blood_effect called at (356.0203, 882.8327), dir=(0.862804, -0.505539), lethal=false
[18:13:15] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:15] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:15] [INFO] [ImpactEffects] Blood effect spawned at (356.0203, 882.8327) (scale=0.5)
[18:13:15] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[18:13:15] [INFO] [LastChance] Threat detected: Bullet
[18:13:15] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:15] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:15] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=-13.7°, current=91.2°, player=(145,1015), corner_timer=-0.02
[18:13:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(356.8855, 754.2458), source=ENEMY (Enemy2), range=1469, listeners=10
[18:13:15] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[18:13:15] [INFO] [Player] Spawning blood effect at (145.36923, 1015.8534), dir=(1, 0), lethal=False (C#)
[18:13:15] [INFO] [ImpactEffects] spawn_blood_effect called at (145.3692, 1015.853), dir=(1, 0), lethal=false
[18:13:15] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:15] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:15] [INFO] [ImpactEffects] Blood effect spawned at (145.3692, 1015.853) (scale=1)
[18:13:15] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 9.0
[18:13:15] [INFO] [LastChance] Player health updated (C# Damaged): 9.0
[18:13:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(356.776, 754.254), source=ENEMY (Enemy1), range=1469, listeners=10
[18:13:15] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[18:13:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(145.3692, 1022.187), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:15] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=5, self=0, below_threshold=2
[18:13:15] [INFO] [LastChance] Threat detected: @Area2D@4729
[18:13:15] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:15] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:15] [INFO] [LastChance] Threat detected: @Area2D@4732
[18:13:15] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:15] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (430.9896, 865.5072) (added to group)
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (415.6884, 836.5164) (added to group)
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (429.6262, 848.9056) (added to group)
[18:13:15] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
[18:13:15] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[18:13:15] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(145,1020), corner_timer=-0.02
[18:13:15] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(337.5471, 781.9771), source=ENEMY (Enemy2), range=1469, listeners=10
[18:13:15] [ENEMY] [Enemy1] Heard gunshot at (337.5471, 781.9771), source_type=1, intensity=1.00, distance=8
[18:13:15] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[18:13:15] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(145,1022), corner_timer=0.30
[18:13:15] [INFO] [Player] Spawning blood effect at (145.36923, 1025.1868), dir=(1, 0), lethal=False (C#)
[18:13:15] [INFO] [ImpactEffects] spawn_blood_effect called at (145.3692, 1025.187), dir=(1, 0), lethal=false
[18:13:15] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:15] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:15] [INFO] [ImpactEffects] Blood effect spawned at (145.3692, 1025.187) (scale=1)
[18:13:15] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 8.0
[18:13:15] [INFO] [LastChance] Player health updated (C# Damaged): 8.0
[18:13:15] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
[18:13:15] [INFO] [Player] Spawning blood effect at (145.36923, 1027.8534), dir=(1, 0), lethal=False (C#)
[18:13:15] [INFO] [ImpactEffects] spawn_blood_effect called at (145.3692, 1027.853), dir=(1, 0), lethal=false
[18:13:15] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:15] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:15] [INFO] [ImpactEffects] Blood effect spawned at (145.3692, 1027.853) (scale=1)
[18:13:15] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 7.0
[18:13:15] [INFO] [LastChance] Player health updated (C# Damaged): 7.0
[18:13:15] [INFO] [LastChance] Threat detected: Bullet
[18:13:15] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:15] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (448.8335, 819.4) (added to group)
[18:13:15] [INFO] [BloodyFeet:Enemy4] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[18:13:15] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (460.1256, 788.9531) (added to group)
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (434.6013, 867.959) (added to group)
[18:13:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(145.3692, 1061.853), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:15] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=5, self=0, below_threshold=2
[18:13:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(301.52124, 839.6385), shooter_id=28406846589677, bullet_pos=(42.885494, 1111.1759)
[18:13:15] [INFO] [Bullet] Using shooter_position, distance=375,00003
[18:13:15] [INFO] [Bullet] Distance to wall: 375,00003 (25,534443% of viewport)
[18:13:15] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (472.9313, 803.7472) (added to group)
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (474.7751, 831.5324) (added to group)
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (487.1038, 834.2873) (added to group)
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (419.8477, 896.3978) (added to group)
[18:13:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(333.0273, 737.4056), source=ENEMY (Enemy2), range=1469, listeners=10
[18:13:15] [ENEMY] [Enemy1] Heard gunshot at (333.0273, 737.4056), source_type=1, intensity=1.00, distance=13
[18:13:15] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[18:13:15] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
[18:13:15] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (443.3195, 874.2343) (added to group)
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (413.4571, 886.0842) (added to group)
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (211.3232, 1024.576) (added to group)
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (200.2909, 1010.695) (added to group)
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (204.9909, 1050.003) (added to group)
[18:13:15] [INFO] [ReplayManager] Recording frame 420 (7,0s): player_valid=True, enemies=10
[18:13:15] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
[18:13:15] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (433.7383, 913.137) (added to group)
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (214.9271, 1049.016) (added to group)
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (230.5841, 1017.165) (added to group)
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (220.8584, 1023.607) (added to group)
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (191.2247, 1037.571) (added to group)
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (204.3716, 1070.284) (added to group)
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (202.9743, 1028.992) (added to group)
[18:13:15] [INFO] [LastChance] Threat detected: @Area2D@4809
[18:13:15] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:15] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:15] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(146,1110), corner_timer=-0.02
[18:13:15] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (441.0466, 913.0434) (added to group)
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (210.656, 1035.343) (added to group)
[18:13:15] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(147,1115), corner_timer=0.30
[18:13:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(148.4488, 1126.411), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:15] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=5, self=0, below_threshold=2
[18:13:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(301.52124, 839.6385), shooter_id=28406846589677, bullet_pos=(304.40372, 1406.6483)
[18:13:15] [INFO] [Bullet] Using shooter_position, distance=567,01715
[18:13:15] [INFO] [Bullet] Distance to wall: 567,01715 (38,60924% of viewport)
[18:13:15] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:15] [ENEMY] [Enemy4] ROT_CHANGE: P4:velocity -> P1:visible, state=RETREATING, target=139.6°, current=172.9°, player=(148,1120), corner_timer=-0.02
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (458.3323, 801.124) (added to group)
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (492.2214, 841.207) (added to group)
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (271.809, 1077.766) (added to group)
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (209.8729, 1049.371) (added to group)
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (201.5695, 1079.415) (added to group)
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (192.5662, 1039.056) (added to group)
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (208.8062, 1020.596) (added to group)
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (247.2241, 1010.975) (added to group)
[18:13:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(307.0655, 799.62054), shooter_id=28406846589677, bullet_pos=(67.30426, 1238.3853)
[18:13:15] [INFO] [Bullet] Using shooter_position, distance=499,9999
[18:13:15] [INFO] [Bullet] Distance to wall: 499,9999 (34,045914% of viewport)
[18:13:15] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(347.761, 736.0675), source=ENEMY (Enemy2), range=1469, listeners=10
[18:13:15] [ENEMY] [Enemy1] Heard gunshot at (347.761, 736.0675), source_type=1, intensity=1.00, distance=17
[18:13:15] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[18:13:15] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=-17.8°, current=-32.1°, player=(156,1139), corner_timer=-0.02
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (447.1979, 846.5343) (added to group)
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (290.4353, 1066.68) (added to group)
[18:13:15] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
[18:13:15] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:15] [ENEMY] [Enemy4] ROT_CHANGE: P4:velocity -> P1:visible, state=RETREATING, target=133.9°, current=154.7°, player=(169,1155), corner_timer=-0.02
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (254.6718, 1067.88) (added to group)
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (262.3762, 1033.205) (added to group)
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (315.789, 1106.055) (added to group)
[18:13:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(177.1683, 1169.515), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:15] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[18:13:15] [ENEMY] [Enemy3] State: SUPPRESSED -> IN_COVER
[18:13:15] [INFO] [LastChance] Threat detected: @Area2D@4848
[18:13:15] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:15] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(361.8541, 758.0827), source=ENEMY (Enemy2), range=1469, listeners=10
[18:13:15] [ENEMY] [Enemy1] Heard gunshot at (361.8541, 758.0827), source_type=1, intensity=1.00, distance=15
[18:13:15] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[18:13:15] [ENEMY] [Enemy3] State: IN_COVER -> PURSUING
[18:13:15] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
[18:13:15] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=PURSUING, target=122.5°, current=-88.0°, player=(184,1171), corner_timer=0.00
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (300.7942, 1068.401) (added to group)
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (258.7024, 1029.02) (added to group)
[18:13:15] [INFO] [BloodDecal] Blood puddle created at (218.2373, 1058.12) (added to group)
[18:13:15] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=-7.7°, current=-24.9°, player=(188,1175), corner_timer=-0.02
[18:13:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(307.0655, 799.62054), shooter_id=28406846589677, bullet_pos=(211.40546, 1605.715)
[18:13:15] [INFO] [Bullet] Using shooter_position, distance=811,75055
[18:13:15] [INFO] [Bullet] Distance to wall: 811,75055 (55,273586% of viewport)
[18:13:15] [INFO] [Player] Spawning blood effect at (196.6137, 1182.9601), dir=(1, 0), lethal=False (C#)
[18:13:15] [INFO] [ImpactEffects] spawn_blood_effect called at (196.6137, 1182.96), dir=(1, 0), lethal=false
[18:13:15] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:15] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:15] [INFO] [ImpactEffects] Blood effect spawned at (196.6137, 1182.96) (scale=1)
[18:13:15] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 6.0
[18:13:15] [INFO] [LastChance] Player health updated (C# Damaged): 6.0
[18:13:16] [INFO] [BloodDecal] Blood puddle created at (327.992, 1203.192) (added to group)
[18:13:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(301.52124, 839.6385), shooter_id=28406846589677, bullet_pos=(678.35724, 1007.61084)
[18:13:16] [INFO] [Bullet] Using shooter_position, distance=412,5774
[18:13:16] [INFO] [Bullet] Distance to wall: 412,5774 (28,093153% of viewport)
[18:13:16] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:16] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(208,1194), corner_timer=-0.02
[18:13:16] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:16] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(212,1198), corner_timer=0.30
[18:13:16] [INFO] [BloodDecal] Blood puddle created at (363.3513, 1034.743) (added to group)
[18:13:16] [INFO] [BloodDecal] Blood puddle created at (323.4044, 1151.841) (added to group)
[18:13:16] [INFO] [BloodDecal] Blood puddle created at (338.8983, 1078.093) (added to group)
[18:13:16] [INFO] [BloodDecal] Blood puddle created at (266.7488, 1090.4) (added to group)
[18:13:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(307.0655, 799.62054), shooter_id=28406846589677, bullet_pos=(313.0153, 1415.4138)
[18:13:16] [INFO] [Bullet] Using shooter_position, distance=615,822
[18:13:16] [INFO] [Bullet] Distance to wall: 615,822 (41,932453% of viewport)
[18:13:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(372.0835, 756.1617), source=ENEMY (Enemy2), range=1469, listeners=10
[18:13:16] [ENEMY] [Enemy1] Heard gunshot at (372.0835, 756.1617), source_type=1, intensity=1.00, distance=17
[18:13:16] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[18:13:16] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
[18:13:16] [INFO] [BloodDecal] Blood puddle created at (263.4675, 1080.936) (added to group)
[18:13:16] [INFO] [BloodDecal] Blood puddle created at (300.0956, 1115.48) (added to group)
[18:13:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(239.3936, 1231.74), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:16] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=5
[18:13:16] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(341.7592, 822.8751), shooter_id=28406846589677, bullet_pos=(49.325558, 1375.2402)
[18:13:16] [INFO] [Bullet] Using shooter_position, distance=624,9997
[18:13:16] [INFO] [Bullet] Distance to wall: 624,9997 (42,55738% of viewport)
[18:13:16] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
[18:13:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(307.0655, 799.62054), shooter_id=28406846589677, bullet_pos=(424.9042, 1592.7794)
[18:13:16] [INFO] [Bullet] Using shooter_position, distance=801,8647
[18:13:16] [INFO] [Bullet] Distance to wall: 801,8647 (54,60044% of viewport)
[18:13:16] [INFO] [Bullet] Distance-based penetration chance: 82,966156%
[18:13:16] [INFO] [Bullet] Starting wall penetration at (424.9042, 1592.7794)
[18:13:16] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=RETREATING, target=147.0°, current=-160.6°, player=(254,1241), corner_timer=0.00
[18:13:16] [INFO] [Bullet] Raycast backward hit penetrating body at distance 7,8631163
[18:13:16] [INFO] [Bullet] Body exited signal received for penetrating body
[18:13:16] [INFO] [Bullet] Exiting penetration at (441.22458, 1618.6504) after traveling 25,58854 pixels through wall
[18:13:16] [INFO] [Bullet] Damage multiplier after penetration: 0,1125
[18:13:16] [INFO] [LastChance] Threat detected: @Area2D@4882
[18:13:16] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:16] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[18:13:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(341.7592, 822.8751), shooter_id=28406846589677, bullet_pos=(178.31927, 1592.789)
[18:13:16] [INFO] [Bullet] Using shooter_position, distance=787,0705
[18:13:16] [INFO] [Bullet] Distance to wall: 787,0705 (53,593082% of viewport)
[18:13:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(376.2603, 754.2083), source=ENEMY (Enemy2), range=1469, listeners=10
[18:13:16] [ENEMY] [Enemy1] Heard gunshot at (376.2603, 754.2083), source_type=1, intensity=1.00, distance=36
[18:13:16] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[18:13:16] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[18:13:16] [INFO] [Player] Spawning blood effect at (274.39545, 1260.7408), dir=(1, 0), lethal=False (C#)
[18:13:16] [INFO] [ImpactEffects] spawn_blood_effect called at (274.3954, 1260.741), dir=(1, 0), lethal=false
[18:13:16] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:16] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:16] [INFO] [ImpactEffects] Blood effect spawned at (274.3954, 1260.741) (scale=1)
[18:13:16] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 5.0
[18:13:16] [INFO] [LastChance] Player health updated (C# Damaged): 5.0
[18:13:16] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
[18:13:16] [INFO] [BloodDecal] Blood puddle created at (297.544, 1267.313) (added to group)
[18:13:16] [INFO] [BloodDecal] Blood puddle created at (328.597, 1204.6) (added to group)
[18:13:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(301.52124, 839.6385), shooter_id=28406846589677, bullet_pos=(1005.89044, 1373.6473)
[18:13:16] [INFO] [Bullet] Using shooter_position, distance=883,91254
[18:13:16] [INFO] [Bullet] Distance to wall: 883,91254 (60,187233% of viewport)
[18:13:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(301.52124, 839.6385), shooter_id=28406846589677, bullet_pos=(1008.5974, 1369.4435)
[18:13:16] [INFO] [Bullet] Using shooter_position, distance=883,544
[18:13:16] [INFO] [Bullet] Distance to wall: 883,544 (60,16214% of viewport)
[18:13:16] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[18:13:16] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(286,1272), corner_timer=-0.02
[18:13:16] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:16] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(289,1276), corner_timer=0.30
[18:13:16] [INFO] [BloodDecal] Blood puddle created at (275.4799, 1231.996) (added to group)
[18:13:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(301.6191, 1293.964), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:16] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=5
[18:13:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(341.7592, 822.8751), shooter_id=28406846589677, bullet_pos=(323.26495, 1394.2319)
[18:13:16] [INFO] [Bullet] Using shooter_position, distance=571,65607
[18:13:16] [INFO] [Bullet] Distance to wall: 571,65607 (38,925114% of viewport)
[18:13:16] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:16] [INFO] [LastChance] Threat detected: @Area2D@4894
[18:13:16] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:16] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
[18:13:16] [INFO] [BloodDecal] Blood puddle created at (305.8466, 1244.58) (added to group)
[18:13:16] [INFO] [BloodDecal] Blood puddle created at (339.3712, 1178.105) (added to group)
[18:13:16] [INFO] [BloodDecal] Blood puddle created at (350.6409, 1186.537) (added to group)
[18:13:16] [INFO] [BloodDecal] Blood puddle created at (280.2134, 1267.397) (added to group)
[18:13:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(373.0425, 758.8986), source=ENEMY (Enemy2), range=1469, listeners=10
[18:13:16] [ENEMY] [Enemy1] Heard gunshot at (373.0425, 758.8986), source_type=1, intensity=0.40, distance=79
[18:13:16] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[18:13:16] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
[18:13:16] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
[18:13:16] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:16] [INFO] [Player] Spawning blood effect at (321.06464, 1307.4093), dir=(1, 0), lethal=False (C#)
[18:13:16] [INFO] [ImpactEffects] spawn_blood_effect called at (321.0646, 1307.409), dir=(1, 0), lethal=false
[18:13:16] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:16] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:16] [INFO] [ImpactEffects] Blood effect spawned at (321.0646, 1307.409) (scale=1)
[18:13:16] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 4.0
[18:13:16] [INFO] [LastChance] Player health updated (C# Damaged): 4.0
[18:13:16] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[18:13:16] [INFO] [BloodyFeet:Enemy1] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[18:13:16] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 1/3 -> 0/3
[18:13:16] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[18:13:16] [INFO] [ImpactEffects] spawn_blood_effect called at (454.7414, 854.4591), dir=(0.536396, -0.843966), lethal=true
[18:13:16] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:16] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[18:13:16] [INFO] [ImpactEffects] Blood effect spawned at (454.7414, 854.4591) (scale=0.75)
[18:13:16] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
[18:13:16] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[18:13:16] [INFO] [PowerFantasy] Enemy killed - triggering 300ms last chance effect
[18:13:16] [INFO] [PowerFantasy] Starting power fantasy effect:
[18:13:16] [INFO] [PowerFantasy]   - Time scale: 0.10
[18:13:16] [INFO] [PowerFantasy]   - Duration: 300ms
[18:13:16] [ENEMY] [Enemy4] [AllyDeath] Notified 3 enemies
[18:13:16] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 9)
[18:13:16] [INFO] [DeathAnim] Started - Angle: -57.6 deg, Index: 8
[18:13:16] [ENEMY] [Enemy4] Death animation started with hit direction: (0.536396, -0.843966)
[18:13:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(341.7592, 822.8751), shooter_id=28406846589677, bullet_pos=(452.8399, 1590.6366)
[18:13:16] [INFO] [Bullet] Using shooter_position, distance=775,7555
[18:13:16] [INFO] [Bullet] Distance to wall: 775,7555 (52,82262% of viewport)
[18:13:16] [ENEMY] [Enemy10] Hit taken, damage: 1, health: 4/4 -> 3/4
[18:13:16] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[18:13:16] [INFO] [ImpactEffects] spawn_blood_effect called at (1159.099, 1601.934), dir=(1, 0), lethal=false
[18:13:16] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:16] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:16] [INFO] [ImpactEffects] Blood effect spawned at (1159.099, 1601.934) (scale=1)
[18:13:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(384.5111, 736.0686), source=ENEMY (Enemy2), range=1469, listeners=9
[18:13:16] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[18:13:16] [INFO] [BloodDecal] Blood puddle created at (290.6671, 1280.016) (added to group)
[18:13:16] [INFO] [BloodDecal] Blood puddle created at (405.8522, 1203.512) (added to group)
[18:13:16] [INFO] [BloodDecal] Blood puddle created at (337.4365, 1279.38) (added to group)
[18:13:16] [INFO] [BloodDecal] Blood puddle created at (353.5225, 1267.027) (added to group)
[18:13:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(346.116, 1333.927), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:16] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=4, self=0, below_threshold=5
[18:13:16] [INFO] [ReplayManager] Recording frame 480 (8,0s): player_valid=True, enemies=10
[18:13:16] [ENEMY] [Enemy1] Player ammo empty: false -> true
[18:13:16] [ENEMY] [Enemy2] Player ammo empty: false -> true
[18:13:16] [ENEMY] [Enemy3] Player ammo empty: false -> true
[18:13:16] [ENEMY] [Enemy4] Player ammo empty: false -> true
[18:13:16] [ENEMY] [Enemy5] Player ammo empty: false -> true
[18:13:16] [ENEMY] [Enemy6] Player ammo empty: false -> true
[18:13:16] [ENEMY] [Enemy7] Player ammo empty: false -> true
[18:13:16] [ENEMY] [Enemy8] Player ammo empty: false -> true
[18:13:16] [ENEMY] [Enemy9] Player ammo empty: false -> true
[18:13:16] [ENEMY] [Enemy10] Player ammo empty: false -> true
[18:13:16] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(351.51, 1330.838), source=PLAYER (Player), range=600, listeners=9
[18:13:16] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=7, self=0, below_threshold=2
[18:13:16] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=575), can_see=true
[18:13:16] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) - pursuing to attack (dist=575)
[18:13:16] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=589), can_see=true
[18:13:16] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) - pursuing to attack (dist=589)
[18:13:16] [ENEMY] [Enemy3] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=696), can_see=false
[18:13:16] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1667), can_see=false
[18:13:16] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1825), can_see=false
[18:13:16] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1332), can_see=false
[18:13:16] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1553), can_see=false
[18:13:16] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1762), can_see=false
[18:13:16] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=852), can_see=false
[18:13:16] [INFO] [LastChance] Threat detected: @Area2D@4912
[18:13:16] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:16] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:16] [INFO] [PowerFantasy] Effect duration expired after 303.00 ms
[18:13:16] [INFO] [PowerFantasy] Ending power fantasy effect
[18:13:16] [INFO] [BloodDecal] Blood puddle created at (317.2189, 1251.608) (added to group)
[18:13:16] [INFO] [BloodDecal] Blood puddle created at (332.1973, 1320.432) (added to group)
[18:13:16] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=176.4°, current=89.4°, player=(368,1336), corner_timer=-0.01
[18:13:16] [ENEMY] [Enemy7] PATROL corner check: angle 89.2°
[18:13:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(145.3692, 1061.853), shooter_id=28410554354864, bullet_pos=(1087.149, 295.7931)
[18:13:16] [INFO] [Bullet] Using shooter_position, distance=1214.0009765625
[18:13:16] [INFO] [Bullet] Distance to wall: 1214.0009765625 (82.6635588450928% of viewport)
[18:13:16] [INFO] [Bullet] Distance-based penetration chance: 50.2258480140584%
[18:13:16] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:16] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.2°, current=92.3°, player=(373,1337), corner_timer=0.30
[18:13:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(145.3692, 1022.187), shooter_id=28410554354864, bullet_pos=(1364.889, 212.2088)
[18:13:16] [INFO] [Bullet] Using shooter_position, distance=1463.9990234375
[18:13:16] [INFO] [Bullet] Distance to wall: 1463.9990234375 (99.686385562684% of viewport)
[18:13:16] [INFO] [Bullet] Distance-based penetration chance: 30.3658835102021%
[18:13:16] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:16] [INFO] [BloodDecal] Blood puddle created at (402.0643, 1323.492) (added to group)
[18:13:17] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(389.7642, 1338.071), source=PLAYER (Player), range=600, listeners=9
[18:13:17] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=7, self=0, below_threshold=2
[18:13:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(341.7592, 822.8751), shooter_id=28406846589677, bullet_pos=(604.70276, 1404.9202)
[18:13:17] [INFO] [Bullet] Using shooter_position, distance=638,6828
[18:13:17] [INFO] [Bullet] Distance to wall: 638,6828 (43,489086% of viewport)
[18:13:17] [INFO] [Bullet] Distance-based penetration chance: 95,929405%
[18:13:17] [INFO] [Bullet] Starting wall penetration at (604.70276, 1404.9202)
[18:13:17] [INFO] [Bullet] Raycast backward hit penetrating body at distance 4,8934646
[18:13:17] [ENEMY] [Enemy1] ROT_CHANGE: P1:visible -> P3:corner, state=RETREATING, target=22.7°, current=101.4°, player=(395,1338), corner_timer=0.18
[18:13:17] [INFO] [Bullet] Raycast backward hit penetrating body at distance 26,6437
[18:13:17] [INFO] [BloodDecal] Blood puddle created at (381.4957, 1321.794) (added to group)
[18:13:17] [INFO] [BloodDecal] Blood puddle created at (408.0462, 1300.936) (added to group)
[18:13:17] [INFO] [Bullet] Body exited signal received for penetrating body
[18:13:17] [INFO] [Bullet] Exiting penetration at (635.4045, 1367.3741) after traveling 43,500523 pixels through wall
[18:13:17] [INFO] [Bullet] Damage multiplier after penetration: 0,05625
[18:13:17] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:17] [INFO] [BloodDecal] Blood puddle created at (399.5955, 1349.863) (added to group)
[18:13:17] [INFO] [BloodDecal] Blood puddle created at (494.5514, 827.0804) (added to group)
[18:13:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(387.3565, 803.7718), shooter_id=28406846589677, bullet_pos=(277.5813, 1410.5892)
[18:13:17] [INFO] [Bullet] Using shooter_position, distance=616,6669
[18:13:17] [INFO] [Bullet] Distance to wall: 616,6669 (41,989983% of viewport)
[18:13:17] [INFO] [Bullet] Distance-based penetration chance: 97,67836%
[18:13:17] [INFO] [Bullet] Starting wall penetration at (277.5813, 1410.5892)
[18:13:17] [INFO] [Bullet] Raycast backward hit penetrating body at distance 45,233086
[18:13:17] [INFO] [Bullet] Body exited signal received for penetrating body
[18:13:17] [INFO] [Bullet] Exiting penetration at (269.274, 1456.5106) after traveling 41,66667 pixels through wall
[18:13:17] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[18:13:17] [INFO] [BloodDecal] Blood puddle created at (395.262, 1338.092) (added to group)
[18:13:17] [INFO] [BloodDecal] Blood puddle created at (418.3032, 1361.226) (added to group)
[18:13:17] [INFO] [BloodDecal] Blood puddle created at (485.4314, 797.8337) (added to group)
[18:13:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(301.6191, 1293.964), shooter_id=28410554354864, bullet_pos=(497.1849, 836.6967)
[18:13:17] [INFO] [Bullet] Using shooter_position, distance=497.332305908203
[18:13:17] [INFO] [Bullet] Distance to wall: 497.332305908203 (33.8642712227604% of viewport)
[18:13:17] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:17] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:17] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
[18:13:17] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(439.2642, 1338.071), source=PLAYER (Player), range=600, listeners=9
[18:13:17] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=7, self=0, below_threshold=2
[18:13:17] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
[18:13:17] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
[18:13:17] [INFO] [BloodyFeet:Enemy2] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[18:13:17] [INFO] [BloodDecal] Blood puddle created at (488.0854, 838.7858) (added to group)
[18:13:17] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
[18:13:17] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[18:13:17] [INFO] [BloodDecal] Blood puddle created at (421.1352, 1387.562) (added to group)
[18:13:17] [INFO] [BloodDecal] Blood puddle created at (390.4682, 1351.279) (added to group)
[18:13:17] [INFO] [BloodDecal] Blood puddle created at (443.7946, 1333.91) (added to group)
[18:13:17] [INFO] [BloodDecal] Blood puddle created at (383.0503, 1356.515) (added to group)
[18:13:17] [INFO] [BloodDecal] Blood puddle created at (433.4377, 1331.948) (added to group)
[18:13:17] [INFO] [BloodDecal] Blood puddle created at (498.4012, 757.1052) (added to group)
[18:13:17] [INFO] [BloodDecal] Blood puddle created at (519.253, 765.4861) (added to group)
[18:13:17] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=176.6°, current=89.2°, player=(477,1338), corner_timer=-0.02
[18:13:17] [ENEMY] [Enemy7] PATROL corner check: angle 89.3°
[18:13:17] [ENEMY] [Enemy4] Ragdoll activated
[18:13:17] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[18:13:17] [INFO] [BloodDecal] Blood puddle created at (478.1366, 1458.243) (added to group)
[18:13:17] [INFO] [BloodDecal] Blood puddle created at (427.4026, 1395.884) (added to group)
[18:13:17] [INFO] [BloodDecal] Blood puddle created at (1295.88, 1608.483) (added to group)
[18:13:17] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.3°, current=92.0°, player=(483,1338), corner_timer=0.30
[18:13:17] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=563), can_see=false
[18:13:17] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=512), can_see=true
[18:13:17] [ENEMY] [Enemy3] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=683), can_see=false
[18:13:17] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1559), can_see=false
[18:13:17] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1705), can_see=false
[18:13:17] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1200), can_see=false
[18:13:17] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1410), can_see=false
[18:13:17] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1620), can_see=false
[18:13:17] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=715), can_see=false
[18:13:17] [INFO] [BloodDecal] Blood puddle created at (490.141, 1391.835) (added to group)
[18:13:17] [INFO] [BloodDecal] Blood puddle created at (464.4794, 835.2245) (added to group)
[18:13:17] [ENEMY] [Enemy1] Hit taken, damage: 1, health: 2/2 -> 1/2
[18:13:17] [ENEMY] [Enemy1] ImpactEffectsManager found, calling spawn_blood_effect
[18:13:17] [INFO] [ImpactEffects] spawn_blood_effect called at (525.6151, 776.0541), dir=(0.270051, -0.962846), lethal=false
[18:13:17] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:17] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:17] [INFO] [ImpactEffects] Blood effect spawned at (525.6151, 776.0541) (scale=0.5)
[18:13:17] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:17] [INFO] [BloodDecal] Blood puddle created at (489.2069, 817.5925) (added to group)
[18:13:17] [INFO] [BloodDecal] Blood puddle created at (487.3251, 842.5455) (added to group)
[18:13:17] [INFO] [BloodDecal] Blood puddle created at (480.0971, 850.7366) (added to group)
[18:13:17] [INFO] [BloodDecal] Blood puddle created at (1328.681, 1622.339) (added to group)
[18:13:17] [INFO] [BloodDecal] Blood puddle created at (464.4362, 1443.354) (added to group)
[18:13:17] [INFO] [BloodDecal] Blood puddle created at (1383.158, 1635.45) (added to group)
[18:13:17] [INFO] [ReplayManager] Recording frame 540 (8,7s): player_valid=True, enemies=10
[18:13:17] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=176.9°, current=89.3°, player=(587,1338), corner_timer=-0.02
[18:13:17] [ENEMY] [Enemy7] PATROL corner check: angle 89.3°
[18:13:17] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P3:corner, state=RETREATING, target=176.6°, current=75.5°, player=(593,1338), corner_timer=0.03
[18:13:17] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.3°, current=92.1°, player=(593,1338), corner_timer=0.30
[18:13:17] [INFO] [BloodDecal] Blood puddle created at (532.6871, 743.3966) (added to group)
[18:13:17] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[18:13:17] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[18:13:17] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:17] [INFO] [BloodDecal] Blood puddle created at (584.9784, 729.9478) (added to group)
[18:13:17] [INFO] [BloodDecal] Blood puddle created at (542.4945, 744.7721) (added to group)
[18:13:17] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=556), can_see=false
[18:13:17] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=484), can_see=false
[18:13:17] [ENEMY] [Enemy3] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=684), can_see=false
[18:13:17] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1429), can_see=false
[18:13:17] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1564), can_see=false
[18:13:17] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1049), can_see=false
[18:13:17] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1258), can_see=false
[18:13:17] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1469), can_see=false
[18:13:17] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=584), can_see=false
[18:13:17] [INFO] [BloodDecal] Blood puddle created at (580.0281, 761.1168) (added to group)
[18:13:17] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.0°, current=89.3°, player=(661,1295), corner_timer=-0.02
[18:13:17] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:17] [INFO] [BloodDecal] Blood puddle created at (551.312, 674.5743) (added to group)
[18:13:17] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.2°, player=(662,1291), corner_timer=0.30
[18:13:17] [INFO] [BloodDecal] Blood puddle created at (553.308, 686.0101) (added to group)
[18:13:17] [INFO] [BloodDecal] Blood puddle created at (507.8834, 699.4025) (added to group)
[18:13:18] [INFO] [BloodDecal] Blood puddle created at (601.1914, 752.818) (added to group)
[18:13:18] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[18:13:18] [ENEMY] [Enemy1] Player reloading: false -> true
[18:13:18] [ENEMY] [Enemy2] Player reloading: false -> true
[18:13:18] [ENEMY] [Enemy3] Player reloading: false -> true
[18:13:18] [ENEMY] [Enemy4] Player reloading: false -> true
[18:13:18] [ENEMY] [Enemy5] Player reloading: false -> true
[18:13:18] [ENEMY] [Enemy6] Player reloading: false -> true
[18:13:18] [ENEMY] [Enemy7] Player reloading: false -> true
[18:13:18] [ENEMY] [Enemy8] Player reloading: false -> true
[18:13:18] [ENEMY] [Enemy9] Player reloading: false -> true
[18:13:18] [ENEMY] [Enemy10] Player reloading: false -> true
[18:13:18] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(664.6655, 1254.584), source=PLAYER (Player), range=900, listeners=9
[18:13:18] [ENEMY] [Enemy1] Heard player RELOAD at (664.6655, 1254.584), intensity=0.01, distance=498
[18:13:18] [ENEMY] [Enemy1] Vulnerability sound triggered pursuit - transitioning from SUPPRESSED to PURSUING
[18:13:18] [ENEMY] [Enemy2] Heard player RELOAD at (664.6655, 1254.584), intensity=0.01, distance=432
[18:13:18] [ENEMY] [Enemy2] Vulnerability sound triggered pursuit - transitioning from SUPPRESSED to PURSUING
[18:13:18] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=2
[18:13:18] [ENEMY] [Enemy1] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=73.8°, current=22.7°, player=(664,1254), corner_timer=0.18
[18:13:18] [ENEMY] [Enemy1] Pursuing vulnerability sound at (664.6655, 1254.584), distance=498
[18:13:18] [ENEMY] [Enemy2] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=63.3°, current=130.2°, player=(664,1254), corner_timer=0.03
[18:13:18] [ENEMY] [Enemy2] Pursuing vulnerability sound at (664.6655, 1254.584), distance=432
[18:13:18] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:18] [INFO] [BloodDecal] Blood puddle created at (657.922, 704.196) (added to group)
[18:13:18] [INFO] [BloodDecal] Blood puddle created at (631.5261, 698.6061) (added to group)
[18:13:18] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[18:13:18] [ENEMY] [Enemy1] Player reloading: true -> false
[18:13:18] [ENEMY] [Enemy2] Player reloading: true -> false
[18:13:18] [ENEMY] [Enemy3] Player reloading: true -> false
[18:13:18] [ENEMY] [Enemy4] Player reloading: true -> false
[18:13:18] [ENEMY] [Enemy5] Player reloading: true -> false
[18:13:18] [ENEMY] [Enemy6] Player reloading: true -> false
[18:13:18] [ENEMY] [Enemy7] Player reloading: true -> false
[18:13:18] [ENEMY] [Enemy8] Player reloading: true -> false
[18:13:18] [ENEMY] [Enemy9] Player reloading: true -> false
[18:13:18] [ENEMY] [Enemy10] Player reloading: true -> false
[18:13:18] [ENEMY] [Enemy1] Player ammo empty: true -> false
[18:13:18] [ENEMY] [Enemy2] Player ammo empty: true -> false
[18:13:18] [ENEMY] [Enemy3] Player ammo empty: true -> false
[18:13:18] [ENEMY] [Enemy4] Player ammo empty: true -> false
[18:13:18] [ENEMY] [Enemy5] Player ammo empty: true -> false
[18:13:18] [ENEMY] [Enemy6] Player ammo empty: true -> false
[18:13:18] [ENEMY] [Enemy7] Player ammo empty: true -> false
[18:13:18] [ENEMY] [Enemy8] Player ammo empty: true -> false
[18:13:18] [ENEMY] [Enemy9] Player ammo empty: true -> false
[18:13:18] [ENEMY] [Enemy10] Player ammo empty: true -> false
[18:13:18] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[18:13:18] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.1°, current=89.4°, player=(664,1188), corner_timer=-0.02
[18:13:18] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:18] [ENEMY] [Enemy4] Death animation completed
[18:13:18] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.2°, player=(664,1183), corner_timer=0.30
[18:13:18] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:18] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=33.4°, current=72.4°, player=(664,1122), corner_timer=0.03
[18:13:18] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[18:13:18] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[18:13:18] [INFO] [BloodyFeet:Player] Blood ran out - no more footprints
[18:13:18] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[18:13:18] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P3:corner, state=RETREATING, target=176.6°, current=8.4°, player=(664,1095), corner_timer=0.03
[18:13:18] [INFO] [ReplayManager] Recording frame 600 (9,7s): player_valid=True, enemies=10
[18:13:18] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.1°, current=89.4°, player=(664,1078), corner_timer=-0.02
[18:13:18] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:18] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[18:13:18] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.2°, player=(664,1073), corner_timer=0.30
[18:13:18] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[18:13:18] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:18] [ENEMY] [Enemy3] State: SUPPRESSED -> IN_COVER
[18:13:18] [ENEMY] [Enemy3] State: IN_COVER -> PURSUING
[18:13:18] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=PURSUING, target=65.9°, current=132.9°, player=(653,1040), corner_timer=0.00
[18:13:18] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(645,1044), corner_timer=-0.02
[18:13:18] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:18] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(643,1046), corner_timer=0.30
[18:13:19] [ENEMY] [Enemy1] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=14.8°, current=15.3°, player=(636,1056), corner_timer=0.18
[18:13:19] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
[18:13:19] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
[18:13:19] [ENEMY] [Enemy1] ROT_CHANGE: P1:visible -> P3:corner, state=RETREATING, target=22.7°, current=-92.8°, player=(632,1066), corner_timer=0.18
[18:13:19] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:19] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[18:13:19] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[18:13:19] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[18:13:19] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[18:13:19] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(630,1128), corner_timer=-0.02
[18:13:19] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:19] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(630,1133), corner_timer=0.30
[18:13:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(630.0543, 1156.284), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=5
[18:13:19] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[18:13:19] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[18:13:19] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:19] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
[18:13:19] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[18:13:19] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
[18:13:19] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[18:13:19] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[18:13:19] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
[18:13:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(630.0543, 1211.284), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=5
[18:13:19] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[18:13:19] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
[18:13:19] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
[18:13:19] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[18:13:19] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[18:13:19] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
[18:13:19] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[18:13:19] [INFO] [ReplayManager] Recording frame 660 (10,7s): player_valid=True, enemies=10
[18:13:19] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(625,1236), corner_timer=-0.02
[18:13:19] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:19] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
[18:13:19] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(623,1241), corner_timer=0.30
[18:13:19] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
[18:13:19] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
[18:13:19] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[18:13:19] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[18:13:19] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[18:13:19] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(591.8371, 1283.1), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=5
[18:13:19] [ENEMY] [Enemy2] ROT_CHANGE: P3:corner -> P1:visible, state=SEEKING_COVER, target=77.7°, current=114.7°, player=(564,1285), corner_timer=0.03
[18:13:19] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(547,1285), corner_timer=-0.02
[18:13:19] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:19] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(542,1285), corner_timer=0.30
[18:13:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(536.8746, 1291.933), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:19] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=4
[18:13:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(630.0543, 1156.284), shooter_id=28410554354864, bullet_pos=(62.44967, 805.3445)
[18:13:19] [INFO] [Bullet] Using shooter_position, distance=667.333312988281
[18:13:19] [INFO] [Bullet] Distance to wall: 667.333312988281 (45.4399523991302% of viewport)
[18:13:19] [INFO] [Bullet] Distance-based penetration chance: 93.6533888676815%
[18:13:19] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:20] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(482.0022, 1292.241), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:20] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=0, below_threshold=6
[18:13:20] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P3:corner, state=SEEKING_COVER, target=176.6°, current=-139.0°, player=(482,1286), corner_timer=0.03
[18:13:20] [ENEMY] [Enemy1] ROT_CHANGE: P3:corner -> P1:visible, state=SEEKING_COVER, target=89.3°, current=126.7°, player=(476,1286), corner_timer=0.18
[18:13:20] [ENEMY] [Enemy1] ROT_CHANGE: P1:visible -> P3:corner, state=SEEKING_COVER, target=22.7°, current=145.8°, player=(465,1287), corner_timer=0.18
[18:13:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(630.0543, 1211.284), shooter_id=28410554354864, bullet_pos=(64.15771, 718.0692)
[18:13:20] [INFO] [Bullet] Using shooter_position, distance=750.666442871094
[18:13:20] [INFO] [Bullet] Distance to wall: 750.666442871094 (51.1142584489647% of viewport)
[18:13:20] [INFO] [Bullet] Distance-based penetration chance: 87.0333651428745%
[18:13:20] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:20] [ENEMY] [Enemy2] ROT_CHANGE: P3:corner -> P1:visible, state=SEEKING_COVER, target=93.7°, current=125.9°, player=(455,1288), corner_timer=0.03
[18:13:20] [ENEMY] [Enemy1] ROT_CHANGE: P3:corner -> P1:visible, state=SEEKING_COVER, target=94.6°, current=70.4°, player=(450,1289), corner_timer=0.18
[18:13:20] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P3:corner, state=SEEKING_COVER, target=176.6°, current=-172.4°, player=(450,1289), corner_timer=0.03
[18:13:20] [ENEMY] [Enemy2] ROT_CHANGE: P3:corner -> P1:visible, state=SEEKING_COVER, target=95.8°, current=136.2°, player=(445,1290), corner_timer=0.03
[18:13:20] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[18:13:20] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(440,1291), corner_timer=-0.02
[18:13:20] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:20] [ENEMY] [Enemy1] ROT_CHANGE: P1:visible -> P3:corner, state=SEEKING_COVER, target=22.7°, current=99.3°, player=(435,1293), corner_timer=0.18
[18:13:20] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P3:corner, state=SEEKING_COVER, target=176.6°, current=135.5°, player=(435,1293), corner_timer=0.03
[18:13:20] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(435,1293), corner_timer=0.30
[18:13:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(430.9566, 1301.787), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:20] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=4, self=0, below_threshold=5
[18:13:20] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
[18:13:20] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[18:13:20] [ENEMY] [Enemy1] State: IN_COVER -> PURSUING
[18:13:20] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
[18:13:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(591.8371, 1283.1), shooter_id=28410554354864, bullet_pos=(386.833, 700.8004)
[18:13:20] [INFO] [Bullet] Using shooter_position, distance=617.332397460938
[18:13:20] [INFO] [Bullet] Distance to wall: 617.332397460938 (42.0352981172971% of viewport)
[18:13:20] [INFO] [Bullet] Distance-based penetration chance: 97.6254855298201%
[18:13:20] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:20] [ENEMY] [Enemy1] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=101.9°, current=94.8°, player=(414,1306), corner_timer=0.18
[18:13:20] [ENEMY] [Enemy2] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=102.0°, current=156.2°, player=(414,1306), corner_timer=0.03
[18:13:20] [ENEMY] [Enemy3] FLANKING started: target=(249.6237, 1192.27), side=left, pos=(480.7416, 655.2802)
[18:13:20] [ENEMY] [Enemy3] State: PURSUING -> FLANKING
[18:13:20] [ENEMY] [Enemy1] State: PURSUING -> RETREATING
[18:13:20] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
[18:13:20] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:20] [ENEMY] [Enemy1] ROT_CHANGE: P2:combat_state -> P3:corner, state=RETREATING, target=22.7°, current=102.4°, player=(405,1316), corner_timer=0.18
[18:13:20] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
[18:13:20] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P3:corner, state=RETREATING, target=176.6°, current=147.6°, player=(405,1316), corner_timer=0.03
[18:13:20] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[18:13:20] [ENEMY] [Enemy3] FLANKING corner check: angle -104.9°
[18:13:20] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
[18:13:20] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[18:13:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(398.9204, 1333.809), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:20] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=4, self=0, below_threshold=5
[18:13:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(482.0022, 1292.241), shooter_id=28410554354864, bullet_pos=(497.0631, 891.8567)
[18:13:20] [INFO] [Bullet] Using shooter_position, distance=400.667083740234
[18:13:20] [INFO] [Bullet] Distance to wall: 400.667083740234 (27.2821584936736% of viewport)
[18:13:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:20] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(536.8746, 1291.933), shooter_id=28410554354864, bullet_pos=(452.6387, 714.0391)
[18:13:20] [INFO] [Bullet] Using shooter_position, distance=584.00048828125
[18:13:20] [INFO] [Bullet] Distance to wall: 584.00048828125 (39.7656671292757% of viewport)
[18:13:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:20] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:20] [INFO] [BloodyFeet:Enemy3] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[18:13:20] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=FLANKING, target=100.5°, current=103.1°, player=(394,1349), corner_timer=0.17
[18:13:20] [ENEMY] [Enemy3] State: FLANKING -> COMBAT
[18:13:20] [INFO] [ReplayManager] Recording frame 720 (11,7s): player_valid=True, enemies=10
[18:13:20] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(396,1357), corner_timer=-0.02
[18:13:20] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:20] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=100.6°, current=83.5°, player=(397,1361), corner_timer=0.15
[18:13:20] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(397,1361), corner_timer=0.30
[18:13:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(398.985, 1370.946), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:20] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=4, self=0, below_threshold=5
[18:13:20] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[18:13:20] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P3:corner, state=RETREATING, target=-104.9°, current=97.4°, player=(407,1374), corner_timer=0.15
[18:13:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(430.9566, 1301.787), shooter_id=28410554354864, bullet_pos=(499.3282, 856.3372)
[18:13:20] [INFO] [Bullet] Using shooter_position, distance=450.666900634766
[18:13:20] [INFO] [Bullet] Distance to wall: 450.666900634766 (30.6867379675783% of viewport)
[18:13:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:20] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:20] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[18:13:20] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[18:13:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(398.9204, 1333.809), shooter_id=28410554354864, bullet_pos=(498.418, 997.5538)
[18:13:20] [INFO] [Bullet] Using shooter_position, distance=350.666564941406
[18:13:20] [INFO] [Bullet] Distance to wall: 350.666564941406 (23.8775312258146% of viewport)
[18:13:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:20] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(398.9204, 1333.809), shooter_id=28410554354864, bullet_pos=(498.418, 997.5538)
[18:13:20] [INFO] [Bullet] Using shooter_position, distance=350.666564941406
[18:13:20] [INFO] [Bullet] Distance to wall: 350.666564941406 (23.8775312258146% of viewport)
[18:13:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:20] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(431.4904, 1391.268), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:20] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=4, self=0, below_threshold=5
[18:13:20] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(453,1406), corner_timer=-0.02
[18:13:20] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:20] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(457,1410), corner_timer=0.30
[18:13:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(398.985, 1370.946), shooter_id=28410554354864, bullet_pos=(499.9299, 1000.452)
[18:13:20] [INFO] [Bullet] Using shooter_position, distance=383.999237060547
[18:13:20] [INFO] [Bullet] Distance to wall: 383.999237060547 (26.1472141637862% of viewport)
[18:13:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(398.985, 1370.946), shooter_id=28410554354864, bullet_pos=(499.216, 995.5031)
[18:13:20] [INFO] [Bullet] Using shooter_position, distance=388.591400146484
[18:13:20] [INFO] [Bullet] Distance to wall: 388.591400146484 (26.459902992551% of viewport)
[18:13:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:20] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:21] [ENEMY] [Enemy1] Player ammo empty: false -> true
[18:13:21] [ENEMY] [Enemy2] Player ammo empty: false -> true
[18:13:21] [ENEMY] [Enemy3] Player ammo empty: false -> true
[18:13:21] [ENEMY] [Enemy5] Player ammo empty: false -> true
[18:13:21] [ENEMY] [Enemy6] Player ammo empty: false -> true
[18:13:21] [ENEMY] [Enemy7] Player ammo empty: false -> true
[18:13:21] [ENEMY] [Enemy8] Player ammo empty: false -> true
[18:13:21] [ENEMY] [Enemy9] Player ammo empty: false -> true
[18:13:21] [ENEMY] [Enemy10] Player ammo empty: false -> true
[18:13:21] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(475.3694, 1430.116), source=PLAYER (Player), range=600, listeners=9
[18:13:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=9, self=0, below_threshold=0
[18:13:21] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=670), can_see=false
[18:13:21] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=665), can_see=false
[18:13:21] [ENEMY] [Enemy3] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=732), can_see=false
[18:13:21] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1633), can_see=false
[18:13:21] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1771), can_see=false
[18:13:21] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1254), can_see=false
[18:13:21] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1425), can_see=false
[18:13:21] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1629), can_see=false
[18:13:21] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=705), can_see=false
[18:13:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(430.9566, 1301.787), shooter_id=28410554354864, bullet_pos=(492.9595, 711.4774)
[18:13:21] [INFO] [Bullet] Using shooter_position, distance=593.557312011719
[18:13:21] [INFO] [Bullet] Distance to wall: 593.557312011719 (40.4164088305326% of viewport)
[18:13:21] [INFO] [Bullet] Distance-based penetration chance: 99.514189697712%
[18:13:21] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:21] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:21] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(481,1486), corner_timer=-0.02
[18:13:21] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:21] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(479,1490), corner_timer=0.30
[18:13:21] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:21] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[18:13:21] [ENEMY] [Enemy1] Player reloading: false -> true
[18:13:21] [ENEMY] [Enemy2] Player reloading: false -> true
[18:13:21] [ENEMY] [Enemy3] Player reloading: false -> true
[18:13:21] [ENEMY] [Enemy5] Player reloading: false -> true
[18:13:21] [ENEMY] [Enemy6] Player reloading: false -> true
[18:13:21] [ENEMY] [Enemy7] Player reloading: false -> true
[18:13:21] [ENEMY] [Enemy8] Player reloading: false -> true
[18:13:21] [ENEMY] [Enemy9] Player reloading: false -> true
[18:13:21] [ENEMY] [Enemy10] Player reloading: false -> true
[18:13:21] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(447.9084, 1512.41), source=PLAYER (Player), range=900, listeners=9
[18:13:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=5, self=0, below_threshold=4
[18:13:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(431.4904, 1391.268), shooter_id=28410554354864, bullet_pos=(458.2313, 707.7909)
[18:13:21] [INFO] [Bullet] Using shooter_position, distance=684.000183105469
[18:13:21] [INFO] [Bullet] Distance to wall: 684.000183105469 (46.5748302330812% of viewport)
[18:13:21] [INFO] [Bullet] Distance-based penetration chance: 92.329364728072%
[18:13:21] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:21] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=761), can_see=false
[18:13:21] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=false (dist=756), can_see=false
[18:13:21] [ENEMY] [Enemy3] Player vulnerable (reloading) but cannot attack: close=false (dist=823), can_see=false
[18:13:21] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1733), can_see=false
[18:13:21] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1866), can_see=false
[18:13:21] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=1343), can_see=false
[18:13:21] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1484), can_see=false
[18:13:21] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1683), can_see=false
[18:13:21] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=747), can_see=false
[18:13:21] [INFO] [ReplayManager] Recording frame 780 (12,7s): player_valid=True, enemies=10
[18:13:21] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(400,1514), corner_timer=-0.02
[18:13:21] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:21] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(395,1514), corner_timer=0.30
[18:13:21] [INFO] [Player.Reload.Anim] LeftArm: pos=(-3.9394703, 2.010645), target=(-4, 2), base=(16, 6)
[18:13:21] [INFO] [Player.Reload.Anim] RightArm: pos=(3.9926953, 6), target=(4, 6), base=(4, 6)
[18:13:21] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[18:13:21] [ENEMY] [Enemy1] Player reloading: true -> false
[18:13:21] [ENEMY] [Enemy2] Player reloading: true -> false
[18:13:21] [ENEMY] [Enemy3] Player reloading: true -> false
[18:13:21] [ENEMY] [Enemy5] Player reloading: true -> false
[18:13:21] [ENEMY] [Enemy6] Player reloading: true -> false
[18:13:21] [ENEMY] [Enemy7] Player reloading: true -> false
[18:13:21] [ENEMY] [Enemy8] Player reloading: true -> false
[18:13:21] [ENEMY] [Enemy9] Player reloading: true -> false
[18:13:21] [ENEMY] [Enemy10] Player reloading: true -> false
[18:13:21] [ENEMY] [Enemy1] Player ammo empty: true -> false
[18:13:21] [ENEMY] [Enemy2] Player ammo empty: true -> false
[18:13:21] [ENEMY] [Enemy3] Player ammo empty: true -> false
[18:13:21] [ENEMY] [Enemy5] Player ammo empty: true -> false
[18:13:21] [ENEMY] [Enemy6] Player ammo empty: true -> false
[18:13:21] [ENEMY] [Enemy7] Player ammo empty: true -> false
[18:13:21] [ENEMY] [Enemy8] Player ammo empty: true -> false
[18:13:21] [ENEMY] [Enemy9] Player ammo empty: true -> false
[18:13:21] [ENEMY] [Enemy10] Player ammo empty: true -> false
[18:13:21] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[18:13:21] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:21] [INFO] [ScoreManager] Combo ended at 1. Max combo: 1
[18:13:21] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[18:13:21] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(290,1514), corner_timer=-0.02
[18:13:21] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:21] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(285,1514), corner_timer=0.30
[18:13:22] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:22] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(188,1497), corner_timer=-0.02
[18:13:22] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:22] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(183,1494), corner_timer=0.30
[18:13:22] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
[18:13:22] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
[18:13:22] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[18:13:22] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:22] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
[18:13:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(132.5708, 1465.198), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:22] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=5, self=0, below_threshold=4
[18:13:22] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
[18:13:22] [ENEMY] [Enemy2] ROT_CHANGE: P3:corner -> P1:visible, state=SEEKING_COVER, target=119.4°, current=101.1°, player=(127,1458), corner_timer=0.03
[18:13:22] [INFO] [BloodyFeet:Player] Blood ran out - no more footprints
[18:13:22] [INFO] [ReplayManager] Recording frame 840 (13,7s): player_valid=True, enemies=10
[18:13:22] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(96,1457), corner_timer=-0.02
[18:13:22] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:22] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(91,1458), corner_timer=0.30
[18:13:22] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
[18:13:22] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[18:13:22] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P3:corner, state=SEEKING_COVER, target=176.6°, current=-167.0°, player=(80,1473), corner_timer=0.03
[18:13:22] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.06512, 1481.927), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:22] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=5, self=0, below_threshold=4
[18:13:22] [ENEMY] [Enemy2] ROT_CHANGE: P3:corner -> P1:visible, state=SEEKING_COVER, target=119.2°, current=148.4°, player=(80,1475), corner_timer=0.03
[18:13:22] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P3:corner, state=SEEKING_COVER, target=176.6°, current=126.0°, player=(80,1484), corner_timer=0.03
[18:13:22] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[18:13:22] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[18:13:22] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(80,1511), corner_timer=-0.02
[18:13:22] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:22] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(80,1516), corner_timer=0.30
[18:13:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.06543, 1532.652), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:22] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=5, self=0, below_threshold=4
[18:13:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(132.5708, 1465.198), shooter_id=28410554354864, bullet_pos=(507.3624, 995.802)
[18:13:23] [INFO] [Bullet] Using shooter_position, distance=600.667053222656
[18:13:23] [INFO] [Bullet] Distance to wall: 600.667053222656 (40.9005241832466% of viewport)
[18:13:23] [INFO] [Bullet] Distance-based penetration chance: 98.9493884528789%
[18:13:23] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(132.5708, 1465.198), shooter_id=28410554354864, bullet_pos=(507.3624, 995.802)
[18:13:23] [INFO] [Bullet] Using shooter_position, distance=600.667053222656
[18:13:23] [INFO] [Bullet] Distance to wall: 600.667053222656 (40.9005241832466% of viewport)
[18:13:23] [INFO] [Bullet] Distance-based penetration chance: 98.9493884528789%
[18:13:23] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:23] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.06543, 1604.152), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:23] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=5, self=0, below_threshold=4
[18:13:23] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(80,1620), corner_timer=-0.02
[18:13:23] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:23] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(80,1625), corner_timer=0.30
[18:13:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.06543, 1651.985), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:23] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=5, self=0, below_threshold=4
[18:13:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.06512, 1481.927), shooter_id=28410554354864, bullet_pos=(512.3485, 1018.152)
[18:13:23] [INFO] [Bullet] Using shooter_position, distance=634.000122070313
[18:13:23] [INFO] [Bullet] Distance to wall: 634.000122070313 (43.1702341351924% of viewport)
[18:13:23] [INFO] [Bullet] Distance-based penetration chance: 96.3013935089422%
[18:13:23] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.06543, 1651.985), shooter_id=28410554354864, bullet_pos=(106.4363, 1608.722)
[18:13:23] [INFO] [Bullet] Using shooter_position, distance=50.6665916442871
[18:13:23] [INFO] [Bullet] Distance to wall: 50.6665916442871 (3.44998139270623% of viewport)
[18:13:23] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[18:13:23] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.06543, 1604.152), shooter_id=28410554354864, bullet_pos=(204.4253, 1405.933)
[18:13:23] [INFO] [Bullet] Using shooter_position, distance=234.000335693359
[18:13:23] [INFO] [Bullet] Distance to wall: 234.000335693359 (15.9335131460363% of viewport)
[18:13:23] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:23] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:23] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:23] [INFO] [ReplayManager] Recording frame 900 (14,7s): player_valid=True, enemies=10
[18:13:23] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(80,1678), corner_timer=-0.02
[18:13:23] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.06543, 1532.652), shooter_id=28410554354864, bullet_pos=(497.6528, 1012.117)
[18:13:23] [INFO] [Bullet] Using shooter_position, distance=667.334533691406
[18:13:23] [INFO] [Bullet] Distance to wall: 667.334533691406 (45.4400355190506% of viewport)
[18:13:23] [INFO] [Bullet] Distance-based penetration chance: 93.6532918944409%
[18:13:23] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:23] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(80,1677), corner_timer=0.30
[18:13:23] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:23] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(80,1608), corner_timer=-0.02
[18:13:23] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:23] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(80,1602), corner_timer=0.30
[18:13:24] [ENEMY] [Enemy1] State: SUPPRESSED -> IN_COVER
[18:13:24] [ENEMY] [Enemy2] State: SUPPRESSED -> IN_COVER
[18:13:24] [ENEMY] [Enemy3] State: SUPPRESSED -> IN_COVER
[18:13:24] [ENEMY] [Enemy1] State: IN_COVER -> PURSUING
[18:13:24] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
[18:13:24] [ENEMY] [Enemy3] State: IN_COVER -> PURSUING
[18:13:24] [ENEMY] [Enemy1] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=120.3°, current=22.7°, player=(80,1569), corner_timer=0.18
[18:13:24] [ENEMY] [Enemy2] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=114.5°, current=176.6°, player=(80,1569), corner_timer=0.03
[18:13:24] [ENEMY] [Enemy3] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=120.5°, current=-104.9°, player=(80,1569), corner_timer=0.15
[18:13:24] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(84.68487, 1544.731), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:24] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=5, self=0, below_threshold=4
[18:13:24] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(104,1508), corner_timer=-0.02
[18:13:24] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:24] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(107,1504), corner_timer=0.30
[18:13:24] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(175.9411, 1462.012), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:24] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=5, self=0, below_threshold=4
[18:13:24] [INFO] [ReplayManager] Recording frame 960 (15,7s): player_valid=True, enemies=10
[18:13:24] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(191,1454), corner_timer=-0.02
[18:13:24] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:24] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(197,1454), corner_timer=0.30
[18:13:24] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(262.5525, 1458.659), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:24] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=4, self=0, below_threshold=5
[18:13:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(262.5525, 1458.659), shooter_id=28410554354864, bullet_pos=(257.4142, 1408.254)
[18:13:24] [INFO] [Bullet] Using shooter_position, distance=50.6666221618652
[18:13:24] [INFO] [Bullet] Distance to wall: 50.6666221618652 (3.44998347070424% of viewport)
[18:13:24] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[18:13:24] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:24] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(293,1438), corner_timer=-0.02
[18:13:24] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:24] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(296,1435), corner_timer=0.30
[18:13:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(84.68487, 1544.731), shooter_id=28410554354864, bullet_pos=(483.6001, 700.2047)
[18:13:25] [INFO] [Bullet] Using shooter_position, distance=934.001342773438
[18:13:25] [INFO] [Bullet] Distance to wall: 934.001342773438 (63.5978689064695% of viewport)
[18:13:25] [INFO] [Bullet] Distance-based penetration chance: 72.4691529424523%
[18:13:25] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:25] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:25] [ENEMY] [Enemy1] State: PURSUING -> RETREATING
[18:13:25] [ENEMY] [Enemy1] ROT_CHANGE: P2:combat_state -> P3:corner, state=RETREATING, target=22.7°, current=109.7°, player=(312,1428), corner_timer=0.18
[18:13:25] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
[18:13:25] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
[18:13:25] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
[18:13:25] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P3:corner, state=RETREATING, target=-104.9°, current=109.9°, player=(310,1428), corner_timer=0.15
[18:13:25] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[18:13:25] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
[18:13:25] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[18:13:25] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P3:corner, state=RETREATING, target=176.6°, current=103.8°, player=(307,1428), corner_timer=0.03
[18:13:25] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[18:13:25] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[18:13:25] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(302,1428), corner_timer=-0.02
[18:13:25] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(175.9411, 1462.012), shooter_id=28410554354864, bullet_pos=(302.2303, 705.1437)
[18:13:25] [INFO] [Bullet] Using shooter_position, distance=767.331970214844
[18:13:25] [INFO] [Bullet] Distance to wall: 767.331970214844 (52.2490448510032% of viewport)
[18:13:25] [INFO] [Bullet] Distance-based penetration chance: 85.7094476738296%
[18:13:25] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:25] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(299,1428), corner_timer=0.30
[18:13:25] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:25] [INFO] [ReplayManager] Recording frame 1020 (16,7s): player_valid=True, enemies=10
[18:13:25] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(223,1428), corner_timer=-0.02
[18:13:25] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:25] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(218,1428), corner_timer=0.30
[18:13:25] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(137.4064, 1435.481), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:25] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=5, self=0, below_threshold=4
[18:13:25] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(121,1433), corner_timer=-0.02
[18:13:25] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:25] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(117,1435), corner_timer=0.30
[18:13:26] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:26] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(109,1463), corner_timer=-0.02
[18:13:26] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:26] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(110,1463), corner_timer=0.30
[18:13:26] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[18:13:26] [ENEMY] [Enemy1] Player reloading: false -> true
[18:13:26] [ENEMY] [Enemy2] Player reloading: false -> true
[18:13:26] [ENEMY] [Enemy3] Player reloading: false -> true
[18:13:26] [ENEMY] [Enemy5] Player reloading: false -> true
[18:13:26] [ENEMY] [Enemy6] Player reloading: false -> true
[18:13:26] [ENEMY] [Enemy7] Player reloading: false -> true
[18:13:26] [ENEMY] [Enemy8] Player reloading: false -> true
[18:13:26] [ENEMY] [Enemy9] Player reloading: false -> true
[18:13:26] [ENEMY] [Enemy10] Player reloading: false -> true
[18:13:26] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(110.5595, 1463.477), source=PLAYER (Player), range=900, listeners=9
[18:13:26] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=7, self=0, below_threshold=2
[18:13:26] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=825), can_see=false
[18:13:26] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=false (dist=911), can_see=false
[18:13:26] [ENEMY] [Enemy3] Player vulnerable (reloading) but cannot attack: close=false (dist=822), can_see=false
[18:13:26] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1941), can_see=false
[18:13:26] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=2100), can_see=false
[18:13:26] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=1603), can_see=false
[18:13:26] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1789), can_see=false
[18:13:26] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1991), can_see=false
[18:13:26] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=1058), can_see=false
[18:13:26] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:26] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[18:13:26] [ENEMY] [Enemy1] Player reloading: true -> false
[18:13:26] [ENEMY] [Enemy2] Player reloading: true -> false
[18:13:26] [ENEMY] [Enemy3] Player reloading: true -> false
[18:13:26] [ENEMY] [Enemy5] Player reloading: true -> false
[18:13:26] [ENEMY] [Enemy6] Player reloading: true -> false
[18:13:26] [ENEMY] [Enemy7] Player reloading: true -> false
[18:13:26] [ENEMY] [Enemy8] Player reloading: true -> false
[18:13:26] [ENEMY] [Enemy9] Player reloading: true -> false
[18:13:26] [ENEMY] [Enemy10] Player reloading: true -> false
[18:13:26] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[18:13:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(137.4064, 1435.481), shooter_id=28410554354864, bullet_pos=(331.7816, 710.4153)
[18:13:26] [INFO] [Bullet] Using shooter_position, distance=750.667846679688
[18:13:26] [INFO] [Bullet] Distance to wall: 750.667846679688 (51.1143540368732% of viewport)
[18:13:26] [INFO] [Bullet] Distance-based penetration chance: 87.0332536236479%
[18:13:26] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:26] [INFO] [ReplayManager] Recording frame 1080 (17,7s): player_valid=True, enemies=10
[18:13:26] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(110,1463), corner_timer=-0.02
[18:13:26] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:26] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(110,1463), corner_timer=0.30
[18:13:26] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[18:13:26] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(110.5595, 1469.477), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:26] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=5, self=0, below_threshold=4
[18:13:26] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(110,1463), corner_timer=-0.02
[18:13:26] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:26] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(110,1463), corner_timer=0.30
[18:13:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(115.5595, 1469.477), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:27] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=5, self=0, below_threshold=4
[18:13:27] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(161.3929, 1469.477), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:27] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=5, self=0, below_threshold=4
[18:13:27] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(166,1463), corner_timer=-0.02
[18:13:27] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:27] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(172,1463), corner_timer=0.30
[18:13:27] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(110.5595, 1469.477), shooter_id=28410554354864, bullet_pos=(410.1008, 709.0103)
[18:13:27] [INFO] [Bullet] Using shooter_position, distance=817.334228515625
[18:13:27] [INFO] [Bullet] Distance to wall: 817.334228515625 (55.6537905647488% of viewport)
[18:13:27] [INFO] [Bullet] Distance-based penetration chance: 81.7372443411264%
[18:13:27] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:27] [ENEMY] [Enemy1] State: SUPPRESSED -> IN_COVER
[18:13:27] [ENEMY] [Enemy2] State: SUPPRESSED -> IN_COVER
[18:13:27] [ENEMY] [Enemy3] State: SUPPRESSED -> IN_COVER
[18:13:27] [INFO] [ReplayManager] Recording frame 1140 (18,7s): player_valid=True, enemies=10
[18:13:27] [ENEMY] [Enemy1] State: IN_COVER -> PURSUING
[18:13:27] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
[18:13:27] [ENEMY] [Enemy3] State: IN_COVER -> PURSUING
[18:13:27] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(269,1446), corner_timer=-0.02
[18:13:27] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:27] [ENEMY] [Enemy1] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=112.2°, current=22.7°, player=(273,1443), corner_timer=0.18
[18:13:27] [ENEMY] [Enemy2] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=105.9°, current=176.6°, player=(273,1443), corner_timer=0.03
[18:13:27] [ENEMY] [Enemy3] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=112.3°, current=-104.9°, player=(273,1443), corner_timer=0.15
[18:13:27] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(273,1443), corner_timer=0.30
[18:13:27] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(115.5595, 1469.477), shooter_id=28410554354864, bullet_pos=(375.3447, 712.1274)
[18:13:27] [INFO] [Bullet] Using shooter_position, distance=800.666809082031
[18:13:27] [INFO] [Bullet] Distance to wall: 800.666809082031 (54.5188753268336% of viewport)
[18:13:27] [INFO] [Bullet] Distance-based penetration chance: 83.0613121186941%
[18:13:27] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:27] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(308,1428), corner_timer=-0.02
[18:13:27] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:27] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(308,1428), corner_timer=0.30
[18:13:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(161.3929, 1469.477), shooter_id=28410554354864, bullet_pos=(325.6342, 702.8737)
[18:13:27] [INFO] [Bullet] Using shooter_position, distance=784.000305175781
[18:13:27] [INFO] [Bullet] Distance to wall: 784.000305175781 (53.3840224288588% of viewport)
[18:13:27] [INFO] [Bullet] Distance-based penetration chance: 84.3853071663315%
[18:13:27] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:28] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:28] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(370,1428), corner_timer=-0.02
[18:13:28] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:28] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(375,1428), corner_timer=0.30
[18:13:28] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:28] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[18:13:28] [INFO] [ReplayManager] Recording frame 1200 (19,7s): player_valid=True, enemies=10
[18:13:28] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(453,1430), corner_timer=-0.02
[18:13:28] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:28] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(455,1430), corner_timer=0.30
[18:13:28] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:28] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[18:13:28] [ENEMY] [Enemy1] Player reloading: false -> true
[18:13:28] [ENEMY] [Enemy2] Player reloading: false -> true
[18:13:28] [ENEMY] [Enemy3] Player reloading: false -> true
[18:13:28] [ENEMY] [Enemy5] Player reloading: false -> true
[18:13:28] [ENEMY] [Enemy6] Player reloading: false -> true
[18:13:28] [ENEMY] [Enemy7] Player reloading: false -> true
[18:13:28] [ENEMY] [Enemy8] Player reloading: false -> true
[18:13:28] [ENEMY] [Enemy9] Player reloading: false -> true
[18:13:28] [ENEMY] [Enemy10] Player reloading: false -> true
[18:13:28] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(459.0783, 1430.838), source=PLAYER (Player), range=900, listeners=9
[18:13:28] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=5, self=0, below_threshold=4
[18:13:28] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=671), can_see=false
[18:13:28] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=false (dist=791), can_see=false
[18:13:28] [ENEMY] [Enemy3] Player vulnerable (reloading) but cannot attack: close=false (dist=668), can_see=false
[18:13:28] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1646), can_see=false
[18:13:28] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1785), can_see=false
[18:13:28] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(459,1430), corner_timer=-0.02
[18:13:28] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=1269), can_see=false
[18:13:28] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:28] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1441), can_see=false
[18:13:28] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1645), can_see=false
[18:13:28] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=721), can_see=false
[18:13:28] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(459,1430), corner_timer=0.30
[18:13:29] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:29] [ENEMY] [Enemy2] Warning: No valid flank position (both sides behind walls)
[18:13:29] [ENEMY] [Enemy2] FLANKING started: target=(637.5251, 1340.523), side=right, pos=(502.6308, 640.7801)
[18:13:29] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
[18:13:29] [ENEMY] [Enemy2] FLANKING corner check: angle -48.8°
[18:13:29] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(459,1430), corner_timer=-0.02
[18:13:29] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:29] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(459,1430), corner_timer=0.30
[18:13:29] [ENEMY] [Enemy3] PURSUING corner check: angle 42.6°
[18:13:29] [ENEMY] [Enemy1] PURSUING corner check: angle 38.7°
[18:13:29] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[18:13:29] [ENEMY] [Enemy1] Player reloading: true -> false
[18:13:29] [ENEMY] [Enemy2] Player reloading: true -> false
[18:13:29] [ENEMY] [Enemy3] Player reloading: true -> false
[18:13:29] [ENEMY] [Enemy5] Player reloading: true -> false
[18:13:29] [ENEMY] [Enemy6] Player reloading: true -> false
[18:13:29] [ENEMY] [Enemy7] Player reloading: true -> false
[18:13:29] [ENEMY] [Enemy8] Player reloading: true -> false
[18:13:29] [ENEMY] [Enemy9] Player reloading: true -> false
[18:13:29] [ENEMY] [Enemy10] Player reloading: true -> false
[18:13:29] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[18:13:29] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:29] [ENEMY] [Enemy2] FLANKING corner check: angle 9.7°
[18:13:29] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[18:13:29] [INFO] [ReplayManager] Recording frame 1260 (20,7s): player_valid=True, enemies=10
[18:13:29] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(459,1430), corner_timer=-0.02
[18:13:29] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:29] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=FLANKING, target=93.5°, current=87.9°, player=(459,1430), corner_timer=0.22
[18:13:29] [ENEMY] [Enemy2] State: FLANKING -> COMBAT
[18:13:29] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(459,1430), corner_timer=0.30
[18:13:29] [ENEMY] [Enemy3] PURSUING corner check: angle 33.3°
[18:13:29] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=92.8°, current=30.3°, player=(459,1430), corner_timer=0.22
[18:13:29] [ENEMY] [Enemy1] PURSUING corner check: angle -84.9°
[18:13:29] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=93.5°, current=45.1°, player=(459,1430), corner_timer=0.22
[18:13:29] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:29] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(458,1430), corner_timer=-0.02
[18:13:29] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:29] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(458,1430), corner_timer=0.30
[18:13:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(447.745, 1436.838), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:30] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=5
[18:13:30] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:30] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(445,1437), corner_timer=-0.02
[18:13:30] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:30] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(444,1439), corner_timer=0.30
[18:13:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(439.7785, 1455.311), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:30] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=3, self=0, below_threshold=6
[18:13:30] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(464.1289, 936.2595), source=ENEMY (Enemy2), range=1469, listeners=9
[18:13:30] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[18:13:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(461.0061, 973.4588), source=ENEMY (Enemy2), range=1469, listeners=9
[18:13:30] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[18:13:30] [INFO] [ReplayManager] Recording frame 1320 (21,7s): player_valid=True, enemies=10
[18:13:30] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(384,1484), corner_timer=-0.02
[18:13:30] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:30] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(379,1485), corner_timer=0.30
[18:13:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(374.9564, 1491.125), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:30] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=4
[18:13:30] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=99.7°, current=99.7°, player=(374,1485), corner_timer=0.22
[18:13:30] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[18:13:30] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P3:corner, state=RETREATING, target=9.7°, current=99.7°, player=(370,1484), corner_timer=0.22
[18:13:30] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[18:13:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(467.51944, 1004.2631), shooter_id=28406846589677, bullet_pos=(429.1724, 1586.3347)
[18:13:30] [INFO] [Bullet] Using shooter_position, distance=583,3334
[18:13:30] [INFO] [Bullet] Distance to wall: 583,3334 (39,72024% of viewport)
[18:13:30] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:30] [INFO] [Bullet] Starting wall penetration at (429.1724, 1586.3347)
[18:13:30] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[18:13:30] [INFO] [Bullet] Raycast backward hit penetrating body at distance 20,945698
[18:13:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(374.9564, 1491.125), shooter_id=28410554354864, bullet_pos=(363.8028, 1407.869)
[18:13:30] [INFO] [Bullet] Using shooter_position, distance=83.9998931884766
[18:13:30] [INFO] [Bullet] Distance to wall: 83.9998931884766 (5.71970718938681% of viewport)
[18:13:30] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:30] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:30] [INFO] [Bullet] Body exited signal received for penetrating body
[18:13:30] [INFO] [Bullet] Exiting penetration at (426.10464, 1632.9004) after traveling 41,666668 pixels through wall
[18:13:30] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[18:13:30] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(447.745, 1436.838), shooter_id=28410554354864, bullet_pos=(165.3342, 705.4684)
[18:13:30] [INFO] [Bullet] Using shooter_position, distance=784.000854492188
[18:13:30] [INFO] [Bullet] Distance to wall: 784.000854492188 (53.384059832823% of viewport)
[18:13:30] [INFO] [Bullet] Distance-based penetration chance: 84.3852635283732%
[18:13:30] [INFO] [Bullet] Penetration failed (distance roll)
[18:13:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(461.1632, 1041.569), shooter_id=28406846589677, bullet_pos=(373.39838, 1828.355)
[18:13:30] [INFO] [Bullet] Using shooter_position, distance=791,66595
[18:13:30] [INFO] [Bullet] Distance to wall: 791,66595 (53,905994% of viewport)
[18:13:30] [INFO] [Bullet] Distance-based penetration chance: 83,776344%
[18:13:30] [INFO] [Bullet] Starting wall penetration at (373.39838, 1828.355)
[18:13:30] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[18:13:30] [INFO] [Bullet] Exiting penetration at (368.22488, 1874.734) after traveling 41,666668 pixels through wall
[18:13:30] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[18:13:30] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(299,1437), corner_timer=-0.02
[18:13:30] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:30] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(295,1433), corner_timer=0.30
[18:13:31] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(439.7785, 1455.311), shooter_id=28410554354864, bullet_pos=(193.8334, 710.8881)
[18:13:31] [INFO] [Bullet] Using shooter_position, distance=783.999084472656
[18:13:31] [INFO] [Bullet] Distance to wall: 783.999084472656 (53.3839393089383% of viewport)
[18:13:31] [INFO] [Bullet] Distance-based penetration chance: 84.385404139572%
[18:13:31] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:31] [ENEMY] [Enemy1] Warning: No valid flank position (both sides behind walls)
[18:13:31] [ENEMY] [Enemy1] FLANKING started: target=(134.1803, 1249.151), side=left, pos=(560.8298, 917.6116)
[18:13:31] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
[18:13:31] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(207,1428), corner_timer=-0.02
[18:13:31] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:31] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(201,1428), corner_timer=0.30
[18:13:31] [ENEMY] [Enemy3] Warning: No valid flank position (both sides behind walls)
[18:13:31] [ENEMY] [Enemy3] FLANKING started: target=(109.308, 1240.812), side=left, pos=(567.355, 956.5313)
[18:13:31] [ENEMY] [Enemy3] State: PURSUING -> FLANKING
[18:13:31] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[18:13:31] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:31] [ENEMY] [Enemy3] FLANKING corner check: angle 13.0°
[18:13:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(119.1932, 1434.373), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:31] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=5, self=0, below_threshold=4
[18:13:31] [ENEMY] [Enemy1] FLANKING corner check: angle -40.8°
[18:13:31] [INFO] [ReplayManager] Recording frame 1380 (22,7s): player_valid=True, enemies=10
[18:13:31] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(98,1432), corner_timer=-0.02
[18:13:31] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:31] [INFO] [BloodyFeet:Player] Blood ran out - no more footprints
[18:13:31] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(94,1434), corner_timer=0.30
[18:13:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.06552, 1454.15), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:31] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=5, self=0, below_threshold=4
[18:13:31] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:31] [ENEMY] [Enemy3] FLANKING corner check: angle -42.9°
[18:13:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.06921, 1492.79), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:31] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=5, self=0, below_threshold=4
[18:13:31] [ENEMY] [Enemy1] FLANKING corner check: angle -90.0°
[18:13:31] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(80,1508), corner_timer=-0.02
[18:13:31] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:31] [INFO] [BloodyFeet:Enemy3] Blood ran out - no more footprints
[18:13:31] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(80,1513), corner_timer=0.30
[18:13:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(119.1932, 1434.373), shooter_id=28410554354864, bullet_pos=(510.4629, 1023.55)
[18:13:32] [INFO] [Bullet] Using shooter_position, distance=567.334045410156
[18:13:32] [INFO] [Bullet] Distance to wall: 567.334045410156 (38.6308183872969% of viewport)
[18:13:32] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:32] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:32] [INFO] [BloodyFeet:Enemy3] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[18:13:32] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:32] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[18:13:32] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[18:13:32] [ENEMY] [Enemy3] FLANKING corner check: angle -90.1°
[18:13:32] [ENEMY] [Enemy1] FLANKING corner check: angle -147.9°
[18:13:32] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(126,1565), corner_timer=-0.02
[18:13:32] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:32] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.06552, 1454.15), shooter_id=28410554354864, bullet_pos=(522.866, 1024.003)
[18:13:32] [INFO] [Bullet] Using shooter_position, distance=617.331909179688
[18:13:32] [INFO] [Bullet] Distance to wall: 617.331909179688 (42.0352648693289% of viewport)
[18:13:32] [INFO] [Bullet] Distance-based penetration chance: 97.6255243191163%
[18:13:32] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:32] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(130,1564), corner_timer=0.30
[18:13:32] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:32] [ENEMY] [Enemy2] Hit taken, damage: 1, health: 2/2 -> 1/2
[18:13:32] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[18:13:32] [INFO] [ImpactEffects] spawn_blood_effect called at (467.7669, 1014.175), dir=(0.645747, -0.763551), lethal=false
[18:13:32] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:32] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:32] [INFO] [ImpactEffects] Wall found for blood splatter at (500, 976.0618) (dist=49 px)
[18:13:32] [INFO] [BloodDecal] Blood puddle created at (499, 976.0618) (added to group)
[18:13:32] [INFO] [ImpactEffects] Blood effect spawned at (467.7669, 1014.175) (scale=0.5)
[18:13:32] [ENEMY] [Enemy3] FLANKING corner check: angle -146.4°
[18:13:32] [ENEMY] [Enemy1] FLANKING corner check: angle -146.3°
[18:13:32] [INFO] [ReplayManager] Recording frame 1440 (23,7s): player_valid=True, enemies=10
[18:13:32] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(196,1505), corner_timer=-0.02
[18:13:32] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:32] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(198,1500), corner_timer=0.30
[18:13:32] [INFO] [BloodDecal] Blood puddle created at (486.3516, 975.7698) (added to group)
[18:13:32] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:32] [ENEMY] [Enemy3] FLANKING corner check: angle 39.7°
[18:13:32] [ENEMY] [Enemy1] FLANKING corner check: angle 40.5°
[18:13:32] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(203,1428), corner_timer=-0.02
[18:13:32] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:32] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(203,1428), corner_timer=0.30
[18:13:32] [ENEMY] [Enemy1] ROT_CHANGE: P2:combat_state -> P1:visible, state=FLANKING, target=104.2°, current=104.3°, player=(200,1428), corner_timer=0.20
[18:13:32] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=FLANKING, target=107.4°, current=107.5°, player=(199,1428), corner_timer=0.17
[18:13:33] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:33] [ENEMY] [Enemy1] State: FLANKING -> COMBAT
[18:13:33] [ENEMY] [Enemy3] State: FLANKING -> COMBAT
[18:13:33] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[18:13:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(153.8378, 1448.915), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:33] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=2
[18:13:33] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(146,1449), corner_timer=-0.02
[18:13:33] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:33] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(143,1453), corner_timer=0.30
[18:13:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(130.0218, 1485.085), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:33] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=2
[18:13:33] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:33] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[18:13:33] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[18:13:33] [INFO] [ReplayManager] Recording frame 1500 (24,7s): player_valid=True, enemies=10
[18:13:33] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(142,1512), corner_timer=-0.02
[18:13:33] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:33] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
[18:13:33] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(144,1513), corner_timer=0.30
[18:13:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(155.0876, 1523.796), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:33] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=2
[18:13:33] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[18:13:33] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 3/3 -> 2/3
[18:13:33] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[18:13:33] [INFO] [ImpactEffects] spawn_blood_effect called at (256.6936, 1175.121), dir=(0.439587, -0.8982), lethal=false
[18:13:33] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:33] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:33] [INFO] [ImpactEffects] Blood effect spawned at (256.6936, 1175.121) (scale=0.5)
[18:13:33] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:33] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P3:corner, state=RETREATING, target=39.7°, current=105.1°, player=(177,1520), corner_timer=0.08
[18:13:33] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[18:13:33] [ENEMY] [Enemy1] Player ammo empty: false -> true
[18:13:33] [ENEMY] [Enemy2] Player ammo empty: false -> true
[18:13:33] [ENEMY] [Enemy3] Player ammo empty: false -> true
[18:13:33] [ENEMY] [Enemy5] Player ammo empty: false -> true
[18:13:33] [ENEMY] [Enemy6] Player ammo empty: false -> true
[18:13:33] [ENEMY] [Enemy7] Player ammo empty: false -> true
[18:13:33] [ENEMY] [Enemy8] Player ammo empty: false -> true
[18:13:33] [ENEMY] [Enemy9] Player ammo empty: false -> true
[18:13:33] [ENEMY] [Enemy10] Player ammo empty: false -> true
[18:13:33] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(183.2262, 1520.786), source=PLAYER (Player), range=600, listeners=9
[18:13:33] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (183.2262, 1520.786), intensity=0.04, distance=267
[18:13:33] [ENEMY] [Enemy1] Vulnerability sound triggered pursuit - transitioning from RETREATING to PURSUING
[18:13:33] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (183.2262, 1520.786), intensity=0.02, distance=339
[18:13:33] [ENEMY] [Enemy3] Vulnerability sound triggered pursuit - transitioning from IN_COVER to PURSUING
[18:13:33] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=6, self=0, below_threshold=1
[18:13:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(155.0876, 1523.796), shooter_id=28410554354864, bullet_pos=(202.4171, 1398.433)
[18:13:33] [INFO] [Bullet] Using shooter_position, distance=133.999893188477
[18:13:33] [INFO] [Bullet] Distance to wall: 133.999893188477 (9.12429913127959% of viewport)
[18:13:33] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:33] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:33] [ENEMY] [Enemy1] Player empty ammo - priority attack triggered
[18:13:33] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=581), can_see=false
[18:13:33] [ENEMY] [Enemy3] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=102.9°, current=102.2°, player=(183,1520), corner_timer=0.08
[18:13:33] [ENEMY] [Enemy3] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=339), can_see=false
[18:13:33] [ENEMY] [Enemy3] Pursuing vulnerability sound at (183.2262, 1520.786), distance=339
[18:13:33] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1916), can_see=false
[18:13:33] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=2066), can_see=false
[18:13:33] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1558), can_see=false
[18:13:33] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1718), can_see=false
[18:13:33] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1917), can_see=false
[18:13:33] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=979), can_see=false
[18:13:33] [ENEMY] [Enemy1] ROT_CHANGE: P1:visible -> P2:combat_state, state=PURSUING, target=98.7°, current=99.6°, player=(188,1520), corner_timer=0.10
[18:13:33] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=263), can_see=false
[18:13:33] [ENEMY] [Enemy1] Pursuing vulnerability sound at (183.2262, 1520.786), distance=263
[18:13:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(153.8378, 1448.915), shooter_id=28410554354864, bullet_pos=(502.4535, 841.1315)
[18:13:33] [INFO] [Bullet] Using shooter_position, distance=700.666870117188
[18:13:33] [INFO] [Bullet] Distance to wall: 700.666870117188 (47.7096955990441% of viewport)
[18:13:33] [INFO] [Bullet] Distance-based penetration chance: 91.0053551344486%
[18:13:33] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:33] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(231.4505, 1517.707), source=PLAYER (Player), range=600, listeners=9
[18:13:33] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (231.4505, 1517.707), intensity=0.05, distance=220
[18:13:33] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (231.4505, 1517.707), intensity=0.03, distance=285
[18:13:33] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=6, self=0, below_threshold=1
[18:13:33] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(236,1516), corner_timer=-0.02
[18:13:33] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:33] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(241,1514), corner_timer=0.30
[18:13:33] [INFO] [BloodDecal] Blood puddle created at (258.8001, 1131.055) (added to group)
[18:13:33] [INFO] [BloodDecal] Blood puddle created at (282.5933, 1157.047) (added to group)
[18:13:33] [INFO] [BloodDecal] Blood puddle created at (274.8224, 1146.347) (added to group)
[18:13:33] [INFO] [BloodDecal] Blood puddle created at (258.0056, 1106.191) (added to group)
[18:13:34] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(266.7764, 1496.765), source=PLAYER (Player), range=600, listeners=9
[18:13:34] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (266.7764, 1496.765), intensity=0.08, distance=177
[18:13:34] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (266.7764, 1496.765), intensity=0.05, distance=230
[18:13:34] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=6, self=0, below_threshold=1
[18:13:34] [INFO] [BloodDecal] Blood puddle created at (307.0905, 1155.896) (added to group)
[18:13:34] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:34] [INFO] [BloodDecal] Blood puddle created at (327.6285, 1138.617) (added to group)
[18:13:34] [INFO] [BloodDecal] Blood puddle created at (311.2551, 1137.962) (added to group)
[18:13:34] [INFO] [BloodDecal] Blood puddle created at (362.2486, 1133.266) (added to group)
[18:13:34] [INFO] [BloodDecal] Blood puddle created at (284.5746, 1150.719) (added to group)
[18:13:34] [ENEMY] [Enemy1] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=16.4°, current=43.7°, player=(310,1443), corner_timer=0.10
[18:13:34] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
[18:13:34] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(310,1443), corner_timer=-0.02
[18:13:34] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:34] [ENEMY] [Enemy1] Player empty ammo - priority attack triggered
[18:13:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(169.8412, 1407.552), source=ENEMY (Enemy1), range=1469, listeners=9
[18:13:34] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=1, below_threshold=1
[18:13:34] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=452), can_see=false
[18:13:34] [ENEMY] [Enemy3] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=160), can_see=false
[18:13:34] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1764), can_see=false
[18:13:34] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1913), can_see=false
[18:13:34] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(312,1438), corner_timer=0.30
[18:13:34] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1406), can_see=false
[18:13:34] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1587), can_see=false
[18:13:34] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1791), can_see=false
[18:13:34] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=862), can_see=false
[18:13:34] [INFO] [LastChance] Threat detected: Bullet
[18:13:34] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:34] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:34] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
[18:13:34] [INFO] [Player] Spawning blood effect at (315.95312, 1428.0692), dir=(1, 0), lethal=False (C#)
[18:13:34] [INFO] [ImpactEffects] spawn_blood_effect called at (315.9531, 1428.069), dir=(1, 0), lethal=false
[18:13:34] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:34] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:34] [INFO] [ImpactEffects] Blood effect spawned at (315.9531, 1428.069) (scale=1)
[18:13:34] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[18:13:34] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[18:13:34] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[18:13:34] [ENEMY] [Enemy1] Player reloading: false -> true
[18:13:34] [ENEMY] [Enemy2] Player reloading: false -> true
[18:13:34] [ENEMY] [Enemy3] Player reloading: false -> true
[18:13:34] [ENEMY] [Enemy5] Player reloading: false -> true
[18:13:34] [ENEMY] [Enemy6] Player reloading: false -> true
[18:13:34] [ENEMY] [Enemy7] Player reloading: false -> true
[18:13:34] [ENEMY] [Enemy8] Player reloading: false -> true
[18:13:34] [ENEMY] [Enemy9] Player reloading: false -> true
[18:13:34] [ENEMY] [Enemy10] Player reloading: false -> true
[18:13:34] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(316.9773, 1428.066), source=PLAYER (Player), range=900, listeners=9
[18:13:34] [ENEMY] [Enemy1] Heard player RELOAD at (316.9773, 1428.066), intensity=0.10, distance=162
[18:13:34] [ENEMY] [Enemy1] Vulnerability sound triggered pursuit - transitioning from RETREATING to PURSUING
[18:13:34] [ENEMY] [Enemy2] Heard player RELOAD at (316.9773, 1428.066), intensity=0.01, distance=441
[18:13:34] [ENEMY] [Enemy2] Vulnerability sound triggered pursuit - transitioning from SUPPRESSED to PURSUING
[18:13:34] [ENEMY] [Enemy3] Heard player RELOAD at (316.9773, 1428.066), intensity=0.11, distance=153
[18:13:34] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=5, self=0, below_threshold=1
[18:13:34] [ENEMY] [Enemy2] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=110.0°, current=9.7°, player=(316,1428), corner_timer=0.22
[18:13:34] [ENEMY] [Enemy2] Pursuing vulnerability sound at (316.9773, 1428.066), distance=441
[18:13:34] [INFO] [BloodDecal] Blood puddle created at (285.8202, 1159.824) (added to group)
[18:13:34] [ENEMY] [Enemy1] ROT_CHANGE: P1:visible -> P2:combat_state, state=PURSUING, target=5.9°, current=80.7°, player=(317,1428), corner_timer=0.10
[18:13:34] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=true (dist=161), can_see=false
[18:13:34] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:34] [ENEMY] [Enemy1] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=4.5°, current=50.7°, player=(317,1428), corner_timer=0.10
[18:13:34] [ENEMY] [Enemy1] Player reloading - priority attack triggered
[18:13:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(160.5804, 1415.788), source=ENEMY (Enemy1), range=1469, listeners=9
[18:13:34] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=1, below_threshold=1
[18:13:34] [INFO] [LastChance] Threat detected: Bullet
[18:13:34] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:34] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:34] [ENEMY] [Enemy1] ROT_CHANGE: P1:visible -> P2:combat_state, state=PURSUING, target=1.1°, current=74.4°, player=(317,1428), corner_timer=0.10
[18:13:34] [INFO] [Player] Spawning blood effect at (317.97015, 1428.0659), dir=(1, 0), lethal=False (C#)
[18:13:34] [INFO] [ImpactEffects] spawn_blood_effect called at (317.9702, 1428.066), dir=(1, 0), lethal=false
[18:13:34] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:34] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:34] [INFO] [ImpactEffects] Blood effect spawned at (317.9702, 1428.066) (scale=1)
[18:13:34] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[18:13:34] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[18:13:34] [ENEMY] [Enemy1] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=-0.3°, current=40.4°, player=(317,1428), corner_timer=0.10
[18:13:34] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=8.9°, current=26.3°, player=(317,1428), corner_timer=0.08
[18:13:34] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
[18:13:34] [ENEMY] [Enemy3] Player reloading - priority attack triggered
[18:13:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(168.4769, 1410.032), source=ENEMY (Enemy3), range=1469, listeners=9
[18:13:34] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=1, below_threshold=1
[18:13:34] [INFO] [LastChance] Threat detected: Bullet
[18:13:34] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:34] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:34] [ENEMY] [Enemy1] Player reloading - priority attack triggered
[18:13:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(186.3241, 1440.564), source=ENEMY (Enemy1), range=1469, listeners=9
[18:13:34] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=1, below_threshold=1
[18:13:34] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[18:13:34] [INFO] [LastChance] Threat detected: @Area2D@5293
[18:13:34] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:34] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:34] [INFO] [Player] Spawning blood effect at (317.97015, 1428.0659), dir=(1, 0), lethal=False (C#)
[18:13:34] [INFO] [ImpactEffects] spawn_blood_effect called at (317.9702, 1428.066), dir=(1, 0), lethal=false
[18:13:34] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:34] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:34] [INFO] [ImpactEffects] Blood effect spawned at (317.9702, 1428.066) (scale=1)
[18:13:34] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[18:13:34] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[18:13:34] [INFO] [PenultimateHit] Starting penultimate hit effect:
[18:13:34] [INFO] [PenultimateHit]   - Time scale: 0.10
[18:13:34] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[18:13:34] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[18:13:34] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[18:13:34] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[18:13:34] [INFO] [PenultimateHit] Applying saturation to 9 enemies
[18:13:34] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[18:13:34] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[18:13:34] [INFO] [BloodyFeet:Enemy1] Blood ran out - no more footprints
[18:13:34] [INFO] [BloodDecal] Blood puddle created at (361.4917, 1436.701) (added to group)
[18:13:34] [INFO] [ReplayManager] Recording frame 1560 (25,7s): player_valid=True, enemies=10
[18:13:34] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(317,1428), corner_timer=-0.02
[18:13:34] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:34] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=89.7°, player=(317,1428), corner_timer=0.30
[18:13:34] [INFO] [BloodDecal] Blood puddle created at (360.6822, 1456.792) (added to group)
[18:13:34] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[18:13:34] [ENEMY] [Enemy1] Player reloading: true -> false
[18:13:34] [ENEMY] [Enemy2] Player reloading: true -> false
[18:13:34] [ENEMY] [Enemy3] Player reloading: true -> false
[18:13:34] [ENEMY] [Enemy5] Player reloading: true -> false
[18:13:34] [ENEMY] [Enemy6] Player reloading: true -> false
[18:13:34] [ENEMY] [Enemy7] Player reloading: true -> false
[18:13:34] [ENEMY] [Enemy8] Player reloading: true -> false
[18:13:34] [ENEMY] [Enemy9] Player reloading: true -> false
[18:13:34] [ENEMY] [Enemy10] Player reloading: true -> false
[18:13:34] [ENEMY] [Enemy1] Player ammo empty: true -> false
[18:13:34] [ENEMY] [Enemy2] Player ammo empty: true -> false
[18:13:34] [ENEMY] [Enemy3] Player ammo empty: true -> false
[18:13:34] [ENEMY] [Enemy5] Player ammo empty: true -> false
[18:13:34] [ENEMY] [Enemy6] Player ammo empty: true -> false
[18:13:34] [ENEMY] [Enemy7] Player ammo empty: true -> false
[18:13:34] [ENEMY] [Enemy8] Player ammo empty: true -> false
[18:13:34] [ENEMY] [Enemy9] Player ammo empty: true -> false
[18:13:34] [ENEMY] [Enemy10] Player ammo empty: true -> false
[18:13:34] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[18:13:34] [INFO] [BloodDecal] Blood puddle created at (392.9366, 1464.368) (added to group)
[18:13:34] [ENEMY] [Enemy1] Pursuing vulnerability sound at (317.9702, 1428.066), distance=108
[18:13:34] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P3:corner, state=RETREATING, target=39.7°, current=9.3°, player=(317,1428), corner_timer=0.08
[18:13:35] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[18:13:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:35] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[18:13:35] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[18:13:35] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[18:13:35] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[18:13:35] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[18:13:35] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[18:13:35] [INFO] [LastChance] Resetting all effects (scene change detected)
[18:13:35] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[18:13:35] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[18:13:35] [ENEMY] [Enemy1] Death animation component initialized
[18:13:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:35] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[18:13:35] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[18:13:35] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[18:13:35] [ENEMY] [Enemy2] Death animation component initialized
[18:13:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:35] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[18:13:35] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[18:13:35] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[18:13:35] [ENEMY] [Enemy3] Death animation component initialized
[18:13:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:35] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[18:13:35] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[18:13:35] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[18:13:35] [ENEMY] [Enemy4] Death animation component initialized
[18:13:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:35] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[18:13:35] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[18:13:35] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[18:13:35] [ENEMY] [Enemy5] Death animation component initialized
[18:13:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:35] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[18:13:35] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[18:13:35] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[18:13:35] [ENEMY] [Enemy6] Death animation component initialized
[18:13:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:35] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[18:13:35] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[18:13:35] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[18:13:35] [ENEMY] [Enemy7] Death animation component initialized
[18:13:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:35] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[18:13:35] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[18:13:35] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[18:13:35] [ENEMY] [Enemy8] Death animation component initialized
[18:13:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:35] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[18:13:35] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[18:13:35] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[18:13:35] [ENEMY] [Enemy9] Death animation component initialized
[18:13:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:35] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[18:13:35] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[18:13:35] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[18:13:35] [ENEMY] [Enemy10] Death animation component initialized
[18:13:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:35] [INFO] [BloodyFeet:Player] Footprint scene loaded
[18:13:35] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[18:13:35] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[18:13:35] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[18:13:35] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[18:13:35] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[18:13:35] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[18:13:35] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[18:13:35] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[18:13:35] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[18:13:35] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[18:13:35] [INFO] [Player.Flashlight] Flashlight is selected, initializing...
[18:13:35] [INFO] [FlashlightEffect] PointLight2D found, energy=0.0, shadow=true
[18:13:35] [INFO] [FlashlightEffect] Flashlight sound loaded
[18:13:35] [INFO] [Player.Flashlight] Flashlight equipped and attached to PlayerModel at offset (20, 0)
[18:13:35] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 10/10
[18:13:35] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[18:13:35] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[18:13:35] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[18:13:35] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[18:13:35] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[18:13:35] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[18:13:35] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[18:13:35] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[18:13:35] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[18:13:35] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[18:13:35] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[18:13:35] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[18:13:35] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[18:13:35] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[18:13:35] [INFO] [ScoreManager] Level started with 10 enemies
[18:13:35] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[18:13:35] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[18:13:35] [INFO] [ReplayManager] Replay data cleared
[18:13:35] [INFO] [BuildingLevel] Previous replay data cleared
[18:13:35] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[18:13:35] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[18:13:35] [INFO] [ReplayManager] Level: BuildingLevel
[18:13:35] [INFO] [ReplayManager] Player: Player (valid: True)
[18:13:35] [INFO] [ReplayManager] Enemies count: 10
[18:13:35] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[18:13:35] [INFO] [ReplayManager]   Enemy 0: Enemy1
[18:13:35] [INFO] [ReplayManager]   Enemy 1: Enemy2
[18:13:35] [INFO] [ReplayManager]   Enemy 2: Enemy3
[18:13:35] [INFO] [ReplayManager]   Enemy 3: Enemy4
[18:13:35] [INFO] [ReplayManager]   Enemy 4: Enemy5
[18:13:35] [INFO] [ReplayManager]   Enemy 5: Enemy6
[18:13:35] [INFO] [ReplayManager]   Enemy 6: Enemy7
[18:13:35] [INFO] [ReplayManager]   Enemy 7: Enemy8
[18:13:35] [INFO] [ReplayManager]   Enemy 8: Enemy9
[18:13:35] [INFO] [ReplayManager]   Enemy 9: Enemy10
[18:13:35] [INFO] [BuildingLevel] Replay recording started successfully
[18:13:35] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[18:13:35] [INFO] [CinemaEffects] Found player node: Player
[18:13:35] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[18:13:35] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[18:13:35] [ENEMY] [Enemy1] Registered as sound listener
[18:13:35] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[18:13:35] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[18:13:35] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[18:13:35] [ENEMY] [Enemy2] Registered as sound listener
[18:13:35] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[18:13:35] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[18:13:35] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[18:13:35] [ENEMY] [Enemy3] Registered as sound listener
[18:13:35] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[18:13:35] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[18:13:35] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[18:13:35] [ENEMY] [Enemy4] Registered as sound listener
[18:13:35] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[18:13:35] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[18:13:35] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[18:13:35] [ENEMY] [Enemy5] Registered as sound listener
[18:13:35] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[18:13:35] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[18:13:35] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[18:13:35] [ENEMY] [Enemy6] Registered as sound listener
[18:13:35] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[18:13:35] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[18:13:35] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[18:13:35] [ENEMY] [Enemy7] Registered as sound listener
[18:13:35] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[18:13:35] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[18:13:35] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[18:13:35] [ENEMY] [Enemy8] Registered as sound listener
[18:13:35] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[18:13:35] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[18:13:35] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[18:13:35] [ENEMY] [Enemy9] Registered as sound listener
[18:13:35] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[18:13:35] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[18:13:35] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[18:13:35] [ENEMY] [Enemy10] Registered as sound listener
[18:13:35] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[18:13:35] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[18:13:35] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[18:13:35] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:13:35] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:13:35] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=281.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:13:35] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:13:35] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:13:35] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:13:35] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:13:35] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[18:13:35] [INFO] [Player] Detecting weapon pose (frame 3)...
[18:13:35] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[18:13:35] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[18:13:35] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[18:13:35] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[18:13:35] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[18:13:35] [INFO] [LastChance] Found player: Player
[18:13:35] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[18:13:35] [INFO] [LastChance] Connected to player Damaged signal (C#)
[18:13:35] [INFO] [LastChance] Connected to player Died signal (C#)
[18:13:35] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[18:13:35] [INFO] [BloodDecal] Blood puddle created at (396.6649, 1416.443) (added to group)
[18:13:35] [INFO] [BloodDecal] Blood puddle created at (423.7043, 1432.68) (added to group)
[18:13:35] [INFO] [BloodDecal] Blood puddle created at (363.6015, 1470.538) (added to group)
[18:13:35] [INFO] [BloodDecal] Blood puddle created at (403.6481, 1429.119) (added to group)
[18:13:35] [INFO] [BloodDecal] Blood puddle created at (366.7234, 1442.915) (added to group)
[18:13:35] [INFO] [BloodDecal] Blood puddle created at (372.4341, 1469.975) (added to group)
[18:13:35] [INFO] [BloodDecal] Blood puddle created at (388.3521, 1443.902) (added to group)
[18:13:35] [INFO] [BloodDecal] Blood puddle created at (396.9517, 1444.829) (added to group)
[18:13:35] [INFO] [BloodDecal] Blood puddle created at (377.9047, 1455.944) (added to group)
[18:13:35] [INFO] [BloodDecal] Blood puddle created at (359.2918, 1426.439) (added to group)
[18:13:35] [INFO] [BloodDecal] Blood puddle created at (398.7722, 1454.007) (added to group)
[18:13:35] [INFO] [BloodDecal] Blood puddle created at (462.2856, 1559.693) (added to group)
[18:13:35] [INFO] [BloodDecal] Blood puddle created at (443.1041, 1404.072) (added to group)
[18:13:35] [INFO] [BloodDecal] Blood puddle created at (400.4138, 1544.345) (added to group)
[18:13:35] [INFO] [BloodDecal] Blood puddle created at (417.4762, 1437.489) (added to group)
[18:13:35] [INFO] [BloodDecal] Blood puddle created at (439.7198, 1501.869) (added to group)
[18:13:35] [INFO] [BloodDecal] Blood puddle created at (420.9459, 1470.609) (added to group)
[18:13:35] [INFO] [BloodDecal] Blood puddle created at (426.4832, 1495.652) (added to group)
[18:13:35] [INFO] [BloodDecal] Blood puddle created at (432.9799, 1506.026) (added to group)
[18:13:35] [INFO] [BloodDecal] Blood puddle created at (453.9092, 1558.66) (added to group)
[18:13:35] [INFO] [BloodDecal] Blood puddle created at (517.8242, 1528.183) (added to group)
[18:13:35] [INFO] [BloodDecal] Blood puddle created at (503.54, 1482.275) (added to group)
[18:13:35] [INFO] [BloodDecal] Blood puddle created at (443.0562, 1508.14) (added to group)
[18:13:35] [INFO] [BloodDecal] Blood puddle created at (410.1935, 1457.107) (added to group)
[18:13:35] [INFO] [BloodDecal] Blood puddle created at (515.3925, 1444.35) (added to group)
[18:13:35] [INFO] [BloodDecal] Blood puddle created at (415.6968, 1510.91) (added to group)
[18:13:35] [INFO] [BloodDecal] Blood puddle created at (455.3407, 1564.749) (added to group)
[18:13:36] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[18:13:36] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[18:13:36] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[18:13:36] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(449,825), corner_timer=0.30
[18:13:36] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(449,825), corner_timer=0.30
[18:13:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(441.4815, 801.8748), source=PLAYER (MakarovPM), range=1469, listeners=19
[18:13:36] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[18:13:36] [ENEMY] [Enemy1] Heard gunshot at (441.4815, 801.8748), source_type=0, intensity=0.01, distance=474
[18:13:36] [ENEMY] [Enemy2] Heard gunshot at (441.4815, 801.8748), source_type=0, intensity=0.04, distance=255
[18:13:36] [ENEMY] [Enemy3] Heard gunshot at (441.4815, 801.8748), source_type=0, intensity=0.04, distance=264
[18:13:36] [ENEMY] [Enemy4] Heard gunshot at (441.4815, 801.8748), source_type=0, intensity=0.02, distance=372
[18:13:36] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:13:36] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=72.4°, current=168.8°, player=(441,795), corner_timer=0.00
[18:13:36] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=80.4°, current=45.0°, player=(441,795), corner_timer=0.00
[18:13:36] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=169.9°, current=-78.7°, player=(441,795), corner_timer=0.00
[18:13:36] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-163.8°, current=-101.3°, player=(441,795), corner_timer=0.00
[18:13:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(414.05, 773.5846), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:36] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:13:36] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/2 -> 1/2
[18:13:36] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[18:13:36] [INFO] [ImpactEffects] spawn_blood_effect called at (673.6188, 753.8568), dir=(0.975926, -0.2181), lethal=false
[18:13:36] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:36] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:36] [INFO] [ImpactEffects] Blood effect spawned at (673.6188, 753.8568) (scale=0.5)
[18:13:36] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=177.7°, current=167.4°, player=(406,764), corner_timer=0.00
[18:13:36] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(399,762), corner_timer=-0.02
[18:13:36] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[18:13:36] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(399,762), corner_timer=-0.02
[18:13:36] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[18:13:37] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(395,762), corner_timer=0.30
[18:13:37] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(395,762), corner_timer=0.30
[18:13:37] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[18:13:37] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[18:13:37] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 1/2 -> 0/2
[18:13:37] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[18:13:37] [INFO] [ImpactEffects] spawn_blood_effect called at (670.4836, 758.1712), dir=(0.987758, -0.155993), lethal=true
[18:13:37] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:37] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[18:13:37] [INFO] [ImpactEffects] Blood effect spawned at (670.4836, 758.1712) (scale=0.75)
[18:13:37] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[18:13:37] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[18:13:37] [INFO] [PowerFantasy] Enemy killed - triggering 300ms last chance effect
[18:13:37] [INFO] [PowerFantasy] Starting power fantasy effect:
[18:13:37] [INFO] [PowerFantasy]   - Time scale: 0.10
[18:13:37] [INFO] [PowerFantasy]   - Duration: 300ms
[18:13:37] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[18:13:37] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[18:13:37] [INFO] [DeathAnim] Started - Angle: -9.0 deg, Index: 11
[18:13:37] [ENEMY] [Enemy3] Death animation started with hit direction: (0.987758, -0.155993)
[18:13:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(349.2443, 767.6563), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:37] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[18:13:37] [INFO] [PowerFantasy] Effect duration expired after 312.00 ms
[18:13:37] [INFO] [PowerFantasy] Ending power fantasy effect
[18:13:37] [INFO] [BloodDecal] Blood puddle created at (728.2447, 780.9743) (added to group)
[18:13:37] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[18:13:37] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[18:13:37] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[18:13:37] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(296,761), corner_timer=-0.01
[18:13:37] [ENEMY] [Enemy10] PATROL corner check: angle 7.1°
[18:13:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(291.1638, 768.186), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=0, below_threshold=3
[18:13:37] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.1°, current=16.6°, player=(291,762), corner_timer=0.30
[18:13:37] [INFO] [BloodDecal] Blood puddle created at (754.7205, 751.573) (added to group)
[18:13:37] [INFO] [BloodDecal] Blood puddle created at (743.2806, 786.1329) (added to group)
[18:13:37] [INFO] [BloodDecal] Blood puddle created at (717.4415, 783.1544) (added to group)
[18:13:37] [INFO] [BloodDecal] Blood puddle created at (811.8589, 789.7943) (added to group)
[18:13:37] [INFO] [BloodDecal] Blood puddle created at (754.9678, 794.0533) (added to group)
[18:13:37] [INFO] [BloodDecal] Blood puddle created at (729.5364, 802.7742) (added to group)
[18:13:37] [INFO] [BloodDecal] Blood puddle created at (748.4026, 761.5532) (added to group)
[18:13:37] [INFO] [BloodDecal] Blood puddle created at (754.4296, 787.2573) (added to group)
[18:13:37] [INFO] [BloodDecal] Blood puddle created at (791.8491, 824.124) (added to group)
[18:13:37] [INFO] [BloodDecal] Blood puddle created at (826.4447, 722.0063) (added to group)
[18:13:37] [INFO] [BloodDecal] Blood puddle created at (803.5839, 722.1658) (added to group)
[18:13:37] [INFO] [BloodDecal] Blood puddle created at (753.9622, 776.4563) (added to group)
[18:13:37] [INFO] [BloodDecal] Blood puddle created at (813.2909, 727.1501) (added to group)
[18:13:37] [INFO] [BloodDecal] Blood puddle created at (760.7603, 804.441) (added to group)
[18:13:37] [INFO] [BloodDecal] Blood puddle created at (820.8126, 808.3339) (added to group)
[18:13:37] [INFO] [BloodDecal] Blood puddle created at (791.7306, 811.9709) (added to group)
[18:13:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(220.2752, 809.4966), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:37] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=2
[18:13:37] [INFO] [BloodDecal] Blood puddle created at (728.9625, 763.8206) (added to group)
[18:13:37] [ENEMY] [Enemy3] Ragdoll activated
[18:13:37] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[18:13:37] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(206,810), corner_timer=-0.02
[18:13:37] [ENEMY] [Enemy10] PATROL corner check: angle 3.6°
[18:13:37] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.6°, current=9.7°, player=(201,812), corner_timer=0.30
[18:13:37] [INFO] [BloodDecal] Blood puddle created at (777.2817, 760.2322) (added to group)
[18:13:37] [INFO] [BloodDecal] Blood puddle created at (762.4283, 775.6548) (added to group)
[18:13:37] [INFO] [BloodDecal] Blood puddle created at (831.4479, 769.8716) (added to group)
[18:13:37] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(349.2443, 767.6563), shooter_id=37511606833437, bullet_pos=(920.6053, 684.8297)
[18:13:37] [INFO] [Bullet] Using shooter_position, distance=577.333251953125
[18:13:37] [INFO] [Bullet] Distance to wall: 577.333251953125 (39.3116827477272% of viewport)
[18:13:37] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:37] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:38] [INFO] [BloodDecal] Blood puddle created at (812.7896, 816.3528) (added to group)
[18:13:38] [INFO] [BloodDecal] Blood puddle created at (851.2923, 828.3521) (added to group)
[18:13:38] [INFO] [ReplayManager] Recording frame 180 (2,8s): player_valid=True, enemies=10
[18:13:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(115.589, 822.3253), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:38] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=2
[18:13:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(291.1638, 768.186), shooter_id=37511606833437, bullet_pos=(918.6268, 677.379)
[18:13:38] [INFO] [Bullet] Using shooter_position, distance=633.999816894531
[18:13:38] [INFO] [Bullet] Distance to wall: 633.999816894531 (43.1702133552123% of viewport)
[18:13:38] [INFO] [Bullet] Distance-based penetration chance: 96.3014177522524%
[18:13:38] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:38] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(99,815), corner_timer=-0.02
[18:13:38] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[18:13:38] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(94,814), corner_timer=0.30
[18:13:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(220.2752, 809.4966), shooter_id=37511606833437, bullet_pos=(909.6655, 684.3003)
[18:13:38] [INFO] [Bullet] Using shooter_position, distance=700.666198730469
[18:13:38] [INFO] [Bullet] Distance to wall: 700.666198730469 (47.7096498830878% of viewport)
[18:13:38] [INFO] [Bullet] Distance-based penetration chance: 91.0054084697308%
[18:13:38] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:38] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(103,773), corner_timer=-0.02
[18:13:38] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[18:13:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(106.7619, 778.7509), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:38] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=2
[18:13:38] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(106,772), corner_timer=0.30
[18:13:38] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:38] [ENEMY] [Enemy3] Death animation completed
[18:13:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(219.6205, 784.5038), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:38] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=0, below_threshold=3
[18:13:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(115.589, 822.3253), shooter_id=37511606833437, bullet_pos=(918.1459, 667.6086)
[18:13:39] [INFO] [Bullet] Using shooter_position, distance=817.333984375
[18:13:39] [INFO] [Bullet] Distance to wall: 817.333984375 (55.6537739407647% of viewport)
[18:13:39] [INFO] [Bullet] Distance-based penetration chance: 81.7372637357745%
[18:13:39] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:39] [ENEMY] [Enemy1] PURSUING corner check: angle -40.8°
[18:13:39] [ENEMY] [Enemy2] PURSUING corner check: angle 178.0°
[18:13:39] [ENEMY] [Enemy4] PURSUING corner check: angle -42.5°
[18:13:39] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(255,809), corner_timer=-0.02
[18:13:39] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[18:13:39] [INFO] [ReplayManager] Recording frame 240 (3,8s): player_valid=True, enemies=10
[18:13:39] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(259,813), corner_timer=0.30
[18:13:39] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(274.8222, 895.4523), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:39] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=0, below_threshold=3
[18:13:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(106.7619, 778.7509), shooter_id=37511606833437, bullet_pos=(914.9453, 656.7914)
[18:13:39] [INFO] [Bullet] Using shooter_position, distance=817.333862304688
[18:13:39] [INFO] [Bullet] Distance to wall: 817.333862304688 (55.6537656287727% of viewport)
[18:13:39] [INFO] [Bullet] Distance-based penetration chance: 81.7372734330985%
[18:13:39] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:39] [ENEMY] [Enemy1] PURSUING corner check: angle -83.3°
[18:13:39] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(271,908), corner_timer=-0.02
[18:13:39] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[18:13:39] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(270,912), corner_timer=0.30
[18:13:39] [ENEMY] [Enemy4] PURSUING corner check: angle -89.6°
[18:13:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(274.8222, 895.4523), shooter_id=37511606833437, bullet_pos=(498.0144, 825.1589)
[18:13:39] [INFO] [Bullet] Using shooter_position, distance=233.999862670898
[18:13:39] [INFO] [Bullet] Distance to wall: 233.999862670898 (15.9334809370671% of viewport)
[18:13:39] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:39] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:39] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(219.6205, 784.5038), shooter_id=37511606833437, bullet_pos=(922.5538, 641.4925)
[18:13:39] [INFO] [Bullet] Using shooter_position, distance=717.333557128906
[18:13:39] [INFO] [Bullet] Distance to wall: 717.333557128906 (48.844560965007% of viewport)
[18:13:39] [INFO] [Bullet] Distance-based penetration chance: 89.6813455408251%
[18:13:39] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:39] [ENEMY] [Enemy1] PURSUING corner check: angle 125.0°
[18:13:39] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[18:13:39] [ENEMY] [Enemy1] Player reloading: false -> true
[18:13:39] [ENEMY] [Enemy2] Player reloading: false -> true
[18:13:39] [ENEMY] [Enemy4] Player reloading: false -> true
[18:13:39] [ENEMY] [Enemy5] Player reloading: false -> true
[18:13:39] [ENEMY] [Enemy6] Player reloading: false -> true
[18:13:39] [ENEMY] [Enemy7] Player reloading: false -> true
[18:13:39] [ENEMY] [Enemy8] Player reloading: false -> true
[18:13:39] [ENEMY] [Enemy9] Player reloading: false -> true
[18:13:39] [ENEMY] [Enemy10] Player reloading: false -> true
[18:13:39] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(210.0041, 945.6343), source=PLAYER (Player), range=900, listeners=9
[18:13:39] [ENEMY] [Enemy2] Heard player RELOAD at (210.0041, 945.6343), intensity=0.02, distance=355
[18:13:39] [ENEMY] [Enemy4] Heard player RELOAD at (210.0041, 945.6343), intensity=0.02, distance=382
[18:13:39] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=6, self=0, below_threshold=1
[18:13:39] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=559), can_see=false
[18:13:39] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=true (dist=355), can_see=false
[18:13:39] [ENEMY] [Enemy2] Pursuing vulnerability sound at (210.0041, 945.6343), distance=355
[18:13:39] [ENEMY] [Enemy4] Player vulnerable (reloading) but cannot attack: close=true (dist=382), can_see=false
[18:13:39] [ENEMY] [Enemy4] Pursuing vulnerability sound at (210.0041, 945.6343), distance=382
[18:13:39] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1605), can_see=false
[18:13:39] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1809), can_see=false
[18:13:39] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=1402), can_see=false
[18:13:39] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1764), can_see=false
[18:13:39] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1984), can_see=false
[18:13:39] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=1154), can_see=false
[18:13:39] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(199,945), corner_timer=-0.02
[18:13:39] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[18:13:39] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(193,945), corner_timer=0.30
[18:13:39] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:40] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[18:13:40] [ENEMY] [Enemy1] Player reloading: true -> false
[18:13:40] [ENEMY] [Enemy2] Player reloading: true -> false
[18:13:40] [ENEMY] [Enemy4] Player reloading: true -> false
[18:13:40] [ENEMY] [Enemy5] Player reloading: true -> false
[18:13:40] [ENEMY] [Enemy6] Player reloading: true -> false
[18:13:40] [ENEMY] [Enemy7] Player reloading: true -> false
[18:13:40] [ENEMY] [Enemy8] Player reloading: true -> false
[18:13:40] [ENEMY] [Enemy9] Player reloading: true -> false
[18:13:40] [ENEMY] [Enemy10] Player reloading: true -> false
[18:13:40] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[18:13:40] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(89,945), corner_timer=-0.02
[18:13:40] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[18:13:40] [INFO] [ReplayManager] Recording frame 300 (4,8s): player_valid=True, enemies=10
[18:13:40] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(83,945), corner_timer=0.30
[18:13:40] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:40] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=160.8°, current=-161.1°, player=(80,945), corner_timer=0.08
[18:13:40] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[18:13:40] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=160.5°, current=83.9°, player=(80,945), corner_timer=0.08
[18:13:40] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[18:13:40] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=150.9°, current=172.9°, player=(80,947), corner_timer=0.03
[18:13:40] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[18:13:40] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=151.2°, current=-154.8°, player=(80,949), corner_timer=0.03
[18:13:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.07414, 958.6029), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:40] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=3
[18:13:40] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=151.4°, current=-160.5°, player=(80,952), corner_timer=0.03
[18:13:40] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(80,957), corner_timer=-0.02
[18:13:40] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[18:13:40] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=156.5°, current=109.4°, player=(80,960), corner_timer=0.08
[18:13:40] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(80,960), corner_timer=0.30
[18:13:40] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(80.38211, 1028.772), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:40] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=3
[18:13:40] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.5°, current=89.5°, player=(88,1052), corner_timer=-0.02
[18:13:40] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[18:13:40] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(91,1056), corner_timer=0.30
[18:13:40] [ENEMY] [Enemy2] Hit taken, damage: 1, health: 3/3 -> 2/3
[18:13:40] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[18:13:40] [INFO] [ImpactEffects] spawn_blood_effect called at (488.156, 737.7971), dir=(0.894505, -0.447058), lethal=false
[18:13:40] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:40] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:40] [INFO] [ImpactEffects] Blood effect spawned at (488.156, 737.7971) (scale=0.5)
[18:13:40] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[18:13:40] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(123.5405, 1098.894), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=2
[18:13:40] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[18:13:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(446.5755, 741.1335), source=ENEMY (Enemy2), range=1469, listeners=9
[18:13:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[18:13:41] [INFO] [BloodDecal] Blood puddle created at (541.4463, 737.0027) (added to group)
[18:13:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(456.2482, 745.3317), source=ENEMY (Enemy2), range=1469, listeners=9
[18:13:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[18:13:41] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P3:corner, state=RETREATING, target=178.0°, current=71.6°, player=(162,1131), corner_timer=0.03
[18:13:41] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.4°, current=89.5°, player=(162,1131), corner_timer=-0.02
[18:13:41] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[18:13:41] [INFO] [ReplayManager] Recording frame 360 (5,8s): player_valid=True, enemies=10
[18:13:41] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.3°, player=(166,1135), corner_timer=0.30
[18:13:41] [INFO] [LastChance] Threat detected: Bullet
[18:13:41] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:41] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(177.9877, 1153.341), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:41] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=4
[18:13:41] [INFO] [Player] Spawning blood effect at (185.76584, 1155.119), dir=(1, 0), lethal=False (C#)
[18:13:41] [INFO] [ImpactEffects] spawn_blood_effect called at (185.7658, 1155.119), dir=(1, 0), lethal=false
[18:13:41] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:41] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:41] [INFO] [ImpactEffects] Blood effect spawned at (185.7658, 1155.119) (scale=1)
[18:13:41] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 9.0
[18:13:41] [INFO] [LastChance] Player health updated (C# Damaged): 9.0
[18:13:41] [INFO] [LastChance] Threat detected: @Area2D@5670
[18:13:41] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:41] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:41] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:41] [INFO] [BloodDecal] Blood puddle created at (562.2725, 706.5002) (added to group)
[18:13:41] [INFO] [BloodDecal] Blood puddle created at (561.2802, 751.5786) (added to group)
[18:13:41] [INFO] [BloodDecal] Blood puddle created at (558.4144, 766.9835) (added to group)
[18:13:41] [INFO] [BloodyFeet:Enemy2] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[18:13:41] [INFO] [BloodDecal] Blood puddle created at (545.879, 719.6818) (added to group)
[18:13:41] [INFO] [BloodDecal] Blood puddle created at (614.5395, 794.8171) (added to group)
[18:13:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(422.5322, 798.7124), shooter_id=37507899068480, bullet_pos=(52.56065, 1353.2983)
[18:13:41] [INFO] [Bullet] Using shooter_position, distance=666,6667
[18:13:41] [INFO] [Bullet] Distance to wall: 666,6667 (45,39456% of viewport)
[18:13:41] [INFO] [Bullet] Distance-based penetration chance: 93,706345%
[18:13:41] [INFO] [Bullet] Starting wall penetration at (52.56065, 1353.2983)
[18:13:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(123.5405, 1098.894), shooter_id=37511606833437, bullet_pos=(498.9664, 820.5857)
[18:13:41] [INFO] [Bullet] Using shooter_position, distance=467.333221435547
[18:13:41] [INFO] [Bullet] Distance to wall: 467.333221435547 (31.8215783975651% of viewport)
[18:13:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:41] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:41] [INFO] [Bullet] Raycast backward hit penetrating body at distance 9,617642
[18:13:41] [INFO] [Bullet] Body exited signal received for penetrating body
[18:13:41] [INFO] [Bullet] Exiting penetration at (26.662647, 1392.1194) after traveling 41,666676 pixels through wall
[18:13:41] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[18:13:41] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[18:13:41] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[18:13:41] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.5°, player=(240,1209), corner_timer=-0.02
[18:13:41] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:41] [INFO] [BloodDecal] Blood puddle created at (625.2609, 735.1293) (added to group)
[18:13:41] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(244,1213), corner_timer=0.30
[18:13:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(247.9912, 1223.344), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:41] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=4
[18:13:41] [INFO] [BloodDecal] Blood puddle created at (584.9641, 816.223) (added to group)
[18:13:41] [INFO] [BloodDecal] Blood puddle created at (240.6979, 1193.127) (added to group)
[18:13:41] [INFO] [BloodDecal] Blood puddle created at (263.6962, 1196.996) (added to group)
[18:13:41] [INFO] [BloodDecal] Blood puddle created at (243.5138, 1174.789) (added to group)
[18:13:41] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[18:13:41] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 3/3 -> 2/3
[18:13:41] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[18:13:41] [INFO] [ImpactEffects] spawn_blood_effect called at (463.8206, 895.2446), dir=(0.786227, -0.617938), lethal=false
[18:13:41] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:41] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:41] [INFO] [ImpactEffects] Wall found for blood splatter at (500, 866.8092) (dist=46 px)
[18:13:41] [INFO] [BloodDecal] Blood puddle created at (499, 866.8092) (added to group)
[18:13:41] [INFO] [ImpactEffects] Blood effect spawned at (463.8206, 895.2446) (scale=0.5)
[18:13:41] [INFO] [BloodDecal] Blood puddle created at (642.9829, 764.8908) (added to group)
[18:13:41] [INFO] [BloodDecal] Blood puddle created at (616.742, 694.1584) (added to group)
[18:13:41] [INFO] [BloodDecal] Blood puddle created at (259.8234, 1176.545) (added to group)
[18:13:41] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(286.8821, 1262.234), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:41] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=4
[18:13:41] [ENEMY] [Enemy1] PURSUING corner check: angle -153.6°
[18:13:41] [INFO] [BloodDecal] Blood puddle created at (283.4225, 1237.642) (added to group)
[18:13:41] [INFO] [BloodDecal] Blood puddle created at (319.1527, 1183.486) (added to group)
[18:13:41] [INFO] [BloodDecal] Blood puddle created at (339.1503, 1266.269) (added to group)
[18:13:41] [INFO] [BloodDecal] Blood puddle created at (350.6724, 1149.329) (added to group)
[18:13:41] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(317,1287), corner_timer=-0.02
[18:13:41] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(247.9912, 1223.344), shooter_id=37511606833437, bullet_pos=(506.5852, 986.4972)
[18:13:41] [INFO] [Bullet] Using shooter_position, distance=350.666625976563
[18:13:41] [INFO] [Bullet] Distance to wall: 350.666625976563 (23.8775353818106% of viewport)
[18:13:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:41] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(247.9912, 1223.344), shooter_id=37511606833437, bullet_pos=(506.5852, 986.4972)
[18:13:41] [INFO] [Bullet] Using shooter_position, distance=350.666625976563
[18:13:41] [INFO] [Bullet] Distance to wall: 350.666625976563 (23.8775353818106% of viewport)
[18:13:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:41] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:41] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(321,1291), corner_timer=0.30
[18:13:41] [INFO] [BloodDecal] Blood puddle created at (287.0181, 1205.057) (added to group)
[18:13:41] [INFO] [BloodDecal] Blood puddle created at (294.3311, 1251.455) (added to group)
[18:13:41] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(286.8821, 1262.234), shooter_id=37511606833437, bullet_pos=(510.95, 1014.545)
[18:13:41] [INFO] [Bullet] Using shooter_position, distance=334.00048828125
[18:13:41] [INFO] [Bullet] Distance to wall: 334.00048828125 (22.7427074198119% of viewport)
[18:13:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:41] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(286.8821, 1262.234), shooter_id=37511606833437, bullet_pos=(510.95, 1014.545)
[18:13:41] [INFO] [Bullet] Using shooter_position, distance=334.00048828125
[18:13:41] [INFO] [Bullet] Distance to wall: 334.00048828125 (22.7427074198119% of viewport)
[18:13:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:41] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(362.6884, 1331.507), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:41] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=4
[18:13:42] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(408,1333), corner_timer=-0.02
[18:13:42] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:42] [INFO] [ReplayManager] Recording frame 420 (6,8s): player_valid=True, enemies=10
[18:13:42] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(414,1333), corner_timer=0.30
[18:13:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(80.38211, 1028.772), shooter_id=37511606833437, bullet_pos=(1369.022, 259.7395)
[18:13:42] [INFO] [Bullet] Using shooter_position, distance=1500.66723632813
[18:13:42] [INFO] [Bullet] Distance to wall: 1500.66723632813 (102.183191605305% of viewport)
[18:13:42] [INFO] [Bullet] Distance-based penetration chance: 29.5633616789391%
[18:13:42] [INFO] [Bullet] Penetration failed (distance roll)
[18:13:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(436.4483, 1339.329), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:42] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=5
[18:13:42] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(362.6884, 1331.507), shooter_id=37511606833437, bullet_pos=(564.2137, 1024.389)
[18:13:42] [INFO] [Bullet] Using shooter_position, distance=367.333465576172
[18:13:42] [INFO] [Bullet] Distance to wall: 367.333465576172 (25.0124111377636% of viewport)
[18:13:42] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:42] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:42] [INFO] [ScoreManager] Combo ended at 1. Max combo: 1
[18:13:42] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(518,1333), corner_timer=-0.02
[18:13:42] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:42] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(524,1333), corner_timer=0.30
[18:13:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(436.4483, 1339.329), shooter_id=37511606833437, bullet_pos=(594.111, 1026.105)
[18:13:42] [INFO] [Bullet] Using shooter_position, distance=350.666412353516
[18:13:42] [INFO] [Bullet] Distance to wall: 350.666412353516 (23.8775208358245% of viewport)
[18:13:42] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:42] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:42] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(595.9484, 1339.329), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:42] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=5
[18:13:42] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(628,1333), corner_timer=-0.02
[18:13:42] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:42] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(634,1333), corner_timer=0.30
[18:13:42] [INFO] [BloodyFeet:Player] Blood ran out - no more footprints
[18:13:42] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:13:42] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P3:corner, state=RETREATING, target=-89.6°, current=61.7°, player=(678,1333), corner_timer=0.08
[18:13:43] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[18:13:43] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[18:13:43] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(737,1333), corner_timer=-0.02
[18:13:43] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:43] [INFO] [ReplayManager] Recording frame 480 (7,8s): player_valid=True, enemies=10
[18:13:43] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(741,1333), corner_timer=0.30
[18:13:43] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[18:13:43] [ENEMY] [Enemy1] Player reloading: false -> true
[18:13:43] [ENEMY] [Enemy2] Player reloading: false -> true
[18:13:43] [ENEMY] [Enemy4] Player reloading: false -> true
[18:13:43] [ENEMY] [Enemy5] Player reloading: false -> true
[18:13:43] [ENEMY] [Enemy6] Player reloading: false -> true
[18:13:43] [ENEMY] [Enemy7] Player reloading: false -> true
[18:13:43] [ENEMY] [Enemy8] Player reloading: false -> true
[18:13:43] [ENEMY] [Enemy9] Player reloading: false -> true
[18:13:43] [ENEMY] [Enemy10] Player reloading: false -> true
[18:13:43] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(753.1706, 1333.329), source=PLAYER (Player), range=900, listeners=9
[18:13:43] [ENEMY] [Enemy10] Heard player RELOAD at (753.1706, 1333.329), intensity=0.01, distance=487
[18:13:43] [ENEMY] [Enemy10] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[18:13:43] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=3
[18:13:43] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=792), can_see=false
[18:13:43] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=false (dist=601), can_see=false
[18:13:43] [ENEMY] [Enemy4] Player vulnerable (reloading) but cannot attack: close=false (dist=559), can_see=false
[18:13:43] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1365), can_see=false
[18:13:43] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1488), can_see=false
[18:13:43] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=962), can_see=false
[18:13:43] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1153), can_see=false
[18:13:43] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=1364), can_see=false
[18:13:43] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=-146.5°, current=0.6°, player=(753,1333), corner_timer=0.05
[18:13:43] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=487), can_see=false
[18:13:43] [ENEMY] [Enemy10] Pursuing vulnerability sound at (753.1706, 1333.329), distance=487
[18:13:43] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[18:13:43] [ENEMY] [Enemy1] Player reloading: true -> false
[18:13:43] [ENEMY] [Enemy2] Player reloading: true -> false
[18:13:43] [ENEMY] [Enemy4] Player reloading: true -> false
[18:13:43] [ENEMY] [Enemy5] Player reloading: true -> false
[18:13:43] [ENEMY] [Enemy6] Player reloading: true -> false
[18:13:43] [ENEMY] [Enemy7] Player reloading: true -> false
[18:13:43] [ENEMY] [Enemy8] Player reloading: true -> false
[18:13:43] [ENEMY] [Enemy9] Player reloading: true -> false
[18:13:43] [ENEMY] [Enemy10] Player reloading: true -> false
[18:13:43] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[18:13:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(595.9484, 1339.329), shooter_id=37511606833437, bullet_pos=(246.0251, 713.1329)
[18:13:43] [INFO] [Bullet] Using shooter_position, distance=717.333740234375
[18:13:43] [INFO] [Bullet] Distance to wall: 717.333740234375 (48.8445734329951% of viewport)
[18:13:43] [INFO] [Bullet] Distance-based penetration chance: 89.6813309948391%
[18:13:43] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:43] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(774,1333), corner_timer=-0.02
[18:13:43] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:43] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(774,1333), corner_timer=0.30
[18:13:43] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[18:13:43] [ENEMY] [Enemy1] Warning: No valid flank position (both sides behind walls)
[18:13:43] [ENEMY] [Enemy1] FLANKING started: target=(574.1954, 1336.477), side=left, pos=(362.06, 644.7922)
[18:13:43] [ENEMY] [Enemy1] State: PURSUING -> FLANKING
[18:13:43] [ENEMY] [Enemy1] FLANKING corner check: angle -54.3°
[18:13:43] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(774,1333), corner_timer=-0.02
[18:13:43] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:43] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(774,1333), corner_timer=0.30
[18:13:43] [ENEMY] [Enemy1] FLANKING corner check: angle -93.3°
[18:13:43] [ENEMY] [Enemy10] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=-152.2°, current=-152.0°, player=(774,1333), corner_timer=0.05
[18:13:43] [ENEMY] [Enemy2] State: SUPPRESSED -> IN_COVER
[18:13:43] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
[18:13:43] [ENEMY] [Enemy2] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=69.6°, current=178.0°, player=(774,1333), corner_timer=0.03
[18:13:43] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
[18:13:44] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(773,1333), corner_timer=-0.02
[18:13:44] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:44] [INFO] [ReplayManager] Recording frame 540 (8,8s): player_valid=True, enemies=10
[18:13:44] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(773,1333), corner_timer=0.30
[18:13:44] [ENEMY] [Enemy1] FLANKING corner check: angle 23.3°
[18:13:44] [INFO] [BloodyFeet:Enemy1] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[18:13:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(743.8373, 1339.329), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:44] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=7
[18:13:44] [ENEMY] [Enemy10] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=-157.9°, current=-157.9°, player=(739,1333), corner_timer=0.05
[18:13:44] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(701,1333), corner_timer=-0.02
[18:13:44] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:44] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(695,1333), corner_timer=0.30
[18:13:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(690.3373, 1339.329), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:44] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=7
[18:13:44] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[18:13:44] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[18:13:44] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
[18:13:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(743.8373, 1339.329), shooter_id=37511606833437, bullet_pos=(990.8572, 1381.93)
[18:13:44] [INFO] [Bullet] Using shooter_position, distance=250.666488647461
[18:13:44] [INFO] [Bullet] Distance to wall: 250.666488647461 (17.068342147034% of viewport)
[18:13:44] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:44] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:44] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[18:13:44] [ENEMY] [Enemy1] FLANKING corner check: angle -19.7°
[18:13:44] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[18:13:44] [ENEMY] [Enemy10] State: PURSUING -> RETREATING
[18:13:44] [ENEMY] [Enemy10] ROT_CHANGE: P2:combat_state -> P3:corner, state=RETREATING, target=0.6°, current=-164.2°, player=(635,1333), corner_timer=0.05
[18:13:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(602.3373, 1339.329), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:44] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=5
[18:13:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(690.3373, 1339.329), shooter_id=37511606833437, bullet_pos=(986.2444, 1392.614)
[18:13:44] [INFO] [Bullet] Using shooter_position, distance=300.66650390625
[18:13:44] [INFO] [Bullet] Distance to wall: 300.66650390625 (20.4729351279258% of viewport)
[18:13:44] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:44] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:44] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(591,1333), corner_timer=-0.02
[18:13:44] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:44] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
[18:13:44] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(585,1333), corner_timer=0.30
[18:13:44] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[18:13:44] [ENEMY] [Enemy1] ROT_CHANGE: P2:combat_state -> P1:visible, state=FLANKING, target=77.2°, current=77.5°, player=(574,1333), corner_timer=0.03
[18:13:44] [ENEMY] [Enemy1] State: FLANKING -> COMBAT
[18:13:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(549.2507, 1343.948), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:44] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=4
[18:13:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(602.3373, 1339.329), shooter_id=37511606833437, bullet_pos=(999.5343, 1391.946)
[18:13:45] [INFO] [Bullet] Using shooter_position, distance=400.666931152344
[18:13:45] [INFO] [Bullet] Distance to wall: 400.666931152344 (27.2821481036835% of viewport)
[18:13:45] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:45] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(602.3373, 1339.329), shooter_id=37511606833437, bullet_pos=(999.5343, 1391.946)
[18:13:45] [INFO] [Bullet] Using shooter_position, distance=400.666931152344
[18:13:45] [INFO] [Bullet] Distance to wall: 400.666931152344 (27.2821481036835% of viewport)
[18:13:45] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:45] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:45] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(507,1371), corner_timer=-0.02
[18:13:45] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:45] [INFO] [ReplayManager] Recording frame 600 (9,8s): player_valid=True, enemies=10
[18:13:45] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(505,1371), corner_timer=0.30
[18:13:45] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
[18:13:45] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[18:13:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(549.2507, 1343.948), shooter_id=37511606833437, bullet_pos=(1015.671, 1373.152)
[18:13:45] [INFO] [Bullet] Using shooter_position, distance=467.333343505859
[18:13:45] [INFO] [Bullet] Distance to wall: 467.333343505859 (31.8215867095571% of viewport)
[18:13:45] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:45] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:45] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(469,1387), corner_timer=-0.02
[18:13:45] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:45] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(466,1390), corner_timer=0.30
[18:13:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(455.3687, 1406.678), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:45] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=0, below_threshold=4
[18:13:45] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[18:13:45] [ENEMY] [Enemy2] PURSUING corner check: angle -157.3°
[18:13:45] [INFO] [BloodyFeet:Enemy1] Blood ran out - no more footprints
[18:13:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(467.654, 1102.155), source=ENEMY (Enemy1), range=1469, listeners=9
[18:13:45] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[18:13:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(430.336, 1451.309), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:45] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=4
[18:13:45] [ENEMY] [Enemy4] State: SUPPRESSED -> IN_COVER
[18:13:45] [INFO] [LastChance] Threat detected: Bullet
[18:13:45] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:45] [ENEMY] [Enemy4] State: IN_COVER -> PURSUING
[18:13:45] [ENEMY] [Enemy4] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=97.6°, current=-89.6°, player=(428,1461), corner_timer=0.08
[18:13:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(463.6836, 1139.276), source=ENEMY (Enemy1), range=1469, listeners=9
[18:13:45] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[18:13:45] [INFO] [Player] Spawning blood effect at (428.83145, 1472.1853), dir=(1, 0), lethal=False (C#)
[18:13:45] [INFO] [ImpactEffects] spawn_blood_effect called at (428.8315, 1472.185), dir=(1, 0), lethal=false
[18:13:45] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:45] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:45] [INFO] [ImpactEffects] Blood effect spawned at (428.8315, 1472.185) (scale=1)
[18:13:45] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 8.0
[18:13:45] [INFO] [LastChance] Player health updated (C# Damaged): 8.0
[18:13:45] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(428,1477), corner_timer=-0.02
[18:13:45] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:45] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(428,1483), corner_timer=0.30
[18:13:45] [INFO] [LastChance] Threat detected: @Area2D@5769
[18:13:45] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:45] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
[18:13:45] [ENEMY] [Enemy2] PURSUING corner check: angle 37.6°
[18:13:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(459.8788, 1176.415), source=ENEMY (Enemy1), range=1469, listeners=9
[18:13:45] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[18:13:45] [INFO] [Player] Spawning blood effect at (424.69687, 1508.0736), dir=(1, 0), lethal=False (C#)
[18:13:45] [INFO] [ImpactEffects] spawn_blood_effect called at (424.6969, 1508.074), dir=(1, 0), lethal=false
[18:13:45] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:45] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:45] [INFO] [ImpactEffects] Blood effect spawned at (424.6969, 1508.074) (scale=1)
[18:13:45] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 7.0
[18:13:45] [INFO] [LastChance] Player health updated (C# Damaged): 7.0
[18:13:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(455.3687, 1406.678), shooter_id=37511606833437, bullet_pos=(589.2529, 1011.402)
[18:13:45] [INFO] [Bullet] Using shooter_position, distance=417.334014892578
[18:13:45] [INFO] [Bullet] Distance to wall: 417.334014892578 (28.4170404836206% of viewport)
[18:13:45] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:45] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(417.2356, 1529.686), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:45] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=4
[18:13:45] [INFO] [LastChance] Threat detected: Bullet
[18:13:45] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:45] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(445.5292, 1198.256), source=ENEMY (Enemy1), range=1469, listeners=9
[18:13:45] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=1, below_threshold=2
[18:13:46] [INFO] [Player] Spawning blood effect at (409.7373, 1532.5863), dir=(1, 0), lethal=False (C#)
[18:13:46] [INFO] [ImpactEffects] spawn_blood_effect called at (409.7373, 1532.586), dir=(1, 0), lethal=false
[18:13:46] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:46] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:46] [INFO] [ImpactEffects] Blood effect spawned at (409.7373, 1532.586) (scale=1)
[18:13:46] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 6.0
[18:13:46] [INFO] [LastChance] Player health updated (C# Damaged): 6.0
[18:13:46] [INFO] [LastChance] Threat detected: @Area2D@5785
[18:13:46] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:46] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(431.1795, 1220.097), source=ENEMY (Enemy1), range=1469, listeners=9
[18:13:46] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=1, below_threshold=2
[18:13:46] [INFO] [BloodDecal] Blood puddle created at (481.7406, 1505.465) (added to group)
[18:13:46] [INFO] [BloodDecal] Blood puddle created at (510.5318, 1511.146) (added to group)
[18:13:46] [INFO] [BloodDecal] Blood puddle created at (495.1006, 1491.581) (added to group)
[18:13:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(430.336, 1451.309), shooter_id=37511606833437, bullet_pos=(605.5586, 1018.068)
[18:13:46] [INFO] [Bullet] Using shooter_position, distance=467.333251953125
[18:13:46] [INFO] [Bullet] Distance to wall: 467.333251953125 (31.8215804755631% of viewport)
[18:13:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:46] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:46] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(389,1541), corner_timer=-0.02
[18:13:46] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(446.5513, 1266.3077), shooter_id=37507546744379, bullet_pos=(416.74832, 1598.3058)
[18:13:46] [INFO] [Bullet] Using shooter_position, distance=333,33304
[18:13:46] [INFO] [Bullet] Distance to wall: 333,33304 (22,69726% of viewport)
[18:13:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:46] [INFO] [Bullet] Starting wall penetration at (416.74832, 1598.3058)
[18:13:46] [INFO] [ReplayManager] Recording frame 660 (10,8s): player_valid=True, enemies=10
[18:13:46] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(386,1541), corner_timer=0.30
[18:13:46] [INFO] [Bullet] Raycast backward hit penetrating body at distance 32,917355
[18:13:46] [INFO] [BloodDecal] Blood puddle created at (492.4768, 1543.416) (added to group)
[18:13:46] [INFO] [BloodDecal] Blood puddle created at (480.9854, 1501.941) (added to group)
[18:13:46] [INFO] [Bullet] Body exited signal received for penetrating body
[18:13:46] [INFO] [Bullet] Exiting penetration at (412.5759, 1644.7855) after traveling 41,666668 pixels through wall
[18:13:46] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[18:13:46] [INFO] [BloodDecal] Blood puddle created at (554.0499, 1558.843) (added to group)
[18:13:46] [INFO] [BloodDecal] Blood puddle created at (545.8076, 1486.877) (added to group)
[18:13:46] [INFO] [BloodDecal] Blood puddle created at (476.6917, 1515.533) (added to group)
[18:13:46] [ENEMY] [Enemy1] ROT_CHANGE: P1:visible -> P3:corner, state=RETREATING, target=-19.7°, current=98.5°, player=(373,1538), corner_timer=0.03
[18:13:46] [INFO] [BloodDecal] Blood puddle created at (517.4709, 1494.958) (added to group)
[18:13:46] [INFO] [BloodDecal] Blood puddle created at (495.7522, 1515.46) (added to group)
[18:13:46] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
[18:13:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(366.8651, 1541.243), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:46] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=4
[18:13:46] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
[18:13:46] [INFO] [BloodDecal] Blood puddle created at (518.9093, 1528.901) (added to group)
[18:13:46] [INFO] [BloodDecal] Blood puddle created at (489.8602, 1550.791) (added to group)
[18:13:46] [INFO] [BloodDecal] Blood puddle created at (483.7974, 1539.816) (added to group)
[18:13:46] [INFO] [BloodDecal] Blood puddle created at (450.1172, 1562.137) (added to group)
[18:13:46] [INFO] [BloodDecal] Blood puddle created at (506.7125, 1555.684) (added to group)
[18:13:46] [INFO] [BloodDecal] Blood puddle created at (508.4725, 1519.675) (added to group)
[18:13:46] [INFO] [BloodDecal] Blood puddle created at (489.1003, 1566.118) (added to group)
[18:13:46] [INFO] [BloodDecal] Blood puddle created at (489.4193, 1562.217) (added to group)
[18:13:46] [INFO] [BloodDecal] Blood puddle created at (559.4858, 1578.137) (added to group)
[18:13:46] [INFO] [BloodDecal] Blood puddle created at (584.682, 1564.825) (added to group)
[18:13:46] [INFO] [BloodDecal] Blood puddle created at (532.3792, 1528.24) (added to group)
[18:13:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(430.9392, 1288.174), shooter_id=37507546744379, bullet_pos=(433.21854, 2079.8374)
[18:13:46] [INFO] [Bullet] Using shooter_position, distance=791,6667
[18:13:46] [INFO] [Bullet] Distance to wall: 791,6667 (53,90604% of viewport)
[18:13:46] [INFO] [Bullet] Distance-based penetration chance: 83,77628%
[18:13:46] [INFO] [Bullet] Starting wall penetration at (433.21854, 2079.8374)
[18:13:46] [INFO] [Bullet] Raycast backward hit penetrating body at distance 30,504032
[18:13:46] [INFO] [BloodDecal] Blood puddle created at (516.3029, 1528.332) (added to group)
[18:13:46] [INFO] [Bullet] Body exited signal received for penetrating body
[18:13:46] [INFO] [Bullet] Exiting penetration at (433.3529, 2126.504) after traveling 41,666668 pixels through wall
[18:13:46] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[18:13:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(417.2356, 1529.686), shooter_id=37511606833437, bullet_pos=(578.585, 1020.645)
[18:13:46] [INFO] [Bullet] Using shooter_position, distance=534.000854492188
[18:13:46] [INFO] [Bullet] Distance to wall: 534.000854492188 (36.3611001233591% of viewport)
[18:13:46] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:46] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:46] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(317,1489), corner_timer=-0.02
[18:13:46] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:46] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(313,1485), corner_timer=0.30
[18:13:46] [INFO] [BloodDecal] Blood puddle created at (556.0314, 1629.328) (added to group)
[18:13:46] [INFO] [BloodDecal] Blood puddle created at (483.5832, 1556.161) (added to group)
[18:13:46] [INFO] [BloodDecal] Blood puddle created at (590.9166, 1601.367) (added to group)
[18:13:46] [INFO] [BloodDecal] Blood puddle created at (592.007, 1619.998) (added to group)
[18:13:46] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
[18:13:46] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P3:corner, state=RETREATING, target=37.6°, current=93.8°, player=(266,1439), corner_timer=0.10
[18:13:46] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[18:13:46] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[18:13:46] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(240,1428), corner_timer=-0.02
[18:13:46] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(366.8651, 1541.243), shooter_id=37511606833437, bullet_pos=(660.9302, 1017.48)
[18:13:46] [INFO] [Bullet] Using shooter_position, distance=600.668151855469
[18:13:46] [INFO] [Bullet] Distance to wall: 600.668151855469 (40.900598991175% of viewport)
[18:13:46] [INFO] [Bullet] Distance-based penetration chance: 98.9493011769625%
[18:13:46] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:46] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(236,1428), corner_timer=0.30
[18:13:47] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(214,1428), corner_timer=-0.02
[18:13:47] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:47] [INFO] [ReplayManager] Recording frame 720 (11,8s): player_valid=True, enemies=10
[18:13:47] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(214,1428), corner_timer=0.30
[18:13:47] [INFO] [BloodyFeet:Enemy4] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[18:13:47] [ENEMY] [Enemy4] PURSUING corner check: angle -74.5°
[18:13:47] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(196,1428), corner_timer=-0.02
[18:13:47] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:47] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(192,1427), corner_timer=0.30
[18:13:47] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
[18:13:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(139.502, 1410.32), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:47] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=3
[18:13:47] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(123,1401), corner_timer=-0.02
[18:13:47] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:47] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(121,1401), corner_timer=0.30
[18:13:47] [ENEMY] [Enemy10] State: SUPPRESSED -> IN_COVER
[18:13:47] [ENEMY] [Enemy10] State: IN_COVER -> PURSUING
[18:13:47] [ENEMY] [Enemy4] PURSUING corner check: angle -13.5°
[18:13:47] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=-179.2°, current=0.6°, player=(107,1412), corner_timer=0.05
[18:13:47] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
[18:13:47] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
[18:13:48] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[18:13:48] [ENEMY] [Enemy1] Player reloading: false -> true
[18:13:48] [ENEMY] [Enemy2] Player reloading: false -> true
[18:13:48] [ENEMY] [Enemy4] Player reloading: false -> true
[18:13:48] [ENEMY] [Enemy5] Player reloading: false -> true
[18:13:48] [ENEMY] [Enemy6] Player reloading: false -> true
[18:13:48] [ENEMY] [Enemy7] Player reloading: false -> true
[18:13:48] [ENEMY] [Enemy8] Player reloading: false -> true
[18:13:48] [ENEMY] [Enemy9] Player reloading: false -> true
[18:13:48] [ENEMY] [Enemy10] Player reloading: false -> true
[18:13:48] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(97.94194, 1449.508), source=PLAYER (Player), range=900, listeners=9
[18:13:48] [ENEMY] [Enemy1] Heard player RELOAD at (97.94194, 1449.508), intensity=0.02, distance=321
[18:13:48] [ENEMY] [Enemy1] Vulnerability sound triggered pursuit - transitioning from SUPPRESSED to PURSUING
[18:13:48] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=3
[18:13:48] [INFO] [BloodyFeet:Player] Blood ran out - no more footprints
[18:13:48] [ENEMY] [Enemy1] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=162.1°, current=-59.1°, player=(97,1449), corner_timer=0.03
[18:13:48] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=true (dist=321), can_see=false
[18:13:48] [ENEMY] [Enemy1] Pursuing vulnerability sound at (97.94194, 1449.508), distance=321
[18:13:48] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=false (dist=701), can_see=false
[18:13:48] [ENEMY] [Enemy4] Player vulnerable (reloading) but cannot attack: close=false (dist=711), can_see=false
[18:13:48] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1943), can_see=false
[18:13:48] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=2105), can_see=false
[18:13:48] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=1610), can_see=false
[18:13:48] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=1802), can_see=false
[18:13:48] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=2005), can_see=false
[18:13:48] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=839), can_see=false
[18:13:48] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(97,1452), corner_timer=-0.02
[18:13:48] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:48] [INFO] [ReplayManager] Recording frame 780 (12,8s): player_valid=True, enemies=10
[18:13:48] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(97,1454), corner_timer=0.30
[18:13:48] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[18:13:48] [ENEMY] [Enemy1] Player reloading: true -> false
[18:13:48] [ENEMY] [Enemy2] Player reloading: true -> false
[18:13:48] [ENEMY] [Enemy4] Player reloading: true -> false
[18:13:48] [ENEMY] [Enemy5] Player reloading: true -> false
[18:13:48] [ENEMY] [Enemy6] Player reloading: true -> false
[18:13:48] [ENEMY] [Enemy7] Player reloading: true -> false
[18:13:48] [ENEMY] [Enemy8] Player reloading: true -> false
[18:13:48] [ENEMY] [Enemy9] Player reloading: true -> false
[18:13:48] [ENEMY] [Enemy10] Player reloading: true -> false
[18:13:48] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[18:13:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(139.502, 1410.32), shooter_id=37511606833437, bullet_pos=(681.4676, 1020.951)
[18:13:48] [INFO] [Bullet] Using shooter_position, distance=667.333801269531
[18:13:48] [INFO] [Bullet] Distance to wall: 667.333801269531 (45.4399856470984% of viewport)
[18:13:48] [INFO] [Bullet] Distance-based penetration chance: 93.6533500783853%
[18:13:48] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:48] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(95,1462), corner_timer=-0.02
[18:13:48] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:48] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
[18:13:48] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(95,1462), corner_timer=0.30
[18:13:48] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[18:13:48] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P3:corner, state=RETREATING, target=-13.5°, current=135.9°, player=(95,1462), corner_timer=0.23
[18:13:48] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[18:13:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(95.83851, 1468.415), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:48] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=3
[18:13:48] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[18:13:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(95.83851, 1468.415), shooter_id=37511606833437, bullet_pos=(209.8603, 1398.023)
[18:13:48] [INFO] [Bullet] Using shooter_position, distance=134.000015258789
[18:13:48] [INFO] [Bullet] Distance to wall: 134.000015258789 (9.12430744327163% of viewport)
[18:13:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:48] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:48] [ENEMY] [Enemy1] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=144.7°, current=146.0°, player=(95,1465), corner_timer=0.03
[18:13:48] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
[18:13:48] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
[18:13:48] [ENEMY] [Enemy1] ROT_CHANGE: P1:visible -> P3:corner, state=RETREATING, target=-19.7°, current=129.8°, player=(95,1474), corner_timer=0.03
[18:13:48] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(99,1486), corner_timer=-0.02
[18:13:48] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:48] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(100,1489), corner_timer=0.30
[18:13:48] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(102.5164, 1498.514), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:48] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=3
[18:13:48] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
[18:13:48] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
[18:13:48] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(102.5164, 1498.514), shooter_id=37511606833437, bullet_pos=(202.7551, 1409.586)
[18:13:48] [INFO] [Bullet] Using shooter_position, distance=133.99983215332
[18:13:48] [INFO] [Bullet] Distance to wall: 133.99983215332 (9.12429497528356% of viewport)
[18:13:48] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:48] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:48] [ENEMY] [Enemy2] State: SUPPRESSED -> IN_COVER
[18:13:49] [ENEMY] [Enemy2] State: IN_COVER -> PURSUING
[18:13:49] [ENEMY] [Enemy2] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=124.5°, current=37.6°, player=(144,1522), corner_timer=0.10
[18:13:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(154.7132, 1530.454), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:49] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=5, self=0, below_threshold=3
[18:13:49] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(176,1524), corner_timer=-0.02
[18:13:49] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:49] [INFO] [ReplayManager] Recording frame 840 (13,8s): player_valid=True, enemies=10
[18:13:49] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(181,1524), corner_timer=0.30
[18:13:49] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(154.7132, 1530.454), shooter_id=37511606833437, bullet_pos=(245.8977, 1410.513)
[18:13:49] [INFO] [Bullet] Using shooter_position, distance=150.666702270508
[18:13:49] [INFO] [Bullet] Distance to wall: 150.666702270508 (10.2591728092346% of viewport)
[18:13:49] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:49] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:49] [ENEMY] [Enemy10] Warning: No valid flank position (both sides behind walls)
[18:13:49] [ENEMY] [Enemy10] FLANKING started: target=(348.1607, 1338.337), side=left, pos=(936.0667, 1424.352)
[18:13:49] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[18:13:49] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(285,1523), corner_timer=-0.02
[18:13:49] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:49] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(290,1521), corner_timer=0.30
[18:13:49] [ENEMY] [Enemy10] FLANKING corner check: angle -42.5°
[18:13:49] [ENEMY] [Enemy10] ROT_CHANGE: P2:combat_state -> P1:visible, state=FLANKING, target=168.8°, current=-142.0°, player=(329,1496), corner_timer=0.20
[18:13:49] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
[18:13:49] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[18:13:49] [ENEMY] [Enemy10] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=169.1°, current=110.4°, player=(337,1489), corner_timer=0.20
[18:13:49] [ENEMY] [Enemy10] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=170.1°, current=120.3°, player=(349,1477), corner_timer=0.20
[18:13:49] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(368,1458), corner_timer=-0.02
[18:13:49] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:49] [ENEMY] [Enemy10] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=171.2°, current=135.6°, player=(368,1458), corner_timer=0.20
[18:13:49] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(372,1454), corner_timer=0.30
[18:13:50] [ENEMY] [Enemy10] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=177.5°, current=177.5°, player=(423,1421), corner_timer=0.20
[18:13:50] [ENEMY] [Enemy10] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=178.9°, current=178.9°, player=(434,1413), corner_timer=0.20
[18:13:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(437.1755, 1416.471), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:50] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=0, below_threshold=3
[18:13:50] [ENEMY] [Enemy1] ROT_CHANGE: P3:corner -> P1:visible, state=SUPPRESSED, target=12.4°, current=-19.7°, player=(442,1404), corner_timer=0.03
[18:13:50] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(442,1404), corner_timer=-0.02
[18:13:50] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(437.1755, 1416.471), shooter_id=37511606833437, bullet_pos=(386.9807, 1402.889)
[18:13:50] [INFO] [Bullet] Using shooter_position, distance=51.9999237060547
[18:13:50] [INFO] [Bullet] Distance to wall: 51.9999237060547 (3.54077042457345% of viewport)
[18:13:50] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[18:13:50] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:50] [INFO] [ReplayManager] Recording frame 900 (14,8s): player_valid=True, enemies=10
[18:13:50] [ENEMY] [Enemy1] ROT_CHANGE: P1:visible -> P3:corner, state=SUPPRESSED, target=-19.7°, current=-40.7°, player=(445,1401), corner_timer=0.03
[18:13:50] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
[18:13:50] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(445,1401), corner_timer=0.30
[18:13:50] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[18:13:50] [ENEMY] [Enemy1] ROT_CHANGE: P3:corner -> P1:visible, state=SEEKING_COVER, target=10.5°, current=-37.9°, player=(447,1399), corner_timer=0.03
[18:13:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(455.3773, 1392.39), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:50] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=2
[18:13:50] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(443,1380), corner_timer=-0.02
[18:13:50] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:50] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(440,1381), corner_timer=0.30
[18:13:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(433.1274, 1392.717), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:50] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=2
[18:13:50] [ENEMY] [Enemy2] Warning: No valid flank position (both sides behind walls)
[18:13:50] [ENEMY] [Enemy2] FLANKING started: target=(626.3864, 1335.229), side=right, pos=(558.7404, 920.5874)
[18:13:50] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
[18:13:50] [ENEMY] [Enemy1] State: SEEKING_COVER -> IN_COVER
[18:13:50] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
[18:13:50] [ENEMY] [Enemy1] ROT_CHANGE: P1:visible -> P3:corner, state=SUPPRESSED, target=-19.7°, current=11.3°, player=(416,1401), corner_timer=0.03
[18:13:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(455.3773, 1392.39), shooter_id=37511606833437, bullet_pos=(51.76833, 1286.245)
[18:13:50] [INFO] [Bullet] Using shooter_position, distance=417.333160400391
[18:13:50] [INFO] [Bullet] Distance to wall: 417.333160400391 (28.4169822996763% of viewport)
[18:13:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:50] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:50] [ENEMY] [Enemy2] FLANKING corner check: angle 16.6°
[18:13:50] [ENEMY] [Enemy10] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=177.8°, current=178.4°, player=(415,1420), corner_timer=0.20
[18:13:50] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
[18:13:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(412.7326, 1434.11), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=0, below_threshold=3
[18:13:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(412.7326, 1434.11), shooter_id=37511606833437, bullet_pos=(349.9033, 1409.897)
[18:13:50] [INFO] [Bullet] Using shooter_position, distance=67.3333587646484
[18:13:50] [INFO] [Bullet] Distance to wall: 67.3333587646484 (4.58485221341394% of viewport)
[18:13:50] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[18:13:50] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:50] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(404,1443), corner_timer=-0.02
[18:13:50] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:50] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(401,1447), corner_timer=0.30
[18:13:50] [ENEMY] [Enemy4] State: SUPPRESSED -> IN_COVER
[18:13:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(433.1274, 1392.717), shooter_id=37511606833437, bullet_pos=(54.19862, 1262.537)
[18:13:50] [INFO] [Bullet] Using shooter_position, distance=400.666931152344
[18:13:50] [INFO] [Bullet] Distance to wall: 400.666931152344 (27.2821481036835% of viewport)
[18:13:50] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:50] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:50] [ENEMY] [Enemy4] State: IN_COVER -> PURSUING
[18:13:50] [ENEMY] [Enemy4] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=114.8°, current=-13.5°, player=(378,1470), corner_timer=0.23
[18:13:50] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
[18:13:50] [ENEMY] [Enemy2] FLANKING corner check: angle -42.9°
[18:13:51] [ENEMY] [Enemy1] ROT_CHANGE: P3:corner -> P1:visible, state=SEEKING_COVER, target=34.0°, current=10.3°, player=(327,1493), corner_timer=0.03
[18:13:51] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(316,1493), corner_timer=-0.02
[18:13:51] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:51] [INFO] [ReplayManager] Recording frame 960 (15,8s): player_valid=True, enemies=10
[18:13:51] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(310,1493), corner_timer=0.30
[18:13:51] [ENEMY] [Enemy1] ROT_CHANGE: P1:visible -> P3:corner, state=SEEKING_COVER, target=-19.7°, current=130.1°, player=(305,1493), corner_timer=0.03
[18:13:51] [ENEMY] [Enemy1] ROT_CHANGE: P3:corner -> P1:visible, state=SEEKING_COVER, target=40.7°, current=82.7°, player=(299,1493), corner_timer=0.03
[18:13:51] [ENEMY] [Enemy1] ROT_CHANGE: P1:visible -> P3:corner, state=SEEKING_COVER, target=-19.7°, current=-24.7°, player=(266,1493), corner_timer=0.03
[18:13:51] [ENEMY] [Enemy1] ROT_CHANGE: P3:corner -> P1:visible, state=SEEKING_COVER, target=52.7°, current=9.6°, player=(255,1493), corner_timer=0.03
[18:13:51] [ENEMY] [Enemy2] FLANKING corner check: angle 3.4°
[18:13:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(207.1605, 1497.503), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=2
[18:13:51] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(207,1491), corner_timer=-0.02
[18:13:51] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:51] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(202,1490), corner_timer=0.30
[18:13:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(648.2849, 1436.065), source=ENEMY (Enemy10), range=1469, listeners=9
[18:13:51] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=5
[18:13:51] [ENEMY] [Enemy1] ROT_CHANGE: P1:visible -> P3:corner, state=SEEKING_COVER, target=-19.7°, current=149.0°, player=(182,1484), corner_timer=0.03
[18:13:51] [ENEMY] [Enemy1] ROT_CHANGE: P3:corner -> P1:visible, state=SEEKING_COVER, target=72.6°, current=111.8°, player=(177,1483), corner_timer=0.03
[18:13:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(612.5905, 1436.065), source=ENEMY (Enemy10), range=1469, listeners=9
[18:13:51] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=4
[18:13:51] [INFO] [LastChance] Threat detected: Bullet
[18:13:51] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:51] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:51] [ENEMY] [Enemy1] ROT_CHANGE: P1:visible -> P3:corner, state=SEEKING_COVER, target=-19.7°, current=-156.9°, player=(154,1480), corner_timer=0.03
[18:13:51] [ENEMY] [Enemy2] FLANKING corner check: angle -175.7°
[18:13:51] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[18:13:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(582.02045, 1451.6566), shooter_id=37510717640936, bullet_pos=(44.108585, 1515.3252)
[18:13:51] [INFO] [Bullet] Using shooter_position, distance=541,66675
[18:13:51] [INFO] [Bullet] Distance to wall: 541,66675 (36,883087% of viewport)
[18:13:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:51] [INFO] [Bullet] Starting wall penetration at (44.108585, 1515.3252)
[18:13:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(576.9973, 1436.065), source=ENEMY (Enemy10), range=1469, listeners=9
[18:13:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[18:13:51] [INFO] [Bullet] Raycast backward hit penetrating body at distance 34,473553
[18:13:51] [INFO] [Bullet] Body exited signal received for penetrating body
[18:13:51] [INFO] [Bullet] Exiting penetration at (-2.2345886, 1520.8105) after traveling 41,66667 pixels through wall
[18:13:51] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[18:13:51] [INFO] [LastChance] Threat detected: @Area2D@5914
[18:13:51] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:51] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:51] [ENEMY] [Enemy10] Hit taken, damage: 1, health: 4/4 -> 3/4
[18:13:51] [ENEMY] [Enemy10] ImpactEffectsManager found, calling spawn_blood_effect
[18:13:51] [INFO] [ImpactEffects] spawn_blood_effect called at (567.4164, 1441.864), dir=(0.978561, -0.205957), lethal=false
[18:13:51] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:51] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:51] [INFO] [ImpactEffects] Blood effect spawned at (567.4164, 1441.864) (scale=0.5)
[18:13:51] [INFO] [Player] Spawning blood effect at (128.45697, 1481.5931), dir=(1, 0), lethal=False (C#)
[18:13:51] [INFO] [ImpactEffects] spawn_blood_effect called at (128.457, 1481.593), dir=(1, 0), lethal=false
[18:13:51] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:51] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:51] [INFO] [ImpactEffects] Blood effect spawned at (128.457, 1481.593) (scale=1)
[18:13:51] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 5.0
[18:13:51] [INFO] [LastChance] Player health updated (C# Damaged): 5.0
[18:13:51] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(128,1481), corner_timer=-0.02
[18:13:51] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:51] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(127,1481), corner_timer=0.30
[18:13:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(126.1451, 1488.341), source=PLAYER (MakarovPM), range=1469, listeners=9
[18:13:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=2
[18:13:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(555.9064, 1451.35), source=ENEMY (Enemy10), range=1469, listeners=9
[18:13:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[18:13:51] [INFO] [BloodyFeet:Enemy10] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[18:13:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(510.51755, 1450.5238), shooter_id=37510717640936, bullet_pos=(65.36835, 1559.6644)
[18:13:51] [INFO] [Bullet] Using shooter_position, distance=458,33337
[18:13:51] [INFO] [Bullet] Distance to wall: 458,33337 (31,208763% of viewport)
[18:13:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:51] [INFO] [Bullet] Starting wall penetration at (65.36835, 1559.6644)
[18:13:51] [INFO] [Bullet] Raycast backward hit penetrating body at distance 12,31002
[18:13:51] [INFO] [Bullet] Body exited signal received for penetrating body
[18:13:51] [INFO] [Bullet] Exiting penetration at (20.044071, 1570.777) after traveling 41,66667 pixels through wall
[18:13:51] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[18:13:51] [INFO] [LastChance] Threat detected: Bullet
[18:13:51] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:51] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(540.7262, 1472.47), source=ENEMY (Enemy10), range=1469, listeners=9
[18:13:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[18:13:51] [ENEMY] [Enemy1] Player ammo empty: false -> true
[18:13:51] [ENEMY] [Enemy2] Player ammo empty: false -> true
[18:13:51] [ENEMY] [Enemy4] Player ammo empty: false -> true
[18:13:51] [ENEMY] [Enemy5] Player ammo empty: false -> true
[18:13:51] [ENEMY] [Enemy6] Player ammo empty: false -> true
[18:13:51] [ENEMY] [Enemy7] Player ammo empty: false -> true
[18:13:51] [ENEMY] [Enemy8] Player ammo empty: false -> true
[18:13:51] [ENEMY] [Enemy9] Player ammo empty: false -> true
[18:13:51] [ENEMY] [Enemy10] Player ammo empty: false -> true
[18:13:51] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(132.2156, 1484.782), source=PLAYER (Player), range=600, listeners=9
[18:13:51] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (132.2156, 1484.782), intensity=0.06, distance=209
[18:13:51] [ENEMY] [Enemy1] Vulnerability sound triggered pursuit - transitioning from SEEKING_COVER to PURSUING
[18:13:51] [ENEMY] [Enemy10] Heard player EMPTY_CLICK at (132.2156, 1484.782), intensity=0.01, distance=408
[18:13:51] [ENEMY] [Enemy10] Vulnerability sound triggered pursuit - transitioning from RETREATING to PURSUING
[18:13:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=6, self=0, below_threshold=1
[18:13:51] [ENEMY] [Enemy1] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=104.6°, current=-98.4°, player=(132,1484), corner_timer=0.03
[18:13:51] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=209), can_see=false
[18:13:51] [ENEMY] [Enemy1] Pursuing vulnerability sound at (132.2156, 1484.782), distance=209
[18:13:51] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=FLANKING, target=123.3°, current=76.0°, player=(132,1484), corner_timer=0.00
[18:13:51] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=592), can_see=true
[18:13:51] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) - pursuing to attack (dist=592)
[18:13:51] [ENEMY] [Enemy2] Warning: No valid flank position (both sides behind walls)
[18:13:51] [ENEMY] [Enemy2] FLANKING started: target=(42.42194, 1306.072), side=left, pos=(457.4595, 990.0686)
[18:13:51] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=712), can_see=false
[18:13:51] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1935), can_see=false
[18:13:51] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=2092), can_see=false
[18:13:51] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1591), can_see=false
[18:13:51] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1768), can_see=false
[18:13:51] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1969), can_see=false
[18:13:51] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=408), can_see=true
[18:13:51] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) - pursuing to attack (dist=408)
[18:13:51] [ENEMY] [Enemy10] Pursuing vulnerability sound at (132.2156, 1484.782), distance=408
[18:13:52] [ENEMY] [Enemy2] Warning: No valid flank position (both sides behind walls)
[18:13:52] [ENEMY] [Enemy2] FLANKING started: target=(334.2073, 1496.733), side=right, pos=(457.0605, 995.387)
[18:13:52] [ENEMY] [Enemy2] Warning: No valid flank position (both sides behind walls)
[18:13:52] [ENEMY] [Enemy2] FLANKING started: target=(336.873, 1496.987), side=right, pos=(456.6614, 1000.705)
[18:13:52] [ENEMY] [Enemy2] Warning: No valid flank position (both sides behind walls)
[18:13:52] [ENEMY] [Enemy2] FLANKING started: target=(339.877, 1497.13), side=right, pos=(456.2623, 1006.024)
[18:13:52] [ENEMY] [Enemy2] Warning: No valid flank position (both sides behind walls)
[18:13:52] [ENEMY] [Enemy2] FLANKING started: target=(343.2194, 1497.161), side=right, pos=(455.8632, 1011.342)
[18:13:52] [INFO] [LastChance] Threat detected: @Area2D@5930
[18:13:52] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:52] [ENEMY] [Enemy2] Warning: No valid flank position (both sides behind walls)
[18:13:52] [ENEMY] [Enemy2] FLANKING started: target=(346.9001, 1497.076), side=right, pos=(455.4641, 1016.66)
[18:13:52] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P2:combat_state, state=FLANKING, target=123.2°, current=93.2°, player=(151,1485), corner_timer=0.00
[18:13:52] [ENEMY] [Enemy10] Player empty ammo - priority attack triggered
[18:13:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(508.6263, 1476.917), source=ENEMY (Enemy10), range=1469, listeners=9
[18:13:52] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[18:13:52] [ENEMY] [Enemy2] FLANKING corner check: angle 4.3°
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (656.5634, 1431.909) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (632.0571, 1448.291) (added to group)
[18:13:52] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(165.2436, 1485.707), source=PLAYER (Player), range=600, listeners=9
[18:13:52] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (165.2436, 1485.707), intensity=0.10, distance=157
[18:13:52] [ENEMY] [Enemy10] Heard player EMPTY_CLICK at (165.2436, 1485.707), intensity=0.02, distance=327
[18:13:52] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=6, self=0, below_threshold=1
[18:13:52] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(165,1485), corner_timer=-0.02
[18:13:52] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(473.3292, 1482.262), shooter_id=37510717640936, bullet_pos=(57.23995, 1504.1895)
[18:13:52] [INFO] [Bullet] Using shooter_position, distance=416,6666
[18:13:52] [INFO] [Bullet] Distance to wall: 416,6666 (28,371597% of viewport)
[18:13:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:52] [INFO] [Bullet] Starting wall penetration at (57.23995, 1504.1895)
[18:13:52] [INFO] [LastChance] Threat detected: Bullet
[18:13:52] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:52] [INFO] [ReplayManager] Recording frame 1020 (16,8s): player_valid=True, enemies=10
[18:13:52] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(170,1485), corner_timer=0.30
[18:13:52] [INFO] [Bullet] Raycast backward hit penetrating body at distance 21,3917
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (637.9622, 1460.032) (added to group)
[18:13:52] [INFO] [Bullet] Body exited signal received for penetrating body
[18:13:52] [INFO] [Bullet] Exiting penetration at (10.637947, 1506.6454) after traveling 41,666668 pixels through wall
[18:13:52] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[18:13:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(126.1451, 1488.341), shooter_id=37511606833437, bullet_pos=(499.7414, 1399.562)
[18:13:52] [INFO] [Bullet] Using shooter_position, distance=383.999969482422
[18:13:52] [INFO] [Bullet] Distance to wall: 383.999969482422 (26.1472640357385% of viewport)
[18:13:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:52] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:52] [INFO] [Player] Spawning blood effect at (187.07738, 1485.7167), dir=(1, 0), lethal=False (C#)
[18:13:52] [INFO] [ImpactEffects] spawn_blood_effect called at (187.0774, 1485.717), dir=(1, 0), lethal=false
[18:13:52] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:52] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:52] [INFO] [ImpactEffects] Blood effect spawned at (187.0774, 1485.717) (scale=1)
[18:13:52] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 4.0
[18:13:52] [INFO] [LastChance] Player health updated (C# Damaged): 4.0
[18:13:52] [ENEMY] [Enemy10] Player empty ammo - priority attack triggered
[18:13:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(471.3052, 1477.872), source=ENEMY (Enemy10), range=1469, listeners=9
[18:13:52] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (679.8749, 1499.697) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (197.7523, 1546.45) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (220.5097, 1540.16) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (211.0921, 1495.832) (added to group)
[18:13:52] [INFO] [LastChance] Threat detected: @Area2D@5947
[18:13:52] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (715.4905, 1513.768) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (208.2531, 1550.113) (added to group)
[18:13:52] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(214.5774, 1485.717), source=PLAYER (Player), range=600, listeners=9
[18:13:52] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (214.5774, 1485.717), intensity=0.18, distance=118
[18:13:52] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (214.5774, 1485.717), intensity=0.01, distance=464
[18:13:52] [ENEMY] [Enemy10] Heard player EMPTY_CLICK at (214.5774, 1485.717), intensity=0.05, distance=230
[18:13:52] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=6, self=0, below_threshold=0
[18:13:52] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (735.7664, 1453.718) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (699.1332, 1534.952) (added to group)
[18:13:52] [ENEMY] [Enemy10] Player empty ammo - priority attack triggered
[18:13:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(433.9879, 1478.965), source=ENEMY (Enemy10), range=1469, listeners=9
[18:13:52] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=3
[18:13:52] [INFO] [LastChance] Threat detected: Bullet
[18:13:52] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:52] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[18:13:52] [INFO] [BloodyFeet:Enemy2] Blood ran out - no more footprints
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (721.3547, 1423.452) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (711.8522, 1515.298) (added to group)
[18:13:52] [ENEMY] [Enemy1] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=49.2°, current=23.8°, player=(242,1485), corner_timer=0.03
[18:13:52] [ENEMY] [Enemy1] Player empty ammo - priority attack triggered
[18:13:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(170.7393, 1402.993), source=ENEMY (Enemy1), range=1469, listeners=9
[18:13:52] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=1, below_threshold=1
[18:13:52] [INFO] [Player] Spawning blood effect at (247.57738, 1485.7167), dir=(1, 0), lethal=False (C#)
[18:13:52] [INFO] [ImpactEffects] spawn_blood_effect called at (247.5774, 1485.717), dir=(1, 0), lethal=false
[18:13:52] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:52] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:52] [INFO] [ImpactEffects] Blood effect spawned at (247.5774, 1485.717) (scale=1)
[18:13:52] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[18:13:52] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[18:13:52] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
[18:13:52] [INFO] [Player] Spawning blood effect at (253.07738, 1485.7167), dir=(1, 0), lethal=False (C#)
[18:13:52] [INFO] [ImpactEffects] spawn_blood_effect called at (253.0774, 1485.717), dir=(1, 0), lethal=false
[18:13:52] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:52] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:52] [INFO] [ImpactEffects] Blood effect spawned at (253.0774, 1485.717) (scale=1)
[18:13:52] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[18:13:52] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[18:13:52] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
[18:13:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(418.422, 1472.973), source=ENEMY (Enemy10), range=1469, listeners=9
[18:13:52] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=1, below_threshold=2
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (701.0156, 1531.195) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (276.978, 1582.667) (added to group)
[18:13:52] [ENEMY] [Enemy4] Warning: No valid flank position (both sides behind walls)
[18:13:52] [ENEMY] [Enemy4] FLANKING started: target=(458.0659, 1500.012), side=right, pos=(614.0583, 960.6505)
[18:13:52] [ENEMY] [Enemy4] State: PURSUING -> FLANKING
[18:13:52] [ENEMY] [Enemy2] FLANKING corner check: angle -2.5°
[18:13:52] [ENEMY] [Enemy10] Player empty ammo - priority attack triggered
[18:13:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(415.1525, 1468.759), source=ENEMY (Enemy10), range=1469, listeners=9
[18:13:52] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=1, below_threshold=2
[18:13:52] [INFO] [LastChance] Threat detected: @Area2D@5990
[18:13:52] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:52] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(274,1483), corner_timer=-0.02
[18:13:52] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (334.8, 1502.233) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (269.4291, 1466.543) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (283.4578, 1478.925) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (259.6514, 1513.627) (added to group)
[18:13:52] [INFO] [Player] Spawning blood effect at (279.30176, 1482.6371), dir=(1, 0), lethal=False (C#)
[18:13:52] [INFO] [ImpactEffects] spawn_blood_effect called at (279.3018, 1482.637), dir=(1, 0), lethal=false
[18:13:52] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:52] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:52] [INFO] [ImpactEffects] Blood effect spawned at (279.3018, 1482.637) (scale=1)
[18:13:52] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[18:13:52] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[18:13:52] [INFO] [PenultimateHit] Starting penultimate hit effect:
[18:13:52] [INFO] [PenultimateHit]   - Time scale: 0.10
[18:13:52] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[18:13:52] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[18:13:52] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[18:13:52] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[18:13:52] [INFO] [PenultimateHit] Applying saturation to 9 enemies
[18:13:52] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[18:13:52] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[18:13:52] [ENEMY] [Enemy1] Player empty ammo - priority attack triggered
[18:13:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(158.967, 1405.094), source=ENEMY (Enemy1), range=1469, listeners=9
[18:13:52] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=1, below_threshold=1
[18:13:52] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(279,1482), corner_timer=0.30
[18:13:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(410.2482, 1462.438), source=ENEMY (Enemy10), range=1469, listeners=9
[18:13:52] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=1, below_threshold=2
[18:13:52] [INFO] [LastChance] Threat detected: @Area2D@6002
[18:13:52] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:52] [INFO] [LastChance] Threat detected: @Area2D@5998
[18:13:52] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:52] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=366), can_see=false
[18:13:52] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=632), can_see=false
[18:13:52] [ENEMY] [Enemy5] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1812), can_see=false
[18:13:52] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1959), can_see=false
[18:13:52] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1449), can_see=false
[18:13:52] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1616), can_see=false
[18:13:52] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1817), can_see=false
[18:13:52] [INFO] [Player] Spawning blood effect at (288.89856, 1479.2495), dir=(1, 0), lethal=True (C#)
[18:13:52] [INFO] [ImpactEffects] spawn_blood_effect called at (288.8986, 1479.25), dir=(1, 0), lethal=true
[18:13:52] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:52] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[18:13:52] [INFO] [ImpactEffects] Blood effect spawned at (288.8986, 1479.25) (scale=1.5)
[18:13:52] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[18:13:52] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[18:13:52] [INFO] [CinemaEffects] Player died - triggering death effects
[18:13:52] [INFO] [CinemaEffects] Death effects triggered - starting cigarette burn, expanding spots, and end of reel (top-right)
[18:13:52] [INFO] [PenultimateHit] Player died - ending penultimate effect
[18:13:52] [INFO] [PenultimateHit] Ending penultimate hit effect
[18:13:52] [INFO] [PenultimateHit] Starting visual effects fade-out over 400ms
[18:13:52] [INFO] [LastChance] Player died
[18:13:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(351.62137, 1485.9443), shooter_id=37510717640936, bullet_pos=(32.508453, 1582.2676)
[18:13:52] [INFO] [Bullet] Using shooter_position, distance=333,3335
[18:13:52] [INFO] [Bullet] Distance to wall: 333,3335 (22,69729% of viewport)
[18:13:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:52] [INFO] [Bullet] Starting wall penetration at (32.508453, 1582.2676)
[18:13:52] [ENEMY] [Enemy10] Player empty ammo - priority attack triggered
[18:13:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(403.7091, 1454.011), source=ENEMY (Enemy10), range=1469, listeners=9
[18:13:52] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=1, below_threshold=2
[18:13:52] [INFO] [Bullet] Raycast backward hit penetrating body at distance 46,13558
[18:13:52] [INFO] [Bullet] Body exited signal received for penetrating body
[18:13:52] [INFO] [Bullet] Exiting penetration at (-12.167355, 1595.7528) after traveling 41,666676 pixels through wall
[18:13:52] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[18:13:52] [ENEMY] [Enemy1] Player empty ammo - priority attack triggered
[18:13:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(145.9808, 1383.089), source=ENEMY (Enemy1), range=1469, listeners=9
[18:13:52] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=1, below_threshold=1
[18:13:52] [INFO] [LastChance] Threat detected: Bullet
[18:13:52] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (258.666, 1497.322) (added to group)
[18:13:52] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[18:13:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:52] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[18:13:52] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[18:13:52] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[18:13:52] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[18:13:52] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[18:13:52] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[18:13:52] [INFO] [LastChance] Resetting all effects (scene change detected)
[18:13:52] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[18:13:52] [INFO] [CinemaEffects] Death effects reset
[18:13:52] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[18:13:52] [ENEMY] [Enemy1] Death animation component initialized
[18:13:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:52] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[18:13:52] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[18:13:52] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[18:13:52] [ENEMY] [Enemy2] Death animation component initialized
[18:13:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:52] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[18:13:52] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[18:13:52] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[18:13:52] [ENEMY] [Enemy3] Death animation component initialized
[18:13:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:52] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[18:13:52] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[18:13:52] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[18:13:52] [INFO] [EnemyGrenade] Initialized: 1 grenades
[18:13:52] [ENEMY] [Enemy4] Death animation component initialized
[18:13:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:52] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[18:13:52] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[18:13:52] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[18:13:52] [ENEMY] [Enemy5] Death animation component initialized
[18:13:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:52] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[18:13:52] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[18:13:52] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[18:13:52] [ENEMY] [Enemy6] Death animation component initialized
[18:13:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:52] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[18:13:52] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[18:13:52] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[18:13:52] [ENEMY] [Enemy7] Death animation component initialized
[18:13:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:52] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[18:13:52] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[18:13:52] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[18:13:52] [INFO] [EnemyGrenade] Initialized: 1 grenades
[18:13:52] [ENEMY] [Enemy8] Death animation component initialized
[18:13:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:52] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[18:13:52] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[18:13:52] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[18:13:52] [ENEMY] [Enemy9] Death animation component initialized
[18:13:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:52] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[18:13:52] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[18:13:52] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[18:13:52] [ENEMY] [Enemy10] Death animation component initialized
[18:13:52] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:52] [INFO] [BloodyFeet:Player] Footprint scene loaded
[18:13:52] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[18:13:52] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[18:13:52] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[18:13:52] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[18:13:52] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[18:13:52] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[18:13:52] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[18:13:52] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[18:13:52] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[18:13:52] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[18:13:52] [INFO] [Player.Flashlight] Flashlight is selected, initializing...
[18:13:52] [INFO] [FlashlightEffect] PointLight2D found, energy=0.0, shadow=true
[18:13:52] [INFO] [FlashlightEffect] Flashlight sound loaded
[18:13:52] [INFO] [Player.Flashlight] Flashlight equipped and attached to PlayerModel at offset (20, 0)
[18:13:52] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 10/10
[18:13:52] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[18:13:52] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[18:13:52] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[18:13:52] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[18:13:52] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[18:13:52] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[18:13:52] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[18:13:52] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[18:13:52] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[18:13:52] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[18:13:52] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[18:13:52] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[18:13:52] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[18:13:52] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[18:13:52] [INFO] [ScoreManager] Level started with 10 enemies
[18:13:52] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[18:13:52] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[18:13:52] [INFO] [ReplayManager] Replay data cleared
[18:13:52] [INFO] [BuildingLevel] Previous replay data cleared
[18:13:52] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[18:13:52] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[18:13:52] [INFO] [ReplayManager] Level: BuildingLevel
[18:13:52] [INFO] [ReplayManager] Player: Player (valid: True)
[18:13:52] [INFO] [ReplayManager] Enemies count: 10
[18:13:52] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[18:13:52] [INFO] [ReplayManager]   Enemy 0: Enemy1
[18:13:52] [INFO] [ReplayManager]   Enemy 1: Enemy2
[18:13:52] [INFO] [ReplayManager]   Enemy 2: Enemy3
[18:13:52] [INFO] [ReplayManager]   Enemy 3: Enemy4
[18:13:52] [INFO] [ReplayManager]   Enemy 4: Enemy5
[18:13:52] [INFO] [ReplayManager]   Enemy 5: Enemy6
[18:13:52] [INFO] [ReplayManager]   Enemy 6: Enemy7
[18:13:52] [INFO] [ReplayManager]   Enemy 7: Enemy8
[18:13:52] [INFO] [ReplayManager]   Enemy 8: Enemy9
[18:13:52] [INFO] [ReplayManager]   Enemy 9: Enemy10
[18:13:52] [INFO] [BuildingLevel] Replay recording started successfully
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (338.3694, 1513.395) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (276.3519, 1528.319) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (309.2985, 1565.625) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (355.9037, 1572.024) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (312.2915, 1528.74) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (310.9424, 1488.639) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (315.0252, 1518.079) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (332.8576, 1500.572) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (347.4733, 1490.091) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (293.7802, 1485.357) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (351.5485, 1537.146) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (342.5061, 1520.512) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (331.7097, 1501.295) (added to group)
[18:13:52] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[18:13:52] [INFO] [CinemaEffects] Found player node: Player
[18:13:52] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[18:13:52] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[18:13:52] [ENEMY] [Enemy1] Registered as sound listener
[18:13:52] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[18:13:52] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[18:13:52] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[18:13:52] [ENEMY] [Enemy2] Registered as sound listener
[18:13:52] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[18:13:52] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[18:13:52] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[18:13:52] [ENEMY] [Enemy3] Registered as sound listener
[18:13:52] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[18:13:52] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[18:13:52] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[18:13:52] [ENEMY] [Enemy4] Registered as sound listener
[18:13:52] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[18:13:52] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[18:13:52] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[18:13:52] [ENEMY] [Enemy5] Registered as sound listener
[18:13:52] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[18:13:52] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[18:13:52] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[18:13:52] [ENEMY] [Enemy6] Registered as sound listener
[18:13:52] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[18:13:52] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[18:13:52] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[18:13:52] [ENEMY] [Enemy7] Registered as sound listener
[18:13:52] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[18:13:52] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[18:13:52] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[18:13:52] [ENEMY] [Enemy8] Registered as sound listener
[18:13:52] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[18:13:52] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[18:13:52] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[18:13:52] [ENEMY] [Enemy9] Registered as sound listener
[18:13:52] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[18:13:52] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[18:13:52] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[18:13:52] [ENEMY] [Enemy10] Registered as sound listener
[18:13:52] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[18:13:52] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[18:13:52] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[18:13:52] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:13:52] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:13:52] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:13:52] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:13:52] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:13:52] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:13:52] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=78.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:13:52] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:13:52] [INFO] [Player] Detecting weapon pose (frame 3)...
[18:13:52] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[18:13:52] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[18:13:52] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[18:13:52] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[18:13:52] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[18:13:52] [INFO] [LastChance] Found player: Player
[18:13:52] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[18:13:52] [INFO] [LastChance] Connected to player Damaged signal (C#)
[18:13:52] [INFO] [LastChance] Connected to player Died signal (C#)
[18:13:52] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (371.9426, 1559.54) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (317.7495, 1527.531) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (377.0483, 1566.213) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (331.9009, 1530.828) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (341.1476, 1502.807) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (409.9958, 1507.72) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (344.6556, 1561.509) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (340.7548, 1490.991) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (323.5922, 1524.56) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (331.4773, 1514.345) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (402.4191, 1530.074) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (358.9197, 1545.668) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (337.6231, 1503.365) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (384.0854, 1518.196) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (357.4028, 1501.61) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (383.3443, 1535.053) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (398.225, 1499.595) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (386.6688, 1472.637) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (397.9089, 1577.613) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (405.977, 1504.48) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (368.838, 1551.261) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (422.6086, 1485.883) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (395.2157, 1513.281) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (379.3587, 1541.043) (added to group)
[18:13:52] [INFO] [BloodDecal] Blood puddle created at (423.8133, 1520.185) (added to group)
[18:13:53] [INFO] [BloodDecal] Blood puddle created at (443.7601, 1559.835) (added to group)
[18:13:53] [INFO] [BloodDecal] Blood puddle created at (378.8954, 1547.281) (added to group)
[18:13:53] [INFO] [BloodDecal] Blood puddle created at (390.9174, 1514.02) (added to group)
[18:13:53] [INFO] [BloodDecal] Blood puddle created at (399.3299, 1520.145) (added to group)
[18:13:53] [INFO] [BloodDecal] Blood puddle created at (408.8208, 1545.575) (added to group)
[18:13:53] [INFO] [BloodDecal] Blood puddle created at (384.0433, 1539.446) (added to group)
[18:13:53] [INFO] [BloodDecal] Blood puddle created at (411.4319, 1530.489) (added to group)
[18:13:53] [INFO] [BloodDecal] Blood puddle created at (446.3623, 1545.783) (added to group)
[18:13:53] [INFO] [BloodDecal] Blood puddle created at (428.8885, 1536.515) (added to group)
[18:13:53] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[18:13:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(445.8654, 795.2783), source=PLAYER (MakarovPM), range=1469, listeners=19
[18:13:54] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[18:13:54] [ENEMY] [Enemy1] Heard gunshot at (445.8654, 795.2783), source_type=0, intensity=0.01, distance=469
[18:13:54] [ENEMY] [Enemy2] Heard gunshot at (445.8654, 795.2783), source_type=0, intensity=0.04, distance=250
[18:13:54] [ENEMY] [Enemy3] Heard gunshot at (445.8654, 795.2783), source_type=0, intensity=0.04, distance=258
[18:13:54] [ENEMY] [Enemy4] Heard gunshot at (445.8654, 795.2783), source_type=0, intensity=0.02, distance=369
[18:13:54] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:13:54] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=71.6°, current=-157.5°, player=(445,789), corner_timer=0.00
[18:13:54] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=79.1°, current=-101.3°, player=(445,789), corner_timer=0.00
[18:13:54] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=171.2°, current=11.3°, player=(445,789), corner_timer=0.00
[18:13:54] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-162.6°, current=-67.5°, player=(445,789), corner_timer=0.00
[18:13:54] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[18:13:54] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[18:13:54] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=172.2°, current=-174.7°, player=(444,785), corner_timer=0.00
[18:13:54] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(444,785), corner_timer=0.30
[18:13:54] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(444,785), corner_timer=0.30
[18:13:54] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 3/3 -> 2/3
[18:13:54] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[18:13:54] [INFO] [ImpactEffects] spawn_blood_effect called at (684.1606, 752.258), dir=(0.972817, -0.231574), lethal=false
[18:13:54] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:54] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:54] [INFO] [ImpactEffects] Blood effect spawned at (684.1606, 752.258) (scale=0.5)
[18:13:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(402.2158, 760.1033), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:54] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:13:54] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[18:13:54] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(388,758), corner_timer=-0.02
[18:13:54] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[18:13:54] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(388,758), corner_timer=-0.02
[18:13:54] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[18:13:54] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(384,759), corner_timer=0.30
[18:13:54] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(384,759), corner_timer=0.30
[18:13:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(678.5038, 746.8137), source=ENEMY (Enemy3), range=1469, listeners=10
[18:13:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[18:13:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(671.891, 738.444), source=ENEMY (Enemy3), range=1469, listeners=10
[18:13:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[18:13:54] [INFO] [BloodDecal] Blood puddle created at (763.0366, 757.1825) (added to group)
[18:13:54] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[18:13:54] [INFO] [BloodDecal] Blood puddle created at (740.3213, 777.7686) (added to group)
[18:13:54] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[18:13:54] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[18:13:54] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[18:13:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(346.7586, 799.1945), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:54] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:13:54] [INFO] [LastChance] Threat detected: @Area2D@6326
[18:13:54] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:54] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(665.2782, 730.0744), source=ENEMY (Enemy3), range=1469, listeners=10
[18:13:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[18:13:54] [INFO] [BloodDecal] Blood puddle created at (785.2122, 797.265) (added to group)
[18:13:54] [INFO] [BloodDecal] Blood puddle created at (760.4337, 749.8116) (added to group)
[18:13:54] [INFO] [LastChance] Threat detected: @Area2D@6332
[18:13:54] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:54] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:54] [INFO] [Player] Spawning blood effect at (330.4369, 806.9031), dir=(1, 0), lethal=False (C#)
[18:13:54] [INFO] [ImpactEffects] spawn_blood_effect called at (330.4369, 806.9031), dir=(1, 0), lethal=false
[18:13:54] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:54] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:54] [INFO] [ImpactEffects] Blood effect spawned at (330.4369, 806.9031) (scale=1)
[18:13:54] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 9.0
[18:13:54] [INFO] [LastChance] Player health updated (C# Damaged): 9.0
[18:13:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(611.3071, 758.56586), shooter_id=43355950025763, bullet_pos=(56.598907, 939.0551)
[18:13:54] [INFO] [Bullet] Using shooter_position, distance=583,3332
[18:13:54] [INFO] [Bullet] Distance to wall: 583,3332 (39,72023% of viewport)
[18:13:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:54] [INFO] [Bullet] Starting wall penetration at (56.598907, 939.0551)
[18:13:54] [INFO] [Bullet] Raycast backward hit penetrating body at distance 20,798367
[18:13:54] [INFO] [Bullet] Body exited signal received for penetrating body
[18:13:54] [INFO] [Bullet] Exiting penetration at (12.22224, 953.49426) after traveling 41,666668 pixels through wall
[18:13:54] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[18:13:54] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(307,817), corner_timer=-0.02
[18:13:54] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[18:13:54] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(302,818), corner_timer=0.30
[18:13:54] [INFO] [BloodDecal] Blood puddle created at (781.7547, 821.3469) (added to group)
[18:13:55] [INFO] [BloodDecal] Blood puddle created at (790.4623, 749.2277) (added to group)
[18:13:55] [INFO] [BloodDecal] Blood puddle created at (858.1244, 824.3974) (added to group)
[18:13:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(600.2866, 750.90265), shooter_id=43355950025763, bullet_pos=(59.816944, 786.8923)
[18:13:55] [INFO] [Bullet] Using shooter_position, distance=541,6666
[18:13:55] [INFO] [Bullet] Distance to wall: 541,6666 (36,883076% of viewport)
[18:13:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(402.2158, 760.1033), shooter_id=43359305468708, bullet_pos=(918.7356, 624.5924)
[18:13:55] [INFO] [Bullet] Using shooter_position, distance=534
[18:13:55] [INFO] [Bullet] Distance to wall: 534 (36.3610419394148% of viewport)
[18:13:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:55] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:55] [INFO] [LastChance] Threat detected: @Area2D@6332
[18:13:55] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:55] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:55] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=-128.3°, current=155.4°, player=(258,819), corner_timer=0.00
[18:13:55] [INFO] [BloodDecal] Blood puddle created at (376.3156, 834.3916) (added to group)
[18:13:55] [INFO] [BloodDecal] Blood puddle created at (831.5767, 793.5956) (added to group)
[18:13:55] [INFO] [BloodDecal] Blood puddle created at (409.872, 839.0141) (added to group)
[18:13:55] [INFO] [BloodDecal] Blood puddle created at (379.9388, 848.0255) (added to group)
[18:13:55] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[18:13:55] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[18:13:55] [INFO] [BloodDecal] Blood puddle created at (795.3702, 796.0529) (added to group)
[18:13:55] [INFO] [BloodDecal] Blood puddle created at (417.0356, 848.08) (added to group)
[18:13:55] [INFO] [BloodDecal] Blood puddle created at (810.8566, 786.2326) (added to group)
[18:13:55] [INFO] [BloodDecal] Blood puddle created at (422.5389, 872.3918) (added to group)
[18:13:55] [INFO] [BloodDecal] Blood puddle created at (411.5167, 869.4556) (added to group)
[18:13:55] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(198,819), corner_timer=-0.02
[18:13:55] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[18:13:55] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(194,818), corner_timer=0.30
[18:13:55] [INFO] [BloodDecal] Blood puddle created at (485.4257, 818.0583) (added to group)
[18:13:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(346.7586, 799.1945), shooter_id=43359305468708, bullet_pos=(911.6693, 651.0978)
[18:13:55] [INFO] [Bullet] Using shooter_position, distance=584.000549316406
[18:13:55] [INFO] [Bullet] Distance to wall: 584.000549316406 (39.7656712852718% of viewport)
[18:13:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:55] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:55] [INFO] [BloodDecal] Blood puddle created at (430.58, 822.5054) (added to group)
[18:13:55] [INFO] [BloodDecal] Blood puddle created at (486.1903, 817.0311) (added to group)
[18:13:55] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[18:13:55] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:55] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[18:13:55] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[18:13:55] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[18:13:55] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[18:13:55] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[18:13:55] [INFO] [LastChance] Resetting all effects (scene change detected)
[18:13:55] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[18:13:55] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[18:13:55] [ENEMY] [Enemy1] Death animation component initialized
[18:13:55] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:55] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[18:13:55] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[18:13:55] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[18:13:55] [ENEMY] [Enemy2] Death animation component initialized
[18:13:55] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:55] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[18:13:55] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[18:13:55] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[18:13:55] [ENEMY] [Enemy3] Death animation component initialized
[18:13:55] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:55] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[18:13:55] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[18:13:55] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[18:13:55] [ENEMY] [Enemy4] Death animation component initialized
[18:13:55] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:55] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[18:13:55] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[18:13:55] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[18:13:55] [ENEMY] [Enemy5] Death animation component initialized
[18:13:55] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:55] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[18:13:55] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[18:13:55] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[18:13:55] [ENEMY] [Enemy6] Death animation component initialized
[18:13:55] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:55] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[18:13:55] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[18:13:55] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[18:13:55] [ENEMY] [Enemy7] Death animation component initialized
[18:13:55] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:55] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[18:13:55] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[18:13:55] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[18:13:55] [ENEMY] [Enemy8] Death animation component initialized
[18:13:55] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:55] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[18:13:55] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[18:13:55] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[18:13:55] [ENEMY] [Enemy9] Death animation component initialized
[18:13:55] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:55] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[18:13:55] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[18:13:55] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[18:13:55] [ENEMY] [Enemy10] Death animation component initialized
[18:13:55] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:55] [INFO] [BloodyFeet:Player] Footprint scene loaded
[18:13:55] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[18:13:55] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[18:13:55] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[18:13:55] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[18:13:55] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[18:13:55] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[18:13:55] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[18:13:55] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[18:13:55] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[18:13:55] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[18:13:55] [INFO] [Player.Flashlight] Flashlight is selected, initializing...
[18:13:55] [INFO] [FlashlightEffect] PointLight2D found, energy=0.0, shadow=true
[18:13:55] [INFO] [FlashlightEffect] Flashlight sound loaded
[18:13:55] [INFO] [Player.Flashlight] Flashlight equipped and attached to PlayerModel at offset (20, 0)
[18:13:55] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 10/10
[18:13:55] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[18:13:55] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[18:13:55] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[18:13:55] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[18:13:55] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[18:13:55] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[18:13:55] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[18:13:55] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[18:13:55] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[18:13:55] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[18:13:55] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[18:13:55] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[18:13:55] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[18:13:55] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[18:13:55] [INFO] [ScoreManager] Level started with 10 enemies
[18:13:55] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[18:13:55] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[18:13:55] [INFO] [ReplayManager] Replay data cleared
[18:13:55] [INFO] [BuildingLevel] Previous replay data cleared
[18:13:55] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[18:13:55] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[18:13:55] [INFO] [ReplayManager] Level: BuildingLevel
[18:13:55] [INFO] [ReplayManager] Player: Player (valid: True)
[18:13:55] [INFO] [ReplayManager] Enemies count: 10
[18:13:55] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[18:13:55] [INFO] [ReplayManager]   Enemy 0: Enemy1
[18:13:55] [INFO] [ReplayManager]   Enemy 1: Enemy2
[18:13:55] [INFO] [ReplayManager]   Enemy 2: Enemy3
[18:13:55] [INFO] [ReplayManager]   Enemy 3: Enemy4
[18:13:55] [INFO] [ReplayManager]   Enemy 4: Enemy5
[18:13:55] [INFO] [ReplayManager]   Enemy 5: Enemy6
[18:13:55] [INFO] [ReplayManager]   Enemy 6: Enemy7
[18:13:55] [INFO] [ReplayManager]   Enemy 7: Enemy8
[18:13:55] [INFO] [ReplayManager]   Enemy 8: Enemy9
[18:13:55] [INFO] [ReplayManager]   Enemy 9: Enemy10
[18:13:55] [INFO] [BuildingLevel] Replay recording started successfully
[18:13:55] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[18:13:55] [INFO] [CinemaEffects] Found player node: Player
[18:13:55] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[18:13:55] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[18:13:55] [ENEMY] [Enemy1] Registered as sound listener
[18:13:55] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[18:13:55] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[18:13:55] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[18:13:55] [ENEMY] [Enemy2] Registered as sound listener
[18:13:55] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[18:13:55] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[18:13:55] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[18:13:55] [ENEMY] [Enemy3] Registered as sound listener
[18:13:55] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[18:13:55] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[18:13:55] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[18:13:55] [ENEMY] [Enemy4] Registered as sound listener
[18:13:55] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[18:13:55] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[18:13:55] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[18:13:55] [ENEMY] [Enemy5] Registered as sound listener
[18:13:55] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[18:13:55] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[18:13:55] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[18:13:55] [ENEMY] [Enemy6] Registered as sound listener
[18:13:55] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[18:13:55] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[18:13:55] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[18:13:55] [ENEMY] [Enemy7] Registered as sound listener
[18:13:55] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[18:13:55] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[18:13:55] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[18:13:55] [ENEMY] [Enemy8] Registered as sound listener
[18:13:55] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[18:13:55] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[18:13:55] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[18:13:55] [ENEMY] [Enemy9] Registered as sound listener
[18:13:55] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[18:13:55] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[18:13:55] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[18:13:55] [ENEMY] [Enemy10] Registered as sound listener
[18:13:55] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[18:13:55] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[18:13:55] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[18:13:55] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:13:55] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:13:55] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=281.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:13:55] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:13:55] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:13:55] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:13:55] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=78.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:13:55] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:13:55] [INFO] [Player] Detecting weapon pose (frame 3)...
[18:13:55] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[18:13:55] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[18:13:55] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[18:13:55] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[18:13:55] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[18:13:55] [INFO] [LastChance] Found player: Player
[18:13:55] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[18:13:55] [INFO] [LastChance] Connected to player Damaged signal (C#)
[18:13:55] [INFO] [LastChance] Connected to player Died signal (C#)
[18:13:55] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[18:13:55] [INFO] [BloodDecal] Blood puddle created at (452.2156, 883.8936) (added to group)
[18:13:56] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[18:13:56] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[18:13:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(436.4782, 804.3335), source=PLAYER (MakarovPM), range=1469, listeners=20
[18:13:57] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[18:13:57] [ENEMY] [Enemy1] Heard gunshot at (436.4782, 804.3335), source_type=0, intensity=0.01, distance=474
[18:13:57] [ENEMY] [Enemy2] Heard gunshot at (436.4782, 804.3335), source_type=0, intensity=0.04, distance=257
[18:13:57] [ENEMY] [Enemy3] Heard gunshot at (436.4782, 804.3335), source_type=0, intensity=0.03, distance=269
[18:13:57] [ENEMY] [Enemy4] Heard gunshot at (436.4782, 804.3335), source_type=0, intensity=0.02, distance=376
[18:13:57] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:13:57] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=73.1°, current=33.8°, player=(436,798), corner_timer=0.00
[18:13:57] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=81.6°, current=-67.5°, player=(436,798), corner_timer=0.00
[18:13:57] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=169.6°, current=-78.7°, player=(436,798), corner_timer=0.00
[18:13:57] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-164.4°, current=-67.5°, player=(436,798), corner_timer=0.00
[18:13:57] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[18:13:57] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[18:13:57] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(430,791), corner_timer=0.30
[18:13:57] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(430,791), corner_timer=0.30
[18:13:57] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 3/3 -> 2/3
[18:13:57] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[18:13:57] [INFO] [ImpactEffects] spawn_blood_effect called at (652.4106, 756.0776), dir=(0.971954, -0.235171), lethal=false
[18:13:57] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:57] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:57] [INFO] [ImpactEffects] Blood effect spawned at (652.4106, 756.0776) (scale=0.5)
[18:13:57] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=176.3°, current=166.4°, player=(400,772), corner_timer=0.00
[18:13:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(372.8304, 776.8278), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:57] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[18:13:57] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[18:13:57] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(351,778), corner_timer=-0.02
[18:13:57] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[18:13:57] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(351,778), corner_timer=-0.02
[18:13:57] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[18:13:57] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(347,781), corner_timer=0.30
[18:13:57] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(347,781), corner_timer=0.30
[18:13:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(648.0638, 762.7937), source=ENEMY (Enemy3), range=1469, listeners=10
[18:13:57] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[18:13:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(581.16235, 775.23517), shooter_id=44317200617750, bullet_pos=(500.78955, 797.2502)
[18:13:57] [INFO] [Bullet] Using shooter_position, distance=83,33336
[18:13:57] [INFO] [Bullet] Distance to wall: 83,33336 (5,674322% of viewport)
[18:13:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:57] [INFO] [Bullet] Starting wall penetration at (500.78955, 797.2502)
[18:13:57] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[18:13:57] [INFO] [Bullet] Exiting penetration at (455.78082, 809.5786) after traveling 41,66667 pixels through wall
[18:13:57] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[18:13:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(642.2682, 771.7485), source=ENEMY (Enemy3), range=1469, listeners=10
[18:13:57] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[18:13:57] [INFO] [BloodDecal] Blood puddle created at (718.4076, 789.1752) (added to group)
[18:13:57] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[18:13:57] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[18:13:57] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[18:13:57] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[18:13:57] [INFO] [BloodDecal] Blood puddle created at (758.3893, 802.684) (added to group)
[18:13:57] [INFO] [LastChance] Threat detected: Bullet
[18:13:57] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:57] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(636.4726, 780.7034), source=ENEMY (Enemy3), range=1469, listeners=10
[18:13:57] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[18:13:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(308.1063, 823.7051), source=PLAYER (MakarovPM), range=1469, listeners=10
[18:13:57] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=4, self=0, below_threshold=2
[18:13:57] [INFO] [BloodDecal] Blood puddle created at (781.7248, 791.2612) (added to group)
[18:13:57] [INFO] [BloodDecal] Blood puddle created at (710.3044, 747.7734) (added to group)
[18:13:57] [INFO] [LastChance] Threat detected: @Area2D@6619
[18:13:57] [INFO] [LastChance] Not in hard mode - effect disabled
[18:13:57] [INFO] [LastChance] Cannot trigger effect - conditions not met
[18:13:57] [INFO] [Player] Spawning blood effect at (296.43903, 829.3724), dir=(1, 0), lethal=False (C#)
[18:13:57] [INFO] [ImpactEffects] spawn_blood_effect called at (296.439, 829.3724), dir=(1, 0), lethal=false
[18:13:57] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[18:13:57] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[18:13:57] [INFO] [ImpactEffects] Blood effect spawned at (296.439, 829.3724) (scale=1)
[18:13:57] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 9.0
[18:13:57] [INFO] [LastChance] Player health updated (C# Damaged): 9.0
[18:13:57] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=122.9°, current=173.3°, player=(296,829), corner_timer=0.00
[18:13:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(630.6769, 789.6582), source=ENEMY (Enemy3), range=1469, listeners=10
[18:13:57] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[18:13:57] [INFO] [BloodDecal] Blood puddle created at (760.3002, 801.8936) (added to group)
[18:13:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(565.3143, 808.58765), shooter_id=44317200617750, bullet_pos=(523.65936, 807.5974)
[18:13:57] [INFO] [Bullet] Using shooter_position, distance=41,666676
[18:13:57] [INFO] [Bullet] Distance to wall: 41,666676 (2,8371606% of viewport)
[18:13:57] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[18:13:57] [INFO] [Bullet] Starting wall penetration at (523.65936, 807.5974)
[18:13:57] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[18:13:57] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23,000639
[18:13:57] [INFO] [Bullet] Body exited signal received for penetrating body
[18:13:57] [INFO] [Bullet] Exiting penetration at (477.00586, 806.48834) after traveling 41,666668 pixels through wall
[18:13:57] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[18:13:57] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[18:13:57] [INFO] [BloodDecal] Blood puddle created at (731.5238, 764.8694) (added to group)
[18:13:57] [INFO] [BloodDecal] Blood puddle created at (800.0443, 736.6573) (added to group)
[18:13:57] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(273,852), corner_timer=-0.02
[18:13:57] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[18:13:57] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(269,856), corner_timer=0.30
[18:13:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(570.01373, 795.3259), shooter_id=44317200617750, bullet_pos=(28.505924, 808.44495)
[18:13:57] [INFO] [Bullet] Using shooter_position, distance=541,6667
[18:13:57] [INFO] [Bullet] Distance to wall: 541,6667 (36,883083% of viewport)
[18:13:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:57] [INFO] [Bullet] Starting wall penetration at (28.505924, 808.44495)
[18:13:57] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[18:13:57] [INFO] [Bullet] Exiting penetration at (-18.147055, 809.5752) after traveling 41,666668 pixels through wall
[18:13:57] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[18:13:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(372.8304, 776.8278), shooter_id=44320556060330, bullet_pos=(919.0265, 623.4109)
[18:13:57] [INFO] [Bullet] Using shooter_position, distance=567.333251953125
[18:13:57] [INFO] [Bullet] Distance to wall: 567.333251953125 (38.6307643593486% of viewport)
[18:13:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
[18:13:57] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:57] [INFO] [BloodDecal] Blood puddle created at (343.9106, 839.5294) (added to group)
[18:13:57] [INFO] [BloodDecal] Blood puddle created at (859.2263, 838.1522) (added to group)
[18:13:57] [INFO] [BloodDecal] Blood puddle created at (389.9614, 847.2461) (added to group)
[18:13:57] [INFO] [BloodDecal] Blood puddle created at (387.1514, 866.7167) (added to group)
[18:13:58] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(223,921), corner_timer=-0.02
[18:13:58] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[18:13:58] [INFO] [BloodDecal] Blood puddle created at (398.4143, 843.2771) (added to group)
[18:13:58] [INFO] [BloodDecal] Blood puddle created at (377.7568, 882.6666) (added to group)
[18:13:58] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(224,923), corner_timer=0.30
[18:13:58] [INFO] [BloodDecal] Blood puddle created at (385.704, 884.1095) (added to group)
[18:13:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(308.1063, 823.7051), shooter_id=44320556060330, bullet_pos=(916.3771, 644.9236)
[18:13:58] [INFO] [Bullet] Using shooter_position, distance=634.000122070313
[18:13:58] [INFO] [Bullet] Distance to wall: 634.000122070313 (43.1702341351924% of viewport)
[18:13:58] [INFO] [Bullet] Distance-based penetration chance: 96.3013935089422%
[18:13:58] [INFO] [Bullet] Caliber cannot penetrate walls
[18:13:58] [INFO] [BloodyFeet:Player] Blood ran out - no more footprints
[18:13:58] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[18:13:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:58] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[18:13:58] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[18:13:58] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[18:13:58] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[18:13:58] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[18:13:58] [INFO] [LastChance] Resetting all effects (scene change detected)
[18:13:58] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[18:13:58] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[18:13:58] [ENEMY] [Enemy1] Death animation component initialized
[18:13:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:58] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[18:13:58] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[18:13:58] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[18:13:58] [ENEMY] [Enemy2] Death animation component initialized
[18:13:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:58] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[18:13:58] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[18:13:58] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[18:13:58] [ENEMY] [Enemy3] Death animation component initialized
[18:13:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:58] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[18:13:58] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[18:13:58] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[18:13:58] [ENEMY] [Enemy4] Death animation component initialized
[18:13:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:58] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[18:13:58] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[18:13:58] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[18:13:58] [ENEMY] [Enemy5] Death animation component initialized
[18:13:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:58] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[18:13:58] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[18:13:58] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[18:13:58] [ENEMY] [Enemy6] Death animation component initialized
[18:13:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:58] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[18:13:58] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[18:13:58] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[18:13:58] [ENEMY] [Enemy7] Death animation component initialized
[18:13:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:58] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[18:13:58] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[18:13:58] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[18:13:58] [ENEMY] [Enemy8] Death animation component initialized
[18:13:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:58] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[18:13:58] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[18:13:58] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[18:13:58] [ENEMY] [Enemy9] Death animation component initialized
[18:13:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:58] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[18:13:58] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[18:13:58] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[18:13:58] [ENEMY] [Enemy10] Death animation component initialized
[18:13:58] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[18:13:58] [INFO] [BloodyFeet:Player] Footprint scene loaded
[18:13:58] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[18:13:58] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[18:13:58] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[18:13:58] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[18:13:58] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[18:13:58] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[18:13:58] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[18:13:58] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[18:13:58] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[18:13:58] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[18:13:58] [INFO] [Player.Flashlight] Flashlight is selected, initializing...
[18:13:58] [INFO] [FlashlightEffect] PointLight2D found, energy=0.0, shadow=true
[18:13:58] [INFO] [FlashlightEffect] Flashlight sound loaded
[18:13:58] [INFO] [Player.Flashlight] Flashlight equipped and attached to PlayerModel at offset (20, 0)
[18:13:58] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 10/10
[18:13:58] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[18:13:58] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[18:13:58] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[18:13:58] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[18:13:58] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[18:13:58] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[18:13:58] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[18:13:58] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[18:13:58] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[18:13:58] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[18:13:58] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[18:13:58] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[18:13:58] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[18:13:58] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[18:13:58] [INFO] [ScoreManager] Level started with 10 enemies
[18:13:58] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[18:13:58] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[18:13:58] [INFO] [ReplayManager] Replay data cleared
[18:13:58] [INFO] [BuildingLevel] Previous replay data cleared
[18:13:58] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[18:13:58] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[18:13:58] [INFO] [ReplayManager] Level: BuildingLevel
[18:13:58] [INFO] [ReplayManager] Player: Player (valid: True)
[18:13:58] [INFO] [ReplayManager] Enemies count: 10
[18:13:58] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[18:13:58] [INFO] [ReplayManager]   Enemy 0: Enemy1
[18:13:58] [INFO] [ReplayManager]   Enemy 1: Enemy2
[18:13:58] [INFO] [ReplayManager]   Enemy 2: Enemy3
[18:13:58] [INFO] [ReplayManager]   Enemy 3: Enemy4
[18:13:58] [INFO] [ReplayManager]   Enemy 4: Enemy5
[18:13:58] [INFO] [ReplayManager]   Enemy 5: Enemy6
[18:13:58] [INFO] [ReplayManager]   Enemy 6: Enemy7
[18:13:58] [INFO] [ReplayManager]   Enemy 7: Enemy8
[18:13:58] [INFO] [ReplayManager]   Enemy 8: Enemy9
[18:13:58] [INFO] [ReplayManager]   Enemy 9: Enemy10
[18:13:58] [INFO] [BuildingLevel] Replay recording started successfully
[18:13:58] [INFO] [BloodDecal] Blood puddle created at (494.1545, 892.7092) (added to group)
[18:13:58] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[18:13:58] [INFO] [CinemaEffects] Found player node: Player
[18:13:58] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[18:13:58] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[18:13:58] [ENEMY] [Enemy1] Registered as sound listener
[18:13:58] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[18:13:58] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[18:13:58] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[18:13:58] [ENEMY] [Enemy2] Registered as sound listener
[18:13:58] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[18:13:58] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[18:13:58] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[18:13:58] [ENEMY] [Enemy3] Registered as sound listener
[18:13:58] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[18:13:58] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[18:13:58] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[18:13:58] [ENEMY] [Enemy4] Registered as sound listener
[18:13:58] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[18:13:58] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[18:13:58] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[18:13:58] [ENEMY] [Enemy5] Registered as sound listener
[18:13:58] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[18:13:58] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[18:13:58] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[18:13:58] [ENEMY] [Enemy6] Registered as sound listener
[18:13:58] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[18:13:58] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[18:13:58] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[18:13:58] [ENEMY] [Enemy7] Registered as sound listener
[18:13:58] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[18:13:58] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[18:13:58] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[18:13:58] [ENEMY] [Enemy8] Registered as sound listener
[18:13:58] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[18:13:58] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[18:13:58] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[18:13:58] [ENEMY] [Enemy9] Registered as sound listener
[18:13:58] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[18:13:58] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[18:13:58] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[18:13:58] [ENEMY] [Enemy10] Registered as sound listener
[18:13:58] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[18:13:58] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[18:13:58] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[18:13:58] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:13:58] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:13:58] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=236.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:13:58] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:13:58] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:13:58] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:13:58] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=78.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:13:58] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[18:13:58] [INFO] [Player] Detecting weapon pose (frame 3)...
[18:13:58] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[18:13:58] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[18:13:58] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[18:13:58] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[18:13:58] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[18:13:58] [INFO] [LastChance] Found player: Player
[18:13:58] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[18:13:58] [INFO] [LastChance] Connected to player Damaged signal (C#)
[18:13:58] [INFO] [LastChance] Connected to player Died signal (C#)
[18:13:58] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[18:13:58] [INFO] [BloodDecal] Blood puddle created at (436.8322, 937.7106) (added to group)
[18:13:59] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[18:13:59] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[18:13:59] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[18:13:59] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[18:13:59] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,783), corner_timer=0.30
[18:13:59] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,783), corner_timer=0.30
[18:14:00] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,755), corner_timer=-0.02
[18:14:00] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[18:14:00] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,755), corner_timer=-0.02
[18:14:00] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[18:14:00] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,756), corner_timer=0.30
[18:14:00] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,756), corner_timer=0.30
[18:14:00] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[18:14:00] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(444,834), corner_timer=-0.02
[18:14:00] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[18:14:00] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(443,838), corner_timer=0.30
[18:14:00] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(425,864), corner_timer=-0.02
[18:14:00] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[18:14:00] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(425,864), corner_timer=0.30
[18:14:01] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(392,848), corner_timer=-0.02
[18:14:01] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[18:14:01] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(390,845), corner_timer=0.30
[18:14:01] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[18:14:01] [INFO] [BloodyFeet:Player] Blood ran out - no more footprints
[18:14:01] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(375,787), corner_timer=-0.02
[18:14:01] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[18:14:01] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(375,786), corner_timer=0.30
[18:14:01] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:14:02] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(375,785), corner_timer=-0.02
[18:14:02] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[18:14:02] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(375,785), corner_timer=0.30
[18:14:02] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:14:02] [INFO] [ReplayManager] Recording frame 240 (4,0s): player_valid=True, enemies=10
[18:14:02] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(375,785), corner_timer=-0.02
[18:14:02] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[18:14:02] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(375,785), corner_timer=0.30
[18:14:02] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:14:02] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(375,785), corner_timer=-0.02
[18:14:02] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[18:14:02] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(375,785), corner_timer=0.30
[18:14:02] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:14:03] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(375,785), corner_timer=-0.02
[18:14:03] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[18:14:03] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(375,785), corner_timer=0.30
[18:14:03] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:14:03] [INFO] [ReplayManager] Recording frame 300 (5,0s): player_valid=True, enemies=10
[18:14:03] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(375,785), corner_timer=-0.02
[18:14:03] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[18:14:03] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(375,785), corner_timer=0.30
[18:14:03] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[18:14:03] [INFO] ------------------------------------------------------------
[18:14:03] [INFO] GAME LOG ENDED: 2026-02-07T18:14:03
[18:14:03] [INFO] ============================================================
