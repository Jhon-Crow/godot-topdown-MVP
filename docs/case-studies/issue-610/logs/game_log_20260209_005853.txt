[00:58:53] [INFO] ============================================================
[00:58:53] [INFO] GAME LOG STARTED
[00:58:53] [INFO] ============================================================
[00:58:53] [INFO] Timestamp: 2026-02-09T00:58:53
[00:58:53] [INFO] Log file: I:/Загрузки/godot exe/технический уровень/game_log_20260209_005853.txt
[00:58:53] [INFO] Executable: I:/Загрузки/godot exe/технический уровень/Godot-Top-Down-Template.exe
[00:58:53] [INFO] OS: Windows
[00:58:53] [INFO] Debug build: false
[00:58:53] [INFO] Engine version: 4.3-stable (official)
[00:58:53] [INFO] Project: Godot Top-Down Template
[00:58:53] [INFO] ------------------------------------------------------------
[00:58:53] [INFO] [GameManager] GameManager ready
[00:58:53] [INFO] [ScoreManager] ScoreManager ready
[00:58:53] [INFO] [SoundPropagation] SoundPropagation autoload initialized
[00:58:53] [INFO] [ImpactEffects] Scenes loaded: DustEffect, BloodEffect, SparksEffect, BloodDecal
[00:58:53] [INFO] [ImpactEffects] ImpactEffectsManager ready - FULL VERSION with blood effects enabled
[00:58:53] [INFO] [ImpactEffects] Starting particle shader warmup (Issue #343 fix)...
[00:58:53] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:58:53] [INFO] [PenultimateHit] Saturation shader loaded successfully
[00:58:53] [INFO] [PenultimateHit] Starting shader warmup (Issue #343 fix)...
[00:58:53] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
[00:58:53] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
[00:58:53] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
[00:58:53] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
[00:58:53] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
[00:58:53] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:58:53] [INFO] [LastChance] Last chance shader loaded successfully
[00:58:53] [INFO] [LastChance] Starting shader warmup (Issue #343 fix)...
[00:58:53] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
[00:58:53] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
[00:58:53] [INFO] [LastChance]   Sepia intensity: 0.70
[00:58:53] [INFO] [LastChance]   Brightness: 0.60
[00:58:53] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
[00:58:53] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
[00:58:53] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/DefensiveGrenade.tscn
[00:58:53] [INFO] [ExperimentalSettings] ExperimentalSettings initialized - FOV: true, Complex grenades: false, AI prediction: true, Debug: true, Invincibility: true, Realistic visibility: false
[00:58:53] [INFO] [CinemaEffects] CinemaEffectsManager initializing (v5.3 - overlay approach with simplified death circle)...
[00:58:53] [INFO] [CinemaEffects] Scene changed to: LabyrinthLevel
[00:58:53] [INFO] [CinemaEffects] Created effects layer at layer 99
[00:58:53] [INFO] [CinemaEffects] Cinema shader loaded successfully (v5.0 - no screen_texture)
[00:58:53] [INFO] [CinemaEffects] Starting cinema shader warmup (Issue #343 fix)...
[00:58:53] [INFO] [CinemaEffects] Cinema film effect initialized (v5.3) - Configuration:
[00:58:53] [INFO] [CinemaEffects]   Approach: Overlay-based (no screen_texture)
[00:58:53] [INFO] [CinemaEffects]   Grain intensity: 0.15
[00:58:53] [INFO] [CinemaEffects]   Warm tint: 0.12 intensity
[00:58:53] [INFO] [CinemaEffects]   Sunny effect: 0.08 intensity
[00:58:53] [INFO] [CinemaEffects]   Vignette: 0.25 intensity
[00:58:53] [INFO] [CinemaEffects]   Film defects: 1.5% probability
[00:58:53] [INFO] [CinemaEffects]   White specks: 0.70 intensity, 4.0% probability
[00:58:53] [INFO] [CinemaEffects]   Death effects: cigarette burn + expanding spots + end of reel circle (160px, blinks 2x)
[00:58:53] [INFO] [CinemaEffects] Enabling effect after 1 frame(s)...
[00:58:53] [INFO] [GrenadeTimerHelper] Autoload ready
[00:58:53] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[00:58:53] [INFO] [PowerFantasy] Saturation shader loaded successfully
[00:58:53] [INFO] [PowerFantasy] PowerFantasyEffectsManager ready - Configuration:
[00:58:53] [INFO] [PowerFantasy]   Kill effect duration: 300ms
[00:58:53] [INFO] [PowerFantasy]   Grenade effect duration: 2000ms (2.0s)
[00:58:53] [INFO] [ProgressManager] ProgressManager ready, loaded 8 entries
[00:58:53] [INFO] [ReplayManager] ReplayManager ready (C# version loaded and _Ready called)
[00:58:53] [INFO] [FlashbangPlayer] Resetting flashbang player effects (scene change)
[00:58:53] [INFO] [FlashbangPlayer] Flashbang player shader loaded successfully
[00:58:53] [INFO] [FlashbangPlayer] Starting shader warmup (Issue #343 fix)...
[00:58:53] [INFO] [FlashbangPlayer] FlashbangPlayerEffectsManager ready
[00:58:53] [INFO] [FlashbangPlayer]   Duration range: 1.0-5.0 seconds
[00:58:53] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:58:53] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[00:58:53] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[00:58:53] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[00:58:53] [ENEMY] [Enemy1] Death animation component initialized
[00:58:53] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:58:53] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[00:58:53] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[00:58:53] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[00:58:53] [ENEMY] [Enemy2] Death animation component initialized
[00:58:53] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:58:53] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[00:58:53] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[00:58:53] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[00:58:53] [ENEMY] [Enemy3] Death animation component initialized
[00:58:53] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:58:53] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[00:58:53] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[00:58:53] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[00:58:53] [ENEMY] [Enemy4] Death animation component initialized
[00:58:53] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:58:53] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[00:58:53] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[00:58:53] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[00:58:53] [ENEMY] [Enemy5] Death animation component initialized
[00:58:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:58:54] [INFO] [BloodyFeet:Player] Footprint scene loaded
[00:58:54] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[00:58:54] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[00:58:54] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[00:58:54] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:58:54] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:58:54] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:58:54] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:58:54] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:58:54] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[00:58:54] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[00:58:54] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[00:58:54] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 10/10
[00:58:54] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:58:54] [INFO] [BloodDecal] Blood puddle created at (640, 360) (added to group)
[00:58:54] [INFO] [LabyrinthLevel] Found Environment/Enemies node with 5 children
[00:58:54] [INFO] [LabyrinthLevel] Child 'Enemy1': script=true, has_died_signal=true
[00:58:54] [INFO] [LabyrinthLevel] Child 'Enemy2': script=true, has_died_signal=true
[00:58:54] [INFO] [LabyrinthLevel] Child 'Enemy3': script=true, has_died_signal=true
[00:58:54] [INFO] [LabyrinthLevel] Child 'Enemy4': script=true, has_died_signal=true
[00:58:54] [INFO] [LabyrinthLevel] Child 'Enemy5': script=true, has_died_signal=true
[00:58:54] [INFO] [LabyrinthLevel] Enemy tracking complete: 5 enemies registered
[00:58:54] [INFO] [LabyrinthLevel] Setting up weapon: makarov_pm
[00:58:54] [INFO] [ScoreManager] Level started with 5 enemies
[00:58:54] [INFO] [LabyrinthLevel] ReplayManager found as C# autoload - verified OK
[00:58:54] [INFO] [LabyrinthLevel] Starting replay recording - Player: Player, Enemies count: 5
[00:58:54] [INFO] [ReplayManager] Replay data cleared
[00:58:54] [INFO] [LabyrinthLevel] Previous replay data cleared
[00:58:54] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[00:58:54] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[00:58:54] [INFO] [ReplayManager] Level: LabyrinthLevel
[00:58:54] [INFO] [ReplayManager] Player: Player (valid: True)
[00:58:54] [INFO] [ReplayManager] Enemies count: 5
[00:58:54] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[00:58:54] [INFO] [ReplayManager]   Enemy 0: Enemy1
[00:58:54] [INFO] [ReplayManager]   Enemy 1: Enemy2
[00:58:54] [INFO] [ReplayManager]   Enemy 2: Enemy3
[00:58:54] [INFO] [ReplayManager]   Enemy 3: Enemy4
[00:58:54] [INFO] [ReplayManager]   Enemy 4: Enemy5
[00:58:54] [INFO] [LabyrinthLevel] Replay recording started successfully
[00:58:54] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=5
[00:58:54] [INFO] [CinemaEffects] Found player node: Player
[00:58:54] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[00:58:54] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[00:58:54] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
[00:58:54] [ENEMY] [Enemy1] Registered as sound listener
[00:58:54] [ENEMY] [Enemy1] Spawned at (400, 300), hp: 1, behavior: GUARD
[00:58:54] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[00:58:54] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
[00:58:54] [ENEMY] [Enemy2] Registered as sound listener
[00:58:54] [ENEMY] [Enemy2] Spawned at (900, 950), hp: 2, behavior: GUARD
[00:58:54] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[00:58:54] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
[00:58:54] [ENEMY] [Enemy3] Registered as sound listener
[00:58:54] [ENEMY] [Enemy3] Spawned at (1200, 1000), hp: 1, behavior: PATROL
[00:58:54] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[00:58:54] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
[00:58:54] [ENEMY] [Enemy4] Registered as sound listener
[00:58:54] [ENEMY] [Enemy4] Spawned at (1650, 650), hp: 1, behavior: GUARD
[00:58:54] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[00:58:54] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
[00:58:54] [ENEMY] [Enemy5] Registered as sound listener
[00:58:54] [ENEMY] [Enemy5] Spawned at (1500, 300), hp: 4, behavior: GUARD
[00:58:54] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[00:58:54] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(150,1000), corner_timer=0.00
[00:58:54] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(150,1000), corner_timer=0.00
[00:58:54] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=315.0°, current=0.0°, player=(150,1000), corner_timer=0.00
[00:58:54] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=67.5°, current=0.0°, player=(150,1000), corner_timer=0.00
[00:58:54] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:58:54] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[00:58:54] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[00:58:54] [INFO] [PenultimateHit] Shader warmup complete in 515 ms
[00:58:54] [INFO] [LastChance] Shader warmup complete in 515 ms
[00:58:54] [INFO] [CinemaEffects] Cinema shader warmup complete in 464 ms
[00:58:54] [INFO] [FlashbangPlayer] Shader warmup complete in 455 ms
[00:58:54] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:58:54] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:58:54] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:58:54] [INFO] [LastChance] Found player: Player
[00:58:54] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:58:54] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:58:54] [INFO] [LastChance] Connected to player Died signal (C#)
[00:58:54] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[00:58:54] [INFO] [ImpactEffects] Particle shader warmup complete: 7 effects warmed up in 816 ms
[00:58:55] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=5
[00:58:55] [ENEMY] [Enemy3] PATROL corner check: angle -90.0°
[00:58:55] [ENEMY] [Enemy3] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-90.0°, current=0.0°, player=(294,1000), corner_timer=0.30
[00:58:56] [ENEMY] [Enemy3] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=0.0°, current=-54.4°, player=(321,1000), corner_timer=-0.02
[00:58:56] [ENEMY] [Enemy3] PATROL corner check: angle -90.0°
[00:58:56] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=-90.0°, current=-51.6°, player=(321,1000), corner_timer=0.30
[00:58:56] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=5
[00:58:57] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=5
[00:58:58] [INFO] [PauseMenu] Armory button pressed
[00:58:58] [INFO] [PauseMenu] Creating new armory menu instance
[00:58:58] [INFO] [PauseMenu] armory_menu_scene resource path: res://scenes/ui/ArmoryMenu.tscn
[00:58:58] [INFO] [PauseMenu] Instance created, class: CanvasLayer, name: ArmoryMenu
[00:58:58] [INFO] [PauseMenu] Script attached: res://scripts/ui/armory_menu.gd
[00:58:58] [INFO] [PauseMenu] back_pressed signal exists on instance
[00:58:58] [INFO] [PauseMenu] back_pressed signal connected
[00:58:58] [INFO] [PauseMenu] Armory menu instance added as child, is_inside_tree: true
[00:58:58] [INFO] [PauseMenu] _populate_weapon_grid method exists
[00:58:58] [INFO] [ReplayManager] Recording frame 240 (4,0s): player_valid=True, enemies=5
[00:58:59] [INFO] [ReplayManager] Recording frame 300 (5,0s): player_valid=True, enemies=5
[00:59:00] [INFO] [ReplayManager] Recording frame 360 (6,0s): player_valid=True, enemies=5
[00:59:01] [INFO] [ReplayManager] Recording frame 420 (7,0s): player_valid=True, enemies=5
[00:59:02] [INFO] [ReplayManager] Recording frame 480 (8,0s): player_valid=True, enemies=5
[00:59:02] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[00:59:02] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:02] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[00:59:02] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[00:59:02] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[00:59:02] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[00:59:02] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:59:02] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:59:02] [INFO] [CinemaEffects] Scene changed to: LabyrinthLevel
[00:59:02] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[00:59:02] [INFO] [FlashbangPlayer] Resetting flashbang player effects (scene change)
[00:59:02] [ENEMY] [Enemy1] Death animation component initialized
[00:59:02] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:02] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[00:59:02] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[00:59:02] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[00:59:02] [INFO] [EnemyGrenade] Initialized: 1 grenades
[00:59:02] [ENEMY] [Enemy2] Death animation component initialized
[00:59:02] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:02] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[00:59:02] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[00:59:02] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[00:59:02] [ENEMY] [Enemy3] Death animation component initialized
[00:59:02] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:02] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[00:59:02] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[00:59:02] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[00:59:02] [ENEMY] [Enemy4] Death animation component initialized
[00:59:02] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:02] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[00:59:02] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[00:59:02] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[00:59:02] [ENEMY] [Enemy5] Death animation component initialized
[00:59:02] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:02] [INFO] [BloodyFeet:Player] Footprint scene loaded
[00:59:02] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[00:59:02] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[00:59:02] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[00:59:02] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:59:02] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:59:02] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:59:02] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:59:02] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:59:02] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[00:59:02] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[00:59:02] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[00:59:02] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 3/4
[00:59:02] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:59:02] [INFO] [LabyrinthLevel] Found Environment/Enemies node with 5 children
[00:59:02] [INFO] [LabyrinthLevel] Child 'Enemy1': script=true, has_died_signal=true
[00:59:02] [INFO] [LabyrinthLevel] Child 'Enemy2': script=true, has_died_signal=true
[00:59:02] [INFO] [LabyrinthLevel] Child 'Enemy3': script=true, has_died_signal=true
[00:59:02] [INFO] [LabyrinthLevel] Child 'Enemy4': script=true, has_died_signal=true
[00:59:02] [INFO] [LabyrinthLevel] Child 'Enemy5': script=true, has_died_signal=true
[00:59:02] [INFO] [LabyrinthLevel] Enemy tracking complete: 5 enemies registered
[00:59:02] [INFO] [LabyrinthLevel] Setting up weapon: makarov_pm
[00:59:02] [INFO] [ScoreManager] Level started with 5 enemies
[00:59:02] [INFO] [LabyrinthLevel] ReplayManager found as C# autoload - verified OK
[00:59:02] [INFO] [LabyrinthLevel] Starting replay recording - Player: Player, Enemies count: 5
[00:59:02] [INFO] [ReplayManager] Replay data cleared
[00:59:02] [INFO] [LabyrinthLevel] Previous replay data cleared
[00:59:02] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[00:59:02] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[00:59:02] [INFO] [ReplayManager] Level: LabyrinthLevel
[00:59:02] [INFO] [ReplayManager] Player: Player (valid: True)
[00:59:02] [INFO] [ReplayManager] Enemies count: 5
[00:59:02] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[00:59:02] [INFO] [ReplayManager]   Enemy 0: Enemy1
[00:59:02] [INFO] [ReplayManager]   Enemy 1: Enemy2
[00:59:02] [INFO] [ReplayManager]   Enemy 2: Enemy3
[00:59:02] [INFO] [ReplayManager]   Enemy 3: Enemy4
[00:59:02] [INFO] [ReplayManager]   Enemy 4: Enemy5
[00:59:02] [INFO] [LabyrinthLevel] Replay recording started successfully
[00:59:02] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[00:59:02] [INFO] [CinemaEffects] Found player node: Player
[00:59:02] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[00:59:02] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 6)
[00:59:02] [ENEMY] [Enemy1] Registered as sound listener
[00:59:02] [ENEMY] [Enemy1] Spawned at (400, 300), hp: 1, behavior: GUARD
[00:59:02] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[00:59:02] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 7)
[00:59:02] [ENEMY] [Enemy2] Registered as sound listener
[00:59:02] [ENEMY] [Enemy2] Spawned at (900, 950), hp: 1, behavior: GUARD
[00:59:02] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[00:59:02] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 8)
[00:59:02] [ENEMY] [Enemy3] Registered as sound listener
[00:59:02] [ENEMY] [Enemy3] Spawned at (1200, 1000), hp: 2, behavior: PATROL
[00:59:02] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[00:59:02] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 9)
[00:59:02] [ENEMY] [Enemy4] Registered as sound listener
[00:59:02] [ENEMY] [Enemy4] Spawned at (1650, 650), hp: 2, behavior: GUARD
[00:59:02] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[00:59:02] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 10)
[00:59:02] [ENEMY] [Enemy5] Registered as sound listener
[00:59:02] [ENEMY] [Enemy5] Spawned at (1500, 300), hp: 2, behavior: GUARD
[00:59:02] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[00:59:02] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=5
[00:59:02] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(150,1000), corner_timer=0.00
[00:59:02] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=315.0°, current=0.0°, player=(150,1000), corner_timer=0.00
[00:59:02] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=67.5°, current=0.0°, player=(150,1000), corner_timer=0.00
[00:59:02] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(150,1000), corner_timer=0.00
[00:59:02] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:59:02] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[00:59:02] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[00:59:02] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:59:02] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:59:02] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:59:02] [INFO] [LastChance] Found player: Player
[00:59:02] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:59:02] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:59:02] [INFO] [LastChance] Connected to player Died signal (C#)
[00:59:02] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[00:59:02] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[00:59:02] [INFO] [GrenadeBase] Grenade created at (860.1576, 953.5469) (frozen)
[00:59:02] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[00:59:03] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[00:59:03] [INFO] [GrenadeTimerHelper] Attached GrenadeTimer to FragGrenade (type: Frag)
[00:59:03] [INFO] [EnemyGrenade] Attached C# GrenadeTimer to grenade (type: Frag)
[00:59:03] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[00:59:03] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[00:59:03] [INFO] [GrenadeBase] LEGACY throw_grenade() called! Direction: (-0.996061, 0.088674), Speed: 1186.5 (unfrozen)
[00:59:03] [INFO] [GrenadeBase] NOTE: Using DRAG-BASED system. If velocity-based is expected, ensure grenade has throw_grenade_velocity_based() method.
[00:59:03] [INFO] [FragGrenade] Grenade thrown (legacy) - impact detection enabled
[00:59:03] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[00:59:03] [INFO] [EnemyGrenade] Enemy grenade thrown! Target: (301.3289, 989.9114), Distance: 600
[00:59:03] [INFO] [GrenadeBase] Collision detected with Hall_WallRight (type: StaticBody2D)
[00:59:03] [INFO] [FragGrenade] Impact detected! Body: Hall_WallRight (type: StaticBody2D), triggering explosion
[00:59:03] [INFO] [FragGrenade] Impact detected - exploding immediately!
[00:59:03] [INFO] [GrenadeBase] EXPLODED at (371.9447, 997.5172)!
[00:59:03] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(371.9447, 997.5172), source=NEUTRAL (FragGrenade), range=2937, listeners=10
[00:59:03] [INFO] [SoundPropagation] Cleaned up 5 invalid listeners
[00:59:03] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=5
[00:59:03] [INFO] [FragGrenade] Spawned shrapnel #1 at angle -8.8 degrees
[00:59:03] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 109.6 degrees
[00:59:03] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 190.2 degrees
[00:59:03] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 267.7 degrees
[00:59:03] [INFO] [ImpactEffects] Spawning explosion visual effect at (371.9447, 997.5172) (radius=225) - using shadow-based wall occlusion
[00:59:03] [INFO] [GrenadeTimer] Impact detected with Hall_WallRight - EXPLODING!
[00:59:03] [INFO] [GrenadeTimer] EXPLODED at (371.94467, 997.5172)!
[00:59:03] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[00:59:03] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[00:59:03] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(371.9447, 997.5172), source=NEUTRAL (FragGrenade), range=2938, listeners=5
[00:59:03] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=5
[00:59:03] [INFO] [GrenadeTimer] Spawned PointLight2D frag explosion flash at (371.94467, 997.5172) (shadow-based wall occlusion)
[00:59:03] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=5
[00:59:04] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[00:59:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:04] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[00:59:04] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[00:59:04] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[00:59:04] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[00:59:04] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:59:04] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:59:04] [INFO] [CinemaEffects] Scene changed to: LabyrinthLevel
[00:59:04] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[00:59:04] [INFO] [FlashbangPlayer] Resetting flashbang player effects (scene change)
[00:59:04] [ENEMY] [Enemy1] Death animation component initialized
[00:59:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:04] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[00:59:04] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[00:59:04] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[00:59:04] [INFO] [EnemyGrenade] Initialized: 1 grenades
[00:59:04] [ENEMY] [Enemy2] Death animation component initialized
[00:59:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:04] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[00:59:04] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[00:59:04] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[00:59:04] [ENEMY] [Enemy3] Death animation component initialized
[00:59:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:04] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[00:59:04] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[00:59:04] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[00:59:04] [ENEMY] [Enemy4] Death animation component initialized
[00:59:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:04] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[00:59:04] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[00:59:04] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[00:59:04] [ENEMY] [Enemy5] Death animation component initialized
[00:59:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:04] [INFO] [BloodyFeet:Player] Footprint scene loaded
[00:59:04] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[00:59:04] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[00:59:04] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[00:59:04] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:59:04] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:59:04] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:59:04] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:59:04] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:59:04] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[00:59:04] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[00:59:04] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[00:59:04] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 3/4
[00:59:04] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:59:04] [INFO] [LabyrinthLevel] Found Environment/Enemies node with 5 children
[00:59:04] [INFO] [LabyrinthLevel] Child 'Enemy1': script=true, has_died_signal=true
[00:59:04] [INFO] [LabyrinthLevel] Child 'Enemy2': script=true, has_died_signal=true
[00:59:04] [INFO] [LabyrinthLevel] Child 'Enemy3': script=true, has_died_signal=true
[00:59:04] [INFO] [LabyrinthLevel] Child 'Enemy4': script=true, has_died_signal=true
[00:59:04] [INFO] [LabyrinthLevel] Child 'Enemy5': script=true, has_died_signal=true
[00:59:04] [INFO] [LabyrinthLevel] Enemy tracking complete: 5 enemies registered
[00:59:04] [INFO] [LabyrinthLevel] Setting up weapon: makarov_pm
[00:59:04] [INFO] [ScoreManager] Level started with 5 enemies
[00:59:04] [INFO] [LabyrinthLevel] ReplayManager found as C# autoload - verified OK
[00:59:04] [INFO] [LabyrinthLevel] Starting replay recording - Player: Player, Enemies count: 5
[00:59:04] [INFO] [ReplayManager] Replay data cleared
[00:59:04] [INFO] [LabyrinthLevel] Previous replay data cleared
[00:59:04] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[00:59:04] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[00:59:04] [INFO] [ReplayManager] Level: LabyrinthLevel
[00:59:04] [INFO] [ReplayManager] Player: Player (valid: True)
[00:59:04] [INFO] [ReplayManager] Enemies count: 5
[00:59:04] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[00:59:04] [INFO] [ReplayManager]   Enemy 0: Enemy1
[00:59:04] [INFO] [ReplayManager]   Enemy 1: Enemy2
[00:59:04] [INFO] [ReplayManager]   Enemy 2: Enemy3
[00:59:04] [INFO] [ReplayManager]   Enemy 3: Enemy4
[00:59:04] [INFO] [ReplayManager]   Enemy 4: Enemy5
[00:59:04] [INFO] [LabyrinthLevel] Replay recording started successfully
[00:59:04] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[00:59:04] [INFO] [CinemaEffects] Found player node: Player
[00:59:04] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[00:59:04] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 6)
[00:59:04] [ENEMY] [Enemy1] Registered as sound listener
[00:59:04] [ENEMY] [Enemy1] Spawned at (400, 300), hp: 1, behavior: GUARD
[00:59:04] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[00:59:04] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 7)
[00:59:04] [ENEMY] [Enemy2] Registered as sound listener
[00:59:04] [ENEMY] [Enemy2] Spawned at (900, 950), hp: 1, behavior: GUARD
[00:59:04] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[00:59:04] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 8)
[00:59:04] [ENEMY] [Enemy3] Registered as sound listener
[00:59:04] [ENEMY] [Enemy3] Spawned at (1200, 1000), hp: 1, behavior: PATROL
[00:59:04] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[00:59:04] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 9)
[00:59:04] [ENEMY] [Enemy4] Registered as sound listener
[00:59:04] [ENEMY] [Enemy4] Spawned at (1650, 650), hp: 1, behavior: GUARD
[00:59:04] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[00:59:04] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 10)
[00:59:04] [ENEMY] [Enemy5] Registered as sound listener
[00:59:04] [ENEMY] [Enemy5] Spawned at (1500, 300), hp: 2, behavior: GUARD
[00:59:04] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[00:59:04] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=5
[00:59:04] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(150,1000), corner_timer=0.00
[00:59:04] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=315.0°, current=0.0°, player=(150,1000), corner_timer=0.00
[00:59:04] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(150,1000), corner_timer=0.00
[00:59:04] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(150,1000), corner_timer=0.00
[00:59:04] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:59:04] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[00:59:04] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[00:59:04] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:59:04] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:59:04] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:59:04] [INFO] [LastChance] Found player: Player
[00:59:04] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:59:04] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:59:04] [INFO] [LastChance] Connected to player Died signal (C#)
[00:59:04] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[00:59:04] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[00:59:04] [INFO] [GrenadeBase] Grenade created at (860.0608, 952.2045) (frozen)
[00:59:04] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[00:59:04] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[00:59:04] [INFO] [GrenadeTimerHelper] Attached GrenadeTimer to FragGrenade (type: Frag)
[00:59:04] [INFO] [EnemyGrenade] Attached C# GrenadeTimer to grenade (type: Frag)
[00:59:04] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[00:59:04] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[00:59:04] [INFO] [GrenadeBase] LEGACY throw_grenade() called! Direction: (-0.99848, 0.055114), Speed: 1186.5 (unfrozen)
[00:59:04] [INFO] [GrenadeBase] NOTE: Using DRAG-BASED system. If velocity-based is expected, ensure grenade has throw_grenade_velocity_based() method.
[00:59:04] [INFO] [FragGrenade] Grenade thrown (legacy) - impact detection enabled
[00:59:04] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[00:59:04] [INFO] [EnemyGrenade] Enemy grenade thrown! Target: (301.3289, 989.9114), Distance: 600
[00:59:04] [INFO] [GrenadeBase] Collision detected with Hall_WallRight (type: StaticBody2D)
[00:59:04] [INFO] [FragGrenade] Impact detected! Body: Hall_WallRight (type: StaticBody2D), triggering explosion
[00:59:04] [INFO] [FragGrenade] Impact detected - exploding immediately!
[00:59:04] [INFO] [GrenadeBase] EXPLODED at (371.446, 979.413)!
[00:59:04] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(371.446, 979.413), source=NEUTRAL (FragGrenade), range=2937, listeners=10
[00:59:04] [INFO] [SoundPropagation] Cleaned up 5 invalid listeners
[00:59:04] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=5
[00:59:04] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 16.6 degrees
[00:59:04] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 86.7 degrees
[00:59:04] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 163.7 degrees
[00:59:04] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 279.0 degrees
[00:59:04] [INFO] [ImpactEffects] Spawning explosion visual effect at (371.446, 979.413) (radius=225) - using shadow-based wall occlusion
[00:59:04] [INFO] [GrenadeTimer] Impact detected with Hall_WallRight - EXPLODING!
[00:59:04] [INFO] [GrenadeTimer] EXPLODED at (371.446, 979.413)!
[00:59:04] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[00:59:04] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[00:59:04] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(371.446, 979.413), source=NEUTRAL (FragGrenade), range=2938, listeners=5
[00:59:04] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=5
[00:59:04] [INFO] [GrenadeTimer] Spawned PointLight2D frag explosion flash at (371.446, 979.413) (shadow-based wall occlusion)
[00:59:05] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=5
[00:59:05] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[00:59:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:05] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[00:59:05] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[00:59:05] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[00:59:05] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[00:59:05] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:59:05] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:59:05] [INFO] [CinemaEffects] Scene changed to: LabyrinthLevel
[00:59:05] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[00:59:05] [INFO] [FlashbangPlayer] Resetting flashbang player effects (scene change)
[00:59:05] [ENEMY] [Enemy1] Death animation component initialized
[00:59:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:05] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[00:59:05] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[00:59:05] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[00:59:05] [ENEMY] [Enemy2] Death animation component initialized
[00:59:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:05] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[00:59:05] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[00:59:05] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[00:59:05] [ENEMY] [Enemy3] Death animation component initialized
[00:59:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:05] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[00:59:05] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[00:59:05] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[00:59:05] [ENEMY] [Enemy4] Death animation component initialized
[00:59:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:05] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[00:59:05] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[00:59:05] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[00:59:05] [ENEMY] [Enemy5] Death animation component initialized
[00:59:05] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:05] [INFO] [BloodyFeet:Player] Footprint scene loaded
[00:59:05] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[00:59:05] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[00:59:05] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[00:59:05] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:59:05] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:59:05] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:59:05] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:59:05] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:59:05] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[00:59:05] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[00:59:05] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[00:59:05] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 2/4
[00:59:05] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:59:05] [INFO] [LabyrinthLevel] Found Environment/Enemies node with 5 children
[00:59:05] [INFO] [LabyrinthLevel] Child 'Enemy1': script=true, has_died_signal=true
[00:59:05] [INFO] [LabyrinthLevel] Child 'Enemy2': script=true, has_died_signal=true
[00:59:05] [INFO] [LabyrinthLevel] Child 'Enemy3': script=true, has_died_signal=true
[00:59:05] [INFO] [LabyrinthLevel] Child 'Enemy4': script=true, has_died_signal=true
[00:59:05] [INFO] [LabyrinthLevel] Child 'Enemy5': script=true, has_died_signal=true
[00:59:05] [INFO] [LabyrinthLevel] Enemy tracking complete: 5 enemies registered
[00:59:05] [INFO] [LabyrinthLevel] Setting up weapon: makarov_pm
[00:59:05] [INFO] [ScoreManager] Level started with 5 enemies
[00:59:05] [INFO] [LabyrinthLevel] ReplayManager found as C# autoload - verified OK
[00:59:05] [INFO] [LabyrinthLevel] Starting replay recording - Player: Player, Enemies count: 5
[00:59:05] [INFO] [ReplayManager] Replay data cleared
[00:59:05] [INFO] [LabyrinthLevel] Previous replay data cleared
[00:59:05] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[00:59:05] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[00:59:05] [INFO] [ReplayManager] Level: LabyrinthLevel
[00:59:05] [INFO] [ReplayManager] Player: Player (valid: True)
[00:59:05] [INFO] [ReplayManager] Enemies count: 5
[00:59:05] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[00:59:05] [INFO] [ReplayManager]   Enemy 0: Enemy1
[00:59:05] [INFO] [ReplayManager]   Enemy 1: Enemy2
[00:59:05] [INFO] [ReplayManager]   Enemy 2: Enemy3
[00:59:05] [INFO] [ReplayManager]   Enemy 3: Enemy4
[00:59:05] [INFO] [ReplayManager]   Enemy 4: Enemy5
[00:59:05] [INFO] [LabyrinthLevel] Replay recording started successfully
[00:59:05] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[00:59:05] [INFO] [CinemaEffects] Found player node: Player
[00:59:05] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[00:59:05] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 6)
[00:59:05] [ENEMY] [Enemy1] Registered as sound listener
[00:59:05] [ENEMY] [Enemy1] Spawned at (400, 300), hp: 1, behavior: GUARD
[00:59:05] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[00:59:05] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 7)
[00:59:05] [ENEMY] [Enemy2] Registered as sound listener
[00:59:05] [ENEMY] [Enemy2] Spawned at (900, 950), hp: 1, behavior: GUARD
[00:59:05] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[00:59:05] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 8)
[00:59:05] [ENEMY] [Enemy3] Registered as sound listener
[00:59:05] [ENEMY] [Enemy3] Spawned at (1200, 1000), hp: 1, behavior: PATROL
[00:59:05] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[00:59:05] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 9)
[00:59:05] [ENEMY] [Enemy4] Registered as sound listener
[00:59:05] [ENEMY] [Enemy4] Spawned at (1650, 650), hp: 2, behavior: GUARD
[00:59:05] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[00:59:05] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 10)
[00:59:05] [ENEMY] [Enemy5] Registered as sound listener
[00:59:05] [ENEMY] [Enemy5] Spawned at (1500, 300), hp: 2, behavior: GUARD
[00:59:05] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[00:59:05] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=5
[00:59:05] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(150,1000), corner_timer=0.00
[00:59:05] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(150,1000), corner_timer=0.00
[00:59:05] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=315.0°, current=0.0°, player=(150,1000), corner_timer=0.00
[00:59:05] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=236.3°, current=0.0°, player=(150,1000), corner_timer=0.00
[00:59:05] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:59:05] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[00:59:05] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[00:59:05] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:59:05] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:59:05] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:59:05] [INFO] [LastChance] Found player: Player
[00:59:05] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:59:05] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:59:05] [INFO] [LastChance] Connected to player Died signal (C#)
[00:59:05] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[00:59:06] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=5
[00:59:07] [ENEMY] [Enemy3] PATROL corner check: angle -90.0°
[00:59:07] [ENEMY] [Enemy3] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-90.0°, current=0.0°, player=(321,1000), corner_timer=0.30
[00:59:07] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=169.6°, current=-168.8°, player=(321,1056), corner_timer=0.00
[00:59:07] [ENEMY] [Enemy2] State: IDLE -> COMBAT
[00:59:07] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=168.7°, current=-5.4°, player=(321,1067), corner_timer=0.00
[00:59:07] [ENEMY] [Enemy3] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=0.0°, current=-54.4°, player=(321,1067), corner_timer=-0.02
[00:59:07] [ENEMY] [Enemy3] PATROL corner check: angle -90.0°
[00:59:07] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=-90.0°, current=-51.6°, player=(321,1072), corner_timer=0.30
[00:59:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(321.9996, 1095.333), source=PLAYER (MakarovPM), range=1469, listeners=10
[00:59:07] [INFO] [SoundPropagation] Cleaned up 5 invalid listeners
[00:59:07] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=5
[00:59:07] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=5
[00:59:07] [ENEMY] [Enemy3] Memory: high confidence (0.88) - transitioning to PURSUING
[00:59:07] [ENEMY] [Enemy3] State: IDLE -> PURSUING
[00:59:07] [ENEMY] [Enemy3] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=173.4°, current=-83.1°, player=(321,1111), corner_timer=0.22
[00:59:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(321.9996, 1117.976), source=PLAYER (MakarovPM), range=1469, listeners=5
[00:59:07] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=5
[00:59:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(304.6347, 1114.856), source=PLAYER (MakarovPM), range=1469, listeners=5
[00:59:07] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=5
[00:59:07] [ENEMY] [Enemy3] PURSUING corner check: angle -126.0°
[00:59:07] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[00:59:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(294.1795, 1090.001), source=PLAYER (MakarovPM), range=1469, listeners=5
[00:59:07] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=4
[00:59:08] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
[00:59:08] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[00:59:08] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[00:59:08] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
[00:59:08] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P3:corner, state=RETREATING, target=-126.0°, current=-172.8°, player=(321,980), corner_timer=0.10
[00:59:08] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[00:59:08] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[00:59:08] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=5
[00:59:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(321.9996, 1095.333), shooter_id=189297329791, bullet_pos=(1448.456, 964.76)
[00:59:08] [INFO] [Bullet] Using shooter_position, distance=1133.99853515625
[00:59:08] [INFO] [Bullet] Distance to wall: 1133.99853515625 (77.2160454982235% of viewport)
[00:59:08] [INFO] [Bullet] Distance-based penetration chance: 56.5812802520726%
[00:59:08] [INFO] [Bullet] Penetration failed (distance roll)
[00:59:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(321.9996, 1117.976), shooter_id=189297329791, bullet_pos=(1436.149, 1033.702)
[00:59:08] [INFO] [Bullet] Using shooter_position, distance=1117.33239746094
[00:59:08] [INFO] [Bullet] Distance to wall: 1117.33239746094 (76.0812175362248% of viewport)
[00:59:08] [INFO] [Bullet] Distance-based penetration chance: 57.9052462077378%
[00:59:08] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:08] [ENEMY] [Enemy3] Hit: dmg=1, hp=1/1->0/1
[00:59:08] [INFO] [ImpactEffects] spawn_blood_effect called at (1174.521, 1087.777), dir=(0.99986, 0.016704), lethal=true
[00:59:08] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[00:59:08] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[00:59:08] [INFO] [ImpactEffects] Blood effect spawned at (1174.521, 1087.777) (scale=0.75)
[00:59:08] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[00:59:08] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[00:59:08] [ENEMY] [Enemy3] [AllyDeath] Notified 1 enemies
[00:59:08] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 4)
[00:59:08] [INFO] [DeathAnim] Started - Angle: 1.0 deg, Index: 12
[00:59:08] [ENEMY] [Enemy3] Death animation started with hit direction: (0.99986, 0.016704)
[00:59:08] [INFO] [FlashbangStatus] Status: STUNNED applied
[00:59:08] [INFO] [FlashbangStatus] Status: STUNNED removed
[00:59:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(304.6347, 1114.856), shooter_id=189297329791, bullet_pos=(1451.261, 1018.51)
[00:59:08] [INFO] [Bullet] Using shooter_position, distance=1150.66723632813
[00:59:08] [INFO] [Bullet] Distance to wall: 1150.66723632813 (78.3510480120552% of viewport)
[00:59:08] [INFO] [Bullet] Distance-based penetration chance: 55.2571106526023%
[00:59:08] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:09] [INFO] [BloodDecal] Blood puddle created at (1259.245, 1096.409) (added to group)
[00:59:09] [INFO] [BloodDecal] Blood puddle created at (1231.029, 1084.128) (added to group)
[00:59:09] [INFO] [BloodDecal] Blood puddle created at (1237.85, 1097.16) (added to group)
[00:59:09] [INFO] [BloodDecal] Blood puddle created at (1243.932, 1089.424) (added to group)
[00:59:09] [INFO] [BloodDecal] Blood puddle created at (1292.56, 1121.316) (added to group)
[00:59:09] [INFO] [BloodDecal] Blood puddle created at (1276.832, 1123.192) (added to group)
[00:59:09] [ENEMY] [Enemy3] Ragdoll activated
[00:59:09] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[00:59:09] [INFO] [BloodDecal] Blood puddle created at (1338.24, 1104.588) (added to group)
[00:59:09] [INFO] [BloodDecal] Blood puddle created at (1368.909, 1109.559) (added to group)
[00:59:09] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[00:59:09] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P4:velocity, state=SEEKING_COVER, target=-84.2°, current=-144.1°, player=(307,1079), corner_timer=0.00
[00:59:09] [INFO] [ReplayManager] Recording frame 240 (4,0s): player_valid=True, enemies=5
[00:59:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(284.9606, 1111.072), source=PLAYER (MakarovPM), range=1469, listeners=4
[00:59:09] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=4
[00:59:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(311.7281, 1113.684), source=PLAYER (MakarovPM), range=1469, listeners=4
[00:59:09] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=4
[00:59:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(359.6114, 1113.87), source=PLAYER (MakarovPM), range=1469, listeners=4
[00:59:10] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=4
[00:59:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(406.6669, 1113.87), source=PLAYER (MakarovPM), range=1469, listeners=4
[00:59:10] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=4
[00:59:10] [ENEMY] [Enemy3] Death animation completed
[00:59:10] [INFO] [ReplayManager] Recording frame 300 (5,0s): player_valid=True, enemies=5
[00:59:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(284.9606, 1111.072), shooter_id=189297329791, bullet_pos=(1025.072, 691.7048)
[00:59:10] [INFO] [Bullet] Using shooter_position, distance=850.666198730469
[00:59:10] [INFO] [Bullet] Distance to wall: 850.666198730469 (57.9234257087662% of viewport)
[00:59:10] [INFO] [Bullet] Distance-based penetration chance: 79.0893366731061%
[00:59:10] [INFO] [Bullet] Penetration failed (distance roll)
[00:59:10] [ENEMY] [Enemy1] Memory: medium confidence (0.60) - transitioning to PURSUING
[00:59:10] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[00:59:10] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=91.8°, current=101.3°, player=(374,1106), corner_timer=0.00
[00:59:10] [ENEMY] [Enemy1] PURSUING corner check: angle -0.0°
[00:59:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(359.6114, 1113.87), shooter_id=189297329791, bullet_pos=(892.1272, 684.5883)
[00:59:10] [INFO] [Bullet] Using shooter_position, distance=684
[00:59:10] [INFO] [Bullet] Distance to wall: 684 (46.5748177650931% of viewport)
[00:59:10] [INFO] [Bullet] Distance-based penetration chance: 92.3293792740581%
[00:59:10] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(406.6669, 1113.87), shooter_id=189297329791, bullet_pos=(750.3405, 683.6119)
[00:59:10] [INFO] [Bullet] Using shooter_position, distance=550.666442871094
[00:59:10] [INFO] [Bullet] Distance to wall: 550.666442871094 (37.4958906813936% of viewport)
[00:59:10] [INFO] [Bullet] Within ricochet range - trying ricochet first
[00:59:10] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:10] [ENEMY] [Enemy2] ROT_CHANGE: P4:velocity -> P1:visible, state=SEEKING_COVER, target=140.9°, current=-177.0°, player=(331,1080), corner_timer=0.00
[00:59:10] [ENEMY] [Enemy2] State: SEEKING_COVER -> IN_COVER
[00:59:10] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[00:59:11] [ENEMY] [Enemy1] PURSUING corner check: angle -0.0°
[00:59:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(311.7281, 1113.684), shooter_id=189297329791, bullet_pos=(1474.101, 493.8009)
[00:59:11] [INFO] [Bullet] Using shooter_position, distance=1317.33325195313
[00:59:11] [INFO] [Bullet] Distance to wall: 1317.33325195313 (89.6996434877402% of viewport)
[00:59:11] [INFO] [Bullet] Distance-based penetration chance: 42.0170825976365%
[00:59:11] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:11] [INFO] [ReplayManager] Recording frame 360 (6,0s): player_valid=True, enemies=5
[00:59:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(755.64, 731.2322), source=ENEMY (Enemy2), range=1469, listeners=4
[00:59:11] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=2
[00:59:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(347.255, 1117.934), source=PLAYER (MakarovPM), range=1469, listeners=4
[00:59:11] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=4
[00:59:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(755.64, 731.2322), source=ENEMY (Enemy2), range=1469, listeners=4
[00:59:11] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=2
[00:59:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(755.64, 731.2322), source=ENEMY (Enemy2), range=1469, listeners=4
[00:59:11] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=2
[00:59:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(710.2562, 781.59125), shooter_id=187418281927, bullet_pos=(421.73785, 1137.7185)
[00:59:11] [INFO] [Bullet] Using shooter_position, distance=458,33337
[00:59:11] [INFO] [Bullet] Distance to wall: 458,33337 (31,208763% of viewport)
[00:59:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
[00:59:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(755.64, 731.2322), source=ENEMY (Enemy2), range=1469, listeners=4
[00:59:11] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=2
[00:59:11] [ENEMY] [Enemy2] State: SUPPRESSED -> SEEKING_COVER
[00:59:11] [INFO] [LastChance] Threat detected: @Area2D@795
[00:59:11] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[00:59:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
[00:59:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(710.2562, 781.59125), shooter_id=187418281927, bullet_pos=(341.3592, 1060.8042)
[00:59:11] [INFO] [Bullet] Using shooter_position, distance=462,64987
[00:59:11] [INFO] [Bullet] Distance to wall: 462,64987 (31,502682% of viewport)
[00:59:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
[00:59:11] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P4:velocity, state=SEEKING_COVER, target=-154.5°, current=-154.3°, player=(341,1111), corner_timer=0.00
[00:59:12] [INFO] [Player] Spawning blood effect at (337.5624, 1110.1582), dir=(1, 0), lethal=False (C#)
[00:59:12] [INFO] [ImpactEffects] spawn_blood_effect called at (337.5624, 1110.158), dir=(1, 0), lethal=false
[00:59:12] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[00:59:12] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[00:59:12] [INFO] [ImpactEffects] Blood effect spawned at (337.5624, 1110.158) (scale=1)
[00:59:12] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[00:59:12] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[00:59:12] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[00:59:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(710.2562, 781.59125), shooter_id=187418281927, bullet_pos=(282.4241, 1135.7117)
[00:59:12] [INFO] [Bullet] Using shooter_position, distance=555,3752
[00:59:12] [INFO] [Bullet] Distance to wall: 555,3752 (37,816517% of viewport)
[00:59:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
[00:59:12] [INFO] [Bullet] Starting wall penetration at (282.4241, 1135.7117)
[00:59:12] [INFO] [LastChance] Threat detected: @Area2D@797
[00:59:12] [INFO] [LastChance] Triggering last chance effect!
[00:59:12] [INFO] [LastChance] Starting last chance effect:
[00:59:12] [INFO] [LastChance]   - Time will be frozen (except player)
[00:59:12] [INFO] [LastChance]   - Duration: 6.00 real seconds
[00:59:12] [INFO] [LastChance]   - Trigger: threat detected
[00:59:12] [INFO] [LastChance]   - Sepia intensity: 0.70
[00:59:12] [INFO] [LastChance]   - Brightness: 0.60
[00:59:12] [INFO] [LastChance] Pushed bullet Bullet from distance 63.6 to 200.0
[00:59:12] [INFO] [LastChance] Pushed bullet @Area2D@797 from distance 125.1 to 200.0
[00:59:12] [INFO] [LastChance] Pushed 2 threatening bullets away from player
[00:59:12] [INFO] [LastChance] Set player Player and all 26 children to PROCESS_MODE_ALWAYS
[00:59:12] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[00:59:12] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:59:12] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:59:12] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[00:59:12] [INFO] [LastChance] Set StaticBody2D 'HorizontalDivider' to PROCESS_MODE_ALWAYS for collision
[00:59:12] [INFO] [LastChance] Set StaticBody2D 'GeneratorRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[00:59:12] [INFO] [LastChance] Set StaticBody2D 'ControlRoom_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:59:12] [INFO] [LastChance] Set StaticBody2D 'ControlRoom_WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:59:12] [INFO] [LastChance] Set StaticBody2D 'ControlRoom_WallBottom2' to PROCESS_MODE_ALWAYS for collision
[00:59:12] [INFO] [LastChance] Set StaticBody2D 'Storage_WallRight' to PROCESS_MODE_ALWAYS for collision
[00:59:12] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[00:59:12] [INFO] [LastChance] Set StaticBody2D 'ServerRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:59:12] [INFO] [LastChance] Set StaticBody2D 'ServerRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[00:59:12] [INFO] [LastChance] Set StaticBody2D 'PipeRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:59:12] [INFO] [LastChance] Set StaticBody2D 'PipeRoom_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:59:12] [INFO] [LastChance] Set StaticBody2D 'ElecRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[00:59:12] [INFO] [LastChance] Set StaticBody2D 'ElecRoom_WallLeft' to PROCESS_MODE_ALWAYS for collision
[00:59:12] [INFO] [LastChance] Set StaticBody2D 'Hall_WallRight' to PROCESS_MODE_ALWAYS for collision
[00:59:12] [INFO] [LastChance] Set StaticBody2D 'GeneratorCrate1' to PROCESS_MODE_ALWAYS for collision
[00:59:12] [INFO] [LastChance] Set StaticBody2D 'GeneratorCrate2' to PROCESS_MODE_ALWAYS for collision
[00:59:12] [INFO] [LastChance] Set StaticBody2D 'ControlPanel1' to PROCESS_MODE_ALWAYS for collision
[00:59:12] [INFO] [LastChance] Set StaticBody2D 'ControlPanel2' to PROCESS_MODE_ALWAYS for collision
[00:59:12] [INFO] [LastChance] Set StaticBody2D 'StorageBarrel1' to PROCESS_MODE_ALWAYS for collision
[00:59:12] [INFO] [LastChance] Set StaticBody2D 'StorageBarrel2' to PROCESS_MODE_ALWAYS for collision
[00:59:12] [INFO] [LastChance] Set StaticBody2D 'ServerRack1' to PROCESS_MODE_ALWAYS for collision
[00:59:12] [INFO] [LastChance] Set StaticBody2D 'ServerRack2' to PROCESS_MODE_ALWAYS for collision
[00:59:12] [INFO] [LastChance] Set StaticBody2D 'PipeBarrel' to PROCESS_MODE_ALWAYS for collision
[00:59:12] [INFO] [LastChance] Set StaticBody2D 'ElecPanel' to PROCESS_MODE_ALWAYS for collision
[00:59:12] [INFO] [LastChance] Skipping player node: Player
[00:59:12] [INFO] [LastChance] Froze existing bullet casing: Casing
[00:59:12] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@712
[00:59:12] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@715
[00:59:12] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@719
[00:59:12] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@740
[00:59:12] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@743
[00:59:12] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@760
[00:59:12] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@772
[00:59:12] [INFO] [Bullet] Body exited signal received for penetrating body
[00:59:12] [INFO] [Bullet] Exiting penetration at (159.84488, 1205.3231) after traveling 0 pixels through wall
[00:59:12] [INFO] [Bullet] Damage multiplier after penetration: 0,225
[00:59:12] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@794
[00:59:12] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[00:59:12] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[00:59:12] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[00:59:12] [INFO] [BloodDecal] Blood puddle created at (417.5892, 1088.932) (added to group)
[00:59:12] [INFO] [ReplayManager] Recording frame 420 (7,0s): player_valid=True, enemies=5
[00:59:12] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[00:59:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:12] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[00:59:12] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[00:59:12] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[00:59:12] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[00:59:12] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:59:12] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:59:12] [INFO] [LastChance] All process modes restored
[00:59:12] [INFO] [LastChance] Restored original colors to 5 player sprites
[00:59:12] [INFO] [CinemaEffects] Scene changed to: LabyrinthLevel
[00:59:12] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[00:59:12] [INFO] [FlashbangPlayer] Resetting flashbang player effects (scene change)
[00:59:12] [ENEMY] [Enemy1] Death animation component initialized
[00:59:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:12] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[00:59:12] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[00:59:12] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[00:59:12] [ENEMY] [Enemy2] Death animation component initialized
[00:59:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:12] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[00:59:12] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[00:59:12] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[00:59:12] [ENEMY] [Enemy3] Death animation component initialized
[00:59:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:12] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[00:59:12] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[00:59:12] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[00:59:12] [ENEMY] [Enemy4] Death animation component initialized
[00:59:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:12] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[00:59:12] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[00:59:12] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[00:59:12] [INFO] [EnemyGrenade] Initialized: 1 grenades
[00:59:12] [ENEMY] [Enemy5] Death animation component initialized
[00:59:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:12] [INFO] [BloodyFeet:Player] Footprint scene loaded
[00:59:12] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[00:59:12] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[00:59:12] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[00:59:12] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:59:12] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:59:12] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:59:12] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:59:12] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:59:12] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[00:59:12] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[00:59:12] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[00:59:12] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 4/4
[00:59:12] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:59:12] [INFO] [LabyrinthLevel] Found Environment/Enemies node with 5 children
[00:59:12] [INFO] [LabyrinthLevel] Child 'Enemy1': script=true, has_died_signal=true
[00:59:12] [INFO] [LabyrinthLevel] Child 'Enemy2': script=true, has_died_signal=true
[00:59:12] [INFO] [LabyrinthLevel] Child 'Enemy3': script=true, has_died_signal=true
[00:59:12] [INFO] [LabyrinthLevel] Child 'Enemy4': script=true, has_died_signal=true
[00:59:12] [INFO] [LabyrinthLevel] Child 'Enemy5': script=true, has_died_signal=true
[00:59:12] [INFO] [LabyrinthLevel] Enemy tracking complete: 5 enemies registered
[00:59:12] [INFO] [LabyrinthLevel] Setting up weapon: makarov_pm
[00:59:12] [INFO] [ScoreManager] Level started with 5 enemies
[00:59:12] [INFO] [LabyrinthLevel] ReplayManager found as C# autoload - verified OK
[00:59:12] [INFO] [LabyrinthLevel] Starting replay recording - Player: Player, Enemies count: 5
[00:59:12] [INFO] [ReplayManager] Replay data cleared
[00:59:12] [INFO] [LabyrinthLevel] Previous replay data cleared
[00:59:12] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[00:59:12] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[00:59:12] [INFO] [ReplayManager] Level: LabyrinthLevel
[00:59:12] [INFO] [ReplayManager] Player: Player (valid: True)
[00:59:12] [INFO] [ReplayManager] Enemies count: 5
[00:59:12] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[00:59:12] [INFO] [ReplayManager]   Enemy 0: Enemy1
[00:59:12] [INFO] [ReplayManager]   Enemy 1: Enemy2
[00:59:12] [INFO] [ReplayManager]   Enemy 2: Enemy3
[00:59:12] [INFO] [ReplayManager]   Enemy 3: Enemy4
[00:59:12] [INFO] [ReplayManager]   Enemy 4: Enemy5
[00:59:12] [INFO] [LabyrinthLevel] Replay recording started successfully
[00:59:12] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[00:59:12] [INFO] [CinemaEffects] Found player node: Player
[00:59:12] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[00:59:12] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 5)
[00:59:12] [ENEMY] [Enemy1] Registered as sound listener
[00:59:12] [ENEMY] [Enemy1] Spawned at (400, 300), hp: 1, behavior: GUARD
[00:59:12] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[00:59:12] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 6)
[00:59:12] [ENEMY] [Enemy2] Registered as sound listener
[00:59:12] [ENEMY] [Enemy2] Spawned at (900, 950), hp: 2, behavior: GUARD
[00:59:12] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[00:59:12] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 7)
[00:59:12] [ENEMY] [Enemy3] Registered as sound listener
[00:59:12] [ENEMY] [Enemy3] Spawned at (1200, 1000), hp: 2, behavior: PATROL
[00:59:12] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[00:59:12] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 8)
[00:59:12] [ENEMY] [Enemy4] Registered as sound listener
[00:59:12] [ENEMY] [Enemy4] Spawned at (1650, 650), hp: 1, behavior: GUARD
[00:59:12] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[00:59:12] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 9)
[00:59:12] [ENEMY] [Enemy5] Registered as sound listener
[00:59:12] [ENEMY] [Enemy5] Spawned at (1500, 300), hp: 3, behavior: GUARD
[00:59:12] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[00:59:12] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=5
[00:59:12] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(150,1000), corner_timer=0.00
[00:59:12] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(150,1000), corner_timer=0.00
[00:59:12] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(150,1000), corner_timer=0.00
[00:59:12] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(150,1000), corner_timer=0.00
[00:59:12] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:59:12] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[00:59:12] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[00:59:12] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:59:12] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:59:12] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:59:12] [INFO] [LastChance] Found player: Player
[00:59:12] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:59:12] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:59:12] [INFO] [LastChance] Connected to player Died signal (C#)
[00:59:12] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[00:59:13] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=5
[00:59:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(230.7836, 1102.163), source=PLAYER (MakarovPM), range=1469, listeners=9
[00:59:13] [INFO] [SoundPropagation] Cleaned up 4 invalid listeners
[00:59:13] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=0, below_threshold=3
[00:59:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(272.1494, 1117.925), source=PLAYER (MakarovPM), range=1469, listeners=5
[00:59:14] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=0, below_threshold=4
[00:59:14] [ENEMY] [Enemy3] PATROL corner check: angle -90.0°
[00:59:14] [ENEMY] [Enemy3] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-90.0°, current=0.0°, player=(299,1111), corner_timer=0.30
[00:59:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(305.0395, 1117.924), source=PLAYER (MakarovPM), range=1469, listeners=5
[00:59:14] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=5
[00:59:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(312.9296, 1117.924), source=PLAYER (MakarovPM), range=1469, listeners=5
[00:59:14] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=5
[00:59:14] [ENEMY] [Enemy3] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=0.0°, current=-54.4°, player=(300,1106), corner_timer=-0.02
[00:59:14] [ENEMY] [Enemy3] PATROL corner check: angle -90.0°
[00:59:14] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=-90.0°, current=-51.6°, player=(297,1104), corner_timer=0.30
[00:59:14] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=5
[00:59:15] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[00:59:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:15] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[00:59:15] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[00:59:15] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[00:59:15] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[00:59:15] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:59:15] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:59:15] [INFO] [CinemaEffects] Scene changed to: LabyrinthLevel
[00:59:15] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[00:59:15] [INFO] [FlashbangPlayer] Resetting flashbang player effects (scene change)
[00:59:15] [INFO] [EnemyGrenade] Initialized: 1 grenades
[00:59:15] [ENEMY] [Enemy1] Death animation component initialized
[00:59:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:15] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[00:59:15] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[00:59:15] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[00:59:15] [INFO] [EnemyGrenade] Initialized: 1 grenades
[00:59:15] [ENEMY] [Enemy2] Death animation component initialized
[00:59:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:15] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[00:59:15] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[00:59:15] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[00:59:15] [INFO] [EnemyGrenade] Initialized: 1 grenades
[00:59:15] [ENEMY] [Enemy3] Death animation component initialized
[00:59:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:15] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[00:59:15] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[00:59:15] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[00:59:15] [ENEMY] [Enemy4] Death animation component initialized
[00:59:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:15] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[00:59:15] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[00:59:15] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[00:59:15] [INFO] [EnemyGrenade] Initialized: 1 grenades
[00:59:15] [ENEMY] [Enemy5] Death animation component initialized
[00:59:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:15] [INFO] [BloodyFeet:Player] Footprint scene loaded
[00:59:15] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[00:59:15] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[00:59:15] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[00:59:15] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:59:15] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:59:15] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:59:15] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:59:15] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:59:15] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[00:59:15] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[00:59:15] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[00:59:15] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 3/4
[00:59:15] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:59:15] [INFO] [LabyrinthLevel] Found Environment/Enemies node with 5 children
[00:59:15] [INFO] [LabyrinthLevel] Child 'Enemy1': script=true, has_died_signal=true
[00:59:15] [INFO] [LabyrinthLevel] Child 'Enemy2': script=true, has_died_signal=true
[00:59:15] [INFO] [LabyrinthLevel] Child 'Enemy3': script=true, has_died_signal=true
[00:59:15] [INFO] [LabyrinthLevel] Child 'Enemy4': script=true, has_died_signal=true
[00:59:15] [INFO] [LabyrinthLevel] Child 'Enemy5': script=true, has_died_signal=true
[00:59:15] [INFO] [LabyrinthLevel] Enemy tracking complete: 5 enemies registered
[00:59:15] [INFO] [LabyrinthLevel] Setting up weapon: makarov_pm
[00:59:15] [INFO] [ScoreManager] Level started with 5 enemies
[00:59:15] [INFO] [LabyrinthLevel] ReplayManager found as C# autoload - verified OK
[00:59:15] [INFO] [LabyrinthLevel] Starting replay recording - Player: Player, Enemies count: 5
[00:59:15] [INFO] [ReplayManager] Replay data cleared
[00:59:15] [INFO] [LabyrinthLevel] Previous replay data cleared
[00:59:15] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[00:59:15] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[00:59:15] [INFO] [ReplayManager] Level: LabyrinthLevel
[00:59:15] [INFO] [ReplayManager] Player: Player (valid: True)
[00:59:15] [INFO] [ReplayManager] Enemies count: 5
[00:59:15] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[00:59:15] [INFO] [ReplayManager]   Enemy 0: Enemy1
[00:59:15] [INFO] [ReplayManager]   Enemy 1: Enemy2
[00:59:15] [INFO] [ReplayManager]   Enemy 2: Enemy3
[00:59:15] [INFO] [ReplayManager]   Enemy 3: Enemy4
[00:59:15] [INFO] [ReplayManager]   Enemy 4: Enemy5
[00:59:15] [INFO] [LabyrinthLevel] Replay recording started successfully
[00:59:15] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[00:59:15] [INFO] [CinemaEffects] Found player node: Player
[00:59:15] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[00:59:15] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 6)
[00:59:15] [ENEMY] [Enemy1] Registered as sound listener
[00:59:15] [ENEMY] [Enemy1] Spawned at (400, 300), hp: 2, behavior: GUARD
[00:59:15] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[00:59:15] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 7)
[00:59:15] [ENEMY] [Enemy2] Registered as sound listener
[00:59:15] [ENEMY] [Enemy2] Spawned at (900, 950), hp: 1, behavior: GUARD
[00:59:15] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[00:59:15] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 8)
[00:59:15] [ENEMY] [Enemy3] Registered as sound listener
[00:59:15] [ENEMY] [Enemy3] Spawned at (1200, 1000), hp: 2, behavior: PATROL
[00:59:15] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[00:59:15] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 9)
[00:59:15] [ENEMY] [Enemy4] Registered as sound listener
[00:59:15] [ENEMY] [Enemy4] Spawned at (1650, 650), hp: 2, behavior: GUARD
[00:59:15] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[00:59:15] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 10)
[00:59:15] [ENEMY] [Enemy5] Registered as sound listener
[00:59:15] [ENEMY] [Enemy5] Spawned at (1500, 300), hp: 3, behavior: GUARD
[00:59:15] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[00:59:15] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=5
[00:59:15] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(150,1000), corner_timer=0.00
[00:59:15] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=315.0°, current=0.0°, player=(150,1000), corner_timer=0.00
[00:59:15] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(150,1000), corner_timer=0.00
[00:59:15] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(150,1000), corner_timer=0.00
[00:59:15] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:59:15] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[00:59:15] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[00:59:15] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:59:15] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:59:15] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:59:15] [INFO] [LastChance] Found player: Player
[00:59:15] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:59:15] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:59:15] [INFO] [LastChance] Connected to player Died signal (C#)
[00:59:15] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[00:59:15] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[00:59:15] [INFO] [GrenadeBase] Grenade created at (860.1092, 947.0462) (frozen)
[00:59:15] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[00:59:15] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[00:59:15] [INFO] [GrenadeTimerHelper] Attached GrenadeTimer to FragGrenade (type: Frag)
[00:59:15] [INFO] [EnemyGrenade] Attached C# GrenadeTimer to grenade (type: Frag)
[00:59:15] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[00:59:15] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[00:59:15] [INFO] [GrenadeBase] LEGACY throw_grenade() called! Direction: (-0.99727, -0.073845), Speed: 1186.5 (unfrozen)
[00:59:15] [INFO] [GrenadeBase] NOTE: Using DRAG-BASED system. If velocity-based is expected, ensure grenade has throw_grenade_velocity_based() method.
[00:59:15] [INFO] [FragGrenade] Grenade thrown (legacy) - impact detection enabled
[00:59:15] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[00:59:15] [INFO] [EnemyGrenade] Enemy grenade thrown! Target: (301.3289, 989.9114), Distance: 600
[00:59:15] [INFO] [GrenadeBase] Collision detected with Storage_WallRight (type: StaticBody2D)
[00:59:15] [INFO] [FragGrenade] Impact detected! Body: Storage_WallRight (type: StaticBody2D), triggering explosion
[00:59:15] [INFO] [FragGrenade] Impact detected - exploding immediately!
[00:59:15] [INFO] [GrenadeBase] EXPLODED at (474.6512, 917.5501)!
[00:59:15] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(474.6512, 917.5501), source=NEUTRAL (FragGrenade), range=2937, listeners=10
[00:59:15] [INFO] [SoundPropagation] Cleaned up 5 invalid listeners
[00:59:15] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=4
[00:59:15] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 0.6 degrees
[00:59:15] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 82.6 degrees
[00:59:15] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 175.1 degrees
[00:59:15] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 271.5 degrees
[00:59:15] [INFO] [ImpactEffects] Spawning explosion visual effect at (474.6512, 917.5501) (radius=225) - using shadow-based wall occlusion
[00:59:15] [INFO] [GrenadeTimer] Impact detected with Storage_WallRight - EXPLODING!
[00:59:15] [INFO] [GrenadeTimer] EXPLODED at (474.6512, 917.5501)!
[00:59:15] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[00:59:15] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[00:59:15] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(474.6512, 917.5501), source=NEUTRAL (FragGrenade), range=2938, listeners=5
[00:59:15] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=4
[00:59:15] [INFO] [GrenadeTimer] Spawned PointLight2D frag explosion flash at (474.6512, 917.5501) (shadow-based wall occlusion)
[00:59:16] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=5
[00:59:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(251.6676, 1116.321), source=PLAYER (MakarovPM), range=1469, listeners=5
[00:59:16] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=0, below_threshold=3
[00:59:16] [ENEMY] [Enemy3] Hit: dmg=1, hp=2/2->1/2
[00:59:16] [INFO] [ImpactEffects] spawn_blood_effect called at (1200, 1000), dir=(-0.988204, 0.153143), lethal=false
[00:59:16] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[00:59:16] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[00:59:16] [INFO] [ImpactEffects] Blood effect spawned at (1200, 1000) (scale=1)
[00:59:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(251.6676, 1116.321), source=PLAYER (MakarovPM), range=1469, listeners=5
[00:59:16] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=0, below_threshold=3
[00:59:16] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(251.6676, 1116.321), source=PLAYER (MakarovPM), range=1469, listeners=5
[00:59:16] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=0, below_threshold=3
[00:59:16] [ENEMY] [Enemy3] PATROL corner check: angle -90.0°
[00:59:16] [ENEMY] [Enemy3] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-90.0°, current=-8.8°, player=(251,1110), corner_timer=0.30
[00:59:16] [INFO] [BloodDecal] Blood puddle created at (1095.019, 1016.009) (added to group)
[00:59:16] [INFO] [BloodDecal] Blood puddle created at (1088.633, 1051.739) (added to group)
[00:59:16] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[00:59:16] [INFO] [GrenadeBase] Grenade created at (1190.088, 1007.733) (frozen)
[00:59:16] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[00:59:16] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[00:59:16] [INFO] [GrenadeTimerHelper] Attached GrenadeTimer to FragGrenade (type: Frag)
[00:59:16] [INFO] [EnemyGrenade] Attached C# GrenadeTimer to grenade (type: Frag)
[00:59:16] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[00:59:16] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[00:59:16] [INFO] [GrenadeBase] LEGACY throw_grenade() called! Direction: (-0.981135, 0.193323), Speed: 1186.5 (unfrozen)
[00:59:16] [INFO] [GrenadeBase] NOTE: Using DRAG-BASED system. If velocity-based is expected, ensure grenade has throw_grenade_velocity_based() method.
[00:59:16] [INFO] [FragGrenade] Grenade thrown (legacy) - impact detection enabled
[00:59:16] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[00:59:16] [INFO] [EnemyGrenade] Enemy grenade thrown! Target: (604.0192, 1069.331), Distance: 629
[00:59:16] [INFO] [BloodDecal] Blood puddle created at (1091.687, 1041.808) (added to group)
[00:59:16] [INFO] [BloodDecal] Blood puddle created at (1130.882, 1073.952) (added to group)
[00:59:16] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:16] [INFO] [BloodDecal] Blood puddle created at (1068.086, 1077.441) (added to group)
[00:59:16] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:16] [INFO] [BloodDecal] Blood puddle created at (1103.208, 1051.747) (added to group)
[00:59:16] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(251.6676, 1116.321), shooter_id=346348849214, bullet_pos=(585.5542, 1125.03)
[00:59:16] [INFO] [Bullet] Using shooter_position, distance=334.000152587891
[00:59:16] [INFO] [Bullet] Distance to wall: 334.000152587891 (22.7426845618338% of viewport)
[00:59:16] [INFO] [Bullet] Within ricochet range - trying ricochet first
[00:59:16] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:16] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:16] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:16] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:16] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:16] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:16] [INFO] [BloodDecal] Blood puddle created at (1062.796, 1055.309) (added to group)
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [ENEMY] [Enemy3] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=0.0°, current=-63.2°, player=(251,1091), corner_timer=-0.02
[00:59:17] [ENEMY] [Enemy3] PATROL corner check: angle -90.0°
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=-90.0°, current=-60.4°, player=(251,1088), corner_timer=0.30
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [INFO] [BloodDecal] Blood puddle created at (1084.958, 1097.29) (added to group)
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=5
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(251.6676, 1116.321), shooter_id=346348849214, bullet_pos=(1052.286, 1125.076)
[00:59:17] [INFO] [Bullet] Using shooter_position, distance=800.666137695313
[00:59:17] [INFO] [Bullet] Distance to wall: 800.666137695313 (54.5188296108774% of viewport)
[00:59:17] [INFO] [Bullet] Distance-based penetration chance: 83.0613654539764%
[00:59:17] [INFO] [Bullet] Penetration failed (distance roll)
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [INFO] [GrenadeBase] Collision detected with WallBottom (type: StaticBody2D)
[00:59:17] [INFO] [FragGrenade] Impact detected! Body: WallBottom (type: StaticBody2D), triggering explosion
[00:59:17] [INFO] [FragGrenade] Impact detected - exploding immediately!
[00:59:17] [INFO] [GrenadeBase] EXPLODED at (594.0308, 1119.335)!
[00:59:17] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(594.0308, 1119.335), source=NEUTRAL (FragGrenade), range=2937, listeners=5
[00:59:17] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=4
[00:59:17] [INFO] [GrenadeBase] Scattered 0 casings (lethal zone) + 3 casings (proximity) from explosion
[00:59:17] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 19.3 degrees
[00:59:17] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 81.2 degrees
[00:59:17] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 172.7 degrees
[00:59:17] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 267.4 degrees
[00:59:17] [INFO] [ImpactEffects] Spawning explosion visual effect at (594.0308, 1119.335) (radius=225) - using shadow-based wall occlusion
[00:59:17] [INFO] [GrenadeTimer] Impact detected with WallBottom - EXPLODING!
[00:59:17] [INFO] [GrenadeTimer] EXPLODED at (594.03076, 1119.3351)!
[00:59:17] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[00:59:17] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[00:59:17] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(594.0308, 1119.335), source=NEUTRAL (FragGrenade), range=2938, listeners=5
[00:59:17] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=4
[00:59:17] [INFO] [GrenadeTimer] Spawned PointLight2D frag explosion flash at (594.03076, 1119.3351) (shadow-based wall occlusion)
[00:59:17] [INFO] [GrenadeTimer] Scattered 3 casings
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:17] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(251.6676, 1116.321), shooter_id=346348849214, bullet_pos=(1968.994, 1111.202)
[00:59:18] [INFO] [Bullet] Using shooter_position, distance=1717.33447265625
[00:59:18] [INFO] [Bullet] Distance to wall: 1717.33447265625 (116.936462142803% of viewport)
[00:59:18] [INFO] [Bullet] Distance-based penetration chance: 26.6127075714394%
[00:59:18] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:18] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=5
[00:59:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(314.2957, 1115.879), source=PLAYER (MakarovPM), range=1469, listeners=5
[00:59:18] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=5
[00:59:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(314.2957, 1117.984), source=PLAYER (MakarovPM), range=1469, listeners=5
[00:59:18] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=5
[00:59:18] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(314.2957, 1117.599), source=PLAYER (MakarovPM), range=1469, listeners=5
[00:59:18] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=5
[00:59:18] [ENEMY] [Enemy3] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=52.8°, player=(314,1111), corner_timer=-0.02
[00:59:18] [ENEMY] [Enemy3] PATROL corner check: angle -90.0°
[00:59:18] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=-90.0°, current=55.6°, player=(314,1110), corner_timer=0.30
[00:59:18] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:18] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:18] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [INFO] [ReplayManager] Recording frame 240 (4,0s): player_valid=True, enemies=5
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [ENEMY] [Enemy3] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.2°, player=(314,1039), corner_timer=-0.02
[00:59:19] [ENEMY] [Enemy3] PATROL corner check: angle -90.0°
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=-90.0°, current=4.1°, player=(314,1033), corner_timer=0.30
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(314.2957, 1117.984), shooter_id=346348849214, bullet_pos=(852.8967, 892.2302)
[00:59:19] [INFO] [Bullet] Using shooter_position, distance=583.999938964844
[00:59:19] [INFO] [Bullet] Distance to wall: 583.999938964844 (39.7656297253115% of viewport)
[00:59:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
[00:59:19] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(314.2957, 1117.599), shooter_id=346348849214, bullet_pos=(851.3337, 888.1519)
[00:59:19] [INFO] [Bullet] Using shooter_position, distance=583.999572753906
[00:59:19] [INFO] [Bullet] Distance to wall: 583.999572753906 (39.7656047893354% of viewport)
[00:59:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
[00:59:19] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [INFO] [BloodyFeet:Enemy3] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(314.2957, 1115.879), shooter_id=346348849214, bullet_pos=(1560.541, 553.326)
[00:59:19] [INFO] [Bullet] Using shooter_position, distance=1367.3310546875
[00:59:19] [INFO] [Bullet] Distance to wall: 1367.3310546875 (93.1040858137761% of viewport)
[00:59:19] [INFO] [Bullet] Distance-based penetration chance: 38.0452332172612%
[00:59:19] [INFO] [Bullet] Penetration failed (distance roll)
[00:59:20] [INFO] [ReplayManager] Recording frame 300 (5,0s): player_valid=True, enemies=5
[00:59:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(321.9349, 1086.273), source=PLAYER (MakarovPM), range=1469, listeners=5
[00:59:20] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=5
[00:59:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(321.9349, 1107.773), source=PLAYER (MakarovPM), range=1469, listeners=5
[00:59:20] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=5
[00:59:20] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:20] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(321.9349, 1098.773), source=PLAYER (MakarovPM), range=1469, listeners=5
[00:59:20] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=5
[00:59:20] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:20] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:20] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:20] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:20] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:20] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:20] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:20] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:20] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:20] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[00:59:21] [ENEMY] [Enemy3] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=0.0°, current=87.1°, player=(321,939), corner_timer=-0.02
[00:59:21] [INFO] [ReplayManager] Recording frame 360 (6,0s): player_valid=True, enemies=5
[00:59:21] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[00:59:21] [ENEMY] [Enemy1] Player reloading: false -> true
[00:59:21] [ENEMY] [Enemy2] Player reloading: false -> true
[00:59:21] [ENEMY] [Enemy3] Player reloading: false -> true
[00:59:21] [ENEMY] [Enemy4] Player reloading: false -> true
[00:59:21] [ENEMY] [Enemy5] Player reloading: false -> true
[00:59:21] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(321.9349, 923.5504), source=PLAYER (Player), range=900, listeners=5
[00:59:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=0, below_threshold=3
[00:59:21] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=628), can_see=false
[00:59:21] [ENEMY] [Enemy2] Player vulnerable (reloading) but cannot attack: close=false (dist=579), can_see=false
[00:59:21] [ENEMY] [Enemy3] Player vulnerable (reloading) but cannot attack: close=false (dist=812), can_see=false
[00:59:21] [ENEMY] [Enemy4] Player vulnerable (reloading) but cannot attack: close=false (dist=1356), can_see=false
[00:59:21] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1333), can_see=false
[00:59:21] [INFO] [Player.Reload.Anim] LeftArm: pos=(6.916302, 4.333333), target=(-4, 2), base=(16, 6)
[00:59:21] [INFO] [Player.Reload.Anim] RightArm: pos=(4.7503643, 6), target=(4, 6), base=(4, 6)
[00:59:21] [ENEMY] [Enemy3] PATROL corner check: angle -90.0°
[00:59:21] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=-90.0°, current=52.8°, player=(321,912), corner_timer=0.30
[00:59:21] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[00:59:21] [ENEMY] [Enemy1] Player reloading: true -> false
[00:59:21] [ENEMY] [Enemy2] Player reloading: true -> false
[00:59:21] [ENEMY] [Enemy3] Player reloading: true -> false
[00:59:21] [ENEMY] [Enemy4] Player reloading: true -> false
[00:59:21] [ENEMY] [Enemy5] Player reloading: true -> false
[00:59:21] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[00:59:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(321.9349, 1086.273), shooter_id=346348849214, bullet_pos=(1441.52, 906.0285)
[00:59:21] [INFO] [Bullet] Using shooter_position, distance=1134.00085449219
[00:59:21] [INFO] [Bullet] Distance to wall: 1134.00085449219 (77.2162034260724% of viewport)
[00:59:21] [INFO] [Bullet] Distance-based penetration chance: 56.5810960029156%
[00:59:21] [INFO] [Bullet] Penetration failed (distance roll)
[00:59:21] [ENEMY] [Enemy3] Hit: dmg=1, hp=1/2->0/2
[00:59:21] [INFO] [ImpactEffects] spawn_blood_effect called at (1174.334, 1000), dir=(0.991972, -0.126455), lethal=true
[00:59:21] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[00:59:21] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[00:59:21] [INFO] [ImpactEffects] Blood effect spawned at (1174.334, 1000) (scale=0.75)
[00:59:21] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[00:59:21] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[00:59:21] [ENEMY] [Enemy2] [AllyDeath] Witnessed at (1174.334, 1000), entering SEARCHING
[00:59:21] [ENEMY] [Enemy2] SEARCHING started: center=(1174.334, 1000), radius=100, waypoints=5
[00:59:21] [ENEMY] [Enemy3] [AllyDeath] Notified 1 enemies
[00:59:21] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 4)
[00:59:21] [INFO] [DeathAnim] Started - Angle: -7.3 deg, Index: 11
[00:59:21] [ENEMY] [Enemy3] Death animation started with hit direction: (0.991972, -0.126455)
[00:59:21] [INFO] [FlashbangStatus] Status: STUNNED applied
[00:59:21] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=SEARCHING, target=-176.2°, current=-22.5°, player=(321,911), corner_timer=0.00
[00:59:21] [ENEMY] [Enemy2] SEARCHING corner check: angle 100.3°
[00:59:21] [INFO] [FlashbangStatus] Status: STUNNED removed
[00:59:21] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[00:59:21] [INFO] [BloodDecal] Blood puddle created at (1234.621, 1020.792) (added to group)
[00:59:21] [INFO] [BloodDecal] Blood puddle created at (1248.405, 1040.568) (added to group)
[00:59:21] [INFO] [BloodDecal] Blood puddle created at (1262.467, 1013.846) (added to group)
[00:59:21] [INFO] [BloodDecal] Blood puddle created at (1219.898, 1018.056) (added to group)
[00:59:21] [INFO] [BloodDecal] Blood puddle created at (1234.976, 1005.459) (added to group)
[00:59:21] [ENEMY] [Enemy2] SEARCHING corner check: angle -79.7°
[00:59:21] [INFO] [BloodDecal] Blood puddle created at (1238.186, 1020.282) (added to group)
[00:59:21] [INFO] [BloodDecal] Blood puddle created at (1273.481, 1043.517) (added to group)
[00:59:21] [INFO] [BloodDecal] Blood puddle created at (1260.658, 1020) (added to group)
[00:59:21] [INFO] [BloodDecal] Blood puddle created at (1289.633, 1019.48) (added to group)
[00:59:21] [INFO] [BloodDecal] Blood puddle created at (1264.142, 1002.492) (added to group)
[00:59:21] [INFO] [BloodDecal] Blood puddle created at (1304.956, 1016.207) (added to group)
[00:59:21] [ENEMY] [Enemy3] Ragdoll activated
[00:59:21] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[00:59:21] [INFO] [BloodDecal] Blood puddle created at (1293.039, 1002.55) (added to group)
[00:59:21] [INFO] [BloodDecal] Blood puddle created at (1271.781, 1076.318) (added to group)
[00:59:21] [INFO] [BloodDecal] Blood puddle created at (1296.136, 1000.041) (added to group)
[00:59:21] [INFO] [BloodDecal] Blood puddle created at (1270.551, 1053.937) (added to group)
[00:59:21] [INFO] [BloodDecal] Blood puddle created at (1284.532, 1025.035) (added to group)
[00:59:21] [INFO] [BloodDecal] Blood puddle created at (1317.394, 1013.189) (added to group)
[00:59:21] [INFO] [BloodDecal] Blood puddle created at (1312.362, 1072.505) (added to group)
[00:59:22] [INFO] [BloodDecal] Blood puddle created at (1288.277, 1062.303) (added to group)
[00:59:22] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P1:visible, state=SEARCHING, target=175.2°, current=-135.6°, player=(321,1055), corner_timer=-0.02
[00:59:22] [ENEMY] [Enemy2] SEARCHING: Player spotted! Transitioning to COMBAT
[00:59:22] [ENEMY] [Enemy2] State: SEARCHING -> COMBAT
[00:59:22] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[00:59:22] [INFO] [ReplayManager] Recording frame 420 (7,0s): player_valid=True, enemies=5
[00:59:22] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=-77.6°, current=-120.3°, player=(321,1072), corner_timer=-0.02
[00:59:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(321.9349, 1117.996), source=PLAYER (MakarovPM), range=1469, listeners=4
[00:59:22] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=4
[00:59:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(321.9349, 1117.996), source=PLAYER (MakarovPM), range=1469, listeners=4
[00:59:22] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=4
[00:59:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(321.9349, 1117.996), source=PLAYER (MakarovPM), range=1469, listeners=4
[00:59:22] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=4
[00:59:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(321.9349, 1110.933), source=PLAYER (MakarovPM), range=1469, listeners=4
[00:59:22] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=4
[00:59:22] [ENEMY] [Enemy3] Death animation completed
[00:59:22] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[00:59:22] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[00:59:23] [ENEMY] [Enemy2] Hit: dmg=1, hp=1/1->0/1
[00:59:23] [INFO] [ImpactEffects] spawn_blood_effect called at (1041.149, 893.354), dir=(0.95943, -0.281946), lethal=true
[00:59:23] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[00:59:23] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[00:59:23] [INFO] [ImpactEffects] Wall found for blood splatter at (1120.62, 870) (dist=82 px)
[00:59:23] [INFO] [BloodDecal] Blood puddle created at (1120.62, 871) (added to group)
[00:59:23] [INFO] [ImpactEffects] Blood effect spawned at (1041.149, 893.354) (scale=0.75)
[00:59:23] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
[00:59:23] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
[00:59:23] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 3)
[00:59:23] [INFO] [DeathAnim] Started - Angle: -16.4 deg, Index: 10
[00:59:23] [ENEMY] [Enemy2] Death animation started with hit direction: (0.95943, -0.281946)
[00:59:23] [INFO] [FlashbangStatus] Status: STUNNED applied
[00:59:23] [INFO] [FlashbangStatus] Status: STUNNED removed
[00:59:23] [INFO] [ReplayManager] Recording frame 480 (8,0s): player_valid=True, enemies=5
[00:59:23] [INFO] [BloodDecal] Blood puddle created at (1086.727, 896.5249) (added to group)
[00:59:23] [INFO] [BloodDecal] Blood puddle created at (1084.487, 908.1339) (added to group)
[00:59:23] [INFO] [BloodDecal] Blood puddle created at (1128.171, 881.6567) (added to group)
[00:59:23] [INFO] [BloodDecal] Blood puddle created at (1126.898, 883.4909) (added to group)
[00:59:23] [INFO] [BloodDecal] Blood puddle created at (1153.77, 879.391) (added to group)
[00:59:23] [INFO] [BloodDecal] Blood puddle created at (1118.825, 920.188) (added to group)
[00:59:23] [ENEMY] [Enemy2] Ragdoll activated
[00:59:23] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[00:59:23] [INFO] [BloodDecal] Blood puddle created at (1153.561, 909.7432) (added to group)
[00:59:23] [INFO] [BloodDecal] Blood puddle created at (1166.154, 899.5976) (added to group)
[00:59:23] [INFO] [BloodDecal] Blood puddle created at (1153.069, 978.0601) (added to group)
[00:59:23] [INFO] [BloodDecal] Blood puddle created at (1152.432, 964.6635) (added to group)
[00:59:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(321.9349, 1117.996), shooter_id=346348849214, bullet_pos=(1437.729, 915.6121)
[00:59:23] [INFO] [Bullet] Using shooter_position, distance=1133.99951171875
[00:59:23] [INFO] [Bullet] Distance to wall: 1133.99951171875 (77.2161119941599% of viewport)
[00:59:23] [INFO] [Bullet] Distance-based penetration chance: 56.5812026734802%
[00:59:23] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:23] [INFO] [BloodDecal] Blood puddle created at (1244.579, 990.8221) (added to group)
[00:59:23] [INFO] [BloodDecal] Blood puddle created at (1136.294, 938.9839) (added to group)
[00:59:23] [INFO] [BloodDecal] Blood puddle created at (1173.855, 929.9346) (added to group)
[00:59:23] [INFO] [BloodDecal] Blood puddle created at (1190.882, 943.3809) (added to group)
[00:59:23] [INFO] [BloodDecal] Blood puddle created at (1119.304, 919.2013) (added to group)
[00:59:23] [INFO] [BloodDecal] Blood puddle created at (1137.158, 939.9926) (added to group)
[00:59:23] [INFO] [BloodDecal] Blood puddle created at (1230.302, 1026.904) (added to group)
[00:59:23] [INFO] [BloodDecal] Blood puddle created at (1190.961, 931.8845) (added to group)
[00:59:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(321.9349, 1117.996), shooter_id=346348849214, bullet_pos=(1441.067, 934.9725)
[00:59:23] [INFO] [Bullet] Using shooter_position, distance=1133.99938964844
[00:59:23] [INFO] [Bullet] Distance to wall: 1133.99938964844 (77.2161036821678% of viewport)
[00:59:23] [INFO] [Bullet] Distance-based penetration chance: 56.5812123708042%
[00:59:23] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(321.9349, 1110.933), shooter_id=346348849214, bullet_pos=(1440.026, 921.6472)
[00:59:23] [INFO] [Bullet] Using shooter_position, distance=1134.00085449219
[00:59:23] [INFO] [Bullet] Distance to wall: 1134.00085449219 (77.2162034260724% of viewport)
[00:59:23] [INFO] [Bullet] Distance-based penetration chance: 56.5810960029156%
[00:59:23] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:24] [INFO] [ReplayManager] Recording frame 540 (9,0s): player_valid=True, enemies=5
[00:59:24] [ENEMY] [Enemy2] Death animation completed
[00:59:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(321.9349, 1117.986), source=PLAYER (MakarovPM), range=1469, listeners=3
[00:59:24] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=3
[00:59:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(321.9349, 1117.986), source=PLAYER (MakarovPM), range=1469, listeners=3
[00:59:24] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=3
[00:59:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(321.9349, 1117.986), shooter_id=346348849214, bullet_pos=(923.9973, 919.2979)
[00:59:25] [INFO] [Bullet] Using shooter_position, distance=634.000183105469
[00:59:25] [INFO] [Bullet] Distance to wall: 634.000183105469 (43.1702382911884% of viewport)
[00:59:25] [INFO] [Bullet] Distance-based penetration chance: 96.3013886602802%
[00:59:25] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:25] [INFO] [ReplayManager] Recording frame 600 (10,0s): player_valid=True, enemies=5
[00:59:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(321.9349, 1117.986), shooter_id=346348849214, bullet_pos=(889.4152, 921.0917)
[00:59:25] [INFO] [Bullet] Using shooter_position, distance=600.667419433594
[00:59:25] [INFO] [Bullet] Distance to wall: 600.667419433594 (40.9005491192228% of viewport)
[00:59:26] [INFO] [ReplayManager] Recording frame 660 (11,0s): player_valid=True, enemies=5
[00:59:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(321.9349, 1117.986), shooter_id=346348849214, bullet_pos=(1438.065, 1056.038)
[00:59:26] [INFO] [Bullet] Using shooter_position, distance=1117.84765625
[00:59:26] [INFO] [Bullet] Distance to wall: 1117.84765625 (76.1163024546494% of viewport)
[00:59:26] [INFO] [Bullet] Distance-based penetration chance: 57.864313802909%
[00:59:26] [INFO] [Bullet] Penetration failed (distance roll)
[00:59:27] [INFO] [ReplayManager] Recording frame 720 (12,0s): player_valid=True, enemies=5
[00:59:27] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[00:59:28] [INFO] [ScoreManager] Combo ended at 2. Max combo: 2
[00:59:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1204.305, 1043.703), source=PLAYER (MakarovPM), range=1469, listeners=3
[00:59:28] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=3
[00:59:28] [INFO] [ReplayManager] Recording frame 780 (13,0s): player_valid=True, enemies=5
[00:59:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1239.139, 1043.703), source=PLAYER (MakarovPM), range=1469, listeners=3
[00:59:28] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=3
[00:59:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1237.639, 1043.703), source=PLAYER (MakarovPM), range=1469, listeners=3
[00:59:28] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=3
[00:59:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1204.305, 1043.703), shooter_id=346348849214, bullet_pos=(1364.453, 482.0904)
[00:59:28] [INFO] [Bullet] Using shooter_position, distance=584.000549316406
[00:59:28] [INFO] [Bullet] Distance to wall: 584.000549316406 (39.7656712852718% of viewport)
[00:59:28] [INFO] [Bullet] Within ricochet range - trying ricochet first
[00:59:28] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1239.139, 1043.703), shooter_id=346348849214, bullet_pos=(1406.622, 484.2354)
[00:59:28] [INFO] [Bullet] Using shooter_position, distance=583.999389648438
[00:59:28] [INFO] [Bullet] Distance to wall: 583.999389648438 (39.7655923213473% of viewport)
[00:59:28] [INFO] [Bullet] Within ricochet range - trying ricochet first
[00:59:28] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:28] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[00:59:28] [ENEMY] [Enemy1] Player reloading: false -> true
[00:59:28] [ENEMY] [Enemy4] Player reloading: false -> true
[00:59:28] [ENEMY] [Enemy5] Player reloading: false -> true
[00:59:28] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(1111.139, 1037.703), source=PLAYER (Player), range=900, listeners=3
[00:59:28] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=0, below_threshold=2
[00:59:28] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=1025), can_see=false
[00:59:28] [ENEMY] [Enemy4] Player vulnerable (reloading) but cannot attack: close=false (dist=664), can_see=false
[00:59:28] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=834), can_see=false
[00:59:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1237.639, 1043.703), shooter_id=346348849214, bullet_pos=(1452.541, 482.7958)
[00:59:28] [INFO] [Bullet] Using shooter_position, distance=600.666809082031
[00:59:28] [INFO] [Bullet] Distance to wall: 600.666809082031 (40.9005075592625% of viewport)
[00:59:28] [INFO] [Bullet] Distance-based penetration chance: 98.9494078475271%
[00:59:28] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:29] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[00:59:29] [ENEMY] [Enemy1] Player reloading: true -> false
[00:59:29] [ENEMY] [Enemy4] Player reloading: true -> false
[00:59:29] [ENEMY] [Enemy5] Player reloading: true -> false
[00:59:29] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[00:59:29] [INFO] [ReplayManager] Recording frame 840 (14,0s): player_valid=True, enemies=5
[00:59:29] [INFO] [Player.Reload.Anim] LeftArm: pos=(14.875231, 5.775096), target=(16, 6), base=(16, 6)
[00:59:29] [INFO] [Player.Reload.Anim] RightArm: pos=(4.000248, 6), target=(4, 6), base=(4, 6)
[00:59:29] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[00:59:30] [INFO] [ReplayManager] Recording frame 900 (15,0s): player_valid=True, enemies=5
[00:59:30] [INFO] [BloodyFeet:Player] Blood ran out - no more footprints
[00:59:31] [INFO] [ReplayManager] Recording frame 960 (16,0s): player_valid=True, enemies=5
[00:59:32] [INFO] [ReplayManager] Recording frame 1020 (17,0s): player_valid=True, enemies=5
[00:59:33] [INFO] [ReplayManager] Recording frame 1080 (18,0s): player_valid=True, enemies=5
[00:59:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(268.9721, 574.0651), source=PLAYER (MakarovPM), range=1469, listeners=3
[00:59:33] [ENEMY] [Enemy1] Heard gunshot at (268.9721, 574.0651), source_type=0, intensity=0.03, distance=304
[00:59:33] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=2
[00:59:33] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=116.0°, current=168.8°, player=(268,568), corner_timer=0.00
[00:59:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(268.9721, 574.0651), shooter_id=346348849214, bullet_pos=(299.7764, 533.8381)
[00:59:33] [INFO] [Bullet] Using shooter_position, distance=50.6666564941406
[00:59:33] [INFO] [Bullet] Distance to wall: 50.6666564941406 (3.449985808452% of viewport)
[00:59:33] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[00:59:33] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:33] [ENEMY] [Enemy1] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=117.0°, current=165.9°, player=(263,568), corner_timer=0.00
[00:59:33] [ENEMY] [Enemy1] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=117.9°, current=-80.0°, player=(257,568), corner_timer=0.00
[00:59:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(219.4721, 574.0651), source=PLAYER (MakarovPM), range=1469, listeners=3
[00:59:33] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=2
[00:59:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(174.5643, 562.9785), source=PLAYER (MakarovPM), range=1469, listeners=3
[00:59:33] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=1
[00:59:33] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[00:59:33] [INFO] [GrenadeBase] Grenade created at (329.2737, 420.2452) (frozen)
[00:59:33] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[00:59:33] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[00:59:33] [INFO] [GrenadeTimerHelper] Attached GrenadeTimer to FragGrenade (type: Frag)
[00:59:33] [INFO] [EnemyGrenade] Attached C# GrenadeTimer to grenade (type: Frag)
[00:59:33] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[00:59:33] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[00:59:33] [INFO] [GrenadeBase] LEGACY throw_grenade() called! Direction: (-0.301736, 0.953391), Speed: 410.3 (unfrozen)
[00:59:33] [INFO] [GrenadeBase] NOTE: Using DRAG-BASED system. If velocity-based is expected, ensure grenade has throw_grenade_velocity_based() method.
[00:59:33] [INFO] [FragGrenade] Grenade thrown (legacy) - impact detection enabled
[00:59:33] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[00:59:33] [INFO] [EnemyGrenade] Enemy grenade thrown! Target: (268.9721, 574.0651), Distance: 205
[00:59:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(138.4765, 530.5987), source=PLAYER (MakarovPM), range=1469, listeners=3
[00:59:33] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=1
[00:59:33] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
[00:59:33] [ENEMY] [Enemy1] ROT_CHANGE: P2:combat_state -> P4:velocity, state=RETREATING, target=75.2°, current=-128.6°, player=(122,509), corner_timer=0.00
[00:59:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(103.4746, 495.5968), source=PLAYER (MakarovPM), range=1469, listeners=3
[00:59:33] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=1
[00:59:33] [ENEMY] [Enemy1] Hit: dmg=1, hp=2/2->1/2
[00:59:33] [INFO] [ImpactEffects] spawn_blood_effect called at (348.9601, 410.9887), dir=(0.86713, -0.498082), lethal=false
[00:59:33] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[00:59:33] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[00:59:33] [INFO] [ImpactEffects] Blood effect spawned at (348.9601, 410.9887) (scale=0.5)
[00:59:33] [INFO] [FlashbangStatus] Status: STUNNED applied
[00:59:33] [ENEMY] [Enemy1] ROT_CHANGE: P4:velocity -> P1:visible, state=RETREATING, target=164.4°, current=150.1°, player=(95,481), corner_timer=0.00
[00:59:34] [INFO] [GrenadeBase] Collision detected with HorizontalDivider (type: StaticBody2D)
[00:59:34] [INFO] [FragGrenade] Impact detected! Body: HorizontalDivider (type: StaticBody2D), triggering explosion
[00:59:34] [INFO] [FragGrenade] Impact detected - exploding immediately!
[00:59:34] [INFO] [GrenadeBase] EXPLODED at (291.1994, 526.3207)!
[00:59:34] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(291.1994, 526.3207), source=NEUTRAL (FragGrenade), range=2937, listeners=3
[00:59:34] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=2
[00:59:34] [ENEMY] [Enemy1] Hit: dmg=1, hp=1/2->0/2
[00:59:34] [INFO] [ImpactEffects] spawn_blood_effect called at (348.9601, 410.9887), dir=(0.447801, -0.894133), lethal=true
[00:59:34] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[00:59:34] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[00:59:34] [INFO] [ImpactEffects] Blood effect spawned at (348.9601, 410.9887) (scale=1.5)
[00:59:34] [ENEMY] [Enemy1] Enemy died (ricochet: false, penetration: false)
[00:59:34] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[00:59:34] [INFO] [SoundPropagation] Unregistered listener: Enemy1 (remaining: 2)
[00:59:34] [INFO] [DeathAnim] Started - Angle: -63.4 deg, Index: 7
[00:59:34] [ENEMY] [Enemy1] Death animation started with hit direction: (0.447801, -0.894133)
[00:59:34] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 129.0
[00:59:34] [INFO] [FragGrenade] Player found in blast radius at distance 223.8
[00:59:34] [INFO] [Player] Spawning blood effect at (78.82909, 455.80533), dir=(-0.9490509, -0.31512278), lethal=False (C#)
[00:59:34] [INFO] [ImpactEffects] spawn_blood_effect called at (78.82909, 455.8053), dir=(-0.949051, -0.315123), lethal=false
[00:59:34] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[00:59:34] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[00:59:34] [INFO] [ImpactEffects] Wall found for blood splatter at (48, 445.5688) (dist=32 px)
[00:59:34] [INFO] [BloodDecal] Blood puddle created at (49, 445.5688) (added to group)
[00:59:34] [INFO] [ImpactEffects] Blood effect spawned at (78.82909, 455.8053) (scale=1)
[00:59:34] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[00:59:34] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[00:59:34] [INFO] [Player] Spawning blood effect at (78.82909, 455.80533), dir=(-0.9490509, -0.31512278), lethal=False (C#)
[00:59:34] [INFO] [ImpactEffects] spawn_blood_effect called at (78.82909, 455.8053), dir=(-0.949051, -0.315123), lethal=false
[00:59:34] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[00:59:34] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[00:59:34] [INFO] [ImpactEffects] Wall found for blood splatter at (48, 445.5688) (dist=32 px)
[00:59:34] [INFO] [BloodDecal] Blood puddle created at (49, 445.5688) (added to group)
[00:59:34] [INFO] [ImpactEffects] Blood effect spawned at (78.82909, 455.8053) (scale=1)
[00:59:34] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[00:59:34] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[00:59:34] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[00:59:34] [INFO] [Player] Spawning blood effect at (78.82909, 455.80533), dir=(-0.9490509, -0.31512278), lethal=True (C#)
[00:59:34] [INFO] [ImpactEffects] spawn_blood_effect called at (78.82909, 455.8053), dir=(-0.949051, -0.315123), lethal=true
[00:59:34] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[00:59:34] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[00:59:34] [INFO] [ImpactEffects] Wall found for blood splatter at (48, 445.5688) (dist=32 px)
[00:59:34] [INFO] [BloodDecal] Blood puddle created at (49, 445.5688) (added to group)
[00:59:34] [INFO] [ImpactEffects] Blood effect spawned at (78.82909, 455.8053) (scale=1.5)
[00:59:34] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[00:59:34] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[00:59:34] [INFO] [CinemaEffects] Player died - triggering death effects
[00:59:34] [INFO] [CinemaEffects] Death effects triggered - starting cigarette burn, expanding spots, and end of reel (top-right)
[00:59:34] [INFO] [PenultimateHit] Player died - ending penultimate effect
[00:59:34] [INFO] [LastChance] Player died
[00:59:34] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 223.8
[00:59:34] [INFO] [GrenadeBase] Scattered 5 casings (lethal zone) + 0 casings (proximity) from explosion
[00:59:34] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 12.6 degrees
[00:59:34] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 87.7 degrees
[00:59:34] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 184.4 degrees
[00:59:34] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 261.4 degrees
[00:59:34] [INFO] [ImpactEffects] Spawning explosion visual effect at (291.1994, 526.3207) (radius=225) - using shadow-based wall occlusion
[00:59:34] [INFO] [GrenadeTimer] Impact detected with HorizontalDivider - EXPLODING!
[00:59:34] [INFO] [GrenadeTimer] EXPLODED at (291.19937, 526.32074)!
[00:59:34] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[00:59:34] [INFO] [GrenadeTimer] Damaged enemy at distance 129,0
[00:59:34] [INFO] [GrenadeTimer] Damaged player at distance 223,8
[00:59:34] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[00:59:34] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(291.1994, 526.3207), source=NEUTRAL (FragGrenade), range=2938, listeners=2
[00:59:34] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=2
[00:59:34] [INFO] [GrenadeTimer] Spawned PointLight2D frag explosion flash at (291.19937, 526.32074) (shadow-based wall occlusion)
[00:59:34] [INFO] [GrenadeTimer] Scattered 5 casings
[00:59:34] [INFO] [FlashbangStatus] Status: STUNNED removed
[00:59:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(77.09572, 457.0233), source=PLAYER (MakarovPM), range=1469, listeners=2
[00:59:34] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=0, below_threshold=1
[00:59:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(219.4721, 574.0651), shooter_id=346348849214, bullet_pos=(733.7756, 50.37802)
[00:59:34] [INFO] [Bullet] Using shooter_position, distance=734.000183105469
[00:59:34] [INFO] [Bullet] Distance to wall: 734.000183105469 (49.9794221749739% of viewport)
[00:59:34] [INFO] [Bullet] Distance-based penetration chance: 88.3573407958637%
[00:59:34] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:34] [INFO] [ReplayManager] Recording frame 1140 (19,0s): player_valid=True, enemies=5
[00:59:34] [INFO] [BloodDecal] Blood puddle created at (393.9182, 395.463) (added to group)
[00:59:34] [INFO] [BloodDecal] Blood puddle created at (377.6691, 395.2323) (added to group)
[00:59:34] [INFO] [BloodDecal] Blood puddle created at (416.1156, 366.0252) (added to group)
[00:59:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(73.04829, 392.6998), source=PLAYER (MakarovPM), range=1469, listeners=2
[00:59:34] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=0, below_threshold=1
[00:59:34] [INFO] [BloodDecal] Blood puddle created at (408.5445, 380.0005) (added to group)
[00:59:34] [INFO] [BloodDecal] Blood puddle created at (410.239, 381.0522) (added to group)
[00:59:34] [INFO] [BloodDecal] Blood puddle created at (457.7792, 383.1284) (added to group)
[00:59:34] [INFO] [BloodDecal] Blood puddle created at (349.1045, 386.4784) (added to group)
[00:59:34] [INFO] [BloodDecal] Blood puddle created at (366.55, 388.6661) (added to group)
[00:59:34] [INFO] [BloodDecal] Blood puddle created at (377.5866, 361.2521) (added to group)
[00:59:34] [INFO] [BloodDecal] Blood puddle created at (356.8272, 366.295) (added to group)
[00:59:34] [INFO] [BloodDecal] Blood puddle created at (396.4422, 382.8078) (added to group)
[00:59:34] [INFO] [BloodDecal] Blood puddle created at (362.1611, 362.0466) (added to group)
[00:59:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(73.04829, 337.6998), source=PLAYER (MakarovPM), range=1469, listeners=2
[00:59:34] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=0, below_threshold=1
[00:59:34] [INFO] [BloodDecal] Blood puddle created at (454.5925, 332.7265) (added to group)
[00:59:34] [INFO] [BloodDecal] Blood puddle created at (446.1247, 403.1424) (added to group)
[00:59:34] [INFO] [BloodDecal] Blood puddle created at (415.4043, 351.0766) (added to group)
[00:59:34] [INFO] [BloodDecal] Blood puddle created at (412.5933, 324.4498) (added to group)
[00:59:34] [INFO] [BloodDecal] Blood puddle created at (389.949, 319.4599) (added to group)
[00:59:34] [INFO] [BloodDecal] Blood puddle created at (387.6252, 310.3906) (added to group)
[00:59:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(77.09572, 457.0233), shooter_id=346348849214, bullet_pos=(531.9279, 349.6553)
[00:59:34] [INFO] [Bullet] Using shooter_position, distance=467.333038330078
[00:59:34] [INFO] [Bullet] Distance to wall: 467.333038330078 (31.821565929577% of viewport)
[00:59:34] [INFO] [Bullet] Within ricochet range - trying ricochet first
[00:59:34] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:34] [INFO] [BloodDecal] Blood puddle created at (481.7791, 372.6324) (added to group)
[00:59:34] [INFO] [BloodDecal] Blood puddle created at (350.1242, 374.8693) (added to group)
[00:59:34] [ENEMY] [Enemy1] Ragdoll activated
[00:59:34] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[00:59:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(73.04829, 392.6998), shooter_id=346348849214, bullet_pos=(377.4499, 530.1611)
[00:59:34] [INFO] [Bullet] Using shooter_position, distance=333.999908447266
[00:59:34] [INFO] [Bullet] Distance to wall: 333.999908447266 (22.7426679378497% of viewport)
[00:59:34] [INFO] [Bullet] Within ricochet range - trying ricochet first
[00:59:34] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:34] [INFO] [BloodDecal] Blood puddle created at (378.4445, 316.1902) (added to group)
[00:59:34] [INFO] [BloodDecal] Blood puddle created at (420.4651, 330.6819) (added to group)
[00:59:34] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[00:59:34] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:34] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[00:59:34] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[00:59:34] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[00:59:34] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[00:59:34] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:59:34] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:59:34] [INFO] [CinemaEffects] Scene changed to: LabyrinthLevel
[00:59:34] [INFO] [CinemaEffects] Death effects reset
[00:59:34] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[00:59:34] [INFO] [FlashbangPlayer] Resetting flashbang player effects (scene change)
[00:59:34] [ENEMY] [Enemy1] Death animation component initialized
[00:59:34] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:34] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[00:59:34] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[00:59:34] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[00:59:34] [ENEMY] [Enemy2] Death animation component initialized
[00:59:34] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:34] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[00:59:34] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[00:59:34] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[00:59:34] [ENEMY] [Enemy3] Death animation component initialized
[00:59:34] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:34] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[00:59:34] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[00:59:34] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[00:59:34] [ENEMY] [Enemy4] Death animation component initialized
[00:59:34] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:34] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[00:59:34] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[00:59:34] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[00:59:34] [ENEMY] [Enemy5] Death animation component initialized
[00:59:34] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:34] [INFO] [BloodyFeet:Player] Footprint scene loaded
[00:59:34] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[00:59:34] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[00:59:34] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[00:59:34] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:59:34] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:59:34] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:59:34] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:59:34] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:59:34] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[00:59:34] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[00:59:34] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[00:59:34] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 3/4
[00:59:34] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:59:34] [INFO] [LabyrinthLevel] Found Environment/Enemies node with 5 children
[00:59:34] [INFO] [LabyrinthLevel] Child 'Enemy1': script=true, has_died_signal=true
[00:59:34] [INFO] [LabyrinthLevel] Child 'Enemy2': script=true, has_died_signal=true
[00:59:34] [INFO] [LabyrinthLevel] Child 'Enemy3': script=true, has_died_signal=true
[00:59:34] [INFO] [LabyrinthLevel] Child 'Enemy4': script=true, has_died_signal=true
[00:59:34] [INFO] [LabyrinthLevel] Child 'Enemy5': script=true, has_died_signal=true
[00:59:34] [INFO] [LabyrinthLevel] Enemy tracking complete: 5 enemies registered
[00:59:34] [INFO] [LabyrinthLevel] Setting up weapon: makarov_pm
[00:59:34] [INFO] [ScoreManager] Level started with 5 enemies
[00:59:34] [INFO] [LabyrinthLevel] ReplayManager found as C# autoload - verified OK
[00:59:34] [INFO] [LabyrinthLevel] Starting replay recording - Player: Player, Enemies count: 5
[00:59:34] [INFO] [ReplayManager] Replay data cleared
[00:59:34] [INFO] [LabyrinthLevel] Previous replay data cleared
[00:59:34] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[00:59:34] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[00:59:34] [INFO] [ReplayManager] Level: LabyrinthLevel
[00:59:34] [INFO] [ReplayManager] Player: Player (valid: True)
[00:59:34] [INFO] [ReplayManager] Enemies count: 5
[00:59:34] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[00:59:34] [INFO] [ReplayManager]   Enemy 0: Enemy1
[00:59:34] [INFO] [ReplayManager]   Enemy 1: Enemy2
[00:59:34] [INFO] [ReplayManager]   Enemy 2: Enemy3
[00:59:34] [INFO] [ReplayManager]   Enemy 3: Enemy4
[00:59:34] [INFO] [ReplayManager]   Enemy 4: Enemy5
[00:59:34] [INFO] [LabyrinthLevel] Replay recording started successfully
[00:59:34] [INFO] [BloodDecal] Blood puddle created at (456.1717, 342.1564) (added to group)
[00:59:34] [INFO] [BloodDecal] Blood puddle created at (461.4552, 370.8939) (added to group)
[00:59:34] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[00:59:34] [INFO] [CinemaEffects] Found player node: Player
[00:59:34] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[00:59:34] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 3)
[00:59:34] [ENEMY] [Enemy1] Registered as sound listener
[00:59:34] [ENEMY] [Enemy1] Spawned at (400, 300), hp: 1, behavior: GUARD
[00:59:34] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[00:59:34] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 4)
[00:59:34] [ENEMY] [Enemy2] Registered as sound listener
[00:59:34] [ENEMY] [Enemy2] Spawned at (900, 950), hp: 1, behavior: GUARD
[00:59:34] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[00:59:34] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 5)
[00:59:34] [ENEMY] [Enemy3] Registered as sound listener
[00:59:34] [ENEMY] [Enemy3] Spawned at (1200, 1000), hp: 1, behavior: PATROL
[00:59:34] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[00:59:34] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 6)
[00:59:34] [ENEMY] [Enemy4] Registered as sound listener
[00:59:34] [ENEMY] [Enemy4] Spawned at (1650, 650), hp: 1, behavior: GUARD
[00:59:34] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[00:59:34] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 7)
[00:59:34] [ENEMY] [Enemy5] Registered as sound listener
[00:59:34] [ENEMY] [Enemy5] Spawned at (1500, 300), hp: 4, behavior: GUARD
[00:59:34] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[00:59:34] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=5
[00:59:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(150, 1005.667), source=PLAYER (MakarovPM), range=1469, listeners=7
[00:59:34] [INFO] [SoundPropagation] Cleaned up 2 invalid listeners
[00:59:34] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=0, below_threshold=3
[00:59:34] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(150,999), corner_timer=0.00
[00:59:34] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(150,999), corner_timer=0.00
[00:59:34] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(150,999), corner_timer=0.00
[00:59:34] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=281.3°, current=0.0°, player=(150,999), corner_timer=0.00
[00:59:34] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:59:34] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[00:59:34] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[00:59:34] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:59:34] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:59:34] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:59:34] [INFO] [LastChance] Found player: Player
[00:59:34] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:59:34] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:59:34] [INFO] [LastChance] Connected to player Died signal (C#)
[00:59:34] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[00:59:34] [INFO] [BloodDecal] Blood puddle created at (411.5159, 335.043) (added to group)
[00:59:34] [INFO] [BloodDecal] Blood puddle created at (436.8254, 433.0966) (added to group)
[00:59:34] [INFO] [BloodDecal] Blood puddle created at (373.323, 382.0195) (added to group)
[00:59:34] [INFO] [BloodDecal] Blood puddle created at (463.3422, 399.8555) (added to group)
[00:59:34] [INFO] [BloodDecal] Blood puddle created at (403.1487, 432.0231) (added to group)
[00:59:34] [INFO] [BloodDecal] Blood puddle created at (372.2418, 376.6066) (added to group)
[00:59:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(150, 1005.667), shooter_id=530797563110, bullet_pos=(350.6496, 1008.288)
[00:59:34] [INFO] [Bullet] Using shooter_position, distance=200.666748046875
[00:59:34] [INFO] [Bullet] Distance to wall: 200.666748046875 (13.6637678681243% of viewport)
[00:59:34] [INFO] [Bullet] Within ricochet range - trying ricochet first
[00:59:34] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:35] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[00:59:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:35] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[00:59:35] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[00:59:35] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[00:59:35] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[00:59:35] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[00:59:35] [INFO] [LastChance] Resetting all effects (scene change detected)
[00:59:35] [INFO] [CinemaEffects] Scene changed to: LabyrinthLevel
[00:59:35] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[00:59:35] [INFO] [FlashbangPlayer] Resetting flashbang player effects (scene change)
[00:59:35] [ENEMY] [Enemy1] Death animation component initialized
[00:59:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:35] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[00:59:35] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[00:59:35] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[00:59:35] [ENEMY] [Enemy2] Death animation component initialized
[00:59:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:35] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[00:59:35] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[00:59:35] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[00:59:35] [ENEMY] [Enemy3] Death animation component initialized
[00:59:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:35] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[00:59:35] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[00:59:35] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[00:59:35] [ENEMY] [Enemy4] Death animation component initialized
[00:59:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:35] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[00:59:35] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[00:59:35] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[00:59:35] [ENEMY] [Enemy5] Death animation component initialized
[00:59:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[00:59:35] [INFO] [BloodyFeet:Player] Footprint scene loaded
[00:59:35] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[00:59:35] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[00:59:35] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[00:59:35] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[00:59:35] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[00:59:35] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[00:59:35] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[00:59:35] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[00:59:35] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[00:59:35] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[00:59:35] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[00:59:35] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 4/4
[00:59:35] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[00:59:35] [INFO] [LabyrinthLevel] Found Environment/Enemies node with 5 children
[00:59:35] [INFO] [LabyrinthLevel] Child 'Enemy1': script=true, has_died_signal=true
[00:59:35] [INFO] [LabyrinthLevel] Child 'Enemy2': script=true, has_died_signal=true
[00:59:35] [INFO] [LabyrinthLevel] Child 'Enemy3': script=true, has_died_signal=true
[00:59:35] [INFO] [LabyrinthLevel] Child 'Enemy4': script=true, has_died_signal=true
[00:59:35] [INFO] [LabyrinthLevel] Child 'Enemy5': script=true, has_died_signal=true
[00:59:35] [INFO] [LabyrinthLevel] Enemy tracking complete: 5 enemies registered
[00:59:35] [INFO] [LabyrinthLevel] Setting up weapon: makarov_pm
[00:59:35] [INFO] [ScoreManager] Level started with 5 enemies
[00:59:35] [INFO] [LabyrinthLevel] ReplayManager found as C# autoload - verified OK
[00:59:35] [INFO] [LabyrinthLevel] Starting replay recording - Player: Player, Enemies count: 5
[00:59:35] [INFO] [ReplayManager] Replay data cleared
[00:59:35] [INFO] [LabyrinthLevel] Previous replay data cleared
[00:59:35] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[00:59:35] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[00:59:35] [INFO] [ReplayManager] Level: LabyrinthLevel
[00:59:35] [INFO] [ReplayManager] Player: Player (valid: True)
[00:59:35] [INFO] [ReplayManager] Enemies count: 5
[00:59:35] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[00:59:35] [INFO] [ReplayManager]   Enemy 0: Enemy1
[00:59:35] [INFO] [ReplayManager]   Enemy 1: Enemy2
[00:59:35] [INFO] [ReplayManager]   Enemy 2: Enemy3
[00:59:35] [INFO] [ReplayManager]   Enemy 3: Enemy4
[00:59:35] [INFO] [ReplayManager]   Enemy 4: Enemy5
[00:59:35] [INFO] [LabyrinthLevel] Replay recording started successfully
[00:59:35] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[00:59:35] [INFO] [CinemaEffects] Found player node: Player
[00:59:35] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[00:59:35] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 6)
[00:59:35] [ENEMY] [Enemy1] Registered as sound listener
[00:59:35] [ENEMY] [Enemy1] Spawned at (400, 300), hp: 1, behavior: GUARD
[00:59:35] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[00:59:35] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 7)
[00:59:35] [ENEMY] [Enemy2] Registered as sound listener
[00:59:35] [ENEMY] [Enemy2] Spawned at (900, 950), hp: 1, behavior: GUARD
[00:59:35] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[00:59:35] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 8)
[00:59:35] [ENEMY] [Enemy3] Registered as sound listener
[00:59:35] [ENEMY] [Enemy3] Spawned at (1200, 1000), hp: 1, behavior: PATROL
[00:59:35] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[00:59:35] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 9)
[00:59:35] [ENEMY] [Enemy4] Registered as sound listener
[00:59:35] [ENEMY] [Enemy4] Spawned at (1650, 650), hp: 1, behavior: GUARD
[00:59:35] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[00:59:35] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 10)
[00:59:35] [ENEMY] [Enemy5] Registered as sound listener
[00:59:35] [ENEMY] [Enemy5] Spawned at (1500, 300), hp: 4, behavior: GUARD
[00:59:35] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[00:59:35] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=5
[00:59:35] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(150,1000), corner_timer=0.00
[00:59:35] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(150,1000), corner_timer=0.00
[00:59:35] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(150,1000), corner_timer=0.00
[00:59:35] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=67.5°, current=0.0°, player=(150,1000), corner_timer=0.00
[00:59:35] [INFO] [Player] Detecting weapon pose (frame 3)...
[00:59:35] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[00:59:35] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[00:59:35] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[00:59:35] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[00:59:35] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[00:59:35] [INFO] [LastChance] Found player: Player
[00:59:35] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[00:59:35] [INFO] [LastChance] Connected to player Damaged signal (C#)
[00:59:35] [INFO] [LastChance] Connected to player Died signal (C#)
[00:59:35] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[00:59:36] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=5
[00:59:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(321.034, 1081.296), source=PLAYER (MakarovPM), range=1469, listeners=10
[00:59:36] [INFO] [SoundPropagation] Cleaned up 5 invalid listeners
[00:59:36] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=5
[00:59:36] [ENEMY] [Enemy3] PATROL corner check: angle -90.0°
[00:59:36] [ENEMY] [Enemy3] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-90.0°, current=0.0°, player=(307,1102), corner_timer=0.30
[00:59:36] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(302.1779, 1112.871), source=PLAYER (MakarovPM), range=1469, listeners=5
[00:59:36] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=5
[00:59:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(281.601, 1116.048), source=PLAYER (MakarovPM), range=1469, listeners=5
[00:59:37] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=5
[00:59:37] [ENEMY] [Enemy3] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=0.0°, current=-54.4°, player=(278,1096), corner_timer=-0.02
[00:59:37] [ENEMY] [Enemy3] PATROL corner check: angle -90.0°
[00:59:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(279.7302, 1100.581), source=PLAYER (MakarovPM), range=1469, listeners=5
[00:59:37] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=5
[00:59:37] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=-90.0°, current=-51.6°, player=(279,1094), corner_timer=0.30
[00:59:37] [ENEMY] [Enemy2] Hit: dmg=1, hp=1/1->0/1
[00:59:37] [INFO] [ImpactEffects] spawn_blood_effect called at (900, 950), dir=(0.9698, -0.2439), lethal=true
[00:59:37] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[00:59:37] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[00:59:37] [INFO] [ImpactEffects] Blood effect spawned at (900, 950) (scale=0.75)
[00:59:37] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
[00:59:37] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[00:59:37] [ENEMY] [Enemy2] [AllyDeath] Notified 1 enemies
[00:59:37] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 4)
[00:59:37] [INFO] [DeathAnim] Started - Angle: -14.1 deg, Index: 11
[00:59:37] [ENEMY] [Enemy2] Death animation started with hit direction: (0.9698, -0.2439)
[00:59:37] [INFO] [FlashbangStatus] Status: STUNNED applied
[00:59:37] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=5
[00:59:37] [INFO] [FlashbangStatus] Status: STUNNED removed
[00:59:37] [INFO] [BloodDecal] Blood puddle created at (942.958, 967.5533) (added to group)
[00:59:37] [INFO] [BloodDecal] Blood puddle created at (978.1849, 967.2139) (added to group)
[00:59:37] [INFO] [BloodDecal] Blood puddle created at (947.4882, 953.3796) (added to group)
[00:59:37] [INFO] [BloodDecal] Blood puddle created at (997.2432, 931.6507) (added to group)
[00:59:37] [INFO] [BloodDecal] Blood puddle created at (956.4518, 959.3165) (added to group)
[00:59:37] [INFO] [BloodDecal] Blood puddle created at (1004.722, 970.8843) (added to group)
[00:59:37] [INFO] [BloodDecal] Blood puddle created at (961.0308, 963.7321) (added to group)
[00:59:37] [INFO] [BloodDecal] Blood puddle created at (963.2603, 933.4935) (added to group)
[00:59:37] [INFO] [BloodDecal] Blood puddle created at (1019.849, 946.9196) (added to group)
[00:59:37] [INFO] [BloodDecal] Blood puddle created at (981.2313, 988.4908) (added to group)
[00:59:37] [INFO] [BloodDecal] Blood puddle created at (992.67, 937.987) (added to group)
[00:59:37] [INFO] [BloodDecal] Blood puddle created at (991.3337, 955.3624) (added to group)
[00:59:37] [INFO] [BloodDecal] Blood puddle created at (1035.633, 1016.136) (added to group)
[00:59:37] [INFO] [BloodDecal] Blood puddle created at (1002.538, 933.1099) (added to group)
[00:59:37] [INFO] [BloodDecal] Blood puddle created at (989.4955, 1001.943) (added to group)
[00:59:37] [INFO] [BloodDecal] Blood puddle created at (1000.903, 912.5251) (added to group)
[00:59:37] [ENEMY] [Enemy2] Ragdoll activated
[00:59:37] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[00:59:37] [INFO] [BloodDecal] Blood puddle created at (1040.274, 929.3547) (added to group)
[00:59:37] [INFO] [BloodDecal] Blood puddle created at (1042.54, 1043.712) (added to group)
[00:59:37] [INFO] [BloodDecal] Blood puddle created at (996.1095, 995.3455) (added to group)
[00:59:38] [INFO] [BloodDecal] Blood puddle created at (995.9805, 997.4264) (added to group)
[00:59:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(302.1779, 1112.871), shooter_id=549873256095, bullet_pos=(1449.797, 821.6206)
[00:59:38] [INFO] [Bullet] Using shooter_position, distance=1183.99975585938
[00:59:38] [INFO] [Bullet] Distance to wall: 1183.99975585938 (80.6207205600367% of viewport)
[00:59:38] [INFO] [Bullet] Distance-based penetration chance: 52.6091593466238%
[00:59:38] [INFO] [Bullet] Penetration failed (distance roll)
[00:59:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(281.601, 1116.048), shooter_id=549873256095, bullet_pos=(1448.887, 917.8156)
[00:59:38] [INFO] [Bullet] Using shooter_position, distance=1183.99914550781
[00:59:38] [INFO] [Bullet] Distance to wall: 1183.99914550781 (80.6206790000765% of viewport)
[00:59:38] [INFO] [Bullet] Distance-based penetration chance: 52.6092078332441%
[00:59:38] [INFO] [Bullet] Penetration failed (distance roll)
[00:59:38] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=5
[00:59:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(279.7302, 1100.581), shooter_id=549873256095, bullet_pos=(1447.505, 905.2472)
[00:59:38] [INFO] [Bullet] Using shooter_position, distance=1183.9990234375
[00:59:38] [INFO] [Bullet] Distance to wall: 1183.9990234375 (80.6206706880844% of viewport)
[00:59:38] [INFO] [Bullet] Distance-based penetration chance: 52.6092175305682%
[00:59:38] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(322.8853, 1117.934), source=PLAYER (MakarovPM), range=1469, listeners=4
[00:59:38] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=4
[00:59:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(327.6221, 1117.924), source=PLAYER (MakarovPM), range=1469, listeners=4
[00:59:38] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=4
[00:59:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(327.6221, 1114.591), source=PLAYER (MakarovPM), range=1469, listeners=4
[00:59:38] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=4
[00:59:38] [ENEMY] [Enemy2] Death animation completed
[00:59:39] [ENEMY] [Enemy3] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=52.8°, player=(325,1069), corner_timer=-0.02
[00:59:39] [ENEMY] [Enemy3] PATROL corner check: angle -90.0°
[00:59:39] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=-90.0°, current=55.6°, player=(323,1067), corner_timer=0.30
[00:59:39] [INFO] [ReplayManager] Recording frame 240 (4,0s): player_valid=True, enemies=5
[00:59:39] [ENEMY] [Enemy3] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.2°, player=(308,1014), corner_timer=-0.02
[00:59:39] [ENEMY] [Enemy3] PATROL corner check: angle -90.0°
[00:59:39] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=-90.0°, current=4.1°, player=(308,1014), corner_timer=0.30
[00:59:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(322.8853, 1117.934), shooter_id=549873256095, bullet_pos=(1437.234, 831.1212)
[00:59:39] [INFO] [Bullet] Using shooter_position, distance=1150.66711425781
[00:59:39] [INFO] [Bullet] Distance to wall: 1150.66711425781 (78.3510397000631% of viewport)
[00:59:39] [INFO] [Bullet] Distance-based penetration chance: 55.2571203499264%
[00:59:39] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(327.6221, 1117.924), shooter_id=549873256095, bullet_pos=(1444.404, 840.7361)
[00:59:39] [INFO] [Bullet] Using shooter_position, distance=1150.66735839844
[00:59:39] [INFO] [Bullet] Distance to wall: 1150.66735839844 (78.3510563240472% of viewport)
[00:59:39] [INFO] [Bullet] Distance-based penetration chance: 55.2571009552782%
[00:59:39] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(306.479, 1117.994), source=PLAYER (MakarovPM), range=1469, listeners=4
[00:59:39] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=4
[00:59:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(327.6221, 1114.591), shooter_id=549873256095, bullet_pos=(1440.83, 898.4333)
[00:59:40] [INFO] [Bullet] Using shooter_position, distance=1134.00012207031
[00:59:40] [INFO] [Bullet] Distance to wall: 1134.00012207031 (77.2161535541201% of viewport)
[00:59:40] [INFO] [Bullet] Distance-based penetration chance: 56.5811541868599%
[00:59:40] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(306.479, 1117.6), source=PLAYER (MakarovPM), range=1469, listeners=4
[00:59:40] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=4
[00:59:40] [INFO] [ReplayManager] Recording frame 300 (5,0s): player_valid=True, enemies=5
[00:59:40] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[00:59:40] [ENEMY] [Enemy1] Player reloading: false -> true
[00:59:40] [ENEMY] [Enemy3] Player reloading: false -> true
[00:59:40] [ENEMY] [Enemy4] Player reloading: false -> true
[00:59:40] [ENEMY] [Enemy5] Player reloading: false -> true
[00:59:40] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(306.479, 954.3774), source=PLAYER (Player), range=900, listeners=4
[00:59:40] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=0, below_threshold=2
[00:59:40] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=661), can_see=false
[00:59:40] [ENEMY] [Enemy3] Player vulnerable (reloading) but cannot attack: close=false (dist=799), can_see=false
[00:59:40] [ENEMY] [Enemy4] Player vulnerable (reloading) but cannot attack: close=false (dist=1378), can_see=false
[00:59:40] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1361), can_see=false
[00:59:40] [INFO] [Player.Reload.Anim] LeftArm: pos=(2.2685962, 3.361111), target=(-4, 2), base=(16, 6)
[00:59:40] [INFO] [Player.Reload.Anim] RightArm: pos=(4.5369587, 6), target=(4, 6), base=(4, 6)
[00:59:40] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[00:59:40] [ENEMY] [Enemy1] Player reloading: true -> false
[00:59:40] [ENEMY] [Enemy3] Player reloading: true -> false
[00:59:40] [ENEMY] [Enemy4] Player reloading: true -> false
[00:59:40] [ENEMY] [Enemy5] Player reloading: true -> false
[00:59:40] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[00:59:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(306.479, 1117.994), shooter_id=549873256095, bullet_pos=(1451.08, 815.1061)
[00:59:41] [INFO] [Bullet] Using shooter_position, distance=1183.99877929688
[00:59:41] [INFO] [Bullet] Distance to wall: 1183.99877929688 (80.6206540641004% of viewport)
[00:59:41] [INFO] [Bullet] Distance-based penetration chance: 52.6092369252163%
[00:59:41] [INFO] [Bullet] Penetration failed (distance roll)
[00:59:41] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[00:59:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(306.479, 1117.6), shooter_id=549873256095, bullet_pos=(1441.004, 842.792)
[00:59:41] [INFO] [Bullet] Using shooter_position, distance=1167.3330078125
[00:59:41] [INFO] [Bullet] Distance to wall: 1167.3330078125 (79.4858510380778% of viewport)
[00:59:41] [INFO] [Bullet] Distance-based penetration chance: 53.9331737889093%
[00:59:41] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:41] [ENEMY] [Enemy3] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=0.0°, current=87.1°, player=(306,948), corner_timer=-0.02
[00:59:41] [INFO] [ReplayManager] Recording frame 360 (6,0s): player_valid=True, enemies=5
[00:59:41] [ENEMY] [Enemy3] PATROL corner check: angle -90.0°
[00:59:41] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=-90.0°, current=52.8°, player=(306,963), corner_timer=0.30
[00:59:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(306.479, 1087.877), source=PLAYER (MakarovPM), range=1469, listeners=4
[00:59:41] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=4
[00:59:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(306.479, 1109.877), source=PLAYER (MakarovPM), range=1469, listeners=4
[00:59:42] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=4
[00:59:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(306.479, 1108.544), source=PLAYER (MakarovPM), range=1469, listeners=4
[00:59:42] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=4
[00:59:42] [INFO] [ScoreManager] Combo ended at 1. Max combo: 1
[00:59:42] [INFO] [ReplayManager] Recording frame 420 (7,0s): player_valid=True, enemies=5
[00:59:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(306.479, 1087.877), shooter_id=549873256095, bullet_pos=(1446.968, 935.1586)
[00:59:43] [INFO] [Bullet] Using shooter_position, distance=1150.66857910156
[00:59:43] [INFO] [Bullet] Distance to wall: 1150.66857910156 (78.3511394439677% of viewport)
[00:59:43] [INFO] [Bullet] Distance-based penetration chance: 55.2570039820377%
[00:59:43] [INFO] [Bullet] Penetration failed (distance roll)
[00:59:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(306.479, 1109.877), shooter_id=549873256095, bullet_pos=(1435.714, 1006.031)
[00:59:43] [INFO] [Bullet] Using shooter_position, distance=1134.00036621094
[00:59:43] [INFO] [Bullet] Distance to wall: 1134.00036621094 (77.2161701781042% of viewport)
[00:59:43] [INFO] [Bullet] Distance-based penetration chance: 56.5811347922118%
[00:59:43] [INFO] [Bullet] Penetration failed (distance roll)
[00:59:43] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(306.479, 1108.544), shooter_id=549873256095, bullet_pos=(1439.529, 1062.124)
[00:59:43] [INFO] [Bullet] Using shooter_position, distance=1134.00085449219
[00:59:43] [INFO] [Bullet] Distance to wall: 1134.00085449219 (77.2162034260724% of viewport)
[00:59:43] [INFO] [Bullet] Distance-based penetration chance: 56.5810960029156%
[00:59:43] [INFO] [Bullet] Penetration failed (distance roll)
[00:59:43] [ENEMY] [Enemy3] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=0.0°, current=-90.0°, player=(321,1003), corner_timer=-0.02
[00:59:43] [ENEMY] [Enemy3] PATROL corner check: angle -90.0°
[00:59:43] [INFO] [ReplayManager] Recording frame 480 (8,0s): player_valid=True, enemies=5
[00:59:43] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=-90.0°, current=-87.1°, player=(321,1007), corner_timer=0.30
[00:59:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(362.4213, 1117.925), source=PLAYER (MakarovPM), range=1469, listeners=4
[00:59:43] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=4
[00:59:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(411.4557, 1106.703), source=PLAYER (MakarovPM), range=1469, listeners=4
[00:59:44] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=4
[00:59:44] [INFO] [ReplayManager] Recording frame 540 (9,0s): player_valid=True, enemies=5
[00:59:44] [ENEMY] [Enemy3] Hit: dmg=1, hp=1/1->0/1
[00:59:44] [INFO] [ImpactEffects] spawn_blood_effect called at (1295.332, 1000), dir=(0.989862, -0.142029), lethal=true
[00:59:44] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[00:59:44] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[00:59:44] [INFO] [ImpactEffects] Blood effect spawned at (1295.332, 1000) (scale=0.75)
[00:59:44] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[00:59:44] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[00:59:44] [ENEMY] [Enemy3] [AllyDeath] Notified 1 enemies
[00:59:44] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 3)
[00:59:44] [INFO] [DeathAnim] Started - Angle: -8.2 deg, Index: 11
[00:59:44] [ENEMY] [Enemy3] Death animation started with hit direction: (0.989862, -0.142029)
[00:59:44] [INFO] [FlashbangStatus] Status: STUNNED applied
[00:59:44] [INFO] [FlashbangStatus] Status: STUNNED removed
[00:59:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(411.4557, 1106.703), shooter_id=549873256095, bullet_pos=(1437.052, 975.1385)
[00:59:45] [INFO] [Bullet] Using shooter_position, distance=1034.00061035156
[00:59:45] [INFO] [Bullet] Distance to wall: 1034.00061035156 (70.4070029183027% of viewport)
[00:59:45] [INFO] [Bullet] Distance-based penetration chance: 64.5251632619802%
[00:59:45] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:45] [INFO] [BloodDecal] Blood puddle created at (1333.639, 1028.594) (added to group)
[00:59:45] [INFO] [BloodDecal] Blood puddle created at (1389.162, 1018.01) (added to group)
[00:59:45] [INFO] [BloodDecal] Blood puddle created at (1398.863, 1051.904) (added to group)
[00:59:45] [INFO] [BloodDecal] Blood puddle created at (1376.229, 998.5912) (added to group)
[00:59:45] [INFO] [BloodDecal] Blood puddle created at (1384.024, 1020.55) (added to group)
[00:59:45] [INFO] [BloodDecal] Blood puddle created at (1368.951, 1056.167) (added to group)
[00:59:45] [INFO] [BloodDecal] Blood puddle created at (1404.667, 991.3889) (added to group)
[00:59:45] [INFO] [BloodDecal] Blood puddle created at (1436.008, 983.3357) (added to group)
[00:59:45] [INFO] [BloodDecal] Blood puddle created at (1383.72, 1023.81) (added to group)
[00:59:45] [ENEMY] [Enemy3] Ragdoll activated
[00:59:45] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[00:59:45] [INFO] [BloodDecal] Blood puddle created at (1360.357, 1003.645) (added to group)
[00:59:45] [INFO] [BloodDecal] Blood puddle created at (1367.791, 1060.991) (added to group)
[00:59:45] [INFO] [BloodDecal] Blood puddle created at (1395.674, 988.8083) (added to group)
[00:59:45] [INFO] [BloodDecal] Blood puddle created at (1449.702, 1114.697) (added to group)
[00:59:45] [INFO] [BloodDecal] Blood puddle created at (1381.872, 1047.521) (added to group)
[00:59:45] [INFO] [ReplayManager] Recording frame 600 (10,0s): player_valid=True, enemies=5
[00:59:45] [INFO] [BloodDecal] Blood puddle created at (1421.95, 1097.02) (added to group)
[00:59:45] [INFO] [BloodDecal] Blood puddle created at (1421.005, 1051.579) (added to group)
[00:59:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(442.5214, 1068.262), source=PLAYER (MakarovPM), range=1469, listeners=3
[00:59:45] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=3
[00:59:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(452.9316, 1078.672), source=PLAYER (MakarovPM), range=1469, listeners=3
[00:59:46] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=3
[00:59:46] [ENEMY] [Enemy3] Death animation completed
[00:59:46] [INFO] [ReplayManager] Recording frame 660 (11,0s): player_valid=True, enemies=5
[00:59:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(442.5214, 1068.262), shooter_id=549873256095, bullet_pos=(1435.333, 846.2466)
[00:59:46] [INFO] [Bullet] Using shooter_position, distance=1017.33221435547
[00:59:46] [INFO] [Bullet] Distance to wall: 1017.33221435547 (69.2720211844511% of viewport)
[00:59:46] [INFO] [Bullet] Distance-based penetration chance: 65.8493086181403%
[00:59:46] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:46] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[00:59:46] [ENEMY] [Enemy1] Player reloading: false -> true
[00:59:46] [ENEMY] [Enemy4] Player reloading: false -> true
[00:59:46] [ENEMY] [Enemy5] Player reloading: false -> true
[00:59:46] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(452.9316, 1072.672), source=PLAYER (Player), range=900, listeners=3
[00:59:46] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=0, below_threshold=1
[00:59:46] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=774), can_see=false
[00:59:46] [ENEMY] [Enemy4] Player vulnerable (reloading) but cannot attack: close=false (dist=1269), can_see=false
[00:59:46] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1301), can_see=false
[00:59:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(452.9316, 1078.672), shooter_id=549873256095, bullet_pos=(1450.236, 877.7958)
[00:59:47] [INFO] [Bullet] Using shooter_position, distance=1017.33312988281
[00:59:47] [INFO] [Bullet] Distance to wall: 1017.33312988281 (69.2720835243915% of viewport)
[00:59:47] [INFO] [Bullet] Distance-based penetration chance: 65.8492358882099%
[00:59:47] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:47] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[00:59:47] [ENEMY] [Enemy1] Player reloading: true -> false
[00:59:47] [ENEMY] [Enemy4] Player reloading: true -> false
[00:59:47] [ENEMY] [Enemy5] Player reloading: true -> false
[00:59:47] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[00:59:47] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[00:59:47] [INFO] [ReplayManager] Recording frame 720 (12,0s): player_valid=True, enemies=5
[00:59:48] [INFO] [ReplayManager] Recording frame 780 (13,0s): player_valid=True, enemies=5
[00:59:49] [INFO] [ReplayManager] Recording frame 840 (14,0s): player_valid=True, enemies=5
[00:59:49] [INFO] [ScoreManager] Combo ended at 1. Max combo: 1
[00:59:49] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(261.589, 574.0005), source=PLAYER (MakarovPM), range=1469, listeners=3
[00:59:49] [ENEMY] [Enemy1] Heard gunshot at (261.589, 574.0005), source_type=0, intensity=0.03, distance=307
[00:59:49] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=2
[00:59:49] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=117.3°, current=-56.3°, player=(261,568), corner_timer=0.00
[00:59:50] [ENEMY] [Enemy1] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=120.1°, current=71.5°, player=(245,568), corner_timer=0.00
[00:59:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(207.3543, 575.8483), source=PLAYER (MakarovPM), range=1469, listeners=3
[00:59:50] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=2
[00:59:50] [ENEMY] [Enemy1] Hit: dmg=1, hp=1/1->0/1
[00:59:50] [INFO] [ImpactEffects] spawn_blood_effect called at (365.7973, 353.9843), dir=(0.509717, -0.860342), lethal=true
[00:59:50] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[00:59:50] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[00:59:50] [INFO] [ImpactEffects] Blood effect spawned at (365.7973, 353.9843) (scale=0.75)
[00:59:50] [ENEMY] [Enemy1] Enemy died (ricochet: false, penetration: false)
[00:59:50] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[00:59:50] [INFO] [SoundPropagation] Unregistered listener: Enemy1 (remaining: 2)
[00:59:50] [INFO] [DeathAnim] Started - Angle: -59.4 deg, Index: 8
[00:59:50] [ENEMY] [Enemy1] Death animation started with hit direction: (0.509717, -0.860342)
[00:59:50] [INFO] [FlashbangStatus] Status: STUNNED applied
[00:59:50] [INFO] [FlashbangStatus] Status: STUNNED removed
[00:59:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(167.0387, 598.0214), source=PLAYER (MakarovPM), range=1469, listeners=2
[00:59:50] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=0, below_threshold=1
[00:59:50] [INFO] [ReplayManager] Recording frame 900 (15,0s): player_valid=True, enemies=5
[00:59:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(132.037, 633.0233), source=PLAYER (MakarovPM), range=1469, listeners=2
[00:59:50] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=0, below_threshold=1
[00:59:50] [INFO] [BloodDecal] Blood puddle created at (433.0283, 302.6618) (added to group)
[00:59:50] [INFO] [BloodDecal] Blood puddle created at (451.7204, 312.858) (added to group)
[00:59:50] [INFO] [BloodDecal] Blood puddle created at (373.9824, 319.2972) (added to group)
[00:59:50] [INFO] [BloodDecal] Blood puddle created at (404.1734, 335.2126) (added to group)
[00:59:50] [INFO] [BloodDecal] Blood puddle created at (382.4338, 320.8629) (added to group)
[00:59:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(98.88292, 668.7906), source=PLAYER (MakarovPM), range=1469, listeners=2
[00:59:50] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=0, below_threshold=1
[00:59:50] [INFO] [BloodDecal] Blood puddle created at (410.5355, 333.1457) (added to group)
[00:59:50] [INFO] [BloodDecal] Blood puddle created at (398.1567, 311.8358) (added to group)
[00:59:50] [INFO] [BloodDecal] Blood puddle created at (403.4601, 341.5964) (added to group)
[00:59:50] [INFO] [BloodDecal] Blood puddle created at (428.1776, 333.4702) (added to group)
[00:59:50] [ENEMY] [Enemy1] Ragdoll activated
[00:59:50] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[00:59:50] [INFO] [BloodDecal] Blood puddle created at (501.5483, 310.6223) (added to group)
[00:59:50] [INFO] [BloodDecal] Blood puddle created at (467.8929, 293.6667) (added to group)
[00:59:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(207.3543, 575.8483), shooter_id=549873256095, bullet_pos=(556.7842, 46.83575)
[00:59:50] [INFO] [Bullet] Using shooter_position, distance=633.999633789063
[00:59:50] [INFO] [Bullet] Distance to wall: 633.999633789063 (43.1702008872242% of viewport)
[00:59:50] [INFO] [Bullet] Distance-based penetration chance: 96.3014322982384%
[00:59:50] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:50] [INFO] [BloodDecal] Blood puddle created at (392.621, 260.2427) (added to group)
[00:59:50] [INFO] [BloodDecal] Blood puddle created at (432.1949, 287.1078) (added to group)
[00:59:50] [INFO] [BloodDecal] Blood puddle created at (444.235, 345.9251) (added to group)
[00:59:50] [INFO] [BloodDecal] Blood puddle created at (489.9655, 297.7023) (added to group)
[00:59:50] [INFO] [BloodDecal] Blood puddle created at (437.7732, 326.6346) (added to group)
[00:59:50] [INFO] [BloodDecal] Blood puddle created at (460.0609, 360.921) (added to group)
[00:59:50] [INFO] [BloodDecal] Blood puddle created at (500.5193, 363.9577) (added to group)
[00:59:50] [INFO] [BloodDecal] Blood puddle created at (424.3806, 316.5059) (added to group)
[00:59:50] [INFO] [BloodDecal] Blood puddle created at (528.8986, 293.2662) (added to group)
[00:59:50] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(167.0387, 598.0214), shooter_id=549873256095, bullet_pos=(570.689, 45.82363)
[00:59:50] [INFO] [Bullet] Using shooter_position, distance=684
[00:59:50] [INFO] [Bullet] Distance to wall: 684 (46.5748177650931% of viewport)
[00:59:50] [INFO] [Bullet] Distance-based penetration chance: 92.3293792740581%
[00:59:50] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:51] [INFO] [ReplayManager] Recording frame 960 (16,0s): player_valid=True, enemies=5
[00:59:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(98.88292, 668.7906), shooter_id=549873256095, bullet_pos=(722.9652, 42.71003)
[00:59:51] [INFO] [Bullet] Using shooter_position, distance=883.999755859375
[00:59:51] [INFO] [Bullet] Distance to wall: 883.999755859375 (60.1931689086801% of viewport)
[00:59:51] [INFO] [Bullet] Distance-based penetration chance: 76.4413029398732%
[00:59:51] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:51] [ENEMY] [Enemy1] Death animation completed
[00:59:52] [INFO] [ReplayManager] Recording frame 1020 (17,0s): player_valid=True, enemies=5
[00:59:53] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[00:59:53] [INFO] [ReplayManager] Recording frame 1080 (18,0s): player_valid=True, enemies=5
[00:59:54] [INFO] [ReplayManager] Recording frame 1140 (19,0s): player_valid=True, enemies=5
[00:59:54] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[00:59:54] [ENEMY] [Enemy4] Player reloading: false -> true
[00:59:54] [ENEMY] [Enemy5] Player reloading: false -> true
[00:59:54] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(721.9338, 432.3156), source=PLAYER (Player), range=900, listeners=2
[00:59:54] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=0, below_threshold=1
[00:59:54] [ENEMY] [Enemy4] Player vulnerable (reloading) but cannot attack: close=false (dist=953), can_see=false
[00:59:54] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=789), can_see=false
[00:59:55] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[00:59:55] [ENEMY] [Enemy4] Player reloading: true -> false
[00:59:55] [ENEMY] [Enemy5] Player reloading: true -> false
[00:59:55] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[00:59:55] [INFO] [ScoreManager] Combo ended at 1. Max combo: 1
[00:59:55] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[00:59:55] [INFO] [ReplayManager] Recording frame 1200 (20,0s): player_valid=True, enemies=5
[00:59:55] [INFO] [BloodyFeet:Player] Blood ran out - no more footprints
[00:59:56] [INFO] [ReplayManager] Recording frame 1260 (21,0s): player_valid=True, enemies=5
[00:59:57] [INFO] [ReplayManager] Recording frame 1320 (22,0s): player_valid=True, enemies=5
[00:59:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1021.933, 482.1155), source=PLAYER (MakarovPM), range=1469, listeners=2
[00:59:57] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=2
[00:59:57] [ENEMY] [Enemy5] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=159.8°, current=-168.8°, player=(1021,476), corner_timer=0.00
[00:59:57] [ENEMY] [Enemy5] State: IDLE -> COMBAT
[00:59:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1021.933, 482.1155), shooter_id=549873256095, bullet_pos=(1054.768, 469.0643)
[00:59:57] [INFO] [Bullet] Using shooter_position, distance=35.3333473205566
[00:59:57] [INFO] [Bullet] Distance to wall: 35.3333473205566 (2.40591259135331% of viewport)
[00:59:57] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[00:59:57] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:57] [ENEMY] [Enemy5] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=158.8°, current=-15.2°, player=(1021,485), corner_timer=0.00
[00:59:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1021.933, 516.6155), source=PLAYER (MakarovPM), range=1469, listeners=2
[00:59:57] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=1
[00:59:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1021.933, 527.7822), source=PLAYER (MakarovPM), range=1469, listeners=2
[00:59:58] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=1
[00:59:58] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1021.933, 512.2821), source=PLAYER (MakarovPM), range=1469, listeners=2
[00:59:58] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=1
[00:59:58] [ENEMY] [Enemy5] Hit: dmg=1, hp=4/4->3/4
[00:59:58] [INFO] [ImpactEffects] spawn_blood_effect called at (1363.437, 360.3348), dir=(0.929466, -0.368907), lethal=false
[00:59:58] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[00:59:58] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[00:59:58] [INFO] [ImpactEffects] Blood effect spawned at (1363.437, 360.3348) (scale=0.5)
[00:59:58] [INFO] [FlashbangStatus] Status: STUNNED applied
[00:59:58] [ENEMY] [Enemy5] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=157.9°, current=158.4°, player=(1021,499), corner_timer=0.00
[00:59:58] [INFO] [FlashbangStatus] Status: STUNNED removed
[00:59:58] [ENEMY] [Enemy5] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=162.2°, current=161.4°, player=(1021,470), corner_timer=0.00
[00:59:58] [ENEMY] [Enemy5] State: COMBAT -> RETREATING
[00:59:58] [ENEMY] [Enemy5] ROT_CHANGE: P2:combat_state -> P4:velocity, state=RETREATING, target=163.0°, current=163.9°, player=(1021,453), corner_timer=0.00
[00:59:58] [ENEMY] [Enemy5] State: RETREATING -> IN_COVER
[00:59:58] [ENEMY] [Enemy5] State: IN_COVER -> SUPPRESSED
[00:59:58] [INFO] [ReplayManager] Recording frame 1380 (23,0s): player_valid=True, enemies=5
[00:59:58] [INFO] [BloodDecal] Blood puddle created at (1437.971, 319.8818) (added to group)
[00:59:58] [INFO] [BloodDecal] Blood puddle created at (1403.054, 356.4208) (added to group)
[00:59:58] [INFO] [BloodDecal] Blood puddle created at (1440.278, 317.922) (added to group)
[00:59:58] [INFO] [BloodDecal] Blood puddle created at (1422.166, 386.7237) (added to group)
[00:59:58] [INFO] [BloodDecal] Blood puddle created at (1428.908, 345.6136) (added to group)
[00:59:58] [INFO] [BloodDecal] Blood puddle created at (1451.68, 334.1999) (added to group)
[00:59:58] [INFO] [BloodDecal] Blood puddle created at (1468.173, 404.2844) (added to group)
[00:59:58] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1021.933, 512.2821), shooter_id=549873256095, bullet_pos=(1651.332, 290.4931)
[00:59:58] [INFO] [Bullet] Using shooter_position, distance=667.332458496094
[00:59:58] [INFO] [Bullet] Distance to wall: 667.332458496094 (45.4398942151859% of viewport)
[00:59:58] [INFO] [Bullet] Distance-based penetration chance: 93.6534567489499%
[00:59:58] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:58] [INFO] [BloodDecal] Blood puddle created at (1445.929, 401.8622) (added to group)
[00:59:58] [INFO] [BloodDecal] Blood puddle created at (1501.068, 412.8643) (added to group)
[00:59:58] [INFO] [BloodDecal] Blood puddle created at (1484.214, 394.7223) (added to group)
[00:59:59] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1021.933, 527.7822), shooter_id=549873256095, bullet_pos=(1979.895, 138.6046)
[00:59:59] [INFO] [Bullet] Using shooter_position, distance=1033.99743652344
[00:59:59] [INFO] [Bullet] Distance to wall: 1033.99743652344 (70.4067868065095% of viewport)
[00:59:59] [INFO] [Bullet] Distance-based penetration chance: 64.5254153924055%
[00:59:59] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:59] [INFO] [ReplayManager] Recording frame 1440 (24,0s): player_valid=True, enemies=5
[00:59:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1020.166, 479.7897), source=PLAYER (MakarovPM), range=1469, listeners=2
[00:59:59] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=1
[00:59:59] [ENEMY] [Enemy5] ROT_CHANGE: P4:velocity -> P1:visible, state=SUPPRESSED, target=161.6°, current=163.0°, player=(1020,473), corner_timer=0.00
[00:59:59] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1020.166, 479.7897), shooter_id=549873256095, bullet_pos=(1036.628, 470.9886)
[00:59:59] [INFO] [Bullet] Using shooter_position, distance=18.6667003631592
[00:59:59] [INFO] [Bullet] Distance to wall: 18.6667003631592 (1.27104995276277% of viewport)
[00:59:59] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[00:59:59] [INFO] [Bullet] Caliber cannot penetrate walls
[00:59:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1343.055, 366.6333), source=ENEMY (Enemy5), range=1469, listeners=2
[00:59:59] [ENEMY] [Enemy4] Heard gunshot at (1343.055, 366.6333), source_type=1, intensity=0.01, distance=418
[00:59:59] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=0
[00:59:59] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-167.0°, current=-157.5°, player=(1007,501), corner_timer=0.00
[00:59:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1002.839, 513.5725), source=PLAYER (MakarovPM), range=1469, listeners=2
[00:59:59] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=1
[00:59:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1343.055, 366.6333), source=ENEMY (Enemy5), range=1469, listeners=2
[00:59:59] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=0
[00:59:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1343.055, 366.6333), source=ENEMY (Enemy5), range=1469, listeners=2
[00:59:59] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=0
[01:00:00] [INFO] [LastChance] Threat detected: @Area2D@2004
[01:00:00] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[01:00:00] [INFO] [LastChance] Cannot trigger effect - conditions not met
[01:00:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(976.7682, 522.6311), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:00] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=1
[01:00:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1343.055, 366.6333), source=ENEMY (Enemy5), range=1469, listeners=2
[01:00:00] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=0
[01:00:00] [ENEMY] [Enemy5] State: SUPPRESSED -> SEEKING_COVER
[01:00:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1283.3444, 398.71646), shooter_id=549051172931, bullet_pos=(818.8971, 677.44775)
[01:00:00] [INFO] [Bullet] Using shooter_position, distance=541,6663
[01:00:00] [INFO] [Bullet] Distance to wall: 541,6663 (36,883057% of viewport)
[01:00:00] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:00] [INFO] [LastChance] Threat detected: @Area2D@2006
[01:00:00] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[01:00:00] [INFO] [LastChance] Cannot trigger effect - conditions not met
[01:00:00] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1343.055, 366.6333), source=ENEMY (Enemy5), range=1469, listeners=2
[01:00:00] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=0
[01:00:00] [ENEMY] [Enemy5] ROT_CHANGE: P1:visible -> P4:velocity, state=SEEKING_COVER, target=-89.7°, current=-113.1°, player=(968,514), corner_timer=0.00
[01:00:00] [INFO] [Player] Spawning blood effect at (963.55774, 510.85757), dir=(1, 0), lethal=False (C#)
[01:00:00] [INFO] [ImpactEffects] spawn_blood_effect called at (963.5577, 510.8576), dir=(1, 0), lethal=false
[01:00:00] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[01:00:00] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[01:00:00] [INFO] [ImpactEffects] Blood effect spawned at (963.5577, 510.8576) (scale=1)
[01:00:00] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[01:00:00] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[01:00:00] [INFO] [LastChance] Threat detected: @Area2D@2011
[01:00:00] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[01:00:00] [INFO] [LastChance] Cannot trigger effect - conditions not met
[01:00:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1283.3789, 399.49942), shooter_id=549051172931, bullet_pos=(1041.9192, 464.28397)
[01:00:00] [INFO] [Bullet] Using shooter_position, distance=249,99966
[01:00:00] [INFO] [Bullet] Distance to wall: 249,99966 (17,022938% of viewport)
[01:00:00] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:00] [INFO] [Bullet] Starting wall penetration at (1041.9192, 464.28397)
[01:00:00] [ENEMY] [Enemy5] State: SEEKING_COVER -> IN_COVER
[01:00:00] [INFO] [Bullet] Raycast backward hit penetrating body at distance 42,608883
[01:00:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1283.817, 399.8369), shooter_id=549051172931, bullet_pos=(720.2061, 669.9631)
[01:00:00] [INFO] [Bullet] Using shooter_position, distance=625,0003
[01:00:00] [INFO] [Bullet] Distance to wall: 625,0003 (42,557423% of viewport)
[01:00:00] [INFO] [LastChance] Threat detected: @Area2D@2017
[01:00:00] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[01:00:00] [INFO] [LastChance] Cannot trigger effect - conditions not met
[01:00:00] [INFO] [Bullet] Body exited signal received for penetrating body
[01:00:00] [INFO] [Bullet] Exiting penetration at (996.8466, 476.37708) after traveling 41,666668 pixels through wall
[01:00:00] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[01:00:00] [ENEMY] [Enemy5] State: IN_COVER -> SUPPRESSED
[01:00:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1283.3444, 398.71646), shooter_id=549051172931, bullet_pos=(562.15784, 546.218)
[01:00:00] [INFO] [Bullet] Using shooter_position, distance=736,11597
[01:00:00] [INFO] [Bullet] Distance to wall: 736,11597 (50,12349% of viewport)
[01:00:00] [ENEMY] [Enemy5] Hit: dmg=1, hp=3/4->2/4
[01:00:00] [INFO] [ImpactEffects] spawn_blood_effect called at (1343.224, 334.6338), dir=(0.89433, -0.447408), lethal=false
[01:00:00] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[01:00:00] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[01:00:00] [INFO] [ImpactEffects] Blood effect spawned at (1343.224, 334.6338) (scale=0.5)
[01:00:00] [INFO] [FlashbangStatus] Status: STUNNED applied
[01:00:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1283.817, 399.8369), shooter_id=549051172931, bullet_pos=(498.22287, 548.7601)
[01:00:00] [INFO] [Bullet] Using shooter_position, distance=799,585
[01:00:00] [INFO] [Bullet] Distance to wall: 799,585 (54,44522% of viewport)
[01:00:00] [INFO] [FlashbangStatus] Status: STUNNED removed
[01:00:00] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[01:00:00] [INFO] [BloodDecal] Blood puddle created at (1034.265, 517.1611) (added to group)
[01:00:00] [INFO] [ReplayManager] Recording frame 1500 (25,0s): player_valid=True, enemies=5
[01:00:00] [INFO] [BloodDecal] Blood puddle created at (1040.303, 542.1143) (added to group)
[01:00:00] [INFO] [BloodDecal] Blood puddle created at (1059.054, 546.2737) (added to group)
[01:00:00] [INFO] [BloodDecal] Blood puddle created at (1049.16, 516.1494) (added to group)
[01:00:00] [INFO] [BloodDecal] Blood puddle created at (1415.863, 340.8866) (added to group)
[01:00:00] [INFO] [BloodDecal] Blood puddle created at (1044.032, 512.7391) (added to group)
[01:00:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1283.3444, 398.71646), shooter_id=549051172931, bullet_pos=(40.138157, 709.21387)
[01:00:00] [INFO] [Bullet] Using shooter_position, distance=1281,3939
[01:00:00] [INFO] [Bullet] Distance to wall: 1281,3939 (87,25247% of viewport)
[01:00:00] [INFO] [Bullet] Distance-based penetration chance: 44,872116%
[01:00:00] [INFO] [Bullet] Penetration failed (distance roll)
[01:00:00] [INFO] [BloodDecal] Blood puddle created at (1426.788, 336.2668) (added to group)
[01:00:00] [INFO] [BloodDecal] Blood puddle created at (1085.743, 532.4223) (added to group)
[01:00:00] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1283.817, 399.8369), shooter_id=549051172931, bullet_pos=(42.985233, 720.81586)
[01:00:00] [INFO] [Bullet] Using shooter_position, distance=1281,675
[01:00:00] [INFO] [Bullet] Distance to wall: 1281,675 (87,271614% of viewport)
[01:00:00] [INFO] [Bullet] Distance-based penetration chance: 44,84979%
[01:00:00] [INFO] [Bullet] Penetration failed (distance roll)
[01:00:00] [INFO] [BloodDecal] Blood puddle created at (1423.491, 341.3754) (added to group)
[01:00:00] [INFO] [BloodDecal] Blood puddle created at (1093.784, 613.486) (added to group)
[01:00:00] [INFO] [BloodDecal] Blood puddle created at (1439.686, 331.4461) (added to group)
[01:00:00] [INFO] [BloodDecal] Blood puddle created at (1112.014, 625.1842) (added to group)
[01:00:00] [INFO] [BloodDecal] Blood puddle created at (1086.491, 526.4871) (added to group)
[01:00:00] [INFO] [BloodDecal] Blood puddle created at (1155.837, 607.5127) (added to group)
[01:00:00] [INFO] [BloodDecal] Blood puddle created at (1438.607, 287.03) (added to group)
[01:00:00] [INFO] [BloodDecal] Blood puddle created at (1493.185, 340.1654) (added to group)
[01:00:00] [INFO] [BloodDecal] Blood puddle created at (1487.205, 366.4473) (added to group)
[01:00:00] [INFO] [BloodDecal] Blood puddle created at (1494.133, 298.9449) (added to group)
[01:00:00] [INFO] [BloodDecal] Blood puddle created at (1427.138, 317.9576) (added to group)
[01:00:00] [INFO] [BloodDecal] Blood puddle created at (1463.736, 404.2096) (added to group)
[01:00:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(976.7682, 522.6311), shooter_id=549873256095, bullet_pos=(1977.339, 151.0712)
[01:00:01] [INFO] [Bullet] Using shooter_position, distance=1067.33203125
[01:00:01] [INFO] [Bullet] Distance to wall: 1067.33203125 (72.6766006583559% of viewport)
[01:00:01] [INFO] [Bullet] Distance-based penetration chance: 61.8772992319182%
[01:00:01] [INFO] [Bullet] Penetration failed (distance roll)
[01:00:01] [INFO] [ReplayManager] Recording frame 1560 (26,0s): player_valid=True, enemies=5
[01:00:01] [ENEMY] [Enemy4] PURSUING corner check: angle 105.0°
[01:00:02] [ENEMY] [Enemy4] PURSUING corner check: angle 96.8°
[01:00:02] [INFO] [ReplayManager] Recording frame 1620 (27,0s): player_valid=True, enemies=5
[01:00:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(910.3644, 499.1036), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:02] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=1
[01:00:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(868.4742, 517.4756), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:02] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=2
[01:00:02] [ENEMY] [Enemy4] PURSUING corner check: angle 64.1°
[01:00:02] [ENEMY] [Enemy4] PURSUING corner check: angle 66.9°
[01:00:02] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=-176.1°, current=168.0°, player=(778,465), corner_timer=0.28
[01:00:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(910.3644, 499.1036), shooter_id=549873256095, bullet_pos=(1494.54, 638.8928)
[01:00:03] [INFO] [Bullet] Using shooter_position, distance=600.668273925781
[01:00:03] [INFO] [Bullet] Distance to wall: 600.668273925781 (40.9006073031671% of viewport)
[01:00:03] [INFO] [Bullet] Distance-based penetration chance: 98.9492914796384%
[01:00:03] [INFO] [Bullet] Caliber cannot penetrate walls
[01:00:03] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P2:combat_state, state=PURSUING, target=-176.1°, current=159.7°, player=(778,453), corner_timer=0.23
[01:00:03] [ENEMY] [Enemy5] State: SUPPRESSED -> IN_COVER
[01:00:03] [ENEMY] [Enemy5] State: IN_COVER -> PURSUING
[01:00:03] [ENEMY] [Enemy5] ROT_CHANGE: P4:velocity -> P2:combat_state, state=PURSUING, target=168.8°, current=153.4°, player=(778,446), corner_timer=0.00
[01:00:03] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(868.4742, 517.4756), shooter_id=549873256095, bullet_pos=(1493.232, 625.3407)
[01:00:03] [INFO] [Bullet] Using shooter_position, distance=634.000793457031
[01:00:03] [INFO] [Bullet] Distance to wall: 634.000793457031 (43.1702798511486% of viewport)
[01:00:03] [INFO] [Bullet] Distance-based penetration chance: 96.3013401736599%
[01:00:03] [INFO] [Bullet] Caliber cannot penetrate walls
[01:00:03] [ENEMY] [Enemy4] PURSUING corner check: angle -130.0°
[01:00:03] [INFO] [ReplayManager] Recording frame 1680 (28,0s): player_valid=True, enemies=5
[01:00:03] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[01:00:03] [ENEMY] [Enemy4] Player reloading: false -> true
[01:00:03] [ENEMY] [Enemy5] Player reloading: false -> true
[01:00:03] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(778.0651, 401.3223), source=PLAYER (Player), range=900, listeners=2
[01:00:03] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=0, below_threshold=1
[01:00:03] [ENEMY] [Enemy4] Player vulnerable (reloading) but cannot attack: close=false (dist=1060), can_see=false
[01:00:03] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=569), can_see=false
[01:00:03] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[01:00:03] [ENEMY] [Enemy4] Player reloading: true -> false
[01:00:03] [ENEMY] [Enemy5] Player reloading: true -> false
[01:00:03] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[01:00:03] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[01:00:03] [ENEMY] [Enemy4] PURSUING corner check: angle -113.2°
[01:00:04] [ENEMY] [Enemy4] PURSUING corner check: angle -104.1°
[01:00:04] [INFO] [ReplayManager] Recording frame 1740 (29,0s): player_valid=True, enemies=5
[01:00:04] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=178.1°, current=-176.3°, player=(832,471), corner_timer=0.13
[01:00:04] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[01:00:04] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[01:00:04] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=174.3°, current=174.2°, player=(867,506), corner_timer=0.12
[01:00:04] [ENEMY] [Enemy5] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=149.8°, current=102.3°, player=(910,549), corner_timer=0.00
[01:00:04] [ENEMY] [Enemy5] State: PURSUING -> COMBAT
[01:00:04] [ENEMY] [Enemy5] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=144.5°, current=81.5°, player=(928,568), corner_timer=0.00
[01:00:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(936.6844, 586.3723), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:04] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=0
[01:00:04] [ENEMY] [Enemy5] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=141.2°, current=92.4°, player=(940,587), corner_timer=0.00
[01:00:04] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[01:00:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1207.651, 373.7038), source=ENEMY (Enemy5), range=1469, listeners=2
[01:00:05] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=0
[01:00:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(945.0864, 612.0723), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:05] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=0
[01:00:05] [INFO] [LastChance] Threat detected: Bullet
[01:00:05] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[01:00:05] [INFO] [LastChance] Cannot trigger effect - conditions not met
[01:00:05] [ENEMY] [Enemy5] Hit: dmg=1, hp=2/4->1/4
[01:00:05] [INFO] [ImpactEffects] spawn_blood_effect called at (1179.788, 398.5516), dir=(0.795726, -0.605657), lethal=false
[01:00:05] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[01:00:05] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[01:00:05] [INFO] [ImpactEffects] Blood effect spawned at (1179.788, 398.5516) (scale=0.5)
[01:00:05] [INFO] [FlashbangStatus] Status: STUNNED applied
[01:00:05] [INFO] [Player] Spawning blood effect at (940.22784, 611.6643), dir=(1, 0), lethal=False (C#)
[01:00:05] [INFO] [ImpactEffects] spawn_blood_effect called at (940.2278, 611.6643), dir=(1, 0), lethal=false
[01:00:05] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[01:00:05] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[01:00:05] [INFO] [ImpactEffects] Blood effect spawned at (940.2278, 611.6643) (scale=1)
[01:00:05] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[01:00:05] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[01:00:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(937.1501, 616.783), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:05] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=0
[01:00:05] [INFO] [FlashbangStatus] Status: STUNNED removed
[01:00:05] [ENEMY] [Enemy5] State: COMBAT -> RETREATING
[01:00:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.811, 397.9379), source=ENEMY (Enemy5), range=1469, listeners=2
[01:00:05] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=0
[01:00:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(906.8004, 592.2416), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:05] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=1
[01:00:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1161.176, 397.1197), source=ENEMY (Enemy5), range=1469, listeners=2
[01:00:05] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=0
[01:00:05] [INFO] [ReplayManager] Recording frame 1800 (30,0s): player_valid=True, enemies=5
[01:00:05] [INFO] [BloodDecal] Blood puddle created at (1002.714, 651.1537) (added to group)
[01:00:05] [ENEMY] [Enemy5] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=-175.6°, current=148.4°, player=(899,578), corner_timer=0.00
[01:00:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1123.7882, 446.34525), shooter_id=549051172931, bullet_pos=(945.65674, 677.29694)
[01:00:05] [INFO] [Bullet] Using shooter_position, distance=291,66675
[01:00:05] [INFO] [Bullet] Distance to wall: 291,66675 (19,860126% of viewport)
[01:00:05] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1123.7882, 446.34525), shooter_id=549051172931, bullet_pos=(943.3164, 672.8785)
[01:00:05] [INFO] [Bullet] Using shooter_position, distance=289,63318
[01:00:05] [INFO] [Bullet] Distance to wall: 289,63318 (19,721657% of viewport)
[01:00:05] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:05] [INFO] [Bullet] Starting wall penetration at (943.3164, 672.8785)
[01:00:05] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1150.541, 396.3015), source=ENEMY (Enemy5), range=1469, listeners=2
[01:00:05] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=0
[01:00:05] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[01:00:05] [INFO] [Bullet] Exiting penetration at (924.3988, 637.1625) after traveling 35,416664 pixels through wall
[01:00:05] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[01:00:05] [ENEMY] [Enemy5] State: RETREATING -> IN_COVER
[01:00:05] [INFO] [BloodDecal] Blood puddle created at (1028.286, 646.6318) (added to group)
[01:00:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1090.9951, 429.2391), shooter_id=549051172931, bullet_pos=(1051.273, 441.81915)
[01:00:05] [INFO] [Bullet] Using shooter_position, distance=41,66663
[01:00:05] [INFO] [Bullet] Distance to wall: 41,66663 (2,8371575% of viewport)
[01:00:05] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[01:00:05] [INFO] [Bullet] Starting wall penetration at (1051.273, 441.81915)
[01:00:05] [ENEMY] [Enemy5] State: IN_COVER -> SUPPRESSED
[01:00:05] [INFO] [Bullet] Raycast backward hit penetrating body at distance 32,74407
[01:00:05] [INFO] [Bullet] Body exited signal received for penetrating body
[01:00:05] [INFO] [Bullet] Exiting penetration at (1006.784, 455.9088) after traveling 41,666668 pixels through wall
[01:00:05] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[01:00:05] [INFO] [BloodDecal] Blood puddle created at (1223.28, 388.4017) (added to group)
[01:00:05] [INFO] [BloodDecal] Blood puddle created at (1213.485, 370.9064) (added to group)
[01:00:05] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1111.5806, 443.71234), shooter_id=549051172931, bullet_pos=(872.61865, 676.1094)
[01:00:05] [INFO] [Bullet] Using shooter_position, distance=333,33344
[01:00:05] [INFO] [Bullet] Distance to wall: 333,33344 (22,697289% of viewport)
[01:00:05] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:05] [INFO] [BloodDecal] Blood puddle created at (1286.111, 403.7836) (added to group)
[01:00:05] [INFO] [BloodDecal] Blood puddle created at (1013.622, 636.8914) (added to group)
[01:00:05] [INFO] [BloodDecal] Blood puddle created at (1266.563, 411.5345) (added to group)
[01:00:05] [INFO] [BloodDecal] Blood puddle created at (1266.277, 397.1466) (added to group)
[01:00:05] [INFO] [BloodDecal] Blood puddle created at (1027.167, 643.6969) (added to group)
[01:00:05] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=171.6°, current=171.1°, player=(844,524), corner_timer=0.12
[01:00:05] [INFO] [BloodDecal] Blood puddle created at (1280.476, 327.7474) (added to group)
[01:00:05] [INFO] [BloodDecal] Blood puddle created at (1108.532, 662.9791) (added to group)
[01:00:05] [INFO] [BloodDecal] Blood puddle created at (1270.089, 435.8433) (added to group)
[01:00:05] [INFO] [BloodDecal] Blood puddle created at (1259.362, 432.5452) (added to group)
[01:00:05] [INFO] [BloodDecal] Blood puddle created at (1315.259, 374.2397) (added to group)
[01:00:05] [INFO] [BloodDecal] Blood puddle created at (1125.603, 672.2331) (added to group)
[01:00:05] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[01:00:05] [INFO] [BloodDecal] Blood puddle created at (1314.204, 346.4857) (added to group)
[01:00:05] [INFO] [BloodDecal] Blood puddle created at (1106.193, 670.0124) (added to group)
[01:00:05] [INFO] [BloodDecal] Blood puddle created at (1100.822, 651.8142) (added to group)
[01:00:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1329.213, 443.9333), source=ENEMY (Enemy4), range=2000, listeners=2
[01:00:06] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=0
[01:00:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(937.1501, 616.783), shooter_id=549873256095, bullet_pos=(1762.224, 50.57663)
[01:00:06] [INFO] [Bullet] Using shooter_position, distance=1000.66778564453
[01:00:06] [INFO] [Bullet] Distance to wall: 1000.66778564453 (68.1373095903411% of viewport)
[01:00:06] [INFO] [Bullet] Distance-based penetration chance: 67.1731388112688%
[01:00:06] [INFO] [Bullet] Penetration failed (distance roll)
[01:00:06] [INFO] [BloodyFeet:Enemy4] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[01:00:06] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[01:00:06] [INFO] [Player] Spawning blood effect at (730.73737, 501.37317), dir=(1, 0), lethal=False (C#)
[01:00:06] [INFO] [ImpactEffects] spawn_blood_effect called at (730.7374, 501.3732), dir=(1, 0), lethal=false
[01:00:06] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[01:00:06] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[01:00:06] [INFO] [ImpactEffects] Blood effect spawned at (730.7374, 501.3732) (scale=1)
[01:00:06] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[01:00:06] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[01:00:06] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[01:00:06] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P3:corner, state=RETREATING, target=-104.1°, current=173.9°, player=(730,501), corner_timer=0.12
[01:00:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(730.7374, 507.3732), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:06] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=1
[01:00:06] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(906.8004, 592.2416), shooter_id=549873256095, bullet_pos=(1805.343, 47.69988)
[01:00:06] [INFO] [Bullet] Using shooter_position, distance=1050.66870117188
[01:00:06] [INFO] [Bullet] Distance to wall: 1050.66870117188 (71.5419638721742% of viewport)
[01:00:06] [INFO] [Bullet] Distance-based penetration chance: 63.2010421491301%
[01:00:06] [INFO] [Bullet] Penetration failed (distance roll)
[01:00:06] [INFO] [ReplayManager] Recording frame 1860 (31,0s): player_valid=True, enemies=5
[01:00:06] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[01:00:06] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[01:00:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(715.9708, 507.0552), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:06] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=1
[01:00:06] [INFO] [BloodDecal] Blood puddle created at (773.7733, 530.2446) (added to group)
[01:00:06] [INFO] [BloodDecal] Blood puddle created at (775.7349, 535.0928) (added to group)
[01:00:06] [INFO] [BloodDecal] Blood puddle created at (801.3807, 547.8782) (added to group)
[01:00:06] [INFO] [BloodDecal] Blood puddle created at (816.8162, 492.6795) (added to group)
[01:00:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(682.158, 489.8557), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:06] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=1
[01:00:06] [INFO] [BloodDecal] Blood puddle created at (805.7004, 561.5383) (added to group)
[01:00:06] [INFO] [BloodDecal] Blood puddle created at (891.0394, 491.5984) (added to group)
[01:00:06] [INFO] [BloodDecal] Blood puddle created at (862.9147, 555.9966) (added to group)
[01:00:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(643.2455, 480.8423), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:06] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=2
[01:00:06] [INFO] [BloodDecal] Blood puddle created at (854.2521, 584.7026) (added to group)
[01:00:06] [INFO] [BloodDecal] Blood puddle created at (918.7665, 647.9635) (added to group)
[01:00:06] [INFO] [BloodDecal] Blood puddle created at (876.5776, 613.4914) (added to group)
[01:00:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(715.9708, 507.0552), shooter_id=549873256095, bullet_pos=(1199.447, 484.5555)
[01:00:07] [INFO] [Bullet] Using shooter_position, distance=483.999877929688
[01:00:07] [INFO] [Bullet] Distance to wall: 483.999877929688 (32.95644168553% of viewport)
[01:00:07] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:07] [INFO] [Bullet] Caliber cannot penetrate walls
[01:00:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(730.7374, 507.3732), shooter_id=549873256095, bullet_pos=(1414.62, 494.7623)
[01:00:07] [INFO] [Bullet] Using shooter_position, distance=683.999389648438
[01:00:07] [INFO] [Bullet] Distance to wall: 683.999389648438 (46.5747762051329% of viewport)
[01:00:07] [INFO] [Bullet] Distance-based penetration chance: 92.3294277606783%
[01:00:07] [INFO] [Bullet] Caliber cannot penetrate walls
[01:00:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(682.158, 489.8557), shooter_id=549873256095, bullet_pos=(1048.71, 465.9042)
[01:00:07] [INFO] [Bullet] Using shooter_position, distance=367.333862304688
[01:00:07] [INFO] [Bullet] Distance to wall: 367.333862304688 (25.0124381517378% of viewport)
[01:00:07] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:07] [INFO] [Bullet] Caliber cannot penetrate walls
[01:00:07] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(643.2455, 480.8423), shooter_id=549873256095, bullet_pos=(1043.279, 458.318)
[01:00:07] [INFO] [Bullet] Using shooter_position, distance=400.666778564453
[01:00:07] [INFO] [Bullet] Distance to wall: 400.666778564453 (27.2821377136934% of viewport)
[01:00:07] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:07] [INFO] [Bullet] Caliber cannot penetrate walls
[01:00:07] [INFO] [ReplayManager] Recording frame 1920 (32,0s): player_valid=True, enemies=5
[01:00:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(662.1987, 517.9337), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:07] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=1
[01:00:07] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[01:00:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(662.1987, 517.9337), shooter_id=549873256095, bullet_pos=(1212.006, 487.1846)
[01:00:08] [INFO] [Bullet] Using shooter_position, distance=550.666748046875
[01:00:08] [INFO] [Bullet] Distance to wall: 550.666748046875 (37.4959114613737% of viewport)
[01:00:08] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:08] [INFO] [Bullet] Caliber cannot penetrate walls
[01:00:08] [INFO] [ReplayManager] Recording frame 1980 (33,0s): player_valid=True, enemies=5
[01:00:08] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[01:00:08] [ENEMY] [Enemy4] Player reloading: false -> true
[01:00:08] [ENEMY] [Enemy5] Player reloading: false -> true
[01:00:08] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(665.4744, 511.9337), source=PLAYER (Player), range=900, listeners=2
[01:00:08] [ENEMY] [Enemy5] Heard player RELOAD at (665.4744, 511.9337), intensity=0.01, distance=494
[01:00:08] [ENEMY] [Enemy5] Vulnerability sound triggered pursuit - transitioning from SUPPRESSED to PURSUING
[01:00:08] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=1
[01:00:08] [ENEMY] [Enemy4] Player vulnerable (reloading) but cannot attack: close=false (dist=581), can_see=false
[01:00:08] [ENEMY] [Enemy5] ROT_CHANGE: P4:velocity -> P2:combat_state, state=PURSUING, target=166.4°, current=170.4°, player=(665,511), corner_timer=0.00
[01:00:08] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=494), can_see=false
[01:00:08] [ENEMY] [Enemy5] Pursuing vulnerability sound at (665.4744, 511.9337), distance=494
[01:00:08] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[01:00:08] [ENEMY] [Enemy4] Player reloading: true -> false
[01:00:08] [ENEMY] [Enemy5] Player reloading: true -> false
[01:00:08] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[01:00:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(665.4744, 517.9337), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:09] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=1
[01:00:09] [ENEMY] [Enemy5] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=174.3°, current=174.2°, player=(665,511), corner_timer=0.00
[01:00:09] [ENEMY] [Enemy5] State: PURSUING -> COMBAT
[01:00:09] [ENEMY] [Enemy5] State: COMBAT -> RETREATING
[01:00:09] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[01:00:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(665.4744, 517.9337), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:09] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=1
[01:00:09] [ENEMY] [Enemy5] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=-79.0°, current=-152.1°, player=(665,511), corner_timer=0.00
[01:00:09] [ENEMY] [Enemy5] State: RETREATING -> IN_COVER
[01:00:09] [ENEMY] [Enemy5] State: IN_COVER -> SUPPRESSED
[01:00:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(664.4744, 517.9337), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:09] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=1
[01:00:09] [INFO] [ReplayManager] Recording frame 2040 (34,0s): player_valid=True, enemies=5
[01:00:09] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
[01:00:09] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[01:00:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(665.4744, 517.9337), shooter_id=549873256095, bullet_pos=(1197.709, 474.5425)
[01:00:09] [INFO] [Bullet] Using shooter_position, distance=534.00048828125
[01:00:09] [INFO] [Bullet] Distance to wall: 534.00048828125 (36.361075187383% of viewport)
[01:00:09] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:09] [INFO] [Bullet] Caliber cannot penetrate walls
[01:00:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(643.4744, 517.9337), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:09] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=1
[01:00:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(592.9189, 517.9337), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:09] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=1
[01:00:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(665.4744, 517.9337), shooter_id=549873256095, bullet_pos=(1198.454, 484.9374)
[01:00:09] [INFO] [Bullet] Using shooter_position, distance=533.999572753906
[01:00:09] [INFO] [Bullet] Distance to wall: 533.999572753906 (36.3610128474426% of viewport)
[01:00:09] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:09] [INFO] [Bullet] Caliber cannot penetrate walls
[01:00:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(643.4744, 517.9337), shooter_id=549873256095, bullet_pos=(1510.564, 538.5255)
[01:00:10] [INFO] [Bullet] Using shooter_position, distance=867.334228515625
[01:00:10] [INFO] [Bullet] Distance to wall: 867.334228515625 (59.0583825066416% of viewport)
[01:00:10] [INFO] [Bullet] Distance-based penetration chance: 77.7652204089181%
[01:00:10] [INFO] [Bullet] Caliber cannot penetrate walls
[01:00:10] [INFO] [ReplayManager] Recording frame 2100 (35,0s): player_valid=True, enemies=5
[01:00:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(592.9189, 517.9337), shooter_id=549873256095, bullet_pos=(1509.625, 551.8567)
[01:00:10] [INFO] [Bullet] Using shooter_position, distance=917.333679199219
[01:00:10] [INFO] [Bullet] Distance to wall: 917.333679199219 (62.4629370445702% of viewport)
[01:00:10] [INFO] [Bullet] Distance-based penetration chance: 73.7932401146682%
[01:00:10] [INFO] [Bullet] Caliber cannot penetrate walls
[01:00:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(546.4189, 517.9337), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:10] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=2
[01:00:10] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(664.4744, 517.9337), shooter_id=549873256095, bullet_pos=(1965.079, 505.0479)
[01:00:10] [INFO] [Bullet] Using shooter_position, distance=1300.66882324219
[01:00:10] [INFO] [Bullet] Distance to wall: 1300.66882324219 (88.5649318936301% of viewport)
[01:00:10] [INFO] [Bullet] Distance-based penetration chance: 43.3409127907649%
[01:00:10] [INFO] [Bullet] Caliber cannot penetrate walls
[01:00:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(546.4189, 517.9337), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:10] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=2
[01:00:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(546.4189, 517.9337), shooter_id=549873256095, bullet_pos=(1044.276, 464.9695)
[01:00:11] [INFO] [Bullet] Using shooter_position, distance=500.665985107422
[01:00:11] [INFO] [Bullet] Distance to wall: 500.665985107422 (34.0912675695307% of viewport)
[01:00:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:11] [INFO] [Bullet] Caliber cannot penetrate walls
[01:00:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(546.4189, 517.9337), shooter_id=549873256095, bullet_pos=(1041.045, 440.3951)
[01:00:11] [INFO] [Bullet] Using shooter_position, distance=500.666595458984
[01:00:11] [INFO] [Bullet] Distance to wall: 500.666595458984 (34.0913091294909% of viewport)
[01:00:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:11] [INFO] [Bullet] Caliber cannot penetrate walls
[01:00:11] [INFO] [ReplayManager] Recording frame 2160 (36,0s): player_valid=True, enemies=5
[01:00:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(546.4189, 517.9337), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=2
[01:00:12] [INFO] [ReplayManager] Recording frame 2220 (37,0s): player_valid=True, enemies=5
[01:00:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(546.4189, 517.9337), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:12] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=2
[01:00:12] [ENEMY] [Enemy4] State: SUPPRESSED -> IN_COVER
[01:00:12] [ENEMY] [Enemy4] State: IN_COVER -> PURSUING
[01:00:12] [ENEMY] [Enemy4] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=173.6°, current=-104.1°, player=(546,511), corner_timer=0.12
[01:00:12] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(546.4189, 517.9337), shooter_id=549873256095, bullet_pos=(1043.989, 462.3329)
[01:00:12] [INFO] [Bullet] Using shooter_position, distance=500.667297363281
[01:00:12] [INFO] [Bullet] Distance to wall: 500.667297363281 (34.0913569234452% of viewport)
[01:00:12] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:12] [INFO] [Bullet] Caliber cannot penetrate walls
[01:00:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(546.4189, 517.9337), shooter_id=549873256095, bullet_pos=(1043.555, 458.5862)
[01:00:13] [INFO] [Bullet] Using shooter_position, distance=500.666046142578
[01:00:13] [INFO] [Bullet] Distance to wall: 500.666046142578 (34.0912717255267% of viewport)
[01:00:13] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:13] [INFO] [Bullet] Caliber cannot penetrate walls
[01:00:13] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[01:00:13] [ENEMY] [Enemy4] Player reloading: false -> true
[01:00:13] [ENEMY] [Enemy5] Player reloading: false -> true
[01:00:13] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(484.5856, 511.9337), source=PLAYER (Player), range=900, listeners=2
[01:00:13] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=2
[01:00:13] [ENEMY] [Enemy4] Player vulnerable (reloading) but cannot attack: close=false (dist=761), can_see=false
[01:00:13] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=606), can_see=false
[01:00:13] [INFO] [ReplayManager] Recording frame 2280 (38,0s): player_valid=True, enemies=5
[01:00:13] [INFO] [Player.Reload.Anim] LeftArm: pos=(-1.4136138, 2.4631557), target=(-4, 2), base=(16, 6)
[01:00:13] [INFO] [Player.Reload.Anim] RightArm: pos=(3.7293928, 6), target=(4, 6), base=(4, 6)
[01:00:13] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[01:00:13] [ENEMY] [Enemy4] Player reloading: true -> false
[01:00:13] [ENEMY] [Enemy5] Player reloading: true -> false
[01:00:13] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[01:00:13] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[01:00:14] [ENEMY] [Enemy4] PURSUING corner check: angle -113.3°
[01:00:14] [INFO] [ReplayManager] Recording frame 2340 (39,0s): player_valid=True, enemies=5
[01:00:14] [ENEMY] [Enemy5] State: SUPPRESSED -> SEEKING_COVER
[01:00:14] [ENEMY] [Enemy5] State: SEEKING_COVER -> IN_COVER
[01:00:14] [ENEMY] [Enemy5] State: IN_COVER -> SUPPRESSED
[01:00:15] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[01:00:15] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[01:00:15] [INFO] [Player.Grenade] G pressed - starting grab animation
[01:00:15] [INFO] [ReplayManager] Recording frame 2400 (40,0s): player_valid=True, enemies=5
[01:00:15] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[01:00:15] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (1211.8585, 621.7069)
[01:00:15] [ENEMY] [Enemy5] State: SUPPRESSED -> IN_COVER
[01:00:15] [ENEMY] [Enemy5] State: IN_COVER -> PURSUING
[01:00:15] [ENEMY] [Enemy5] ROT_CHANGE: P4:velocity -> P2:combat_state, state=PURSUING, target=156.9°, current=-30.4°, player=(421,719), corner_timer=0.00
[01:00:16] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[01:00:16] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[01:00:16] [INFO] [GrenadeTimer] Initialized for Flashbang grenade, effect radius: 400
[01:00:16] [INFO] [Player.Grenade] Added GrenadeTimer component (type: Flashbang)
[01:00:16] [INFO] [GrenadeBase] Timer activated! 4.0 seconds until explosion
[01:00:16] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[01:00:16] [INFO] [Player.Grenade] Timer started, grenade created at (421.99954, 719.03906)
[01:00:16] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[01:00:16] [INFO] [Player.Grenade] Step 1 complete! Drag: (68.141846, -10.4366455)
[01:00:16] [ENEMY] [Enemy4] PURSUING corner check: angle 47.6°
[01:00:16] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[01:00:16] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[01:00:16] [INFO] [ReplayManager] Recording frame 2460 (41,0s): player_valid=True, enemies=5
[01:00:16] [ENEMY] [Enemy4] PURSUING corner check: angle 36.6°
[01:00:17] [ENEMY] [Enemy5] PURSUING corner check: angle -20.0°
[01:00:17] [INFO] [ReplayManager] Recording frame 2520 (42,0s): player_valid=True, enemies=5
[01:00:17] [INFO] [BloodyFeet:Enemy5] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[01:00:17] [ENEMY] [Enemy5] PURSUING corner check: angle 26.5°
[01:00:17] [ENEMY] [Enemy5] PURSUING corner check: angle 26.5°
[01:00:18] [INFO] [ReplayManager] Recording frame 2580 (43,0s): player_valid=True, enemies=5
[01:00:18] [ENEMY] [Enemy4] PURSUING corner check: angle -113.5°
[01:00:18] [ENEMY] [Enemy4] PURSUING corner check: angle -109.3°
[01:00:18] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=178.3°, current=177.8°, player=(421,657), corner_timer=0.25
[01:00:18] [ENEMY] [Enemy5] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=177.3°, current=176.8°, player=(421,657), corner_timer=0.28
[01:00:18] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[01:00:18] [ENEMY] [Enemy5] State: PURSUING -> COMBAT
[01:00:18] [ENEMY] [Enemy5] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=179.4°, current=-118.9°, player=(421,635), corner_timer=0.28
[01:00:18] [ENEMY] [Enemy5] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=-177.2°, current=-129.9°, player=(417,609), corner_timer=0.28
[01:00:18] [INFO] [Player.Grenade.Simple] Throwing! Target: (1032.1508, 555.08435), Distance: 558,2, Speed: 578,7, Friction: 300,0
[01:00:18] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,0818253
[01:00:18] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[01:00:18] [INFO] [Player.Grenade.Simple] C# set velocity directly: dir=(0.99665415, -0.081734024), speed=578,7, spawn=(475.8462, 600.706)
[01:00:18] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.996654, -0.081734), Speed: 578.7 (clamped from 578.7, max: 1352.8)
[01:00:18] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[01:00:18] [INFO] [Player.Grenade.Simple] Grenade thrown!
[01:00:18] [INFO] [Player.Grenade] State reset to IDLE
[01:00:18] [INFO] [Player.Grenade] State reset to IDLE
[01:00:18] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[01:00:19] [ENEMY] [Enemy5] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[01:00:19] [ENEMY] [Enemy5] EVADING_GRENADE started: escaping to (759.502, 1003.878)
[01:00:19] [INFO] [Player.Grenade] Player rotation restored to 0
[01:00:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(796.9501, 643.9338), source=ENEMY (Enemy4), range=2000, listeners=2
[01:00:19] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=0
[01:00:19] [ENEMY] [Enemy5] ROT_CHANGE: P1:visible -> P3:corner, state=EVADING_GRENADE, target=26.5°, current=-118.0°, player=(402,585), corner_timer=0.28
[01:00:19] [INFO] [Player] Spawning blood effect at (383.2582, 575.3904), dir=(1, 0), lethal=True (C#)
[01:00:19] [INFO] [ImpactEffects] spawn_blood_effect called at (383.2582, 575.3904), dir=(1, 0), lethal=true
[01:00:19] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[01:00:19] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[01:00:19] [INFO] [ImpactEffects] Blood effect spawned at (383.2582, 575.3904) (scale=1.5)
[01:00:19] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[01:00:19] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[01:00:19] [INFO] [CinemaEffects] Player died - triggering death effects
[01:00:19] [INFO] [CinemaEffects] Death effects triggered - starting cigarette burn, expanding spots, and end of reel (top-right)
[01:00:19] [INFO] [PenultimateHit] Player died - ending penultimate effect
[01:00:19] [INFO] [LastChance] Player died
[01:00:19] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[01:00:19] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[01:00:19] [INFO] [ReplayManager] Recording frame 2640 (44,0s): player_valid=True, enemies=5
[01:00:19] [INFO] [BloodDecal] Blood puddle created at (423.7144, 572.5167) (added to group)
[01:00:19] [INFO] [BloodDecal] Blood puddle created at (447.4428, 590.6035) (added to group)
[01:00:19] [INFO] [BloodDecal] Blood puddle created at (472.5789, 600.9813) (added to group)
[01:00:19] [INFO] [BloodDecal] Blood puddle created at (439.1259, 624.7736) (added to group)
[01:00:19] [INFO] [GrenadeBase] Collision detected with Enemy4 (type: CharacterBody2D)
[01:00:19] [INFO] [BloodDecal] Blood puddle created at (450.3199, 626.5223) (added to group)
[01:00:19] [INFO] [BloodDecal] Blood puddle created at (458.3714, 570.5938) (added to group)
[01:00:19] [INFO] [BloodDecal] Blood puddle created at (486.943, 588.8543) (added to group)
[01:00:19] [INFO] [BloodDecal] Blood puddle created at (475.1108, 613.731) (added to group)
[01:00:19] [INFO] [BloodDecal] Blood puddle created at (531.1571, 636.6666) (added to group)
[01:00:19] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[01:00:19] [INFO] [BloodDecal] Blood puddle created at (490.2496, 641.8528) (added to group)
[01:00:19] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[01:00:19] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P3:corner, state=SUPPRESSED, target=-109.3°, current=165.8°, player=(365,681), corner_timer=0.22
[01:00:19] [INFO] [BloodDecal] Blood puddle created at (496.4003, 589.4443) (added to group)
[01:00:19] [INFO] [BloodDecal] Blood puddle created at (554.8469, 622.2403) (added to group)
[01:00:19] [INFO] [BloodDecal] Blood puddle created at (507.841, 654.2531) (added to group)
[01:00:19] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[01:00:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[01:00:19] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[01:00:19] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[01:00:19] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[01:00:19] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[01:00:19] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[01:00:19] [INFO] [LastChance] Resetting all effects (scene change detected)
[01:00:19] [INFO] [CinemaEffects] Scene changed to: LabyrinthLevel
[01:00:19] [INFO] [CinemaEffects] Death effects reset
[01:00:19] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[01:00:19] [INFO] [FlashbangPlayer] Resetting flashbang player effects (scene change)
[01:00:19] [ENEMY] [Enemy1] Death animation component initialized
[01:00:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[01:00:19] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[01:00:19] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[01:00:19] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[01:00:19] [ENEMY] [Enemy2] Death animation component initialized
[01:00:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[01:00:19] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[01:00:19] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[01:00:19] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[01:00:19] [ENEMY] [Enemy3] Death animation component initialized
[01:00:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[01:00:19] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[01:00:19] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[01:00:19] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[01:00:19] [ENEMY] [Enemy4] Death animation component initialized
[01:00:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[01:00:19] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[01:00:19] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[01:00:19] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[01:00:19] [INFO] [EnemyGrenade] Initialized: 1 grenades
[01:00:19] [ENEMY] [Enemy5] Death animation component initialized
[01:00:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[01:00:19] [INFO] [BloodyFeet:Player] Footprint scene loaded
[01:00:19] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[01:00:19] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[01:00:19] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[01:00:19] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[01:00:19] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[01:00:19] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[01:00:19] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[01:00:19] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[01:00:19] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[01:00:19] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[01:00:19] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[01:00:19] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 4/4
[01:00:19] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[01:00:19] [INFO] [LabyrinthLevel] Found Environment/Enemies node with 5 children
[01:00:19] [INFO] [LabyrinthLevel] Child 'Enemy1': script=true, has_died_signal=true
[01:00:19] [INFO] [LabyrinthLevel] Child 'Enemy2': script=true, has_died_signal=true
[01:00:19] [INFO] [LabyrinthLevel] Child 'Enemy3': script=true, has_died_signal=true
[01:00:19] [INFO] [LabyrinthLevel] Child 'Enemy4': script=true, has_died_signal=true
[01:00:19] [INFO] [LabyrinthLevel] Child 'Enemy5': script=true, has_died_signal=true
[01:00:19] [INFO] [LabyrinthLevel] Enemy tracking complete: 5 enemies registered
[01:00:19] [INFO] [LabyrinthLevel] Setting up weapon: makarov_pm
[01:00:19] [INFO] [ScoreManager] Level started with 5 enemies
[01:00:19] [INFO] [LabyrinthLevel] ReplayManager found as C# autoload - verified OK
[01:00:19] [INFO] [LabyrinthLevel] Starting replay recording - Player: Player, Enemies count: 5
[01:00:19] [INFO] [ReplayManager] Replay data cleared
[01:00:19] [INFO] [LabyrinthLevel] Previous replay data cleared
[01:00:19] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[01:00:19] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[01:00:19] [INFO] [ReplayManager] Level: LabyrinthLevel
[01:00:19] [INFO] [ReplayManager] Player: Player (valid: True)
[01:00:19] [INFO] [ReplayManager] Enemies count: 5
[01:00:19] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[01:00:19] [INFO] [ReplayManager]   Enemy 0: Enemy1
[01:00:19] [INFO] [ReplayManager]   Enemy 1: Enemy2
[01:00:19] [INFO] [ReplayManager]   Enemy 2: Enemy3
[01:00:19] [INFO] [ReplayManager]   Enemy 3: Enemy4
[01:00:19] [INFO] [ReplayManager]   Enemy 4: Enemy5
[01:00:19] [INFO] [LabyrinthLevel] Replay recording started successfully
[01:00:19] [INFO] [BloodDecal] Blood puddle created at (506.5814, 631.3929) (added to group)
[01:00:19] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[01:00:19] [INFO] [CinemaEffects] Found player node: Player
[01:00:19] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[01:00:19] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 3)
[01:00:19] [ENEMY] [Enemy1] Registered as sound listener
[01:00:19] [ENEMY] [Enemy1] Spawned at (400, 300), hp: 2, behavior: GUARD
[01:00:19] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[01:00:19] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 4)
[01:00:19] [ENEMY] [Enemy2] Registered as sound listener
[01:00:19] [ENEMY] [Enemy2] Spawned at (900, 950), hp: 1, behavior: GUARD
[01:00:19] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[01:00:19] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 5)
[01:00:19] [ENEMY] [Enemy3] Registered as sound listener
[01:00:19] [ENEMY] [Enemy3] Spawned at (1200, 1000), hp: 1, behavior: PATROL
[01:00:19] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[01:00:19] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 6)
[01:00:19] [ENEMY] [Enemy4] Registered as sound listener
[01:00:19] [ENEMY] [Enemy4] Spawned at (1650, 650), hp: 1, behavior: GUARD
[01:00:19] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[01:00:19] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 7)
[01:00:19] [ENEMY] [Enemy5] Registered as sound listener
[01:00:19] [ENEMY] [Enemy5] Spawned at (1500, 300), hp: 2, behavior: GUARD
[01:00:19] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[01:00:19] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=5
[01:00:19] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(150,1000), corner_timer=0.00
[01:00:19] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(150,1000), corner_timer=0.00
[01:00:19] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=315.0°, current=0.0°, player=(150,1000), corner_timer=0.00
[01:00:19] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(150,1000), corner_timer=0.00
[01:00:19] [INFO] [Player] Detecting weapon pose (frame 3)...
[01:00:19] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[01:00:19] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[01:00:19] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[01:00:19] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[01:00:19] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[01:00:19] [INFO] [LastChance] Found player: Player
[01:00:19] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[01:00:19] [INFO] [LastChance] Connected to player Damaged signal (C#)
[01:00:19] [INFO] [LastChance] Connected to player Died signal (C#)
[01:00:19] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[01:00:19] [INFO] [BloodDecal] Blood puddle created at (492.4489, 646.7499) (added to group)
[01:00:19] [INFO] [BloodDecal] Blood puddle created at (548.9926, 674.268) (added to group)
[01:00:19] [INFO] [BloodDecal] Blood puddle created at (556.8025, 576.8502) (added to group)
[01:00:19] [INFO] [BloodDecal] Blood puddle created at (518.8423, 596.475) (added to group)
[01:00:19] [INFO] [BloodDecal] Blood puddle created at (583.9004, 609.1113) (added to group)
[01:00:20] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=5
[01:00:21] [ENEMY] [Enemy3] PATROL corner check: angle -90.0°
[01:00:21] [ENEMY] [Enemy3] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-90.0°, current=0.0°, player=(231,1035), corner_timer=0.30
[01:00:21] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=169.1°, current=146.3°, player=(231,1079), corner_timer=0.00
[01:00:21] [ENEMY] [Enemy2] State: IDLE -> COMBAT
[01:00:21] [ENEMY] [Enemy2] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=168.3°, current=-39.4°, player=(231,1090), corner_timer=0.00
[01:00:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(231.4668, 1111.895), source=PLAYER (MakarovPM), range=1469, listeners=7
[01:00:21] [INFO] [SoundPropagation] Cleaned up 2 invalid listeners
[01:00:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=0, below_threshold=3
[01:00:21] [ENEMY] [Enemy3] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=0.0°, current=-54.4°, player=(231,1111), corner_timer=-0.02
[01:00:21] [ENEMY] [Enemy3] PATROL corner check: angle -90.0°
[01:00:21] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=-90.0°, current=-51.6°, player=(231,1111), corner_timer=0.30
[01:00:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(231.4668, 1117.984), source=PLAYER (MakarovPM), range=1469, listeners=5
[01:00:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=0, below_threshold=3
[01:00:21] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=5
[01:00:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(231.4668, 1105.932), source=PLAYER (MakarovPM), range=1469, listeners=5
[01:00:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=0, below_threshold=3
[01:00:22] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[01:00:22] [ENEMY] [Enemy2] Hit: dmg=1, hp=1/1->0/1
[01:00:22] [INFO] [ImpactEffects] spawn_blood_effect called at (744.2261, 949.9095), dir=(0.96276, -0.270356), lethal=true
[01:00:22] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[01:00:22] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[01:00:22] [INFO] [ImpactEffects] Blood effect spawned at (744.2261, 949.9095) (scale=0.75)
[01:00:22] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
[01:00:22] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[01:00:22] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 4)
[01:00:22] [INFO] [DeathAnim] Started - Angle: -15.7 deg, Index: 10
[01:00:22] [ENEMY] [Enemy2] Death animation started with hit direction: (0.96276, -0.270356)
[01:00:22] [INFO] [FlashbangStatus] Status: STUNNED applied
[01:00:22] [INFO] [FlashbangStatus] Status: STUNNED removed
[01:00:22] [INFO] [BloodDecal] Blood puddle created at (818.5026, 961.0922) (added to group)
[01:00:22] [INFO] [BloodDecal] Blood puddle created at (789.4741, 925.258) (added to group)
[01:00:22] [INFO] [BloodDecal] Blood puddle created at (787.6577, 963.7282) (added to group)
[01:00:22] [INFO] [BloodDecal] Blood puddle created at (802.198, 917.7163) (added to group)
[01:00:22] [INFO] [BloodDecal] Blood puddle created at (819.7783, 968.3685) (added to group)
[01:00:22] [INFO] [BloodDecal] Blood puddle created at (821.9296, 954.5629) (added to group)
[01:00:22] [INFO] [BloodDecal] Blood puddle created at (857.8459, 945.1869) (added to group)
[01:00:22] [INFO] [BloodDecal] Blood puddle created at (797.9078, 933.2848) (added to group)
[01:00:22] [INFO] [BloodDecal] Blood puddle created at (832.636, 916.5748) (added to group)
[01:00:22] [ENEMY] [Enemy2] Ragdoll activated
[01:00:22] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[01:00:22] [INFO] [BloodDecal] Blood puddle created at (866.1288, 973.6688) (added to group)
[01:00:22] [INFO] [BloodDecal] Blood puddle created at (824.7941, 998.9617) (added to group)
[01:00:22] [INFO] [BloodDecal] Blood puddle created at (851.3326, 976.3695) (added to group)
[01:00:22] [INFO] [BloodDecal] Blood puddle created at (923.2001, 1053.397) (added to group)
[01:00:22] [INFO] [BloodDecal] Blood puddle created at (942.4368, 981.7986) (added to group)
[01:00:22] [INFO] [BloodDecal] Blood puddle created at (843.9999, 984.8181) (added to group)
[01:00:22] [INFO] [BloodDecal] Blood puddle created at (870.7307, 996.4091) (added to group)
[01:00:22] [INFO] [BloodDecal] Blood puddle created at (897.1472, 1071.323) (added to group)
[01:00:22] [INFO] [BloodDecal] Blood puddle created at (956.5689, 1050.572) (added to group)
[01:00:22] [INFO] [BloodDecal] Blood puddle created at (854.361, 1060.69) (added to group)
[01:00:22] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=5
[01:00:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(231.4668, 1117.984), shooter_id=1166603718103, bullet_pos=(1438.575, 861.7665)
[01:00:22] [INFO] [Bullet] Using shooter_position, distance=1234.00109863281
[01:00:22] [INFO] [Bullet] Distance to wall: 1234.00109863281 (84.025403933842% of viewport)
[01:00:22] [INFO] [Bullet] Distance-based penetration chance: 48.637028743851%
[01:00:22] [INFO] [Bullet] Caliber cannot penetrate walls
[01:00:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(231.4668, 1105.932), shooter_id=1166603718103, bullet_pos=(1438.321, 946.5492)
[01:00:23] [INFO] [Bullet] Using shooter_position, distance=1217.33288574219
[01:00:23] [INFO] [Bullet] Distance to wall: 1217.33288574219 (82.8904346679785% of viewport)
[01:00:23] [INFO] [Bullet] Distance-based penetration chance: 49.9611595540251%
[01:00:23] [INFO] [Bullet] Caliber cannot penetrate walls
[01:00:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(325.3132, 1117.926), source=PLAYER (MakarovPM), range=1469, listeners=4
[01:00:23] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=4
[01:00:23] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(352.257, 1110.066), source=PLAYER (MakarovPM), range=1469, listeners=4
[01:00:23] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=4
[01:00:23] [ENEMY] [Enemy3] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=52.8°, player=(363,1084), corner_timer=-0.02
[01:00:23] [ENEMY] [Enemy3] PATROL corner check: angle -90.0°
[01:00:23] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=-90.0°, current=55.6°, player=(364,1081), corner_timer=0.30
[01:00:23] [ENEMY] [Enemy2] Death animation completed
[01:00:23] [INFO] [ReplayManager] Recording frame 240 (4,0s): player_valid=True, enemies=5
[01:00:23] [ENEMY] [Enemy3] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.2°, player=(341,1076), corner_timer=-0.02
[01:00:23] [ENEMY] [Enemy3] PATROL corner check: angle -90.0°
[01:00:23] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=-90.0°, current=4.1°, player=(337,1076), corner_timer=0.30
[01:00:24] [ENEMY] [Enemy3] Hit: dmg=1, hp=1/1->0/1
[01:00:24] [INFO] [ImpactEffects] spawn_blood_effect called at (1130.334, 1000), dir=(0.984891, -0.173173), lethal=true
[01:00:24] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[01:00:24] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[01:00:24] [INFO] [ImpactEffects] Blood effect spawned at (1130.334, 1000) (scale=0.75)
[01:00:24] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[01:00:24] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
[01:00:24] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 3)
[01:00:24] [INFO] [DeathAnim] Started - Angle: -10.0 deg, Index: 11
[01:00:24] [ENEMY] [Enemy3] Death animation started with hit direction: (0.984891, -0.173173)
[01:00:24] [INFO] [FlashbangStatus] Status: STUNNED applied
[01:00:24] [INFO] [FlashbangStatus] Status: STUNNED removed
[01:00:24] [INFO] [BloodDecal] Blood puddle created at (1164.696, 991.1909) (added to group)
[01:00:24] [INFO] [BloodDecal] Blood puddle created at (1172.931, 997.8544) (added to group)
[01:00:24] [INFO] [BloodDecal] Blood puddle created at (1209.818, 994.63) (added to group)
[01:00:24] [INFO] [BloodDecal] Blood puddle created at (1211.026, 1043.146) (added to group)
[01:00:24] [INFO] [BloodDecal] Blood puddle created at (1200.508, 1012.403) (added to group)
[01:00:24] [INFO] [BloodDecal] Blood puddle created at (1192.91, 998.0354) (added to group)
[01:00:24] [INFO] [BloodDecal] Blood puddle created at (1223.222, 978.0721) (added to group)
[01:00:24] [INFO] [BloodDecal] Blood puddle created at (1235.796, 1046.132) (added to group)
[01:00:24] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(352.257, 1110.066), shooter_id=1166603718103, bullet_pos=(1441.498, 951.891)
[01:00:24] [INFO] [Bullet] Using shooter_position, distance=1100.66589355469
[01:00:24] [INFO] [Bullet] Distance to wall: 1100.66589355469 (74.9463646382499% of viewport)
[01:00:24] [INFO] [Bullet] Distance-based penetration chance: 59.2292412553751%
[01:00:24] [INFO] [Bullet] Caliber cannot penetrate walls
[01:00:24] [INFO] [BloodDecal] Blood puddle created at (1243.053, 959.1883) (added to group)
[01:00:24] [INFO] [BloodDecal] Blood puddle created at (1203.626, 1035.027) (added to group)
[01:00:24] [INFO] [BloodDecal] Blood puddle created at (1261.705, 1047.148) (added to group)
[01:00:24] [ENEMY] [Enemy3] Ragdoll activated
[01:00:24] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[01:00:24] [INFO] [BloodDecal] Blood puddle created at (1209.56, 1001.491) (added to group)
[01:00:24] [INFO] [BloodDecal] Blood puddle created at (1206.905, 1030.421) (added to group)
[01:00:24] [INFO] [BloodDecal] Blood puddle created at (1234.476, 1001.735) (added to group)
[01:00:24] [INFO] [BloodDecal] Blood puddle created at (1336.164, 1101.532) (added to group)
[01:00:24] [INFO] [BloodDecal] Blood puddle created at (1230.328, 1115.708) (added to group)
[01:00:24] [INFO] [BloodDecal] Blood puddle created at (1321.014, 1106.005) (added to group)
[01:00:24] [INFO] [BloodDecal] Blood puddle created at (1285.676, 1111.083) (added to group)
[01:00:24] [INFO] [BloodDecal] Blood puddle created at (1220.315, 1039.514) (added to group)
[01:00:24] [INFO] [BloodDecal] Blood puddle created at (1283.278, 1112.645) (added to group)
[01:00:24] [INFO] [ReplayManager] Recording frame 300 (5,0s): player_valid=True, enemies=5
[01:00:25] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[01:00:25] [ENEMY] [Enemy1] Player reloading: false -> true
[01:00:25] [ENEMY] [Enemy3] Player reloading: false -> true
[01:00:25] [ENEMY] [Enemy4] Player reloading: false -> true
[01:00:25] [ENEMY] [Enemy5] Player reloading: false -> true
[01:00:25] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(303.3776, 950.5063), source=PLAYER (Player), range=900, listeners=3
[01:00:25] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=2, self=0, below_threshold=1
[01:00:25] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=false (dist=658), can_see=false
[01:00:25] [ENEMY] [Enemy4] Player vulnerable (reloading) but cannot attack: close=false (dist=1380), can_see=false
[01:00:25] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1362), can_see=false
[01:00:25] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[01:00:25] [ENEMY] [Enemy1] Player reloading: true -> false
[01:00:25] [ENEMY] [Enemy3] Player reloading: true -> false
[01:00:25] [ENEMY] [Enemy4] Player reloading: true -> false
[01:00:25] [ENEMY] [Enemy5] Player reloading: true -> false
[01:00:25] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[01:00:25] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[01:00:25] [ENEMY] [Enemy3] Death animation completed
[01:00:25] [INFO] [ReplayManager] Recording frame 360 (6,0s): player_valid=True, enemies=5
[01:00:26] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=115.9°, current=101.3°, player=(140,835), corner_timer=0.00
[01:00:26] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[01:00:26] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[01:00:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(385.1556, 328.3444), source=ENEMY (Enemy1), range=1469, listeners=3
[01:00:26] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=2
[01:00:26] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[01:00:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(366.0995, 360.4415), source=ENEMY (Enemy1), range=1469, listeners=3
[01:00:26] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=2
[01:00:26] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
[01:00:26] [INFO] [LastChance] Threat detected: @Area2D@2599
[01:00:26] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[01:00:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[01:00:26] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[01:00:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(345.4899, 391.5663), source=ENEMY (Enemy1), range=1469, listeners=3
[01:00:26] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=2
[01:00:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(358.76096, 391.0654), shooter_id=1164372348242, bullet_pos=(36.051445, 974.4208)
[01:00:26] [INFO] [Bullet] Using shooter_position, distance=666,667
[01:00:26] [INFO] [Bullet] Distance to wall: 666,667 (45,39458% of viewport)
[01:00:26] [INFO] [LastChance] Threat detected: @Area2D@2602
[01:00:26] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[01:00:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[01:00:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(336.3925, 421.66312), shooter_id=1164372348242, bullet_pos=(42.899723, 876.9266)
[01:00:26] [INFO] [Bullet] Using shooter_position, distance=541,6667
[01:00:26] [INFO] [Bullet] Distance to wall: 541,6667 (36,883083% of viewport)
[01:00:26] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:26] [INFO] [ReplayManager] Recording frame 420 (7,0s): player_valid=True, enemies=5
[01:00:26] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[01:00:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(349.5679, 417.2148), source=ENEMY (Enemy1), range=1469, listeners=3
[01:00:26] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=2
[01:00:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(358.76096, 391.0654), shooter_id=1164372348242, bullet_pos=(131.7464, 1129.33)
[01:00:26] [INFO] [Bullet] Using shooter_position, distance=772,3795
[01:00:26] [INFO] [Bullet] Distance to wall: 772,3795 (52,592743% of viewport)
[01:00:26] [INFO] [Bullet] Distance-based penetration chance: 85,30847%
[01:00:26] [INFO] [Bullet] Starting wall penetration at (131.7464, 1129.33)
[01:00:26] [INFO] [Bullet] Raycast backward hit penetrating body at distance 4,3665147
[01:00:26] [INFO] [Bullet] Max penetration distance exceeded: 70,833336 >= 48
[01:00:26] [INFO] [Bullet] Body exited signal received for penetrating body
[01:00:26] [INFO] [Bullet] Exiting penetration at (171.60104, 1193.846) after traveling 70,833336 pixels through wall
[01:00:26] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[01:00:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(312.84955, 451.27563), shooter_id=1164372348242, bullet_pos=(48.81125, 825.91284)
[01:00:26] [INFO] [Bullet] Using shooter_position, distance=458,33313
[01:00:26] [INFO] [Bullet] Distance to wall: 458,33313 (31,208748% of viewport)
[01:00:26] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:26] [INFO] [LastChance] Threat detected: @Area2D@2606
[01:00:26] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[01:00:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[01:00:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(357.8409, 442.0041), source=ENEMY (Enemy1), range=1469, listeners=3
[01:00:26] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=2
[01:00:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(336.3925, 421.66312), shooter_id=1164372348242, bullet_pos=(236.0937, 1136.7151)
[01:00:26] [INFO] [Bullet] Using shooter_position, distance=722,05206
[01:00:26] [INFO] [Bullet] Distance to wall: 722,05206 (49,165855% of viewport)
[01:00:26] [INFO] [Bullet] Distance-based penetration chance: 89,3065%
[01:00:26] [INFO] [Bullet] Starting wall penetration at (236.0937, 1136.7151)
[01:00:26] [INFO] [Bullet] Raycast backward hit penetrating body at distance 11,3988495
[01:00:26] [INFO] [Bullet] Body exited signal received for penetrating body
[01:00:26] [INFO] [Bullet] Exiting penetration at (260.21185, 1169.1469) after traveling 35,41667 pixels through wall
[01:00:26] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[01:00:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(311.37817, 473.53656), shooter_id=1164372348242, bullet_pos=(36.8208, 786.9521)
[01:00:26] [INFO] [Bullet] Using shooter_position, distance=416,66656
[01:00:26] [INFO] [Bullet] Distance to wall: 416,66656 (28,371593% of viewport)
[01:00:26] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:26] [INFO] [LastChance] Threat detected: Bullet
[01:00:26] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[01:00:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[01:00:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(312.84955, 451.27563), shooter_id=1164372348242, bullet_pos=(204.20938, 1149.7216)
[01:00:27] [INFO] [Bullet] Using shooter_position, distance=706,84467
[01:00:27] [INFO] [Bullet] Distance to wall: 706,84467 (48,130356% of viewport)
[01:00:27] [INFO] [Bullet] Distance-based penetration chance: 90,51459%
[01:00:27] [INFO] [Bullet] Starting wall penetration at (204.20938, 1149.7216)
[01:00:27] [INFO] [Bullet] Raycast backward hit penetrating body at distance 29,015888
[01:00:27] [INFO] [Bullet] Body exited signal received for penetrating body
[01:00:27] [INFO] [Bullet] Exiting penetration at (221.69617, 1186.1594) after traveling 35,416664 pixels through wall
[01:00:27] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[01:00:27] [ENEMY] [Enemy1] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=71.5°, current=139.2°, player=(166,652), corner_timer=0.00
[01:00:27] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
[01:00:27] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
[01:00:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(311.37817, 473.53656), shooter_id=1164372348242, bullet_pos=(339.42392, 1040.186)
[01:00:27] [INFO] [Bullet] Using shooter_position, distance=567,3431
[01:00:27] [INFO] [Bullet] Distance to wall: 567,3431 (38,63143% of viewport)
[01:00:27] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(311.37817, 473.53656), shooter_id=1164372348242, bullet_pos=(223.42224, 1143.7733)
[01:00:27] [INFO] [Bullet] Using shooter_position, distance=675,9834
[01:00:27] [INFO] [Bullet] Distance to wall: 675,9834 (46,028954% of viewport)
[01:00:27] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(311.37817, 473.53656), shooter_id=1164372348242, bullet_pos=(42.97809, 992.76184)
[01:00:27] [INFO] [Bullet] Using shooter_position, distance=584,4942
[01:00:27] [INFO] [Bullet] Distance to wall: 584,4942 (39,799286% of viewport)
[01:00:27] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:27] [INFO] [Bullet] Starting wall penetration at (42.97809, 992.76184)
[01:00:27] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[01:00:27] [INFO] [Bullet] Exiting penetration at (19.520391, 973.1303) after traveling 25,588541 pixels through wall
[01:00:27] [INFO] [Bullet] Damage multiplier after penetration: 0,1125
[01:00:27] [INFO] [ReplayManager] Recording frame 480 (8,0s): player_valid=True, enemies=5
[01:00:28] [ENEMY] [Enemy1] ROT_CHANGE: P4:velocity -> P1:visible, state=SUPPRESSED, target=148.6°, current=125.0°, player=(254,564), corner_timer=0.00
[01:00:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(374.3869, 491.5826), source=ENEMY (Enemy1), range=1469, listeners=3
[01:00:28] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=2
[01:00:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(317.88965, 528.8547), shooter_id=1164372348242, bullet_pos=(317.88965, 528.8547)
[01:00:28] [INFO] [Bullet] Using shooter_position, distance=0
[01:00:28] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[01:00:28] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[01:00:28] [INFO] [Bullet] Starting wall penetration at (317.88965, 528.8547)
[01:00:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(231.2352, 560.2068), source=PLAYER (MakarovPM), range=1469, listeners=3
[01:00:28] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=2
[01:00:28] [INFO] [Bullet] Raycast backward hit penetrating body at distance 24,456808
[01:00:28] [INFO] [Bullet] Body exited signal received for penetrating body
[01:00:28] [INFO] [Bullet] Exiting penetration at (280.30048, 556.51025) after traveling 41,666668 pixels through wall
[01:00:28] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[01:00:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(374.3869, 491.5826), source=ENEMY (Enemy1), range=1469, listeners=3
[01:00:28] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=2
[01:00:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(231.2352, 560.2068), shooter_id=1166603718103, bullet_pos=(309.3372, 529.2864)
[01:00:28] [INFO] [Bullet] Using shooter_position, distance=83.9999847412109
[01:00:28] [INFO] [Bullet] Distance to wall: 83.9999847412109 (5.71971342338085% of viewport)
[01:00:28] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:28] [INFO] [Bullet] Caliber cannot penetrate walls
[01:00:28] [INFO] [LastChance] Threat detected: Bullet
[01:00:28] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[01:00:28] [INFO] [LastChance] Cannot trigger effect - conditions not met
[01:00:28] [INFO] [ReplayManager] Recording frame 540 (9,0s): player_valid=True, enemies=5
[01:00:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(374.3869, 491.5826), source=ENEMY (Enemy1), range=1469, listeners=3
[01:00:28] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=2
[01:00:28] [INFO] [LastChance] Threat detected: @Area2D@2624
[01:00:28] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[01:00:28] [INFO] [LastChance] Cannot trigger effect - conditions not met
[01:00:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(195.6102, 526.7096), source=PLAYER (MakarovPM), range=1469, listeners=3
[01:00:28] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=2
[01:00:28] [INFO] [Player] Spawning blood effect at (191.72112, 516.8205), dir=(1, 0), lethal=False (C#)
[01:00:28] [INFO] [ImpactEffects] spawn_blood_effect called at (191.7211, 516.8205), dir=(1, 0), lethal=false
[01:00:28] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[01:00:28] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[01:00:28] [INFO] [ImpactEffects] Blood effect spawned at (191.7211, 516.8205) (scale=1)
[01:00:28] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[01:00:28] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[01:00:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(374.3869, 491.5826), source=ENEMY (Enemy1), range=1469, listeners=3
[01:00:28] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=2
[01:00:28] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(312.8739, 522.6539), shooter_id=1164372348242, bullet_pos=(17.163918, 676.4937)
[01:00:28] [INFO] [Bullet] Using shooter_position, distance=333,3333
[01:00:28] [INFO] [Bullet] Distance to wall: 333,3333 (22,697279% of viewport)
[01:00:28] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:28] [INFO] [LastChance] Threat detected: @Area2D@2629
[01:00:28] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[01:00:28] [INFO] [LastChance] Cannot trigger effect - conditions not met
[01:00:28] [ENEMY] [Enemy1] State: SUPPRESSED -> SEEKING_COVER
[01:00:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(374.3869, 491.5826), source=ENEMY (Enemy1), range=1469, listeners=3
[01:00:28] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=2
[01:00:28] [INFO] [LastChance] Threat detected: @Area2D@2635
[01:00:28] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[01:00:28] [INFO] [LastChance] Cannot trigger effect - conditions not met
[01:00:28] [INFO] [Player] Spawning blood effect at (176.16478, 501.2641), dir=(1, 0), lethal=False (C#)
[01:00:28] [INFO] [ImpactEffects] spawn_blood_effect called at (176.1648, 501.2641), dir=(1, 0), lethal=false
[01:00:28] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[01:00:28] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[01:00:28] [INFO] [ImpactEffects] Blood effect spawned at (176.1648, 501.2641) (scale=1)
[01:00:28] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[01:00:28] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[01:00:29] [ENEMY] [Enemy1] Hit: dmg=1, hp=2/2->1/2
[01:00:29] [INFO] [ImpactEffects] spawn_blood_effect called at (374.3869, 491.5826), dir=(0.96484, -0.262839), lethal=false
[01:00:29] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[01:00:29] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[01:00:29] [INFO] [ImpactEffects] Blood effect spawned at (374.3869, 491.5826) (scale=0.5)
[01:00:29] [INFO] [FlashbangStatus] Status: STUNNED applied
[01:00:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(160.6084, 491.7077), source=PLAYER (MakarovPM), range=1469, listeners=3
[01:00:29] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=1
[01:00:29] [INFO] [ScoreManager] Combo ended at 2. Max combo: 2
[01:00:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(307.4244, 505.54608), shooter_id=1164372348242, bullet_pos=(17.10611, 533.55927)
[01:00:29] [INFO] [Bullet] Using shooter_position, distance=291,6667
[01:00:29] [INFO] [Bullet] Distance to wall: 291,6667 (19,86012% of viewport)
[01:00:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:29] [INFO] [Bullet] Starting wall penetration at (17.10611, 533.55927)
[01:00:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 45,55542
[01:00:29] [INFO] [Bullet] Body exited signal received for penetrating body
[01:00:29] [INFO] [Bullet] Exiting penetration at (-29.34482, 538.0414) after traveling 41,666668 pixels through wall
[01:00:29] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[01:00:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(312.8739, 522.6539), shooter_id=1164372348242, bullet_pos=(361.81268, 933.6267)
[01:00:29] [INFO] [Bullet] Using shooter_position, distance=413,8764
[01:00:29] [INFO] [Bullet] Distance to wall: 413,8764 (28,181606% of viewport)
[01:00:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:29] [INFO] [FlashbangStatus] Status: STUNNED removed
[01:00:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(374.3869, 491.5826), source=ENEMY (Enemy1), range=1469, listeners=3
[01:00:29] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=2
[01:00:29] [INFO] [LastChance] Threat detected: @Area2D@2656
[01:00:29] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[01:00:29] [INFO] [LastChance] Cannot trigger effect - conditions not met
[01:00:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(130.2261, 454.7925), source=PLAYER (MakarovPM), range=1469, listeners=3
[01:00:29] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=1
[01:00:29] [ENEMY] [Enemy1] Hit: dmg=1, hp=1/2->0/2
[01:00:29] [INFO] [ImpactEffects] spawn_blood_effect called at (374.3869, 491.5826), dir=(0.996614, -0.082226), lethal=true
[01:00:29] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[01:00:29] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[01:00:29] [INFO] [ImpactEffects] Blood effect spawned at (374.3869, 491.5826) (scale=0.75)
[01:00:29] [ENEMY] [Enemy1] Enemy died (ricochet: false, penetration: false)
[01:00:29] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[01:00:29] [INFO] [SoundPropagation] Unregistered listener: Enemy1 (remaining: 2)
[01:00:29] [INFO] [DeathAnim] Started - Angle: -4.7 deg, Index: 11
[01:00:29] [ENEMY] [Enemy1] Death animation started with hit direction: (0.996614, -0.082226)
[01:00:29] [INFO] [FlashbangStatus] Status: STUNNED applied
[01:00:29] [INFO] [BloodDecal] Blood puddle created at (251.9372, 554.0306) (added to group)
[01:00:29] [INFO] [BloodDecal] Blood puddle created at (267.7153, 513.8616) (added to group)
[01:00:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(304.9991, 491.72733), shooter_id=1164372348242, bullet_pos=(15.433693, 456.7801)
[01:00:29] [INFO] [Bullet] Using shooter_position, distance=291,6667
[01:00:29] [INFO] [Bullet] Distance to wall: 291,6667 (19,86012% of viewport)
[01:00:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:29] [INFO] [Bullet] Starting wall penetration at (15.433693, 456.7801)
[01:00:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 47,237087
[01:00:29] [INFO] [BloodDecal] Blood puddle created at (251.4488, 497.5966) (added to group)
[01:00:29] [INFO] [BloodDecal] Blood puddle created at (260.1732, 517.6935) (added to group)
[01:00:29] [INFO] [BloodDecal] Blood puddle created at (424.6711, 505.6868) (added to group)
[01:00:29] [INFO] [Bullet] Body exited signal received for penetrating body
[01:00:29] [INFO] [Bullet] Exiting penetration at (-30.896778, 451.18854) after traveling 41,66667 pixels through wall
[01:00:29] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[01:00:29] [INFO] [FlashbangStatus] Status: STUNNED removed
[01:00:29] [INFO] [BloodDecal] Blood puddle created at (301.1145, 519.22) (added to group)
[01:00:29] [INFO] [BloodDecal] Blood puddle created at (257.0319, 547.522) (added to group)
[01:00:29] [INFO] [BloodDecal] Blood puddle created at (240.6851, 558.2483) (added to group)
[01:00:29] [INFO] [BloodDecal] Blood puddle created at (455.4127, 514.1535) (added to group)
[01:00:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(312.8739, 522.6539), shooter_id=1164372348242, bullet_pos=(40.835907, 1110.0156)
[01:00:29] [INFO] [Bullet] Using shooter_position, distance=647,30096
[01:00:29] [INFO] [Bullet] Distance to wall: 647,30096 (44,075916% of viewport)
[01:00:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(312.8739, 522.6539), shooter_id=1164372348242, bullet_pos=(67.89467, 1124.2803)
[01:00:29] [INFO] [Bullet] Using shooter_position, distance=649,59155
[01:00:29] [INFO] [Bullet] Distance to wall: 649,59155 (44,231884% of viewport)
[01:00:29] [INFO] [BloodDecal] Blood puddle created at (473.0446, 503.4962) (added to group)
[01:00:29] [INFO] [BloodDecal] Blood puddle created at (432.8296, 513.3336) (added to group)
[01:00:29] [INFO] [BloodDecal] Blood puddle created at (269.7543, 555.9088) (added to group)
[01:00:29] [INFO] [BloodDecal] Blood puddle created at (320.4327, 582.3875) (added to group)
[01:00:29] [INFO] [BloodDecal] Blood puddle created at (283.4013, 500.3468) (added to group)
[01:00:29] [INFO] [BloodDecal] Blood puddle created at (330.4609, 505.8843) (added to group)
[01:00:29] [INFO] [BloodDecal] Blood puddle created at (329.7217, 608.2089) (added to group)
[01:00:29] [INFO] [BloodDecal] Blood puddle created at (472.5232, 489.8498) (added to group)
[01:00:29] [INFO] [BloodDecal] Blood puddle created at (419.8391, 510.937) (added to group)
[01:00:29] [INFO] [BloodDecal] Blood puddle created at (351.7927, 520.6527) (added to group)
[01:00:29] [INFO] [BloodDecal] Blood puddle created at (314.0269, 625.774) (added to group)
[01:00:29] [INFO] [BloodDecal] Blood puddle created at (452.8101, 507.1087) (added to group)
[01:00:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(312.8739, 522.6539), shooter_id=1164372348242, bullet_pos=(334.16943, 1015.1936)
[01:00:29] [INFO] [Bullet] Using shooter_position, distance=492,99988
[01:00:29] [INFO] [Bullet] Distance to wall: 492,99988 (33,56927% of viewport)
[01:00:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:29] [INFO] [BloodDecal] Blood puddle created at (529.9041, 474.5128) (added to group)
[01:00:29] [INFO] [BloodDecal] Blood puddle created at (522.9351, 472.4132) (added to group)
[01:00:29] [INFO] [BloodDecal] Blood puddle created at (481.8844, 493.0916) (added to group)
[01:00:29] [INFO] [BloodDecal] Blood puddle created at (495.2469, 522.4976) (added to group)
[01:00:29] [ENEMY] [Enemy1] Ragdoll activated
[01:00:29] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[01:00:29] [INFO] [BloodDecal] Blood puddle created at (544.8907, 518.0876) (added to group)
[01:00:29] [INFO] [BloodDecal] Blood puddle created at (547.6599, 489.9479) (added to group)
[01:00:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(130.2261, 454.7925), shooter_id=1166603718103, bullet_pos=(745.7606, 407.7046)
[01:00:29] [INFO] [Bullet] Using shooter_position, distance=617.3330078125
[01:00:29] [INFO] [Bullet] Distance to wall: 617.3330078125 (42.0353396772573% of viewport)
[01:00:29] [INFO] [Bullet] Distance-based penetration chance: 97.6254370431998%
[01:00:29] [INFO] [Bullet] Caliber cannot penetrate walls
[01:00:29] [INFO] [ReplayManager] Recording frame 600 (10,0s): player_valid=True, enemies=5
[01:00:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(312.8739, 522.6539), shooter_id=1164372348242, bullet_pos=(42.366905, 942.1593)
[01:00:29] [INFO] [Bullet] Using shooter_position, distance=499,15814
[01:00:29] [INFO] [Bullet] Distance to wall: 499,15814 (33,988598% of viewport)
[01:00:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:29] [INFO] [Bullet] Starting wall penetration at (42.366905, 942.1593)
[01:00:29] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[01:00:29] [INFO] [Bullet] Exiting penetration at (19.582008, 936.45654) after traveling 18,487722 pixels through wall
[01:00:29] [INFO] [Bullet] Damage multiplier after penetration: 0,028125
[01:00:30] [ENEMY] [Enemy1] Death animation completed
[01:00:30] [INFO] [ReplayManager] Recording frame 660 (11,0s): player_valid=True, enemies=5
[01:00:31] [INFO] [ReplayManager] Recording frame 720 (12,0s): player_valid=True, enemies=5
[01:00:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(861.3803, 628.3182), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:32] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=2
[01:00:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(874.0364, 648.5635), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:32] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=2
[01:00:32] [INFO] [ReplayManager] Recording frame 780 (13,0s): player_valid=True, enemies=5
[01:00:32] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(867.306, 651.6998), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:32] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=2
[01:00:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(845.8027, 633.2454), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:33] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=2
[01:00:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(834.3419, 595.0947), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:33] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=2
[01:00:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(867.306, 651.6998), shooter_id=1166603718103, bullet_pos=(1205.382, 469.5989)
[01:00:33] [INFO] [Bullet] Using shooter_position, distance=384.000579833984
[01:00:33] [INFO] [Bullet] Distance to wall: 384.000579833984 (26.1473055956987% of viewport)
[01:00:33] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:33] [INFO] [Bullet] Caliber cannot penetrate walls
[01:00:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(845.8027, 633.2454), shooter_id=1166603718103, bullet_pos=(1200.417, 485.9196)
[01:00:33] [INFO] [Bullet] Using shooter_position, distance=384.000030517578
[01:00:33] [INFO] [Bullet] Distance to wall: 384.000030517578 (26.1472681917345% of viewport)
[01:00:33] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:33] [INFO] [Bullet] Caliber cannot penetrate walls
[01:00:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(861.3803, 628.3182), shooter_id=1166603718103, bullet_pos=(1797.396, 49.2309)
[01:00:33] [INFO] [Bullet] Using shooter_position, distance=1100.66662597656
[01:00:33] [INFO] [Bullet] Distance to wall: 1100.66662597656 (74.9464145102022% of viewport)
[01:00:33] [INFO] [Bullet] Distance-based penetration chance: 59.2291830714308%
[01:00:33] [INFO] [Bullet] Penetration failed (distance roll)
[01:00:33] [INFO] [ReplayManager] Recording frame 840 (14,0s): player_valid=True, enemies=5
[01:00:33] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(874.0364, 648.5635), shooter_id=1166603718103, bullet_pos=(1856.761, 49.99664)
[01:00:33] [INFO] [Bullet] Using shooter_position, distance=1150.66540527344
[01:00:33] [INFO] [Bullet] Distance to wall: 1150.66540527344 (78.3509233321745% of viewport)
[01:00:33] [INFO] [Bullet] Distance-based penetration chance: 55.2572561124631%
[01:00:33] [INFO] [Bullet] Caliber cannot penetrate walls
[01:00:34] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[01:00:34] [ENEMY] [Enemy4] Player reloading: false -> true
[01:00:34] [ENEMY] [Enemy5] Player reloading: false -> true
[01:00:34] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(635.3751, 505.1883), source=PLAYER (Player), range=900, listeners=2
[01:00:34] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=0, below_threshold=1
[01:00:34] [INFO] [ScoreManager] Combo ended at 1. Max combo: 2
[01:00:34] [ENEMY] [Enemy4] Player vulnerable (reloading) but cannot attack: close=false (dist=1025), can_see=false
[01:00:34] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=889), can_see=false
[01:00:34] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[01:00:34] [ENEMY] [Enemy4] Player reloading: true -> false
[01:00:34] [ENEMY] [Enemy5] Player reloading: true -> false
[01:00:34] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[01:00:34] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(834.3419, 595.0947), shooter_id=1166603718103, bullet_pos=(1969.494, 155.4074)
[01:00:34] [INFO] [Bullet] Using shooter_position, distance=1217.33129882813
[01:00:34] [INFO] [Bullet] Distance to wall: 1217.33129882813 (82.8903266120819% of viewport)
[01:00:34] [INFO] [Bullet] Distance-based penetration chance: 49.9612856192378%
[01:00:34] [INFO] [Bullet] Caliber cannot penetrate walls
[01:00:34] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[01:00:34] [INFO] [ReplayManager] Recording frame 900 (15,0s): player_valid=True, enemies=5
[01:00:35] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[01:00:35] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[01:00:35] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[01:00:35] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[01:00:35] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[01:00:35] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[01:00:35] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[01:00:35] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[01:00:35] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[01:00:35] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[01:00:35] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[01:00:35] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[01:00:35] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[01:00:35] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[01:00:35] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[01:00:35] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[01:00:35] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[01:00:35] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[01:00:35] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[01:00:35] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[01:00:35] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[01:00:35] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[01:00:35] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[01:00:35] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[01:00:35] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[01:00:35] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[01:00:35] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[01:00:35] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[01:00:35] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[01:00:35] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[01:00:35] [INFO] [ReplayManager] Recording frame 960 (16,0s): player_valid=True, enemies=5
[01:00:36] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[01:00:36] [INFO] [EnemyGrenade] Unsafe throw distance (200 < 275 safe distance, blast=225, margin=50) - skipping throw
[01:00:36] [INFO] [ReplayManager] Recording frame 1020 (17,0s): player_valid=True, enemies=5
[01:00:37] [INFO] [ReplayManager] Recording frame 1080 (18,0s): player_valid=True, enemies=5
[01:00:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(910.965, 571.3445), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:38] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=2
[01:00:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(872.1814, 552.3156), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:38] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=2
[01:00:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(825.2227, 546.5812), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:38] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=2
[01:00:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(872.1814, 552.3156), shooter_id=1166603718103, bullet_pos=(1049.713, 458.776)
[01:00:38] [INFO] [Bullet] Using shooter_position, distance=200.666793823242
[01:00:38] [INFO] [Bullet] Distance to wall: 200.666793823242 (13.6637709851214% of viewport)
[01:00:38] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:38] [INFO] [Bullet] Caliber cannot penetrate walls
[01:00:38] [INFO] [ReplayManager] Recording frame 1140 (19,0s): player_valid=True, enemies=5
[01:00:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(781.8458, 531.7991), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:38] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=2
[01:00:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(825.2227, 546.5812), shooter_id=1166603718103, bullet_pos=(1046.252, 428.3449)
[01:00:38] [INFO] [Bullet] Using shooter_position, distance=250.666687011719
[01:00:38] [INFO] [Bullet] Distance to wall: 250.666687011719 (17.0683556540211% of viewport)
[01:00:38] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:38] [INFO] [Bullet] Caliber cannot penetrate walls
[01:00:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(735.1522, 525.024), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:39] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=2
[01:00:39] [ENEMY] [Enemy5] Hit: dmg=1, hp=2/2->1/2
[01:00:39] [INFO] [ImpactEffects] spawn_blood_effect called at (1500, 300), dir=(0.901271, -0.433257), lethal=false
[01:00:39] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[01:00:39] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[01:00:39] [INFO] [ImpactEffects] Blood effect spawned at (1500, 300) (scale=0.5)
[01:00:39] [INFO] [FlashbangStatus] Status: STUNNED applied
[01:00:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(781.8458, 531.7991), shooter_id=1166603718103, bullet_pos=(1044.659, 424.1644)
[01:00:39] [INFO] [Bullet] Using shooter_position, distance=283.999633789063
[01:00:39] [INFO] [Bullet] Distance to wall: 283.999633789063 (19.3380572939748% of viewport)
[01:00:39] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:39] [INFO] [Bullet] Caliber cannot penetrate walls
[01:00:39] [INFO] [FlashbangStatus] Status: STUNNED removed
[01:00:39] [INFO] [BloodDecal] Blood puddle created at (1554.907, 277.8215) (added to group)
[01:00:39] [INFO] [BloodDecal] Blood puddle created at (1542.39, 307.1904) (added to group)
[01:00:39] [INFO] [BloodDecal] Blood puddle created at (1544.177, 307.2896) (added to group)
[01:00:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(735.1522, 525.024), shooter_id=1166603718103, bullet_pos=(1039.579, 387.619)
[01:00:39] [INFO] [Bullet] Using shooter_position, distance=333.999938964844
[01:00:39] [INFO] [Bullet] Distance to wall: 333.999938964844 (22.7426700158477% of viewport)
[01:00:39] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:39] [INFO] [Bullet] Caliber cannot penetrate walls
[01:00:39] [INFO] [BloodDecal] Blood puddle created at (1587.548, 317.5557) (added to group)
[01:00:39] [INFO] [BloodDecal] Blood puddle created at (1615.663, 287.2001) (added to group)
[01:00:39] [INFO] [BloodDecal] Blood puddle created at (1611.678, 273.5463) (added to group)
[01:00:39] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[01:00:39] [INFO] [GrenadeBase] Grenade created at (1461.608, 311.2278) (frozen)
[01:00:39] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[01:00:39] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[01:00:39] [INFO] [GrenadeTimerHelper] Attached GrenadeTimer to FragGrenade (type: Frag)
[01:00:39] [INFO] [EnemyGrenade] Attached C# GrenadeTimer to grenade (type: Frag)
[01:00:39] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[01:00:39] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[01:00:39] [INFO] [GrenadeBase] LEGACY throw_grenade() called! Direction: (-0.959797, 0.280696), Speed: 1186.5 (unfrozen)
[01:00:39] [INFO] [GrenadeBase] NOTE: Using DRAG-BASED system. If velocity-based is expected, ensure grenade has throw_grenade_velocity_based() method.
[01:00:39] [INFO] [FragGrenade] Grenade thrown (legacy) - impact detection enabled
[01:00:39] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[01:00:39] [INFO] [EnemyGrenade] Enemy grenade thrown! Target: (918.5826, 448.1682), Distance: 600
[01:00:39] [INFO] [BloodDecal] Blood puddle created at (1600.866, 314.3569) (added to group)
[01:00:39] [INFO] [BloodDecal] Blood puddle created at (1614.938, 336.8608) (added to group)
[01:00:39] [INFO] [BloodDecal] Blood puddle created at (1592.073, 294.3639) (added to group)
[01:00:39] [INFO] [BloodDecal] Blood puddle created at (1618.228, 343.5751) (added to group)
[01:00:39] [INFO] [ReplayManager] Recording frame 1200 (20,0s): player_valid=True, enemies=5
[01:00:39] [INFO] [GrenadeBase] Collision detected with ControlRoom_WallLeft (type: StaticBody2D)
[01:00:39] [INFO] [FragGrenade] Impact detected! Body: ControlRoom_WallLeft (type: StaticBody2D), triggering explosion
[01:00:39] [INFO] [FragGrenade] Impact detected - exploding immediately!
[01:00:39] [INFO] [GrenadeBase] EXPLODED at (1073.934, 427.9748)!
[01:00:39] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(1073.934, 427.9748), source=NEUTRAL (FragGrenade), range=2937, listeners=2
[01:00:39] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=1
[01:00:39] [INFO] [FragGrenade] Spawned shrapnel #1 at angle -12.7 degrees
[01:00:39] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 82.3 degrees
[01:00:39] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 193.5 degrees
[01:00:39] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 282.4 degrees
[01:00:39] [INFO] [ImpactEffects] Spawning explosion visual effect at (1073.934, 427.9748) (radius=225) - using shadow-based wall occlusion
[01:00:39] [INFO] [GrenadeTimer] Impact detected with ControlRoom_WallLeft - EXPLODING!
[01:00:39] [INFO] [GrenadeTimer] EXPLODED at (1073.9343, 427.97482)!
[01:00:39] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[01:00:39] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[01:00:39] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(1073.934, 427.9748), source=NEUTRAL (FragGrenade), range=2938, listeners=2
[01:00:39] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=1
[01:00:39] [INFO] [GrenadeTimer] Spawned PointLight2D frag explosion flash at (1073.9343, 427.97482) (shadow-based wall occlusion)
[01:00:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(836.0129, 627.9312), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:40] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=2
[01:00:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(861.7271, 650.7568), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:40] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=2
[01:00:40] [INFO] [ReplayManager] Recording frame 1260 (21,0s): player_valid=True, enemies=5
[01:00:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(861.0307, 656.5643), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:40] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=2
[01:00:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(838.68, 637.03), source=PLAYER (MakarovPM), range=1469, listeners=2
[01:00:41] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=2
[01:00:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(861.0307, 656.5643), shooter_id=1166603718103, bullet_pos=(1207.904, 491.8363)
[01:00:41] [INFO] [Bullet] Using shooter_position, distance=384.000701904297
[01:00:41] [INFO] [Bullet] Distance to wall: 384.000701904297 (26.1473139076907% of viewport)
[01:00:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:41] [INFO] [Bullet] Caliber cannot penetrate walls
[01:00:41] [ENEMY] [Enemy5] Hit: dmg=1, hp=1/2->0/2
[01:00:41] [INFO] [ImpactEffects] spawn_blood_effect called at (1500, 300), dir=(0.886937, -0.461891), lethal=true
[01:00:41] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[01:00:41] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[01:00:41] [INFO] [ImpactEffects] Blood effect spawned at (1500, 300) (scale=0.75)
[01:00:41] [ENEMY] [Enemy5] Enemy died (ricochet: false, penetration: false)
[01:00:41] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[01:00:41] [ENEMY] [Enemy5] [AllyDeath] Notified 1 enemies
[01:00:41] [INFO] [SoundPropagation] Unregistered listener: Enemy5 (remaining: 1)
[01:00:41] [INFO] [DeathAnim] Started - Angle: -27.5 deg, Index: 10
[01:00:41] [ENEMY] [Enemy5] Death animation started with hit direction: (0.886937, -0.461891)
[01:00:41] [INFO] [FlashbangStatus] Status: STUNNED applied
[01:00:41] [INFO] [FlashbangStatus] Status: STUNNED removed
[01:00:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(838.68, 637.03), shooter_id=1166603718103, bullet_pos=(1206.469, 478.0787)
[01:00:41] [INFO] [Bullet] Using shooter_position, distance=400.667144775391
[01:00:41] [INFO] [Bullet] Distance to wall: 400.667144775391 (27.2821626496696% of viewport)
[01:00:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:41] [INFO] [Bullet] Caliber cannot penetrate walls
[01:00:41] [INFO] [BloodDecal] Blood puddle created at (1571.978, 281.875) (added to group)
[01:00:41] [INFO] [BloodDecal] Blood puddle created at (1561.957, 287.8885) (added to group)
[01:00:41] [INFO] [BloodDecal] Blood puddle created at (1580.484, 311.7555) (added to group)
[01:00:41] [INFO] [BloodDecal] Blood puddle created at (1560.13, 257.4453) (added to group)
[01:00:41] [INFO] [BloodDecal] Blood puddle created at (1581.068, 314.3775) (added to group)
[01:00:41] [INFO] [BloodDecal] Blood puddle created at (1612.262, 309.2161) (added to group)
[01:00:41] [INFO] [BloodDecal] Blood puddle created at (1570.026, 263.057) (added to group)
[01:00:41] [INFO] [BloodDecal] Blood puddle created at (1564.148, 292.1259) (added to group)
[01:00:41] [ENEMY] [Enemy5] Ragdoll activated
[01:00:41] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[01:00:41] [INFO] [BloodDecal] Blood puddle created at (1636.265, 277.7538) (added to group)
[01:00:41] [INFO] [BloodDecal] Blood puddle created at (1596.843, 223.5249) (added to group)
[01:00:41] [INFO] [BloodDecal] Blood puddle created at (1578.704, 346.1813) (added to group)
[01:00:41] [INFO] [BloodDecal] Blood puddle created at (1673.091, 342.0169) (added to group)
[01:00:41] [INFO] [BloodDecal] Blood puddle created at (1626.322, 243.9855) (added to group)
[01:00:41] [INFO] [BloodDecal] Blood puddle created at (1626.311, 314.6879) (added to group)
[01:00:41] [INFO] [BloodDecal] Blood puddle created at (1592.396, 275.5235) (added to group)
[01:00:41] [INFO] [BloodDecal] Blood puddle created at (1602.811, 340.7299) (added to group)
[01:00:41] [INFO] [ReplayManager] Recording frame 1320 (22,0s): player_valid=True, enemies=5
[01:00:41] [INFO] [BloodDecal] Blood puddle created at (1652.829, 267.5574) (added to group)
[01:00:41] [INFO] [BloodDecal] Blood puddle created at (1666.308, 324.4874) (added to group)
[01:00:41] [INFO] [BloodDecal] Blood puddle created at (1637.198, 262.7982) (added to group)
[01:00:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(861.7271, 650.7568), shooter_id=1166603718103, bullet_pos=(1936.545, 44.51812)
[01:00:41] [INFO] [Bullet] Using shooter_position, distance=1234.00134277344
[01:00:41] [INFO] [Bullet] Distance to wall: 1234.00134277344 (84.0254205578261% of viewport)
[01:00:41] [INFO] [Bullet] Distance-based penetration chance: 48.6370093492029%
[01:00:41] [INFO] [Bullet] Penetration failed (distance roll)
[01:00:41] [INFO] [BloodDecal] Blood puddle created at (1681.574, 398.238) (added to group)
[01:00:42] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[01:00:42] [ENEMY] [Enemy4] Player reloading: false -> true
[01:00:42] [ENEMY] [Enemy5] Player reloading: false -> true
[01:00:42] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(580.8283, 504.907), source=PLAYER (Player), range=900, listeners=1
[01:00:42] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=0, below_threshold=0
[01:00:42] [ENEMY] [Enemy4] Player vulnerable (reloading) but cannot attack: close=false (dist=1079), can_see=false
[01:00:42] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[01:00:42] [ENEMY] [Enemy4] Player reloading: true -> false
[01:00:42] [ENEMY] [Enemy5] Player reloading: true -> false
[01:00:42] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[01:00:42] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[01:00:42] [INFO] [ReplayManager] Recording frame 1380 (23,0s): player_valid=True, enemies=5
[01:00:42] [ENEMY] [Enemy5] Death animation completed
[01:00:43] [INFO] [ReplayManager] Recording frame 1440 (24,0s): player_valid=True, enemies=5
[01:00:44] [INFO] [ReplayManager] Recording frame 1500 (25,0s): player_valid=True, enemies=5
[01:00:45] [INFO] [ReplayManager] Recording frame 1560 (26,0s): player_valid=True, enemies=5
[01:00:46] [INFO] [ScoreManager] Combo ended at 1. Max combo: 2
[01:00:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1470.152, 575.6862), source=PLAYER (MakarovPM), range=1469, listeners=1
[01:00:46] [ENEMY] [Enemy4] Heard gunshot at (1470.152, 575.6862), source_type=0, intensity=0.07, distance=195
[01:00:46] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=0
[01:00:46] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-155.9°, current=-45.0°, player=(1470,569), corner_timer=0.00
[01:00:46] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=-151.9°, current=-128.1°, player=(1463,550), corner_timer=0.00
[01:00:46] [INFO] [ReplayManager] Recording frame 1620 (27,0s): player_valid=True, enemies=5
[01:00:46] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=-149.6°, current=159.3°, player=(1452,533), corner_timer=0.00
[01:00:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1448.764, 536.2998), source=PLAYER (MakarovPM), range=1469, listeners=1
[01:00:46] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=0
[01:00:46] [ENEMY] [Enemy4] Hit: dmg=1, hp=1/1->0/1
[01:00:46] [INFO] [ImpactEffects] spawn_blood_effect called at (1650, 650), dir=(0.962223, 0.272263), lethal=true
[01:00:46] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[01:00:46] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[01:00:46] [INFO] [ImpactEffects] Wall found for blood splatter at (1680, 658.4886) (dist=31 px)
[01:00:46] [INFO] [BloodDecal] Blood puddle created at (1679, 658.4886) (added to group)
[01:00:46] [INFO] [ImpactEffects] Blood effect spawned at (1650, 650) (scale=0.75)
[01:00:46] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
[01:00:46] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[01:00:46] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 0)
[01:00:46] [INFO] [DeathAnim] Started - Angle: 15.8 deg, Index: 13
[01:00:46] [ENEMY] [Enemy4] Death animation started with hit direction: (0.962223, 0.272263)
[01:00:46] [INFO] [FlashbangStatus] Status: STUNNED applied
[01:00:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1448.764, 536.2998), shooter_id=1166603718103, bullet_pos=(1497.781, 549.124)
[01:00:46] [INFO] [Bullet] Using shooter_position, distance=50.6665573120117
[01:00:46] [INFO] [Bullet] Distance to wall: 50.6665573120117 (3.44997905495847% of viewport)
[01:00:46] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[01:00:46] [INFO] [Bullet] Caliber cannot penetrate walls
[01:00:46] [INFO] [FlashbangStatus] Status: STUNNED removed
[01:00:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1413.008, 517.9716), source=PLAYER (MakarovPM), range=1469, listeners=0
[01:00:47] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=0
[01:00:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1413.008, 517.9716), shooter_id=1166603718103, bullet_pos=(1511.166, 540.3068)
[01:00:47] [INFO] [Bullet] Using shooter_position, distance=100.666526794434
[01:00:47] [INFO] [Bullet] Distance to wall: 100.666526794434 (6.85456891885323% of viewport)
[01:00:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:47] [INFO] [Bullet] Caliber cannot penetrate walls
[01:00:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1376.663, 526.1047), source=PLAYER (MakarovPM), range=1469, listeners=0
[01:00:47] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=0
[01:00:47] [INFO] [BloodDecal] Blood puddle created at (1755.865, 743.2242) (added to group)
[01:00:47] [INFO] [BloodDecal] Blood puddle created at (1757.511, 745.8208) (added to group)
[01:00:47] [INFO] [BloodDecal] Blood puddle created at (1697.43, 721.2114) (added to group)
[01:00:47] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1376.663, 526.1047), shooter_id=1166603718103, bullet_pos=(1508.136, 552.009)
[01:00:47] [INFO] [Bullet] Using shooter_position, distance=134.000106811523
[01:00:47] [INFO] [Bullet] Distance to wall: 134.000106811523 (9.12431367726566% of viewport)
[01:00:47] [INFO] [Bullet] Within ricochet range - trying ricochet first
[01:00:47] [INFO] [Bullet] Caliber cannot penetrate walls
[01:00:47] [INFO] [BloodDecal] Blood puddle created at (1724.398, 727.4498) (added to group)
[01:00:47] [ENEMY] [Enemy4] Ragdoll activated
[01:00:47] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[01:00:47] [INFO] [BloodDecal] Blood puddle created at (1747.094, 760.5531) (added to group)
[01:00:47] [INFO] [BloodDecal] Blood puddle created at (1728.387, 739.5372) (added to group)
[01:00:47] [INFO] [BloodDecal] Blood puddle created at (1790.691, 756.4516) (added to group)
[01:00:47] [INFO] [BloodDecal] Blood puddle created at (1752.616, 725.9697) (added to group)
[01:00:47] [INFO] [ReplayManager] Recording frame 1680 (28,0s): player_valid=True, enemies=5
[01:00:48] [ENEMY] [Enemy4] Death animation completed
[01:00:48] [INFO] [ReplayManager] Recording frame 1740 (29,0s): player_valid=True, enemies=5
[01:00:49] [INFO] [ReplayManager] Recording frame 1800 (30,0s): player_valid=True, enemies=5
[01:00:50] [INFO] [ReplayManager] Recording frame 1860 (31,0s): player_valid=True, enemies=5
[01:00:51] [INFO] [ReplayManager] Recording frame 1920 (32,0s): player_valid=True, enemies=5
[01:00:51] [INFO] [ScoreManager] Combo ended at 1. Max combo: 2
[01:00:52] [INFO] [LabyrinthLevel] Player controls disabled (level completed)
[01:00:52] [INFO] [ReplayManager] === REPLAY RECORDING STOPPED ===
[01:00:52] [INFO] [ReplayManager] Total frames recorded: 1948
[01:00:52] [INFO] [ReplayManager] Total duration: 32,47s
[01:00:52] [INFO] [ReplayManager] Blood decals at end: 111 (baseline at frame 0: 1)
[01:00:52] [INFO] [ReplayManager] Casings at end: 33 (baseline at frame 0: 0)
[01:00:52] [INFO] [ReplayManager] Footprints recorded: 0
[01:00:52] [INFO] [ReplayManager] has_replay() will return: True
[01:00:52] [INFO] [LabyrinthLevel] Replay recording stopped
[01:00:52] [INFO] [LabyrinthLevel] Replay status: has_replay=true, duration=32.47s
[01:00:52] [INFO] [ProgressManager] Progress saved for res://scenes/levels/LabyrinthLevel.tscn on Hard: rank=D, score=8165
[01:00:52] [INFO] [ScoreManager] Level completed! Final score: 8165, Rank: D
[01:00:58] [INFO] [LabyrinthLevel] Watch Replay button created (replay data available)
[01:01:06] [INFO] [LabyrinthLevel] Level Select button pressed
[01:01:07] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[01:01:07] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[01:01:07] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[01:01:07] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[01:01:07] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[01:01:07] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[01:01:07] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[01:01:07] [INFO] [LastChance] Resetting all effects (scene change detected)
[01:01:07] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[01:01:07] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[01:01:07] [INFO] [FlashbangPlayer] Resetting flashbang player effects (scene change)
[01:01:07] [ENEMY] [Enemy1] Death animation component initialized
[01:01:07] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[01:01:07] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[01:01:07] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[01:01:07] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[01:01:07] [ENEMY] [Enemy2] Death animation component initialized
[01:01:07] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[01:01:07] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[01:01:07] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[01:01:07] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[01:01:07] [INFO] [EnemyGrenade] Initialized: 1 grenades
[01:01:07] [ENEMY] [Enemy3] Death animation component initialized
[01:01:07] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[01:01:07] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[01:01:07] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[01:01:07] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[01:01:07] [ENEMY] [Enemy4] Death animation component initialized
[01:01:07] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[01:01:07] [INFO] [BloodyFeet:Grenadier] Footprint scene loaded
[01:01:07] [INFO] [BloodyFeet:Grenadier] Found EnemyModel for facing direction
[01:01:07] [INFO] [BloodyFeet:Grenadier] BloodyFeetComponent ready on Grenadier
[01:01:07] [INFO] [EnemyGrenade] Grenade bag built (hard): [Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Defensive]
[01:01:07] [INFO] [EnemyGrenade] Grenadier initialized: 8 grenades in bag
[01:01:07] [ENEMY] [Grenadier] Death animation component initialized
[01:01:07] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[01:01:07] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[01:01:07] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[01:01:07] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[01:01:07] [ENEMY] [Enemy6] Death animation component initialized
[01:01:07] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[01:01:07] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[01:01:07] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[01:01:07] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[01:01:07] [ENEMY] [Enemy7] Death animation component initialized
[01:01:07] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[01:01:07] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[01:01:07] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[01:01:07] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[01:01:07] [ENEMY] [Enemy8] Death animation component initialized
[01:01:07] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[01:01:07] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[01:01:07] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[01:01:07] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[01:01:07] [ENEMY] [Enemy9] Death animation component initialized
[01:01:07] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[01:01:07] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[01:01:07] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[01:01:07] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[01:01:07] [ENEMY] [Enemy10] Death animation component initialized
[01:01:07] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[01:01:07] [INFO] [BloodyFeet:Player] Footprint scene loaded
[01:01:07] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[01:01:07] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[01:01:07] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[01:01:07] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[01:01:07] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[01:01:07] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[01:01:07] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[01:01:07] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[01:01:07] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[01:01:07] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[01:01:07] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[01:01:07] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 3/4
[01:01:07] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[01:01:07] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[01:01:07] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[01:01:07] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[01:01:07] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[01:01:07] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[01:01:07] [INFO] [BuildingLevel] Child 'Grenadier': script=true, has_died_signal=true
[01:01:07] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[01:01:07] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[01:01:07] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[01:01:07] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[01:01:07] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[01:01:07] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[01:01:07] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[01:01:07] [INFO] [ScoreManager] Level started with 10 enemies
[01:01:07] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[01:01:07] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[01:01:07] [INFO] [ReplayManager] Replay data cleared
[01:01:07] [INFO] [BuildingLevel] Previous replay data cleared
[01:01:07] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[01:01:07] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[01:01:07] [INFO] [ReplayManager] Level: BuildingLevel
[01:01:07] [INFO] [ReplayManager] Player: Player (valid: True)
[01:01:07] [INFO] [ReplayManager] Enemies count: 10
[01:01:07] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[01:01:07] [INFO] [ReplayManager]   Enemy 0: Enemy1
[01:01:07] [INFO] [ReplayManager]   Enemy 1: Enemy2
[01:01:07] [INFO] [ReplayManager]   Enemy 2: Enemy3
[01:01:07] [INFO] [ReplayManager]   Enemy 3: Enemy4
[01:01:07] [INFO] [ReplayManager]   Enemy 4: Grenadier
[01:01:07] [INFO] [ReplayManager]   Enemy 5: Enemy6
[01:01:07] [INFO] [ReplayManager]   Enemy 6: Enemy7
[01:01:07] [INFO] [ReplayManager]   Enemy 7: Enemy8
[01:01:07] [INFO] [ReplayManager]   Enemy 8: Enemy9
[01:01:07] [INFO] [ReplayManager]   Enemy 9: Enemy10
[01:01:07] [INFO] [BuildingLevel] Replay recording started successfully
[01:01:07] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[01:01:07] [INFO] [CinemaEffects] Found player node: Player
[01:01:07] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[01:01:07] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
[01:01:07] [ENEMY] [Enemy1] Registered as sound listener
[01:01:07] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[01:01:07] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[01:01:07] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
[01:01:07] [ENEMY] [Enemy2] Registered as sound listener
[01:01:07] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[01:01:07] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[01:01:07] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
[01:01:07] [ENEMY] [Enemy3] Registered as sound listener
[01:01:07] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[01:01:07] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[01:01:07] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
[01:01:07] [ENEMY] [Enemy4] Registered as sound listener
[01:01:07] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[01:01:07] [INFO] [BloodyFeet:Grenadier] Blood detector created and attached to Grenadier
[01:01:07] [INFO] [SoundPropagation] Registered listener: Grenadier (total: 5)
[01:01:07] [ENEMY] [Grenadier] Registered as sound listener
[01:01:07] [ENEMY] [Grenadier] Spawned at (1700, 350), hp: 2, behavior: GUARD
[01:01:07] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[01:01:07] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
[01:01:07] [ENEMY] [Enemy6] Registered as sound listener
[01:01:07] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[01:01:07] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[01:01:07] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
[01:01:07] [ENEMY] [Enemy7] Registered as sound listener
[01:01:07] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[01:01:07] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[01:01:07] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
[01:01:07] [ENEMY] [Enemy8] Registered as sound listener
[01:01:07] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[01:01:07] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[01:01:07] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
[01:01:07] [ENEMY] [Enemy9] Registered as sound listener
[01:01:07] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[01:01:07] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[01:01:07] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
[01:01:07] [ENEMY] [Enemy10] Registered as sound listener
[01:01:07] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[01:01:07] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[01:01:07] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[01:01:07] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[01:01:07] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[01:01:07] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[01:01:07] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[01:01:07] [ENEMY] [Grenadier] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[01:01:07] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[01:01:07] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[01:01:07] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[01:01:07] [INFO] [Player] Detecting weapon pose (frame 3)...
[01:01:07] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[01:01:07] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[01:01:07] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[01:01:07] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[01:01:07] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[01:01:07] [INFO] [LastChance] Found player: Player
[01:01:07] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[01:01:07] [INFO] [LastChance] Connected to player Damaged signal (C#)
[01:01:07] [INFO] [LastChance] Connected to player Died signal (C#)
[01:01:07] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[01:01:08] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[01:01:09] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[01:01:09] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[01:01:09] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1250), corner_timer=0.30
[01:01:09] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1250), corner_timer=0.30
[01:01:09] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[01:01:10] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[01:01:11] [INFO] [ReplayManager] Recording frame 240 (4,0s): player_valid=True, enemies=10
[01:01:11] [INFO] ------------------------------------------------------------
[01:01:11] [INFO] GAME LOG ENDED: 2026-02-09T01:01:11
[01:01:11] [INFO] ============================================================
