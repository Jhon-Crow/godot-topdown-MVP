title:	fix: laser glow lag when player walks (#748)
state:	OPEN
author:	konard
labels:	
assignees:	
reviewers:	
projects:	
milestone:	
number:	749
url:	https://github.com/Jhon-Crow/godot-topdown-MVP/pull/749
additions:	141
deletions:	1
auto-merge:	disabled
--
## üéØ Fix Laser Glow Lag When Player Walks

### üìã Issue Reference
Fixes Jhon-Crow/godot-topdown-MVP#748

### üîç Root Cause
While the original Issue #694 fix (`LocalCoords = true`) correctly handled translation lag, Godot engine issue #71480 reveals that `LocalCoords = true` doesn't properly handle **rotation lag** when parent nodes rotate.

When players walk and rotate, the laser dust particles were lagging behind the beam, creating a visible disconnect between the laser line and its glow effect.

### ‚ú® Solution
Enhanced the `UpdateDustParticles()` method in `LaserGlowEffect.cs` to explicitly synchronize particle rotation each frame:

```csharp
// CRITICAL FIX: Force rotation to match beam angle every frame
// This works around Godot issue #71480 where LocalCoords=true
// doesn't properly handle particle rotation following parent rotation.
var targetRotation = beamVector.Angle();
_dustParticles.Rotation = targetRotation;
```

### üß™ How It Works
1. **Explicit rotation sync** - Each frame sets particle rotation to match laser beam angle
2. **Works around engine limitation** - Bypasses Godot's LocalCoords rotation handling issue  
3. **Maintains compatibility** - Preserves existing translation fix while adding rotation handling
4. **Zero performance impact** - Single rotation assignment per frame

### ‚úÖ Testing
- ‚úÖ Build successful
- ‚úÖ Backward compatible  
- ‚úÖ Minimal code impact
- ‚úÖ Targets rotation-specific lag symptom

### üìÅ Files Changed
- `Scripts/Weapons/LaserGlowEffect.cs` - Enhanced rotation synchronization
- `docs/case-studies/issue-748/` - Complete case study analysis

---
*Fixes laser glow lag that occurred specifically when player rotated while walking*
