[21:56:15] [INFO] ============================================================
[21:56:15] [INFO] GAME LOG STARTED
[21:56:15] [INFO] ============================================================
[21:56:15] [INFO] Timestamp: 2026-02-03T21:56:15
[21:56:15] [INFO] Log file: I:/Загрузки/godot exe/враги видят гранату/game_log_20260203_215615.txt
[21:56:15] [INFO] Executable: I:/Загрузки/godot exe/враги видят гранату/Godot-Top-Down-Template.exe
[21:56:15] [INFO] OS: Windows
[21:56:15] [INFO] Debug build: false
[21:56:15] [INFO] Engine version: 4.3-stable (official)
[21:56:15] [INFO] Project: Godot Top-Down Template
[21:56:15] [INFO] ------------------------------------------------------------
[21:56:15] [INFO] [GameManager] GameManager ready
[21:56:15] [INFO] [ScoreManager] ScoreManager ready
[21:56:15] [INFO] [SoundPropagation] SoundPropagation autoload initialized
[21:56:15] [INFO] [ImpactEffects] Scenes loaded: DustEffect, BloodEffect, SparksEffect, BloodDecal
[21:56:15] [INFO] [ImpactEffects] ImpactEffectsManager ready - FULL VERSION with blood effects enabled
[21:56:15] [INFO] [ImpactEffects] Starting particle shader warmup (Issue #343 fix)...
[21:56:15] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:56:15] [INFO] [PenultimateHit] Saturation shader loaded successfully
[21:56:15] [INFO] [PenultimateHit] Starting shader warmup (Issue #343 fix)...
[21:56:15] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
[21:56:15] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
[21:56:15] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
[21:56:15] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
[21:56:15] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
[21:56:15] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:56:15] [INFO] [LastChance] Last chance shader loaded successfully
[21:56:15] [INFO] [LastChance] Starting shader warmup (Issue #343 fix)...
[21:56:15] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
[21:56:15] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
[21:56:15] [INFO] [LastChance]   Sepia intensity: 0.70
[21:56:15] [INFO] [LastChance]   Brightness: 0.60
[21:56:15] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
[21:56:15] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
[21:56:15] [INFO] [ExperimentalSettings] ExperimentalSettings initialized - FOV enabled: true, Complex grenade throwing: false
[21:56:15] [INFO] [CinemaEffects] CinemaEffectsManager initializing (v5.2 - overlay approach with enhanced death effects)...
[21:56:15] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[21:56:15] [INFO] [CinemaEffects] Created effects layer at layer 99
[21:56:15] [INFO] [CinemaEffects] Cinema shader loaded successfully (v5.0 - no screen_texture)
[21:56:15] [INFO] [CinemaEffects] Starting cinema shader warmup (Issue #343 fix)...
[21:56:15] [INFO] [CinemaEffects] Cinema film effect initialized (v5.2) - Configuration:
[21:56:15] [INFO] [CinemaEffects]   Approach: Overlay-based (no screen_texture)
[21:56:15] [INFO] [CinemaEffects]   Grain intensity: 0.15
[21:56:15] [INFO] [CinemaEffects]   Warm tint: 0.12 intensity
[21:56:15] [INFO] [CinemaEffects]   Sunny effect: 0.08 intensity
[21:56:15] [INFO] [CinemaEffects]   Vignette: 0.25 intensity
[21:56:15] [INFO] [CinemaEffects]   Film defects: 1.5% probability
[21:56:15] [INFO] [CinemaEffects]   White specks: 0.70 intensity, 4.0% probability
[21:56:15] [INFO] [CinemaEffects]   Death effects: cigarette burn + expanding spots + end of reel (top-right)
[21:56:15] [INFO] [CinemaEffects] Enabling effect after 1 frame(s)...
[21:56:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:15] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[21:56:15] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[21:56:15] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[21:56:15] [ENEMY] [Enemy1] Death animation component initialized
[21:56:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:15] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[21:56:15] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[21:56:15] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[21:56:15] [ENEMY] [Enemy2] Death animation component initialized
[21:56:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:15] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[21:56:15] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[21:56:15] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[21:56:15] [ENEMY] [Enemy3] Death animation component initialized
[21:56:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:15] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[21:56:15] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[21:56:15] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[21:56:15] [ENEMY] [Enemy4] Death animation component initialized
[21:56:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:15] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[21:56:15] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[21:56:15] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[21:56:15] [ENEMY] [Enemy5] Death animation component initialized
[21:56:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:15] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[21:56:15] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[21:56:15] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[21:56:15] [ENEMY] [Enemy6] Death animation component initialized
[21:56:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:15] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[21:56:15] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[21:56:15] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[21:56:15] [ENEMY] [Enemy7] Death animation component initialized
[21:56:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:15] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[21:56:15] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[21:56:15] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[21:56:15] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:56:15] [ENEMY] [Enemy8] Death animation component initialized
[21:56:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:15] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[21:56:15] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[21:56:15] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[21:56:15] [ENEMY] [Enemy9] Death animation component initialized
[21:56:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:15] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[21:56:15] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[21:56:15] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[21:56:15] [ENEMY] [Enemy10] Death animation component initialized
[21:56:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:15] [INFO] [BloodyFeet:Player] Footprint scene loaded
[21:56:15] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[21:56:15] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[21:56:15] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[21:56:15] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:56:15] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:56:15] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:56:15] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:56:15] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:56:15] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[21:56:15] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[21:56:15] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[21:56:15] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:56:15] [INFO] [BloodDecal] Blood puddle created at (640, 360) (added to group)
[21:56:15] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[21:56:15] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[21:56:15] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[21:56:15] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[21:56:15] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[21:56:15] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[21:56:15] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[21:56:15] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[21:56:15] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[21:56:15] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[21:56:15] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[21:56:15] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[21:56:15] [INFO] [ScoreManager] Level started with 10 enemies
[21:56:15] [INFO] [CinemaEffects] Found player node: Player
[21:56:15] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[21:56:15] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[21:56:15] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
[21:56:15] [ENEMY] [Enemy1] Registered as sound listener
[21:56:15] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[21:56:15] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[21:56:15] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
[21:56:15] [ENEMY] [Enemy2] Registered as sound listener
[21:56:15] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[21:56:15] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[21:56:15] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
[21:56:15] [ENEMY] [Enemy3] Registered as sound listener
[21:56:15] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[21:56:15] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[21:56:15] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
[21:56:15] [ENEMY] [Enemy4] Registered as sound listener
[21:56:15] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[21:56:15] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[21:56:15] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
[21:56:15] [ENEMY] [Enemy5] Registered as sound listener
[21:56:15] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[21:56:15] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[21:56:15] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
[21:56:15] [ENEMY] [Enemy6] Registered as sound listener
[21:56:15] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[21:56:15] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[21:56:15] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
[21:56:15] [ENEMY] [Enemy7] Registered as sound listener
[21:56:15] [ENEMY] [Enemy7] Spawned at (1606.114, 893.8859), hp: 2, behavior: PATROL
[21:56:15] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[21:56:15] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
[21:56:15] [ENEMY] [Enemy8] Registered as sound listener
[21:56:15] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[21:56:15] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[21:56:15] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
[21:56:15] [ENEMY] [Enemy9] Registered as sound listener
[21:56:15] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[21:56:15] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[21:56:15] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
[21:56:15] [ENEMY] [Enemy10] Registered as sound listener
[21:56:15] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[21:56:15] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[21:56:15] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:15] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:15] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:15] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:15] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:15] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:15] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=78.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:15] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:15] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:56:15] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:56:15] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:56:15] [INFO] [PenultimateHit] Shader warmup complete in 181 ms
[21:56:15] [INFO] [LastChance] Shader warmup complete in 180 ms
[21:56:15] [INFO] [CinemaEffects] Cinema shader warmup complete in 153 ms
[21:56:15] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:56:15] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:56:15] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:56:15] [INFO] [LastChance] Found player: Player
[21:56:15] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:56:15] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:56:15] [INFO] [LastChance] Connected to player Died signal (C#)
[21:56:15] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[21:56:16] [INFO] [ImpactEffects] Particle shader warmup complete: 5 effects warmed up in 411 ms
[21:56:17] [INFO] [PauseMenu] Armory button pressed
[21:56:17] [INFO] [PauseMenu] Creating new armory menu instance
[21:56:17] [INFO] [PauseMenu] armory_menu_scene resource path: res://scenes/ui/ArmoryMenu.tscn
[21:56:17] [INFO] [PauseMenu] Instance created, class: CanvasLayer, name: ArmoryMenu
[21:56:17] [INFO] [PauseMenu] Script attached: res://scripts/ui/armory_menu.gd
[21:56:17] [INFO] [PauseMenu] back_pressed signal exists on instance
[21:56:17] [INFO] [PauseMenu] back_pressed signal connected
[21:56:17] [INFO] [PauseMenu] Armory menu instance added as child, is_inside_tree: true
[21:56:17] [INFO] [PauseMenu] _populate_weapon_grid method exists
[21:56:19] [INFO] [GrenadeManager] Grenade type changed from Flashbang to Frag Grenade
[21:56:19] [INFO] [GrenadeManager] Restarting level due to grenade type change
[21:56:19] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:56:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:19] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[21:56:19] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[21:56:19] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[21:56:19] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:56:19] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:56:19] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:56:19] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[21:56:19] [ENEMY] [Enemy1] Death animation component initialized
[21:56:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:19] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[21:56:19] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[21:56:19] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[21:56:19] [ENEMY] [Enemy2] Death animation component initialized
[21:56:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:19] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[21:56:19] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[21:56:19] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[21:56:19] [ENEMY] [Enemy3] Death animation component initialized
[21:56:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:19] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[21:56:19] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[21:56:19] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[21:56:19] [ENEMY] [Enemy4] Death animation component initialized
[21:56:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:19] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[21:56:19] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[21:56:19] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[21:56:19] [ENEMY] [Enemy5] Death animation component initialized
[21:56:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:19] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[21:56:19] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[21:56:19] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[21:56:19] [ENEMY] [Enemy6] Death animation component initialized
[21:56:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:19] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[21:56:19] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[21:56:19] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[21:56:19] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:56:19] [ENEMY] [Enemy7] Death animation component initialized
[21:56:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:19] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[21:56:19] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[21:56:19] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[21:56:19] [ENEMY] [Enemy8] Death animation component initialized
[21:56:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:19] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[21:56:19] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[21:56:19] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[21:56:19] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:56:19] [ENEMY] [Enemy9] Death animation component initialized
[21:56:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:19] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[21:56:19] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[21:56:19] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[21:56:19] [ENEMY] [Enemy10] Death animation component initialized
[21:56:19] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:19] [INFO] [BloodyFeet:Player] Footprint scene loaded
[21:56:19] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[21:56:19] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[21:56:19] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[21:56:19] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:56:19] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:56:19] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:56:19] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:56:19] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:56:19] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[21:56:19] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[21:56:19] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[21:56:19] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:56:19] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[21:56:19] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[21:56:19] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[21:56:19] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[21:56:19] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[21:56:19] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[21:56:19] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[21:56:19] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[21:56:19] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[21:56:19] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[21:56:19] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[21:56:19] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[21:56:19] [INFO] [ScoreManager] Level started with 10 enemies
[21:56:19] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[21:56:19] [INFO] [CinemaEffects] Found player node: Player
[21:56:19] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[21:56:19] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[21:56:19] [ENEMY] [Enemy1] Registered as sound listener
[21:56:19] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[21:56:19] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[21:56:19] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[21:56:19] [ENEMY] [Enemy2] Registered as sound listener
[21:56:19] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[21:56:19] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[21:56:19] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[21:56:19] [ENEMY] [Enemy3] Registered as sound listener
[21:56:19] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[21:56:19] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[21:56:19] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[21:56:19] [ENEMY] [Enemy4] Registered as sound listener
[21:56:19] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[21:56:19] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[21:56:19] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[21:56:19] [ENEMY] [Enemy5] Registered as sound listener
[21:56:19] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[21:56:19] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[21:56:19] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[21:56:19] [ENEMY] [Enemy6] Registered as sound listener
[21:56:19] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[21:56:19] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[21:56:19] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[21:56:19] [ENEMY] [Enemy7] Registered as sound listener
[21:56:19] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[21:56:19] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[21:56:19] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[21:56:19] [ENEMY] [Enemy8] Registered as sound listener
[21:56:19] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[21:56:19] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[21:56:19] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[21:56:19] [ENEMY] [Enemy9] Registered as sound listener
[21:56:19] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[21:56:19] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[21:56:19] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[21:56:19] [ENEMY] [Enemy10] Registered as sound listener
[21:56:19] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[21:56:19] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[21:56:19] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:19] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:19] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:19] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:19] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:19] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:19] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:19] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:19] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:56:19] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:56:19] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:56:19] [INFO] [LastChance] Found player: Player
[21:56:19] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:56:19] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:56:19] [INFO] [LastChance] Connected to player Died signal (C#)
[21:56:19] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[21:56:19] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:56:19] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:56:19] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:56:19] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:56:19] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[21:56:19] [INFO] [Player.Grenade] G pressed - starting grab animation
[21:56:19] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:56:19] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (620.12805, 1131.9153)
[21:56:19] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[21:56:19] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[21:56:19] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[21:56:19] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[21:56:19] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1122.1666)
[21:56:19] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[21:56:19] [INFO] [Player.Grenade] Step 1 complete! Drag: (114.89453, -3.3483887)
[21:56:19] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[21:56:19] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[21:56:20] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:56:20] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[21:56:20] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(468,891), corner_timer=0.30
[21:56:20] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(468,891), corner_timer=0.30
[21:56:20] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(483,874), corner_timer=-0.02
[21:56:20] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:56:20] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(483,874), corner_timer=-0.02
[21:56:20] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[21:56:20] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(483,874), corner_timer=0.30
[21:56:20] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(483,874), corner_timer=0.30
[21:56:21] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(483,869), corner_timer=-0.02
[21:56:21] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[21:56:21] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(483,867), corner_timer=0.30
[21:56:21] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(486,781), corner_timer=-0.02
[21:56:21] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[21:56:21] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(488,776), corner_timer=0.30
[21:56:21] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(514,730), corner_timer=-0.02
[21:56:21] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[21:56:21] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(514,730), corner_timer=0.30
[21:56:22] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(514,730), corner_timer=-0.02
[21:56:22] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[21:56:22] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(514,730), corner_timer=0.30
[21:56:22] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:56:22] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(514,730), corner_timer=-0.02
[21:56:22] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[21:56:22] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(514,730), corner_timer=0.30
[21:56:22] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:56:22] [INFO] [Player.Grenade.Simple] Throwing! Target: (1011.4401, 703.22845), Distance: 507,6, Speed: 533,2, Friction: 280,0
[21:56:22] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,05485268
[21:56:23] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.998496, -0.054825), Speed: 533.2 (clamped from 533.2, max: 1186.5)
[21:56:23] [INFO] [FragGrenade] Grenade thrown (simple mode) - impact detection enabled
[21:56:23] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[21:56:23] [INFO] [Player.Grenade.Simple] Grenade thrown!
[21:56:23] [INFO] [Player.Grenade] State reset to IDLE
[21:56:23] [INFO] [Player.Grenade] State reset to IDLE
[21:56:23] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[21:56:23] [INFO] [Player.Grenade] Player rotation restored to 0
[21:56:23] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(514,730), corner_timer=-0.02
[21:56:23] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[21:56:23] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(514,730), corner_timer=0.30
[21:56:23] [INFO] [GrenadeBase] Collision detected with Enemy3 (type: CharacterBody2D)
[21:56:23] [INFO] [FragGrenade] Impact detected! Body: Enemy3 (type: CharacterBody2D), triggering explosion
[21:56:23] [INFO] [FragGrenade] Impact detected - exploding immediately!
[21:56:23] [INFO] [GrenadeBase] EXPLODED at (694.4468, 717.4091)!
[21:56:23] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(694.4468, 717.4091), source=NEUTRAL (FragGrenade), range=2937, listeners=20
[21:56:23] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[21:56:23] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[21:56:23] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/2 -> 1/2
[21:56:23] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[21:56:23] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.167971, 0.985792), lethal=false
[21:56:23] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:56:23] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[21:56:23] [INFO] [ImpactEffects] Wall found for blood splatter at (710.2235, 810) (dist=60 px)
[21:56:23] [INFO] [BloodDecal] Blood puddle created at (710.2235, 809) (added to group)
[21:56:23] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[21:56:23] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 1/2 -> 0/2
[21:56:23] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[21:56:23] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.167971, 0.985792), lethal=true
[21:56:23] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:56:23] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[21:56:23] [INFO] [ImpactEffects] Wall found for blood splatter at (710.2235, 810) (dist=60 px)
[21:56:23] [INFO] [BloodDecal] Blood puddle created at (710.2235, 809) (added to group)
[21:56:23] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1.5)
[21:56:23] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[21:56:23] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[21:56:23] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[21:56:23] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[21:56:23] [INFO] [DeathAnim] Started - Angle: 80.3 deg, Index: 17
[21:56:23] [ENEMY] [Enemy3] Death animation started with hit direction: (0.167971, 0.985792)
[21:56:23] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 33.1
[21:56:23] [INFO] [FragGrenade] Player found in blast radius at distance 180.3
[21:56:23] [INFO] [Player] Spawning blood effect at (514.61304, 730.5081), dir=(-0.9973577, 0.072647035), lethal=False (C#)
[21:56:23] [INFO] [ImpactEffects] spawn_blood_effect called at (514.613, 730.5081), dir=(-0.997358, 0.072647), lethal=false
[21:56:23] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:56:23] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[21:56:23] [INFO] [ImpactEffects] Blood effect spawned at (514.613, 730.5081) (scale=1)
[21:56:23] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[21:56:23] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[21:56:23] [INFO] [PenultimateHit] Starting penultimate hit effect:
[21:56:23] [INFO] [PenultimateHit]   - Time scale: 0.10
[21:56:23] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[21:56:23] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[21:56:23] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[21:56:23] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[21:56:23] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[21:56:23] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[21:56:23] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[21:56:23] [INFO] [Player] Spawning blood effect at (514.61304, 730.5081), dir=(-0.9973577, 0.072647035), lethal=True (C#)
[21:56:23] [INFO] [ImpactEffects] spawn_blood_effect called at (514.613, 730.5081), dir=(-0.997358, 0.072647), lethal=true
[21:56:23] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:56:23] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[21:56:23] [INFO] [ImpactEffects] Blood effect spawned at (514.613, 730.5081) (scale=1.5)
[21:56:23] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[21:56:23] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[21:56:23] [INFO] [CinemaEffects] Player died - triggering death effects
[21:56:23] [INFO] [CinemaEffects] Death effects triggered - starting cigarette burn, expanding spots, and end of reel (top-right)
[21:56:23] [INFO] [PenultimateHit] Player died - ending penultimate effect
[21:56:23] [INFO] [PenultimateHit] Ending penultimate hit effect
[21:56:23] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[21:56:23] [INFO] [PenultimateHit] Called player RefreshHealthVisual (C#)
[21:56:23] [INFO] [LastChance] Player died
[21:56:23] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 180.3
[21:56:23] [INFO] [FragGrenade] Spawned shrapnel #1 at angle -10.6 degrees
[21:56:23] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 74.8 degrees
[21:56:23] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 195.8 degrees
[21:56:23] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 267.5 degrees
[21:56:23] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:56:23] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[21:56:23] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(514,730), corner_timer=-0.02
[21:56:23] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[21:56:23] [INFO] [BloodDecal] Blood puddle created at (712.3044, 803.3782) (added to group)
[21:56:23] [INFO] [BloodDecal] Blood puddle created at (469.8745, 761.5545) (added to group)
[21:56:23] [INFO] [BloodDecal] Blood puddle created at (456.5999, 743.6357) (added to group)
[21:56:23] [INFO] [BloodDecal] Blood puddle created at (476.3311, 735.5417) (added to group)
[21:56:23] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(514,730), corner_timer=0.30
[21:56:23] [INFO] [BloodDecal] Blood puddle created at (703.0845, 805.2161) (added to group)
[21:56:23] [INFO] [BloodDecal] Blood puddle created at (454.6264, 763.7216) (added to group)
[21:56:23] [INFO] [BloodDecal] Blood puddle created at (429.3718, 786.2762) (added to group)
[21:56:23] [INFO] [BloodDecal] Blood puddle created at (442.5551, 734.8535) (added to group)
[21:56:23] [INFO] [BloodDecal] Blood puddle created at (455.248, 763.6237) (added to group)
[21:56:23] [INFO] [BloodDecal] Blood puddle created at (418.9843, 801.9874) (added to group)
[21:56:23] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:56:23] [INFO] [BloodDecal] Blood puddle created at (403.0883, 738.8813) (added to group)
[21:56:23] [INFO] [BloodDecal] Blood puddle created at (422.9005, 763.0107) (added to group)
[21:56:23] [INFO] [BloodDecal] Blood puddle created at (380.6973, 835.7635) (added to group)
[21:56:23] [ENEMY] [Enemy3] Ragdoll activated
[21:56:23] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[21:56:23] [INFO] [BloodDecal] Blood puddle created at (388.5905, 733.7506) (added to group)
[21:56:23] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:56:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:23] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[21:56:23] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[21:56:23] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[21:56:23] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:56:23] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:56:23] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:56:23] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[21:56:23] [INFO] [CinemaEffects] Death effects reset
[21:56:23] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:56:23] [ENEMY] [Enemy1] Death animation component initialized
[21:56:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:23] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[21:56:23] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[21:56:23] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[21:56:23] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:56:23] [ENEMY] [Enemy2] Death animation component initialized
[21:56:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:23] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[21:56:23] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[21:56:23] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[21:56:23] [ENEMY] [Enemy3] Death animation component initialized
[21:56:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:23] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[21:56:23] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[21:56:23] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[21:56:23] [ENEMY] [Enemy4] Death animation component initialized
[21:56:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:23] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[21:56:23] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[21:56:23] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[21:56:23] [ENEMY] [Enemy5] Death animation component initialized
[21:56:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:23] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[21:56:23] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[21:56:23] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[21:56:23] [ENEMY] [Enemy6] Death animation component initialized
[21:56:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:23] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[21:56:23] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[21:56:23] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[21:56:23] [ENEMY] [Enemy7] Death animation component initialized
[21:56:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:23] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[21:56:23] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[21:56:23] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[21:56:23] [ENEMY] [Enemy8] Death animation component initialized
[21:56:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:23] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[21:56:23] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[21:56:23] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[21:56:23] [ENEMY] [Enemy9] Death animation component initialized
[21:56:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:23] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[21:56:23] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[21:56:23] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[21:56:23] [ENEMY] [Enemy10] Death animation component initialized
[21:56:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:23] [INFO] [BloodyFeet:Player] Footprint scene loaded
[21:56:23] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[21:56:23] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[21:56:23] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[21:56:23] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:56:23] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:56:23] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:56:23] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:56:23] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:56:23] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[21:56:23] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[21:56:23] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[21:56:23] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:56:23] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[21:56:23] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[21:56:23] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[21:56:23] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[21:56:23] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[21:56:23] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[21:56:23] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[21:56:23] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[21:56:23] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[21:56:23] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[21:56:23] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[21:56:23] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[21:56:23] [INFO] [ScoreManager] Level started with 10 enemies
[21:56:23] [INFO] [BloodDecal] Blood puddle created at (385.8508, 781.4637) (added to group)
[21:56:23] [INFO] [BloodDecal] Blood puddle created at (379.8602, 765.3969) (added to group)
[21:56:23] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[21:56:23] [INFO] [CinemaEffects] Found player node: Player
[21:56:23] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[21:56:23] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[21:56:23] [ENEMY] [Enemy1] Registered as sound listener
[21:56:23] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[21:56:23] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[21:56:23] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[21:56:23] [ENEMY] [Enemy2] Registered as sound listener
[21:56:23] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[21:56:23] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[21:56:23] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[21:56:23] [ENEMY] [Enemy3] Registered as sound listener
[21:56:23] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[21:56:23] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[21:56:23] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[21:56:23] [ENEMY] [Enemy4] Registered as sound listener
[21:56:23] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[21:56:23] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[21:56:23] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[21:56:23] [ENEMY] [Enemy5] Registered as sound listener
[21:56:23] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[21:56:23] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[21:56:23] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[21:56:23] [ENEMY] [Enemy6] Registered as sound listener
[21:56:23] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[21:56:23] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[21:56:23] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[21:56:23] [ENEMY] [Enemy7] Registered as sound listener
[21:56:23] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[21:56:23] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[21:56:23] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[21:56:23] [ENEMY] [Enemy8] Registered as sound listener
[21:56:23] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[21:56:23] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[21:56:23] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[21:56:23] [ENEMY] [Enemy9] Registered as sound listener
[21:56:23] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[21:56:23] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[21:56:23] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[21:56:23] [ENEMY] [Enemy10] Registered as sound listener
[21:56:23] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[21:56:23] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[21:56:23] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:23] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:23] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:23] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:23] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:23] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:23] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:23] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:23] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:56:23] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:56:23] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:56:23] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:56:23] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:56:23] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:56:23] [INFO] [LastChance] Found player: Player
[21:56:23] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:56:23] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:56:23] [INFO] [LastChance] Connected to player Died signal (C#)
[21:56:23] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[21:56:23] [INFO] [BloodDecal] Blood puddle created at (380.874, 776.8226) (added to group)
[21:56:23] [INFO] [BloodDecal] Blood puddle created at (418.4715, 795.1305) (added to group)
[21:56:23] [INFO] [BloodDecal] Blood puddle created at (407.6046, 763.8528) (added to group)
[21:56:23] [INFO] [BloodDecal] Blood puddle created at (353.8148, 812.5894) (added to group)
[21:56:23] [INFO] [BloodDecal] Blood puddle created at (388.5076, 772.8442) (added to group)
[21:56:23] [INFO] [BloodDecal] Blood puddle created at (398.0209, 804.3732) (added to group)
[21:56:23] [INFO] [BloodDecal] Blood puddle created at (420.7973, 805.9322) (added to group)
[21:56:23] [INFO] [BloodDecal] Blood puddle created at (419.6582, 822.47) (added to group)
[21:56:23] [INFO] [BloodDecal] Blood puddle created at (313.5648, 874.5495) (added to group)
[21:56:23] [INFO] [BloodDecal] Blood puddle created at (343.1908, 888.1954) (added to group)
[21:56:23] [INFO] [BloodDecal] Blood puddle created at (404.8694, 796.686) (added to group)
[21:56:23] [INFO] [BloodDecal] Blood puddle created at (334.1088, 765.459) (added to group)
[21:56:23] [INFO] [BloodDecal] Blood puddle created at (389.9125, 874.2943) (added to group)
[21:56:23] [INFO] [BloodDecal] Blood puddle created at (375.4605, 891.5682) (added to group)
[21:56:23] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:56:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:23] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[21:56:23] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[21:56:23] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[21:56:23] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:56:23] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:56:23] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:56:23] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[21:56:23] [ENEMY] [Enemy1] Death animation component initialized
[21:56:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:23] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[21:56:23] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[21:56:23] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[21:56:23] [ENEMY] [Enemy2] Death animation component initialized
[21:56:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:23] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[21:56:23] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[21:56:23] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[21:56:23] [ENEMY] [Enemy3] Death animation component initialized
[21:56:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:23] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[21:56:23] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[21:56:23] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[21:56:23] [ENEMY] [Enemy4] Death animation component initialized
[21:56:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:23] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[21:56:23] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[21:56:23] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[21:56:23] [ENEMY] [Enemy5] Death animation component initialized
[21:56:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:23] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[21:56:23] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[21:56:23] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[21:56:23] [ENEMY] [Enemy6] Death animation component initialized
[21:56:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:23] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[21:56:23] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[21:56:23] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[21:56:23] [ENEMY] [Enemy7] Death animation component initialized
[21:56:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:23] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[21:56:23] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[21:56:23] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[21:56:23] [ENEMY] [Enemy8] Death animation component initialized
[21:56:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:23] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[21:56:23] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[21:56:23] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[21:56:23] [ENEMY] [Enemy9] Death animation component initialized
[21:56:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:23] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[21:56:23] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[21:56:23] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[21:56:23] [ENEMY] [Enemy10] Death animation component initialized
[21:56:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:23] [INFO] [BloodyFeet:Player] Footprint scene loaded
[21:56:23] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[21:56:23] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[21:56:23] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[21:56:23] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:56:23] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:56:23] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:56:23] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:56:23] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:56:23] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[21:56:23] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[21:56:23] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[21:56:23] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:56:23] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[21:56:23] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[21:56:23] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[21:56:23] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[21:56:23] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[21:56:23] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[21:56:23] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[21:56:23] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[21:56:23] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[21:56:23] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[21:56:23] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[21:56:23] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[21:56:23] [INFO] [ScoreManager] Level started with 10 enemies
[21:56:23] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[21:56:23] [INFO] [CinemaEffects] Found player node: Player
[21:56:23] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[21:56:23] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 20)
[21:56:23] [ENEMY] [Enemy1] Registered as sound listener
[21:56:23] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[21:56:23] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[21:56:23] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 21)
[21:56:23] [ENEMY] [Enemy2] Registered as sound listener
[21:56:23] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[21:56:23] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[21:56:23] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 22)
[21:56:23] [ENEMY] [Enemy3] Registered as sound listener
[21:56:23] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[21:56:23] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[21:56:23] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 23)
[21:56:23] [ENEMY] [Enemy4] Registered as sound listener
[21:56:23] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[21:56:23] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[21:56:23] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 24)
[21:56:23] [ENEMY] [Enemy5] Registered as sound listener
[21:56:23] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[21:56:23] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[21:56:23] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 25)
[21:56:23] [ENEMY] [Enemy6] Registered as sound listener
[21:56:23] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[21:56:23] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[21:56:23] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 26)
[21:56:23] [ENEMY] [Enemy7] Registered as sound listener
[21:56:23] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[21:56:23] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[21:56:23] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 27)
[21:56:23] [ENEMY] [Enemy8] Registered as sound listener
[21:56:23] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[21:56:23] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[21:56:23] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 28)
[21:56:23] [ENEMY] [Enemy9] Registered as sound listener
[21:56:23] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[21:56:23] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[21:56:23] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 29)
[21:56:23] [ENEMY] [Enemy10] Registered as sound listener
[21:56:23] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[21:56:23] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[21:56:23] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:23] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:23] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:23] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:24] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:24] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=225.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:24] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:24] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:24] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:56:24] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:56:24] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:56:24] [INFO] [LastChance] Found player: Player
[21:56:24] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:56:24] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:56:24] [INFO] [LastChance] Connected to player Died signal (C#)
[21:56:24] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[21:56:24] [INFO] [BloodDecal] Blood puddle created at (337.3753, 769.578) (added to group)
[21:56:24] [INFO] [BloodDecal] Blood puddle created at (376.6693, 872.9701) (added to group)
[21:56:24] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:56:24] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:56:24] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:56:24] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:56:24] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[21:56:24] [INFO] [Player.Grenade] G pressed - starting grab animation
[21:56:24] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (813.41296, 1186.1394)
[21:56:24] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[21:56:24] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[21:56:24] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[21:56:24] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[21:56:24] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1149.6666)
[21:56:24] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[21:56:24] [INFO] [Player.Grenade] Step 1 complete! Drag: (145.67914, 6.8237305)
[21:56:24] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[21:56:24] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[21:56:25] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:56:25] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[21:56:25] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,874), corner_timer=0.30
[21:56:25] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,874), corner_timer=0.30
[21:56:25] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=164.4°, current=123.7°, player=(450,819), corner_timer=0.00
[21:56:25] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[21:56:25] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=166.8°, current=-64.9°, player=(450,808), corner_timer=0.00
[21:56:25] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,777), corner_timer=-0.02
[21:56:25] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:56:25] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,777), corner_timer=-0.02
[21:56:25] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[21:56:25] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,774), corner_timer=0.30
[21:56:25] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,774), corner_timer=0.30
[21:56:26] [ENEMY] [Enemy4] Memory: high confidence (0.87) - transitioning to PURSUING
[21:56:26] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[21:56:26] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=-157.8°, current=-101.3°, player=(450,756), corner_timer=0.00
[21:56:26] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[21:56:26] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,756), corner_timer=-0.02
[21:56:26] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[21:56:26] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=179.2°, current=-131.5°, player=(450,756), corner_timer=0.00
[21:56:26] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,756), corner_timer=0.30
[21:56:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=29
[21:56:26] [INFO] [SoundPropagation] Cleaned up 19 invalid listeners
[21:56:26] [ENEMY] [Enemy2] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.02, distance=350
[21:56:26] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[21:56:26] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=76.4°, current=-101.3°, player=(450,756), corner_timer=0.00
[21:56:26] [INFO] [LastChance] Threat detected: Bullet
[21:56:26] [INFO] [LastChance] Not in hard mode - effect disabled
[21:56:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:56:26] [INFO] [Player] Spawning blood effect at (450, 756.9444), dir=(1, 0), lethal=False (C#)
[21:56:26] [INFO] [ImpactEffects] spawn_blood_effect called at (450, 756.9444), dir=(1, 0), lethal=false
[21:56:26] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:56:26] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[21:56:26] [INFO] [ImpactEffects] Blood effect spawned at (450, 756.9444) (scale=1)
[21:56:26] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[21:56:26] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[21:56:26] [INFO] [PenultimateHit] Starting penultimate hit effect:
[21:56:26] [INFO] [PenultimateHit]   - Time scale: 0.10
[21:56:26] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[21:56:26] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[21:56:26] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[21:56:26] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[21:56:26] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[21:56:26] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[21:56:26] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[21:56:26] [INFO] [Player.Grenade.Simple] Throwing! Target: (877.1598, 645.90204), Distance: 442,4, Speed: 497,7, Friction: 280,0
[21:56:26] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,254326
[21:56:26] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.967833, -0.251593), Speed: 497.7 (clamped from 497.7, max: 1186.5)
[21:56:26] [INFO] [FragGrenade] Grenade thrown (simple mode) - impact detection enabled
[21:56:26] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[21:56:26] [INFO] [Player.Grenade.Simple] Grenade thrown!
[21:56:26] [INFO] [Player.Grenade] State reset to IDLE
[21:56:26] [INFO] [Player.Grenade] State reset to IDLE
[21:56:26] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[21:56:26] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:56:26] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (858.0413, 765.7394)
[21:56:26] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:56:26] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:56:26] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:56:26] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (884.6499, 776.0782)
[21:56:27] [INFO] [Player.Grenade] Player rotation restored to 0
[21:56:27] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:56:27] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:56:27] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:56:27] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (920.3254, 800.353)
[21:56:27] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:56:27] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:56:27] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:56:27] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (922.4043, 803.0601)
[21:56:28] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:56:28] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:56:28] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:56:28] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (924.916, 806.5102)
[21:56:28] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=7.0°, player=(450,774), corner_timer=-0.00
[21:56:28] [ENEMY] [Enemy10] PATROL corner check: angle 3.7°
[21:56:28] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.7°, current=7.2°, player=(450,774), corner_timer=0.30
[21:56:28] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=EVADING_GRENADE, target=-52.7°, current=-134.3°, player=(450,777), corner_timer=0.00
[21:56:28] [ENEMY] [Enemy4] PURSUING corner check: angle -82.9°
[21:56:28] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:56:28] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:56:28] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=173.4°, current=-118.5°, player=(450,780), corner_timer=0.00
[21:56:28] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=173.3°, current=-160.3°, player=(450,781), corner_timer=0.00
[21:56:28] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:56:28] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (948.4492, 780.3461)
[21:56:28] [ENEMY] [Enemy1] Memory: medium confidence (0.60) - transitioning to PURSUING
[21:56:28] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[21:56:28] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=71.1°, current=-33.8°, player=(450,787), corner_timer=0.00
[21:56:28] [ENEMY] [Enemy1] PURSUING corner check: angle -50.9°
[21:56:28] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=EVADING_GRENADE, target=-52.1°, current=-139.3°, player=(450,788), corner_timer=0.00
[21:56:28] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:56:28] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:56:28] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=168.3°, current=-123.1°, player=(450,793), corner_timer=0.00
[21:56:28] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=168.2°, current=-168.2°, player=(450,793), corner_timer=0.00
[21:56:28] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:56:28] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (971.7548, 750.2816)
[21:56:29] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:56:29] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:56:29] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:56:29] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (976.8943, 744.1426)
[21:56:29] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:56:29] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:56:29] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:56:29] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (982.7186, 736.0118)
[21:56:29] [INFO] [PenultimateHit] Effect duration expired after 3.00 real seconds
[21:56:29] [INFO] [PenultimateHit] Ending penultimate hit effect
[21:56:29] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[21:56:29] [INFO] [PenultimateHit] Called player RefreshHealthVisual (C#)
[21:56:29] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[21:56:29] [INFO] [BloodDecal] Blood puddle created at (506.0171, 767.378) (added to group)
[21:56:29] [INFO] [BloodDecal] Blood puddle created at (508.543, 764.7445) (added to group)
[21:56:29] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:56:29] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:56:29] [INFO] [BloodDecal] Blood puddle created at (520.0124, 762.6272) (added to group)
[21:56:29] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:56:29] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1005.165, 712.5023)
[21:56:29] [INFO] [BloodDecal] Blood puddle created at (579.2161, 767.5558) (added to group)
[21:56:29] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=EVADING_GRENADE, target=-49.1°, current=-171.4°, player=(450,833), corner_timer=0.00
[21:56:29] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[21:56:29] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:56:29] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:56:29] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=153.9°, current=-124.8°, player=(450,850), corner_timer=0.00
[21:56:29] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:56:29] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1038.529, 654.2032)
[21:56:29] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=153.9°, current=159.1°, player=(450,861), corner_timer=0.00
[21:56:29] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.6°, player=(450,872), corner_timer=-0.01
[21:56:29] [ENEMY] [Enemy10] PATROL corner check: angle 1.9°
[21:56:29] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:56:29] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:56:29] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.9°, current=6.4°, player=(450,877), corner_timer=0.30
[21:56:29] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=148.1°, current=-128.4°, player=(450,883), corner_timer=0.00
[21:56:29] [ENEMY] [Enemy1] PURSUING corner check: angle -52.3°
[21:56:29] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:56:29] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1058.55, 585.1916)
[21:56:29] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=148.1°, current=153.3°, player=(450,894), corner_timer=0.00
[21:56:29] [INFO] [BloodDecal] Blood puddle created at (597.3497, 802.5732) (added to group)
[21:56:29] [INFO] [BloodDecal] Blood puddle created at (571.2009, 780.8379) (added to group)
[21:56:29] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:56:29] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:56:29] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=143.6°, current=-131.2°, player=(450,916), corner_timer=0.00
[21:56:29] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:56:29] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1061.714, 513.608)
[21:56:29] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=143.6°, current=148.7°, player=(450,927), corner_timer=0.00
[21:56:29] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:56:29] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:56:29] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=140.6°, current=-156.0°, player=(450,943), corner_timer=0.00
[21:56:29] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:56:29] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1056.123, 463.751)
[21:56:29] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=140.6°, current=142.9°, player=(450,954), corner_timer=0.00
[21:56:29] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:56:29] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:56:29] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=138.1°, current=-160.1°, player=(450,971), corner_timer=0.00
[21:56:29] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:56:29] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1043.164, 419.9852)
[21:56:29] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=138.1°, current=138.1°, player=(450,982), corner_timer=0.00
[21:56:29] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.9°, player=(450,982), corner_timer=-0.02
[21:56:29] [ENEMY] [Enemy10] PATROL corner check: angle 1.0°
[21:56:29] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.0°, current=4.7°, player=(450,987), corner_timer=0.30
[21:56:29] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:56:29] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:56:29] [ENEMY] [Enemy1] PURSUING corner check: angle 153.3°
[21:56:29] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=136.1°, current=-162.1°, player=(450,997), corner_timer=0.00
[21:56:29] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:56:29] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1034.178, 390.7187)
[21:56:29] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=112.9°, current=136.1°, player=(450,1005), corner_timer=0.00
[21:56:29] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:56:29] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:56:29] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=134.8°, current=-168.3°, player=(450,1016), corner_timer=0.00
[21:56:29] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:56:29] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1025.037, 367.7872)
[21:56:29] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=111.6°, current=134.8°, player=(450,1022), corner_timer=0.00
[21:56:30] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:56:30] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:56:30] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=134.0°, current=-170.7°, player=(450,1028), corner_timer=0.00
[21:56:30] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:56:30] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1012.329, 347.7396)
[21:56:30] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=110.8°, current=134.0°, player=(450,1031), corner_timer=0.00
[21:56:30] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:56:30] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:56:30] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=133.4°, current=-172.8°, player=(450,1033), corner_timer=0.00
[21:56:30] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:56:30] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (990.4665, 328.2134)
[21:56:30] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=133.4°, current=133.4°, player=(450,1034), corner_timer=0.00
[21:56:30] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:56:30] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:56:30] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:56:30] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=132.9°, current=162.8°, player=(450,1034), corner_timer=0.00
[21:56:30] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:56:30] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (961.351, 312.919)
[21:56:30] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=132.9°, current=132.9°, player=(450,1034), corner_timer=0.00
[21:56:30] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:56:30] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:56:30] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=132.3°, current=161.5°, player=(450,1034), corner_timer=0.00
[21:56:30] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:56:30] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (930.2078, 302.3513)
[21:56:30] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=132.3°, current=132.3°, player=(450,1034), corner_timer=0.00
[21:56:30] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:56:30] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:56:30] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=131.5°, current=159.8°, player=(450,1034), corner_timer=0.00
[21:56:30] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:56:30] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (898.1397, 296.4952)
[21:56:30] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=131.5°, current=131.5°, player=(450,1034), corner_timer=0.00
[21:56:30] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:56:30] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:56:30] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(450,1034), corner_timer=-0.02
[21:56:30] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[21:56:30] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=130.7°, current=158.2°, player=(450,1034), corner_timer=0.00
[21:56:30] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(450,1034), corner_timer=0.30
[21:56:30] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:56:30] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (867.5294, 294.9754)
[21:56:30] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=130.7°, current=130.7°, player=(450,1034), corner_timer=0.00
[21:56:30] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:56:30] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:56:30] [INFO] [SoundPropagation] Sound emitted: type=GRENADE_LANDING, pos=(883.6774, 644.2072), source=NEUTRAL (FragGrenade), range=112, listeners=10
[21:56:30] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=10, self=0, below_threshold=0
[21:56:30] [INFO] [GrenadeBase] Grenade landed at (883.6774, 644.2072)
[21:56:30] [INFO] [FragGrenade] Impact detected - exploding immediately!
[21:56:30] [INFO] [GrenadeBase] EXPLODED at (883.6774, 644.2072)!
[21:56:30] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(883.6774, 644.2072), source=NEUTRAL (FragGrenade), range=2937, listeners=10
[21:56:30] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=0, below_threshold=6
[21:56:30] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 4/4 -> 3/4
[21:56:30] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[21:56:30] [INFO] [ImpactEffects] spawn_blood_effect called at (873.5483, 525.1367), dir=(-0.084762, -0.996401), lethal=false
[21:56:30] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:56:30] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[21:56:30] [INFO] [ImpactEffects] Blood effect spawned at (873.5483, 525.1367) (scale=1)
[21:56:30] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 3/4 -> 2/4
[21:56:30] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[21:56:30] [INFO] [ImpactEffects] spawn_blood_effect called at (873.5483, 525.1367), dir=(-0.084762, -0.996401), lethal=false
[21:56:30] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:56:30] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[21:56:30] [INFO] [ImpactEffects] Blood effect spawned at (873.5483, 525.1367) (scale=1)
[21:56:30] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/4 -> 1/4
[21:56:30] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[21:56:30] [INFO] [ImpactEffects] spawn_blood_effect called at (873.5483, 525.1367), dir=(-0.084762, -0.996401), lethal=false
[21:56:30] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:56:30] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[21:56:30] [INFO] [ImpactEffects] Blood effect spawned at (873.5483, 525.1367) (scale=1)
[21:56:30] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 1/4 -> 0/4
[21:56:30] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[21:56:30] [INFO] [ImpactEffects] spawn_blood_effect called at (873.5483, 525.1367), dir=(-0.084762, -0.996401), lethal=true
[21:56:30] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:56:30] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[21:56:30] [INFO] [ImpactEffects] Blood effect spawned at (873.5483, 525.1367) (scale=1.5)
[21:56:30] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[21:56:30] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[21:56:30] [ENEMY] [Enemy3] [AllyDeath] Notified 3 enemies
[21:56:30] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[21:56:30] [INFO] [DeathAnim] Started - Angle: -94.9 deg, Index: 5
[21:56:30] [ENEMY] [Enemy3] Death animation started with hit direction: (-0.084762, -0.996401)
[21:56:30] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 119.5
[21:56:30] [INFO] [FragGrenade] Spawned shrapnel #1 at angle -18.0 degrees
[21:56:30] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 91.1 degrees
[21:56:30] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 172.1 degrees
[21:56:30] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 259.6 degrees
[21:56:30] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:56:30] [INFO] [BloodDecal] Blood puddle created at (849.0284, 469.8781) (added to group)
[21:56:30] [INFO] [BloodDecal] Blood puddle created at (874.5296, 495.5663) (added to group)
[21:56:30] [INFO] [BloodDecal] Blood puddle created at (849.1324, 484.6723) (added to group)
[21:56:30] [INFO] [BloodDecal] Blood puddle created at (862.2817, 467.0232) (added to group)
[21:56:30] [INFO] [BloodDecal] Blood puddle created at (876.7883, 456.6452) (added to group)
[21:56:30] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(450,994), corner_timer=-0.02
[21:56:30] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[21:56:30] [INFO] [BloodDecal] Blood puddle created at (885.0698, 498.7384) (added to group)
[21:56:30] [INFO] [BloodDecal] Blood puddle created at (882.9159, 490.1055) (added to group)
[21:56:30] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(450,988), corner_timer=0.30
[21:56:30] [INFO] [BloodDecal] Blood puddle created at (892.4889, 451.8257) (added to group)
[21:56:30] [INFO] [BloodDecal] Blood puddle created at (868.8079, 461.3295) (added to group)
[21:56:30] [INFO] [BloodDecal] Blood puddle created at (892.2229, 473.9614) (added to group)
[21:56:30] [INFO] [BloodDecal] Blood puddle created at (884.22, 459.2001) (added to group)
[21:56:30] [INFO] [BloodDecal] Blood puddle created at (886.0919, 463.8067) (added to group)
[21:56:30] [INFO] [BloodDecal] Blood puddle created at (851.9592, 502.9384) (added to group)
[21:56:30] [INFO] [BloodDecal] Blood puddle created at (841.7544, 504.6749) (added to group)
[21:56:30] [INFO] [BloodDecal] Blood puddle created at (883.3511, 436.3293) (added to group)
[21:56:30] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:56:30] [INFO] [BloodDecal] Blood puddle created at (846.0293, 496.3891) (added to group)
[21:56:30] [INFO] [BloodDecal] Blood puddle created at (850.0287, 490.4981) (added to group)
[21:56:30] [INFO] [BloodDecal] Blood puddle created at (870.9573, 469.9182) (added to group)
[21:56:30] [INFO] [BloodDecal] Blood puddle created at (830.5272, 470.7586) (added to group)
[21:56:30] [INFO] [BloodDecal] Blood puddle created at (883.919, 479.9481) (added to group)
[21:56:30] [INFO] [BloodDecal] Blood puddle created at (875.001, 448.5387) (added to group)
[21:56:30] [INFO] [BloodDecal] Blood puddle created at (828.4142, 428.5864) (added to group)
[21:56:30] [INFO] [BloodDecal] Blood puddle created at (867.8759, 499.3831) (added to group)
[21:56:30] [INFO] [BloodDecal] Blood puddle created at (848.0295, 442.0869) (added to group)
[21:56:30] [INFO] [BloodDecal] Blood puddle created at (890.739, 498.1567) (added to group)
[21:56:30] [ENEMY] [Enemy3] Ragdoll activated
[21:56:30] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[21:56:30] [INFO] [BloodDecal] Blood puddle created at (896.4658, 473.1753) (added to group)
[21:56:30] [INFO] [BloodDecal] Blood puddle created at (841.8763, 471.4438) (added to group)
[21:56:30] [INFO] [BloodDecal] Blood puddle created at (862.92, 424.9586) (added to group)
[21:56:30] [INFO] [BloodDecal] Blood puddle created at (833.1993, 493.3534) (added to group)
[21:56:30] [ENEMY] [Enemy2] PURSUING corner check: angle 167.0°
[21:56:30] [INFO] [BloodDecal] Blood puddle created at (837.1752, 431.4665) (added to group)
[21:56:30] [INFO] [BloodDecal] Blood puddle created at (830.0319, 424.5232) (added to group)
[21:56:30] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
[21:56:30] [INFO] [BloodDecal] Blood puddle created at (854.9361, 486.1299) (added to group)
[21:56:30] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[21:56:30] [INFO] [BloodDecal] Blood puddle created at (871.5621, 499.6188) (added to group)
[21:56:30] [INFO] [BloodDecal] Blood puddle created at (841.665, 404.1147) (added to group)
[21:56:30] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[21:56:31] [INFO] [BloodyFeet:Enemy3] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[21:56:31] [INFO] [BloodDecal] Blood puddle created at (940.6547, 428.745) (added to group)
[21:56:31] [INFO] [BloodDecal] Blood puddle created at (814.9456, 429.1656) (added to group)
[21:56:31] [INFO] [BloodDecal] Blood puddle created at (912.3869, 495.6396) (added to group)
[21:56:31] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(450,899), corner_timer=-0.02
[21:56:31] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[21:56:31] [INFO] [BloodDecal] Blood puddle created at (795.6746, 469.9446) (added to group)
[21:56:31] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(450,897), corner_timer=0.30
[21:56:31] [INFO] [BloodDecal] Blood puddle created at (785.2226, 473.5055) (added to group)
[21:56:31] [INFO] [BloodDecal] Blood puddle created at (907.7651, 447.3242) (added to group)
[21:56:31] [INFO] [BloodDecal] Blood puddle created at (860.5967, 512.7394) (added to group)
[21:56:31] [INFO] [BloodDecal] Blood puddle created at (892.2915, 421.0334) (added to group)
[21:56:31] [INFO] [BloodDecal] Blood puddle created at (849.0186, 521.0309) (added to group)
[21:56:31] [INFO] [BloodDecal] Blood puddle created at (900.6334, 530.5093) (added to group)
[21:56:31] [INFO] [BloodDecal] Blood puddle created at (816.304, 411.9124) (added to group)
[21:56:31] [INFO] [BloodDecal] Blood puddle created at (901.2535, 405.2207) (added to group)
[21:56:31] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:56:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:31] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[21:56:31] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[21:56:31] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[21:56:31] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:56:31] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:56:31] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:56:31] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[21:56:31] [ENEMY] [Enemy1] Death animation component initialized
[21:56:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:31] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[21:56:31] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[21:56:31] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[21:56:31] [ENEMY] [Enemy2] Death animation component initialized
[21:56:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:31] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[21:56:31] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[21:56:31] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[21:56:31] [ENEMY] [Enemy3] Death animation component initialized
[21:56:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:31] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[21:56:31] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[21:56:31] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[21:56:31] [ENEMY] [Enemy4] Death animation component initialized
[21:56:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:31] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[21:56:31] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[21:56:31] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[21:56:31] [ENEMY] [Enemy5] Death animation component initialized
[21:56:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:31] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[21:56:31] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[21:56:31] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[21:56:31] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:56:31] [ENEMY] [Enemy6] Death animation component initialized
[21:56:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:31] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[21:56:31] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[21:56:31] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[21:56:31] [ENEMY] [Enemy7] Death animation component initialized
[21:56:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:31] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[21:56:31] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[21:56:31] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[21:56:31] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:56:31] [ENEMY] [Enemy8] Death animation component initialized
[21:56:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:31] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[21:56:31] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[21:56:31] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[21:56:31] [ENEMY] [Enemy9] Death animation component initialized
[21:56:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:31] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[21:56:31] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[21:56:31] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[21:56:31] [ENEMY] [Enemy10] Death animation component initialized
[21:56:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:31] [INFO] [BloodyFeet:Player] Footprint scene loaded
[21:56:31] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[21:56:31] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[21:56:31] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[21:56:31] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:56:31] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:56:31] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:56:31] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:56:31] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:56:31] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[21:56:31] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[21:56:31] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[21:56:31] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:56:31] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[21:56:31] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[21:56:31] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[21:56:31] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[21:56:31] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[21:56:31] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[21:56:31] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[21:56:31] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[21:56:31] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[21:56:31] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[21:56:31] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[21:56:31] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[21:56:31] [INFO] [ScoreManager] Level started with 10 enemies
[21:56:31] [INFO] [BloodDecal] Blood puddle created at (890.0627, 503.4146) (added to group)
[21:56:31] [INFO] [BloodDecal] Blood puddle created at (820.4222, 421.1286) (added to group)
[21:56:31] [INFO] [BloodDecal] Blood puddle created at (771.674, 453.9985) (added to group)
[21:56:31] [INFO] [BloodDecal] Blood puddle created at (903.0345, 509.6303) (added to group)
[21:56:31] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[21:56:31] [INFO] [CinemaEffects] Found player node: Player
[21:56:31] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[21:56:31] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[21:56:31] [ENEMY] [Enemy1] Registered as sound listener
[21:56:31] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[21:56:31] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[21:56:31] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[21:56:31] [ENEMY] [Enemy2] Registered as sound listener
[21:56:31] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[21:56:31] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[21:56:31] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[21:56:31] [ENEMY] [Enemy3] Registered as sound listener
[21:56:31] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[21:56:31] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[21:56:31] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[21:56:31] [ENEMY] [Enemy4] Registered as sound listener
[21:56:31] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[21:56:31] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[21:56:31] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[21:56:31] [ENEMY] [Enemy5] Registered as sound listener
[21:56:31] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[21:56:31] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[21:56:31] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[21:56:31] [ENEMY] [Enemy6] Registered as sound listener
[21:56:31] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[21:56:31] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[21:56:31] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[21:56:31] [ENEMY] [Enemy7] Registered as sound listener
[21:56:31] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[21:56:31] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[21:56:31] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[21:56:31] [ENEMY] [Enemy8] Registered as sound listener
[21:56:31] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[21:56:31] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[21:56:31] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[21:56:31] [ENEMY] [Enemy9] Registered as sound listener
[21:56:31] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[21:56:31] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[21:56:31] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[21:56:31] [ENEMY] [Enemy10] Registered as sound listener
[21:56:31] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[21:56:31] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[21:56:31] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:56:31] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:56:31] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:56:31] [INFO] [LastChance] Found player: Player
[21:56:31] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:56:31] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:56:31] [INFO] [LastChance] Connected to player Died signal (C#)
[21:56:31] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[21:56:31] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:31] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:31] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:31] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:31] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:31] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:31] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:31] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:31] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:56:31] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:56:31] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:56:31] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:56:31] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[21:56:31] [INFO] [Player.Grenade] G pressed - starting grab animation
[21:56:31] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:56:31] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (741.9731, 1108.4044)
[21:56:31] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[21:56:31] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[21:56:31] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[21:56:31] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[21:56:31] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[21:56:31] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[21:56:31] [INFO] [Player.Grenade] Step 1 complete! Drag: (49.229675, 18.033447)
[21:56:32] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[21:56:32] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[21:56:32] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:56:32] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[21:56:32] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1127), corner_timer=0.30
[21:56:32] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1127), corner_timer=0.30
[21:56:33] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,1023), corner_timer=-0.02
[21:56:33] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:56:33] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,1023), corner_timer=-0.02
[21:56:33] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[21:56:33] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,1017), corner_timer=0.30
[21:56:33] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,1017), corner_timer=0.30
[21:56:33] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,913), corner_timer=-0.02
[21:56:33] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[21:56:33] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,907), corner_timer=0.30
[21:56:33] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=164.4°, current=-168.8°, player=(450,819), corner_timer=0.00
[21:56:33] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[21:56:33] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=166.8°, current=-8.9°, player=(449,808), corner_timer=0.00
[21:56:33] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(449,803), corner_timer=-0.02
[21:56:33] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[21:56:33] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(448,798), corner_timer=0.30
[21:56:33] [ENEMY] [Enemy4] Memory: high confidence (0.89) - transitioning to PURSUING
[21:56:33] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[21:56:33] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=-162.6°, current=-101.3°, player=(445,788), corner_timer=0.00
[21:56:33] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[21:56:33] [INFO] [Player.Grenade.Simple] Throwing! Target: (816.36707, 694.72205), Distance: 381,1, Speed: 462,0, Friction: 280,0
[21:56:33] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,1919023
[21:56:33] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.981643, -0.190727), Speed: 462.0 (clamped from 462.0, max: 1186.5)
[21:56:33] [INFO] [FragGrenade] Grenade thrown (simple mode) - impact detection enabled
[21:56:33] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[21:56:33] [INFO] [Player.Grenade.Simple] Grenade thrown!
[21:56:33] [INFO] [Player.Grenade] State reset to IDLE
[21:56:33] [INFO] [Player.Grenade] State reset to IDLE
[21:56:33] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[21:56:33] [INFO] [Player.Grenade] Player rotation restored to 0
[21:56:34] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(399,750), corner_timer=-0.02
[21:56:34] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[21:56:34] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(397,751), corner_timer=0.30
[21:56:34] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[21:56:34] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[21:56:34] [ENEMY] [Enemy4] PURSUING corner check: angle -94.0°
[21:56:34] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=168.3°, current=121.7°, player=(379,816), corner_timer=0.00
[21:56:34] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(379,816), corner_timer=-0.02
[21:56:34] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[21:56:34] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(379,822), corner_timer=0.30
[21:56:34] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=PURSUING, target=163.5°, current=136.0°, player=(379,844), corner_timer=0.00
[21:56:34] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:56:34] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(379,907), corner_timer=-0.02
[21:56:34] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[21:56:34] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(379,907), corner_timer=0.30
[21:56:35] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:56:35] [INFO] [SoundPropagation] Sound emitted: type=GRENADE_LANDING, pos=(823.7949, 693.2788), source=NEUTRAL (FragGrenade), range=112, listeners=19
[21:56:35] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[21:56:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=10, self=0, below_threshold=0
[21:56:35] [INFO] [GrenadeBase] Grenade landed at (823.7949, 693.2788)
[21:56:35] [INFO] [FragGrenade] Impact detected - exploding immediately!
[21:56:35] [INFO] [GrenadeBase] EXPLODED at (823.7949, 693.2788)!
[21:56:35] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(823.7949, 693.2788), source=NEUTRAL (FragGrenade), range=2937, listeners=10
[21:56:35] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[21:56:35] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 4/4 -> 3/4
[21:56:35] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[21:56:35] [INFO] [ImpactEffects] spawn_blood_effect called at (684.449, 753.7605), dir=(-0.917319, 0.398153), lethal=false
[21:56:35] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:56:35] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[21:56:35] [INFO] [ImpactEffects] Blood effect spawned at (684.449, 753.7605) (scale=1)
[21:56:35] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 3/4 -> 2/4
[21:56:35] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[21:56:35] [INFO] [ImpactEffects] spawn_blood_effect called at (684.449, 753.7605), dir=(-0.917319, 0.398153), lethal=false
[21:56:35] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:56:35] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[21:56:35] [INFO] [ImpactEffects] Blood effect spawned at (684.449, 753.7605) (scale=1)
[21:56:35] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/4 -> 1/4
[21:56:35] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[21:56:35] [INFO] [ImpactEffects] spawn_blood_effect called at (684.449, 753.7605), dir=(-0.917319, 0.398153), lethal=false
[21:56:35] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:56:35] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[21:56:35] [INFO] [ImpactEffects] Blood effect spawned at (684.449, 753.7605) (scale=1)
[21:56:35] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 1/4 -> 0/4
[21:56:35] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[21:56:35] [INFO] [ImpactEffects] spawn_blood_effect called at (684.449, 753.7605), dir=(-0.917319, 0.398153), lethal=true
[21:56:35] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:56:35] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[21:56:35] [INFO] [ImpactEffects] Blood effect spawned at (684.449, 753.7605) (scale=1.5)
[21:56:35] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[21:56:35] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[21:56:35] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[21:56:35] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[21:56:35] [INFO] [DeathAnim] Started - Angle: 156.5 deg, Index: 22
[21:56:35] [ENEMY] [Enemy3] Death animation started with hit direction: (-0.917319, 0.398153)
[21:56:35] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 151.9
[21:56:35] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 2.3 degrees
[21:56:35] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 81.1 degrees
[21:56:35] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 161.4 degrees
[21:56:35] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 281.4 degrees
[21:56:35] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(379,907), corner_timer=-0.02
[21:56:35] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[21:56:35] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(379,907), corner_timer=0.30
[21:56:35] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (622.0785, 788.1494) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (622.7301, 771.0966) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (636.1741, 795.1232) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (635.094, 825.9579) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (630.4662, 769.8782) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (632.9305, 802.1938) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (622.9352, 787.6114) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (603.0607, 811.2095) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (650.2285, 815.8998) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (600.6119, 841.569) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (605.3187, 790.7182) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (552.3994, 784.8903) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (611.6244, 818.4275) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (598.3804, 874.9678) (added to group)
[21:56:35] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(379,907), corner_timer=-0.02
[21:56:35] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (563.5867, 804.3396) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (582.535, 789.5557) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (597.8448, 794.1383) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (577.8004, 828.4937) (added to group)
[21:56:35] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(379,907), corner_timer=0.30
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (568.7416, 860.2956) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (606.8956, 844.4348) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (581.0049, 804.4161) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (559.9535, 818.2537) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (618.2115, 858.9573) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (617.483, 830.8484) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (614.335, 812.5344) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (576.6017, 825.4703) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (584.271, 817.8012) (added to group)
[21:56:35] [ENEMY] [Enemy3] Ragdoll activated
[21:56:35] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (609.2144, 900.6589) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (616.6403, 880.8597) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (526.4796, 838.3917) (added to group)
[21:56:35] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (581.2794, 876.8387) (added to group)
[21:56:35] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:56:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:35] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[21:56:35] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[21:56:35] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[21:56:35] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:56:35] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:56:35] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:56:35] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[21:56:35] [ENEMY] [Enemy1] Death animation component initialized
[21:56:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:35] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[21:56:35] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[21:56:35] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[21:56:35] [ENEMY] [Enemy2] Death animation component initialized
[21:56:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:35] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[21:56:35] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[21:56:35] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[21:56:35] [ENEMY] [Enemy3] Death animation component initialized
[21:56:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:35] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[21:56:35] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[21:56:35] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[21:56:35] [ENEMY] [Enemy4] Death animation component initialized
[21:56:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:35] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[21:56:35] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[21:56:35] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[21:56:35] [ENEMY] [Enemy5] Death animation component initialized
[21:56:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:35] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[21:56:35] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[21:56:35] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[21:56:35] [ENEMY] [Enemy6] Death animation component initialized
[21:56:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:35] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[21:56:35] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[21:56:35] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[21:56:35] [ENEMY] [Enemy7] Death animation component initialized
[21:56:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:35] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[21:56:35] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[21:56:35] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[21:56:35] [ENEMY] [Enemy8] Death animation component initialized
[21:56:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:35] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[21:56:35] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[21:56:35] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[21:56:35] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:56:35] [ENEMY] [Enemy9] Death animation component initialized
[21:56:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:35] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[21:56:35] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[21:56:35] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[21:56:35] [ENEMY] [Enemy10] Death animation component initialized
[21:56:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:35] [INFO] [BloodyFeet:Player] Footprint scene loaded
[21:56:35] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[21:56:35] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[21:56:35] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[21:56:35] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:56:35] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:56:35] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:56:35] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:56:35] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:56:35] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[21:56:35] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[21:56:35] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[21:56:35] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:56:35] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[21:56:35] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[21:56:35] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[21:56:35] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[21:56:35] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[21:56:35] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[21:56:35] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[21:56:35] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[21:56:35] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[21:56:35] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[21:56:35] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[21:56:35] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[21:56:35] [INFO] [ScoreManager] Level started with 10 enemies
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (597.9592, 814.999) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (580.4836, 853.25) (added to group)
[21:56:35] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[21:56:35] [INFO] [CinemaEffects] Found player node: Player
[21:56:35] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[21:56:35] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[21:56:35] [ENEMY] [Enemy1] Registered as sound listener
[21:56:35] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[21:56:35] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[21:56:35] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[21:56:35] [ENEMY] [Enemy2] Registered as sound listener
[21:56:35] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[21:56:35] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[21:56:35] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[21:56:35] [ENEMY] [Enemy3] Registered as sound listener
[21:56:35] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[21:56:35] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[21:56:35] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[21:56:35] [ENEMY] [Enemy4] Registered as sound listener
[21:56:35] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[21:56:35] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[21:56:35] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[21:56:35] [ENEMY] [Enemy5] Registered as sound listener
[21:56:35] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[21:56:35] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[21:56:35] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[21:56:35] [ENEMY] [Enemy6] Registered as sound listener
[21:56:35] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[21:56:35] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[21:56:35] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[21:56:35] [ENEMY] [Enemy7] Registered as sound listener
[21:56:35] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[21:56:35] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[21:56:35] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[21:56:35] [ENEMY] [Enemy8] Registered as sound listener
[21:56:35] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[21:56:35] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[21:56:35] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[21:56:35] [ENEMY] [Enemy9] Registered as sound listener
[21:56:35] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[21:56:35] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[21:56:35] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[21:56:35] [ENEMY] [Enemy10] Registered as sound listener
[21:56:35] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[21:56:35] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[21:56:35] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:56:35] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:56:35] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:56:35] [INFO] [LastChance] Found player: Player
[21:56:35] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:56:35] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:56:35] [INFO] [LastChance] Connected to player Died signal (C#)
[21:56:35] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (587.335, 913.0222) (added to group)
[21:56:35] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:35] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:35] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:35] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:35] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:35] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:35] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=157.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:35] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (563.8983, 980.7457) (added to group)
[21:56:35] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:56:35] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:56:35] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (548.1244, 859.7328) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (592.6106, 872.5624) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (543.0555, 969.3339) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (585.2964, 847.3408) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (567.5296, 984.316) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (534.2072, 887.0126) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (588.2131, 903.2786) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (528.5466, 910.934) (added to group)
[21:56:35] [INFO] [BloodDecal] Blood puddle created at (567.4041, 935.2001) (added to group)
[21:56:36] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:56:36] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[21:56:36] [INFO] [Player.Grenade] G pressed - starting grab animation
[21:56:36] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:56:36] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (734.2761, 1158.4972)
[21:56:36] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[21:56:36] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[21:56:36] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[21:56:36] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[21:56:36] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[21:56:36] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[21:56:36] [INFO] [Player.Grenade] Step 1 complete! Drag: (292.81885, 14.026001)
[21:56:36] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[21:56:36] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[21:56:37] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:56:37] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[21:56:37] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1056), corner_timer=0.30
[21:56:37] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1056), corner_timer=0.30
[21:56:37] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,951), corner_timer=-0.02
[21:56:37] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:56:37] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,951), corner_timer=-0.02
[21:56:37] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[21:56:37] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,946), corner_timer=0.30
[21:56:37] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,946), corner_timer=0.30
[21:56:37] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(401,861), corner_timer=-0.02
[21:56:37] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[21:56:37] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(399,857), corner_timer=0.30
[21:56:38] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=164.0°, current=-168.8°, player=(393,837), corner_timer=0.00
[21:56:38] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[21:56:38] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=165.9°, current=-9.5°, player=(391,827), corner_timer=0.00
[21:56:38] [INFO] [Player.Grenade.Simple] Throwing! Target: (724.8428, 616.3314), Distance: 367,9, Speed: 453,9, Friction: 280,0
[21:56:38] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,48754755
[21:56:38] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.883484, -0.468461), Speed: 453.9 (clamped from 453.9, max: 1186.5)
[21:56:38] [INFO] [FragGrenade] Grenade thrown (simple mode) - impact detection enabled
[21:56:38] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[21:56:38] [INFO] [Player.Grenade.Simple] Grenade thrown!
[21:56:38] [INFO] [Player.Grenade] State reset to IDLE
[21:56:38] [INFO] [Player.Grenade] State reset to IDLE
[21:56:38] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[21:56:38] [INFO] [Player.Grenade] Player rotation restored to 0
[21:56:38] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(391,774), corner_timer=-0.02
[21:56:38] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[21:56:38] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(391,771), corner_timer=0.30
[21:56:38] [ENEMY] [Enemy4] Memory: high confidence (0.87) - transitioning to PURSUING
[21:56:38] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[21:56:38] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=-162.2°, current=168.8°, player=(391,768), corner_timer=0.00
[21:56:38] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[21:56:38] [ENEMY] [Enemy2] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:56:38] [ENEMY] [Enemy2] EVADING_GRENADE started: escaping to (317.1463, 441.7906)
[21:56:38] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-103.7°, current=27.7°, player=(391,766), corner_timer=0.00
[21:56:38] [ENEMY] [Enemy2] EVADING_GRENADE: Escaped to safe distance
[21:56:38] [ENEMY] [Enemy2] State: EVADING_GRENADE -> IDLE
[21:56:38] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[21:56:38] [ENEMY] [Enemy2] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=258.8°, current=4.7°, player=(391,769), corner_timer=0.00
[21:56:38] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[21:56:38] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(391,793), corner_timer=-0.02
[21:56:38] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[21:56:38] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(391,797), corner_timer=0.30
[21:56:38] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=164.2°, current=116.6°, player=(391,829), corner_timer=0.00
[21:56:38] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=PURSUING, target=160.7°, current=125.2°, player=(391,845), corner_timer=0.00
[21:56:38] [ENEMY] [Enemy4] PURSUING corner check: angle -94.0°
[21:56:38] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(391,882), corner_timer=-0.02
[21:56:38] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[21:56:38] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(391,884), corner_timer=0.30
[21:56:39] [INFO] [BloodyFeet:Enemy4] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[21:56:39] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:56:39] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:39] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[21:56:39] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[21:56:39] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[21:56:39] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:56:39] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:56:39] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:56:39] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[21:56:39] [ENEMY] [Enemy1] Death animation component initialized
[21:56:39] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:39] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[21:56:39] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[21:56:39] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[21:56:39] [ENEMY] [Enemy2] Death animation component initialized
[21:56:39] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:39] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[21:56:39] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[21:56:39] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[21:56:39] [ENEMY] [Enemy3] Death animation component initialized
[21:56:39] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:39] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[21:56:39] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[21:56:39] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[21:56:39] [ENEMY] [Enemy4] Death animation component initialized
[21:56:39] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:39] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[21:56:39] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[21:56:39] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[21:56:39] [ENEMY] [Enemy5] Death animation component initialized
[21:56:39] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:39] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[21:56:39] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[21:56:39] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[21:56:39] [ENEMY] [Enemy6] Death animation component initialized
[21:56:39] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:39] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[21:56:39] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[21:56:39] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[21:56:39] [ENEMY] [Enemy7] Death animation component initialized
[21:56:39] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:39] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[21:56:39] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[21:56:39] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[21:56:39] [ENEMY] [Enemy8] Death animation component initialized
[21:56:39] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:39] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[21:56:39] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[21:56:39] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[21:56:39] [ENEMY] [Enemy9] Death animation component initialized
[21:56:39] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:39] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[21:56:39] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[21:56:39] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[21:56:39] [ENEMY] [Enemy10] Death animation component initialized
[21:56:39] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:39] [INFO] [BloodyFeet:Player] Footprint scene loaded
[21:56:39] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[21:56:39] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[21:56:39] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[21:56:39] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:56:39] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:56:39] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:56:39] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:56:39] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:56:39] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[21:56:39] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[21:56:39] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[21:56:39] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:56:39] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[21:56:39] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[21:56:39] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[21:56:39] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[21:56:39] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[21:56:39] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[21:56:39] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[21:56:39] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[21:56:39] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[21:56:39] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[21:56:39] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[21:56:39] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[21:56:39] [INFO] [ScoreManager] Level started with 10 enemies
[21:56:39] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[21:56:39] [INFO] [CinemaEffects] Found player node: Player
[21:56:39] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[21:56:39] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 20)
[21:56:39] [ENEMY] [Enemy1] Registered as sound listener
[21:56:39] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[21:56:39] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[21:56:39] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 21)
[21:56:39] [ENEMY] [Enemy2] Registered as sound listener
[21:56:39] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[21:56:39] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[21:56:39] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 22)
[21:56:39] [ENEMY] [Enemy3] Registered as sound listener
[21:56:39] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[21:56:39] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[21:56:39] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 23)
[21:56:39] [ENEMY] [Enemy4] Registered as sound listener
[21:56:39] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[21:56:39] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[21:56:39] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 24)
[21:56:39] [ENEMY] [Enemy5] Registered as sound listener
[21:56:39] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[21:56:39] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[21:56:39] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 25)
[21:56:39] [ENEMY] [Enemy6] Registered as sound listener
[21:56:39] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[21:56:39] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[21:56:39] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 26)
[21:56:39] [ENEMY] [Enemy7] Registered as sound listener
[21:56:39] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[21:56:39] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[21:56:39] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 27)
[21:56:39] [ENEMY] [Enemy8] Registered as sound listener
[21:56:39] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[21:56:39] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[21:56:39] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 28)
[21:56:39] [ENEMY] [Enemy9] Registered as sound listener
[21:56:39] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[21:56:39] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[21:56:39] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 29)
[21:56:39] [ENEMY] [Enemy10] Registered as sound listener
[21:56:39] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[21:56:39] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[21:56:39] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:56:39] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:56:39] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:56:39] [INFO] [LastChance] Found player: Player
[21:56:39] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:56:39] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:56:39] [INFO] [LastChance] Connected to player Died signal (C#)
[21:56:39] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[21:56:39] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:39] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:39] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:39] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:39] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:39] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:39] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=213.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:39] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:39] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:56:39] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:56:39] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:56:39] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:56:39] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[21:56:39] [INFO] [Player.Grenade] G pressed - starting grab animation
[21:56:39] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:56:39] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (663.891, 1125.102)
[21:56:39] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[21:56:39] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[21:56:39] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[21:56:39] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[21:56:39] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[21:56:39] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[21:56:39] [INFO] [Player.Grenade] Step 1 complete! Drag: (143.9206, 16.697632)
[21:56:39] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[21:56:39] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[21:56:40] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:56:40] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[21:56:40] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(449,1051), corner_timer=0.30
[21:56:40] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(449,1051), corner_timer=0.30
[21:56:41] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(390,970), corner_timer=-0.02
[21:56:41] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:56:41] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(390,970), corner_timer=-0.02
[21:56:41] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[21:56:41] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(387,966), corner_timer=0.30
[21:56:41] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(387,966), corner_timer=0.30
[21:56:41] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(311,895), corner_timer=-0.02
[21:56:41] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[21:56:41] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(307,893), corner_timer=0.30
[21:56:41] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(271,864), corner_timer=-0.02
[21:56:41] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[21:56:41] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(271,864), corner_timer=0.30
[21:56:42] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(271,864), corner_timer=-0.02
[21:56:42] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[21:56:42] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(271,864), corner_timer=0.30
[21:56:42] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(271,864), corner_timer=-0.02
[21:56:42] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[21:56:42] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(271,864), corner_timer=0.30
[21:56:42] [INFO] [Player.Grenade.Simple] Throwing! Target: (917.9119, 618.9341), Distance: 732,4, Speed: 640,4, Friction: 280,0
[21:56:42] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,3638597
[21:56:42] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.93453, -0.355884), Speed: 640.4 (clamped from 640.4, max: 1186.5)
[21:56:42] [INFO] [FragGrenade] Grenade thrown (simple mode) - impact detection enabled
[21:56:42] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[21:56:42] [INFO] [Player.Grenade.Simple] Grenade thrown!
[21:56:42] [INFO] [Player.Grenade] State reset to IDLE
[21:56:42] [INFO] [Player.Grenade] State reset to IDLE
[21:56:42] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[21:56:42] [INFO] [Player.Grenade] Player rotation restored to 0
[21:56:42] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:56:42] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[21:56:42] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(271,864), corner_timer=-0.02
[21:56:42] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[21:56:42] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(271,864), corner_timer=0.30
[21:56:43] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:56:43] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(271,864), corner_timer=-0.02
[21:56:43] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[21:56:43] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(271,864), corner_timer=0.30
[21:56:43] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:56:43] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(271,864), corner_timer=-0.02
[21:56:43] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[21:56:43] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(271,864), corner_timer=0.30
[21:56:43] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:56:43] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (542.4595, 874.8793)
[21:56:43] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=140.7°, current=34.7°, player=(271,864), corner_timer=0.00
[21:56:43] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:56:43] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[21:56:43] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=236.3°, current=40.4°, player=(271,864), corner_timer=0.00
[21:56:43] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:56:43] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:56:43] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (573.2574, 838.8549)
[21:56:43] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=145.5°, current=32.1°, player=(271,864), corner_timer=0.00
[21:56:43] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:56:43] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[21:56:43] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=180.0°, current=37.8°, player=(271,864), corner_timer=0.00
[21:56:43] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(271,864), corner_timer=-0.02
[21:56:43] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[21:56:43] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(271,864), corner_timer=0.30
[21:56:44] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:56:44] [INFO] [GrenadeBase] Collision detected with Room2_WallRight (type: StaticBody2D)
[21:56:44] [INFO] [FragGrenade] Impact detected! Body: Room2_WallRight (type: StaticBody2D), triggering explosion
[21:56:44] [INFO] [FragGrenade] Impact detected - exploding immediately!
[21:56:44] [INFO] [GrenadeBase] EXPLODED at (903.8901, 623.4983)!
[21:56:44] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(903.8901, 623.4983), source=NEUTRAL (FragGrenade), range=2937, listeners=29
[21:56:44] [INFO] [SoundPropagation] Cleaned up 19 invalid listeners
[21:56:44] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=8
[21:56:44] [INFO] [FragGrenade] Spawned shrapnel #1 at angle -19.2 degrees
[21:56:44] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 85.1 degrees
[21:56:44] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 171.5 degrees
[21:56:44] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 255.9 degrees
[21:56:44] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(271,864), corner_timer=-0.02
[21:56:44] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[21:56:44] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(271,864), corner_timer=0.30
[21:56:44] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:56:44] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.5°, current=89.5°, player=(271,864), corner_timer=-0.02
[21:56:44] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[21:56:44] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(271,864), corner_timer=0.30
[21:56:44] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:56:44] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:44] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[21:56:44] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[21:56:44] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[21:56:44] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:56:44] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:56:44] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:56:44] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[21:56:44] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:56:44] [ENEMY] [Enemy1] Death animation component initialized
[21:56:44] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:44] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[21:56:44] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[21:56:44] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[21:56:44] [ENEMY] [Enemy2] Death animation component initialized
[21:56:44] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:44] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[21:56:44] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[21:56:44] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[21:56:44] [ENEMY] [Enemy3] Death animation component initialized
[21:56:44] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:44] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[21:56:44] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[21:56:44] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[21:56:44] [ENEMY] [Enemy4] Death animation component initialized
[21:56:44] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:44] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[21:56:44] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[21:56:44] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[21:56:44] [ENEMY] [Enemy5] Death animation component initialized
[21:56:44] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:44] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[21:56:44] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[21:56:44] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[21:56:44] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:56:44] [ENEMY] [Enemy6] Death animation component initialized
[21:56:44] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:44] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[21:56:44] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[21:56:44] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[21:56:44] [ENEMY] [Enemy7] Death animation component initialized
[21:56:44] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:44] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[21:56:44] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[21:56:44] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[21:56:44] [ENEMY] [Enemy8] Death animation component initialized
[21:56:44] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:44] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[21:56:44] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[21:56:44] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[21:56:44] [ENEMY] [Enemy9] Death animation component initialized
[21:56:44] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:44] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[21:56:44] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[21:56:44] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[21:56:44] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:56:44] [ENEMY] [Enemy10] Death animation component initialized
[21:56:44] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:44] [INFO] [BloodyFeet:Player] Footprint scene loaded
[21:56:44] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[21:56:44] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[21:56:44] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[21:56:44] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:56:44] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:56:44] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:56:44] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:56:44] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:56:44] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[21:56:44] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[21:56:44] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[21:56:44] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:56:44] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[21:56:44] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[21:56:44] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[21:56:44] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[21:56:44] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[21:56:44] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[21:56:44] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[21:56:44] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[21:56:44] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[21:56:44] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[21:56:44] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[21:56:44] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[21:56:44] [INFO] [ScoreManager] Level started with 10 enemies
[21:56:44] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[21:56:44] [INFO] [CinemaEffects] Found player node: Player
[21:56:44] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[21:56:44] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[21:56:44] [ENEMY] [Enemy1] Registered as sound listener
[21:56:44] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[21:56:44] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[21:56:44] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[21:56:44] [ENEMY] [Enemy2] Registered as sound listener
[21:56:44] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[21:56:44] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[21:56:44] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[21:56:44] [ENEMY] [Enemy3] Registered as sound listener
[21:56:44] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[21:56:44] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[21:56:44] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[21:56:44] [ENEMY] [Enemy4] Registered as sound listener
[21:56:44] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[21:56:44] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[21:56:44] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[21:56:44] [ENEMY] [Enemy5] Registered as sound listener
[21:56:44] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[21:56:44] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[21:56:44] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[21:56:44] [ENEMY] [Enemy6] Registered as sound listener
[21:56:44] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[21:56:44] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[21:56:44] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[21:56:44] [ENEMY] [Enemy7] Registered as sound listener
[21:56:44] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[21:56:44] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[21:56:44] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[21:56:44] [ENEMY] [Enemy8] Registered as sound listener
[21:56:44] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[21:56:44] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[21:56:44] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[21:56:44] [ENEMY] [Enemy9] Registered as sound listener
[21:56:44] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[21:56:44] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[21:56:44] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[21:56:44] [ENEMY] [Enemy10] Registered as sound listener
[21:56:44] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[21:56:44] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[21:56:44] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:44] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:44] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:44] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:44] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:44] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:44] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:44] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:44] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:56:44] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:56:44] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:56:44] [INFO] [LastChance] Found player: Player
[21:56:44] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:56:44] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:56:44] [INFO] [LastChance] Connected to player Died signal (C#)
[21:56:44] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[21:56:44] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:56:44] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:56:44] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:56:45] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:56:45] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[21:56:45] [INFO] [Player.Grenade] G pressed - starting grab animation
[21:56:45] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:56:45] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (647.14716, 1014.23004)
[21:56:45] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[21:56:45] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[21:56:45] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[21:56:45] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[21:56:45] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[21:56:45] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[21:56:45] [INFO] [Player.Grenade] Step 1 complete! Drag: (106.5517, 19.369202)
[21:56:45] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[21:56:45] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[21:56:46] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:56:46] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[21:56:46] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1056), corner_timer=0.30
[21:56:46] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1056), corner_timer=0.30
[21:56:46] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,951), corner_timer=-0.02
[21:56:46] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:56:46] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,951), corner_timer=-0.02
[21:56:46] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[21:56:46] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,946), corner_timer=0.30
[21:56:46] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,946), corner_timer=0.30
[21:56:46] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(414,856), corner_timer=-0.02
[21:56:46] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[21:56:46] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(410,852), corner_timer=0.30
[21:56:47] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(364,767), corner_timer=-0.02
[21:56:47] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[21:56:47] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(364,761), corner_timer=0.30
[21:56:47] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(364,728), corner_timer=-0.02
[21:56:47] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[21:56:47] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(364,728), corner_timer=0.30
[21:56:47] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(364,728), corner_timer=-0.02
[21:56:47] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[21:56:47] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(364,728), corner_timer=0.30
[21:56:48] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:56:48] [INFO] [Player.Grenade.Simple] Throwing! Target: (907.89105, 811.8362), Distance: 568,3, Speed: 564,1, Friction: 280,0
[21:56:48] [INFO] [Player.Grenade] Player rotated for throw: 0 -> 0,15305753
[21:56:48] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.98831, 0.152461), Speed: 564.1 (clamped from 564.1, max: 1186.5)
[21:56:48] [INFO] [FragGrenade] Grenade thrown (simple mode) - impact detection enabled
[21:56:48] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[21:56:48] [INFO] [Player.Grenade.Simple] Grenade thrown!
[21:56:48] [INFO] [Player.Grenade] State reset to IDLE
[21:56:48] [INFO] [Player.Grenade] State reset to IDLE
[21:56:48] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[21:56:48] [INFO] [Player.Grenade] Player rotation restored to 0
[21:56:48] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(364,728), corner_timer=-0.02
[21:56:48] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[21:56:48] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(364,728), corner_timer=0.30
[21:56:48] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:56:48] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[21:56:48] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(364,728), corner_timer=-0.02
[21:56:48] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[21:56:48] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(364,728), corner_timer=0.30
[21:56:48] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:56:48] [INFO] [GrenadeBase] Collision detected with Enemy3 (type: CharacterBody2D)
[21:56:48] [INFO] [FragGrenade] Impact detected! Body: Enemy3 (type: CharacterBody2D), triggering explosion
[21:56:48] [INFO] [FragGrenade] Impact detected - exploding immediately!
[21:56:48] [INFO] [GrenadeBase] EXPLODED at (689.683, 781.0843)!
[21:56:48] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(689.683, 781.0843), source=NEUTRAL (FragGrenade), range=2937, listeners=20
[21:56:48] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[21:56:48] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[21:56:48] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/2 -> 1/2
[21:56:48] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[21:56:48] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.315007, -0.949089), lethal=false
[21:56:48] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:56:48] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[21:56:48] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1)
[21:56:48] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 1/2 -> 0/2
[21:56:48] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[21:56:48] [INFO] [ImpactEffects] spawn_blood_effect called at (700, 750), dir=(0.315007, -0.949089), lethal=true
[21:56:48] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:56:48] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[21:56:48] [INFO] [ImpactEffects] Blood effect spawned at (700, 750) (scale=1.5)
[21:56:48] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[21:56:48] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[21:56:48] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[21:56:48] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[21:56:48] [INFO] [DeathAnim] Started - Angle: -71.6 deg, Index: 7
[21:56:48] [ENEMY] [Enemy3] Death animation started with hit direction: (0.315007, -0.949089)
[21:56:48] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 32.8
[21:56:48] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 15.8 degrees
[21:56:48] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 101.7 degrees
[21:56:48] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 162.8 degrees
[21:56:48] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 260.9 degrees
[21:56:49] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(364,728), corner_timer=-0.02
[21:56:49] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[21:56:49] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(364,728), corner_timer=0.30
[21:56:49] [INFO] [BloodDecal] Blood puddle created at (713.8356, 720.9694) (added to group)
[21:56:49] [INFO] [BloodDecal] Blood puddle created at (743.2408, 717.7366) (added to group)
[21:56:49] [INFO] [BloodDecal] Blood puddle created at (727.0309, 714.6476) (added to group)
[21:56:49] [INFO] [BloodDecal] Blood puddle created at (728.7328, 698.8788) (added to group)
[21:56:49] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:56:49] [INFO] [BloodDecal] Blood puddle created at (724.8571, 670.67) (added to group)
[21:56:49] [INFO] [BloodDecal] Blood puddle created at (733.9312, 658.3381) (added to group)
[21:56:49] [INFO] [BloodDecal] Blood puddle created at (705.4944, 696.1909) (added to group)
[21:56:49] [INFO] [BloodDecal] Blood puddle created at (733.4054, 676.3471) (added to group)
[21:56:49] [INFO] [BloodDecal] Blood puddle created at (713.5688, 689.9382) (added to group)
[21:56:49] [INFO] [BloodDecal] Blood puddle created at (721.3762, 685.0758) (added to group)
[21:56:49] [INFO] [BloodDecal] Blood puddle created at (752.6132, 650.9167) (added to group)
[21:56:49] [INFO] [BloodDecal] Blood puddle created at (762.0999, 710.0615) (added to group)
[21:56:49] [INFO] [BloodDecal] Blood puddle created at (709.4709, 652.2837) (added to group)
[21:56:49] [ENEMY] [Enemy3] Ragdoll activated
[21:56:49] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[21:56:49] [INFO] [BloodDecal] Blood puddle created at (767.8724, 676.7372) (added to group)
[21:56:49] [INFO] [BloodDecal] Blood puddle created at (760.3723, 742.7014) (added to group)
[21:56:49] [INFO] [BloodDecal] Blood puddle created at (726.3597, 693.0212) (added to group)
[21:56:49] [INFO] [BloodDecal] Blood puddle created at (717.5081, 719.5369) (added to group)
[21:56:49] [INFO] [BloodDecal] Blood puddle created at (736.3939, 686.3456) (added to group)
[21:56:49] [INFO] [BloodDecal] Blood puddle created at (720.954, 700.8151) (added to group)
[21:56:49] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:56:49] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:49] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[21:56:49] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[21:56:49] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[21:56:49] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:56:49] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:56:49] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:56:49] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[21:56:49] [ENEMY] [Enemy1] Death animation component initialized
[21:56:49] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:49] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[21:56:49] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[21:56:49] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[21:56:49] [ENEMY] [Enemy2] Death animation component initialized
[21:56:49] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:49] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[21:56:49] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[21:56:49] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[21:56:49] [ENEMY] [Enemy3] Death animation component initialized
[21:56:49] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:49] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[21:56:49] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[21:56:49] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[21:56:49] [ENEMY] [Enemy4] Death animation component initialized
[21:56:49] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:49] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[21:56:49] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[21:56:49] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[21:56:49] [ENEMY] [Enemy5] Death animation component initialized
[21:56:49] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:49] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[21:56:49] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[21:56:49] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[21:56:49] [ENEMY] [Enemy6] Death animation component initialized
[21:56:49] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:49] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[21:56:49] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[21:56:49] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[21:56:49] [ENEMY] [Enemy7] Death animation component initialized
[21:56:49] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:49] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[21:56:49] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[21:56:49] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[21:56:49] [ENEMY] [Enemy8] Death animation component initialized
[21:56:49] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:49] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[21:56:49] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[21:56:49] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[21:56:49] [ENEMY] [Enemy9] Death animation component initialized
[21:56:49] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:49] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[21:56:49] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[21:56:49] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[21:56:49] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:56:49] [ENEMY] [Enemy10] Death animation component initialized
[21:56:49] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:49] [INFO] [BloodyFeet:Player] Footprint scene loaded
[21:56:49] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[21:56:49] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[21:56:49] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[21:56:49] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:56:49] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:56:49] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:56:49] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:56:49] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:56:49] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[21:56:49] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[21:56:49] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[21:56:49] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:56:49] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[21:56:49] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[21:56:49] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[21:56:49] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[21:56:49] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[21:56:49] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[21:56:49] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[21:56:49] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[21:56:49] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[21:56:49] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[21:56:49] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[21:56:49] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[21:56:49] [INFO] [ScoreManager] Level started with 10 enemies
[21:56:49] [INFO] [BloodDecal] Blood puddle created at (775.5103, 651.9178) (added to group)
[21:56:49] [INFO] [BloodDecal] Blood puddle created at (792.6935, 708.1779) (added to group)
[21:56:49] [INFO] [BloodDecal] Blood puddle created at (701.8369, 654.8378) (added to group)
[21:56:49] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[21:56:49] [INFO] [CinemaEffects] Found player node: Player
[21:56:49] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[21:56:49] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[21:56:49] [ENEMY] [Enemy1] Registered as sound listener
[21:56:49] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[21:56:49] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[21:56:49] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[21:56:49] [ENEMY] [Enemy2] Registered as sound listener
[21:56:49] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[21:56:49] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[21:56:49] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[21:56:49] [ENEMY] [Enemy3] Registered as sound listener
[21:56:49] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[21:56:49] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[21:56:49] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[21:56:49] [ENEMY] [Enemy4] Registered as sound listener
[21:56:49] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[21:56:49] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[21:56:49] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[21:56:49] [ENEMY] [Enemy5] Registered as sound listener
[21:56:49] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[21:56:49] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[21:56:49] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[21:56:49] [ENEMY] [Enemy6] Registered as sound listener
[21:56:49] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[21:56:49] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[21:56:49] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[21:56:49] [ENEMY] [Enemy7] Registered as sound listener
[21:56:49] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[21:56:49] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[21:56:49] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[21:56:49] [ENEMY] [Enemy8] Registered as sound listener
[21:56:49] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[21:56:49] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[21:56:49] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[21:56:49] [ENEMY] [Enemy9] Registered as sound listener
[21:56:49] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[21:56:49] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[21:56:49] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[21:56:49] [ENEMY] [Enemy10] Registered as sound listener
[21:56:49] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[21:56:49] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[21:56:49] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:49] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:49] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=281.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:49] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:49] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:49] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:49] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:49] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:49] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:56:49] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:56:49] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:56:49] [INFO] [LastChance] Found player: Player
[21:56:49] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:56:49] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:56:49] [INFO] [LastChance] Connected to player Died signal (C#)
[21:56:49] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[21:56:49] [INFO] [BloodDecal] Blood puddle created at (708.152, 726.2109) (added to group)
[21:56:49] [INFO] [BloodDecal] Blood puddle created at (705.7858, 635.8441) (added to group)
[21:56:49] [INFO] [BloodDecal] Blood puddle created at (746.585, 715.2439) (added to group)
[21:56:49] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:56:49] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:56:49] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:56:49] [INFO] [BloodDecal] Blood puddle created at (712.5179, 710.3839) (added to group)
[21:56:49] [INFO] [BloodDecal] Blood puddle created at (737.6205, 733.8802) (added to group)
[21:56:49] [INFO] [BloodDecal] Blood puddle created at (678.3434, 692.2696) (added to group)
[21:56:49] [INFO] [BloodDecal] Blood puddle created at (791.2273, 670.0035) (added to group)
[21:56:49] [INFO] [BloodDecal] Blood puddle created at (749.2878, 733.6072) (added to group)
[21:56:49] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:56:49] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[21:56:49] [INFO] [Player.Grenade] G pressed - starting grab animation
[21:56:49] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:56:49] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (700.1678, 1264.026)
[21:56:49] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[21:56:49] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[21:56:49] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[21:56:49] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[21:56:49] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[21:56:49] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[21:56:49] [INFO] [Player.Grenade] Step 1 complete! Drag: (292.82776, 8.0147705)
[21:56:49] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[21:56:49] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[21:56:51] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:56:51] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[21:56:51] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1012), corner_timer=0.30
[21:56:51] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1012), corner_timer=0.30
[21:56:51] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(412,923), corner_timer=-0.02
[21:56:51] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:56:51] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(412,923), corner_timer=-0.02
[21:56:51] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[21:56:51] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(409,918), corner_timer=0.30
[21:56:51] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(409,918), corner_timer=0.30
[21:56:51] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(399,821), corner_timer=-0.02
[21:56:51] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[21:56:51] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(399,817), corner_timer=0.30
[21:56:52] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(399,788), corner_timer=-0.02
[21:56:52] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[21:56:52] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(399,788), corner_timer=0.30
[21:56:52] [INFO] [Player.Grenade.Simple] Throwing! Target: (875.8243, 568.61115), Distance: 539,2, Speed: 549,5, Friction: 280,0
[21:56:52] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,43311083
[21:56:52] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.907665, -0.419696), Speed: 549.5 (clamped from 549.5, max: 1186.5)
[21:56:52] [INFO] [FragGrenade] Grenade thrown (simple mode) - impact detection enabled
[21:56:52] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[21:56:52] [INFO] [Player.Grenade.Simple] Grenade thrown!
[21:56:52] [INFO] [Player.Grenade] State reset to IDLE
[21:56:52] [INFO] [Player.Grenade] State reset to IDLE
[21:56:52] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[21:56:52] [INFO] [Player.Grenade] Player rotation restored to 0
[21:56:52] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(399,788), corner_timer=-0.02
[21:56:52] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[21:56:52] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(399,788), corner_timer=0.30
[21:56:52] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[21:56:52] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:56:52] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (848.1199, 960.8452)
[21:56:52] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=23.2°, current=-74.9°, player=(399,788), corner_timer=0.00
[21:56:52] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:56:52] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[21:56:52] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=191.3°, current=-63.1°, player=(399,788), corner_timer=0.00
[21:56:52] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:56:52] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (816.9025, 981.2023)
[21:56:52] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(399,788), corner_timer=-0.02
[21:56:52] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[21:56:52] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(399,788), corner_timer=0.30
[21:56:52] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=23.2°, current=-66.1°, player=(399,788), corner_timer=0.00
[21:56:52] [ENEMY] [Enemy4] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:56:52] [ENEMY] [Enemy4] EVADING_GRENADE started: escaping to (832.2867, 974.2463)
[21:56:52] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:56:52] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[21:56:52] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=66.5°, current=-56.4°, player=(399,788), corner_timer=0.00
[21:56:52] [ENEMY] [Enemy4] EVADING_GRENADE: Escaped to safe distance
[21:56:52] [ENEMY] [Enemy4] State: EVADING_GRENADE -> IDLE
[21:56:52] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=303.8°, current=-55.3°, player=(399,788), corner_timer=0.00
[21:56:52] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:56:52] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (807.202, 980.8571)
[21:56:52] [ENEMY] [Enemy4] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=168.8°, current=-50.7°, player=(399,788), corner_timer=0.00
[21:56:52] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=23.2°, current=-54.4°, player=(399,788), corner_timer=0.00
[21:56:52] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:56:52] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[21:56:52] [ENEMY] [Enemy4] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:56:52] [ENEMY] [Enemy4] EVADING_GRENADE started: escaping to (822.9092, 973.7418)
[21:56:52] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=315.0°, current=-48.7°, player=(399,788), corner_timer=0.00
[21:56:52] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=74.4°, current=-51.6°, player=(399,788), corner_timer=0.00
[21:56:52] [ENEMY] [Enemy4] EVADING_GRENADE: Escaped to safe distance
[21:56:52] [ENEMY] [Enemy4] State: EVADING_GRENADE -> IDLE
[21:56:52] [ENEMY] [Enemy4] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=180.0°, current=-45.9°, player=(399,788), corner_timer=0.00
[21:56:52] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:56:52] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (779.2076, 974.8594)
[21:56:52] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=23.2°, current=-43.4°, player=(399,788), corner_timer=0.00
[21:56:52] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:56:52] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[21:56:52] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=191.3°, current=-37.7°, player=(399,788), corner_timer=0.00
[21:56:53] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:56:53] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (779.7314, 964.1976)
[21:56:53] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:56:53] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=23.2°, current=-45.0°, player=(399,788), corner_timer=0.00
[21:56:53] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:56:53] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[21:56:53] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=67.5°, current=-23.9°, player=(399,788), corner_timer=0.00
[21:56:53] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(399,788), corner_timer=-0.02
[21:56:53] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[21:56:53] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(399,788), corner_timer=0.30
[21:56:53] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:56:53] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(399,788), corner_timer=-0.02
[21:56:53] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[21:56:53] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(399,788), corner_timer=0.30
[21:56:53] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:56:53] [INFO] [SoundPropagation] Sound emitted: type=GRENADE_LANDING, pos=(879.2173, 567.0421), source=NEUTRAL (FragGrenade), range=112, listeners=19
[21:56:53] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[21:56:53] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=10, self=0, below_threshold=0
[21:56:53] [INFO] [GrenadeBase] Grenade landed at (879.2173, 567.0421)
[21:56:53] [INFO] [FragGrenade] Impact detected - exploding immediately!
[21:56:53] [INFO] [GrenadeBase] EXPLODED at (879.2173, 567.0421)!
[21:56:53] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(879.2173, 567.0421), source=NEUTRAL (FragGrenade), range=2937, listeners=10
[21:56:53] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[21:56:53] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 18.5 degrees
[21:56:53] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 93.3 degrees
[21:56:53] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 190.3 degrees
[21:56:53] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 288.0 degrees
[21:56:53] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(399,788), corner_timer=-0.02
[21:56:53] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[21:56:53] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(399,788), corner_timer=0.30
[21:56:54] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:56:54] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/2 -> 1/2
[21:56:54] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[21:56:54] [INFO] [ImpactEffects] spawn_blood_effect called at (787.7007, 803.8072), dir=(-0.190415, 0.981704), lethal=false
[21:56:54] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:56:54] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[21:56:54] [INFO] [ImpactEffects] Blood effect spawned at (787.7007, 803.8072) (scale=1)
[21:56:54] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:56:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:54] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[21:56:54] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[21:56:54] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[21:56:54] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:56:54] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:56:54] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:56:54] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[21:56:54] [ENEMY] [Enemy1] Death animation component initialized
[21:56:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:54] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[21:56:54] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[21:56:54] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[21:56:54] [ENEMY] [Enemy2] Death animation component initialized
[21:56:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:54] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[21:56:54] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[21:56:54] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[21:56:54] [ENEMY] [Enemy3] Death animation component initialized
[21:56:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:54] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[21:56:54] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[21:56:54] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[21:56:54] [ENEMY] [Enemy4] Death animation component initialized
[21:56:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:54] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[21:56:54] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[21:56:54] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[21:56:54] [ENEMY] [Enemy5] Death animation component initialized
[21:56:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:54] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[21:56:54] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[21:56:54] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[21:56:54] [ENEMY] [Enemy6] Death animation component initialized
[21:56:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:54] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[21:56:54] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[21:56:54] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[21:56:54] [ENEMY] [Enemy7] Death animation component initialized
[21:56:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:54] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[21:56:54] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[21:56:54] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[21:56:54] [ENEMY] [Enemy8] Death animation component initialized
[21:56:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:54] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[21:56:54] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[21:56:54] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[21:56:54] [ENEMY] [Enemy9] Death animation component initialized
[21:56:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:54] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[21:56:54] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[21:56:54] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[21:56:54] [ENEMY] [Enemy10] Death animation component initialized
[21:56:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:54] [INFO] [BloodyFeet:Player] Footprint scene loaded
[21:56:54] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[21:56:54] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[21:56:54] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[21:56:54] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:56:54] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:56:54] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:56:54] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:56:54] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:56:54] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[21:56:54] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[21:56:54] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[21:56:54] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:56:54] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[21:56:54] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[21:56:54] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[21:56:54] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[21:56:54] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[21:56:54] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[21:56:54] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[21:56:54] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[21:56:54] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[21:56:54] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[21:56:54] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[21:56:54] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[21:56:54] [INFO] [ScoreManager] Level started with 10 enemies
[21:56:54] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[21:56:54] [INFO] [CinemaEffects] Found player node: Player
[21:56:54] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[21:56:54] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[21:56:54] [ENEMY] [Enemy1] Registered as sound listener
[21:56:54] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[21:56:54] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[21:56:54] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[21:56:54] [ENEMY] [Enemy2] Registered as sound listener
[21:56:54] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[21:56:54] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[21:56:54] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[21:56:54] [ENEMY] [Enemy3] Registered as sound listener
[21:56:54] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[21:56:54] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[21:56:54] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[21:56:54] [ENEMY] [Enemy4] Registered as sound listener
[21:56:54] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[21:56:54] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[21:56:54] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[21:56:54] [ENEMY] [Enemy5] Registered as sound listener
[21:56:54] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[21:56:54] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[21:56:54] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[21:56:54] [ENEMY] [Enemy6] Registered as sound listener
[21:56:54] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[21:56:54] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[21:56:54] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[21:56:54] [ENEMY] [Enemy7] Registered as sound listener
[21:56:54] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[21:56:54] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[21:56:54] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[21:56:54] [ENEMY] [Enemy8] Registered as sound listener
[21:56:54] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[21:56:54] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[21:56:54] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[21:56:54] [ENEMY] [Enemy9] Registered as sound listener
[21:56:54] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[21:56:54] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[21:56:54] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[21:56:54] [ENEMY] [Enemy10] Registered as sound listener
[21:56:54] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[21:56:54] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[21:56:54] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:54] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:54] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:54] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:54] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:54] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:54] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=157.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:54] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:54] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:56:54] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:56:54] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:56:54] [INFO] [LastChance] Found player: Player
[21:56:54] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:56:54] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:56:54] [INFO] [LastChance] Connected to player Died signal (C#)
[21:56:54] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[21:56:54] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:56:54] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:56:54] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:56:54] [INFO] [BloodDecal] Blood puddle created at (776.6053, 871.1035) (added to group)
[21:56:54] [INFO] [BloodDecal] Blood puddle created at (804.8093, 914.4863) (added to group)
[21:56:54] [INFO] [BloodyFeet:Enemy4] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[21:56:54] [INFO] [BloodDecal] Blood puddle created at (795.5622, 921.2379) (added to group)
[21:56:54] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:56:54] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[21:56:54] [INFO] [Player.Grenade] G pressed - starting grab animation
[21:56:54] [INFO] [BloodDecal] Blood puddle created at (779.579, 962.4771) (added to group)
[21:56:54] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:56:54] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (412.32095, 1092.3748)
[21:56:54] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[21:56:54] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[21:56:54] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[21:56:54] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[21:56:54] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[21:56:54] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[21:56:54] [INFO] [Player.Grenade] Step 1 complete! Drag: (119.38455, 12.690186)
[21:56:54] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[21:56:54] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[21:56:55] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:56:55] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[21:56:55] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1067), corner_timer=0.30
[21:56:55] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1067), corner_timer=0.30
[21:56:56] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,962), corner_timer=-0.02
[21:56:56] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:56:56] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,962), corner_timer=-0.02
[21:56:56] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[21:56:56] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,957), corner_timer=0.30
[21:56:56] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,957), corner_timer=0.30
[21:56:56] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(443,855), corner_timer=-0.02
[21:56:56] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[21:56:56] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(441,850), corner_timer=0.30
[21:56:56] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=163.6°, current=123.7°, player=(426,830), corner_timer=0.00
[21:56:56] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[21:56:56] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=165.2°, current=-66.1°, player=(419,824), corner_timer=0.00
[21:56:56] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(362,810), corner_timer=-0.02
[21:56:56] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[21:56:56] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(356,810), corner_timer=0.30
[21:56:56] [ENEMY] [Enemy4] Memory: high confidence (0.87) - transitioning to PURSUING
[21:56:56] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[21:56:56] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=-168.9°, current=-67.5°, player=(345,810), corner_timer=0.00
[21:56:56] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[21:56:56] [INFO] [Player.Grenade.Simple] Throwing! Target: (728.18335, 794.31006), Distance: 417,2, Speed: 483,4, Friction: 280,0
[21:56:56] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,03863031
[21:56:56] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.999254, -0.038621), Speed: 483.4 (clamped from 483.4, max: 1186.5)
[21:56:56] [INFO] [FragGrenade] Grenade thrown (simple mode) - impact detection enabled
[21:56:56] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[21:56:56] [INFO] [Player.Grenade.Simple] Grenade thrown!
[21:56:56] [INFO] [Player.Grenade] State reset to IDLE
[21:56:56] [INFO] [Player.Grenade] State reset to IDLE
[21:56:56] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[21:56:57] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=172.2°, current=-138.5°, player=(299,811), corner_timer=0.00
[21:56:57] [INFO] [Player.Grenade] Player rotation restored to 0
[21:56:57] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:56:57] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (762.9731, 724.6526)
[21:56:57] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=EVADING_GRENADE, target=-18.7°, current=-121.8°, player=(291,816), corner_timer=0.00
[21:56:57] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:56:57] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:56:57] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(291,816), corner_timer=-0.02
[21:56:57] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[21:56:57] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=169.7°, current=-119.0°, player=(290,819), corner_timer=0.00
[21:56:57] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(290,819), corner_timer=0.30
[21:56:57] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=169.3°, current=-152.4°, player=(288,821), corner_timer=0.00
[21:56:57] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:56:57] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (782.1338, 690.6214)
[21:56:57] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=EVADING_GRENADE, target=-18.9°, current=-129.6°, player=(286,827), corner_timer=0.00
[21:56:57] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:56:57] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:56:57] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=167.0°, current=-126.8°, player=(285,830), corner_timer=0.00
[21:56:57] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=166.3°, current=-160.9°, player=(284,834), corner_timer=0.00
[21:56:57] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:56:57] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (793.2216, 650.4252)
[21:56:57] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=EVADING_GRENADE, target=-25.8°, current=-138.8°, player=(283,842), corner_timer=0.00
[21:56:57] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:56:57] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:56:57] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=163.2°, current=-135.9°, player=(283,847), corner_timer=0.00
[21:56:57] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[21:56:57] [INFO] [SoundPropagation] Sound emitted: type=GRENADE_LANDING, pos=(492.1659, 803.4321), source=NEUTRAL (FragGrenade), range=112, listeners=20
[21:56:57] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[21:56:57] [ENEMY] [Enemy3] Heard GRENADE_LANDING at (492.1659, 803.4321), intensity=0.51
[21:56:57] [ENEMY] [Enemy3] EVADING_GRENADE (from sound): escaping from (492.1659, 803.4321)
[21:56:57] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=9, self=0, below_threshold=0
[21:56:57] [INFO] [GrenadeBase] Grenade landed at (492.1659, 803.4321)
[21:56:57] [INFO] [FragGrenade] Impact detected - exploding immediately!
[21:56:57] [INFO] [GrenadeBase] EXPLODED at (492.1659, 803.4321)!
[21:56:57] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(492.1659, 803.4321), source=NEUTRAL (FragGrenade), range=2937, listeners=10
[21:56:57] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=0, below_threshold=6
[21:56:57] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 3/3 -> 2/3
[21:56:57] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[21:56:57] [INFO] [ImpactEffects] spawn_blood_effect called at (551.7278, 766.0871), dir=(0.847238, -0.531213), lethal=false
[21:56:57] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:56:57] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[21:56:57] [INFO] [ImpactEffects] Blood effect spawned at (551.7278, 766.0871) (scale=1)
[21:56:57] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/3 -> 1/3
[21:56:57] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[21:56:57] [INFO] [ImpactEffects] spawn_blood_effect called at (551.7278, 766.0871), dir=(0.847238, -0.531213), lethal=false
[21:56:57] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:56:57] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[21:56:57] [INFO] [ImpactEffects] Blood effect spawned at (551.7278, 766.0871) (scale=1)
[21:56:57] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 1/3 -> 0/3
[21:56:57] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[21:56:57] [INFO] [ImpactEffects] spawn_blood_effect called at (551.7278, 766.0871), dir=(0.847238, -0.531213), lethal=true
[21:56:57] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:56:57] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[21:56:57] [INFO] [ImpactEffects] Blood effect spawned at (551.7278, 766.0871) (scale=1.5)
[21:56:57] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[21:56:57] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[21:56:57] [ENEMY] [Enemy1] [AllyDeath] Witnessed at (551.7278, 766.0871), entering SEARCHING
[21:56:57] [ENEMY] [Enemy1] SEARCHING started: center=(551.7278, 766.0871), radius=100, waypoints=5
[21:56:57] [ENEMY] [Enemy3] [AllyDeath] Notified 3 enemies
[21:56:57] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[21:56:57] [INFO] [DeathAnim] Started - Angle: -32.1 deg, Index: 9
[21:56:57] [ENEMY] [Enemy3] Death animation started with hit direction: (0.847238, -0.531213)
[21:56:57] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 70.3
[21:56:57] [INFO] [FragGrenade] Player found in blast radius at distance 214.8
[21:56:57] [INFO] [Player] Spawning blood effect at (282.95407, 851.9444), dir=(-0.9741532, 0.22588804), lethal=False (C#)
[21:56:57] [INFO] [ImpactEffects] spawn_blood_effect called at (282.9541, 851.9444), dir=(-0.974153, 0.225888), lethal=false
[21:56:57] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:56:57] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[21:56:57] [INFO] [ImpactEffects] Blood effect spawned at (282.9541, 851.9444) (scale=1)
[21:56:57] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[21:56:57] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[21:56:57] [INFO] [Player] Spawning blood effect at (282.95407, 851.9444), dir=(-0.9741532, 0.22588804), lethal=False (C#)
[21:56:57] [INFO] [ImpactEffects] spawn_blood_effect called at (282.9541, 851.9444), dir=(-0.974153, 0.225888), lethal=false
[21:56:57] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:56:57] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[21:56:57] [INFO] [ImpactEffects] Blood effect spawned at (282.9541, 851.9444) (scale=1)
[21:56:57] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[21:56:57] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[21:56:57] [INFO] [Player] Spawning blood effect at (282.95407, 851.9444), dir=(-0.9741532, 0.22588804), lethal=False (C#)
[21:56:57] [INFO] [ImpactEffects] spawn_blood_effect called at (282.9541, 851.9444), dir=(-0.974153, 0.225888), lethal=false
[21:56:57] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:56:57] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[21:56:57] [INFO] [ImpactEffects] Blood effect spawned at (282.9541, 851.9444) (scale=1)
[21:56:57] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[21:56:57] [INFO] [PenultimateHit] Triggering penultimate hit effect (HP: 1.0)
[21:56:57] [INFO] [PenultimateHit] Starting penultimate hit effect:
[21:56:57] [INFO] [PenultimateHit]   - Time scale: 0.10
[21:56:57] [INFO] [PenultimateHit]   - Saturation boost: 2.00 (3.0x)
[21:56:57] [INFO] [PenultimateHit]   - Contrast boost: 1.00 (2.0x)
[21:56:57] [INFO] [PenultimateHit]   - Duration: 3.0 real seconds
[21:56:57] [INFO] [PenultimateHit] Applied shader parameters: saturation=2.00, contrast=1.00
[21:56:57] [INFO] [PenultimateHit] Applying saturation to 10 enemies
[21:56:57] [INFO] [PenultimateHit] Applied 4.0x saturation to 6 player sprites
[21:56:57] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[21:56:57] [INFO] [Player] Spawning blood effect at (282.95407, 851.9444), dir=(-0.9741532, 0.22588804), lethal=True (C#)
[21:56:57] [INFO] [ImpactEffects] spawn_blood_effect called at (282.9541, 851.9444), dir=(-0.974153, 0.225888), lethal=true
[21:56:57] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:56:57] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[21:56:57] [INFO] [ImpactEffects] Blood effect spawned at (282.9541, 851.9444) (scale=1.5)
[21:56:57] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[21:56:57] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[21:56:57] [INFO] [CinemaEffects] Player died - triggering death effects
[21:56:57] [INFO] [CinemaEffects] Death effects triggered - starting cigarette burn, expanding spots, and end of reel (top-right)
[21:56:57] [INFO] [PenultimateHit] Player died - ending penultimate effect
[21:56:57] [INFO] [PenultimateHit] Ending penultimate hit effect
[21:56:57] [INFO] [PenultimateHit] Restored original colors to 5 player sprites
[21:56:57] [INFO] [PenultimateHit] Called player RefreshHealthVisual (C#)
[21:56:57] [INFO] [LastChance] Player died
[21:56:57] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 214.8
[21:56:57] [INFO] [FragGrenade] Spawned shrapnel #1 at angle -9.0 degrees
[21:56:57] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 75.1 degrees
[21:56:57] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 187.2 degrees
[21:56:57] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 264.7 degrees
[21:56:57] [INFO] [GrenadeBase] Collision detected with Room2_WallLeft (type: StaticBody2D)
[21:56:57] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=SEARCHING, target=91.9°, current=33.8°, player=(282,851), corner_timer=0.00
[21:56:57] [ENEMY] [Enemy1] SEARCHING corner check: angle -50.9°
[21:56:57] [ENEMY] [Enemy4] PURSUING corner check: angle -94.0°
[21:56:57] [ENEMY] [Enemy2] Memory: medium confidence (0.53) - transitioning to PURSUING
[21:56:57] [ENEMY] [Enemy2] State: IDLE -> PURSUING
[21:56:57] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=109.9°, current=-67.5°, player=(282,873), corner_timer=0.00
[21:56:57] [ENEMY] [Enemy2] PURSUING corner check: angle 180.0°
[21:56:57] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(282,906), corner_timer=-0.02
[21:56:57] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[21:56:57] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(282,912), corner_timer=0.30
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (628.3384, 762.276) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (246.6035, 877.2578) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (230.7488, 901.7993) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (639.1752, 758.7861) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (575.928, 744.1595) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (234.8068, 876.8876) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (628.0988, 738.2656) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (222.7467, 906.9169) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (604.9601, 740.5148) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (209.9805, 889.478) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (225.0863, 918.3473) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (622.9084, 757.8905) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (593.2831, 745.5348) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (607.7376, 766.5814) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (228.5748, 874.7474) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (206.4327, 854.7981) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (600.4028, 772.1952) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (599.7463, 747.3097) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (193.0296, 881.6561) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (176.67, 904.9891) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (225.7395, 903.2925) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (605.8297, 767.9542) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (659.9225, 761.5323) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (237.0287, 902.3383) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (239.6377, 902.6075) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (227.9254, 874.9633) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (618.0228, 735.5939) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (219.7926, 884.4929) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (177.1923, 856.9607) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (222.054, 911.6163) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (219.5095, 932.0939) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (661.1552, 760.3628) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (619.6017, 755.2639) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (184.8535, 963.1229) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (225.4362, 930.0002) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (217.9578, 899.2803) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (181.6492, 886.3911) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (167.7154, 859.6374) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (175.8922, 887.1874) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (640.7484, 768.8298) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (630.8401, 726.439) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (175.0624, 932.7581) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (224.6656, 930.9283) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (188.281, 913.5738) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (679.6539, 793.3912) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (674.7058, 727.2081) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (175.4884, 866.6241) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (647.9164, 787.3129) (added to group)
[21:56:57] [ENEMY] [Enemy1] SEARCHING corner check: angle 153.2°
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (630.7125, 771.808) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (163.1806, 911.8777) (added to group)
[21:56:57] [ENEMY] [Enemy3] Ragdoll activated
[21:56:57] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (660.6824, 763.1937) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (213.2856, 947.4017) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (113.1538, 883.5625) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (129.1337, 925.3218) (added to group)
[21:56:57] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:56:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:57] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[21:56:57] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[21:56:57] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[21:56:57] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:56:57] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:56:57] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:56:57] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[21:56:57] [INFO] [CinemaEffects] Death effects reset
[21:56:57] [ENEMY] [Enemy1] Death animation component initialized
[21:56:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:57] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[21:56:57] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[21:56:57] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[21:56:57] [ENEMY] [Enemy2] Death animation component initialized
[21:56:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:57] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[21:56:57] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[21:56:57] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[21:56:57] [ENEMY] [Enemy3] Death animation component initialized
[21:56:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:57] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[21:56:57] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[21:56:57] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[21:56:57] [ENEMY] [Enemy4] Death animation component initialized
[21:56:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:57] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[21:56:57] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[21:56:57] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[21:56:57] [ENEMY] [Enemy5] Death animation component initialized
[21:56:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:57] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[21:56:57] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[21:56:57] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[21:56:57] [ENEMY] [Enemy6] Death animation component initialized
[21:56:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:57] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[21:56:57] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[21:56:57] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[21:56:57] [ENEMY] [Enemy7] Death animation component initialized
[21:56:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:57] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[21:56:57] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[21:56:57] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[21:56:57] [ENEMY] [Enemy8] Death animation component initialized
[21:56:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:57] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[21:56:57] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[21:56:57] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[21:56:57] [ENEMY] [Enemy9] Death animation component initialized
[21:56:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:57] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[21:56:57] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[21:56:57] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[21:56:57] [ENEMY] [Enemy10] Death animation component initialized
[21:56:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:56:57] [INFO] [BloodyFeet:Player] Footprint scene loaded
[21:56:57] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[21:56:57] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[21:56:57] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[21:56:57] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:56:57] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:56:57] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:56:57] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:56:57] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:56:57] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[21:56:57] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[21:56:57] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[21:56:57] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:56:57] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[21:56:57] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[21:56:57] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[21:56:57] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[21:56:57] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[21:56:57] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[21:56:57] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[21:56:57] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[21:56:57] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[21:56:57] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[21:56:57] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[21:56:57] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[21:56:57] [INFO] [ScoreManager] Level started with 10 enemies
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (642.4375, 795.4752) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (640.6495, 768.712) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (675.8082, 733.2802) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (186.1972, 926.4288) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (130.4097, 1002.617) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (163.0897, 976.024) (added to group)
[21:56:57] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[21:56:57] [INFO] [CinemaEffects] Found player node: Player
[21:56:57] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[21:56:57] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[21:56:57] [ENEMY] [Enemy1] Registered as sound listener
[21:56:57] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[21:56:57] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[21:56:57] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[21:56:57] [ENEMY] [Enemy2] Registered as sound listener
[21:56:57] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[21:56:57] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[21:56:57] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[21:56:57] [ENEMY] [Enemy3] Registered as sound listener
[21:56:57] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[21:56:57] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[21:56:57] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[21:56:57] [ENEMY] [Enemy4] Registered as sound listener
[21:56:57] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[21:56:57] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[21:56:57] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[21:56:57] [ENEMY] [Enemy5] Registered as sound listener
[21:56:57] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[21:56:57] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[21:56:57] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[21:56:57] [ENEMY] [Enemy6] Registered as sound listener
[21:56:57] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[21:56:57] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[21:56:57] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[21:56:57] [ENEMY] [Enemy7] Registered as sound listener
[21:56:57] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[21:56:57] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[21:56:57] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[21:56:57] [ENEMY] [Enemy8] Registered as sound listener
[21:56:57] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[21:56:57] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[21:56:57] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[21:56:57] [ENEMY] [Enemy9] Registered as sound listener
[21:56:57] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[21:56:57] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[21:56:57] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[21:56:57] [ENEMY] [Enemy10] Registered as sound listener
[21:56:57] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[21:56:57] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[21:56:57] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:57] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:57] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:57] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:57] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:57] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:57] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=213.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:57] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:56:57] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:56:57] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:56:57] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:56:57] [INFO] [LastChance] Found player: Player
[21:56:57] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:56:57] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:56:57] [INFO] [LastChance] Connected to player Died signal (C#)
[21:56:57] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (645.0403, 751.2689) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (621.4408, 722.7217) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (729.4461, 783.9427) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (611.9378, 738.3863) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (634.2662, 784.425) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (192.8712, 974.3139) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (170.6682, 972.0035) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (127.1695, 953.7263) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (106.291, 904.9116) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (139.4244, 906.007) (added to group)
[21:56:57] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:56:57] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:56:57] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (109.6574, 930.834) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (696.5902, 803.6675) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (706.0868, 770.1284) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (653.0847, 694.2209) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (91.35085, 1000.131) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (723.8912, 730.4595) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (112.7571, 946.339) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (672.0483, 768.9006) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (86.6671, 905.0182) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (135.5378, 973.4077) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (92.70164, 992.5491) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (698.2579, 768.6647) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (645.4048, 808.214) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (163.9711, 947.9409) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (675.6525, 782.3488) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (127.4114, 943.7815) (added to group)
[21:56:57] [INFO] [BloodyFeet:Enemy3] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (659.083, 845.6979) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (153.4511, 1074.608) (added to group)
[21:56:57] [INFO] [BloodDecal] Blood puddle created at (180.9801, 1040.049) (added to group)
[21:56:58] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:56:58] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[21:56:58] [INFO] [Player.Grenade] G pressed - starting grab animation
[21:56:58] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:56:58] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (423.71695, 1093.0427)
[21:56:58] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[21:56:58] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[21:56:58] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[21:56:58] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[21:56:58] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[21:56:58] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[21:56:58] [INFO] [Player.Grenade] Step 1 complete! Drag: (195.37173, 19.36914)
[21:56:58] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[21:56:58] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[21:56:59] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:56:59] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[21:56:59] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1001), corner_timer=0.30
[21:56:59] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1001), corner_timer=0.30
[21:56:59] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(449,896), corner_timer=-0.02
[21:56:59] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:56:59] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(449,896), corner_timer=-0.02
[21:56:59] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[21:56:59] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(449,891), corner_timer=0.30
[21:56:59] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(449,891), corner_timer=0.30
[21:56:59] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(412,802), corner_timer=-0.02
[21:56:59] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[21:56:59] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(412,796), corner_timer=0.30
[21:57:00] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(412,739), corner_timer=-0.02
[21:57:00] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[21:57:00] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(412,739), corner_timer=0.30
[21:57:00] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(412,739), corner_timer=-0.02
[21:57:00] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[21:57:00] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(412,739), corner_timer=0.30
[21:57:00] [INFO] [Player.Grenade.Simple] Throwing! Target: (807.0142, 692.9091), Distance: 390,9, Speed: 467,9, Friction: 280,0
[21:57:00] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,117321104
[21:57:00] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.993126, -0.117052), Speed: 467.9 (clamped from 467.9, max: 1186.5)
[21:57:00] [INFO] [FragGrenade] Grenade thrown (simple mode) - impact detection enabled
[21:57:00] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[21:57:00] [INFO] [Player.Grenade.Simple] Grenade thrown!
[21:57:00] [INFO] [Player.Grenade] State reset to IDLE
[21:57:00] [INFO] [Player.Grenade] State reset to IDLE
[21:57:00] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[21:57:00] [INFO] [Player.Grenade] Player rotation restored to 0
[21:57:00] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(412,739), corner_timer=-0.02
[21:57:00] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[21:57:00] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(412,739), corner_timer=0.30
[21:57:01] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[21:57:01] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:01] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(398,813), corner_timer=-0.02
[21:57:01] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[21:57:01] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:57:01] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (662.4825, 1052.195)
[21:57:01] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(394,817), corner_timer=0.30
[21:57:01] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=173.4°, current=-4.9°, player=(387,825), corner_timer=0.00
[21:57:01] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:57:01] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[21:57:01] [ENEMY] [Enemy4] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:57:01] [ENEMY] [Enemy4] EVADING_GRENADE started: escaping to (854.5366, 1024.429)
[21:57:01] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=236.3°, current=0.9°, player=(379,831), corner_timer=0.00
[21:57:01] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-98.0°, current=-83.8°, player=(379,831), corner_timer=0.00
[21:57:01] [ENEMY] [Enemy4] EVADING_GRENADE: Escaped to safe distance
[21:57:01] [ENEMY] [Enemy4] State: EVADING_GRENADE -> IDLE
[21:57:01] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:57:01] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (499.4928, 969.2279)
[21:57:01] [ENEMY] [Enemy4] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=258.8°, current=-89.6°, player=(373,837), corner_timer=0.00
[21:57:01] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=173.4°, current=19.2°, player=(370,839), corner_timer=0.00
[21:57:01] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:57:01] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[21:57:01] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:01] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=135.0°, current=25.0°, player=(364,844), corner_timer=0.00
[21:57:01] [ENEMY] [Enemy4] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:57:01] [ENEMY] [Enemy4] EVADING_GRENADE started: escaping to (826.7186, 1042.295)
[21:57:01] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-98.0°, current=-114.9°, player=(350,856), corner_timer=0.00
[21:57:01] [ENEMY] [Enemy4] EVADING_GRENADE: Escaped to safe distance
[21:57:01] [ENEMY] [Enemy4] State: EVADING_GRENADE -> IDLE
[21:57:01] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(349,857), corner_timer=-0.02
[21:57:01] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[21:57:01] [ENEMY] [Enemy4] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=292.5°, current=-109.1°, player=(349,857), corner_timer=0.00
[21:57:01] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(349,857), corner_timer=0.30
[21:57:01] [ENEMY] [Enemy4] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:57:01] [ENEMY] [Enemy4] EVADING_GRENADE started: escaping to (799.7458, 1044.647)
[21:57:01] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:02] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-98.0°, current=-97.6°, player=(349,857), corner_timer=0.00
[21:57:02] [ENEMY] [Enemy4] EVADING_GRENADE: Escaped to safe distance
[21:57:02] [ENEMY] [Enemy4] State: EVADING_GRENADE -> IDLE
[21:57:02] [ENEMY] [Enemy4] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=292.5°, current=-98.0°, player=(349,857), corner_timer=0.00
[21:57:02] [ENEMY] [Enemy4] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:57:02] [ENEMY] [Enemy4] EVADING_GRENADE started: escaping to (782.4434, 1042.88)
[21:57:02] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-98.0°, current=-98.8°, player=(349,857), corner_timer=0.00
[21:57:02] [ENEMY] [Enemy4] EVADING_GRENADE: Escaped to safe distance
[21:57:02] [ENEMY] [Enemy4] State: EVADING_GRENADE -> IDLE
[21:57:02] [ENEMY] [Enemy4] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:57:02] [ENEMY] [Enemy4] EVADING_GRENADE started: escaping to (768.7455, 1040.851)
[21:57:02] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(349,857), corner_timer=-0.02
[21:57:02] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[21:57:02] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(349,857), corner_timer=0.30
[21:57:02] [ENEMY] [Enemy4] EVADING_GRENADE: Escaped to safe distance
[21:57:02] [ENEMY] [Enemy4] State: EVADING_GRENADE -> IDLE
[21:57:02] [INFO] [SoundPropagation] Sound emitted: type=GRENADE_LANDING, pos=(814.3694, 692.0422), source=NEUTRAL (FragGrenade), range=112, listeners=19
[21:57:02] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[21:57:02] [ENEMY] [Enemy4] Heard GRENADE_LANDING at (814.3694, 692.0422), intensity=0.22
[21:57:02] [ENEMY] [Enemy4] EVADING_GRENADE (from sound): escaping from (814.3694, 692.0422)
[21:57:02] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=9, self=0, below_threshold=0
[21:57:02] [INFO] [GrenadeBase] Grenade landed at (814.3694, 692.0422)
[21:57:02] [INFO] [FragGrenade] Impact detected - exploding immediately!
[21:57:02] [INFO] [GrenadeBase] EXPLODED at (814.3694, 692.0422)!
[21:57:02] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(814.3694, 692.0422), source=NEUTRAL (FragGrenade), range=2937, listeners=10
[21:57:02] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[21:57:02] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 4/4 -> 3/4
[21:57:02] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[21:57:02] [INFO] [ImpactEffects] spawn_blood_effect called at (668.2133, 753.6896), dir=(-0.921392, 0.388635), lethal=false
[21:57:02] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:57:02] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[21:57:02] [INFO] [ImpactEffects] Blood effect spawned at (668.2133, 753.6896) (scale=1)
[21:57:02] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 3/4 -> 2/4
[21:57:02] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[21:57:02] [INFO] [ImpactEffects] spawn_blood_effect called at (668.2133, 753.6896), dir=(-0.921392, 0.388635), lethal=false
[21:57:02] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:57:02] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[21:57:02] [INFO] [ImpactEffects] Blood effect spawned at (668.2133, 753.6896) (scale=1)
[21:57:02] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/4 -> 1/4
[21:57:02] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[21:57:02] [INFO] [ImpactEffects] spawn_blood_effect called at (668.2133, 753.6896), dir=(-0.921392, 0.388635), lethal=false
[21:57:02] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:57:02] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[21:57:02] [INFO] [ImpactEffects] Blood effect spawned at (668.2133, 753.6896) (scale=1)
[21:57:02] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 1/4 -> 0/4
[21:57:02] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[21:57:02] [INFO] [ImpactEffects] spawn_blood_effect called at (668.2133, 753.6896), dir=(-0.921392, 0.388635), lethal=true
[21:57:02] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:57:02] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[21:57:02] [INFO] [ImpactEffects] Blood effect spawned at (668.2133, 753.6896) (scale=1.5)
[21:57:02] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[21:57:02] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[21:57:02] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[21:57:02] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[21:57:02] [INFO] [DeathAnim] Started - Angle: 157.1 deg, Index: 22
[21:57:02] [ENEMY] [Enemy3] Death animation started with hit direction: (-0.921392, 0.388635)
[21:57:02] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 158.6
[21:57:02] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 3/3 -> 2/3
[21:57:02] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[21:57:02] [INFO] [ImpactEffects] spawn_blood_effect called at (768.6947, 787.627), dir=(-0.43115, 0.90228), lethal=false
[21:57:02] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:57:02] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[21:57:02] [INFO] [ImpactEffects] Wall found for blood splatter at (758.0038, 810) (dist=24 px)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (758.0038, 809) (added to group)
[21:57:02] [INFO] [ImpactEffects] Blood effect spawned at (768.6947, 787.627) (scale=1)
[21:57:02] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 2/3 -> 1/3
[21:57:02] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[21:57:02] [INFO] [ImpactEffects] spawn_blood_effect called at (768.6947, 787.627), dir=(-0.43115, 0.90228), lethal=false
[21:57:02] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:57:02] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[21:57:02] [INFO] [ImpactEffects] Wall found for blood splatter at (758.0038, 810) (dist=24 px)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (758.0038, 809) (added to group)
[21:57:02] [INFO] [ImpactEffects] Blood effect spawned at (768.6947, 787.627) (scale=1)
[21:57:02] [ENEMY] [Enemy4] Hit taken, damage: 1, health: 1/3 -> 0/3
[21:57:02] [ENEMY] [Enemy4] ImpactEffectsManager found, calling spawn_blood_effect
[21:57:02] [INFO] [ImpactEffects] spawn_blood_effect called at (768.6947, 787.627), dir=(-0.43115, 0.90228), lethal=true
[21:57:02] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:57:02] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[21:57:02] [INFO] [ImpactEffects] Wall found for blood splatter at (758.0038, 810) (dist=24 px)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (758.0038, 809) (added to group)
[21:57:02] [INFO] [ImpactEffects] Blood effect spawned at (768.6947, 787.627) (scale=1.5)
[21:57:02] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
[21:57:02] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
[21:57:02] [ENEMY] [Enemy4] [AllyDeath] Notified 1 enemies
[21:57:02] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 8)
[21:57:02] [INFO] [DeathAnim] Started - Angle: 115.5 deg, Index: 19
[21:57:02] [ENEMY] [Enemy4] Death animation started with hit direction: (-0.43115, 0.90228)
[21:57:02] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 105.9
[21:57:02] [INFO] [FragGrenade] Spawned shrapnel #1 at angle -19.3 degrees
[21:57:02] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 81.4 degrees
[21:57:02] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 182.3 degrees
[21:57:02] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 266.5 degrees
[21:57:02] [INFO] [BloodyFeet:Enemy4] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[21:57:02] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:02] [ENEMY] [Enemy2] Hit taken, damage: 1, health: 2/2 -> 1/2
[21:57:02] [ENEMY] [Enemy2] ImpactEffectsManager found, calling spawn_blood_effect
[21:57:02] [INFO] [ImpactEffects] spawn_blood_effect called at (400, 550), dir=(0.955483, -0.295045), lethal=false
[21:57:02] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:57:02] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[21:57:02] [INFO] [ImpactEffects] Blood effect spawned at (400, 550) (scale=1)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (611.8119, 834.1869) (added to group)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (621.8558, 813.4481) (added to group)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (770.8912, 866.3412) (added to group)
[21:57:02] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(349,857), corner_timer=-0.02
[21:57:02] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (580.3805, 802.8856) (added to group)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (608.9158, 821.6459) (added to group)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (611.9608, 814.2491) (added to group)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (601.5148, 789.9379) (added to group)
[21:57:02] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(349,857), corner_timer=0.30
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (571.4063, 825.6025) (added to group)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (579.2158, 851.8896) (added to group)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (603.2407, 793.8426) (added to group)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (584.1362, 800.4599) (added to group)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (609.3714, 837.3273) (added to group)
[21:57:02] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (608.9526, 860.1221) (added to group)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (578.4077, 784.4423) (added to group)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (529.6049, 821.2201) (added to group)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (527.1758, 800.4292) (added to group)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (601.3652, 816.7943) (added to group)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (590.8947, 875.8666) (added to group)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (587.8331, 845.5619) (added to group)
[21:57:02] [ENEMY] [Enemy3] Ragdoll activated
[21:57:02] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[21:57:02] [ENEMY] [Enemy4] Ragdoll activated
[21:57:02] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (577.509, 894.4799) (added to group)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (580.7477, 839.0332) (added to group)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (773.3181, 990.0384) (added to group)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (598.3843, 835.1411) (added to group)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (571.9124, 866.4005) (added to group)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (573.3815, 848.11) (added to group)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (542.4258, 818.0108) (added to group)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (562.2259, 859.0274) (added to group)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (758.9891, 947.8082) (added to group)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (570.8216, 828.9266) (added to group)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (559.127, 927.6498) (added to group)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (559.5374, 856.439) (added to group)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (552.3036, 893.0544) (added to group)
[21:57:02] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(349,857), corner_timer=-0.02
[21:57:02] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (549.7051, 836.2877) (added to group)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (451.0573, 534.2272) (added to group)
[21:57:02] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(349,857), corner_timer=0.30
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (577.7338, 922.5184) (added to group)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (526.1241, 835.5951) (added to group)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (574.2378, 954.7476) (added to group)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (585.9437, 938.7814) (added to group)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (525.6874, 928.5696) (added to group)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (534.2195, 907.3312) (added to group)
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (481.935, 602.1128) (added to group)
[21:57:02] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:02] [INFO] [BloodDecal] Blood puddle created at (498.2718, 552.7089) (added to group)
[21:57:03] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:57:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:03] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[21:57:03] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[21:57:03] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[21:57:03] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:57:03] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:57:03] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:57:03] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[21:57:03] [ENEMY] [Enemy1] Death animation component initialized
[21:57:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:03] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[21:57:03] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[21:57:03] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[21:57:03] [ENEMY] [Enemy2] Death animation component initialized
[21:57:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:03] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[21:57:03] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[21:57:03] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[21:57:03] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:57:03] [ENEMY] [Enemy3] Death animation component initialized
[21:57:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:03] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[21:57:03] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[21:57:03] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[21:57:03] [ENEMY] [Enemy4] Death animation component initialized
[21:57:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:03] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[21:57:03] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[21:57:03] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[21:57:03] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:57:03] [ENEMY] [Enemy5] Death animation component initialized
[21:57:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:03] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[21:57:03] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[21:57:03] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[21:57:03] [ENEMY] [Enemy6] Death animation component initialized
[21:57:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:03] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[21:57:03] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[21:57:03] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[21:57:03] [ENEMY] [Enemy7] Death animation component initialized
[21:57:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:03] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[21:57:03] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[21:57:03] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[21:57:03] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:57:03] [ENEMY] [Enemy8] Death animation component initialized
[21:57:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:03] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[21:57:03] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[21:57:03] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[21:57:03] [ENEMY] [Enemy9] Death animation component initialized
[21:57:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:03] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[21:57:03] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[21:57:03] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[21:57:03] [ENEMY] [Enemy10] Death animation component initialized
[21:57:03] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:03] [INFO] [BloodyFeet:Player] Footprint scene loaded
[21:57:03] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[21:57:03] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[21:57:03] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Frag Grenade
[21:57:03] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:57:03] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:57:03] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:57:03] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:57:03] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:57:03] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[21:57:03] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[21:57:03] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[21:57:03] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:57:03] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[21:57:03] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[21:57:03] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[21:57:03] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[21:57:03] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[21:57:03] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[21:57:03] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[21:57:03] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[21:57:03] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[21:57:03] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[21:57:03] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[21:57:03] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[21:57:03] [INFO] [ScoreManager] Level started with 10 enemies
[21:57:03] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[21:57:03] [INFO] [CinemaEffects] Found player node: Player
[21:57:03] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[21:57:03] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 9)
[21:57:03] [ENEMY] [Enemy1] Registered as sound listener
[21:57:03] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[21:57:03] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[21:57:03] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 10)
[21:57:03] [ENEMY] [Enemy2] Registered as sound listener
[21:57:03] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[21:57:03] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[21:57:03] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 11)
[21:57:03] [ENEMY] [Enemy3] Registered as sound listener
[21:57:03] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[21:57:03] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[21:57:03] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 12)
[21:57:03] [ENEMY] [Enemy4] Registered as sound listener
[21:57:03] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[21:57:03] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[21:57:03] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 13)
[21:57:03] [ENEMY] [Enemy5] Registered as sound listener
[21:57:03] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[21:57:03] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[21:57:03] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 14)
[21:57:03] [ENEMY] [Enemy6] Registered as sound listener
[21:57:03] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[21:57:03] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[21:57:03] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 15)
[21:57:03] [ENEMY] [Enemy7] Registered as sound listener
[21:57:03] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[21:57:03] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[21:57:03] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 16)
[21:57:03] [ENEMY] [Enemy8] Registered as sound listener
[21:57:03] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[21:57:03] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[21:57:03] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 17)
[21:57:03] [ENEMY] [Enemy9] Registered as sound listener
[21:57:03] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[21:57:03] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[21:57:03] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 18)
[21:57:03] [ENEMY] [Enemy10] Registered as sound listener
[21:57:03] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[21:57:03] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[21:57:03] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:03] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:03] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=236.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:03] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:03] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:03] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:03] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:03] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:03] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:57:03] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:57:03] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:57:03] [INFO] [LastChance] Found player: Player
[21:57:03] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:57:03] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:57:03] [INFO] [LastChance] Connected to player Died signal (C#)
[21:57:03] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[21:57:03] [INFO] [BloodDecal] Blood puddle created at (498.5511, 624.8799) (added to group)
[21:57:03] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:57:03] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:57:03] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:57:03] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:57:03] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[21:57:03] [INFO] [Player.Grenade] G pressed - starting grab animation
[21:57:03] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:57:03] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (569.09076, 1110.4082)
[21:57:03] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[21:57:03] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[21:57:03] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[21:57:03] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[21:57:03] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[21:57:03] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[21:57:03] [INFO] [Player.Grenade] Step 1 complete! Drag: (153.6795, 37.402588)
[21:57:03] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[21:57:03] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[21:57:04] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:57:04] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[21:57:04] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1083), corner_timer=0.30
[21:57:04] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1083), corner_timer=0.30
[21:57:05] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(446,980), corner_timer=-0.02
[21:57:05] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:57:05] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(446,980), corner_timer=-0.02
[21:57:05] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[21:57:05] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(445,975), corner_timer=0.30
[21:57:05] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(445,975), corner_timer=0.30
[21:57:05] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(379,898), corner_timer=-0.02
[21:57:05] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[21:57:05] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(375,894), corner_timer=0.30
[21:57:05] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(323,830), corner_timer=-0.02
[21:57:05] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[21:57:05] [INFO] [Player.Grenade.Simple] Throwing! Target: (692.77625, 646.68066), Distance: 408,8, Speed: 478,5, Friction: 280,0
[21:57:05] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,4584712
[21:57:05] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.89673, -0.442578), Speed: 478.5 (clamped from 478.5, max: 1186.5)
[21:57:05] [INFO] [FragGrenade] Grenade thrown (simple mode) - impact detection enabled
[21:57:05] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[21:57:05] [INFO] [Player.Grenade.Simple] Grenade thrown!
[21:57:05] [INFO] [Player.Grenade] State reset to IDLE
[21:57:05] [INFO] [Player.Grenade] State reset to IDLE
[21:57:05] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[21:57:05] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(322,829), corner_timer=0.30
[21:57:05] [INFO] [Player.Grenade] Player rotation restored to 0
[21:57:05] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[21:57:06] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(312,862), corner_timer=-0.02
[21:57:06] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[21:57:06] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(312,867), corner_timer=0.30
[21:57:06] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:57:06] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (871.9348, 769.6798)
[21:57:06] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=6.5°, current=-122.7°, player=(312,895), corner_timer=0.00
[21:57:06] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:57:06] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[21:57:06] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=33.8°, current=-116.9°, player=(312,906), corner_timer=0.00
[21:57:06] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(312,962), corner_timer=-0.02
[21:57:06] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[21:57:06] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(312,965), corner_timer=0.30
[21:57:06] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:06] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(312,979), corner_timer=-0.02
[21:57:06] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[21:57:06] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(312,979), corner_timer=0.30
[21:57:06] [ENEMY] [Enemy4] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:57:06] [ENEMY] [Enemy4] EVADING_GRENADE started: escaping to (830.4816, 968.6978)
[21:57:06] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=66.1°, current=-90.2°, player=(312,979), corner_timer=0.00
[21:57:06] [ENEMY] [Enemy4] EVADING_GRENADE: Escaped to safe distance
[21:57:06] [ENEMY] [Enemy4] State: EVADING_GRENADE -> IDLE
[21:57:07] [ENEMY] [Enemy4] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=180.0°, current=-62.0°, player=(312,979), corner_timer=0.00
[21:57:07] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:07] [INFO] [SoundPropagation] Sound emitted: type=GRENADE_LANDING, pos=(699.2803, 643.4703), source=NEUTRAL (FragGrenade), range=112, listeners=18
[21:57:07] [INFO] [SoundPropagation] Cleaned up 8 invalid listeners
[21:57:07] [ENEMY] [Enemy3] Heard GRENADE_LANDING at (699.2803, 643.4703), intensity=0.21
[21:57:07] [ENEMY] [Enemy3] EVADING_GRENADE (from sound): escaping from (699.2803, 643.4703)
[21:57:07] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=9, self=0, below_threshold=0
[21:57:07] [INFO] [GrenadeBase] Grenade landed at (699.2803, 643.4703)
[21:57:07] [INFO] [FragGrenade] Impact detected - exploding immediately!
[21:57:07] [INFO] [GrenadeBase] EXPLODED at (699.2803, 643.4703)!
[21:57:07] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(699.2803, 643.4703), source=NEUTRAL (FragGrenade), range=2937, listeners=10
[21:57:07] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=0, below_threshold=6
[21:57:07] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 4/4 -> 3/4
[21:57:07] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[21:57:07] [INFO] [ImpactEffects] spawn_blood_effect called at (715.8961, 751.8195), dir=(0.151583, 0.988445), lethal=false
[21:57:07] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:57:07] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[21:57:07] [INFO] [ImpactEffects] Wall found for blood splatter at (724.8184, 810) (dist=58 px)
[21:57:07] [INFO] [BloodDecal] Blood puddle created at (724.8184, 809) (added to group)
[21:57:07] [INFO] [ImpactEffects] Blood effect spawned at (715.8961, 751.8195) (scale=1)
[21:57:07] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 3/4 -> 2/4
[21:57:07] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[21:57:07] [INFO] [ImpactEffects] spawn_blood_effect called at (715.8961, 751.8195), dir=(0.151583, 0.988445), lethal=false
[21:57:07] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:57:07] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[21:57:07] [INFO] [ImpactEffects] Wall found for blood splatter at (724.8184, 810) (dist=58 px)
[21:57:07] [INFO] [BloodDecal] Blood puddle created at (724.8184, 809) (added to group)
[21:57:07] [INFO] [ImpactEffects] Blood effect spawned at (715.8961, 751.8195) (scale=1)
[21:57:07] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 2/4 -> 1/4
[21:57:07] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[21:57:07] [INFO] [ImpactEffects] spawn_blood_effect called at (715.8961, 751.8195), dir=(0.151583, 0.988445), lethal=false
[21:57:07] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:57:07] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[21:57:07] [INFO] [ImpactEffects] Wall found for blood splatter at (724.8184, 810) (dist=58 px)
[21:57:07] [INFO] [BloodDecal] Blood puddle created at (724.8184, 809) (added to group)
[21:57:07] [INFO] [ImpactEffects] Blood effect spawned at (715.8961, 751.8195) (scale=1)
[21:57:07] [ENEMY] [Enemy3] Hit taken, damage: 1, health: 1/4 -> 0/4
[21:57:07] [ENEMY] [Enemy3] ImpactEffectsManager found, calling spawn_blood_effect
[21:57:07] [INFO] [ImpactEffects] spawn_blood_effect called at (715.8961, 751.8195), dir=(0.151583, 0.988445), lethal=true
[21:57:07] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[21:57:07] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[21:57:07] [INFO] [ImpactEffects] Wall found for blood splatter at (724.8184, 810) (dist=58 px)
[21:57:07] [INFO] [BloodDecal] Blood puddle created at (724.8184, 809) (added to group)
[21:57:07] [INFO] [ImpactEffects] Blood effect spawned at (715.8961, 751.8195) (scale=1.5)
[21:57:07] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[21:57:07] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[21:57:07] [ENEMY] [Enemy4] [AllyDeath] Witnessed at (715.8961, 751.8195), entering SEARCHING
[21:57:07] [ENEMY] [Enemy4] SEARCHING started: center=(715.8961, 751.8195), radius=100, waypoints=5
[21:57:07] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[21:57:07] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[21:57:07] [INFO] [DeathAnim] Started - Angle: 81.3 deg, Index: 17
[21:57:07] [ENEMY] [Enemy3] Death animation started with hit direction: (0.151583, 0.988445)
[21:57:07] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 109.6
[21:57:07] [INFO] [FragGrenade] Spawned shrapnel #1 at angle -7.1 degrees
[21:57:07] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 109.0 degrees
[21:57:07] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 191.2 degrees
[21:57:07] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 273.0 degrees
[21:57:07] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=SEARCHING, target=174.8°, current=-76.3°, player=(312,979), corner_timer=0.00
[21:57:07] [ENEMY] [Enemy4] SEARCHING corner check: angle 168.1°
[21:57:07] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(312,979), corner_timer=-0.02
[21:57:07] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[21:57:07] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(312,979), corner_timer=0.30
[21:57:07] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:08] [INFO] [PauseMenu] Armory button pressed
[21:57:08] [INFO] [PauseMenu] Creating new armory menu instance
[21:57:08] [INFO] [PauseMenu] armory_menu_scene resource path: res://scenes/ui/ArmoryMenu.tscn
[21:57:08] [INFO] [PauseMenu] Instance created, class: CanvasLayer, name: ArmoryMenu
[21:57:08] [INFO] [PauseMenu] Script attached: res://scripts/ui/armory_menu.gd
[21:57:08] [INFO] [PauseMenu] back_pressed signal exists on instance
[21:57:08] [INFO] [PauseMenu] back_pressed signal connected
[21:57:08] [INFO] [PauseMenu] Armory menu instance added as child, is_inside_tree: true
[21:57:08] [INFO] [PauseMenu] _populate_weapon_grid method exists
[21:57:09] [INFO] [GrenadeManager] Grenade type changed from Frag Grenade to Flashbang
[21:57:09] [INFO] [GrenadeManager] Restarting level due to grenade type change
[21:57:09] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:57:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:09] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[21:57:09] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[21:57:09] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[21:57:09] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:57:09] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:57:09] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:57:09] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[21:57:09] [ENEMY] [Enemy1] Death animation component initialized
[21:57:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:09] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[21:57:09] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[21:57:09] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[21:57:09] [ENEMY] [Enemy2] Death animation component initialized
[21:57:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:09] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[21:57:09] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[21:57:09] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[21:57:09] [ENEMY] [Enemy3] Death animation component initialized
[21:57:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:09] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[21:57:09] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[21:57:09] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[21:57:09] [ENEMY] [Enemy4] Death animation component initialized
[21:57:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:09] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[21:57:09] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[21:57:09] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[21:57:09] [ENEMY] [Enemy5] Death animation component initialized
[21:57:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:09] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[21:57:09] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[21:57:09] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[21:57:09] [ENEMY] [Enemy6] Death animation component initialized
[21:57:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:09] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[21:57:09] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[21:57:09] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[21:57:09] [ENEMY] [Enemy7] Death animation component initialized
[21:57:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:09] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[21:57:09] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[21:57:09] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[21:57:09] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:57:09] [ENEMY] [Enemy8] Death animation component initialized
[21:57:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:09] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[21:57:09] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[21:57:09] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[21:57:09] [ENEMY] [Enemy9] Death animation component initialized
[21:57:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:09] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[21:57:09] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[21:57:09] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[21:57:09] [ENEMY] [Enemy10] Death animation component initialized
[21:57:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:09] [INFO] [BloodyFeet:Player] Footprint scene loaded
[21:57:09] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[21:57:09] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[21:57:09] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[21:57:09] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:57:09] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:57:09] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:57:09] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:57:09] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:57:09] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[21:57:09] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[21:57:09] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[21:57:09] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:57:09] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[21:57:09] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[21:57:09] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[21:57:09] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[21:57:09] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[21:57:09] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[21:57:09] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[21:57:09] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[21:57:09] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[21:57:09] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[21:57:09] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[21:57:09] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[21:57:09] [INFO] [ScoreManager] Level started with 10 enemies
[21:57:09] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[21:57:09] [INFO] [CinemaEffects] Found player node: Player
[21:57:09] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[21:57:09] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[21:57:09] [ENEMY] [Enemy1] Registered as sound listener
[21:57:09] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[21:57:09] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[21:57:09] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[21:57:09] [ENEMY] [Enemy2] Registered as sound listener
[21:57:09] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[21:57:09] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[21:57:09] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[21:57:09] [ENEMY] [Enemy3] Registered as sound listener
[21:57:09] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[21:57:09] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[21:57:09] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[21:57:09] [ENEMY] [Enemy4] Registered as sound listener
[21:57:09] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[21:57:09] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[21:57:09] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[21:57:09] [ENEMY] [Enemy5] Registered as sound listener
[21:57:09] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[21:57:09] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[21:57:09] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[21:57:09] [ENEMY] [Enemy6] Registered as sound listener
[21:57:09] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[21:57:09] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[21:57:09] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[21:57:09] [ENEMY] [Enemy7] Registered as sound listener
[21:57:09] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[21:57:09] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[21:57:09] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[21:57:09] [ENEMY] [Enemy8] Registered as sound listener
[21:57:09] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[21:57:09] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[21:57:09] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[21:57:09] [ENEMY] [Enemy9] Registered as sound listener
[21:57:09] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[21:57:09] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[21:57:09] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[21:57:09] [ENEMY] [Enemy10] Registered as sound listener
[21:57:09] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[21:57:09] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[21:57:09] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:09] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:09] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:09] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:09] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:09] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:09] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:09] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:09] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:57:09] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:57:09] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:57:09] [INFO] [LastChance] Found player: Player
[21:57:09] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:57:09] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:57:09] [INFO] [LastChance] Connected to player Died signal (C#)
[21:57:09] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[21:57:09] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:57:09] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:57:09] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:57:10] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:57:10] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:10] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[21:57:10] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[21:57:10] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[21:57:10] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:57:10] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:57:10] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:57:10] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[21:57:10] [ENEMY] [Enemy1] Death animation component initialized
[21:57:10] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:10] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[21:57:10] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[21:57:10] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[21:57:10] [ENEMY] [Enemy2] Death animation component initialized
[21:57:10] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:10] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[21:57:10] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[21:57:10] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[21:57:10] [ENEMY] [Enemy3] Death animation component initialized
[21:57:10] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:10] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[21:57:10] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[21:57:10] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[21:57:10] [ENEMY] [Enemy4] Death animation component initialized
[21:57:10] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:10] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[21:57:10] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[21:57:10] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[21:57:10] [ENEMY] [Enemy5] Death animation component initialized
[21:57:10] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:10] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[21:57:10] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[21:57:10] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[21:57:10] [ENEMY] [Enemy6] Death animation component initialized
[21:57:10] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:10] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[21:57:10] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[21:57:10] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[21:57:10] [ENEMY] [Enemy7] Death animation component initialized
[21:57:10] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:10] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[21:57:10] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[21:57:10] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[21:57:10] [ENEMY] [Enemy8] Death animation component initialized
[21:57:10] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:10] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[21:57:10] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[21:57:10] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[21:57:10] [ENEMY] [Enemy9] Death animation component initialized
[21:57:10] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:10] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[21:57:10] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[21:57:10] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[21:57:10] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:57:10] [ENEMY] [Enemy10] Death animation component initialized
[21:57:10] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:10] [INFO] [BloodyFeet:Player] Footprint scene loaded
[21:57:10] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[21:57:10] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[21:57:10] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[21:57:10] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:57:10] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:57:10] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:57:10] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:57:10] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:57:10] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[21:57:10] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[21:57:10] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[21:57:10] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:57:10] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[21:57:10] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[21:57:10] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[21:57:10] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[21:57:10] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[21:57:10] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[21:57:10] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[21:57:10] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[21:57:10] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[21:57:10] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[21:57:10] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[21:57:10] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[21:57:10] [INFO] [ScoreManager] Level started with 10 enemies
[21:57:10] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[21:57:10] [INFO] [CinemaEffects] Found player node: Player
[21:57:10] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[21:57:10] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 20)
[21:57:10] [ENEMY] [Enemy1] Registered as sound listener
[21:57:10] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[21:57:10] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[21:57:10] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 21)
[21:57:10] [ENEMY] [Enemy2] Registered as sound listener
[21:57:10] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[21:57:10] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[21:57:10] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 22)
[21:57:10] [ENEMY] [Enemy3] Registered as sound listener
[21:57:10] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[21:57:10] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[21:57:10] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 23)
[21:57:10] [ENEMY] [Enemy4] Registered as sound listener
[21:57:10] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[21:57:10] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[21:57:10] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 24)
[21:57:10] [ENEMY] [Enemy5] Registered as sound listener
[21:57:10] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[21:57:10] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[21:57:10] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 25)
[21:57:10] [ENEMY] [Enemy6] Registered as sound listener
[21:57:10] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[21:57:10] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[21:57:10] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 26)
[21:57:10] [ENEMY] [Enemy7] Registered as sound listener
[21:57:10] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[21:57:10] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[21:57:10] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 27)
[21:57:10] [ENEMY] [Enemy8] Registered as sound listener
[21:57:10] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[21:57:10] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[21:57:10] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 28)
[21:57:10] [ENEMY] [Enemy9] Registered as sound listener
[21:57:10] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[21:57:10] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[21:57:10] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 29)
[21:57:10] [ENEMY] [Enemy10] Registered as sound listener
[21:57:10] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[21:57:10] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[21:57:10] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:10] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:10] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:10] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:10] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:10] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=225.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:10] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=78.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:10] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:10] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:57:10] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:57:10] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:57:10] [INFO] [LastChance] Found player: Player
[21:57:10] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:57:10] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:57:10] [INFO] [LastChance] Connected to player Died signal (C#)
[21:57:10] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[21:57:10] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:57:10] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:57:10] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:57:10] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:57:10] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[21:57:10] [INFO] [Player.Grenade] G pressed - starting grab animation
[21:57:10] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:57:10] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (560.7991, 1139.7959)
[21:57:10] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[21:57:10] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[21:57:10] [INFO] [GrenadeBase] Timer activated! 4.0 seconds until explosion
[21:57:10] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[21:57:10] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[21:57:10] [INFO] [Player.Grenade] Step 1 complete! Drag: (147.56445, 42.07788)
[21:57:10] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[21:57:10] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[21:57:11] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:57:11] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[21:57:11] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1111), corner_timer=0.30
[21:57:11] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1111), corner_timer=0.30
[21:57:12] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,1006), corner_timer=-0.02
[21:57:12] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:57:12] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,1006), corner_timer=-0.02
[21:57:12] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[21:57:12] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,1001), corner_timer=0.30
[21:57:12] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,1001), corner_timer=0.30
[21:57:12] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(425,906), corner_timer=-0.02
[21:57:12] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[21:57:12] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(422,902), corner_timer=0.30
[21:57:12] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(352,838), corner_timer=-0.02
[21:57:12] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[21:57:12] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(349,836), corner_timer=0.30
[21:57:13] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(337,827), corner_timer=-0.02
[21:57:13] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[21:57:13] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(337,827), corner_timer=0.30
[21:57:13] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(337,827), corner_timer=-0.02
[21:57:13] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[21:57:13] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(337,827), corner_timer=0.30
[21:57:13] [INFO] [Player.Grenade.Simple] Throwing! Target: (813.6948, 623.7153), Distance: 531,0, Speed: 564,5, Friction: 300,0
[21:57:13] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,40453273
[21:57:13] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.919286, -0.393589), Speed: 564.5 (clamped from 564.5, max: 1352.8)
[21:57:13] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[21:57:13] [INFO] [Player.Grenade.Simple] Grenade thrown!
[21:57:13] [INFO] [Player.Grenade] State reset to IDLE
[21:57:13] [INFO] [Player.Grenade] State reset to IDLE
[21:57:13] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[21:57:13] [INFO] [Player.Grenade] Player rotation restored to 0
[21:57:13] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:13] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[21:57:13] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(337,827), corner_timer=-0.02
[21:57:13] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[21:57:13] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(337,827), corner_timer=0.30
[21:57:14] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:14] [ENEMY] [Enemy4] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:57:14] [ENEMY] [Enemy4] EVADING_GRENADE started: escaping to (911.856, 1152.741)
[21:57:14] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-98.0°, current=-117.6°, player=(337,827), corner_timer=0.00
[21:57:14] [ENEMY] [Enemy4] EVADING_GRENADE: Escaped to safe distance
[21:57:14] [ENEMY] [Enemy4] State: EVADING_GRENADE -> IDLE
[21:57:14] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(337,827), corner_timer=-0.02
[21:57:14] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[21:57:14] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:57:14] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (634.3302, 1186.196)
[21:57:14] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(337,827), corner_timer=0.30
[21:57:14] [ENEMY] [Enemy4] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=292.5°, current=-111.9°, player=(337,827), corner_timer=0.00
[21:57:14] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=173.4°, current=-4.9°, player=(337,827), corner_timer=0.00
[21:57:14] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:57:14] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[21:57:14] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=236.3°, current=0.9°, player=(337,827), corner_timer=0.00
[21:57:14] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:14] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:57:14] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (471.1571, 1102.332)
[21:57:14] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=173.4°, current=10.6°, player=(337,827), corner_timer=0.00
[21:57:14] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:57:14] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[21:57:14] [ENEMY] [Enemy4] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:57:14] [ENEMY] [Enemy4] EVADING_GRENADE started: escaping to (850.0255, 1165.386)
[21:57:14] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=135.0°, current=16.4°, player=(337,827), corner_timer=0.00
[21:57:14] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-98.0°, current=-93.9°, player=(337,827), corner_timer=0.00
[21:57:14] [ENEMY] [Enemy4] EVADING_GRENADE: Escaped to safe distance
[21:57:14] [ENEMY] [Enemy4] State: EVADING_GRENADE -> IDLE
[21:57:14] [ENEMY] [Enemy4] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=292.5°, current=-98.0°, player=(337,827), corner_timer=0.00
[21:57:14] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(337,827), corner_timer=-0.02
[21:57:14] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[21:57:14] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(337,827), corner_timer=0.30
[21:57:14] [ENEMY] [Enemy4] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:57:14] [ENEMY] [Enemy4] EVADING_GRENADE started: escaping to (801.7457, 1158.508)
[21:57:14] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-98.0°, current=-80.7°, player=(337,827), corner_timer=0.00
[21:57:14] [ENEMY] [Enemy4] EVADING_GRENADE: Escaped to safe distance
[21:57:14] [ENEMY] [Enemy4] State: EVADING_GRENADE -> IDLE
[21:57:14] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:14] [ENEMY] [Enemy4] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=292.5°, current=-86.4°, player=(337,827), corner_timer=0.00
[21:57:14] [ENEMY] [Enemy4] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:57:14] [ENEMY] [Enemy4] EVADING_GRENADE started: escaping to (776.3049, 1151.079)
[21:57:14] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-98.0°, current=-81.5°, player=(337,827), corner_timer=0.00
[21:57:14] [ENEMY] [Enemy4] EVADING_GRENADE: Escaped to safe distance
[21:57:14] [ENEMY] [Enemy4] State: EVADING_GRENADE -> IDLE
[21:57:14] [ENEMY] [Enemy4] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:57:14] [ENEMY] [Enemy4] EVADING_GRENADE started: escaping to (762.2403, 1147.735)
[21:57:14] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(337,827), corner_timer=-0.02
[21:57:14] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[21:57:14] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(337,827), corner_timer=0.30
[21:57:14] [ENEMY] [Enemy4] EVADING_GRENADE: Escaped to safe distance
[21:57:14] [ENEMY] [Enemy4] State: EVADING_GRENADE -> IDLE
[21:57:14] [INFO] [GrenadeBase] EXPLODED at (817.7227, 621.9906)!
[21:57:14] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(817.7227, 621.9906), source=NEUTRAL (FlashbangGrenade), range=2937, listeners=29
[21:57:14] [INFO] [SoundPropagation] Cleaned up 19 invalid listeners
[21:57:14] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[21:57:14] [ENEMY] [Enemy3] Status: BLINDED applied
[21:57:14] [ENEMY] [Enemy3] Status: STUNNED applied
[21:57:14] [ENEMY] [Enemy4] Status: BLINDED applied
[21:57:14] [ENEMY] [Enemy4] Status: STUNNED applied
[21:57:15] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:15] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(337,827), corner_timer=-0.02
[21:57:15] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[21:57:15] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(337,827), corner_timer=0.30
[21:57:15] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:15] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.5°, current=89.5°, player=(337,827), corner_timer=-0.02
[21:57:15] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[21:57:15] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(337,827), corner_timer=0.30
[21:57:15] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:57:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:15] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[21:57:15] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[21:57:15] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[21:57:15] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:57:15] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:57:15] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:57:15] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[21:57:15] [ENEMY] [Enemy1] Death animation component initialized
[21:57:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:15] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[21:57:15] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[21:57:15] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[21:57:15] [ENEMY] [Enemy2] Death animation component initialized
[21:57:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:15] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[21:57:15] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[21:57:15] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[21:57:15] [ENEMY] [Enemy3] Death animation component initialized
[21:57:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:15] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[21:57:15] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[21:57:15] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[21:57:15] [ENEMY] [Enemy4] Death animation component initialized
[21:57:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:15] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[21:57:15] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[21:57:15] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[21:57:15] [ENEMY] [Enemy5] Death animation component initialized
[21:57:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:15] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[21:57:15] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[21:57:15] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[21:57:15] [ENEMY] [Enemy6] Death animation component initialized
[21:57:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:15] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[21:57:15] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[21:57:15] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[21:57:15] [ENEMY] [Enemy7] Death animation component initialized
[21:57:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:15] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[21:57:15] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[21:57:15] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[21:57:15] [ENEMY] [Enemy8] Death animation component initialized
[21:57:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:15] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[21:57:15] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[21:57:15] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[21:57:15] [ENEMY] [Enemy9] Death animation component initialized
[21:57:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:15] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[21:57:15] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[21:57:15] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[21:57:15] [ENEMY] [Enemy10] Death animation component initialized
[21:57:15] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:15] [INFO] [BloodyFeet:Player] Footprint scene loaded
[21:57:15] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[21:57:15] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[21:57:15] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[21:57:15] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:57:15] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:57:15] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:57:15] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:57:15] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:57:15] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[21:57:15] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[21:57:15] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[21:57:15] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:57:15] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[21:57:15] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[21:57:15] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[21:57:15] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[21:57:15] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[21:57:15] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[21:57:15] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[21:57:15] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[21:57:15] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[21:57:15] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[21:57:15] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[21:57:15] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[21:57:15] [INFO] [ScoreManager] Level started with 10 enemies
[21:57:15] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[21:57:15] [INFO] [CinemaEffects] Found player node: Player
[21:57:15] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[21:57:15] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[21:57:15] [ENEMY] [Enemy1] Registered as sound listener
[21:57:15] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[21:57:15] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[21:57:15] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[21:57:15] [ENEMY] [Enemy2] Registered as sound listener
[21:57:15] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[21:57:15] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[21:57:15] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[21:57:15] [ENEMY] [Enemy3] Registered as sound listener
[21:57:15] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[21:57:15] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[21:57:15] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[21:57:15] [ENEMY] [Enemy4] Registered as sound listener
[21:57:15] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[21:57:15] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[21:57:15] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[21:57:15] [ENEMY] [Enemy5] Registered as sound listener
[21:57:15] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[21:57:15] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[21:57:15] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[21:57:15] [ENEMY] [Enemy6] Registered as sound listener
[21:57:15] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[21:57:15] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[21:57:15] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[21:57:15] [ENEMY] [Enemy7] Registered as sound listener
[21:57:15] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[21:57:15] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[21:57:15] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[21:57:15] [ENEMY] [Enemy8] Registered as sound listener
[21:57:15] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[21:57:15] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[21:57:15] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[21:57:15] [ENEMY] [Enemy9] Registered as sound listener
[21:57:15] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[21:57:15] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[21:57:15] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[21:57:15] [ENEMY] [Enemy10] Registered as sound listener
[21:57:15] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[21:57:15] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[21:57:15] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:15] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:15] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:15] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:15] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:15] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:15] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=213.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:15] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:15] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:57:15] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:57:15] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:57:15] [INFO] [LastChance] Found player: Player
[21:57:15] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:57:15] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:57:15] [INFO] [LastChance] Connected to player Died signal (C#)
[21:57:15] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[21:57:15] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:57:15] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:57:15] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:57:15] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:57:15] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[21:57:15] [INFO] [Player.Grenade] G pressed - starting grab animation
[21:57:16] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:57:16] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (472.15823, 1095.7144)
[21:57:16] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[21:57:16] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[21:57:16] [INFO] [GrenadeBase] Timer activated! 4.0 seconds until explosion
[21:57:16] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[21:57:16] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[21:57:16] [INFO] [Player.Grenade] Step 1 complete! Drag: (77.065704, 0)
[21:57:16] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[21:57:16] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[21:57:17] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:57:17] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[21:57:17] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1034), corner_timer=0.30
[21:57:17] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1034), corner_timer=0.30
[21:57:17] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(446,930), corner_timer=-0.02
[21:57:17] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:57:17] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(446,930), corner_timer=-0.02
[21:57:17] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[21:57:17] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(445,926), corner_timer=0.30
[21:57:17] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(445,926), corner_timer=0.30
[21:57:17] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(387,846), corner_timer=-0.02
[21:57:17] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[21:57:17] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(385,842), corner_timer=0.30
[21:57:17] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=164.3°, current=123.7°, player=(383,839), corner_timer=0.00
[21:57:17] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[21:57:17] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=165.5°, current=-65.6°, player=(380,832), corner_timer=0.00
[21:57:18] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(371,815), corner_timer=-0.02
[21:57:18] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[21:57:18] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(371,815), corner_timer=0.30
[21:57:18] [ENEMY] [Enemy4] Memory: high confidence (0.87) - transitioning to PURSUING
[21:57:18] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[21:57:18] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=-168.8°, current=168.8°, player=(371,815), corner_timer=0.00
[21:57:18] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[21:57:18] [INFO] [Player.Grenade.Simple] Throwing! Target: (664.04974, 652.38367), Distance: 319,1, Speed: 437,6, Friction: 300,0
[21:57:18] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,5083153
[21:57:18] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.873566, -0.486706), Speed: 437.6 (clamped from 437.6, max: 1352.8)
[21:57:18] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[21:57:18] [INFO] [Player.Grenade.Simple] Grenade thrown!
[21:57:18] [INFO] [Player.Grenade] State reset to IDLE
[21:57:18] [INFO] [Player.Grenade] State reset to IDLE
[21:57:18] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[21:57:18] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:57:18] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (953.5094, 743.2234)
[21:57:18] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=EVADING_GRENADE, target=169.1°, current=-141.7°, player=(371,815), corner_timer=0.00
[21:57:18] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=EVADING_GRENADE, target=-34.9°, current=-118.5°, player=(371,815), corner_timer=0.00
[21:57:18] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:57:18] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:57:18] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=167.6°, current=-115.7°, player=(371,815), corner_timer=0.00
[21:57:18] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=167.6°, current=-146.0°, player=(371,815), corner_timer=0.00
[21:57:18] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:57:18] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (978.68, 743.2622)
[21:57:18] [INFO] [Player.Grenade] Player rotation restored to 0
[21:57:18] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=EVADING_GRENADE, target=-34.2°, current=-125.3°, player=(371,815), corner_timer=0.00
[21:57:18] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:57:18] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:57:18] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=166.3°, current=-122.5°, player=(371,815), corner_timer=0.00
[21:57:18] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=166.3°, current=-153.0°, player=(371,815), corner_timer=0.00
[21:57:18] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:57:18] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1002.274, 749.356)
[21:57:18] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(371,815), corner_timer=-0.02
[21:57:18] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[21:57:18] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=EVADING_GRENADE, target=-33.5°, current=-132.0°, player=(371,815), corner_timer=0.00
[21:57:18] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:57:18] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:57:18] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(371,815), corner_timer=0.30
[21:57:18] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=165.2°, current=-129.2°, player=(371,815), corner_timer=0.00
[21:57:18] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=165.2°, current=-159.9°, player=(371,815), corner_timer=0.00
[21:57:18] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:57:18] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1023.755, 760.6364)
[21:57:18] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=EVADING_GRENADE, target=-32.9°, current=-138.6°, player=(371,815), corner_timer=0.00
[21:57:18] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:57:18] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:57:18] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=163.5°, current=-110.4°, player=(371,815), corner_timer=0.00
[21:57:18] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=163.5°, current=-164.4°, player=(371,815), corner_timer=0.00
[21:57:18] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:57:18] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1048.447, 759.8723)
[21:57:18] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[21:57:18] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=EVADING_GRENADE, target=-32.4°, current=-142.8°, player=(371,815), corner_timer=0.00
[21:57:18] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:57:18] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:57:18] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=162.1°, current=-114.3°, player=(371,815), corner_timer=0.00
[21:57:18] [ENEMY] [Enemy4] PURSUING corner check: angle -94.0°
[21:57:18] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=162.0°, current=-168.7°, player=(371,815), corner_timer=0.00
[21:57:18] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:57:18] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1070.842, 759.4572)
[21:57:18] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=EVADING_GRENADE, target=-31.8°, current=-146.8°, player=(371,817), corner_timer=0.00
[21:57:18] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:57:18] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:57:18] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=160.1°, current=-118.0°, player=(371,820), corner_timer=0.00
[21:57:18] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=159.7°, current=-173.6°, player=(371,822), corner_timer=0.00
[21:57:18] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:57:18] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1091.115, 758.3611)
[21:57:18] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=EVADING_GRENADE, target=-31.4°, current=-151.2°, player=(371,827), corner_timer=0.00
[21:57:18] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(371,827), corner_timer=-0.02
[21:57:18] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[21:57:18] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:57:18] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:57:18] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(371,830), corner_timer=0.30
[21:57:18] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=157.0°, current=-122.1°, player=(371,833), corner_timer=0.00
[21:57:18] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=156.4°, current=-179.5°, player=(371,837), corner_timer=0.00
[21:57:18] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:57:18] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1109.467, 755.9623)
[21:57:18] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=EVADING_GRENADE, target=-31.0°, current=-135.6°, player=(371,850), corner_timer=0.00
[21:57:18] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:57:18] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:57:18] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=152.4°, current=-109.9°, player=(371,860), corner_timer=0.00
[21:57:18] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=151.6°, current=170.1°, player=(371,866), corner_timer=0.00
[21:57:18] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:57:18] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1131.961, 724.319)
[21:57:19] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=EVADING_GRENADE, target=-30.9°, current=-144.4°, player=(371,881), corner_timer=0.00
[21:57:19] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:57:19] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:57:19] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=148.4°, current=-118.3°, player=(371,891), corner_timer=0.00
[21:57:19] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:57:19] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1151.014, 689.884)
[21:57:19] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=148.4°, current=157.6°, player=(371,898), corner_timer=0.00
[21:57:19] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:57:19] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:57:19] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=146.7°, current=121.9°, player=(371,905), corner_timer=0.00
[21:57:19] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:57:19] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1160.256, 704.2487)
[21:57:19] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=146.7°, current=150.2°, player=(371,911), corner_timer=0.00
[21:57:19] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:19] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:57:19] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:57:19] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=145.7°, current=114.8°, player=(371,916), corner_timer=0.00
[21:57:19] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:57:19] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1167.66, 717.7587)
[21:57:19] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=145.7°, current=145.5°, player=(371,919), corner_timer=0.00
[21:57:19] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:57:19] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:57:19] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=145.2°, current=113.3°, player=(371,922), corner_timer=0.00
[21:57:19] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:57:19] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1173.629, 728.6974)
[21:57:19] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=145.2°, current=145.1°, player=(371,923), corner_timer=0.00
[21:57:19] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:57:19] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:57:19] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=145.1°, current=112.9°, player=(371,923), corner_timer=0.00
[21:57:19] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:57:19] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1178.681, 735.624)
[21:57:19] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=145.1°, current=145.1°, player=(371,923), corner_timer=0.00
[21:57:19] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(371,923), corner_timer=-0.02
[21:57:19] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[21:57:19] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:57:19] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:57:19] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(371,923), corner_timer=0.30
[21:57:19] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=145.3°, current=112.8°, player=(371,923), corner_timer=0.00
[21:57:19] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:57:19] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1183.266, 737.6407)
[21:57:19] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=145.3°, current=145.3°, player=(371,923), corner_timer=0.00
[21:57:19] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:57:19] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:57:19] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=145.4°, current=112.9°, player=(371,923), corner_timer=0.00
[21:57:19] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:57:19] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1187.598, 734.486)
[21:57:19] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=145.4°, current=145.4°, player=(371,923), corner_timer=0.00
[21:57:19] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:19] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:57:19] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:57:19] [INFO] [SoundPropagation] Sound emitted: type=GRENADE_LANDING, pos=(671.2046, 648.3974), source=NEUTRAL (FlashbangGrenade), range=112, listeners=20
[21:57:19] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[21:57:19] [ENEMY] [Enemy3] Heard GRENADE_LANDING at (671.2046, 648.3974), intensity=0.33
[21:57:19] [ENEMY] [Enemy3] EVADING_GRENADE (from sound): escaping from (671.2046, 648.3974)
[21:57:19] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=9, self=0, below_threshold=0
[21:57:19] [INFO] [GrenadeBase] Grenade landed at (671.2046, 648.3974)
[21:57:19] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(371,923), corner_timer=-0.02
[21:57:19] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[21:57:19] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(371,923), corner_timer=0.30
[21:57:19] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:20] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(371,923), corner_timer=-0.02
[21:57:20] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[21:57:20] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(371,923), corner_timer=0.30
[21:57:20] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:57:20] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:57:20] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=155.4°, current=11.3°, player=(371,923), corner_timer=0.00
[21:57:20] [INFO] [GrenadeBase] EXPLODED at (675.048, 646.256)!
[21:57:20] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(675.048, 646.256), source=NEUTRAL (FlashbangGrenade), range=2937, listeners=10
[21:57:20] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=0, below_threshold=6
[21:57:20] [ENEMY] [Enemy4] Status: BLINDED applied
[21:57:20] [ENEMY] [Enemy4] Status: STUNNED applied
[21:57:20] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:20] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(371,923), corner_timer=-0.02
[21:57:20] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[21:57:20] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(371,923), corner_timer=0.30
[21:57:20] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:20] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[21:57:20] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(371,923), corner_timer=-0.02
[21:57:20] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[21:57:20] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(371,923), corner_timer=0.30
[21:57:20] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:57:20] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:20] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[21:57:20] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[21:57:20] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[21:57:20] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:57:20] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:57:20] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:57:20] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[21:57:20] [ENEMY] [Enemy1] Death animation component initialized
[21:57:20] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:20] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[21:57:20] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[21:57:20] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[21:57:20] [ENEMY] [Enemy2] Death animation component initialized
[21:57:20] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:20] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[21:57:20] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[21:57:20] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[21:57:20] [ENEMY] [Enemy3] Death animation component initialized
[21:57:20] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:20] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[21:57:20] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[21:57:20] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[21:57:20] [ENEMY] [Enemy4] Death animation component initialized
[21:57:20] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:20] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[21:57:20] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[21:57:20] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[21:57:20] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:57:20] [ENEMY] [Enemy5] Death animation component initialized
[21:57:20] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:20] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[21:57:20] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[21:57:20] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[21:57:20] [ENEMY] [Enemy6] Death animation component initialized
[21:57:20] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:20] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[21:57:20] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[21:57:20] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[21:57:20] [ENEMY] [Enemy7] Death animation component initialized
[21:57:20] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:20] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[21:57:20] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[21:57:20] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[21:57:20] [ENEMY] [Enemy8] Death animation component initialized
[21:57:20] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:20] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[21:57:20] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[21:57:20] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[21:57:20] [ENEMY] [Enemy9] Death animation component initialized
[21:57:20] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:20] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[21:57:20] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[21:57:20] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[21:57:20] [ENEMY] [Enemy10] Death animation component initialized
[21:57:20] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:20] [INFO] [BloodyFeet:Player] Footprint scene loaded
[21:57:20] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[21:57:20] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[21:57:20] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[21:57:20] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:57:20] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:57:20] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:57:20] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:57:20] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:57:20] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[21:57:20] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[21:57:20] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[21:57:20] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:57:20] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[21:57:20] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[21:57:20] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[21:57:20] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[21:57:20] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[21:57:20] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[21:57:20] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[21:57:20] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[21:57:20] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[21:57:20] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[21:57:20] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[21:57:20] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[21:57:20] [INFO] [ScoreManager] Level started with 10 enemies
[21:57:20] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[21:57:20] [INFO] [CinemaEffects] Found player node: Player
[21:57:20] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[21:57:20] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[21:57:20] [ENEMY] [Enemy1] Registered as sound listener
[21:57:20] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[21:57:20] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[21:57:20] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[21:57:20] [ENEMY] [Enemy2] Registered as sound listener
[21:57:20] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[21:57:20] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[21:57:20] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[21:57:20] [ENEMY] [Enemy3] Registered as sound listener
[21:57:20] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[21:57:20] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[21:57:20] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[21:57:20] [ENEMY] [Enemy4] Registered as sound listener
[21:57:20] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[21:57:20] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[21:57:20] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[21:57:20] [ENEMY] [Enemy5] Registered as sound listener
[21:57:20] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[21:57:20] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[21:57:20] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[21:57:20] [ENEMY] [Enemy6] Registered as sound listener
[21:57:20] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[21:57:20] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[21:57:20] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[21:57:20] [ENEMY] [Enemy7] Registered as sound listener
[21:57:20] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[21:57:20] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[21:57:20] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[21:57:20] [ENEMY] [Enemy8] Registered as sound listener
[21:57:20] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[21:57:20] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[21:57:20] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[21:57:20] [ENEMY] [Enemy9] Registered as sound listener
[21:57:20] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[21:57:20] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[21:57:20] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[21:57:20] [ENEMY] [Enemy10] Registered as sound listener
[21:57:20] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[21:57:20] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[21:57:20] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:20] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:20] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:20] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:20] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:20] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=225.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:20] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=78.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:20] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:20] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:57:20] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:57:20] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:57:20] [INFO] [LastChance] Found player: Player
[21:57:20] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:57:20] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:57:20] [INFO] [LastChance] Connected to player Died signal (C#)
[21:57:20] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[21:57:20] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:57:20] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:57:20] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:57:21] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:57:21] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[21:57:21] [INFO] [Player.Grenade] G pressed - starting grab animation
[21:57:21] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:57:21] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (482.80478, 1141.7997)
[21:57:21] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[21:57:21] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[21:57:21] [INFO] [GrenadeBase] Timer activated! 4.0 seconds until explosion
[21:57:21] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[21:57:21] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[21:57:21] [INFO] [Player.Grenade] Step 1 complete! Drag: (186.05063, 41.410034)
[21:57:21] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[21:57:21] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[21:57:22] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:57:22] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[21:57:22] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(406,1041), corner_timer=0.30
[21:57:22] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(406,1041), corner_timer=0.30
[21:57:22] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(346,961), corner_timer=-0.02
[21:57:22] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:57:22] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(346,961), corner_timer=-0.02
[21:57:22] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[21:57:22] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(345,956), corner_timer=0.30
[21:57:22] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(345,956), corner_timer=0.30
[21:57:23] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(344,881), corner_timer=-0.02
[21:57:23] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[21:57:23] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(344,879), corner_timer=0.30
[21:57:23] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(344,877), corner_timer=-0.02
[21:57:23] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[21:57:23] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(344,877), corner_timer=0.30
[21:57:23] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(344,877), corner_timer=-0.02
[21:57:23] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[21:57:23] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(344,877), corner_timer=0.30
[21:57:24] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(344,877), corner_timer=-0.02
[21:57:24] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[21:57:24] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(344,877), corner_timer=0.30
[21:57:24] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:24] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(344,877), corner_timer=-0.02
[21:57:24] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[21:57:24] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(344,877), corner_timer=0.30
[21:57:24] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:24] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(344,877), corner_timer=-0.02
[21:57:24] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[21:57:24] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(344,877), corner_timer=0.30
[21:57:25] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:25] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(344,877), corner_timer=-0.02
[21:57:25] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[21:57:25] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(344,877), corner_timer=0.30
[21:57:25] [INFO] [GrenadeBase] EXPLODED at (344.9945, 877.4395)!
[21:57:25] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(344.9945, 877.4395), source=NEUTRAL (FlashbangGrenade), range=2937, listeners=20
[21:57:25] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[21:57:25] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[21:57:25] [INFO] [Player.Grenade.Simple] Throwing! Target: (581.2105, 724.4899), Distance: 256,8, Speed: 392,6, Friction: 300,0
[21:57:25] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,5746149
[21:57:25] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.839402, -0.543512), Speed: 392.6 (clamped from 392.6, max: 1352.8)
[21:57:25] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[21:57:25] [INFO] [Player.Grenade.Simple] Grenade thrown!
[21:57:25] [INFO] [Player.Grenade] State reset to IDLE
[21:57:25] [INFO] [Player.Grenade] State reset to IDLE
[21:57:25] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[21:57:25] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:25] [INFO] [Player.Grenade] Player rotation restored to 0
[21:57:25] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(344,877), corner_timer=-0.02
[21:57:25] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[21:57:25] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(344,877), corner_timer=0.30
[21:57:25] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[21:57:25] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:25] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(344,877), corner_timer=-0.02
[21:57:25] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[21:57:25] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(344,877), corner_timer=0.30
[21:57:25] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:57:26] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:26] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[21:57:26] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[21:57:26] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[21:57:26] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:57:26] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:57:26] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:57:26] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[21:57:26] [ENEMY] [Enemy1] Death animation component initialized
[21:57:26] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:26] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[21:57:26] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[21:57:26] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[21:57:26] [ENEMY] [Enemy2] Death animation component initialized
[21:57:26] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:26] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[21:57:26] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[21:57:26] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[21:57:26] [ENEMY] [Enemy3] Death animation component initialized
[21:57:26] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:26] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[21:57:26] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[21:57:26] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[21:57:26] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:57:26] [ENEMY] [Enemy4] Death animation component initialized
[21:57:26] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:26] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[21:57:26] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[21:57:26] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[21:57:26] [ENEMY] [Enemy5] Death animation component initialized
[21:57:26] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:26] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[21:57:26] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[21:57:26] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[21:57:26] [ENEMY] [Enemy6] Death animation component initialized
[21:57:26] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:26] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[21:57:26] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[21:57:26] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[21:57:26] [ENEMY] [Enemy7] Death animation component initialized
[21:57:26] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:26] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[21:57:26] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[21:57:26] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[21:57:26] [ENEMY] [Enemy8] Death animation component initialized
[21:57:26] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:26] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[21:57:26] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[21:57:26] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[21:57:26] [ENEMY] [Enemy9] Death animation component initialized
[21:57:26] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:26] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[21:57:26] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[21:57:26] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[21:57:26] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:57:26] [ENEMY] [Enemy10] Death animation component initialized
[21:57:26] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:26] [INFO] [BloodyFeet:Player] Footprint scene loaded
[21:57:26] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[21:57:26] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[21:57:26] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[21:57:26] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:57:26] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:57:26] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:57:26] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:57:26] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:57:26] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[21:57:26] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[21:57:26] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[21:57:26] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:57:26] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[21:57:26] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[21:57:26] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[21:57:26] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[21:57:26] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[21:57:26] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[21:57:26] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[21:57:26] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[21:57:26] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[21:57:26] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[21:57:26] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[21:57:26] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[21:57:26] [INFO] [ScoreManager] Level started with 10 enemies
[21:57:26] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[21:57:26] [INFO] [CinemaEffects] Found player node: Player
[21:57:26] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[21:57:26] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[21:57:26] [ENEMY] [Enemy1] Registered as sound listener
[21:57:26] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[21:57:26] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[21:57:26] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[21:57:26] [ENEMY] [Enemy2] Registered as sound listener
[21:57:26] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[21:57:26] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[21:57:26] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[21:57:26] [ENEMY] [Enemy3] Registered as sound listener
[21:57:26] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[21:57:26] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[21:57:26] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[21:57:26] [ENEMY] [Enemy4] Registered as sound listener
[21:57:26] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[21:57:26] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[21:57:26] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[21:57:26] [ENEMY] [Enemy5] Registered as sound listener
[21:57:26] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[21:57:26] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[21:57:26] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[21:57:26] [ENEMY] [Enemy6] Registered as sound listener
[21:57:26] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[21:57:26] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[21:57:26] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[21:57:26] [ENEMY] [Enemy7] Registered as sound listener
[21:57:26] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[21:57:26] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[21:57:26] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[21:57:26] [ENEMY] [Enemy8] Registered as sound listener
[21:57:26] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[21:57:26] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[21:57:26] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[21:57:26] [ENEMY] [Enemy9] Registered as sound listener
[21:57:26] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[21:57:26] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[21:57:26] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[21:57:26] [ENEMY] [Enemy10] Registered as sound listener
[21:57:26] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[21:57:26] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[21:57:26] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:26] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:26] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:26] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:26] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:26] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:26] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:26] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:26] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:57:26] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:57:26] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:57:26] [INFO] [LastChance] Found player: Player
[21:57:26] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:57:26] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:57:26] [INFO] [LastChance] Connected to player Died signal (C#)
[21:57:26] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[21:57:26] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:57:26] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:57:26] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:57:26] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:57:26] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[21:57:26] [INFO] [Player.Grenade] G pressed - starting grab animation
[21:57:26] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:57:26] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (516.11206, 1099.0538)
[21:57:26] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[21:57:26] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[21:57:26] [INFO] [GrenadeBase] Timer activated! 4.0 seconds until explosion
[21:57:26] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[21:57:26] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[21:57:26] [INFO] [Player.Grenade] Step 1 complete! Drag: (195.07513, 28.05188)
[21:57:26] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[21:57:26] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[21:57:27] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:57:27] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[21:57:27] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(418,986), corner_timer=0.30
[21:57:27] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(418,986), corner_timer=0.30
[21:57:27] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(348,912), corner_timer=-0.02
[21:57:27] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:57:27] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(348,912), corner_timer=-0.02
[21:57:27] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[21:57:27] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(345,908), corner_timer=0.30
[21:57:27] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(345,908), corner_timer=0.30
[21:57:28] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(327,882), corner_timer=-0.02
[21:57:28] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[21:57:28] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(327,882), corner_timer=0.30
[21:57:28] [INFO] [Player.Grenade.Simple] Throwing! Target: (607.26337, 703.4803), Distance: 315,3, Speed: 434,9, Friction: 300,0
[21:57:28] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,56842893
[21:57:28] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.842748, -0.538309), Speed: 434.9 (clamped from 434.9, max: 1352.8)
[21:57:28] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[21:57:28] [INFO] [Player.Grenade.Simple] Grenade thrown!
[21:57:28] [INFO] [Player.Grenade] State reset to IDLE
[21:57:28] [INFO] [Player.Grenade] State reset to IDLE
[21:57:28] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[21:57:28] [INFO] [Player.Grenade] Player rotation restored to 0
[21:57:28] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[21:57:28] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(327,882), corner_timer=-0.02
[21:57:28] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[21:57:28] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(327,882), corner_timer=0.30
[21:57:28] [ENEMY] [Enemy1] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:57:28] [ENEMY] [Enemy1] EVADING_GRENADE started: escaping to (268.2647, 297.2756)
[21:57:28] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-121.4°, current=13.5°, player=(327,882), corner_timer=0.00
[21:57:28] [ENEMY] [Enemy1] EVADING_GRENADE: Escaped to safe distance
[21:57:28] [ENEMY] [Enemy1] State: EVADING_GRENADE -> IDLE
[21:57:28] [ENEMY] [Enemy1] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=11.3°, current=7.8°, player=(327,882), corner_timer=0.00
[21:57:28] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(327,882), corner_timer=-0.02
[21:57:28] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[21:57:28] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(327,882), corner_timer=0.30
[21:57:29] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(327,882), corner_timer=-0.02
[21:57:29] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[21:57:29] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(327,882), corner_timer=0.30
[21:57:29] [INFO] [SoundPropagation] Sound emitted: type=GRENADE_LANDING, pos=(614.4758, 698.8737), source=NEUTRAL (FlashbangGrenade), range=112, listeners=20
[21:57:29] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[21:57:29] [ENEMY] [Enemy3] Heard GRENADE_LANDING at (614.4758, 698.8737), intensity=0.25
[21:57:29] [ENEMY] [Enemy3] EVADING_GRENADE (from sound): escaping from (614.4758, 698.8737)
[21:57:29] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=9, self=0, below_threshold=0
[21:57:29] [INFO] [GrenadeBase] Grenade landed at (614.4758, 698.8737)
[21:57:29] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-42.8°, current=-40.9°, player=(327,882), corner_timer=0.00
[21:57:29] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:29] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(327,882), corner_timer=-0.02
[21:57:29] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[21:57:29] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(327,882), corner_timer=0.30
[21:57:29] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:30] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:57:30] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[21:57:30] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=11.3°, current=11.4°, player=(327,882), corner_timer=0.00
[21:57:30] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(327,882), corner_timer=-0.02
[21:57:30] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[21:57:30] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(327,882), corner_timer=0.30
[21:57:30] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:30] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(327,882), corner_timer=-0.02
[21:57:30] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[21:57:30] [INFO] [GrenadeBase] EXPLODED at (617.8555, 696.7149)!
[21:57:30] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(617.8555, 696.7149), source=NEUTRAL (FlashbangGrenade), range=2937, listeners=10
[21:57:30] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=0, below_threshold=6
[21:57:30] [ENEMY] [Enemy2] Status: BLINDED applied
[21:57:30] [ENEMY] [Enemy2] Status: STUNNED applied
[21:57:30] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(327,882), corner_timer=0.30
[21:57:30] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:30] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(327,882), corner_timer=-0.02
[21:57:30] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[21:57:30] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(327,882), corner_timer=0.30
[21:57:30] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:30] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:57:30] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:30] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[21:57:30] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[21:57:30] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[21:57:30] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:57:30] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:57:30] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:57:30] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[21:57:30] [ENEMY] [Enemy1] Death animation component initialized
[21:57:30] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:30] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[21:57:30] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[21:57:30] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[21:57:30] [ENEMY] [Enemy2] Death animation component initialized
[21:57:30] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:30] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[21:57:30] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[21:57:30] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[21:57:30] [ENEMY] [Enemy3] Death animation component initialized
[21:57:30] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:30] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[21:57:30] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[21:57:30] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[21:57:30] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:57:30] [ENEMY] [Enemy4] Death animation component initialized
[21:57:30] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:30] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[21:57:30] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[21:57:30] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[21:57:30] [ENEMY] [Enemy5] Death animation component initialized
[21:57:30] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:30] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[21:57:30] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[21:57:30] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[21:57:30] [ENEMY] [Enemy6] Death animation component initialized
[21:57:30] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:30] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[21:57:30] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[21:57:30] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[21:57:30] [ENEMY] [Enemy7] Death animation component initialized
[21:57:30] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:30] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[21:57:30] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[21:57:30] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[21:57:30] [ENEMY] [Enemy8] Death animation component initialized
[21:57:30] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:30] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[21:57:30] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[21:57:30] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[21:57:30] [ENEMY] [Enemy9] Death animation component initialized
[21:57:30] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:30] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[21:57:30] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[21:57:30] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[21:57:30] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:57:30] [ENEMY] [Enemy10] Death animation component initialized
[21:57:30] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:30] [INFO] [BloodyFeet:Player] Footprint scene loaded
[21:57:30] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[21:57:30] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[21:57:30] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[21:57:30] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:57:30] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:57:30] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:57:30] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:57:30] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:57:30] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[21:57:30] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[21:57:30] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[21:57:30] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:57:30] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[21:57:30] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[21:57:30] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[21:57:30] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[21:57:30] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[21:57:30] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[21:57:30] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[21:57:30] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[21:57:30] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[21:57:30] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[21:57:30] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[21:57:30] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[21:57:30] [INFO] [ScoreManager] Level started with 10 enemies
[21:57:30] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[21:57:30] [INFO] [CinemaEffects] Found player node: Player
[21:57:30] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[21:57:30] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[21:57:30] [ENEMY] [Enemy1] Registered as sound listener
[21:57:30] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[21:57:30] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[21:57:30] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[21:57:30] [ENEMY] [Enemy2] Registered as sound listener
[21:57:30] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[21:57:30] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[21:57:30] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[21:57:30] [ENEMY] [Enemy3] Registered as sound listener
[21:57:30] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[21:57:30] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[21:57:30] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[21:57:30] [ENEMY] [Enemy4] Registered as sound listener
[21:57:30] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[21:57:30] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[21:57:30] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[21:57:30] [ENEMY] [Enemy5] Registered as sound listener
[21:57:30] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[21:57:30] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[21:57:30] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[21:57:30] [ENEMY] [Enemy6] Registered as sound listener
[21:57:30] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[21:57:30] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[21:57:30] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[21:57:30] [ENEMY] [Enemy7] Registered as sound listener
[21:57:30] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[21:57:30] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[21:57:30] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[21:57:30] [ENEMY] [Enemy8] Registered as sound listener
[21:57:30] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[21:57:30] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[21:57:30] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[21:57:30] [ENEMY] [Enemy9] Registered as sound listener
[21:57:30] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[21:57:30] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[21:57:30] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[21:57:30] [ENEMY] [Enemy10] Registered as sound listener
[21:57:30] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[21:57:30] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[21:57:30] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:30] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:30] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=281.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:30] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:30] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:30] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:30] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:30] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:30] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:57:30] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:57:30] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:57:30] [INFO] [LastChance] Found player: Player
[21:57:30] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:57:30] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:57:30] [INFO] [LastChance] Connected to player Died signal (C#)
[21:57:30] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[21:57:30] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:57:30] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:57:30] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:57:31] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:57:31] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[21:57:31] [INFO] [Player.Grenade] G pressed - starting grab animation
[21:57:31] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:57:31] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (561.67804, 1068.3302)
[21:57:31] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[21:57:31] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[21:57:31] [INFO] [GrenadeBase] Timer activated! 4.0 seconds until explosion
[21:57:31] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[21:57:31] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[21:57:31] [INFO] [Player.Grenade] Step 1 complete! Drag: (218.7431, 55.436035)
[21:57:31] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[21:57:31] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[21:57:32] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:57:32] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[21:57:32] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1023), corner_timer=0.30
[21:57:32] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1023), corner_timer=0.30
[21:57:32] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(441,922), corner_timer=-0.02
[21:57:32] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:57:32] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(441,922), corner_timer=-0.02
[21:57:32] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[21:57:32] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(438,917), corner_timer=0.30
[21:57:32] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(438,917), corner_timer=0.30
[21:57:33] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(367,859), corner_timer=-0.02
[21:57:33] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[21:57:33] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(364,857), corner_timer=0.30
[21:57:33] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(349,850), corner_timer=-0.02
[21:57:33] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[21:57:33] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(349,850), corner_timer=0.30
[21:57:33] [INFO] [Player.Grenade.Simple] Throwing! Target: (1021.461, 492.7625), Distance: 813,1, Speed: 698,5, Friction: 300,0
[21:57:33] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,48916113
[21:57:33] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.882727, -0.469886), Speed: 698.5 (clamped from 698.5, max: 1352.8)
[21:57:33] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[21:57:33] [INFO] [Player.Grenade.Simple] Grenade thrown!
[21:57:33] [INFO] [Player.Grenade] State reset to IDLE
[21:57:33] [INFO] [Player.Grenade] State reset to IDLE
[21:57:33] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[21:57:33] [INFO] [Player.Grenade] Player rotation restored to 0
[21:57:33] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(349,850), corner_timer=-0.02
[21:57:33] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[21:57:33] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(349,850), corner_timer=0.30
[21:57:33] [ENEMY] [Enemy1] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:57:33] [ENEMY] [Enemy1] EVADING_GRENADE started: escaping to (269.692, 298.8009)
[21:57:33] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-120.6°, current=13.6°, player=(349,850), corner_timer=0.00
[21:57:33] [ENEMY] [Enemy1] EVADING_GRENADE: Escaped to safe distance
[21:57:33] [ENEMY] [Enemy1] State: EVADING_GRENADE -> IDLE
[21:57:34] [ENEMY] [Enemy1] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=45.0°, current=7.9°, player=(349,850), corner_timer=0.00
[21:57:34] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[21:57:34] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(349,850), corner_timer=-0.02
[21:57:34] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[21:57:34] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(349,850), corner_timer=0.30
[21:57:34] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:57:34] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (966.9347, 1109.951)
[21:57:34] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=173.4°, current=-49.9°, player=(349,850), corner_timer=0.00
[21:57:34] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:57:34] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[21:57:34] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:57:34] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (725.5518, 1198.837)
[21:57:34] [ENEMY] [Enemy4] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:57:34] [ENEMY] [Enemy4] EVADING_GRENADE started: escaping to (905.6646, 1147.006)
[21:57:34] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:57:34] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[21:57:34] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-98.0°, current=-117.6°, player=(349,850), corner_timer=0.00
[21:57:34] [ENEMY] [Enemy4] EVADING_GRENADE: Escaped to safe distance
[21:57:34] [ENEMY] [Enemy4] State: EVADING_GRENADE -> IDLE
[21:57:34] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=236.3°, current=2.4°, player=(349,850), corner_timer=0.00
[21:57:34] [ENEMY] [Enemy4] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=157.5°, current=-111.9°, player=(349,850), corner_timer=0.00
[21:57:34] [ENEMY] [Enemy4] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:57:34] [ENEMY] [Enemy4] EVADING_GRENADE started: escaping to (844.4761, 1152.155)
[21:57:34] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-98.0°, current=-139.8°, player=(349,850), corner_timer=0.00
[21:57:34] [ENEMY] [Enemy4] EVADING_GRENADE: Escaped to safe distance
[21:57:34] [ENEMY] [Enemy4] State: EVADING_GRENADE -> IDLE
[21:57:34] [ENEMY] [Enemy4] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=292.5°, current=-134.1°, player=(349,850), corner_timer=0.00
[21:57:34] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:34] [ENEMY] [Enemy4] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:57:34] [ENEMY] [Enemy4] EVADING_GRENADE started: escaping to (799.1642, 1139.765)
[21:57:34] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-98.0°, current=-136.8°, player=(349,850), corner_timer=0.00
[21:57:34] [ENEMY] [Enemy4] EVADING_GRENADE: Escaped to safe distance
[21:57:34] [ENEMY] [Enemy4] State: EVADING_GRENADE -> IDLE
[21:57:34] [ENEMY] [Enemy4] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:57:34] [ENEMY] [Enemy4] EVADING_GRENADE started: escaping to (774.7032, 1129.16)
[21:57:34] [ENEMY] [Enemy4] EVADING_GRENADE: Escaped to safe distance
[21:57:34] [ENEMY] [Enemy4] State: EVADING_GRENADE -> IDLE
[21:57:34] [ENEMY] [Enemy4] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=236.3°, current=-131.9°, player=(349,850), corner_timer=0.00
[21:57:34] [ENEMY] [Enemy4] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:57:34] [ENEMY] [Enemy4] EVADING_GRENADE started: escaping to (731.8845, 1100.65)
[21:57:34] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(349,850), corner_timer=-0.02
[21:57:34] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[21:57:34] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-98.0°, current=-131.6°, player=(349,850), corner_timer=0.00
[21:57:34] [ENEMY] [Enemy4] EVADING_GRENADE: Escaped to safe distance
[21:57:34] [ENEMY] [Enemy4] State: EVADING_GRENADE -> IDLE
[21:57:34] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(349,850), corner_timer=0.30
[21:57:34] [ENEMY] [Enemy4] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=213.8°, current=-125.9°, player=(349,850), corner_timer=0.00
[21:57:34] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:35] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(349,850), corner_timer=-0.02
[21:57:35] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[21:57:35] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(349,850), corner_timer=0.30
[21:57:35] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:57:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:35] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[21:57:35] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[21:57:35] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[21:57:35] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:57:35] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:57:35] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:57:35] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[21:57:35] [ENEMY] [Enemy1] Death animation component initialized
[21:57:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:35] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[21:57:35] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[21:57:35] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[21:57:35] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:57:35] [ENEMY] [Enemy2] Death animation component initialized
[21:57:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:35] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[21:57:35] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[21:57:35] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[21:57:35] [ENEMY] [Enemy3] Death animation component initialized
[21:57:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:35] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[21:57:35] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[21:57:35] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[21:57:35] [ENEMY] [Enemy4] Death animation component initialized
[21:57:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:35] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[21:57:35] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[21:57:35] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[21:57:35] [ENEMY] [Enemy5] Death animation component initialized
[21:57:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:35] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[21:57:35] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[21:57:35] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[21:57:35] [ENEMY] [Enemy6] Death animation component initialized
[21:57:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:35] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[21:57:35] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[21:57:35] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[21:57:35] [ENEMY] [Enemy7] Death animation component initialized
[21:57:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:35] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[21:57:35] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[21:57:35] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[21:57:35] [ENEMY] [Enemy8] Death animation component initialized
[21:57:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:35] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[21:57:35] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[21:57:35] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[21:57:35] [ENEMY] [Enemy9] Death animation component initialized
[21:57:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:35] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[21:57:35] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[21:57:35] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[21:57:35] [ENEMY] [Enemy10] Death animation component initialized
[21:57:35] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:35] [INFO] [BloodyFeet:Player] Footprint scene loaded
[21:57:35] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[21:57:35] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[21:57:35] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[21:57:35] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:57:35] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:57:35] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:57:35] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:57:35] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:57:35] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[21:57:35] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[21:57:35] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[21:57:35] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:57:35] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[21:57:35] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[21:57:35] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[21:57:35] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[21:57:35] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[21:57:35] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[21:57:35] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[21:57:35] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[21:57:35] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[21:57:35] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[21:57:35] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[21:57:35] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[21:57:35] [INFO] [ScoreManager] Level started with 10 enemies
[21:57:35] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[21:57:35] [INFO] [CinemaEffects] Found player node: Player
[21:57:35] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[21:57:35] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[21:57:35] [ENEMY] [Enemy1] Registered as sound listener
[21:57:35] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[21:57:35] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[21:57:35] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[21:57:35] [ENEMY] [Enemy2] Registered as sound listener
[21:57:35] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[21:57:35] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[21:57:35] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[21:57:35] [ENEMY] [Enemy3] Registered as sound listener
[21:57:35] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[21:57:35] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[21:57:35] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[21:57:35] [ENEMY] [Enemy4] Registered as sound listener
[21:57:35] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[21:57:35] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[21:57:35] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
[21:57:35] [ENEMY] [Enemy5] Registered as sound listener
[21:57:35] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[21:57:35] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[21:57:35] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[21:57:35] [ENEMY] [Enemy6] Registered as sound listener
[21:57:35] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[21:57:35] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[21:57:35] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[21:57:35] [ENEMY] [Enemy7] Registered as sound listener
[21:57:35] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[21:57:35] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[21:57:35] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[21:57:35] [ENEMY] [Enemy8] Registered as sound listener
[21:57:35] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[21:57:35] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[21:57:35] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[21:57:35] [ENEMY] [Enemy9] Registered as sound listener
[21:57:35] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[21:57:35] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[21:57:35] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[21:57:35] [ENEMY] [Enemy10] Registered as sound listener
[21:57:35] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[21:57:35] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[21:57:35] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:35] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:35] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:35] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:35] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:35] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:35] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:35] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:35] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:57:35] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:57:35] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:57:35] [INFO] [LastChance] Found player: Player
[21:57:35] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:57:35] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:57:35] [INFO] [LastChance] Connected to player Died signal (C#)
[21:57:35] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[21:57:35] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:57:35] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:57:35] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:57:35] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:57:35] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[21:57:35] [INFO] [Player.Grenade] G pressed - starting grab animation
[21:57:35] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:57:35] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (628.1428, 1060.3154)
[21:57:35] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[21:57:35] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[21:57:35] [INFO] [GrenadeBase] Timer activated! 4.0 seconds until explosion
[21:57:35] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[21:57:35] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[21:57:35] [INFO] [Player.Grenade] Step 1 complete! Drag: (149.31812, 40.742065)
[21:57:35] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[21:57:35] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[21:57:36] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:57:36] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[21:57:36] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,995), corner_timer=0.30
[21:57:36] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,995), corner_timer=0.30
[21:57:36] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(402,910), corner_timer=-0.02
[21:57:36] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:57:36] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(402,910), corner_timer=-0.02
[21:57:36] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[21:57:37] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(398,906), corner_timer=0.30
[21:57:37] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(398,906), corner_timer=0.30
[21:57:37] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(339,851), corner_timer=-0.02
[21:57:37] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[21:57:37] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(338,850), corner_timer=0.30
[21:57:37] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(334,847), corner_timer=-0.02
[21:57:37] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[21:57:37] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(334,847), corner_timer=0.30
[21:57:37] [INFO] [Player.Grenade.Simple] Throwing! Target: (770.27106, 655.8484), Distance: 482,4, Speed: 538,0, Friction: 300,0
[21:57:37] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,41347376
[21:57:37] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.915731, -0.401793), Speed: 538.0 (clamped from 538.0, max: 1352.8)
[21:57:37] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[21:57:37] [INFO] [Player.Grenade.Simple] Grenade thrown!
[21:57:37] [INFO] [Player.Grenade] State reset to IDLE
[21:57:37] [INFO] [Player.Grenade] State reset to IDLE
[21:57:37] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[21:57:37] [INFO] [Player.Grenade] Player rotation restored to 0
[21:57:37] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(334,847), corner_timer=-0.02
[21:57:37] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[21:57:38] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(334,847), corner_timer=0.30
[21:57:38] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[21:57:38] [ENEMY] [Enemy2] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:57:38] [ENEMY] [Enemy2] EVADING_GRENADE started: escaping to (239.4049, 328.5308)
[21:57:38] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-103.7°, current=27.7°, player=(334,847), corner_timer=0.00
[21:57:38] [ENEMY] [Enemy2] EVADING_GRENADE: Escaped to safe distance
[21:57:38] [ENEMY] [Enemy2] State: EVADING_GRENADE -> IDLE
[21:57:38] [ENEMY] [Enemy2] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=292.5°, current=4.7°, player=(334,847), corner_timer=0.00
[21:57:38] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(334,847), corner_timer=-0.02
[21:57:38] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[21:57:38] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(334,847), corner_timer=0.30
[21:57:38] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:38] [ENEMY] [Enemy4] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:57:38] [ENEMY] [Enemy4] EVADING_GRENADE started: escaping to (914.6572, 1165.798)
[21:57:38] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:57:38] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (632.6121, 1201.492)
[21:57:38] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-98.0°, current=-83.8°, player=(334,847), corner_timer=0.00
[21:57:38] [ENEMY] [Enemy4] EVADING_GRENADE: Escaped to safe distance
[21:57:38] [ENEMY] [Enemy4] State: EVADING_GRENADE -> IDLE
[21:57:38] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=173.4°, current=-4.9°, player=(334,847), corner_timer=0.00
[21:57:38] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:57:38] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[21:57:38] [ENEMY] [Enemy4] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=292.5°, current=-89.6°, player=(334,847), corner_timer=0.00
[21:57:38] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=236.3°, current=0.9°, player=(334,847), corner_timer=0.00
[21:57:38] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(334,847), corner_timer=-0.02
[21:57:38] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[21:57:38] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(334,847), corner_timer=0.30
[21:57:38] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:57:38] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (455.6266, 1116.461)
[21:57:38] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=173.4°, current=10.6°, player=(334,847), corner_timer=0.00
[21:57:38] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:57:38] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[21:57:38] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=11.3°, current=16.4°, player=(334,847), corner_timer=0.00
[21:57:38] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:39] [ENEMY] [Enemy4] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:57:39] [ENEMY] [Enemy4] EVADING_GRENADE started: escaping to (850.9419, 1178.071)
[21:57:39] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-98.0°, current=-81.1°, player=(334,847), corner_timer=0.00
[21:57:39] [ENEMY] [Enemy4] EVADING_GRENADE: Escaped to safe distance
[21:57:39] [ENEMY] [Enemy4] State: EVADING_GRENADE -> IDLE
[21:57:39] [ENEMY] [Enemy4] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=292.5°, current=-86.8°, player=(334,847), corner_timer=0.00
[21:57:39] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(334,847), corner_timer=-0.02
[21:57:39] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[21:57:39] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(334,847), corner_timer=0.30
[21:57:39] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:39] [INFO] [SoundPropagation] Sound emitted: type=GRENADE_LANDING, pos=(777.2815, 652.7722), source=NEUTRAL (FlashbangGrenade), range=112, listeners=30
[21:57:39] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
[21:57:39] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=10, self=0, below_threshold=0
[21:57:39] [INFO] [GrenadeBase] Grenade landed at (777.2815, 652.7722)
[21:57:39] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(334,847), corner_timer=-0.02
[21:57:39] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[21:57:39] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(334,847), corner_timer=0.30
[21:57:39] [INFO] [GrenadeBase] EXPLODED at (780.763, 651.2445)!
[21:57:39] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(780.763, 651.2445), source=NEUTRAL (FlashbangGrenade), range=2937, listeners=10
[21:57:39] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[21:57:39] [ENEMY] [Enemy3] Status: BLINDED applied
[21:57:39] [ENEMY] [Enemy3] Status: STUNNED applied
[21:57:39] [ENEMY] [Enemy4] Status: BLINDED applied
[21:57:39] [ENEMY] [Enemy4] Status: STUNNED applied
[21:57:39] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:39] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(334,847), corner_timer=-0.02
[21:57:39] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[21:57:39] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(334,847), corner_timer=0.30
[21:57:39] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:40] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:57:40] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:40] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[21:57:40] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[21:57:40] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[21:57:40] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:57:40] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:57:40] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:57:40] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[21:57:40] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:57:40] [ENEMY] [Enemy1] Death animation component initialized
[21:57:40] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:40] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[21:57:40] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[21:57:40] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[21:57:40] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:57:40] [ENEMY] [Enemy2] Death animation component initialized
[21:57:40] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:40] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[21:57:40] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[21:57:40] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[21:57:40] [ENEMY] [Enemy3] Death animation component initialized
[21:57:40] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:40] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[21:57:40] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[21:57:40] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[21:57:40] [ENEMY] [Enemy4] Death animation component initialized
[21:57:40] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:40] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[21:57:40] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[21:57:40] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[21:57:40] [ENEMY] [Enemy5] Death animation component initialized
[21:57:40] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:40] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[21:57:40] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[21:57:40] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[21:57:40] [ENEMY] [Enemy6] Death animation component initialized
[21:57:40] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:40] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[21:57:40] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[21:57:40] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[21:57:40] [ENEMY] [Enemy7] Death animation component initialized
[21:57:40] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:40] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[21:57:40] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[21:57:40] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[21:57:40] [ENEMY] [Enemy8] Death animation component initialized
[21:57:40] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:40] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[21:57:40] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[21:57:40] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[21:57:40] [ENEMY] [Enemy9] Death animation component initialized
[21:57:40] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:40] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[21:57:40] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[21:57:40] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[21:57:40] [ENEMY] [Enemy10] Death animation component initialized
[21:57:40] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:40] [INFO] [BloodyFeet:Player] Footprint scene loaded
[21:57:40] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[21:57:40] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[21:57:40] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[21:57:40] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:57:40] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:57:40] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:57:40] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:57:40] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:57:40] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[21:57:40] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[21:57:40] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[21:57:40] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:57:40] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[21:57:40] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[21:57:40] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[21:57:40] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[21:57:40] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[21:57:40] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[21:57:40] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[21:57:40] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[21:57:40] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[21:57:40] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[21:57:40] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[21:57:40] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[21:57:40] [INFO] [ScoreManager] Level started with 10 enemies
[21:57:40] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[21:57:40] [INFO] [CinemaEffects] Found player node: Player
[21:57:40] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[21:57:40] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[21:57:40] [ENEMY] [Enemy1] Registered as sound listener
[21:57:40] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[21:57:40] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[21:57:40] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[21:57:40] [ENEMY] [Enemy2] Registered as sound listener
[21:57:40] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[21:57:40] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[21:57:40] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[21:57:40] [ENEMY] [Enemy3] Registered as sound listener
[21:57:40] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[21:57:40] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[21:57:40] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[21:57:40] [ENEMY] [Enemy4] Registered as sound listener
[21:57:40] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[21:57:40] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[21:57:40] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[21:57:40] [ENEMY] [Enemy5] Registered as sound listener
[21:57:40] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[21:57:40] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[21:57:40] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[21:57:40] [ENEMY] [Enemy6] Registered as sound listener
[21:57:40] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[21:57:40] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[21:57:40] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[21:57:40] [ENEMY] [Enemy7] Registered as sound listener
[21:57:40] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[21:57:40] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[21:57:40] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[21:57:40] [ENEMY] [Enemy8] Registered as sound listener
[21:57:40] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[21:57:40] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[21:57:40] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[21:57:40] [ENEMY] [Enemy9] Registered as sound listener
[21:57:40] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[21:57:40] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[21:57:40] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[21:57:40] [ENEMY] [Enemy10] Registered as sound listener
[21:57:40] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[21:57:40] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[21:57:40] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:40] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:40] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:40] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:40] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:40] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:40] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=78.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:40] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:40] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:57:40] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:57:40] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:57:40] [INFO] [LastChance] Found player: Player
[21:57:40] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:57:40] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:57:40] [INFO] [LastChance] Connected to player Died signal (C#)
[21:57:40] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[21:57:40] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:57:40] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:57:40] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:57:40] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:57:40] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[21:57:40] [INFO] [Player.Grenade] G pressed - starting grab animation
[21:57:40] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:57:40] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (736.9302, 1056.308)
[21:57:40] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[21:57:40] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[21:57:40] [INFO] [GrenadeBase] Timer activated! 4.0 seconds until explosion
[21:57:40] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[21:57:40] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[21:57:40] [INFO] [Player.Grenade] Step 1 complete! Drag: (255.60321, 48.08899)
[21:57:40] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[21:57:40] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[21:57:41] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:57:41] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[21:57:41] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1012), corner_timer=0.30
[21:57:41] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1012), corner_timer=0.30
[21:57:42] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(410,924), corner_timer=-0.02
[21:57:42] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:57:42] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(410,924), corner_timer=-0.02
[21:57:42] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[21:57:42] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(406,920), corner_timer=0.30
[21:57:42] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(406,920), corner_timer=0.30
[21:57:42] [INFO] [Player.Grenade.Simple] Throwing! Target: (693.44196, 668.5266), Distance: 381,3, Speed: 478,3, Friction: 300,0
[21:57:42] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,5141615
[21:57:42] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.870705, -0.491805), Speed: 478.3 (clamped from 478.3, max: 1352.8)
[21:57:42] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[21:57:42] [INFO] [Player.Grenade.Simple] Grenade thrown!
[21:57:42] [INFO] [Player.Grenade] State reset to IDLE
[21:57:42] [INFO] [Player.Grenade] State reset to IDLE
[21:57:42] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[21:57:42] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:57:42] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (944.1832, 690.3248)
[21:57:42] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(349,852), corner_timer=-0.02
[21:57:42] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[21:57:42] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(348,850), corner_timer=0.30
[21:57:42] [INFO] [Player.Grenade] Player rotation restored to 0
[21:57:42] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=EVADING_GRENADE, target=163.6°, current=-175.9°, player=(347,848), corner_timer=0.00
[21:57:42] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:57:42] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[21:57:42] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[21:57:42] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=163.6°, current=-13.9°, player=(344,844), corner_timer=0.00
[21:57:42] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[21:57:42] [ENEMY] [Enemy2] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:57:42] [ENEMY] [Enemy2] EVADING_GRENADE started: escaping to (235.4969, 328.9872)
[21:57:42] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(343,842), corner_timer=-0.02
[21:57:42] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[21:57:42] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(343,842), corner_timer=0.30
[21:57:42] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-103.7°, current=27.7°, player=(343,842), corner_timer=0.00
[21:57:42] [ENEMY] [Enemy4] Memory: high confidence (0.87) - transitioning to PURSUING
[21:57:42] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[21:57:42] [ENEMY] [Enemy2] EVADING_GRENADE: Escaped to safe distance
[21:57:42] [ENEMY] [Enemy2] State: EVADING_GRENADE -> IDLE
[21:57:42] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=-172.8°, current=168.8°, player=(343,842), corner_timer=0.00
[21:57:42] [ENEMY] [Enemy2] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=292.5°, current=4.7°, player=(343,842), corner_timer=0.00
[21:57:42] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[21:57:42] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[21:57:43] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(343,842), corner_timer=-0.02
[21:57:43] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[21:57:43] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(343,842), corner_timer=0.30
[21:57:43] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=164.0°, current=115.5°, player=(343,842), corner_timer=0.00
[21:57:43] [ENEMY] [Enemy4] PURSUING corner check: angle -94.0°
[21:57:43] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:57:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:43] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[21:57:43] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[21:57:43] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[21:57:43] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:57:43] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:57:43] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:57:43] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[21:57:43] [ENEMY] [Enemy1] Death animation component initialized
[21:57:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:43] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[21:57:43] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[21:57:43] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[21:57:43] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:57:43] [ENEMY] [Enemy2] Death animation component initialized
[21:57:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:43] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[21:57:43] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[21:57:43] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[21:57:43] [ENEMY] [Enemy3] Death animation component initialized
[21:57:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:43] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[21:57:43] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[21:57:43] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[21:57:43] [ENEMY] [Enemy4] Death animation component initialized
[21:57:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:43] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[21:57:43] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[21:57:43] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[21:57:43] [ENEMY] [Enemy5] Death animation component initialized
[21:57:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:43] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[21:57:43] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[21:57:43] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[21:57:43] [ENEMY] [Enemy6] Death animation component initialized
[21:57:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:43] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[21:57:43] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[21:57:43] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[21:57:43] [ENEMY] [Enemy7] Death animation component initialized
[21:57:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:43] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[21:57:43] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[21:57:43] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[21:57:43] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:57:43] [ENEMY] [Enemy8] Death animation component initialized
[21:57:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:43] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[21:57:43] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[21:57:43] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[21:57:43] [ENEMY] [Enemy9] Death animation component initialized
[21:57:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:43] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[21:57:43] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[21:57:43] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[21:57:43] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:57:43] [ENEMY] [Enemy10] Death animation component initialized
[21:57:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:43] [INFO] [BloodyFeet:Player] Footprint scene loaded
[21:57:43] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[21:57:43] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[21:57:43] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[21:57:43] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:57:43] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:57:43] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:57:43] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:57:43] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:57:43] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[21:57:43] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[21:57:43] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[21:57:43] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:57:43] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[21:57:43] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[21:57:43] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[21:57:43] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[21:57:43] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[21:57:43] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[21:57:43] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[21:57:43] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[21:57:43] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[21:57:43] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[21:57:43] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[21:57:43] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[21:57:43] [INFO] [ScoreManager] Level started with 10 enemies
[21:57:43] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[21:57:43] [INFO] [CinemaEffects] Found player node: Player
[21:57:43] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[21:57:43] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[21:57:43] [ENEMY] [Enemy1] Registered as sound listener
[21:57:43] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[21:57:43] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[21:57:43] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[21:57:43] [ENEMY] [Enemy2] Registered as sound listener
[21:57:43] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[21:57:43] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[21:57:43] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[21:57:43] [ENEMY] [Enemy3] Registered as sound listener
[21:57:43] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[21:57:43] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[21:57:43] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[21:57:43] [ENEMY] [Enemy4] Registered as sound listener
[21:57:43] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[21:57:43] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[21:57:43] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
[21:57:43] [ENEMY] [Enemy5] Registered as sound listener
[21:57:43] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[21:57:43] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[21:57:43] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[21:57:43] [ENEMY] [Enemy6] Registered as sound listener
[21:57:43] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[21:57:43] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[21:57:43] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[21:57:43] [ENEMY] [Enemy7] Registered as sound listener
[21:57:43] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[21:57:43] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[21:57:43] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[21:57:43] [ENEMY] [Enemy8] Registered as sound listener
[21:57:43] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[21:57:43] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[21:57:43] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[21:57:43] [ENEMY] [Enemy9] Registered as sound listener
[21:57:43] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[21:57:43] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[21:57:43] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[21:57:43] [ENEMY] [Enemy10] Registered as sound listener
[21:57:43] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[21:57:43] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[21:57:43] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:43] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:43] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:43] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:43] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:43] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:43] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:43] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:43] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:57:43] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:57:43] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:57:43] [INFO] [LastChance] Found player: Player
[21:57:43] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:57:43] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:57:43] [INFO] [LastChance] Connected to player Died signal (C#)
[21:57:43] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[21:57:43] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:57:43] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:57:43] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:57:43] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:57:43] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[21:57:43] [INFO] [Player.Grenade] G pressed - starting grab animation
[21:57:43] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:57:43] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (615.32434, 1040.2783)
[21:57:43] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[21:57:43] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[21:57:43] [INFO] [GrenadeBase] Timer activated! 4.0 seconds until explosion
[21:57:43] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[21:57:43] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[21:57:43] [INFO] [Player.Grenade] Step 1 complete! Drag: (257.73303, 38.070435)
[21:57:43] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[21:57:43] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[21:57:44] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:57:44] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[21:57:44] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(530,1116), corner_timer=0.30
[21:57:44] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(530,1116), corner_timer=0.30
[21:57:45] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(604,1188), corner_timer=-0.02
[21:57:45] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:57:45] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(604,1188), corner_timer=-0.02
[21:57:45] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[21:57:45] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(608,1192), corner_timer=0.30
[21:57:45] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(608,1192), corner_timer=0.30
[21:57:45] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(682,1266), corner_timer=-0.02
[21:57:45] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[21:57:45] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(685,1270), corner_timer=0.30
[21:57:45] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(759,1344), corner_timer=-0.02
[21:57:45] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[21:57:45] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(763,1348), corner_timer=0.30
[21:57:46] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(794,1435), corner_timer=-0.02
[21:57:46] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[21:57:46] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(795,1439), corner_timer=0.30
[21:57:46] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(828,1456), corner_timer=-0.02
[21:57:46] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[21:57:46] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(831,1454), corner_timer=0.30
[21:57:46] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:47] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(906,1352), corner_timer=-0.02
[21:57:47] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[21:57:47] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(909,1351), corner_timer=0.30
[21:57:47] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:47] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(952,1390), corner_timer=-0.02
[21:57:47] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[21:57:47] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(953,1394), corner_timer=0.30
[21:57:47] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:47] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(966,1489), corner_timer=-0.02
[21:57:47] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[21:57:47] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(967,1492), corner_timer=0.30
[21:57:47] [INFO] [GrenadeBase] EXPLODED at (972.5583, 1502.755)!
[21:57:47] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(972.5583, 1502.755), source=NEUTRAL (FlashbangGrenade), range=2937, listeners=30
[21:57:47] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
[21:57:47] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=9
[21:57:47] [ENEMY] [Enemy10] Status: BLINDED applied
[21:57:47] [ENEMY] [Enemy10] Status: STUNNED applied
[21:57:47] [INFO] [Player.Grenade.Simple] Throwing! Target: (1397.1836, 1578.9617), Distance: 429,5, Speed: 507,6, Friction: 300,0
[21:57:47] [INFO] [Player.Grenade] Player rotated for throw: 0 -> 0,1734805
[21:57:47] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.98499, 0.172612), Speed: 507.6 (clamped from 507.6, max: 1352.8)
[21:57:47] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[21:57:47] [INFO] [Player.Grenade.Simple] Grenade thrown!
[21:57:47] [INFO] [Player.Grenade] State reset to IDLE
[21:57:47] [INFO] [Player.Grenade] State reset to IDLE
[21:57:47] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[21:57:47] [INFO] [Player.Grenade] Player rotation restored to 0
[21:57:48] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(976,1511), corner_timer=-0.02
[21:57:48] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[21:57:48] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(976,1511), corner_timer=0.30
[21:57:48] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[21:57:48] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(976,1511), corner_timer=-0.02
[21:57:48] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[21:57:48] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(976,1511), corner_timer=0.30
[21:57:48] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:57:48] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:48] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[21:57:48] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[21:57:48] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[21:57:48] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:57:48] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:57:48] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:57:48] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[21:57:48] [ENEMY] [Enemy1] Death animation component initialized
[21:57:48] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:48] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[21:57:48] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[21:57:48] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[21:57:48] [ENEMY] [Enemy2] Death animation component initialized
[21:57:48] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:48] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[21:57:48] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[21:57:48] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[21:57:48] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:57:48] [ENEMY] [Enemy3] Death animation component initialized
[21:57:48] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:48] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[21:57:48] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[21:57:48] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[21:57:48] [ENEMY] [Enemy4] Death animation component initialized
[21:57:48] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:48] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[21:57:48] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[21:57:48] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[21:57:48] [ENEMY] [Enemy5] Death animation component initialized
[21:57:48] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:48] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[21:57:48] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[21:57:48] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[21:57:48] [ENEMY] [Enemy6] Death animation component initialized
[21:57:48] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:48] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[21:57:48] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[21:57:48] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[21:57:48] [ENEMY] [Enemy7] Death animation component initialized
[21:57:48] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:48] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[21:57:48] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[21:57:48] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[21:57:48] [ENEMY] [Enemy8] Death animation component initialized
[21:57:48] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:48] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[21:57:48] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[21:57:48] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[21:57:48] [ENEMY] [Enemy9] Death animation component initialized
[21:57:48] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:48] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[21:57:48] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[21:57:48] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[21:57:48] [ENEMY] [Enemy10] Death animation component initialized
[21:57:48] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:48] [INFO] [BloodyFeet:Player] Footprint scene loaded
[21:57:48] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[21:57:48] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[21:57:48] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[21:57:48] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:57:48] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:57:48] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:57:48] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:57:48] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:57:48] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[21:57:48] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[21:57:48] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[21:57:48] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:57:48] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[21:57:48] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[21:57:48] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[21:57:48] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[21:57:48] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[21:57:48] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[21:57:48] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[21:57:48] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[21:57:48] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[21:57:48] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[21:57:48] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[21:57:48] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[21:57:48] [INFO] [ScoreManager] Level started with 10 enemies
[21:57:48] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[21:57:48] [INFO] [CinemaEffects] Found player node: Player
[21:57:48] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[21:57:48] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[21:57:48] [ENEMY] [Enemy1] Registered as sound listener
[21:57:48] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[21:57:48] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[21:57:48] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[21:57:48] [ENEMY] [Enemy2] Registered as sound listener
[21:57:48] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[21:57:48] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[21:57:48] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[21:57:48] [ENEMY] [Enemy3] Registered as sound listener
[21:57:48] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[21:57:48] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[21:57:48] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[21:57:48] [ENEMY] [Enemy4] Registered as sound listener
[21:57:48] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[21:57:48] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[21:57:48] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[21:57:48] [ENEMY] [Enemy5] Registered as sound listener
[21:57:48] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[21:57:48] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[21:57:48] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[21:57:48] [ENEMY] [Enemy6] Registered as sound listener
[21:57:48] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[21:57:48] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[21:57:48] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[21:57:48] [ENEMY] [Enemy7] Registered as sound listener
[21:57:48] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[21:57:48] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[21:57:48] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[21:57:48] [ENEMY] [Enemy8] Registered as sound listener
[21:57:48] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[21:57:48] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[21:57:48] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[21:57:48] [ENEMY] [Enemy9] Registered as sound listener
[21:57:48] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[21:57:48] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[21:57:48] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[21:57:48] [ENEMY] [Enemy10] Registered as sound listener
[21:57:48] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[21:57:48] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[21:57:48] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:48] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:48] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=236.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:48] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:48] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:48] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:48] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:48] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:48] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:57:48] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:57:48] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:57:48] [INFO] [LastChance] Found player: Player
[21:57:48] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:57:48] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:57:48] [INFO] [LastChance] Connected to player Died signal (C#)
[21:57:48] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[21:57:48] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:57:48] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:57:48] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:57:50] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:57:50] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[21:57:50] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(741,1358), corner_timer=0.30
[21:57:50] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(741,1358), corner_timer=0.30
[21:57:50] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(820,1358), corner_timer=-0.02
[21:57:50] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:57:50] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(820,1358), corner_timer=-0.02
[21:57:50] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[21:57:50] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(822,1358), corner_timer=0.30
[21:57:50] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(822,1358), corner_timer=0.30
[21:57:50] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(852,1358), corner_timer=-0.02
[21:57:50] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[21:57:50] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(856,1358), corner_timer=0.30
[21:57:51] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(955,1366), corner_timer=-0.02
[21:57:51] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[21:57:51] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(958,1368), corner_timer=0.30
[21:57:51] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(946,1433), corner_timer=-0.02
[21:57:51] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[21:57:51] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(945,1437), corner_timer=0.30
[21:57:51] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(935,1477), corner_timer=-0.02
[21:57:51] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[21:57:51] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(935,1477), corner_timer=0.30
[21:57:52] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:57:52] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[21:57:52] [INFO] [Player.Grenade] G pressed - starting grab animation
[21:57:52] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:57:52] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (1243.4609, 1692.6018)
[21:57:52] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[21:57:52] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[21:57:52] [INFO] [GrenadeBase] Timer activated! 4.0 seconds until explosion
[21:57:52] [INFO] [Player.Grenade] Timer started, grenade created at (935.554, 1477.1177)
[21:57:52] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[21:57:52] [INFO] [Player.Grenade] Step 1 complete! Drag: (107.11011, 32.931763)
[21:57:52] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:52] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[21:57:52] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[21:57:52] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(935,1477), corner_timer=-0.02
[21:57:52] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[21:57:52] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(935,1477), corner_timer=0.30
[21:57:52] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:52] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(935,1477), corner_timer=-0.02
[21:57:52] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[21:57:52] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(935,1477), corner_timer=0.30
[21:57:52] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:53] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(935,1477), corner_timer=-0.02
[21:57:53] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[21:57:53] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(935,1477), corner_timer=0.30
[21:57:53] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:53] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(935,1477), corner_timer=-0.02
[21:57:53] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[21:57:53] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(935,1477), corner_timer=0.30
[21:57:53] [INFO] [Player.Grenade.Simple] Throwing! Target: (1504.741, 1669.4684), Distance: 627,3, Speed: 613,5, Friction: 300,0
[21:57:53] [INFO] [Player.Grenade] Player rotated for throw: 0 -> 0,3258903
[21:57:53] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.947366, 0.320152), Speed: 613.5 (clamped from 613.5, max: 1352.8)
[21:57:53] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[21:57:53] [INFO] [Player.Grenade.Simple] Grenade thrown!
[21:57:53] [INFO] [Player.Grenade] State reset to IDLE
[21:57:53] [INFO] [Player.Grenade] State reset to IDLE
[21:57:53] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[21:57:53] [INFO] [Player.Grenade] Player rotation restored to 0
[21:57:53] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:53] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(935,1477), corner_timer=-0.02
[21:57:53] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[21:57:53] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[21:57:53] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(935,1477), corner_timer=0.30
[21:57:53] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:54] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.5°, current=89.5°, player=(935,1477), corner_timer=-0.02
[21:57:54] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[21:57:54] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(935,1477), corner_timer=0.30
[21:57:54] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:54] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.4°, current=89.5°, player=(935,1477), corner_timer=-0.02
[21:57:54] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[21:57:54] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.3°, player=(935,1477), corner_timer=0.30
[21:57:54] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:54] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.5°, player=(935,1477), corner_timer=-0.02
[21:57:54] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[21:57:54] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(935,1477), corner_timer=0.30
[21:57:54] [INFO] [GrenadeBase] Collision detected with MainHall_WallRight (type: StaticBody2D)
[21:57:54] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:54] [INFO] [SoundPropagation] Sound emitted: type=GRENADE_LANDING, pos=(1479.03, 1662.785), source=NEUTRAL (FlashbangGrenade), range=112, listeners=20
[21:57:54] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[21:57:54] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=10, self=0, below_threshold=0
[21:57:54] [INFO] [GrenadeBase] Grenade landed at (1479.03, 1662.785)
[21:57:55] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(935,1477), corner_timer=-0.02
[21:57:55] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[21:57:55] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(935,1477), corner_timer=0.30
[21:57:55] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:55] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(935,1477), corner_timer=-0.02
[21:57:55] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[21:57:55] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(935,1477), corner_timer=0.30
[21:57:55] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:55] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(935,1477), corner_timer=-0.02
[21:57:55] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[21:57:55] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(935,1477), corner_timer=0.30
[21:57:55] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:57:56] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(935,1477), corner_timer=-0.02
[21:57:56] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[21:57:56] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(935,1477), corner_timer=0.30
[21:57:56] [INFO] [GrenadeBase] EXPLODED at (1475.174, 1664.953)!
[21:57:56] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(1475.174, 1664.953), source=NEUTRAL (FlashbangGrenade), range=2937, listeners=10
[21:57:56] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=8
[21:57:56] [ENEMY] [Enemy10] Status: BLINDED applied
[21:57:56] [ENEMY] [Enemy10] Status: STUNNED applied
[21:57:56] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(935,1477), corner_timer=-0.02
[21:57:56] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[21:57:56] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(935,1477), corner_timer=0.30
[21:57:56] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:57:56] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:56] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[21:57:56] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[21:57:56] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[21:57:56] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:57:56] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:57:56] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:57:56] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[21:57:56] [ENEMY] [Enemy1] Death animation component initialized
[21:57:56] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:56] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[21:57:56] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[21:57:56] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[21:57:56] [ENEMY] [Enemy2] Death animation component initialized
[21:57:56] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:56] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[21:57:56] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[21:57:56] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[21:57:56] [ENEMY] [Enemy3] Death animation component initialized
[21:57:56] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:56] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[21:57:56] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[21:57:56] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[21:57:56] [ENEMY] [Enemy4] Death animation component initialized
[21:57:56] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:56] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[21:57:56] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[21:57:56] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[21:57:56] [ENEMY] [Enemy5] Death animation component initialized
[21:57:56] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:56] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[21:57:56] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[21:57:56] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[21:57:56] [ENEMY] [Enemy6] Death animation component initialized
[21:57:56] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:56] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[21:57:56] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[21:57:56] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[21:57:56] [ENEMY] [Enemy7] Death animation component initialized
[21:57:56] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:56] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[21:57:56] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[21:57:56] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[21:57:56] [ENEMY] [Enemy8] Death animation component initialized
[21:57:56] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:56] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[21:57:56] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[21:57:56] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[21:57:56] [ENEMY] [Enemy9] Death animation component initialized
[21:57:56] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:56] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[21:57:56] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[21:57:56] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[21:57:56] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:57:56] [ENEMY] [Enemy10] Death animation component initialized
[21:57:56] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:57:56] [INFO] [BloodyFeet:Player] Footprint scene loaded
[21:57:56] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[21:57:56] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[21:57:56] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[21:57:56] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:57:56] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:57:56] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:57:56] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:57:56] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:57:56] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[21:57:56] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[21:57:56] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[21:57:56] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:57:56] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[21:57:56] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[21:57:56] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[21:57:56] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[21:57:56] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[21:57:56] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[21:57:56] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[21:57:56] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[21:57:56] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[21:57:56] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[21:57:56] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[21:57:56] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[21:57:56] [INFO] [ScoreManager] Level started with 10 enemies
[21:57:56] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[21:57:56] [INFO] [CinemaEffects] Found player node: Player
[21:57:56] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[21:57:56] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[21:57:56] [ENEMY] [Enemy1] Registered as sound listener
[21:57:56] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[21:57:56] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[21:57:56] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[21:57:56] [ENEMY] [Enemy2] Registered as sound listener
[21:57:56] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[21:57:56] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[21:57:56] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[21:57:56] [ENEMY] [Enemy3] Registered as sound listener
[21:57:56] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[21:57:56] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[21:57:56] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[21:57:56] [ENEMY] [Enemy4] Registered as sound listener
[21:57:56] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[21:57:56] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[21:57:56] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[21:57:56] [ENEMY] [Enemy5] Registered as sound listener
[21:57:56] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[21:57:56] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[21:57:56] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[21:57:56] [ENEMY] [Enemy6] Registered as sound listener
[21:57:56] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[21:57:56] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[21:57:56] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[21:57:56] [ENEMY] [Enemy7] Registered as sound listener
[21:57:56] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[21:57:56] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[21:57:56] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[21:57:56] [ENEMY] [Enemy8] Registered as sound listener
[21:57:56] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[21:57:56] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[21:57:56] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[21:57:56] [ENEMY] [Enemy9] Registered as sound listener
[21:57:56] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[21:57:56] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[21:57:56] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[21:57:56] [ENEMY] [Enemy10] Registered as sound listener
[21:57:56] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[21:57:56] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[21:57:56] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:56] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:56] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:56] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:56] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:56] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:56] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:56] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:57:56] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:57:56] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:57:56] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:57:56] [INFO] [LastChance] Found player: Player
[21:57:56] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:57:56] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:57:56] [INFO] [LastChance] Connected to player Died signal (C#)
[21:57:56] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[21:57:56] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:57:56] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:57:56] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:57:58] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:57:58] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[21:57:58] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(594,1250), corner_timer=0.30
[21:57:58] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(594,1250), corner_timer=0.30
[21:57:58] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(688,1274), corner_timer=-0.02
[21:57:58] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:57:58] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(688,1274), corner_timer=-0.02
[21:57:58] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[21:57:58] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(692,1277), corner_timer=0.30
[21:57:58] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(692,1277), corner_timer=0.30
[21:57:59] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(773,1334), corner_timer=-0.02
[21:57:59] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[21:57:59] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(778,1335), corner_timer=0.30
[21:57:59] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(878,1346), corner_timer=-0.02
[21:57:59] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[21:57:59] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(883,1349), corner_timer=0.30
[21:57:59] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(927,1388), corner_timer=-0.02
[21:57:59] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[21:57:59] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(930,1389), corner_timer=0.30
[21:58:00] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(984,1456), corner_timer=-0.02
[21:58:00] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[21:58:00] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(986,1459), corner_timer=0.30
[21:58:00] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:58:00] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[21:58:00] [INFO] [Player.Grenade] G pressed - starting grab animation
[21:58:00] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:58:00] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (1278.0828, 1618.7656)
[21:58:00] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:00] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[21:58:00] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[21:58:00] [INFO] [GrenadeBase] Timer activated! 4.0 seconds until explosion
[21:58:00] [INFO] [Player.Grenade] Timer started, grenade created at (995.6161, 1480.4738)
[21:58:00] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[21:58:00] [INFO] [Player.Grenade] Step 1 complete! Drag: (143.2024, 13.892578)
[21:58:00] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[21:58:00] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[21:58:00] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(995,1480), corner_timer=-0.02
[21:58:00] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[21:58:00] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(995,1480), corner_timer=0.30
[21:58:00] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:00] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(995,1480), corner_timer=-0.02
[21:58:00] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[21:58:00] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(995,1480), corner_timer=0.30
[21:58:01] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:01] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(995,1480), corner_timer=-0.02
[21:58:01] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[21:58:01] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(995,1480), corner_timer=0.30
[21:58:01] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:01] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(995,1480), corner_timer=-0.02
[21:58:01] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[21:58:01] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(995,1480), corner_timer=0.30
[21:58:01] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:01] [INFO] [Player.Grenade.Simple] Throwing! Target: (1284.8796, 1612.7094), Distance: 299,3, Speed: 423,8, Friction: 300,0
[21:58:01] [INFO] [Player.Grenade] Player rotated for throw: 0 -> 0,4287804
[21:58:01] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.909473, 0.415762), Speed: 423.8 (clamped from 423.8, max: 1352.8)
[21:58:01] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[21:58:01] [INFO] [Player.Grenade.Simple] Grenade thrown!
[21:58:01] [INFO] [Player.Grenade] State reset to IDLE
[21:58:01] [INFO] [Player.Grenade] State reset to IDLE
[21:58:01] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[21:58:01] [INFO] [Player.Grenade] Player rotation restored to 0
[21:58:01] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(995,1480), corner_timer=-0.02
[21:58:01] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[21:58:01] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(995,1480), corner_timer=0.30
[21:58:02] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:02] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[21:58:02] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.5°, current=89.5°, player=(995,1480), corner_timer=-0.02
[21:58:02] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[21:58:02] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(995,1480), corner_timer=0.30
[21:58:02] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:02] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.4°, current=89.5°, player=(995,1480), corner_timer=-0.02
[21:58:02] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[21:58:02] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.3°, player=(995,1480), corner_timer=0.30
[21:58:02] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:02] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.5°, player=(995,1480), corner_timer=-0.02
[21:58:02] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[21:58:02] [INFO] [SoundPropagation] Sound emitted: type=GRENADE_LANDING, pos=(1292.518, 1616.201), source=NEUTRAL (FlashbangGrenade), range=112, listeners=20
[21:58:02] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[21:58:02] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=10, self=0, below_threshold=0
[21:58:02] [INFO] [GrenadeBase] Grenade landed at (1292.518, 1616.201)
[21:58:02] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(995,1480), corner_timer=0.30
[21:58:03] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:03] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(995,1480), corner_timer=-0.02
[21:58:03] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[21:58:03] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(995,1480), corner_timer=0.30
[21:58:03] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:03] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(995,1480), corner_timer=-0.02
[21:58:03] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[21:58:03] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(995,1480), corner_timer=0.30
[21:58:03] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:03] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(995,1480), corner_timer=-0.02
[21:58:03] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[21:58:03] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(995,1480), corner_timer=0.30
[21:58:04] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:04] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(995,1480), corner_timer=-0.02
[21:58:04] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[21:58:04] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(995,1480), corner_timer=0.30
[21:58:04] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:04] [INFO] [GrenadeBase] EXPLODED at (1296.204, 1617.886)!
[21:58:04] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(1296.204, 1617.886), source=NEUTRAL (FlashbangGrenade), range=2937, listeners=10
[21:58:04] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=9
[21:58:04] [ENEMY] [Enemy10] Status: BLINDED applied
[21:58:04] [ENEMY] [Enemy10] Status: STUNNED applied
[21:58:04] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(995,1416), corner_timer=-0.02
[21:58:04] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[21:58:04] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(995,1416), corner_timer=0.30
[21:58:04] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:58:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:04] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[21:58:04] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[21:58:04] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[21:58:04] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:58:04] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:58:04] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:58:04] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[21:58:04] [ENEMY] [Enemy1] Death animation component initialized
[21:58:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:04] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[21:58:04] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[21:58:04] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[21:58:04] [ENEMY] [Enemy2] Death animation component initialized
[21:58:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:04] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[21:58:04] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[21:58:04] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[21:58:04] [ENEMY] [Enemy3] Death animation component initialized
[21:58:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:04] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[21:58:04] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[21:58:04] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[21:58:04] [ENEMY] [Enemy4] Death animation component initialized
[21:58:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:04] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[21:58:04] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[21:58:04] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[21:58:04] [ENEMY] [Enemy5] Death animation component initialized
[21:58:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:04] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[21:58:04] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[21:58:04] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[21:58:04] [ENEMY] [Enemy6] Death animation component initialized
[21:58:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:04] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[21:58:04] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[21:58:04] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[21:58:04] [ENEMY] [Enemy7] Death animation component initialized
[21:58:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:04] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[21:58:04] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[21:58:04] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[21:58:04] [ENEMY] [Enemy8] Death animation component initialized
[21:58:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:04] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[21:58:04] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[21:58:04] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[21:58:04] [ENEMY] [Enemy9] Death animation component initialized
[21:58:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:04] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[21:58:04] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[21:58:04] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[21:58:04] [ENEMY] [Enemy10] Death animation component initialized
[21:58:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:04] [INFO] [BloodyFeet:Player] Footprint scene loaded
[21:58:04] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[21:58:04] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[21:58:04] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[21:58:04] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:58:04] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:58:04] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:58:04] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:58:04] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:58:04] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[21:58:04] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[21:58:04] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[21:58:04] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:58:04] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[21:58:04] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[21:58:04] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[21:58:04] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[21:58:04] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[21:58:04] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[21:58:04] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[21:58:04] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[21:58:04] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[21:58:04] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[21:58:04] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[21:58:04] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[21:58:04] [INFO] [ScoreManager] Level started with 10 enemies
[21:58:04] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[21:58:04] [INFO] [CinemaEffects] Found player node: Player
[21:58:04] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[21:58:04] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[21:58:04] [ENEMY] [Enemy1] Registered as sound listener
[21:58:04] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[21:58:04] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[21:58:04] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[21:58:04] [ENEMY] [Enemy2] Registered as sound listener
[21:58:04] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[21:58:04] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[21:58:04] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[21:58:04] [ENEMY] [Enemy3] Registered as sound listener
[21:58:04] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[21:58:04] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[21:58:04] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[21:58:04] [ENEMY] [Enemy4] Registered as sound listener
[21:58:04] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[21:58:04] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[21:58:04] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[21:58:04] [ENEMY] [Enemy5] Registered as sound listener
[21:58:04] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[21:58:04] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[21:58:04] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[21:58:04] [ENEMY] [Enemy6] Registered as sound listener
[21:58:04] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[21:58:04] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[21:58:04] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[21:58:04] [ENEMY] [Enemy7] Registered as sound listener
[21:58:04] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[21:58:04] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[21:58:04] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[21:58:04] [ENEMY] [Enemy8] Registered as sound listener
[21:58:04] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[21:58:04] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[21:58:04] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[21:58:04] [ENEMY] [Enemy9] Registered as sound listener
[21:58:04] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[21:58:04] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[21:58:04] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[21:58:04] [ENEMY] [Enemy10] Registered as sound listener
[21:58:04] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[21:58:04] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[21:58:04] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[21:58:04] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[21:58:04] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=236.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[21:58:04] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[21:58:04] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[21:58:04] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[21:58:04] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[21:58:04] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[21:58:04] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:58:04] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:58:04] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:58:04] [INFO] [LastChance] Found player: Player
[21:58:04] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:58:04] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:58:04] [INFO] [LastChance] Connected to player Died signal (C#)
[21:58:04] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[21:58:04] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:58:04] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:58:04] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:58:06] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:58:06] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[21:58:06] [INFO] [Player.Grenade] G pressed - starting grab animation
[21:58:06] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:58:06] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (632.5126, 867.9651)
[21:58:06] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[21:58:06] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[21:58:06] [INFO] [GrenadeBase] Timer activated! 4.0 seconds until explosion
[21:58:06] [INFO] [Player.Grenade] Timer started, grenade created at (483.93384, 913.8385)
[21:58:06] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[21:58:06] [INFO] [Player.Grenade] Step 1 complete! Drag: (86.86981, 6.6776123)
[21:58:06] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[21:58:06] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[21:58:06] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:58:06] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[21:58:06] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(483,913), corner_timer=0.30
[21:58:06] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(483,913), corner_timer=0.30
[21:58:06] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(451,902), corner_timer=-0.02
[21:58:06] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:58:06] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(451,902), corner_timer=-0.02
[21:58:06] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[21:58:06] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(448,899), corner_timer=0.30
[21:58:06] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(448,899), corner_timer=0.30
[21:58:06] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(378,837), corner_timer=-0.02
[21:58:06] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[21:58:06] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(376,835), corner_timer=0.30
[21:58:07] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(364,826), corner_timer=-0.02
[21:58:07] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[21:58:07] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(364,826), corner_timer=0.30
[21:58:07] [INFO] [Player.Grenade.Simple] Throwing! Target: (676.07477, 655.2631), Distance: 342,9, Speed: 453,6, Friction: 300,0
[21:58:07] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,50127465
[21:58:07] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.876971, -0.480544), Speed: 453.6 (clamped from 453.6, max: 1352.8)
[21:58:07] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[21:58:07] [INFO] [Player.Grenade.Simple] Grenade thrown!
[21:58:07] [INFO] [Player.Grenade] State reset to IDLE
[21:58:07] [INFO] [Player.Grenade] State reset to IDLE
[21:58:07] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[21:58:07] [INFO] [Player.Grenade] Player rotation restored to 0
[21:58:07] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(364,826), corner_timer=-0.02
[21:58:07] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[21:58:07] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(364,826), corner_timer=0.30
[21:58:07] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[21:58:07] [ENEMY] [Enemy1] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:58:07] [ENEMY] [Enemy1] EVADING_GRENADE started: escaping to (260.6257, 284.786)
[21:58:07] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:58:07] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1058.545, 790.5784)
[21:58:07] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-127.1°, current=12.6°, player=(364,826), corner_timer=0.00
[21:58:07] [ENEMY] [Enemy1] EVADING_GRENADE: Escaped to safe distance
[21:58:07] [ENEMY] [Enemy1] State: EVADING_GRENADE -> IDLE
[21:58:07] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-42.8°, current=-130.9°, player=(364,826), corner_timer=0.00
[21:58:07] [ENEMY] [Enemy1] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=146.3°, current=6.8°, player=(364,826), corner_timer=0.00
[21:58:07] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(364,826), corner_timer=-0.02
[21:58:07] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[21:58:07] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(364,826), corner_timer=0.30
[21:58:07] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:07] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[21:58:07] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=146.3°, current=-130.8°, player=(364,826), corner_timer=0.00
[21:58:07] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:58:07] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1116.861, 663.6088)
[21:58:08] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-42.8°, current=-141.1°, player=(364,826), corner_timer=0.00
[21:58:08] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:08] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[21:58:08] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=191.3°, current=-132.1°, player=(364,826), corner_timer=0.00
[21:58:08] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:58:08] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1141.806, 618.1353)
[21:58:08] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-42.8°, current=-141.7°, player=(364,826), corner_timer=0.00
[21:58:08] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:08] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[21:58:08] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=315.0°, current=-133.9°, player=(364,826), corner_timer=0.00
[21:58:08] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:08] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(364,826), corner_timer=-0.02
[21:58:08] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[21:58:08] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(364,826), corner_timer=0.30
[21:58:08] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:08] [INFO] [SoundPropagation] Sound emitted: type=GRENADE_LANDING, pos=(683.4903, 651.1995), source=NEUTRAL (FlashbangGrenade), range=112, listeners=20
[21:58:08] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[21:58:08] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=10, self=0, below_threshold=0
[21:58:08] [INFO] [GrenadeBase] Grenade landed at (683.4903, 651.1995)
[21:58:08] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(364,826), corner_timer=-0.02
[21:58:08] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[21:58:08] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(364,826), corner_timer=0.30
[21:58:08] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:08] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:58:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:09] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[21:58:09] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[21:58:09] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[21:58:09] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:58:09] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:58:09] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:58:09] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[21:58:09] [ENEMY] [Enemy1] Death animation component initialized
[21:58:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:09] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[21:58:09] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[21:58:09] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[21:58:09] [ENEMY] [Enemy2] Death animation component initialized
[21:58:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:09] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[21:58:09] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[21:58:09] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[21:58:09] [ENEMY] [Enemy3] Death animation component initialized
[21:58:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:09] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[21:58:09] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[21:58:09] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[21:58:09] [ENEMY] [Enemy4] Death animation component initialized
[21:58:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:09] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[21:58:09] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[21:58:09] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[21:58:09] [ENEMY] [Enemy5] Death animation component initialized
[21:58:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:09] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[21:58:09] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[21:58:09] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[21:58:09] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:58:09] [ENEMY] [Enemy6] Death animation component initialized
[21:58:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:09] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[21:58:09] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[21:58:09] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[21:58:09] [ENEMY] [Enemy7] Death animation component initialized
[21:58:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:09] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[21:58:09] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[21:58:09] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[21:58:09] [ENEMY] [Enemy8] Death animation component initialized
[21:58:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:09] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[21:58:09] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[21:58:09] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[21:58:09] [ENEMY] [Enemy9] Death animation component initialized
[21:58:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:09] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[21:58:09] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[21:58:09] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[21:58:09] [ENEMY] [Enemy10] Death animation component initialized
[21:58:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:09] [INFO] [BloodyFeet:Player] Footprint scene loaded
[21:58:09] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[21:58:09] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[21:58:09] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[21:58:09] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:58:09] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:58:09] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:58:09] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:58:09] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:58:09] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[21:58:09] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[21:58:09] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[21:58:09] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:58:09] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[21:58:09] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[21:58:09] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[21:58:09] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[21:58:09] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[21:58:09] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[21:58:09] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[21:58:09] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[21:58:09] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[21:58:09] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[21:58:09] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[21:58:09] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[21:58:09] [INFO] [ScoreManager] Level started with 10 enemies
[21:58:09] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[21:58:09] [INFO] [CinemaEffects] Found player node: Player
[21:58:09] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[21:58:09] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[21:58:09] [ENEMY] [Enemy1] Registered as sound listener
[21:58:09] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[21:58:09] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[21:58:09] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[21:58:09] [ENEMY] [Enemy2] Registered as sound listener
[21:58:09] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[21:58:09] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[21:58:09] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[21:58:09] [ENEMY] [Enemy3] Registered as sound listener
[21:58:09] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[21:58:09] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[21:58:09] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[21:58:09] [ENEMY] [Enemy4] Registered as sound listener
[21:58:09] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[21:58:09] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[21:58:09] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[21:58:09] [ENEMY] [Enemy5] Registered as sound listener
[21:58:09] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[21:58:09] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[21:58:09] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[21:58:09] [ENEMY] [Enemy6] Registered as sound listener
[21:58:09] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[21:58:09] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[21:58:09] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[21:58:09] [ENEMY] [Enemy7] Registered as sound listener
[21:58:09] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[21:58:09] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[21:58:09] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[21:58:09] [ENEMY] [Enemy8] Registered as sound listener
[21:58:09] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[21:58:09] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[21:58:09] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[21:58:09] [ENEMY] [Enemy9] Registered as sound listener
[21:58:09] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[21:58:09] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[21:58:09] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[21:58:09] [ENEMY] [Enemy10] Registered as sound listener
[21:58:09] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[21:58:09] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[21:58:09] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:09] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:09] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:09] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:09] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:09] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:09] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:09] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:09] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:58:09] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:58:09] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:58:09] [INFO] [LastChance] Found player: Player
[21:58:09] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:58:09] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:58:09] [INFO] [LastChance] Connected to player Died signal (C#)
[21:58:09] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[21:58:09] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:58:09] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:58:09] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:58:09] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:58:09] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[21:58:09] [INFO] [Player.Grenade] G pressed - starting grab animation
[21:58:09] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:58:09] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (639.3936, 1079.0167)
[21:58:09] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[21:58:09] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[21:58:09] [INFO] [GrenadeBase] Timer activated! 4.0 seconds until explosion
[21:58:09] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[21:58:09] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[21:58:09] [INFO] [Player.Grenade] Step 1 complete! Drag: (49.635315, 11.35437)
[21:58:09] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[21:58:09] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[21:58:10] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:58:10] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[21:58:10] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1072), corner_timer=0.30
[21:58:10] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1072), corner_timer=0.30
[21:58:10] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(449,968), corner_timer=-0.02
[21:58:10] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:58:10] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(449,968), corner_timer=-0.02
[21:58:10] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[21:58:10] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(448,963), corner_timer=0.30
[21:58:10] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(448,963), corner_timer=0.30
[21:58:11] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(387,884), corner_timer=-0.02
[21:58:11] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[21:58:11] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(383,880), corner_timer=0.30
[21:58:11] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(332,830), corner_timer=-0.02
[21:58:11] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[21:58:11] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(332,829), corner_timer=0.30
[21:58:11] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(331,828), corner_timer=-0.02
[21:58:11] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[21:58:11] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(331,828), corner_timer=0.30
[21:58:12] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(331,828), corner_timer=-0.02
[21:58:12] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[21:58:12] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(331,828), corner_timer=0.30
[21:58:12] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:12] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(331,828), corner_timer=-0.02
[21:58:12] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[21:58:12] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(331,828), corner_timer=0.30
[21:58:12] [INFO] [Player.Grenade.Simple] Throwing! Target: (825.7199, 673.9699), Distance: 531,4, Speed: 564,7, Friction: 300,0
[21:58:12] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,30225626
[21:58:12] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.954667, -0.297675), Speed: 564.7 (clamped from 564.7, max: 1352.8)
[21:58:12] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[21:58:12] [INFO] [Player.Grenade.Simple] Grenade thrown!
[21:58:12] [INFO] [Player.Grenade] State reset to IDLE
[21:58:12] [INFO] [Player.Grenade] State reset to IDLE
[21:58:12] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[21:58:12] [INFO] [Player.Grenade] Player rotation restored to 0
[21:58:12] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:13] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(331,828), corner_timer=-0.02
[21:58:13] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[21:58:13] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[21:58:13] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(331,828), corner_timer=0.30
[21:58:13] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:13] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(331,828), corner_timer=-0.02
[21:58:13] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[21:58:13] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(331,828), corner_timer=0.30
[21:58:13] [INFO] [GrenadeBase] EXPLODED at (677.2235, 720.2727)!
[21:58:13] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(677.2235, 720.2727), source=NEUTRAL (FlashbangGrenade), range=2937, listeners=20
[21:58:13] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[21:58:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[21:58:13] [ENEMY] [Enemy2] Status: BLINDED applied
[21:58:13] [ENEMY] [Enemy2] Status: STUNNED applied
[21:58:13] [ENEMY] [Enemy3] Status: BLINDED applied
[21:58:13] [ENEMY] [Enemy3] Status: STUNNED applied
[21:58:13] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:13] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(331,828), corner_timer=-0.02
[21:58:13] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[21:58:13] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(331,828), corner_timer=0.30
[21:58:13] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:14] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(331,828), corner_timer=-0.02
[21:58:14] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[21:58:14] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:58:14] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:14] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[21:58:14] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[21:58:14] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[21:58:14] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:58:14] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:58:14] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:58:14] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[21:58:14] [ENEMY] [Enemy1] Death animation component initialized
[21:58:14] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:14] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[21:58:14] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[21:58:14] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[21:58:14] [ENEMY] [Enemy2] Death animation component initialized
[21:58:14] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:14] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[21:58:14] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[21:58:14] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[21:58:14] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:58:14] [ENEMY] [Enemy3] Death animation component initialized
[21:58:14] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:14] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[21:58:14] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[21:58:14] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[21:58:14] [ENEMY] [Enemy4] Death animation component initialized
[21:58:14] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:14] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[21:58:14] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[21:58:14] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[21:58:14] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:58:14] [ENEMY] [Enemy5] Death animation component initialized
[21:58:14] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:14] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[21:58:14] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[21:58:14] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[21:58:14] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:58:14] [ENEMY] [Enemy6] Death animation component initialized
[21:58:14] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:14] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[21:58:14] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[21:58:14] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[21:58:14] [ENEMY] [Enemy7] Death animation component initialized
[21:58:14] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:14] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[21:58:14] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[21:58:14] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[21:58:14] [ENEMY] [Enemy8] Death animation component initialized
[21:58:14] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:14] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[21:58:14] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[21:58:14] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[21:58:14] [ENEMY] [Enemy9] Death animation component initialized
[21:58:14] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:14] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[21:58:14] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[21:58:14] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[21:58:14] [ENEMY] [Enemy10] Death animation component initialized
[21:58:14] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:14] [INFO] [BloodyFeet:Player] Footprint scene loaded
[21:58:14] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[21:58:14] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[21:58:14] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[21:58:14] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:58:14] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:58:14] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:58:14] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:58:14] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:58:14] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[21:58:14] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[21:58:14] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[21:58:14] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:58:14] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[21:58:14] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[21:58:14] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[21:58:14] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[21:58:14] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[21:58:14] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[21:58:14] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[21:58:14] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[21:58:14] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[21:58:14] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[21:58:14] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[21:58:14] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[21:58:14] [INFO] [ScoreManager] Level started with 10 enemies
[21:58:14] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[21:58:14] [INFO] [CinemaEffects] Found player node: Player
[21:58:14] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[21:58:14] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[21:58:14] [ENEMY] [Enemy1] Registered as sound listener
[21:58:14] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[21:58:14] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[21:58:14] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[21:58:14] [ENEMY] [Enemy2] Registered as sound listener
[21:58:14] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[21:58:14] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[21:58:14] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[21:58:14] [ENEMY] [Enemy3] Registered as sound listener
[21:58:14] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[21:58:14] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[21:58:14] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[21:58:14] [ENEMY] [Enemy4] Registered as sound listener
[21:58:14] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[21:58:14] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[21:58:14] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[21:58:14] [ENEMY] [Enemy5] Registered as sound listener
[21:58:14] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[21:58:14] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[21:58:14] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[21:58:14] [ENEMY] [Enemy6] Registered as sound listener
[21:58:14] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[21:58:14] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[21:58:14] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[21:58:14] [ENEMY] [Enemy7] Registered as sound listener
[21:58:14] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[21:58:14] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[21:58:14] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[21:58:14] [ENEMY] [Enemy8] Registered as sound listener
[21:58:14] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[21:58:14] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[21:58:14] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[21:58:14] [ENEMY] [Enemy9] Registered as sound listener
[21:58:14] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[21:58:14] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[21:58:14] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[21:58:14] [ENEMY] [Enemy10] Registered as sound listener
[21:58:14] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[21:58:14] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[21:58:14] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:14] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:14] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=281.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:14] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:14] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:14] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:14] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:14] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:14] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:58:14] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:58:14] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:58:14] [INFO] [LastChance] Found player: Player
[21:58:14] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:58:14] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:58:14] [INFO] [LastChance] Connected to player Died signal (C#)
[21:58:14] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[21:58:14] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:58:14] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:58:14] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:58:14] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:58:14] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[21:58:14] [INFO] [Player.Grenade] G pressed - starting grab animation
[21:58:14] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:58:14] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (740.5818, 1106.4008)
[21:58:14] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[21:58:14] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[21:58:14] [INFO] [GrenadeBase] Timer activated! 4.0 seconds until explosion
[21:58:14] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[21:58:14] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[21:58:14] [INFO] [Player.Grenade] Step 1 complete! Drag: (176.07428, 61.447144)
[21:58:14] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[21:58:14] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[21:58:15] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:58:15] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[21:58:15] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1017), corner_timer=0.30
[21:58:15] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1017), corner_timer=0.30
[21:58:15] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(414,927), corner_timer=-0.02
[21:58:15] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:58:15] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(414,927), corner_timer=-0.02
[21:58:15] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[21:58:16] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(411,923), corner_timer=0.30
[21:58:16] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(411,923), corner_timer=0.30
[21:58:16] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(395,825), corner_timer=-0.02
[21:58:16] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[21:58:16] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(395,821), corner_timer=0.30
[21:58:16] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(395,767), corner_timer=-0.02
[21:58:16] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[21:58:16] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(395,763), corner_timer=0.30
[21:58:16] [INFO] [Player.Grenade.Simple] Throwing! Target: (897.20215, 577.4399), Distance: 542,5, Speed: 570,5, Friction: 300,0
[21:58:16] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,31517157
[21:58:16] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.950743, -0.30998), Speed: 570.5 (clamped from 570.5, max: 1352.8)
[21:58:16] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[21:58:16] [INFO] [Player.Grenade.Simple] Grenade thrown!
[21:58:16] [INFO] [Player.Grenade] State reset to IDLE
[21:58:16] [INFO] [Player.Grenade] State reset to IDLE
[21:58:16] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[21:58:16] [INFO] [GrenadeBase] Collision detected with Room1_WallBottom (type: StaticBody2D)
[21:58:16] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(395,740), corner_timer=-0.02
[21:58:16] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[21:58:17] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(395,740), corner_timer=0.30
[21:58:17] [INFO] [Player.Grenade] Player rotation restored to 0
[21:58:17] [ENEMY] [Enemy1] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:58:17] [ENEMY] [Enemy1] EVADING_GRENADE started: escaping to (257.5122, 278.9251)
[21:58:17] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-129.3°, current=12.2°, player=(395,740), corner_timer=0.00
[21:58:17] [ENEMY] [Enemy1] EVADING_GRENADE: Escaped to safe distance
[21:58:17] [ENEMY] [Enemy1] State: EVADING_GRENADE -> IDLE
[21:58:17] [ENEMY] [Enemy1] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=45.0°, current=6.5°, player=(395,740), corner_timer=0.00
[21:58:17] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[21:58:17] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(395,740), corner_timer=-0.02
[21:58:17] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[21:58:17] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(395,740), corner_timer=0.30
[21:58:17] [INFO] [GrenadeBase] Collision detected with Enemy3 (type: CharacterBody2D)
[21:58:17] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:17] [INFO] [SoundPropagation] Sound emitted: type=GRENADE_LANDING, pos=(649.8022, 762.4261), source=NEUTRAL (FlashbangGrenade), range=112, listeners=20
[21:58:17] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[21:58:17] [ENEMY] [Enemy3] Heard GRENADE_LANDING at (649.8022, 762.4261), intensity=0.93
[21:58:17] [ENEMY] [Enemy3] EVADING_GRENADE (from sound): escaping from (649.8022, 762.4261)
[21:58:17] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=9, self=0, below_threshold=0
[21:58:17] [INFO] [GrenadeBase] Grenade landed at (649.8022, 762.4261)
[21:58:17] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-42.8°, current=-85.9°, player=(395,740), corner_timer=0.00
[21:58:17] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(395,740), corner_timer=-0.02
[21:58:17] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[21:58:17] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(395,740), corner_timer=0.30
[21:58:17] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:18] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:58:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:18] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[21:58:18] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[21:58:18] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[21:58:18] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:58:18] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:58:18] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:58:18] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[21:58:18] [ENEMY] [Enemy1] Death animation component initialized
[21:58:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:18] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[21:58:18] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[21:58:18] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[21:58:18] [ENEMY] [Enemy2] Death animation component initialized
[21:58:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:18] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[21:58:18] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[21:58:18] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[21:58:18] [ENEMY] [Enemy3] Death animation component initialized
[21:58:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:18] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[21:58:18] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[21:58:18] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[21:58:18] [ENEMY] [Enemy4] Death animation component initialized
[21:58:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:18] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[21:58:18] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[21:58:18] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[21:58:18] [ENEMY] [Enemy5] Death animation component initialized
[21:58:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:18] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[21:58:18] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[21:58:18] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[21:58:18] [ENEMY] [Enemy6] Death animation component initialized
[21:58:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:18] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[21:58:18] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[21:58:18] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[21:58:18] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:58:18] [ENEMY] [Enemy7] Death animation component initialized
[21:58:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:18] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[21:58:18] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[21:58:18] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[21:58:18] [ENEMY] [Enemy8] Death animation component initialized
[21:58:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:18] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[21:58:18] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[21:58:18] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[21:58:18] [ENEMY] [Enemy9] Death animation component initialized
[21:58:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:18] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[21:58:18] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[21:58:18] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[21:58:18] [ENEMY] [Enemy10] Death animation component initialized
[21:58:18] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:18] [INFO] [BloodyFeet:Player] Footprint scene loaded
[21:58:18] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[21:58:18] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[21:58:18] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[21:58:18] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:58:18] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:58:18] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:58:18] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:58:18] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:58:18] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[21:58:18] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[21:58:18] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[21:58:18] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:58:18] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[21:58:18] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[21:58:18] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[21:58:18] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[21:58:18] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[21:58:18] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[21:58:18] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[21:58:18] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[21:58:18] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[21:58:18] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[21:58:18] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[21:58:18] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[21:58:18] [INFO] [ScoreManager] Level started with 10 enemies
[21:58:18] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[21:58:18] [INFO] [CinemaEffects] Found player node: Player
[21:58:18] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[21:58:18] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[21:58:18] [ENEMY] [Enemy1] Registered as sound listener
[21:58:18] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[21:58:18] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[21:58:18] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[21:58:18] [ENEMY] [Enemy2] Registered as sound listener
[21:58:18] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[21:58:18] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[21:58:18] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[21:58:18] [ENEMY] [Enemy3] Registered as sound listener
[21:58:18] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[21:58:18] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[21:58:18] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[21:58:18] [ENEMY] [Enemy4] Registered as sound listener
[21:58:18] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[21:58:18] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[21:58:18] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[21:58:18] [ENEMY] [Enemy5] Registered as sound listener
[21:58:18] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[21:58:18] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[21:58:18] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[21:58:18] [ENEMY] [Enemy6] Registered as sound listener
[21:58:18] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[21:58:18] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[21:58:18] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[21:58:18] [ENEMY] [Enemy7] Registered as sound listener
[21:58:18] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[21:58:18] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[21:58:18] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[21:58:18] [ENEMY] [Enemy8] Registered as sound listener
[21:58:18] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[21:58:18] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[21:58:18] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[21:58:18] [ENEMY] [Enemy9] Registered as sound listener
[21:58:18] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[21:58:18] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[21:58:18] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[21:58:18] [ENEMY] [Enemy10] Registered as sound listener
[21:58:18] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[21:58:18] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[21:58:18] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:18] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:18] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=281.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:18] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:18] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:18] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:18] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:18] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:18] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:58:18] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:58:18] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:58:18] [INFO] [LastChance] Found player: Player
[21:58:18] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:58:18] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:58:18] [INFO] [LastChance] Connected to player Died signal (C#)
[21:58:18] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[21:58:18] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:58:18] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:58:18] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:58:18] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:58:18] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[21:58:18] [INFO] [Player.Grenade] G pressed - starting grab animation
[21:58:18] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:58:18] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (510.09955, 1146.475)
[21:58:18] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[21:58:18] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[21:58:18] [INFO] [GrenadeBase] Timer activated! 4.0 seconds until explosion
[21:58:18] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[21:58:18] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[21:58:18] [INFO] [Player.Grenade] Step 1 complete! Drag: (278.58246, 67.45825)
[21:58:18] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[21:58:18] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[21:58:19] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:58:19] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[21:58:19] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,984), corner_timer=0.30
[21:58:19] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,984), corner_timer=0.30
[21:58:20] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(422,891), corner_timer=-0.02
[21:58:20] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:58:20] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(422,891), corner_timer=-0.02
[21:58:20] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[21:58:20] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(418,887), corner_timer=0.30
[21:58:20] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(418,887), corner_timer=0.30
[21:58:20] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(379,801), corner_timer=-0.02
[21:58:20] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[21:58:20] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(379,796), corner_timer=0.30
[21:58:20] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(378,765), corner_timer=-0.02
[21:58:20] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[21:58:20] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(378,765), corner_timer=0.30
[21:58:21] [INFO] [Player.Grenade.Simple] Throwing! Target: (860.4589, 618.8711), Distance: 515,1, Speed: 555,9, Friction: 300,0
[21:58:21] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,2950342
[21:58:21] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.956792, -0.290773), Speed: 555.9 (clamped from 555.9, max: 1352.8)
[21:58:21] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[21:58:21] [INFO] [Player.Grenade.Simple] Grenade thrown!
[21:58:21] [INFO] [Player.Grenade] State reset to IDLE
[21:58:21] [INFO] [Player.Grenade] State reset to IDLE
[21:58:21] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[21:58:21] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(378,765), corner_timer=-0.02
[21:58:21] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[21:58:21] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(378,765), corner_timer=0.30
[21:58:21] [INFO] [Player.Grenade] Player rotation restored to 0
[21:58:21] [ENEMY] [Enemy1] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:58:21] [ENEMY] [Enemy1] EVADING_GRENADE started: escaping to (252.5728, 272.6238)
[21:58:21] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-132.4°, current=11.7°, player=(378,765), corner_timer=0.00
[21:58:21] [ENEMY] [Enemy1] EVADING_GRENADE: Escaped to safe distance
[21:58:21] [ENEMY] [Enemy1] State: EVADING_GRENADE -> IDLE
[21:58:21] [ENEMY] [Enemy1] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=11.3°, current=6.0°, player=(378,765), corner_timer=0.00
[21:58:21] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[21:58:21] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(378,765), corner_timer=-0.02
[21:58:21] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[21:58:21] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(378,765), corner_timer=0.30
[21:58:21] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:58:21] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (954.2913, 1111.57)
[21:58:21] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=173.4°, current=-49.9°, player=(378,765), corner_timer=0.00
[21:58:21] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:21] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[21:58:21] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:58:21] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (765.0765, 1193.034)
[21:58:21] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:21] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[21:58:21] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:58:21] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (467.7317, 1143.897)
[21:58:21] [ENEMY] [Enemy4] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:58:21] [ENEMY] [Enemy4] EVADING_GRENADE started: escaping to (908.9236, 1149.087)
[21:58:21] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:21] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[21:58:21] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-98.0°, current=-83.8°, player=(378,765), corner_timer=0.00
[21:58:21] [ENEMY] [Enemy4] EVADING_GRENADE: Escaped to safe distance
[21:58:21] [ENEMY] [Enemy4] State: EVADING_GRENADE -> IDLE
[21:58:21] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=101.3°, current=-14.8°, player=(378,765), corner_timer=0.00
[21:58:21] [ENEMY] [Enemy4] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=258.8°, current=-89.6°, player=(378,765), corner_timer=0.00
[21:58:21] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:21] [ENEMY] [Enemy4] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:58:21] [ENEMY] [Enemy4] EVADING_GRENADE started: escaping to (846.6692, 1167.544)
[21:58:21] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-98.0°, current=-114.9°, player=(378,765), corner_timer=0.00
[21:58:21] [ENEMY] [Enemy4] EVADING_GRENADE: Escaped to safe distance
[21:58:21] [ENEMY] [Enemy4] State: EVADING_GRENADE -> IDLE
[21:58:21] [ENEMY] [Enemy4] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=292.5°, current=-109.1°, player=(378,765), corner_timer=0.00
[21:58:21] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(378,765), corner_timer=-0.02
[21:58:21] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[21:58:21] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(378,765), corner_timer=0.30
[21:58:21] [ENEMY] [Enemy4] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:58:21] [ENEMY] [Enemy4] EVADING_GRENADE started: escaping to (798.4608, 1164.255)
[21:58:22] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-98.0°, current=-103.3°, player=(378,765), corner_timer=0.00
[21:58:22] [ENEMY] [Enemy4] EVADING_GRENADE: Escaped to safe distance
[21:58:22] [ENEMY] [Enemy4] State: EVADING_GRENADE -> IDLE
[21:58:22] [ENEMY] [Enemy4] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=258.8°, current=-98.0°, player=(378,765), corner_timer=0.00
[21:58:22] [ENEMY] [Enemy4] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:58:22] [ENEMY] [Enemy4] EVADING_GRENADE started: escaping to (774.0154, 1159.073)
[21:58:22] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:22] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-98.0°, current=-110.3°, player=(378,765), corner_timer=0.00
[21:58:22] [ENEMY] [Enemy4] ROT_CHANGE: P4:velocity -> P1:visible, state=EVADING_GRENADE, target=-176.7°, current=-137.6°, player=(378,765), corner_timer=0.00
[21:58:22] [ENEMY] [Enemy4] EVADING_GRENADE: Escaped to safe distance
[21:58:22] [ENEMY] [Enemy4] State: EVADING_GRENADE -> IDLE
[21:58:22] [ENEMY] [Enemy4] State: IDLE -> COMBAT
[21:58:22] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=-177.0°, current=132.0°, player=(378,765), corner_timer=0.00
[21:58:22] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=-177.0°, current=134.9°, player=(378,765), corner_timer=0.00
[21:58:22] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(378,765), corner_timer=-0.02
[21:58:22] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[21:58:22] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(378,765), corner_timer=0.30
[21:58:22] [ENEMY] [Enemy3] Memory: high confidence (0.90) - transitioning to PURSUING
[21:58:22] [ENEMY] [Enemy3] State: IDLE -> PURSUING
[21:58:22] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=178.3°, current=99.8°, player=(378,765), corner_timer=0.00
[21:58:22] [ENEMY] [Enemy3] PURSUING corner check: angle -146.3°
[21:58:22] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=179.3°, current=139.5°, player=(378,765), corner_timer=0.30
[21:58:22] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:22] [INFO] [SoundPropagation] Sound emitted: type=GRENADE_LANDING, pos=(867.1232, 616.8457), source=NEUTRAL (FlashbangGrenade), range=112, listeners=20
[21:58:22] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[21:58:22] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=10, self=0, below_threshold=0
[21:58:22] [INFO] [GrenadeBase] Grenade landed at (867.1232, 616.8457)
[21:58:22] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(378,765), corner_timer=-0.02
[21:58:22] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[21:58:22] [INFO] [GrenadeBase] EXPLODED at (869.0657, 616.2554)!
[21:58:22] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(869.0657, 616.2554), source=NEUTRAL (FlashbangGrenade), range=2937, listeners=10
[21:58:22] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[21:58:22] [ENEMY] [Enemy3] Status: BLINDED applied
[21:58:22] [ENEMY] [Enemy3] Status: STUNNED applied
[21:58:22] [ENEMY] [Enemy4] Status: BLINDED applied
[21:58:22] [ENEMY] [Enemy4] Status: STUNNED applied
[21:58:22] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=PURSUING, target=-164.2°, current=179.6°, player=(378,765), corner_timer=0.07
[21:58:22] [ENEMY] [Enemy4] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=-173.2°, current=-173.2°, player=(378,765), corner_timer=0.00
[21:58:22] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(378,765), corner_timer=0.30
[21:58:22] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:22] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(378,765), corner_timer=-0.02
[21:58:22] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[21:58:22] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(378,765), corner_timer=0.30
[21:58:23] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:23] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(378,765), corner_timer=-0.02
[21:58:23] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[21:58:23] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(378,765), corner_timer=0.30
[21:58:23] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:23] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:58:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:23] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[21:58:23] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[21:58:23] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[21:58:23] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:58:23] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:58:23] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:58:23] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[21:58:23] [ENEMY] [Enemy1] Death animation component initialized
[21:58:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:23] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[21:58:23] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[21:58:23] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[21:58:23] [ENEMY] [Enemy2] Death animation component initialized
[21:58:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:23] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[21:58:23] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[21:58:23] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[21:58:23] [ENEMY] [Enemy3] Death animation component initialized
[21:58:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:23] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[21:58:23] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[21:58:23] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[21:58:23] [ENEMY] [Enemy4] Death animation component initialized
[21:58:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:23] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[21:58:23] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[21:58:23] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[21:58:23] [ENEMY] [Enemy5] Death animation component initialized
[21:58:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:23] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[21:58:23] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[21:58:23] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[21:58:23] [ENEMY] [Enemy6] Death animation component initialized
[21:58:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:23] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[21:58:23] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[21:58:23] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[21:58:23] [ENEMY] [Enemy7] Death animation component initialized
[21:58:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:23] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[21:58:23] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[21:58:23] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[21:58:23] [ENEMY] [Enemy8] Death animation component initialized
[21:58:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:23] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[21:58:23] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[21:58:23] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[21:58:23] [ENEMY] [Enemy9] Death animation component initialized
[21:58:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:23] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[21:58:23] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[21:58:23] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[21:58:23] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:58:23] [ENEMY] [Enemy10] Death animation component initialized
[21:58:23] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:23] [INFO] [BloodyFeet:Player] Footprint scene loaded
[21:58:23] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[21:58:23] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[21:58:23] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[21:58:23] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:58:23] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:58:23] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:58:23] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:58:23] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:58:23] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[21:58:23] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[21:58:23] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[21:58:23] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:58:23] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[21:58:23] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[21:58:23] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[21:58:23] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[21:58:23] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[21:58:23] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[21:58:23] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[21:58:23] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[21:58:23] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[21:58:23] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[21:58:23] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[21:58:23] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[21:58:23] [INFO] [ScoreManager] Level started with 10 enemies
[21:58:23] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[21:58:23] [INFO] [CinemaEffects] Found player node: Player
[21:58:23] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[21:58:23] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[21:58:23] [ENEMY] [Enemy1] Registered as sound listener
[21:58:23] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[21:58:23] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[21:58:23] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[21:58:23] [ENEMY] [Enemy2] Registered as sound listener
[21:58:23] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[21:58:23] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[21:58:23] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[21:58:23] [ENEMY] [Enemy3] Registered as sound listener
[21:58:23] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[21:58:23] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[21:58:23] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[21:58:23] [ENEMY] [Enemy4] Registered as sound listener
[21:58:23] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[21:58:23] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[21:58:23] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[21:58:23] [ENEMY] [Enemy5] Registered as sound listener
[21:58:23] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 2, behavior: GUARD
[21:58:23] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[21:58:23] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[21:58:23] [ENEMY] [Enemy6] Registered as sound listener
[21:58:23] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[21:58:23] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[21:58:23] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[21:58:23] [ENEMY] [Enemy7] Registered as sound listener
[21:58:23] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[21:58:23] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[21:58:23] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[21:58:23] [ENEMY] [Enemy8] Registered as sound listener
[21:58:23] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[21:58:23] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[21:58:23] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[21:58:23] [ENEMY] [Enemy9] Registered as sound listener
[21:58:23] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[21:58:23] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[21:58:23] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[21:58:23] [ENEMY] [Enemy10] Registered as sound listener
[21:58:23] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[21:58:23] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[21:58:23] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:23] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:23] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:23] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:23] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:23] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:23] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=213.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:23] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:23] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:58:23] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:58:23] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:58:23] [INFO] [LastChance] Found player: Player
[21:58:23] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:58:23] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:58:23] [INFO] [LastChance] Connected to player Died signal (C#)
[21:58:23] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[21:58:23] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:58:23] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:58:23] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:58:24] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:58:24] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[21:58:24] [INFO] [Player.Grenade] G pressed - starting grab animation
[21:58:24] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:58:24] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (514.40344, 1127.1057)
[21:58:24] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[21:58:24] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[21:58:24] [INFO] [GrenadeBase] Timer activated! 4.0 seconds until explosion
[21:58:24] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[21:58:24] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[21:58:24] [INFO] [Player.Grenade] Step 1 complete! Drag: (147.91614, 39.406372)
[21:58:24] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[21:58:24] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[21:58:25] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:58:25] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[21:58:25] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1188), corner_timer=0.30
[21:58:25] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1188), corner_timer=0.30
[21:58:25] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,1083), corner_timer=-0.02
[21:58:25] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:58:25] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,1083), corner_timer=-0.02
[21:58:25] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[21:58:25] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,1078), corner_timer=0.30
[21:58:25] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,1078), corner_timer=0.30
[21:58:25] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,973), corner_timer=-0.02
[21:58:25] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[21:58:25] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,968), corner_timer=0.30
[21:58:26] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,863), corner_timer=-0.02
[21:58:26] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[21:58:26] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,858), corner_timer=0.30
[21:58:26] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(450,763), corner_timer=-0.02
[21:58:26] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[21:58:26] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(450,760), corner_timer=0.30
[21:58:26] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(450,745), corner_timer=-0.02
[21:58:26] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[21:58:26] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(450,745), corner_timer=0.30
[21:58:26] [INFO] [Player.Grenade.Simple] Throwing! Target: (900.5424, 703.58057), Distance: 455,3, Speed: 522,7, Friction: 300,0
[21:58:26] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,09375285
[21:58:26] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.995608, -0.093616), Speed: 522.7 (clamped from 522.7, max: 1352.8)
[21:58:26] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[21:58:26] [INFO] [Player.Grenade.Simple] Grenade thrown!
[21:58:26] [INFO] [Player.Grenade] State reset to IDLE
[21:58:26] [INFO] [Player.Grenade] State reset to IDLE
[21:58:26] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[21:58:26] [INFO] [Player.Grenade] Player rotation restored to 0
[21:58:27] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[21:58:27] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:27] [INFO] [GrenadeBase] Collision detected with Enemy3 (type: CharacterBody2D)
[21:58:27] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(450,745), corner_timer=-0.02
[21:58:27] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[21:58:27] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:58:27] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (641.0926, 1216.117)
[21:58:27] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(450,745), corner_timer=0.30
[21:58:27] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=173.4°, current=-4.9°, player=(450,745), corner_timer=0.00
[21:58:27] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:27] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[21:58:27] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=123.7°, current=0.9°, player=(450,745), corner_timer=0.00
[21:58:27] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:27] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(450,745), corner_timer=-0.02
[21:58:27] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[21:58:27] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(450,745), corner_timer=0.30
[21:58:27] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:27] [INFO] [SoundPropagation] Sound emitted: type=GRENADE_LANDING, pos=(757.2258, 636.718), source=NEUTRAL (FlashbangGrenade), range=112, listeners=20
[21:58:27] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[21:58:27] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=10, self=0, below_threshold=0
[21:58:27] [INFO] [GrenadeBase] Grenade landed at (757.2258, 636.718)
[21:58:27] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(450,745), corner_timer=-0.02
[21:58:27] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[21:58:27] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(450,745), corner_timer=0.30
[21:58:28] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:58:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:28] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[21:58:28] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[21:58:28] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[21:58:28] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:58:28] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:58:28] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:58:28] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[21:58:28] [ENEMY] [Enemy1] Death animation component initialized
[21:58:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:28] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[21:58:28] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[21:58:28] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[21:58:28] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:58:28] [ENEMY] [Enemy2] Death animation component initialized
[21:58:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:28] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[21:58:28] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[21:58:28] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[21:58:28] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:58:28] [ENEMY] [Enemy3] Death animation component initialized
[21:58:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:28] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[21:58:28] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[21:58:28] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[21:58:28] [ENEMY] [Enemy4] Death animation component initialized
[21:58:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:28] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[21:58:28] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[21:58:28] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[21:58:28] [ENEMY] [Enemy5] Death animation component initialized
[21:58:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:28] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[21:58:28] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[21:58:28] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[21:58:28] [ENEMY] [Enemy6] Death animation component initialized
[21:58:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:28] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[21:58:28] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[21:58:28] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[21:58:28] [ENEMY] [Enemy7] Death animation component initialized
[21:58:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:28] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[21:58:28] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[21:58:28] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[21:58:28] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:58:28] [ENEMY] [Enemy8] Death animation component initialized
[21:58:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:28] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[21:58:28] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[21:58:28] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[21:58:28] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:58:28] [ENEMY] [Enemy9] Death animation component initialized
[21:58:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:28] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[21:58:28] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[21:58:28] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[21:58:28] [ENEMY] [Enemy10] Death animation component initialized
[21:58:28] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:28] [INFO] [BloodyFeet:Player] Footprint scene loaded
[21:58:28] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[21:58:28] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[21:58:28] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[21:58:28] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:58:28] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:58:28] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:58:28] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:58:28] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:58:28] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[21:58:28] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[21:58:28] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[21:58:28] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:58:28] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[21:58:28] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[21:58:28] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[21:58:28] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[21:58:28] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[21:58:28] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[21:58:28] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[21:58:28] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[21:58:28] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[21:58:28] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[21:58:28] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[21:58:28] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[21:58:28] [INFO] [ScoreManager] Level started with 10 enemies
[21:58:28] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[21:58:28] [INFO] [CinemaEffects] Found player node: Player
[21:58:28] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[21:58:28] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[21:58:28] [ENEMY] [Enemy1] Registered as sound listener
[21:58:28] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[21:58:28] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[21:58:28] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[21:58:28] [ENEMY] [Enemy2] Registered as sound listener
[21:58:28] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[21:58:28] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[21:58:28] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[21:58:28] [ENEMY] [Enemy3] Registered as sound listener
[21:58:28] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[21:58:28] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[21:58:28] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[21:58:28] [ENEMY] [Enemy4] Registered as sound listener
[21:58:28] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[21:58:28] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[21:58:28] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[21:58:28] [ENEMY] [Enemy5] Registered as sound listener
[21:58:28] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[21:58:28] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[21:58:28] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[21:58:28] [ENEMY] [Enemy6] Registered as sound listener
[21:58:28] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[21:58:28] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[21:58:28] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[21:58:28] [ENEMY] [Enemy7] Registered as sound listener
[21:58:28] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[21:58:28] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[21:58:28] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[21:58:28] [ENEMY] [Enemy8] Registered as sound listener
[21:58:28] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[21:58:28] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[21:58:28] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[21:58:28] [ENEMY] [Enemy9] Registered as sound listener
[21:58:28] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[21:58:28] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[21:58:28] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[21:58:28] [ENEMY] [Enemy10] Registered as sound listener
[21:58:28] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[21:58:28] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[21:58:28] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:28] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:28] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:28] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:28] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:28] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:28] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:28] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:28] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:58:28] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:58:28] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:58:28] [INFO] [LastChance] Found player: Player
[21:58:28] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:58:28] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:58:28] [INFO] [LastChance] Connected to player Died signal (C#)
[21:58:28] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[21:58:28] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:58:28] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:58:28] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:58:28] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:58:28] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[21:58:28] [INFO] [Player.Grenade] G pressed - starting grab animation
[21:58:28] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:58:28] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (557.2224, 1226.6234)
[21:58:28] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[21:58:28] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[21:58:28] [INFO] [GrenadeBase] Timer activated! 4.0 seconds until explosion
[21:58:28] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[21:58:28] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[21:58:28] [INFO] [Player.Grenade] Step 1 complete! Drag: (92.50342, 0)
[21:58:28] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[21:58:28] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[21:58:29] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:58:29] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[21:58:29] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,995), corner_timer=0.30
[21:58:29] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,995), corner_timer=0.30
[21:58:29] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,891), corner_timer=-0.02
[21:58:29] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:58:29] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,891), corner_timer=-0.02
[21:58:29] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[21:58:29] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,885), corner_timer=0.30
[21:58:29] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,885), corner_timer=0.30
[21:58:30] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,831), corner_timer=-0.02
[21:58:30] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[21:58:30] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,831), corner_timer=0.30
[21:58:30] [INFO] [Player.Grenade.Simple] Throwing! Target: (658.0361, 592.8785), Distance: 300,3, Speed: 424,4, Friction: 300,0
[21:58:30] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,8599508
[21:58:30] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.652475, -0.75781), Speed: 424.4 (clamped from 424.4, max: 1352.8)
[21:58:30] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[21:58:30] [INFO] [Player.Grenade.Simple] Grenade thrown!
[21:58:30] [INFO] [Player.Grenade] State reset to IDLE
[21:58:30] [INFO] [Player.Grenade] State reset to IDLE
[21:58:30] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[21:58:30] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:58:30] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1011.818, 698.9985)
[21:58:30] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-42.8°, current=-175.9°, player=(450,836), corner_timer=0.00
[21:58:30] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:30] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[21:58:30] [INFO] [Player.Grenade] Player rotation restored to 0
[21:58:30] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=146.3°, current=-173.2°, player=(450,837), corner_timer=0.00
[21:58:30] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:58:30] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1036.176, 690.7842)
[21:58:30] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-42.8°, current=179.0°, player=(450,837), corner_timer=0.00
[21:58:30] [ENEMY] [Enemy1] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:58:30] [ENEMY] [Enemy1] EVADING_GRENADE started: escaping to (263.256, 288.3101)
[21:58:30] [ENEMY] [Enemy2] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:58:30] [ENEMY] [Enemy2] EVADING_GRENADE started: escaping to (224.8771, 311.7986)
[21:58:30] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-125.2°, current=12.9°, player=(450,837), corner_timer=0.00
[21:58:30] [ENEMY] [Enemy1] EVADING_GRENADE: Escaped to safe distance
[21:58:30] [ENEMY] [Enemy1] State: EVADING_GRENADE -> IDLE
[21:58:30] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-103.7°, current=27.7°, player=(450,837), corner_timer=0.00
[21:58:30] [ENEMY] [Enemy1] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=191.3°, current=7.1°, player=(450,837), corner_timer=0.00
[21:58:30] [ENEMY] [Enemy2] EVADING_GRENADE: Escaped to safe distance
[21:58:30] [ENEMY] [Enemy2] State: EVADING_GRENADE -> IDLE
[21:58:30] [ENEMY] [Enemy2] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=180.0°, current=4.7°, player=(450,837), corner_timer=0.00
[21:58:30] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P1:visible, state=EVADING_GRENADE, target=153.4°, current=-177.1°, player=(450,837), corner_timer=0.00
[21:58:30] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,837), corner_timer=-0.02
[21:58:30] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[21:58:30] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,837), corner_timer=0.30
[21:58:30] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[21:58:30] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:30] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[21:58:30] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[21:58:30] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[21:58:30] [ENEMY] [Enemy2] Memory: high confidence (0.90) - transitioning to PURSUING
[21:58:30] [ENEMY] [Enemy2] State: IDLE -> PURSUING
[21:58:30] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[21:58:30] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=-169.8°, current=-67.5°, player=(450,837), corner_timer=0.00
[21:58:30] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=79.8°, current=19.1°, player=(450,837), corner_timer=0.00
[21:58:30] [ENEMY] [Enemy2] PURSUING corner check: angle 168.4°
[21:58:30] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=151.8°, current=-5.5°, player=(450,837), corner_timer=0.00
[21:58:30] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[21:58:30] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(450,837), corner_timer=-0.02
[21:58:30] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[21:58:30] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(450,837), corner_timer=0.30
[21:58:30] [ENEMY] [Enemy2] PURSUING corner check: angle 11.6°
[21:58:31] [ENEMY] [Enemy4] PURSUING corner check: angle -94.0°
[21:58:31] [ENEMY] [Enemy1] Memory: medium confidence (0.76) - transitioning to PURSUING
[21:58:31] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[21:58:31] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[21:58:31] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=72.3°, current=-101.7°, player=(450,837), corner_timer=0.00
[21:58:31] [ENEMY] [Enemy1] PURSUING corner check: angle -32.1°
[21:58:31] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(450,837), corner_timer=-0.02
[21:58:31] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[21:58:31] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(450,837), corner_timer=0.30
[21:58:31] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=151.8°, current=103.3°, player=(450,837), corner_timer=0.00
[21:58:31] [INFO] [SoundPropagation] Sound emitted: type=GRENADE_LANDING, pos=(663.4592, 586.5798), source=NEUTRAL (FlashbangGrenade), range=112, listeners=20
[21:58:31] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[21:58:31] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=10, self=0, below_threshold=0
[21:58:31] [INFO] [GrenadeBase] Grenade landed at (663.4592, 586.5798)
[21:58:31] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:58:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:31] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[21:58:31] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[21:58:31] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[21:58:31] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:58:31] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:58:31] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:58:31] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[21:58:31] [ENEMY] [Enemy1] Death animation component initialized
[21:58:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:31] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[21:58:31] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[21:58:31] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[21:58:31] [ENEMY] [Enemy2] Death animation component initialized
[21:58:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:31] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[21:58:31] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[21:58:31] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[21:58:31] [ENEMY] [Enemy3] Death animation component initialized
[21:58:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:31] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[21:58:31] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[21:58:31] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[21:58:31] [ENEMY] [Enemy4] Death animation component initialized
[21:58:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:31] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[21:58:31] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[21:58:31] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[21:58:31] [ENEMY] [Enemy5] Death animation component initialized
[21:58:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:31] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[21:58:31] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[21:58:31] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[21:58:31] [ENEMY] [Enemy6] Death animation component initialized
[21:58:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:31] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[21:58:31] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[21:58:31] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[21:58:31] [ENEMY] [Enemy7] Death animation component initialized
[21:58:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:31] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[21:58:31] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[21:58:31] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[21:58:31] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:58:31] [ENEMY] [Enemy8] Death animation component initialized
[21:58:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:31] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[21:58:31] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[21:58:31] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[21:58:31] [ENEMY] [Enemy9] Death animation component initialized
[21:58:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:31] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[21:58:31] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[21:58:31] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[21:58:31] [ENEMY] [Enemy10] Death animation component initialized
[21:58:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:31] [INFO] [BloodyFeet:Player] Footprint scene loaded
[21:58:31] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[21:58:31] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[21:58:31] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[21:58:31] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:58:31] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:58:31] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:58:31] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:58:31] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:58:31] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[21:58:31] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[21:58:31] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[21:58:31] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:58:31] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[21:58:31] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[21:58:31] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[21:58:31] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[21:58:31] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[21:58:31] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[21:58:31] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[21:58:31] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[21:58:31] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[21:58:31] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[21:58:31] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[21:58:31] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[21:58:31] [INFO] [ScoreManager] Level started with 10 enemies
[21:58:31] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[21:58:31] [INFO] [CinemaEffects] Found player node: Player
[21:58:31] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[21:58:31] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[21:58:31] [ENEMY] [Enemy1] Registered as sound listener
[21:58:31] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[21:58:31] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[21:58:31] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[21:58:31] [ENEMY] [Enemy2] Registered as sound listener
[21:58:31] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[21:58:31] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[21:58:31] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[21:58:31] [ENEMY] [Enemy3] Registered as sound listener
[21:58:31] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[21:58:31] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[21:58:31] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[21:58:31] [ENEMY] [Enemy4] Registered as sound listener
[21:58:31] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[21:58:31] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[21:58:31] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[21:58:31] [ENEMY] [Enemy5] Registered as sound listener
[21:58:31] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[21:58:31] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[21:58:31] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[21:58:31] [ENEMY] [Enemy6] Registered as sound listener
[21:58:31] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[21:58:31] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[21:58:31] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[21:58:31] [ENEMY] [Enemy7] Registered as sound listener
[21:58:31] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[21:58:31] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[21:58:31] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[21:58:31] [ENEMY] [Enemy8] Registered as sound listener
[21:58:31] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[21:58:31] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[21:58:31] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[21:58:31] [ENEMY] [Enemy9] Registered as sound listener
[21:58:31] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[21:58:31] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[21:58:31] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[21:58:31] [ENEMY] [Enemy10] Registered as sound listener
[21:58:31] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[21:58:31] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[21:58:31] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:31] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:31] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=281.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:31] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:31] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:31] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:31] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:31] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:31] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:58:31] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:58:31] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:58:31] [INFO] [LastChance] Found player: Player
[21:58:31] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:58:31] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:58:31] [INFO] [LastChance] Connected to player Died signal (C#)
[21:58:31] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[21:58:31] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:58:31] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:58:31] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:58:31] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:58:31] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[21:58:31] [INFO] [Player.Grenade] G pressed - starting grab animation
[21:58:31] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:58:31] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (528.17084, 1134.4526)
[21:58:31] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[21:58:31] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[21:58:31] [INFO] [GrenadeBase] Timer activated! 4.0 seconds until explosion
[21:58:31] [INFO] [Player.Grenade] Timer started, grenade created at (450, 1250)
[21:58:31] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[21:58:31] [INFO] [Player.Grenade] Step 1 complete! Drag: (152.62323, 20.03711)
[21:58:32] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[21:58:32] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[21:58:33] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:58:33] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[21:58:33] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(445,981), corner_timer=0.30
[21:58:33] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(445,981), corner_timer=0.30
[21:58:33] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(390,899), corner_timer=-0.02
[21:58:33] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:58:33] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(390,899), corner_timer=-0.02
[21:58:33] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[21:58:33] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(388,895), corner_timer=0.30
[21:58:33] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(388,895), corner_timer=0.30
[21:58:33] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(376,862), corner_timer=-0.02
[21:58:33] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[21:58:33] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(376,862), corner_timer=0.30
[21:58:34] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(376,862), corner_timer=-0.02
[21:58:34] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[21:58:34] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(376,862), corner_timer=0.30
[21:58:34] [INFO] [Player.Grenade.Simple] Throwing! Target: (790.98083, 597.91187), Distance: 500,7, Speed: 548,1, Friction: 300,0
[21:58:34] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,5690787
[21:58:34] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.842398, -0.538856), Speed: 548.1 (clamped from 548.1, max: 1352.8)
[21:58:34] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[21:58:34] [INFO] [Player.Grenade.Simple] Grenade thrown!
[21:58:34] [INFO] [Player.Grenade] State reset to IDLE
[21:58:34] [INFO] [Player.Grenade] State reset to IDLE
[21:58:34] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[21:58:34] [INFO] [Player.Grenade] Player rotation restored to 0
[21:58:34] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(376,862), corner_timer=-0.02
[21:58:34] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[21:58:34] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(376,862), corner_timer=0.30
[21:58:34] [ENEMY] [Enemy2] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:58:34] [ENEMY] [Enemy2] EVADING_GRENADE started: escaping to (235.2822, 332.0547)
[21:58:34] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[21:58:34] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-103.7°, current=27.7°, player=(376,862), corner_timer=0.00
[21:58:34] [ENEMY] [Enemy2] EVADING_GRENADE: Escaped to safe distance
[21:58:34] [ENEMY] [Enemy2] State: EVADING_GRENADE -> IDLE
[21:58:34] [ENEMY] [Enemy2] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=45.0°, current=4.7°, player=(376,862), corner_timer=0.00
[21:58:34] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(376,862), corner_timer=-0.02
[21:58:34] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[21:58:34] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(376,862), corner_timer=0.30
[21:58:34] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:58:34] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (978.6821, 1097.513)
[21:58:34] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=173.4°, current=-49.9°, player=(376,862), corner_timer=0.00
[21:58:34] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:34] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[21:58:34] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=11.3°, current=-55.6°, player=(376,862), corner_timer=0.00
[21:58:34] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:58:34] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (773.765, 1190.537)
[21:58:34] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=173.4°, current=-28.6°, player=(376,862), corner_timer=0.00
[21:58:34] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:34] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[21:58:34] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:58:34] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (600.5471, 1186.562)
[21:58:35] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:35] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[21:58:35] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:58:35] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (463.7574, 1131.852)
[21:58:35] [ENEMY] [Enemy4] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:58:35] [ENEMY] [Enemy4] EVADING_GRENADE started: escaping to (906.1559, 1140.187)
[21:58:35] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:35] [ENEMY] [Enemy3] State: EVADING_GRENADE -> IDLE
[21:58:35] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P4:velocity, state=EVADING_GRENADE, target=-98.0°, current=-117.6°, player=(376,862), corner_timer=0.00
[21:58:35] [ENEMY] [Enemy4] EVADING_GRENADE: Escaped to safe distance
[21:58:35] [ENEMY] [Enemy4] State: EVADING_GRENADE -> IDLE
[21:58:35] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=236.3°, current=-14.8°, player=(376,862), corner_timer=0.00
[21:58:35] [ENEMY] [Enemy4] ROT_CHANGE: P4:velocity -> P5:idle_scan, state=IDLE, target=157.5°, current=-111.9°, player=(376,862), corner_timer=0.00
[21:58:35] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:35] [ENEMY] [Enemy4] GRENADE DANGER: Entering EVADING_GRENADE state from IDLE
[21:58:35] [ENEMY] [Enemy4] EVADING_GRENADE started: escaping to (844.1354, 1140.323)
[21:58:35] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(376,862), corner_timer=-0.02
[21:58:35] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[21:58:35] [ENEMY] [Enemy4] EVADING_GRENADE: Escaped to safe distance
[21:58:35] [ENEMY] [Enemy4] State: EVADING_GRENADE -> IDLE
[21:58:35] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(376,862), corner_timer=0.30
[21:58:35] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:35] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(376,862), corner_timer=-0.02
[21:58:35] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[21:58:35] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(376,862), corner_timer=0.30
[21:58:35] [INFO] [SoundPropagation] Sound emitted: type=GRENADE_LANDING, pos=(796.6322, 594.2975), source=NEUTRAL (FlashbangGrenade), range=112, listeners=20
[21:58:35] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[21:58:35] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=10, self=0, below_threshold=0
[21:58:35] [INFO] [GrenadeBase] Grenade landed at (796.6322, 594.2975)
[21:58:35] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:35] [INFO] [GrenadeBase] EXPLODED at (800.3386, 591.9267)!
[21:58:35] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(800.3386, 591.9267), source=NEUTRAL (FlashbangGrenade), range=2937, listeners=10
[21:58:35] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[21:58:35] [ENEMY] [Enemy3] Status: BLINDED applied
[21:58:35] [ENEMY] [Enemy3] Status: STUNNED applied
[21:58:35] [ENEMY] [Enemy4] Status: BLINDED applied
[21:58:35] [ENEMY] [Enemy4] Status: STUNNED applied
[21:58:36] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(376,862), corner_timer=-0.02
[21:58:36] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[21:58:36] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(376,862), corner_timer=0.30
[21:58:36] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:36] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(376,862), corner_timer=-0.02
[21:58:36] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[21:58:36] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(376,862), corner_timer=0.30
[21:58:36] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:36] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(376,862), corner_timer=-0.02
[21:58:36] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[21:58:36] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(376,862), corner_timer=0.30
[21:58:36] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:36] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.5°, current=89.5°, player=(376,862), corner_timer=-0.02
[21:58:36] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[21:58:36] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(376,862), corner_timer=0.30
[21:58:37] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:37] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.4°, current=89.5°, player=(376,862), corner_timer=-0.02
[21:58:37] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[21:58:37] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:58:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:37] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[21:58:37] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[21:58:37] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[21:58:37] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:58:37] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:58:37] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:58:37] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[21:58:37] [ENEMY] [Enemy1] Death animation component initialized
[21:58:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:37] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[21:58:37] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[21:58:37] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[21:58:37] [ENEMY] [Enemy2] Death animation component initialized
[21:58:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:37] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[21:58:37] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[21:58:37] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[21:58:37] [ENEMY] [Enemy3] Death animation component initialized
[21:58:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:37] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[21:58:37] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[21:58:37] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[21:58:37] [ENEMY] [Enemy4] Death animation component initialized
[21:58:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:37] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[21:58:37] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[21:58:37] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[21:58:37] [ENEMY] [Enemy5] Death animation component initialized
[21:58:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:37] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[21:58:37] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[21:58:37] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[21:58:37] [ENEMY] [Enemy6] Death animation component initialized
[21:58:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:37] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[21:58:37] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[21:58:37] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[21:58:37] [ENEMY] [Enemy7] Death animation component initialized
[21:58:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:37] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[21:58:37] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[21:58:37] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[21:58:37] [ENEMY] [Enemy8] Death animation component initialized
[21:58:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:37] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[21:58:37] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[21:58:37] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[21:58:37] [ENEMY] [Enemy9] Death animation component initialized
[21:58:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:37] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[21:58:37] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[21:58:37] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[21:58:37] [ENEMY] [Enemy10] Death animation component initialized
[21:58:37] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:37] [INFO] [BloodyFeet:Player] Footprint scene loaded
[21:58:37] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[21:58:37] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[21:58:37] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[21:58:37] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:58:37] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:58:37] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:58:37] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:58:37] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:58:37] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[21:58:37] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[21:58:37] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[21:58:37] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:58:37] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[21:58:37] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[21:58:37] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[21:58:37] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[21:58:37] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[21:58:37] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[21:58:37] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[21:58:37] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[21:58:37] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[21:58:37] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[21:58:37] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[21:58:37] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[21:58:37] [INFO] [ScoreManager] Level started with 10 enemies
[21:58:37] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[21:58:37] [INFO] [CinemaEffects] Found player node: Player
[21:58:37] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[21:58:37] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[21:58:37] [ENEMY] [Enemy1] Registered as sound listener
[21:58:37] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[21:58:37] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[21:58:37] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[21:58:37] [ENEMY] [Enemy2] Registered as sound listener
[21:58:37] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[21:58:37] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[21:58:37] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[21:58:37] [ENEMY] [Enemy3] Registered as sound listener
[21:58:37] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[21:58:37] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[21:58:37] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[21:58:37] [ENEMY] [Enemy4] Registered as sound listener
[21:58:37] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[21:58:37] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[21:58:37] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[21:58:37] [ENEMY] [Enemy5] Registered as sound listener
[21:58:37] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 3, behavior: GUARD
[21:58:37] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[21:58:37] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[21:58:37] [ENEMY] [Enemy6] Registered as sound listener
[21:58:37] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[21:58:37] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[21:58:37] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[21:58:37] [ENEMY] [Enemy7] Registered as sound listener
[21:58:37] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[21:58:37] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[21:58:37] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[21:58:37] [ENEMY] [Enemy8] Registered as sound listener
[21:58:37] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[21:58:37] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[21:58:37] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[21:58:37] [ENEMY] [Enemy9] Registered as sound listener
[21:58:37] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[21:58:37] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[21:58:37] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[21:58:37] [ENEMY] [Enemy10] Registered as sound listener
[21:58:37] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[21:58:37] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[21:58:37] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:37] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:37] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=236.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:37] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:37] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:37] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:37] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=78.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:37] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:37] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:58:37] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:58:37] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:58:37] [INFO] [LastChance] Found player: Player
[21:58:37] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:58:37] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:58:37] [INFO] [LastChance] Connected to player Died signal (C#)
[21:58:37] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[21:58:37] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:58:37] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:58:37] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:58:37] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:58:37] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[21:58:37] [INFO] [Player.Grenade] G pressed - starting grab animation
[21:58:37] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:58:37] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (534.48926, 1021.577)
[21:58:37] [INFO] [Player.Grenade] Step 1 failed: drag not far enough right (-55,586395 < 30)
[21:58:37] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:58:37] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (587.7817, 1028.256)
[21:58:37] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[21:58:38] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[21:58:38] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:58:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:38] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[21:58:38] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[21:58:38] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[21:58:38] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[21:58:38] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[21:58:38] [INFO] [LastChance] Resetting all effects (scene change detected)
[21:58:38] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[21:58:38] [ENEMY] [Enemy1] Death animation component initialized
[21:58:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:38] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[21:58:38] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[21:58:38] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[21:58:38] [ENEMY] [Enemy2] Death animation component initialized
[21:58:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:38] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[21:58:38] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[21:58:38] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[21:58:38] [ENEMY] [Enemy3] Death animation component initialized
[21:58:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:38] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[21:58:38] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[21:58:38] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[21:58:38] [ENEMY] [Enemy4] Death animation component initialized
[21:58:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:38] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[21:58:38] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[21:58:38] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[21:58:38] [ENEMY] [Enemy5] Death animation component initialized
[21:58:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:38] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[21:58:38] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[21:58:38] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[21:58:38] [ENEMY] [Enemy6] Death animation component initialized
[21:58:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:38] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[21:58:38] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[21:58:38] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[21:58:38] [INFO] [EnemyGrenade] Initialized: 1 grenades
[21:58:38] [ENEMY] [Enemy7] Death animation component initialized
[21:58:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:38] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[21:58:38] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[21:58:38] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[21:58:38] [ENEMY] [Enemy8] Death animation component initialized
[21:58:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:38] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[21:58:38] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[21:58:38] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[21:58:38] [ENEMY] [Enemy9] Death animation component initialized
[21:58:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:38] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[21:58:38] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[21:58:38] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[21:58:38] [ENEMY] [Enemy10] Death animation component initialized
[21:58:38] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[21:58:38] [INFO] [BloodyFeet:Player] Footprint scene loaded
[21:58:38] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[21:58:38] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[21:58:38] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[21:58:38] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[21:58:38] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[21:58:38] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[21:58:38] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[21:58:38] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[21:58:38] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[21:58:38] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[21:58:38] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[21:58:38] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[21:58:38] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[21:58:38] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[21:58:38] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[21:58:38] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[21:58:38] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[21:58:38] [INFO] [BuildingLevel] Child 'Enemy5': script=true, has_died_signal=true
[21:58:38] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[21:58:38] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[21:58:38] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[21:58:38] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[21:58:38] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[21:58:38] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[21:58:38] [INFO] [ScoreManager] Level started with 10 enemies
[21:58:38] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[21:58:38] [INFO] [CinemaEffects] Found player node: Player
[21:58:38] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[21:58:38] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[21:58:38] [ENEMY] [Enemy1] Registered as sound listener
[21:58:38] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[21:58:38] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[21:58:38] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[21:58:38] [ENEMY] [Enemy2] Registered as sound listener
[21:58:38] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[21:58:38] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[21:58:38] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[21:58:38] [ENEMY] [Enemy3] Registered as sound listener
[21:58:38] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[21:58:38] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[21:58:38] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[21:58:38] [ENEMY] [Enemy4] Registered as sound listener
[21:58:38] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[21:58:38] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[21:58:38] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 25)
[21:58:38] [ENEMY] [Enemy5] Registered as sound listener
[21:58:38] [ENEMY] [Enemy5] Spawned at (1700, 350), hp: 4, behavior: GUARD
[21:58:38] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[21:58:38] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[21:58:38] [ENEMY] [Enemy6] Registered as sound listener
[21:58:38] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[21:58:38] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[21:58:38] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[21:58:38] [ENEMY] [Enemy7] Registered as sound listener
[21:58:38] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[21:58:38] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[21:58:38] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[21:58:38] [ENEMY] [Enemy8] Registered as sound listener
[21:58:38] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[21:58:38] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[21:58:38] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[21:58:38] [ENEMY] [Enemy9] Registered as sound listener
[21:58:38] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[21:58:38] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[21:58:38] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[21:58:38] [ENEMY] [Enemy10] Registered as sound listener
[21:58:38] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[21:58:38] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[21:58:38] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:38] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:38] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:38] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:38] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:38] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:38] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:38] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[21:58:38] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[21:58:38] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[21:58:38] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[21:58:38] [INFO] [LastChance] Found player: Player
[21:58:38] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[21:58:38] [INFO] [LastChance] Connected to player Damaged signal (C#)
[21:58:38] [INFO] [LastChance] Connected to player Died signal (C#)
[21:58:38] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[21:58:38] [INFO] [Player] Detecting weapon pose (frame 3)...
[21:58:38] [INFO] [Player] Detected weapon: Rifle (default pose)
[21:58:38] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[21:58:39] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:58:39] [INFO] [Player.Grenade.Anim] Phase changed to: GrabGrenade (duration: 0,20s)
[21:58:39] [INFO] [Player.Grenade] G pressed - starting grab animation
[21:58:39] [INFO] [Player.Grenade] Mode check: complex=False, settings_node=True
[21:58:39] [INFO] [Player.Grenade] Step 1 started: G held, RMB pressed at (485.48383, 865.44604)
[21:58:39] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[21:58:39] [INFO] [GrenadeBase] Grenade created at (0, 0) (frozen)
[21:58:39] [INFO] [GrenadeBase] Timer activated! 4.0 seconds until explosion
[21:58:39] [INFO] [Player.Grenade] Timer started, grenade created at (450, 995.6666)
[21:58:39] [INFO] [Player.Grenade.Anim] Phase changed to: PullPin (duration: 0,15s)
[21:58:39] [INFO] [Player.Grenade] Step 1 complete! Drag: (379.71082, 34.638794)
[21:58:39] [INFO] [Player.Grenade.Anim] Phase changed to: HandsApproach (duration: 0,20s)
[21:58:39] [INFO] [Player.Grenade.Simple] RMB pressed after pin pull - starting trajectory aiming
[21:58:40] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:58:40] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[21:58:40] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,853), corner_timer=0.30
[21:58:40] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,853), corner_timer=0.30
[21:58:40] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=163.5°, current=123.7°, player=(450,823), corner_timer=0.00
[21:58:40] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[21:58:40] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=164.5°, current=-66.5°, player=(450,819), corner_timer=0.00
[21:58:40] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,811), corner_timer=-0.02
[21:58:40] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[21:58:40] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,811), corner_timer=-0.02
[21:58:40] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[21:58:40] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,811), corner_timer=0.30
[21:58:40] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,811), corner_timer=0.30
[21:58:40] [ENEMY] [Enemy4] Memory: high confidence (0.87) - transitioning to PURSUING
[21:58:40] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[21:58:40] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=-165.9°, current=168.8°, player=(450,811), corner_timer=0.00
[21:58:40] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[21:58:40] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=166.3°, current=-144.5°, player=(448,811), corner_timer=0.00
[21:58:40] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(446,811), corner_timer=-0.02
[21:58:40] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[21:58:40] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(445,811), corner_timer=0.30
[21:58:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.5931, 754.3154), source=ENEMY (Enemy3), range=1469, listeners=30
[21:58:40] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
[21:58:40] [ENEMY] [Enemy2] Heard gunshot at (684.5931, 754.3154), source_type=1, intensity=0.02, distance=350
[21:58:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[21:58:40] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=82.0°, current=-67.5°, player=(436,811), corner_timer=0.00
[21:58:40] [INFO] [LastChance] Threat detected: Bullet
[21:58:40] [INFO] [LastChance] Not in hard mode - effect disabled
[21:58:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:58:40] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.5931, 754.3154), source=ENEMY (Enemy3), range=1469, listeners=10
[21:58:40] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[21:58:40] [INFO] [LastChance] Threat detected: @Area2D@8720
[21:58:40] [INFO] [LastChance] Not in hard mode - effect disabled
[21:58:40] [INFO] [LastChance] Cannot trigger effect - conditions not met
[21:58:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(619.9998, 777.149), shooter_id=2501063477880, bullet_pos=(498.1755, 805.1464)
[21:58:41] [INFO] [Bullet] Using shooter_position, distance=125.000030517578
[21:58:41] [INFO] [Bullet] Distance to wall: 125.000030517578 (8.51148193272994% of viewport)
[21:58:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:58:41] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(433,811), corner_timer=-0.02
[21:58:41] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[21:58:41] [INFO] [Player.Grenade.Simple] Throwing! Target: (613.9454, 696.49493), Distance: 178,6, Speed: 327,3, Friction: 300,0
[21:58:41] [INFO] [Player.Grenade] Player rotated for throw: 0 -> -0,570013
[21:58:41] [INFO] [GrenadeBase] Simple mode throw! Dir: (0.841894, -0.539643), Speed: 327.3 (clamped from 327.3, max: 1352.8)
[21:58:41] [INFO] [Player.Grenade.Anim] Phase changed to: Throw (duration: 0,20s)
[21:58:41] [INFO] [Player.Grenade.Simple] Grenade thrown!
[21:58:41] [INFO] [Player.Grenade] State reset to IDLE
[21:58:41] [INFO] [Player.Grenade] State reset to IDLE
[21:58:41] [INFO] [Player.Grenade.Anim] Phase changed to: ReturnIdle (duration: 0,30s)
[21:58:41] [ENEMY] [Enemy2] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:41] [ENEMY] [Enemy2] EVADING_GRENADE started: escaping to (286.2692, 292.3359)
[21:58:41] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:41] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1010.471, 717.094)
[21:58:41] [ENEMY] [Enemy4] PURSUING corner check: angle -94.0°
[21:58:41] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(433,811), corner_timer=0.30
[21:58:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(617.3511, 777.3225), shooter_id=2501063477880, bullet_pos=(49.22434, 909.6466)
[21:58:41] [INFO] [Bullet] Using shooter_position, distance=583.333251953125
[21:58:41] [INFO] [Bullet] Distance to wall: 583.333251953125 (39.7202337807543% of viewport)
[21:58:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:58:41] [INFO] [Bullet] Starting wall penetration at (49.22434, 909.6466)
[21:58:41] [INFO] [Bullet] Raycast backward hit penetrating body at distance 28.9812984466553
[21:58:41] [INFO] [Bullet] Body exited signal received for penetrating body
[21:58:41] [INFO] [Bullet] Exiting penetration at (3.774193, 920.2325) after traveling 41.6666679382324 pixels through wall
[21:58:41] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[21:58:41] [ENEMY] [Enemy1] Memory: medium confidence (0.61) - transitioning to PURSUING
[21:58:41] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[21:58:41] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=-102.9°, current=84.3°, player=(433,812), corner_timer=0.00
[21:58:41] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=73.9°, current=33.8°, player=(433,812), corner_timer=0.00
[21:58:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(619.9998, 777.149), shooter_id=2501063477880, bullet_pos=(261.6454, 715.5901)
[21:58:41] [INFO] [Bullet] Using shooter_position, distance=363.603332519531
[21:58:41] [INFO] [Bullet] Distance to wall: 363.603332519531 (24.7584195188271% of viewport)
[21:58:41] [INFO] [Bullet] Within ricochet range - trying ricochet first
[21:58:41] [INFO] [Bullet] Starting wall penetration at (261.6454, 715.5901)
[21:58:41] [ENEMY] [Enemy1] PURSUING corner check: angle -50.9°
[21:58:41] [ENEMY] [Enemy2] EVADING_GRENADE: Escaped to safe distance
[21:58:41] [ENEMY] [Enemy2] State: EVADING_GRENADE -> COMBAT
[21:58:41] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=EVADING_GRENADE, target=-41.2°, current=-134.8°, player=(433,813), corner_timer=0.00
[21:58:41] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:41] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:41] [INFO] [Player.Grenade] Player rotation restored to 0
[21:58:41] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[21:58:41] [INFO] [Bullet] Exiting penetration at (223.8473, 701.2789) after traveling 35.4166717529297 pixels through wall
[21:58:41] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[21:58:41] [ENEMY] [Enemy2] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=82.0°, current=137.3°, player=(433,815), corner_timer=0.00
[21:58:41] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=162.9°, current=-131.9°, player=(433,815), corner_timer=0.00
[21:58:41] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=162.6°, current=157.2°, player=(433,816), corner_timer=0.00
[21:58:41] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:41] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1033.484, 682.2273)
[21:58:41] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=EVADING_GRENADE, target=-40.2°, current=-137.4°, player=(433,826), corner_timer=0.00
[21:58:41] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:41] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:41] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=157.8°, current=-134.6°, player=(433,830), corner_timer=0.00
[21:58:41] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=157.1°, current=151.3°, player=(433,833), corner_timer=0.00
[21:58:41] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:41] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1053.234, 650.0907)
[21:58:41] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=EVADING_GRENADE, target=-39.3°, current=-176.4°, player=(433,842), corner_timer=0.00
[21:58:41] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:41] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:41] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=154.3°, current=-173.5°, player=(433,846), corner_timer=0.00
[21:58:41] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:41] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1067.298, 643.8397)
[21:58:41] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=154.3°, current=153.5°, player=(433,857), corner_timer=0.00
[21:58:41] [INFO] [Player.Grenade.Anim] Animation complete, returning to normal
[21:58:41] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:41] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:41] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(433,868), corner_timer=-0.02
[21:58:41] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[21:58:41] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=149.5°, current=-148.9°, player=(433,873), corner_timer=0.00
[21:58:41] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(433,873), corner_timer=0.30
[21:58:41] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:41] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1081.261, 626.8058)
[21:58:41] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=149.5°, current=149.5°, player=(433,883), corner_timer=0.00
[21:58:41] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:41] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:41] [ENEMY] [Enemy1] PURSUING corner check: angle -51.1°
[21:58:41] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=146.8°, current=-178.9°, player=(433,891), corner_timer=0.00
[21:58:41] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:41] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1092.894, 623.627)
[21:58:41] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=146.8°, current=146.3°, player=(433,898), corner_timer=0.00
[21:58:41] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:41] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:41] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=144.5°, current=-153.9°, player=(433,907), corner_timer=0.00
[21:58:41] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:41] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1103.31, 608.0589)
[21:58:41] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=144.5°, current=144.5°, player=(433,912), corner_timer=0.00
[21:58:41] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:41] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:41] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=143.5°, current=177.0°, player=(433,916), corner_timer=0.00
[21:58:41] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:41] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1112.088, 605.4753)
[21:58:41] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[21:58:41] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=143.5°, current=143.4°, player=(433,918), corner_timer=0.00
[21:58:41] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:41] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:41] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=143.1°, current=176.2°, player=(433,919), corner_timer=0.00
[21:58:41] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:41] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1119.479, 602.614)
[21:58:41] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=143.1°, current=143.1°, player=(433,919), corner_timer=0.00
[21:58:41] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(433,919), corner_timer=-0.02
[21:58:41] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[21:58:41] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:41] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:41] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(433,919), corner_timer=0.30
[21:58:41] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=143.0°, current=175.8°, player=(433,919), corner_timer=0.00
[21:58:41] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:41] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1125.43, 599.0908)
[21:58:41] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=143.0°, current=143.0°, player=(433,919), corner_timer=0.00
[21:58:41] [ENEMY] [Enemy1] PURSUING corner check: angle 153.7°
[21:58:41] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:41] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:41] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=143.0°, current=175.8°, player=(433,919), corner_timer=0.00
[21:58:41] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:41] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1129.917, 594.739)
[21:58:41] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=143.0°, current=143.0°, player=(433,919), corner_timer=0.00
[21:58:41] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:41] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:41] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=143.0°, current=175.8°, player=(433,919), corner_timer=0.00
[21:58:41] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:41] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1132.939, 589.5715)
[21:58:41] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=143.0°, current=143.0°, player=(433,919), corner_timer=0.00
[21:58:41] [INFO] [SoundPropagation] Sound emitted: type=GRENADE_LANDING, pos=(619.0818, 693.2025), source=NEUTRAL (FlashbangGrenade), range=112, listeners=10
[21:58:41] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=10, self=0, below_threshold=0
[21:58:41] [INFO] [GrenadeBase] Grenade landed at (619.0818, 693.2025)
[21:58:41] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:41] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:41] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=143.0°, current=175.8°, player=(433,919), corner_timer=0.00
[21:58:41] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:41] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1134.5, 583.6846)
[21:58:41] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=143.0°, current=143.0°, player=(433,919), corner_timer=0.00
[21:58:41] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:41] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:42] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=143.0°, current=175.8°, player=(433,919), corner_timer=0.00
[21:58:42] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:42] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1134.603, 577.2394)
[21:58:42] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=143.0°, current=143.0°, player=(433,919), corner_timer=0.00
[21:58:42] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:42] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:42] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:42] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=142.9°, current=175.8°, player=(433,919), corner_timer=0.00
[21:58:42] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:42] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1133.339, 570.4786)
[21:58:42] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=142.9°, current=142.9°, player=(433,919), corner_timer=0.00
[21:58:42] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:42] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:42] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=142.9°, current=175.7°, player=(433,919), corner_timer=0.00
[21:58:42] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:42] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1130.263, 558.1205)
[21:58:42] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=-37.4°, current=172.9°, player=(433,919), corner_timer=0.00
[21:58:42] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:42] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:42] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=142.9°, current=-156.4°, player=(433,919), corner_timer=0.00
[21:58:42] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:42] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1125.789, 542.0765)
[21:58:42] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=142.9°, current=142.9°, player=(433,919), corner_timer=0.00
[21:58:42] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(433,919), corner_timer=-0.02
[21:58:42] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[21:58:42] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:42] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:42] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(433,919), corner_timer=0.30
[21:58:42] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=142.9°, current=-156.4°, player=(433,919), corner_timer=0.00
[21:58:42] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:42] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1121.536, 528.3956)
[21:58:42] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=142.9°, current=142.9°, player=(433,919), corner_timer=0.00
[21:58:42] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:42] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:42] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=142.9°, current=-156.4°, player=(433,919), corner_timer=0.00
[21:58:42] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:42] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1117.562, 516.6757)
[21:58:42] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:42] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=142.9°, current=142.9°, player=(433,919), corner_timer=0.00
[21:58:42] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:42] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:42] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=142.9°, current=-156.4°, player=(433,919), corner_timer=0.00
[21:58:42] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:42] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1112.73, 503.5198)
[21:58:42] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=-37.3°, current=-159.3°, player=(433,919), corner_timer=0.00
[21:58:42] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:42] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:42] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=142.9°, current=-132.8°, player=(433,919), corner_timer=0.00
[21:58:42] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:42] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1110.828, 498.6216)
[21:58:42] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=119.7°, current=145.7°, player=(433,919), corner_timer=0.00
[21:58:42] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:42] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:42] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=179.1°, current=172.4°, player=(433,919), corner_timer=-0.02
[21:58:42] [ENEMY] [Enemy7] PATROL corner check: angle 89.8°
[21:58:42] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=142.8°, current=-135.8°, player=(433,919), corner_timer=0.00
[21:58:42] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.8°, current=175.3°, player=(433,919), corner_timer=0.30
[21:58:42] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:42] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1105.396, 485.3683)
[21:58:42] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=119.6°, current=145.7°, player=(433,919), corner_timer=0.00
[21:58:42] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:42] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:42] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=143.3°, current=-131.8°, player=(433,919), corner_timer=0.00
[21:58:42] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:42] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1104.899, 484.2056)
[21:58:42] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:42] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=120.1°, current=146.2°, player=(433,919), corner_timer=0.00
[21:58:42] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:42] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:42] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=144.3°, current=86.5°, player=(433,919), corner_timer=0.00
[21:58:42] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:42] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1108.837, 493.6429)
[21:58:42] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=144.3°, current=144.3°, player=(433,919), corner_timer=0.00
[21:58:42] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:42] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:42] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=144.8°, current=87.6°, player=(433,919), corner_timer=0.00
[21:58:42] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=178.4°, current=120.7°, player=(433,919), corner_timer=-0.02
[21:58:42] [ENEMY] [Enemy7] PATROL corner check: angle 89.7°
[21:58:42] [ENEMY] [Enemy4] PURSUING corner check: angle -34.9°
[21:58:42] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.7°, current=123.6°, player=(433,919), corner_timer=0.30
[21:58:42] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:42] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1111.632, 500.6735)
[21:58:42] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=144.8°, current=144.8°, player=(433,919), corner_timer=0.00
[21:58:42] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:42] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:42] [ENEMY] [Enemy4] GRENADE DANGER: Entering EVADING_GRENADE state from PURSUING
[21:58:42] [ENEMY] [Enemy4] EVADING_GRENADE started: escaping to (445.4272, 1185.368)
[21:58:43] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=145.4°, current=88.2°, player=(433,919), corner_timer=0.00
[21:58:43] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P3:corner, state=EVADING_GRENADE, target=-34.9°, current=-32.3°, player=(433,919), corner_timer=0.25
[21:58:43] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:43] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1112.918, 504.0129)
[21:58:43] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=145.4°, current=145.4°, player=(433,919), corner_timer=0.00
[21:58:43] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:43] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:43] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:43] [ENEMY] [Enemy4] EVADING_GRENADE: Escaped to safe distance
[21:58:43] [ENEMY] [Enemy4] State: EVADING_GRENADE -> PURSUING
[21:58:43] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=145.7°, current=114.8°, player=(433,919), corner_timer=0.00
[21:58:43] [ENEMY] [Enemy4] ROT_CHANGE: P3:corner -> P2:combat_state, state=PURSUING, target=146.3°, current=-62.9°, player=(433,919), corner_timer=0.25
[21:58:43] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:43] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1114.188, 507.3751)
[21:58:43] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=145.7°, current=145.7°, player=(433,919), corner_timer=0.00
[21:58:43] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:43] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:43] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=146.1°, current=115.1°, player=(433,919), corner_timer=0.00
[21:58:43] [ENEMY] [Enemy2] FLANKING started: target=(239.785, 871.572), side=left, pos=(360.4701, 663.9352)
[21:58:43] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
[21:58:43] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:43] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1115.417, 510.7011)
[21:58:43] [ENEMY] [Enemy2] FLANKING corner check: angle -138.9°
[21:58:43] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=146.1°, current=146.1°, player=(433,919), corner_timer=0.00
[21:58:43] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:43] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:43] [ENEMY] [Enemy2] GRENADE DANGER: Entering EVADING_GRENADE state from FLANKING
[21:58:43] [ENEMY] [Enemy2] EVADING_GRENADE started: escaping to (101.2862, 627.1666)
[21:58:43] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=146.4°, current=115.5°, player=(433,919), corner_timer=0.00
[21:58:43] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P3:corner, state=EVADING_GRENADE, target=-138.9°, current=5.3°, player=(433,919), corner_timer=0.28
[21:58:43] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:43] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1116.609, 513.991)
[21:58:43] [ENEMY] [Enemy2] EVADING_GRENADE: Escaped to safe distance
[21:58:43] [ENEMY] [Enemy2] Warning: No valid flank position (both sides behind walls)
[21:58:43] [ENEMY] [Enemy2] FLANKING started: target=(575.3453, 778.6693), side=right, pos=(364.0516, 658.902)
[21:58:43] [ENEMY] [Enemy2] State: EVADING_GRENADE -> FLANKING
[21:58:43] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=146.4°, current=146.4°, player=(433,919), corner_timer=0.00
[21:58:43] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.9°, current=89.7°, player=(433,919), corner_timer=-0.02
[21:58:43] [ENEMY] [Enemy7] PATROL corner check: angle 89.6°
[21:58:43] [ENEMY] [Enemy2] ROT_CHANGE: P3:corner -> P2:combat_state, state=FLANKING, target=74.0°, current=-29.6°, player=(433,919), corner_timer=0.28
[21:58:43] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:43] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:43] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.6°, current=92.5°, player=(433,919), corner_timer=0.30
[21:58:43] [ENEMY] [Enemy2] GRENADE DANGER: Entering EVADING_GRENADE state from FLANKING
[21:58:43] [ENEMY] [Enemy2] EVADING_GRENADE started: escaping to (102.0566, 621.1719)
[21:58:43] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=146.7°, current=115.8°, player=(433,919), corner_timer=0.00
[21:58:43] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P3:corner, state=EVADING_GRENADE, target=-138.9°, current=-17.4°, player=(433,919), corner_timer=0.27
[21:58:43] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:43] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1117.762, 517.2445)
[21:58:43] [ENEMY] [Enemy2] EVADING_GRENADE: Escaped to safe distance
[21:58:43] [ENEMY] [Enemy2] FLANKING started: target=(573.173, 776.5271), side=right, pos=(358.1161, 653.0843)
[21:58:43] [ENEMY] [Enemy2] State: EVADING_GRENADE -> FLANKING
[21:58:43] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=146.7°, current=146.7°, player=(433,919), corner_timer=0.00
[21:58:43] [ENEMY] [Enemy2] ROT_CHANGE: P3:corner -> P2:combat_state, state=FLANKING, target=73.2°, current=-48.4°, player=(433,919), corner_timer=0.27
[21:58:43] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:43] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:43] [ENEMY] [Enemy2] GRENADE DANGER: Entering EVADING_GRENADE state from FLANKING
[21:58:43] [ENEMY] [Enemy2] EVADING_GRENADE started: escaping to (102.8109, 615.7711)
[21:58:43] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=147.1°, current=116.1°, player=(433,919), corner_timer=0.00
[21:58:43] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:43] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1118.294, 518.7671)
[21:58:43] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P3:corner, state=EVADING_GRENADE, target=-138.9°, current=7.7°, player=(433,919), corner_timer=0.25
[21:58:43] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=-19.8°, current=119.0°, player=(433,919), corner_timer=0.00
[21:58:43] [ENEMY] [Enemy2] EVADING_GRENADE: Escaped to safe distance
[21:58:43] [ENEMY] [Enemy2] Warning: No valid flank position (both sides behind walls)
[21:58:43] [ENEMY] [Enemy2] FLANKING started: target=(239.1331, 874.2635), side=left, pos=(352.9073, 651.6304)
[21:58:43] [ENEMY] [Enemy2] State: EVADING_GRENADE -> FLANKING
[21:58:43] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:43] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:43] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:43] [ENEMY] [Enemy2] ROT_CHANGE: P3:corner -> P2:combat_state, state=FLANKING, target=72.2°, current=-27.4°, player=(433,919), corner_timer=0.25
[21:58:43] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=147.5°, current=90.2°, player=(433,919), corner_timer=0.00
[21:58:43] [ENEMY] [Enemy2] GRENADE DANGER: Entering EVADING_GRENADE state from FLANKING
[21:58:43] [ENEMY] [Enemy2] EVADING_GRENADE started: escaping to (103.6166, 610.408)
[21:58:43] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:43] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1118.808, 520.2547)
[21:58:43] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P3:corner, state=EVADING_GRENADE, target=-138.9°, current=-15.1°, player=(433,919), corner_timer=0.23
[21:58:43] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=147.5°, current=147.5°, player=(433,919), corner_timer=0.00
[21:58:43] [ENEMY] [Enemy2] EVADING_GRENADE: Escaped to safe distance
[21:58:43] [ENEMY] [Enemy2] FLANKING started: target=(568.8339, 772.437), side=right, pos=(347.1617, 645.8738)
[21:58:43] [ENEMY] [Enemy2] State: EVADING_GRENADE -> FLANKING
[21:58:43] [ENEMY] [Enemy2] ROT_CHANGE: P3:corner -> P2:combat_state, state=FLANKING, target=71.5°, current=-46.3°, player=(433,919), corner_timer=0.23
[21:58:43] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:43] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:43] [ENEMY] [Enemy2] GRENADE DANGER: Entering EVADING_GRENADE state from FLANKING
[21:58:43] [ENEMY] [Enemy2] EVADING_GRENADE started: escaping to (104.392, 605.5712)
[21:58:43] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=148.0°, current=90.7°, player=(433,919), corner_timer=0.00
[21:58:43] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P3:corner, state=EVADING_GRENADE, target=-138.9°, current=9.7°, player=(433,919), corner_timer=0.22
[21:58:43] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:43] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1119.721, 522.9294)
[21:58:43] [ENEMY] [Enemy2] EVADING_GRENADE: Escaped to safe distance
[21:58:43] [ENEMY] [Enemy2] Warning: No valid flank position (both sides behind walls)
[21:58:43] [ENEMY] [Enemy2] FLANKING started: target=(237.8903, 879.921), side=left, pos=(341.9673, 644.4821)
[21:58:43] [ENEMY] [Enemy2] State: EVADING_GRENADE -> FLANKING
[21:58:43] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=148.0°, current=148.0°, player=(433,919), corner_timer=0.00
[21:58:43] [ENEMY] [Enemy2] ROT_CHANGE: P3:corner -> P2:combat_state, state=FLANKING, target=70.6°, current=-25.4°, player=(433,919), corner_timer=0.22
[21:58:43] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:43] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:43] [ENEMY] [Enemy2] GRENADE DANGER: Entering EVADING_GRENADE state from FLANKING
[21:58:43] [ENEMY] [Enemy2] EVADING_GRENADE started: escaping to (105.216, 600.7214)
[21:58:43] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=148.3°, current=117.3°, player=(433,919), corner_timer=0.00
[21:58:43] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P3:corner, state=EVADING_GRENADE, target=-138.9°, current=-13.2°, player=(433,919), corner_timer=0.20
[21:58:43] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:43] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1120.632, 525.6492)
[21:58:43] [ENEMY] [Enemy2] EVADING_GRENADE: Escaped to safe distance
[21:58:43] [ENEMY] [Enemy2] FLANKING started: target=(564.7485, 768.8007), side=right, pos=(336.3803, 638.7711)
[21:58:43] [ENEMY] [Enemy2] State: EVADING_GRENADE -> FLANKING
[21:58:43] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=148.3°, current=148.3°, player=(433,919), corner_timer=0.00
[21:58:43] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.7°, current=89.6°, player=(433,919), corner_timer=-0.02
[21:58:43] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[21:58:43] [ENEMY] [Enemy2] ROT_CHANGE: P3:corner -> P2:combat_state, state=FLANKING, target=70.0°, current=-44.5°, player=(433,919), corner_timer=0.20
[21:58:43] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:43] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:43] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(433,919), corner_timer=0.30
[21:58:43] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=148.6°, current=117.6°, player=(433,919), corner_timer=0.00
[21:58:43] [ENEMY] [Enemy2] GRENADE DANGER: Entering EVADING_GRENADE state from FLANKING
[21:58:43] [ENEMY] [Enemy2] EVADING_GRENADE started: escaping to (106.788, 592.1454)
[21:58:43] [ENEMY] [Enemy3] GRENADE DANGER: Entering EVADING_GRENADE state from COMBAT
[21:58:43] [ENEMY] [Enemy3] EVADING_GRENADE started: escaping to (1121.515, 528.3323)
[21:58:43] [INFO] [GrenadeBase] EXPLODED at (622.3802, 691.0883)!
[21:58:43] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(622.3802, 691.0883), source=NEUTRAL (FlashbangGrenade), range=2937, listeners=10
[21:58:43] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=0, below_threshold=6
[21:58:43] [ENEMY] [Enemy1] Status: BLINDED applied
[21:58:43] [ENEMY] [Enemy1] Status: STUNNED applied
[21:58:43] [ENEMY] [Enemy2] Status: BLINDED applied
[21:58:43] [ENEMY] [Enemy2] Status: STUNNED applied
[21:58:43] [ENEMY] [Enemy4] Status: BLINDED applied
[21:58:43] [ENEMY] [Enemy4] Status: STUNNED applied
[21:58:43] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P3:corner, state=EVADING_GRENADE, target=-138.9°, current=-8.8°, player=(433,919), corner_timer=0.17
[21:58:43] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=EVADING_GRENADE, target=148.6°, current=148.6°, player=(433,919), corner_timer=0.00
[21:58:43] [ENEMY] [Enemy3] EVADING_GRENADE: Escaped to safe distance
[21:58:43] [ENEMY] [Enemy3] State: EVADING_GRENADE -> COMBAT
[21:58:43] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P2:combat_state, state=COMBAT, target=148.6°, current=148.6°, player=(433,919), corner_timer=0.00
[21:58:43] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:43] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.5°, current=89.5°, player=(433,919), corner_timer=-0.02
[21:58:43] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[21:58:43] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.4°, player=(433,919), corner_timer=0.30
[21:58:44] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:44] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[21:58:44] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.4°, current=89.5°, player=(433,919), corner_timer=-0.02
[21:58:44] [ENEMY] [Enemy7] PATROL corner check: angle 89.5°
[21:58:44] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.5°, current=92.3°, player=(433,919), corner_timer=0.30
[21:58:44] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:44] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.5°, player=(433,919), corner_timer=-0.02
[21:58:44] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[21:58:44] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(433,919), corner_timer=0.30
[21:58:44] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:44] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(433,919), corner_timer=-0.02
[21:58:44] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[21:58:44] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(433,919), corner_timer=0.30
[21:58:45] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:45] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(433,919), corner_timer=-0.02
[21:58:45] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[21:58:45] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(433,919), corner_timer=0.30
[21:58:45] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:45] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(433,919), corner_timer=-0.02
[21:58:45] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[21:58:45] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(433,919), corner_timer=0.30
[21:58:45] [ENEMY] [Enemy3] PURSUING corner check: angle -103.4°
[21:58:45] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:45] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.3°, current=89.4°, player=(433,919), corner_timer=-0.02
[21:58:45] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[21:58:45] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(433,919), corner_timer=0.30
[21:58:46] [ENEMY] [Enemy3] PURSUING corner check: angle -146.2°
[21:58:46] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:46] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=177.2°, current=89.4°, player=(433,919), corner_timer=-0.02
[21:58:46] [ENEMY] [Enemy7] PATROL corner check: angle 89.4°
[21:58:46] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=89.4°, current=92.3°, player=(433,919), corner_timer=0.30
[21:58:46] [ENEMY] [Enemy3] PURSUING corner check: angle 33.8°
[21:58:46] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[21:58:46] [INFO] ------------------------------------------------------------
[21:58:46] [INFO] GAME LOG ENDED: 2026-02-03T21:58:46
[21:58:46] [INFO] ============================================================
