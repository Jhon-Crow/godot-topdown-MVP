[03:39:30] [INFO] ============================================================
[03:39:30] [INFO] GAME LOG STARTED
[03:39:30] [INFO] ============================================================
[03:39:30] [INFO] Timestamp: 2026-02-09T03:39:30
[03:39:30] [INFO] Log file: I:/Загрузки/godot exe/САмонаводящиеся пУЛи/game_log_20260209_033930.txt
[03:39:30] [INFO] Executable: I:/Загрузки/godot exe/САмонаводящиеся пУЛи/Godot-Top-Down-Template.exe
[03:39:30] [INFO] OS: Windows
[03:39:30] [INFO] Debug build: false
[03:39:30] [INFO] Engine version: 4.3-stable (official)
[03:39:30] [INFO] Project: Godot Top-Down Template
[03:39:30] [INFO] ------------------------------------------------------------
[03:39:30] [INFO] [GameManager] GameManager ready
[03:39:30] [INFO] [ScoreManager] ScoreManager ready
[03:39:30] [INFO] [SoundPropagation] SoundPropagation autoload initialized
[03:39:30] [INFO] [ImpactEffects] Scenes loaded: DustEffect, BloodEffect, SparksEffect, BloodDecal
[03:39:30] [INFO] [ImpactEffects] ImpactEffectsManager ready - FULL VERSION with blood effects enabled
[03:39:30] [INFO] [ImpactEffects] Starting particle shader warmup (Issue #343 fix)...
[03:39:30] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:39:30] [INFO] [PenultimateHit] Saturation shader loaded successfully
[03:39:30] [INFO] [PenultimateHit] Starting shader warmup (Issue #343 fix)...
[03:39:30] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
[03:39:30] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
[03:39:30] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
[03:39:30] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
[03:39:30] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
[03:39:30] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:39:30] [INFO] [LastChance] Last chance shader loaded successfully
[03:39:30] [INFO] [LastChance] Starting shader warmup (Issue #343 fix)...
[03:39:30] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
[03:39:30] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
[03:39:30] [INFO] [LastChance]   Sepia intensity: 0.70
[03:39:30] [INFO] [LastChance]   Brightness: 0.60
[03:39:30] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
[03:39:30] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
[03:39:30] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/DefensiveGrenade.tscn
[03:39:30] [INFO] [ExperimentalSettings] ExperimentalSettings initialized - FOV: true, Complex grenades: false, AI prediction: true, Debug: true, Invincibility: true, Realistic visibility: false
[03:39:30] [INFO] [CinemaEffects] CinemaEffectsManager initializing (v5.3 - overlay approach with simplified death circle)...
[03:39:30] [INFO] [CinemaEffects] Scene changed to: LabyrinthLevel
[03:39:30] [INFO] [CinemaEffects] Created effects layer at layer 99
[03:39:30] [INFO] [CinemaEffects] Cinema shader loaded successfully (v5.0 - no screen_texture)
[03:39:30] [INFO] [CinemaEffects] Starting cinema shader warmup (Issue #343 fix)...
[03:39:30] [INFO] [CinemaEffects] Cinema film effect initialized (v5.3) - Configuration:
[03:39:30] [INFO] [CinemaEffects]   Approach: Overlay-based (no screen_texture)
[03:39:30] [INFO] [CinemaEffects]   Grain intensity: 0.15
[03:39:30] [INFO] [CinemaEffects]   Warm tint: 0.12 intensity
[03:39:30] [INFO] [CinemaEffects]   Sunny effect: 0.08 intensity
[03:39:30] [INFO] [CinemaEffects]   Vignette: 0.25 intensity
[03:39:30] [INFO] [CinemaEffects]   Film defects: 1.5% probability
[03:39:30] [INFO] [CinemaEffects]   White specks: 0.70 intensity, 4.0% probability
[03:39:30] [INFO] [CinemaEffects]   Death effects: cigarette burn + expanding spots + end of reel circle (160px, blinks 2x)
[03:39:30] [INFO] [CinemaEffects] Enabling effect after 1 frame(s)...
[03:39:30] [INFO] [GrenadeTimerHelper] Autoload ready
[03:39:30] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[03:39:30] [INFO] [PowerFantasy] Saturation shader loaded successfully
[03:39:30] [INFO] [PowerFantasy] PowerFantasyEffectsManager ready - Configuration:
[03:39:30] [INFO] [PowerFantasy]   Kill effect duration: 300ms
[03:39:30] [INFO] [PowerFantasy]   Grenade effect duration: 2000ms (2.0s)
[03:39:30] [INFO] [ProgressManager] ProgressManager ready, loaded 8 entries
[03:39:30] [INFO] [ReplayManager] ReplayManager ready (C# version loaded and _Ready called)
[03:39:30] [INFO] [FlashbangPlayer] Resetting flashbang player effects (scene change)
[03:39:30] [INFO] [FlashbangPlayer] Flashbang player shader loaded successfully
[03:39:30] [INFO] [FlashbangPlayer] Starting shader warmup (Issue #343 fix)...
[03:39:30] [INFO] [FlashbangPlayer] FlashbangPlayerEffectsManager ready
[03:39:30] [INFO] [FlashbangPlayer]   Duration range: 1.0-5.0 seconds
[03:39:30] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:30] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[03:39:30] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[03:39:30] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[03:39:30] [INFO] [EnemyGrenade] Initialized: 1 grenades
[03:39:30] [ENEMY] [Enemy1] Death animation component initialized
[03:39:30] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:30] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[03:39:30] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[03:39:30] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[03:39:30] [ENEMY] [Enemy2] Death animation component initialized
[03:39:30] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:30] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[03:39:30] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[03:39:30] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[03:39:30] [INFO] [EnemyGrenade] Initialized: 1 grenades
[03:39:30] [ENEMY] [Enemy3] Death animation component initialized
[03:39:30] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:30] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[03:39:30] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[03:39:30] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[03:39:30] [INFO] [EnemyGrenade] Initialized: 1 grenades
[03:39:30] [ENEMY] [Enemy4] Death animation component initialized
[03:39:30] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:30] [INFO] [BloodyFeet:Enemy5] Footprint scene loaded
[03:39:30] [INFO] [BloodyFeet:Enemy5] Found EnemyModel for facing direction
[03:39:30] [INFO] [BloodyFeet:Enemy5] BloodyFeetComponent ready on Enemy5
[03:39:30] [ENEMY] [Enemy5] Death animation component initialized
[03:39:30] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:30] [INFO] [BloodyFeet:Player] Footprint scene loaded
[03:39:30] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[03:39:30] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[03:39:30] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:39:30] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:39:30] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:39:30] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:39:30] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:39:30] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:39:30] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[03:39:30] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:39:30] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[03:39:30] [INFO] [Player.TeleportBracers] No teleport bracers selected in ActiveItemManager
[03:39:30] [INFO] [Player.Homing] No homing bullets selected in ActiveItemManager
[03:39:30] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 2/4
[03:39:30] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:39:30] [INFO] [BloodDecal] Blood puddle created at (640, 360) (added to group)
[03:39:30] [INFO] [LabyrinthLevel] Found Environment/Enemies node with 5 children
[03:39:30] [INFO] [LabyrinthLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:39:30] [INFO] [LabyrinthLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:39:30] [INFO] [LabyrinthLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:39:30] [INFO] [LabyrinthLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:39:30] [INFO] [LabyrinthLevel] Child 'Enemy5': script=true, has_died_signal=true
[03:39:30] [INFO] [LabyrinthLevel] Enemy tracking complete: 5 enemies registered
[03:39:30] [INFO] [LabyrinthLevel] Setting up weapon: makarov_pm
[03:39:30] [INFO] [ScoreManager] Level started with 5 enemies
[03:39:30] [INFO] [LabyrinthLevel] ReplayManager found as C# autoload - verified OK
[03:39:30] [INFO] [LabyrinthLevel] Starting replay recording - Player: Player, Enemies count: 5
[03:39:30] [INFO] [ReplayManager] Replay data cleared
[03:39:30] [INFO] [LabyrinthLevel] Previous replay data cleared
[03:39:30] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[03:39:30] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[03:39:30] [INFO] [ReplayManager] Level: LabyrinthLevel
[03:39:30] [INFO] [ReplayManager] Player: Player (valid: True)
[03:39:30] [INFO] [ReplayManager] Enemies count: 5
[03:39:30] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[03:39:30] [INFO] [ReplayManager]   Enemy 0: Enemy1
[03:39:30] [INFO] [ReplayManager]   Enemy 1: Enemy2
[03:39:30] [INFO] [ReplayManager]   Enemy 2: Enemy3
[03:39:30] [INFO] [ReplayManager]   Enemy 3: Enemy4
[03:39:30] [INFO] [ReplayManager]   Enemy 4: Enemy5
[03:39:30] [INFO] [LabyrinthLevel] Replay recording started successfully
[03:39:30] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=5
[03:39:30] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:30] [INFO] [CinemaEffects] Found player node: Player
[03:39:30] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[03:39:30] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[03:39:30] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
[03:39:30] [ENEMY] [Enemy1] Registered as sound listener
[03:39:30] [ENEMY] [Enemy1] Spawned at (400, 300), hp: 1, behavior: GUARD
[03:39:30] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[03:39:30] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
[03:39:30] [ENEMY] [Enemy2] Registered as sound listener
[03:39:30] [ENEMY] [Enemy2] Spawned at (900, 950), hp: 1, behavior: GUARD
[03:39:30] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[03:39:30] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
[03:39:30] [ENEMY] [Enemy3] Registered as sound listener
[03:39:30] [ENEMY] [Enemy3] Spawned at (1200, 1000), hp: 1, behavior: PATROL
[03:39:30] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[03:39:30] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
[03:39:30] [ENEMY] [Enemy4] Registered as sound listener
[03:39:30] [ENEMY] [Enemy4] Spawned at (1650, 650), hp: 2, behavior: GUARD
[03:39:30] [INFO] [BloodyFeet:Enemy5] Blood detector created and attached to Enemy5
[03:39:30] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
[03:39:30] [ENEMY] [Enemy5] Registered as sound listener
[03:39:30] [ENEMY] [Enemy5] Spawned at (1500, 300), hp: 2, behavior: GUARD
[03:39:30] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[03:39:31] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(150,1000), corner_timer=0.00
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(150,1000), corner_timer=0.00
[03:39:31] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=315.0°, current=0.0°, player=(150,1000), corner_timer=0.00
[03:39:31] [ENEMY] [Enemy5] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=281.3°, current=0.0°, player=(150,1000), corner_timer=0.00
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:39:31] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[03:39:31] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [PenultimateHit] Shader warmup complete in 479 ms
[03:39:31] [INFO] [LastChance] Shader warmup complete in 478 ms
[03:39:31] [INFO] [CinemaEffects] Cinema shader warmup complete in 427 ms
[03:39:31] [INFO] [FlashbangPlayer] Shader warmup complete in 417 ms
[03:39:31] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:39:31] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:39:31] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:39:31] [INFO] [LastChance] Found player: Player
[03:39:31] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:39:31] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:39:31] [INFO] [LastChance] Connected to player Died signal (C#)
[03:39:31] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [ImpactEffects] Particle shader warmup complete: 7 effects warmed up in 763 ms
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[03:39:31] [INFO] [GrenadeBase] Grenade created at (1160.016, 1001.148) (frozen)
[03:39:31] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[03:39:31] [INFO] [GrenadeTimer] Initialized for Frag grenade, effect radius: 225
[03:39:31] [INFO] [GrenadeTimerHelper] Attached GrenadeTimer to FragGrenade (type: Frag)
[03:39:31] [INFO] [EnemyGrenade] Attached C# GrenadeTimer to grenade (type: Frag)
[03:39:31] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[03:39:31] [INFO] [GrenadeTimer] Timer activated! 4 seconds until explosion
[03:39:31] [INFO] [GrenadeBase] LEGACY throw_grenade() called! Direction: (-0.999588, 0.028688), Speed: 1186.5 (unfrozen)
[03:39:31] [INFO] [GrenadeBase] NOTE: Using DRAG-BASED system. If velocity-based is expected, ensure grenade has throw_grenade_velocity_based() method.
[03:39:31] [INFO] [FragGrenade] Grenade thrown (legacy) - impact detection enabled
[03:39:31] [INFO] [GrenadeTimer] Grenade marked as thrown - impact detection enabled
[03:39:31] [INFO] [EnemyGrenade] Enemy grenade thrown! Target: (600, 1000), Distance: 600
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:31] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:32] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:32] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:32] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:32] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:32] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:32] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=5
[03:39:32] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:32] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:32] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:32] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:32] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:32] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:32] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:32] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:32] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:33] [INFO] [PauseMenu] Armory button pressed
[03:39:33] [INFO] [PauseMenu] Creating new armory menu instance
[03:39:33] [INFO] [PauseMenu] armory_menu_scene resource path: res://scenes/ui/ArmoryMenu.tscn
[03:39:33] [INFO] [PauseMenu] Instance created, class: CanvasLayer, name: ArmoryMenu
[03:39:33] [INFO] [PauseMenu] Script attached: res://scripts/ui/armory_menu.gd
[03:39:33] [INFO] [PauseMenu] back_pressed signal exists on instance
[03:39:33] [INFO] [PauseMenu] back_pressed signal connected
[03:39:33] [INFO] [PauseMenu] Armory menu instance added as child, is_inside_tree: true
[03:39:33] [INFO] [PauseMenu] _populate_weapon_grid method exists
[03:39:33] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=5
[03:39:34] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=5
[03:39:35] [INFO] [ReplayManager] Recording frame 240 (4,0s): player_valid=True, enemies=5
[03:39:36] [INFO] [ReplayManager] Recording frame 300 (5,0s): player_valid=True, enemies=5
[03:39:37] [INFO] [ReplayManager] Recording frame 360 (6,0s): player_valid=True, enemies=5
[03:39:38] [INFO] [ReplayManager] Recording frame 420 (7,0s): player_valid=True, enemies=5
[03:39:39] [INFO] [ReplayManager] Recording frame 480 (8,0s): player_valid=True, enemies=5
[03:39:40] [INFO] [ReplayManager] Recording frame 540 (9,0s): player_valid=True, enemies=5
[03:39:41] [INFO] [ReplayManager] Recording frame 600 (10,0s): player_valid=True, enemies=5
[03:39:42] [INFO] [ReplayManager] Recording frame 660 (11,0s): player_valid=True, enemies=5
[03:39:42] [INFO] [GrenadeBase] Collision detected with Hall_WallRight (type: StaticBody2D)
[03:39:42] [INFO] [FragGrenade] Impact detected! Body: Hall_WallRight (type: StaticBody2D), triggering explosion
[03:39:42] [INFO] [FragGrenade] Impact detected - exploding immediately!
[03:39:42] [INFO] [GrenadeBase] EXPLODED at (375.3069, 1024.087)!
[03:39:42] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(375.3069, 1024.087), source=NEUTRAL (FragGrenade), range=2937, listeners=5
[03:39:42] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=5
[03:39:42] [INFO] [FragGrenade] Spawned shrapnel #1 at angle -3.9 degrees
[03:39:42] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 103.4 degrees
[03:39:42] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 192.8 degrees
[03:39:42] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 264.5 degrees
[03:39:42] [INFO] [ImpactEffects] Spawning explosion visual effect at (375.3069, 1024.087) (radius=225) - using shadow-based wall occlusion
[03:39:42] [INFO] [GrenadeTimer] Impact detected with Hall_WallRight - EXPLODING!
[03:39:42] [INFO] [GrenadeTimer] EXPLODED at (375.30685, 1024.0868)!
[03:39:42] [INFO] [GrenadeTimer] Applying frag explosion damage (radius: 225, damage: 99)
[03:39:42] [INFO] [GrenadeTimer] Spawned 4 shrapnel pieces
[03:39:42] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(375.3069, 1024.087), source=NEUTRAL (FragGrenade), range=2938, listeners=5
[03:39:42] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=0, below_threshold=5
[03:39:42] [INFO] [GrenadeTimer] Spawned PointLight2D frag explosion flash at (375.30685, 1024.0868) (shadow-based wall occlusion)
[03:39:42] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:42] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:42] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:42] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:42] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:42] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:42] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:42] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:42] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:42] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:42] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:42] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:42] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:42] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:42] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:42] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:42] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:42] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:42] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:42] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:42] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:42] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:42] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:42] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:42] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:42] [ENEMY] [Enemy3] PATROL corner check: angle -90.0°
[03:39:42] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:42] [ENEMY] [Enemy3] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-90.0°, current=0.0°, player=(150,1000), corner_timer=0.30
[03:39:42] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:42] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:42] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:42] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:43] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:43] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:43] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:43] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:43] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:43] [INFO] [ReplayManager] Recording frame 720 (12,0s): player_valid=True, enemies=5
[03:39:43] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:43] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:43] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:43] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:43] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:43] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:43] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:43] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:43] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:43] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:43] [ENEMY] [Enemy3] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=0.0°, current=-54.4°, player=(150,1000), corner_timer=-0.02
[03:39:43] [ENEMY] [Enemy3] PATROL corner check: angle -90.0°
[03:39:43] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:43] [ENEMY] [Enemy3] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=-90.0°, current=-51.6°, player=(150,1000), corner_timer=0.30
[03:39:43] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:43] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:43] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:43] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:43] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:43] [INFO] [EnemyGrenade] Throw path blocked to (198.1982, 865.0451)
[03:39:44] [INFO] [ReplayManager] Recording frame 780 (13,0s): player_valid=True, enemies=5
[03:39:44] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:39:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:45] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[03:39:45] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[03:39:45] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[03:39:45] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:39:45] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:39:45] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:39:45] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[03:39:45] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[03:39:45] [INFO] [FlashbangPlayer] Resetting flashbang player effects (scene change)
[03:39:45] [ENEMY] [Enemy1] Death animation component initialized
[03:39:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:45] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[03:39:45] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[03:39:45] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[03:39:45] [ENEMY] [Enemy2] Death animation component initialized
[03:39:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:45] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[03:39:45] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[03:39:45] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[03:39:45] [INFO] [EnemyGrenade] Initialized: 1 grenades
[03:39:45] [ENEMY] [Enemy3] Death animation component initialized
[03:39:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:45] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[03:39:45] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[03:39:45] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[03:39:45] [ENEMY] [Enemy4] Death animation component initialized
[03:39:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:45] [INFO] [BloodyFeet:Grenadier] Footprint scene loaded
[03:39:45] [INFO] [BloodyFeet:Grenadier] Found EnemyModel for facing direction
[03:39:45] [INFO] [BloodyFeet:Grenadier] BloodyFeetComponent ready on Grenadier
[03:39:45] [INFO] [EnemyGrenade] Grenade bag built (hard): [Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Defensive]
[03:39:45] [INFO] [EnemyGrenade] Grenadier initialized: 8 grenades in bag
[03:39:45] [ENEMY] [Grenadier] Death animation component initialized
[03:39:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:45] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[03:39:45] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[03:39:45] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[03:39:45] [ENEMY] [Enemy6] Death animation component initialized
[03:39:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:45] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[03:39:45] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[03:39:45] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[03:39:45] [ENEMY] [Enemy7] Death animation component initialized
[03:39:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:45] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[03:39:45] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[03:39:45] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[03:39:45] [ENEMY] [Enemy8] Death animation component initialized
[03:39:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:45] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[03:39:45] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[03:39:45] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[03:39:45] [ENEMY] [Enemy9] Death animation component initialized
[03:39:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:45] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[03:39:45] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[03:39:45] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[03:39:45] [INFO] [EnemyGrenade] Initialized: 1 grenades
[03:39:45] [ENEMY] [Enemy10] Death animation component initialized
[03:39:45] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:45] [INFO] [BloodyFeet:Player] Footprint scene loaded
[03:39:45] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[03:39:45] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[03:39:45] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:39:45] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:39:45] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:39:45] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:39:45] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:39:45] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:39:45] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[03:39:45] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:39:45] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[03:39:45] [INFO] [Player.TeleportBracers] No teleport bracers selected in ActiveItemManager
[03:39:45] [INFO] [Player.Homing] No homing bullets selected in ActiveItemManager
[03:39:45] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 3/4
[03:39:45] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:39:45] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:39:45] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:39:45] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:39:45] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:39:45] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:39:45] [INFO] [BuildingLevel] Child 'Grenadier': script=true, has_died_signal=true
[03:39:45] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:39:45] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:39:45] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:39:45] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:39:45] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:39:45] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:39:45] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[03:39:45] [INFO] [ScoreManager] Level started with 10 enemies
[03:39:45] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[03:39:45] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[03:39:45] [INFO] [ReplayManager] Replay data cleared
[03:39:45] [INFO] [BuildingLevel] Previous replay data cleared
[03:39:45] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[03:39:45] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[03:39:45] [INFO] [ReplayManager] Level: BuildingLevel
[03:39:45] [INFO] [ReplayManager] Player: Player (valid: True)
[03:39:45] [INFO] [ReplayManager] Enemies count: 10
[03:39:45] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[03:39:45] [INFO] [ReplayManager]   Enemy 0: Enemy1
[03:39:45] [INFO] [ReplayManager]   Enemy 1: Enemy2
[03:39:45] [INFO] [ReplayManager]   Enemy 2: Enemy3
[03:39:45] [INFO] [ReplayManager]   Enemy 3: Enemy4
[03:39:45] [INFO] [ReplayManager]   Enemy 4: Grenadier
[03:39:45] [INFO] [ReplayManager]   Enemy 5: Enemy6
[03:39:45] [INFO] [ReplayManager]   Enemy 6: Enemy7
[03:39:45] [INFO] [ReplayManager]   Enemy 7: Enemy8
[03:39:45] [INFO] [ReplayManager]   Enemy 8: Enemy9
[03:39:45] [INFO] [ReplayManager]   Enemy 9: Enemy10
[03:39:45] [INFO] [BuildingLevel] Replay recording started successfully
[03:39:45] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[03:39:45] [INFO] [CinemaEffects] Found player node: Player
[03:39:45] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[03:39:45] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 6)
[03:39:45] [ENEMY] [Enemy1] Registered as sound listener
[03:39:45] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[03:39:45] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[03:39:45] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 7)
[03:39:45] [ENEMY] [Enemy2] Registered as sound listener
[03:39:45] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[03:39:45] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[03:39:45] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 8)
[03:39:45] [ENEMY] [Enemy3] Registered as sound listener
[03:39:45] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[03:39:45] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[03:39:45] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 9)
[03:39:45] [ENEMY] [Enemy4] Registered as sound listener
[03:39:45] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[03:39:45] [INFO] [BloodyFeet:Grenadier] Blood detector created and attached to Grenadier
[03:39:45] [INFO] [SoundPropagation] Registered listener: Grenadier (total: 10)
[03:39:45] [ENEMY] [Grenadier] Registered as sound listener
[03:39:45] [ENEMY] [Grenadier] Spawned at (1700, 350), hp: 2, behavior: GUARD
[03:39:45] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[03:39:45] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 11)
[03:39:45] [ENEMY] [Enemy6] Registered as sound listener
[03:39:45] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[03:39:45] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[03:39:45] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 12)
[03:39:45] [ENEMY] [Enemy7] Registered as sound listener
[03:39:45] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[03:39:45] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[03:39:45] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 13)
[03:39:45] [ENEMY] [Enemy8] Registered as sound listener
[03:39:45] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[03:39:45] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[03:39:45] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 14)
[03:39:45] [ENEMY] [Enemy9] Registered as sound listener
[03:39:45] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[03:39:45] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[03:39:45] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 15)
[03:39:45] [ENEMY] [Enemy10] Registered as sound listener
[03:39:45] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[03:39:45] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[03:39:45] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[03:39:45] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:39:45] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:39:45] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:39:45] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:39:45] [ENEMY] [Grenadier] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:39:45] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:39:45] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:39:45] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:39:45] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:39:45] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[03:39:45] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[03:39:45] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:39:45] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:39:45] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:39:45] [INFO] [LastChance] Found player: Player
[03:39:45] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:39:45] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:39:45] [INFO] [LastChance] Connected to player Died signal (C#)
[03:39:45] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[03:39:46] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[03:39:47] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[03:39:47] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:39:47] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:39:47] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(450,1144), corner_timer=0.30
[03:39:47] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(450,1144), corner_timer=0.30
[03:39:47] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(450,1039), corner_timer=-0.02
[03:39:47] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:39:47] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(450,1039), corner_timer=-0.02
[03:39:47] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:39:47] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(450,1034), corner_timer=0.30
[03:39:47] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(450,1034), corner_timer=0.30
[03:39:48] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(450,967), corner_timer=-0.02
[03:39:48] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:39:48] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(450,966), corner_timer=0.30
[03:39:48] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[03:39:48] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(450,965), corner_timer=-0.02
[03:39:48] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:39:48] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(450,965), corner_timer=0.30
[03:39:48] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(428,965), corner_timer=-0.02
[03:39:48] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:39:48] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(424,965), corner_timer=0.30
[03:39:49] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(350,914), corner_timer=-0.02
[03:39:49] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[03:39:49] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(347,910), corner_timer=0.30
[03:39:49] [INFO] [ReplayManager] Recording frame 240 (4,0s): player_valid=True, enemies=10
[03:39:49] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:39:50] [INFO] [ReplayManager] Recording frame 300 (5,0s): player_valid=True, enemies=10
[03:39:50] [INFO] [PauseMenu] Armory button pressed
[03:39:50] [INFO] [PauseMenu] Creating new armory menu instance
[03:39:50] [INFO] [PauseMenu] armory_menu_scene resource path: res://scenes/ui/ArmoryMenu.tscn
[03:39:50] [INFO] [PauseMenu] Instance created, class: CanvasLayer, name: ArmoryMenu
[03:39:50] [INFO] [PauseMenu] Script attached: res://scripts/ui/armory_menu.gd
[03:39:50] [INFO] [PauseMenu] back_pressed signal exists on instance
[03:39:50] [INFO] [PauseMenu] back_pressed signal connected
[03:39:50] [INFO] [PauseMenu] Armory menu instance added as child, is_inside_tree: true
[03:39:50] [INFO] [PauseMenu] _populate_weapon_grid method exists
[03:39:51] [INFO] [ReplayManager] Recording frame 360 (6,0s): player_valid=True, enemies=10
[03:39:51] [INFO] [ActiveItemManager] Active item changed from None to Homing Bullets
[03:39:51] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:39:51] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:51] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[03:39:51] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[03:39:51] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[03:39:51] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:39:51] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:39:51] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:39:51] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[03:39:51] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[03:39:51] [INFO] [FlashbangPlayer] Resetting flashbang player effects (scene change)
[03:39:51] [ENEMY] [Enemy1] Death animation component initialized
[03:39:51] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:51] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[03:39:51] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[03:39:51] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[03:39:51] [ENEMY] [Enemy2] Death animation component initialized
[03:39:51] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:51] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[03:39:51] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[03:39:51] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[03:39:51] [INFO] [EnemyGrenade] Initialized: 1 grenades
[03:39:51] [ENEMY] [Enemy3] Death animation component initialized
[03:39:51] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:51] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[03:39:51] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[03:39:51] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[03:39:51] [ENEMY] [Enemy4] Death animation component initialized
[03:39:51] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:51] [INFO] [BloodyFeet:Grenadier] Footprint scene loaded
[03:39:51] [INFO] [BloodyFeet:Grenadier] Found EnemyModel for facing direction
[03:39:51] [INFO] [BloodyFeet:Grenadier] BloodyFeetComponent ready on Grenadier
[03:39:51] [INFO] [EnemyGrenade] Grenade bag built (hard): [Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Defensive]
[03:39:51] [INFO] [EnemyGrenade] Grenadier initialized: 8 grenades in bag
[03:39:51] [ENEMY] [Grenadier] Death animation component initialized
[03:39:51] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:51] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[03:39:51] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[03:39:51] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[03:39:51] [ENEMY] [Enemy6] Death animation component initialized
[03:39:51] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:51] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[03:39:51] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[03:39:51] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[03:39:51] [ENEMY] [Enemy7] Death animation component initialized
[03:39:51] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:51] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[03:39:51] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[03:39:51] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[03:39:51] [ENEMY] [Enemy8] Death animation component initialized
[03:39:51] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:51] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[03:39:51] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[03:39:51] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[03:39:51] [ENEMY] [Enemy9] Death animation component initialized
[03:39:51] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:51] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[03:39:51] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[03:39:51] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[03:39:51] [ENEMY] [Enemy10] Death animation component initialized
[03:39:51] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:51] [INFO] [BloodyFeet:Player] Footprint scene loaded
[03:39:51] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[03:39:51] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[03:39:51] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:39:51] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:39:51] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:39:51] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:39:51] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:39:51] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:39:51] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[03:39:51] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:39:51] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[03:39:51] [INFO] [Player.TeleportBracers] No teleport bracers selected in ActiveItemManager
[03:39:51] [INFO] [Player.Homing] Homing activation sound loaded
[03:39:51] [INFO] [Player.Homing] Homing bullets equipped, charges: 6/6
[03:39:51] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 2/4
[03:39:51] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:39:51] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:39:51] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:39:51] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:39:51] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:39:51] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:39:51] [INFO] [BuildingLevel] Child 'Grenadier': script=true, has_died_signal=true
[03:39:51] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:39:51] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:39:51] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:39:51] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:39:51] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:39:51] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:39:51] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[03:39:51] [INFO] [ScoreManager] Level started with 10 enemies
[03:39:51] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[03:39:51] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[03:39:51] [INFO] [ReplayManager] Replay data cleared
[03:39:51] [INFO] [BuildingLevel] Previous replay data cleared
[03:39:51] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[03:39:51] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[03:39:51] [INFO] [ReplayManager] Level: BuildingLevel
[03:39:51] [INFO] [ReplayManager] Player: Player (valid: True)
[03:39:51] [INFO] [ReplayManager] Enemies count: 10
[03:39:51] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[03:39:51] [INFO] [ReplayManager]   Enemy 0: Enemy1
[03:39:51] [INFO] [ReplayManager]   Enemy 1: Enemy2
[03:39:51] [INFO] [ReplayManager]   Enemy 2: Enemy3
[03:39:51] [INFO] [ReplayManager]   Enemy 3: Enemy4
[03:39:51] [INFO] [ReplayManager]   Enemy 4: Grenadier
[03:39:51] [INFO] [ReplayManager]   Enemy 5: Enemy6
[03:39:51] [INFO] [ReplayManager]   Enemy 6: Enemy7
[03:39:51] [INFO] [ReplayManager]   Enemy 7: Enemy8
[03:39:51] [INFO] [ReplayManager]   Enemy 8: Enemy9
[03:39:51] [INFO] [ReplayManager]   Enemy 9: Enemy10
[03:39:51] [INFO] [BuildingLevel] Replay recording started successfully
[03:39:51] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[03:39:51] [INFO] [CinemaEffects] Found player node: Player
[03:39:51] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[03:39:51] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 16)
[03:39:51] [ENEMY] [Enemy1] Registered as sound listener
[03:39:51] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[03:39:51] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[03:39:51] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 17)
[03:39:51] [ENEMY] [Enemy2] Registered as sound listener
[03:39:51] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[03:39:51] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[03:39:51] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 18)
[03:39:51] [ENEMY] [Enemy3] Registered as sound listener
[03:39:51] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[03:39:51] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[03:39:51] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 19)
[03:39:51] [ENEMY] [Enemy4] Registered as sound listener
[03:39:51] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[03:39:51] [INFO] [BloodyFeet:Grenadier] Blood detector created and attached to Grenadier
[03:39:51] [INFO] [SoundPropagation] Registered listener: Grenadier (total: 20)
[03:39:51] [ENEMY] [Grenadier] Registered as sound listener
[03:39:51] [ENEMY] [Grenadier] Spawned at (1700, 350), hp: 2, behavior: GUARD
[03:39:51] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[03:39:51] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 21)
[03:39:51] [ENEMY] [Enemy6] Registered as sound listener
[03:39:51] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[03:39:51] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[03:39:51] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 22)
[03:39:51] [ENEMY] [Enemy7] Registered as sound listener
[03:39:51] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[03:39:51] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[03:39:51] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 23)
[03:39:51] [ENEMY] [Enemy8] Registered as sound listener
[03:39:51] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[03:39:51] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[03:39:51] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 24)
[03:39:51] [ENEMY] [Enemy9] Registered as sound listener
[03:39:51] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[03:39:51] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[03:39:51] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 25)
[03:39:51] [ENEMY] [Enemy10] Registered as sound listener
[03:39:51] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[03:39:51] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[03:39:51] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[03:39:51] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:39:51] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:39:51] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=236.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:39:51] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:39:51] [ENEMY] [Grenadier] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:39:51] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:39:51] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:39:51] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:39:51] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:39:51] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[03:39:51] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[03:39:52] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:39:52] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:39:52] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:39:52] [INFO] [LastChance] Found player: Player
[03:39:52] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:39:52] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:39:52] [INFO] [LastChance] Connected to player Died signal (C#)
[03:39:52] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[03:39:52] [INFO] [Player.Homing] Homing activated! Duration: 1s, charges remaining: 5/6
[03:39:52] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[03:39:53] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:39:53] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:39:53] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(414,1037), corner_timer=0.30
[03:39:53] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(414,1037), corner_timer=0.30
[03:39:53] [INFO] [Player.Homing] Homing effect expired, charges remaining: 5/6
[03:39:53] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(340,964), corner_timer=-0.02
[03:39:53] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:39:53] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(340,964), corner_timer=-0.02
[03:39:53] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:39:53] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(336,960), corner_timer=0.30
[03:39:53] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(336,960), corner_timer=0.30
[03:39:53] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[03:39:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(305.4171, 935.0549), source=PLAYER (MakarovPM), range=1469, listeners=25
[03:39:53] [INFO] [SoundPropagation] Cleaned up 15 invalid listeners
[03:39:53] [ENEMY] [Enemy2] Heard gunshot at (305.4171, 935.0549), source_type=0, intensity=0.02, distance=397
[03:39:53] [ENEMY] [Enemy3] Heard gunshot at (305.4171, 935.0549), source_type=0, intensity=0.01, distance=436
[03:39:53] [ENEMY] [Enemy4] Heard gunshot at (305.4171, 935.0549), source_type=0, intensity=0.01, distance=496
[03:39:53] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[03:39:53] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=104.0°, current=-157.5°, player=(305,929), corner_timer=0.00
[03:39:53] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=155.6°, current=-123.8°, player=(305,929), corner_timer=0.00
[03:39:53] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=176.6°, current=168.8°, player=(305,929), corner_timer=0.00
[03:39:53] [ENEMY] [Enemy1] Memory: medium confidence (0.62) - transitioning to PURSUING
[03:39:53] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[03:39:53] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=91.0°, current=-157.5°, player=(289,913), corner_timer=0.00
[03:39:53] [ENEMY] [Enemy1] PURSUING corner check: angle -50.9°
[03:39:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(271.3391, 899.6703), source=PLAYER (MakarovPM), range=1469, listeners=10
[03:39:53] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=0, below_threshold=4
[03:39:54] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(265,884), corner_timer=-0.02
[03:39:54] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:39:54] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(263,880), corner_timer=0.30
[03:39:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(249.1793, 859.1331), source=PLAYER (MakarovPM), range=1469, listeners=10
[03:39:54] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[03:39:54] [ENEMY] [Enemy1] PURSUING corner check: angle -51.1°
[03:39:54] [INFO] [EnemyGrenade] Unsafe throw distance (162 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:39:54] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[03:39:54] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=RETREATING, target=171.0°, current=121.5°, player=(243,841), corner_timer=0.00
[03:39:54] [INFO] [EnemyGrenade] Unsafe throw distance (159 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:39:54] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=86.6°, current=124.6°, player=(243,841), corner_timer=0.00
[03:39:54] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[03:39:54] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[03:39:54] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(242,841), corner_timer=-0.02
[03:39:54] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:39:54] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(242,841), corner_timer=0.30
[03:39:54] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[03:39:54] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(249.1793, 859.1331), shooter_id=292108110855, bullet_pos=(469.5266, 707.7585)
[03:39:54] [INFO] [Bullet] Using shooter_position, distance=267.333465576172
[03:39:54] [INFO] [Bullet] Distance to wall: 267.333465576172 (18.2032272539781% of viewport)
[03:39:54] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:39:54] [INFO] [Bullet] Caliber cannot penetrate walls
[03:39:54] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[03:39:54] [ENEMY] [Enemy1] PURSUING corner check: angle 153.7°
[03:39:54] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:39:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:54] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[03:39:54] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[03:39:54] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[03:39:54] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:39:54] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:39:54] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:39:54] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[03:39:54] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[03:39:54] [INFO] [FlashbangPlayer] Resetting flashbang player effects (scene change)
[03:39:54] [ENEMY] [Enemy1] Death animation component initialized
[03:39:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:54] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[03:39:54] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[03:39:54] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[03:39:54] [INFO] [EnemyGrenade] Initialized: 1 grenades
[03:39:54] [ENEMY] [Enemy2] Death animation component initialized
[03:39:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:54] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[03:39:54] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[03:39:54] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[03:39:54] [ENEMY] [Enemy3] Death animation component initialized
[03:39:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:54] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[03:39:54] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[03:39:54] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[03:39:54] [ENEMY] [Enemy4] Death animation component initialized
[03:39:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:54] [INFO] [BloodyFeet:Grenadier] Footprint scene loaded
[03:39:54] [INFO] [BloodyFeet:Grenadier] Found EnemyModel for facing direction
[03:39:54] [INFO] [BloodyFeet:Grenadier] BloodyFeetComponent ready on Grenadier
[03:39:54] [INFO] [EnemyGrenade] Grenade bag built (hard): [Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Defensive]
[03:39:54] [INFO] [EnemyGrenade] Grenadier initialized: 8 grenades in bag
[03:39:54] [ENEMY] [Grenadier] Death animation component initialized
[03:39:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:54] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[03:39:54] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[03:39:54] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[03:39:54] [ENEMY] [Enemy6] Death animation component initialized
[03:39:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:54] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[03:39:54] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[03:39:54] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[03:39:54] [ENEMY] [Enemy7] Death animation component initialized
[03:39:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:54] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[03:39:54] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[03:39:54] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[03:39:54] [ENEMY] [Enemy8] Death animation component initialized
[03:39:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:54] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[03:39:54] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[03:39:54] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[03:39:54] [ENEMY] [Enemy9] Death animation component initialized
[03:39:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:54] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[03:39:54] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[03:39:54] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[03:39:54] [ENEMY] [Enemy10] Death animation component initialized
[03:39:54] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:54] [INFO] [BloodyFeet:Player] Footprint scene loaded
[03:39:54] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[03:39:54] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[03:39:54] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:39:54] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:39:54] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:39:54] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:39:54] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:39:54] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:39:54] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[03:39:54] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:39:54] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[03:39:54] [INFO] [Player.TeleportBracers] No teleport bracers selected in ActiveItemManager
[03:39:54] [INFO] [Player.Homing] Homing activation sound loaded
[03:39:54] [INFO] [Player.Homing] Homing bullets equipped, charges: 6/6
[03:39:54] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 2/4
[03:39:54] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:39:54] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:39:54] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:39:54] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:39:54] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:39:54] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:39:54] [INFO] [BuildingLevel] Child 'Grenadier': script=true, has_died_signal=true
[03:39:54] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:39:54] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:39:54] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:39:54] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:39:54] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:39:54] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:39:54] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[03:39:54] [INFO] [ScoreManager] Level started with 10 enemies
[03:39:54] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[03:39:54] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[03:39:54] [INFO] [ReplayManager] Replay data cleared
[03:39:54] [INFO] [BuildingLevel] Previous replay data cleared
[03:39:54] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[03:39:54] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[03:39:54] [INFO] [ReplayManager] Level: BuildingLevel
[03:39:54] [INFO] [ReplayManager] Player: Player (valid: True)
[03:39:54] [INFO] [ReplayManager] Enemies count: 10
[03:39:54] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[03:39:54] [INFO] [ReplayManager]   Enemy 0: Enemy1
[03:39:54] [INFO] [ReplayManager]   Enemy 1: Enemy2
[03:39:54] [INFO] [ReplayManager]   Enemy 2: Enemy3
[03:39:54] [INFO] [ReplayManager]   Enemy 3: Enemy4
[03:39:54] [INFO] [ReplayManager]   Enemy 4: Grenadier
[03:39:54] [INFO] [ReplayManager]   Enemy 5: Enemy6
[03:39:54] [INFO] [ReplayManager]   Enemy 6: Enemy7
[03:39:54] [INFO] [ReplayManager]   Enemy 7: Enemy8
[03:39:54] [INFO] [ReplayManager]   Enemy 8: Enemy9
[03:39:54] [INFO] [ReplayManager]   Enemy 9: Enemy10
[03:39:54] [INFO] [BuildingLevel] Replay recording started successfully
[03:39:54] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[03:39:54] [INFO] [CinemaEffects] Found player node: Player
[03:39:54] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[03:39:54] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[03:39:54] [ENEMY] [Enemy1] Registered as sound listener
[03:39:54] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[03:39:54] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[03:39:54] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[03:39:54] [ENEMY] [Enemy2] Registered as sound listener
[03:39:54] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[03:39:54] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[03:39:54] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[03:39:54] [ENEMY] [Enemy3] Registered as sound listener
[03:39:54] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[03:39:54] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[03:39:54] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[03:39:54] [ENEMY] [Enemy4] Registered as sound listener
[03:39:54] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[03:39:54] [INFO] [BloodyFeet:Grenadier] Blood detector created and attached to Grenadier
[03:39:54] [INFO] [SoundPropagation] Registered listener: Grenadier (total: 15)
[03:39:54] [ENEMY] [Grenadier] Registered as sound listener
[03:39:54] [ENEMY] [Grenadier] Spawned at (1700, 350), hp: 2, behavior: GUARD
[03:39:54] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[03:39:54] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[03:39:54] [ENEMY] [Enemy6] Registered as sound listener
[03:39:54] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[03:39:54] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[03:39:54] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[03:39:54] [ENEMY] [Enemy7] Registered as sound listener
[03:39:54] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[03:39:54] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[03:39:54] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[03:39:54] [ENEMY] [Enemy8] Registered as sound listener
[03:39:54] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[03:39:54] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[03:39:54] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[03:39:54] [ENEMY] [Enemy9] Registered as sound listener
[03:39:54] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[03:39:54] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[03:39:54] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[03:39:54] [ENEMY] [Enemy10] Registered as sound listener
[03:39:54] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[03:39:54] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[03:39:54] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[03:39:54] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:39:54] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:39:54] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:39:54] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:39:54] [ENEMY] [Grenadier] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:39:54] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:39:54] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:39:54] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:39:54] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:39:54] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[03:39:54] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[03:39:54] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:39:54] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:39:54] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:39:54] [INFO] [LastChance] Found player: Player
[03:39:54] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:39:54] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:39:54] [INFO] [LastChance] Connected to player Died signal (C#)
[03:39:54] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[03:39:55] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[03:39:56] [INFO] [Player.Homing] Homing activated! Duration: 1s, charges remaining: 5/6
[03:39:56] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=164.5°, current=123.7°, player=(332,851), corner_timer=0.00
[03:39:56] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[03:39:56] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=165.9°, current=-65.3°, player=(324,844), corner_timer=0.00
[03:39:56] [ENEMY] [Enemy4] Memory: high confidence (0.89) - transitioning to PURSUING
[03:39:56] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[03:39:56] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:39:56] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:39:56] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=-172.5°, current=-101.3°, player=(317,836), corner_timer=0.00
[03:39:56] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(317,836), corner_timer=0.30
[03:39:56] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(317,836), corner_timer=0.30
[03:39:56] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[03:39:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(274.0687, 799.2061), source=PLAYER (MakarovPM), range=1469, listeners=20
[03:39:56] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[03:39:56] [ENEMY] [Enemy1] Heard gunshot at (274.0687, 799.2061), source_type=0, intensity=0.01, distance=450
[03:39:56] [ENEMY] [Enemy2] Heard gunshot at (274.0687, 799.2061), source_type=0, intensity=0.03, distance=279
[03:39:56] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=4, self=0, below_threshold=2
[03:39:56] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=93.3°, current=168.8°, player=(274,793), corner_timer=0.00
[03:39:56] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=117.4°, current=-157.5°, player=(274,793), corner_timer=0.00
[03:39:56] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(269,789), corner_timer=-0.02
[03:39:56] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:39:56] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(269,789), corner_timer=-0.02
[03:39:56] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:39:56] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(269,788), corner_timer=0.30
[03:39:56] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(269,788), corner_timer=0.30
[03:39:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(268.844, 793.9813), source=PLAYER (MakarovPM), range=1469, listeners=10
[03:39:56] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=4, self=0, below_threshold=2
[03:39:56] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=176.2°, current=-134.5°, player=(268,787), corner_timer=0.00
[03:39:56] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[03:39:56] [ENEMY] [Enemy3] Hit: dmg=1, hp=3/3->2/3
[03:39:56] [INFO] [ImpactEffects] spawn_blood_effect called at (536.2335, 770.3423), dir=(0.993614, -0.112834), lethal=false
[03:39:56] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:39:56] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:39:56] [INFO] [ImpactEffects] Blood effect spawned at (536.2335, 770.3423) (scale=0.5)
[03:39:56] [INFO] [FlashbangStatus] Status: STUNNED applied
[03:39:56] [ENEMY] [Enemy4] PURSUING corner check: angle -94.0°
[03:39:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(268.844, 793.9813), source=PLAYER (MakarovPM), range=1469, listeners=10
[03:39:56] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=4, self=0, below_threshold=2
[03:39:56] [INFO] [FlashbangStatus] Status: STUNNED removed
[03:39:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(536.2335, 770.3423), source=ENEMY (Enemy3), range=1469, listeners=10
[03:39:56] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:39:56] [ENEMY] [Enemy3] Hit: dmg=1, hp=2/3->1/3
[03:39:56] [INFO] [ImpactEffects] spawn_blood_effect called at (525.5899, 771.0445), dir=(0.992197, -0.124676), lethal=false
[03:39:56] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:39:56] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:39:56] [INFO] [ImpactEffects] Blood effect spawned at (525.5899, 771.0445) (scale=0.5)
[03:39:56] [INFO] [FlashbangStatus] Status: STUNNED applied
[03:39:56] [INFO] [LastChance] Threat detected: Bullet
[03:39:56] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:39:56] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:39:57] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(268,787), corner_timer=-0.02
[03:39:57] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:39:57] [INFO] [Player] Spawning blood effect at (268.84396, 787.9813), dir=(1, 0), lethal=False (C#)
[03:39:57] [INFO] [ImpactEffects] spawn_blood_effect called at (268.844, 787.9813), dir=(1, 0), lethal=false
[03:39:57] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:39:57] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:39:57] [INFO] [ImpactEffects] Blood effect spawned at (268.844, 787.9813) (scale=1)
[03:39:57] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[03:39:57] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[03:39:57] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[03:39:57] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(268,787), corner_timer=0.30
[03:39:57] [INFO] [FlashbangStatus] Status: STUNNED removed
[03:39:57] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[03:39:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(268.844, 793.9813), source=PLAYER (MakarovPM), range=1469, listeners=10
[03:39:57] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=4, self=0, below_threshold=2
[03:39:57] [INFO] [SoundPropagation] Sound emitted: type=CASING_KICK, pos=(521.3992, 755.0529), source=NEUTRAL (null), range=900, listeners=10
[03:39:57] [ENEMY] [Enemy1] Heard CASING_KICK at (521.3992, 755.0529), intensity=0.02, dist=408
[03:39:57] [ENEMY] [Enemy2] Heard CASING_KICK at (521.3992, 755.0529), intensity=0.05, dist=223
[03:39:57] [ENEMY] [Enemy3] Heard CASING_KICK at (521.3992, 755.0529), intensity=1.00, dist=19
[03:39:57] [ENEMY] [Enemy4] Heard CASING_KICK at (521.3992, 755.0529), intensity=0.10, dist=159
[03:39:57] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
[03:39:57] [INFO] [SoundPropagation] Sound emitted: type=CASING_KICK, pos=(521.2382, 753.2031), source=NEUTRAL (null), range=900, listeners=10
[03:39:57] [ENEMY] [Enemy1] Heard CASING_KICK at (521.2382, 753.2031), intensity=0.02, dist=406
[03:39:57] [ENEMY] [Enemy2] Heard CASING_KICK at (521.2382, 753.2031), intensity=0.05, dist=222
[03:39:57] [ENEMY] [Enemy3] Heard CASING_KICK at (521.2382, 753.2031), intensity=1.00, dist=23
[03:39:57] [ENEMY] [Enemy4] Heard CASING_KICK at (521.2382, 753.2031), intensity=0.10, dist=159
[03:39:57] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
[03:39:57] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[03:39:57] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[03:39:57] [INFO] [SoundPropagation] Sound emitted: type=CASING_KICK, pos=(520.8895, 750.9826), source=NEUTRAL (null), range=900, listeners=10
[03:39:57] [ENEMY] [Enemy1] Heard CASING_KICK at (520.8895, 750.9826), intensity=0.02, dist=403
[03:39:57] [ENEMY] [Enemy2] Heard CASING_KICK at (520.8895, 750.9826), intensity=0.05, dist=220
[03:39:57] [ENEMY] [Enemy3] Heard CASING_KICK at (520.8895, 750.9826), intensity=1.00, dist=27
[03:39:57] [ENEMY] [Enemy4] Heard CASING_KICK at (520.8895, 750.9826), intensity=0.10, dist=159
[03:39:57] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
[03:39:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(532.3226, 775.3508), source=ENEMY (Enemy3), range=1469, listeners=10
[03:39:57] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:39:57] [INFO] [SoundPropagation] Sound emitted: type=CASING_KICK, pos=(520.3439, 748.419), source=NEUTRAL (null), range=900, listeners=10
[03:39:57] [ENEMY] [Enemy1] Heard CASING_KICK at (520.3439, 748.419), intensity=0.02, dist=400
[03:39:57] [ENEMY] [Enemy2] Heard CASING_KICK at (520.3439, 748.419), intensity=0.05, dist=218
[03:39:57] [ENEMY] [Enemy3] Heard CASING_KICK at (520.3439, 748.419), intensity=1.00, dist=32
[03:39:57] [ENEMY] [Enemy4] Heard CASING_KICK at (520.3439, 748.419), intensity=0.10, dist=160
[03:39:57] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
[03:39:57] [INFO] [SoundPropagation] Sound emitted: type=CASING_KICK, pos=(519.6086, 745.5314), source=NEUTRAL (null), range=900, listeners=10
[03:39:57] [ENEMY] [Enemy1] Heard CASING_KICK at (519.6086, 745.5314), intensity=0.02, dist=398
[03:39:57] [ENEMY] [Enemy2] Heard CASING_KICK at (519.6086, 745.5314), intensity=0.05, dist=215
[03:39:57] [ENEMY] [Enemy3] Heard CASING_KICK at (519.6086, 745.5314), intensity=1.00, dist=37
[03:39:57] [ENEMY] [Enemy4] Heard CASING_KICK at (519.6086, 745.5314), intensity=0.10, dist=162
[03:39:57] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
[03:39:57] [INFO] [BloodDecal] Blood puddle created at (588.9637, 776.2871) (added to group)
[03:39:57] [INFO] [Player.Homing] Homing effect expired, charges remaining: 5/6
[03:39:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(539.6827, 778.6987), source=ENEMY (Enemy3), range=1469, listeners=10
[03:39:57] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:39:57] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=-41.2°, current=116.7°, player=(268,787), corner_timer=0.00
[03:39:57] [INFO] [BloodDecal] Blood puddle created at (593.9521, 771.4413) (added to group)
[03:39:57] [INFO] [LastChance] Threat detected: @Area2D@1340
[03:39:57] [INFO] [LastChance] Triggering last chance effect!
[03:39:57] [INFO] [LastChance] Starting last chance effect:
[03:39:57] [INFO] [LastChance]   - Time will be frozen (except player)
[03:39:57] [INFO] [LastChance]   - Duration: 6.00 real seconds
[03:39:57] [INFO] [LastChance]   - Trigger: threat detected
[03:39:57] [INFO] [LastChance]   - Sepia intensity: 0.70
[03:39:57] [INFO] [LastChance]   - Brightness: 0.60
[03:39:57] [INFO] [LastChance] Pushed bullet Bullet from distance 85.4 to 200.0
[03:39:57] [INFO] [LastChance] Pushed bullet @Area2D@1340 from distance 126.1 to 200.0
[03:39:57] [INFO] [LastChance] Pushed 2 threatening bullets away from player
[03:39:57] [INFO] [LastChance] Set player Player and all 27 children to PROCESS_MODE_ALWAYS
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[03:39:57] [INFO] [LastChance] Skipping player node: Player
[03:39:57] [INFO] [LastChance] Froze existing bullet casing: Casing
[03:39:57] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1324
[03:39:57] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1326
[03:39:57] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1328
[03:39:57] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@1333
[03:39:57] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[03:39:57] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[03:39:57] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[03:39:57] [INFO] [BloodDecal] Blood puddle created at (590.4022, 774.8438) (added to group)
[03:39:57] [INFO] [BloodDecal] Blood puddle created at (340.1052, 794.5142) (added to group)
[03:39:57] [INFO] [BloodDecal] Blood puddle created at (679.295, 748.3698) (added to group)
[03:39:57] [INFO] [BloodDecal] Blood puddle created at (635.7935, 773.288) (added to group)
[03:39:57] [INFO] [BloodDecal] Blood puddle created at (631.8833, 735.4247) (added to group)
[03:39:57] [INFO] [BloodDecal] Blood puddle created at (602.889, 766.8558) (added to group)
[03:39:57] [INFO] [BloodDecal] Blood puddle created at (671.7585, 798.3466) (added to group)
[03:39:57] [INFO] [BloodDecal] Blood puddle created at (663.8732, 747.2845) (added to group)
[03:39:57] [INFO] [BloodDecal] Blood puddle created at (325.0066, 816.1162) (added to group)
[03:39:57] [INFO] [BloodDecal] Blood puddle created at (682.7593, 775.5827) (added to group)
[03:39:57] [INFO] [BloodDecal] Blood puddle created at (649.1937, 773.5683) (added to group)
[03:39:57] [INFO] [BloodDecal] Blood puddle created at (677.8429, 820.3958) (added to group)
[03:39:57] [INFO] [BloodDecal] Blood puddle created at (386.9998, 798.4111) (added to group)
[03:39:57] [INFO] [BloodDecal] Blood puddle created at (638.3475, 886.9105) (added to group)
[03:39:57] [INFO] [BloodDecal] Blood puddle created at (616.514, 785.2065) (added to group)
[03:39:57] [INFO] [BloodDecal] Blood puddle created at (415.3872, 783.067) (added to group)
[03:39:57] [INFO] [BloodDecal] Blood puddle created at (425.8572, 768.8796) (added to group)
[03:39:57] [INFO] [BloodDecal] Blood puddle created at (675.762, 872.1371) (added to group)
[03:39:57] [INFO] [BloodDecal] Blood puddle created at (672.7766, 819.0336) (added to group)
[03:39:57] [INFO] [BloodDecal] Blood puddle created at (410.1848, 904.5015) (added to group)
[03:39:57] [INFO] [BloodDecal] Blood puddle created at (495.3846, 895.1778) (added to group)
[03:39:57] [INFO] [BloodDecal] Blood puddle created at (394.5635, 922.5965) (added to group)
[03:39:57] [INFO] [BloodDecal] Blood puddle created at (432.8033, 945.1015) (added to group)
[03:39:57] [INFO] [BloodDecal] Blood puddle created at (380.5525, 854.9431) (added to group)
[03:39:57] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[03:39:57] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:39:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:57] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[03:39:57] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[03:39:57] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[03:39:57] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:39:57] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:39:57] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:39:57] [INFO] [LastChance] All process modes restored
[03:39:57] [INFO] [LastChance] Restored original colors to 5 player sprites
[03:39:57] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[03:39:57] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[03:39:57] [INFO] [FlashbangPlayer] Resetting flashbang player effects (scene change)
[03:39:57] [ENEMY] [Enemy1] Death animation component initialized
[03:39:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:57] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[03:39:57] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[03:39:57] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[03:39:57] [ENEMY] [Enemy2] Death animation component initialized
[03:39:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:57] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[03:39:57] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[03:39:57] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[03:39:57] [ENEMY] [Enemy3] Death animation component initialized
[03:39:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:57] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[03:39:57] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[03:39:57] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[03:39:57] [ENEMY] [Enemy4] Death animation component initialized
[03:39:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:57] [INFO] [BloodyFeet:Grenadier] Footprint scene loaded
[03:39:57] [INFO] [BloodyFeet:Grenadier] Found EnemyModel for facing direction
[03:39:57] [INFO] [BloodyFeet:Grenadier] BloodyFeetComponent ready on Grenadier
[03:39:57] [INFO] [EnemyGrenade] Grenade bag built (hard): [Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Defensive]
[03:39:57] [INFO] [EnemyGrenade] Grenadier initialized: 8 grenades in bag
[03:39:57] [ENEMY] [Grenadier] Death animation component initialized
[03:39:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:57] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[03:39:57] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[03:39:57] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[03:39:57] [ENEMY] [Enemy6] Death animation component initialized
[03:39:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:57] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[03:39:57] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[03:39:57] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[03:39:57] [ENEMY] [Enemy7] Death animation component initialized
[03:39:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:57] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[03:39:57] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[03:39:57] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[03:39:57] [ENEMY] [Enemy8] Death animation component initialized
[03:39:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:57] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[03:39:57] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[03:39:57] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[03:39:57] [ENEMY] [Enemy9] Death animation component initialized
[03:39:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:57] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[03:39:57] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[03:39:57] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[03:39:57] [ENEMY] [Enemy10] Death animation component initialized
[03:39:57] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:39:57] [INFO] [BloodyFeet:Player] Footprint scene loaded
[03:39:57] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[03:39:57] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[03:39:57] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:39:57] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:39:57] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:39:57] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:39:57] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:39:57] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:39:57] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[03:39:57] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:39:57] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[03:39:57] [INFO] [Player.TeleportBracers] No teleport bracers selected in ActiveItemManager
[03:39:57] [INFO] [Player.Homing] Homing activation sound loaded
[03:39:57] [INFO] [Player.Homing] Homing bullets equipped, charges: 6/6
[03:39:57] [INFO] [Player] Ready! Ammo: 9/9, Grenades: 1/3, Health: 4/4
[03:39:57] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:39:57] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:39:57] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:39:57] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:39:57] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:39:57] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:39:57] [INFO] [BuildingLevel] Child 'Grenadier': script=true, has_died_signal=true
[03:39:57] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:39:57] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:39:57] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:39:57] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:39:57] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:39:57] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:39:57] [INFO] [BuildingLevel] Setting up weapon: makarov_pm
[03:39:57] [INFO] [ScoreManager] Level started with 10 enemies
[03:39:57] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[03:39:57] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[03:39:57] [INFO] [ReplayManager] Replay data cleared
[03:39:57] [INFO] [BuildingLevel] Previous replay data cleared
[03:39:57] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[03:39:57] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[03:39:57] [INFO] [ReplayManager] Level: BuildingLevel
[03:39:57] [INFO] [ReplayManager] Player: Player (valid: True)
[03:39:57] [INFO] [ReplayManager] Enemies count: 10
[03:39:57] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[03:39:57] [INFO] [ReplayManager]   Enemy 0: Enemy1
[03:39:57] [INFO] [ReplayManager]   Enemy 1: Enemy2
[03:39:57] [INFO] [ReplayManager]   Enemy 2: Enemy3
[03:39:57] [INFO] [ReplayManager]   Enemy 3: Enemy4
[03:39:57] [INFO] [ReplayManager]   Enemy 4: Grenadier
[03:39:57] [INFO] [ReplayManager]   Enemy 5: Enemy6
[03:39:57] [INFO] [ReplayManager]   Enemy 6: Enemy7
[03:39:57] [INFO] [ReplayManager]   Enemy 7: Enemy8
[03:39:57] [INFO] [ReplayManager]   Enemy 8: Enemy9
[03:39:57] [INFO] [ReplayManager]   Enemy 9: Enemy10
[03:39:57] [INFO] [BuildingLevel] Replay recording started successfully
[03:39:57] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[03:39:57] [INFO] [CinemaEffects] Found player node: Player
[03:39:57] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[03:39:57] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[03:39:57] [ENEMY] [Enemy1] Registered as sound listener
[03:39:57] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[03:39:57] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[03:39:57] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[03:39:57] [ENEMY] [Enemy2] Registered as sound listener
[03:39:57] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[03:39:57] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[03:39:57] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[03:39:57] [ENEMY] [Enemy3] Registered as sound listener
[03:39:57] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[03:39:57] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[03:39:57] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[03:39:57] [ENEMY] [Enemy4] Registered as sound listener
[03:39:57] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[03:39:57] [INFO] [BloodyFeet:Grenadier] Blood detector created and attached to Grenadier
[03:39:57] [INFO] [SoundPropagation] Registered listener: Grenadier (total: 15)
[03:39:57] [ENEMY] [Grenadier] Registered as sound listener
[03:39:57] [ENEMY] [Grenadier] Spawned at (1700, 350), hp: 2, behavior: GUARD
[03:39:57] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[03:39:57] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[03:39:57] [ENEMY] [Enemy6] Registered as sound listener
[03:39:57] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[03:39:57] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[03:39:57] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[03:39:57] [ENEMY] [Enemy7] Registered as sound listener
[03:39:57] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[03:39:57] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[03:39:57] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[03:39:57] [ENEMY] [Enemy8] Registered as sound listener
[03:39:57] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[03:39:57] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[03:39:57] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[03:39:57] [ENEMY] [Enemy9] Registered as sound listener
[03:39:57] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[03:39:57] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[03:39:57] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[03:39:57] [ENEMY] [Enemy10] Registered as sound listener
[03:39:57] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[03:39:57] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[03:39:58] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[03:39:58] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:39:58] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=45.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:39:58] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:39:58] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:39:58] [ENEMY] [Grenadier] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:39:58] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:39:58] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:39:58] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:39:58] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:39:58] [INFO] [Player] Detected weapon: Makarov PM (Pistol pose)
[03:39:58] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[03:39:58] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:39:58] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:39:58] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:39:58] [INFO] [LastChance] Found player: Player
[03:39:58] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:39:58] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:39:58] [INFO] [LastChance] Connected to player Died signal (C#)
[03:39:58] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[03:39:58] [INFO] [PauseMenu] Armory button pressed
[03:39:58] [INFO] [PauseMenu] Creating new armory menu instance
[03:39:58] [INFO] [PauseMenu] armory_menu_scene resource path: res://scenes/ui/ArmoryMenu.tscn
[03:39:58] [INFO] [PauseMenu] Instance created, class: CanvasLayer, name: ArmoryMenu
[03:39:58] [INFO] [PauseMenu] Script attached: res://scripts/ui/armory_menu.gd
[03:39:58] [INFO] [PauseMenu] back_pressed signal exists on instance
[03:39:58] [INFO] [PauseMenu] back_pressed signal connected
[03:39:58] [INFO] [PauseMenu] Armory menu instance added as child, is_inside_tree: true
[03:39:58] [INFO] [PauseMenu] _populate_weapon_grid method exists
[03:39:58] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[03:39:59] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[03:40:00] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[03:40:01] [INFO] [GameManager] Weapon selected: shotgun
[03:40:01] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:40:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:01] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[03:40:01] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[03:40:01] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[03:40:01] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:40:01] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:40:01] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:40:01] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[03:40:01] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[03:40:01] [INFO] [FlashbangPlayer] Resetting flashbang player effects (scene change)
[03:40:01] [ENEMY] [Enemy1] Death animation component initialized
[03:40:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:01] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[03:40:01] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[03:40:01] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[03:40:01] [INFO] [EnemyGrenade] Initialized: 1 grenades
[03:40:01] [ENEMY] [Enemy2] Death animation component initialized
[03:40:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:01] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[03:40:01] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[03:40:01] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[03:40:01] [ENEMY] [Enemy3] Death animation component initialized
[03:40:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:01] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[03:40:01] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[03:40:01] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[03:40:01] [ENEMY] [Enemy4] Death animation component initialized
[03:40:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:01] [INFO] [BloodyFeet:Grenadier] Footprint scene loaded
[03:40:01] [INFO] [BloodyFeet:Grenadier] Found EnemyModel for facing direction
[03:40:01] [INFO] [BloodyFeet:Grenadier] BloodyFeetComponent ready on Grenadier
[03:40:01] [INFO] [EnemyGrenade] Grenade bag built (hard): [Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Defensive]
[03:40:01] [INFO] [EnemyGrenade] Grenadier initialized: 8 grenades in bag
[03:40:01] [ENEMY] [Grenadier] Death animation component initialized
[03:40:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:01] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[03:40:01] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[03:40:01] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[03:40:01] [ENEMY] [Enemy6] Death animation component initialized
[03:40:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:01] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[03:40:01] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[03:40:01] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[03:40:01] [ENEMY] [Enemy7] Death animation component initialized
[03:40:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:01] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[03:40:01] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[03:40:01] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[03:40:01] [ENEMY] [Enemy8] Death animation component initialized
[03:40:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:01] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[03:40:01] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[03:40:01] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[03:40:01] [ENEMY] [Enemy9] Death animation component initialized
[03:40:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:01] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[03:40:01] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[03:40:01] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[03:40:01] [ENEMY] [Enemy10] Death animation component initialized
[03:40:01] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:01] [INFO] [BloodyFeet:Player] Footprint scene loaded
[03:40:01] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[03:40:01] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[03:40:01] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:40:01] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:40:01] [INFO] [Player.Weapon] GameManager weapon selection: shotgun (Shotgun)
[03:40:01] [INFO] [Player.Weapon] Removed default MakarovPM
[03:40:01] [INFO] [Player.Weapon] Equipped Shotgun (ammo: 0/8)
[03:40:01] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:40:01] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:40:01] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:40:01] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:40:01] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[03:40:01] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:40:01] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[03:40:01] [INFO] [Player.TeleportBracers] No teleport bracers selected in ActiveItemManager
[03:40:01] [INFO] [Player.Homing] Homing activation sound loaded
[03:40:01] [INFO] [Player.Homing] Homing bullets equipped, charges: 6/6
[03:40:01] [INFO] [Player] Ready! Ammo: 0/8, Grenades: 1/3, Health: 4/4
[03:40:01] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:40:01] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:40:01] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:40:01] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:40:01] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:40:01] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:40:01] [INFO] [BuildingLevel] Child 'Grenadier': script=true, has_died_signal=true
[03:40:01] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:40:01] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:40:01] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:40:01] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:40:01] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:40:01] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:40:01] [INFO] [BuildingLevel] Setting up weapon: shotgun
[03:40:01] [INFO] [BuildingLevel] Shotgun already equipped by C# Player - skipping GDScript weapon swap
[03:40:01] [INFO] [ScoreManager] Level started with 10 enemies
[03:40:01] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[03:40:01] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[03:40:01] [INFO] [ReplayManager] Replay data cleared
[03:40:01] [INFO] [BuildingLevel] Previous replay data cleared
[03:40:01] [INFO] [ReplayManager] Detected player weapon: Shotgun
[03:40:01] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[03:40:01] [INFO] [ReplayManager] Level: BuildingLevel
[03:40:01] [INFO] [ReplayManager] Player: Player (valid: True)
[03:40:01] [INFO] [ReplayManager] Enemies count: 10
[03:40:01] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/shotgun_topdown.png
[03:40:01] [INFO] [ReplayManager]   Enemy 0: Enemy1
[03:40:01] [INFO] [ReplayManager]   Enemy 1: Enemy2
[03:40:01] [INFO] [ReplayManager]   Enemy 2: Enemy3
[03:40:01] [INFO] [ReplayManager]   Enemy 3: Enemy4
[03:40:01] [INFO] [ReplayManager]   Enemy 4: Grenadier
[03:40:01] [INFO] [ReplayManager]   Enemy 5: Enemy6
[03:40:01] [INFO] [ReplayManager]   Enemy 6: Enemy7
[03:40:01] [INFO] [ReplayManager]   Enemy 7: Enemy8
[03:40:01] [INFO] [ReplayManager]   Enemy 8: Enemy9
[03:40:01] [INFO] [ReplayManager]   Enemy 9: Enemy10
[03:40:01] [INFO] [BuildingLevel] Replay recording started successfully
[03:40:01] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[03:40:01] [INFO] [CinemaEffects] Found player node: Player
[03:40:01] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[03:40:01] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[03:40:01] [ENEMY] [Enemy1] Registered as sound listener
[03:40:01] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[03:40:01] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[03:40:01] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[03:40:01] [ENEMY] [Enemy2] Registered as sound listener
[03:40:01] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[03:40:01] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[03:40:01] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[03:40:01] [ENEMY] [Enemy3] Registered as sound listener
[03:40:01] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[03:40:01] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[03:40:01] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[03:40:01] [ENEMY] [Enemy4] Registered as sound listener
[03:40:01] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[03:40:01] [INFO] [BloodyFeet:Grenadier] Blood detector created and attached to Grenadier
[03:40:01] [INFO] [SoundPropagation] Registered listener: Grenadier (total: 25)
[03:40:01] [ENEMY] [Grenadier] Registered as sound listener
[03:40:01] [ENEMY] [Grenadier] Spawned at (1700, 350), hp: 2, behavior: GUARD
[03:40:01] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[03:40:01] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[03:40:01] [ENEMY] [Enemy6] Registered as sound listener
[03:40:01] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[03:40:01] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[03:40:01] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[03:40:01] [ENEMY] [Enemy7] Registered as sound listener
[03:40:01] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[03:40:01] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[03:40:01] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[03:40:01] [ENEMY] [Enemy8] Registered as sound listener
[03:40:01] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[03:40:01] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[03:40:01] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[03:40:01] [ENEMY] [Enemy9] Registered as sound listener
[03:40:01] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[03:40:01] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[03:40:01] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[03:40:01] [ENEMY] [Enemy10] Registered as sound listener
[03:40:01] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[03:40:01] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[03:40:01] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[03:40:01] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:01] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:01] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=281.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:01] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:01] [ENEMY] [Grenadier] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:01] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:01] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:01] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:01] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:40:01] [INFO] [Player] Detected weapon: Shotgun (Shotgun pose)
[03:40:01] [INFO] [Player] Applied Shotgun arm pose: Left=(21, 6), Right=(-1, 6)
[03:40:01] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:40:01] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:40:01] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:40:01] [INFO] [LastChance] Found player: Player
[03:40:01] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:40:01] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:40:01] [INFO] [LastChance] Connected to player Died signal (C#)
[03:40:01] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[03:40:02] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[03:40:02] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:40:02] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:40:02] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(294,845), corner_timer=0.30
[03:40:02] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(294,845), corner_timer=0.30
[03:40:02] [INFO] [Player.Homing] Homing activated! Duration: 1s, charges remaining: 5/6
[03:40:03] [ENEMY] [Enemy1] Player ammo empty: false -> true
[03:40:03] [ENEMY] [Enemy2] Player ammo empty: false -> true
[03:40:03] [ENEMY] [Enemy3] Player ammo empty: false -> true
[03:40:03] [ENEMY] [Enemy4] Player ammo empty: false -> true
[03:40:03] [ENEMY] [Grenadier] Player ammo empty: false -> true
[03:40:03] [ENEMY] [Enemy6] Player ammo empty: false -> true
[03:40:03] [ENEMY] [Enemy7] Player ammo empty: false -> true
[03:40:03] [ENEMY] [Enemy8] Player ammo empty: false -> true
[03:40:03] [ENEMY] [Enemy9] Player ammo empty: false -> true
[03:40:03] [ENEMY] [Enemy10] Player ammo empty: false -> true
[03:40:03] [INFO] [SoundPropagation] Sound emitted: type=EMPTY_CLICK, pos=(294.4362, 783.6029), source=PLAYER (Player), range=600, listeners=30
[03:40:03] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
[03:40:03] [ENEMY] [Enemy1] Heard player EMPTY_CLICK at (294.4362, 783.6029), intensity=0.01, distance=434
[03:40:03] [ENEMY] [Enemy1] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[03:40:03] [ENEMY] [Enemy2] Heard player EMPTY_CLICK at (294.4362, 783.6029), intensity=0.04, distance=256
[03:40:03] [ENEMY] [Enemy2] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[03:40:03] [ENEMY] [Enemy3] Heard player EMPTY_CLICK at (294.4362, 783.6029), intensity=0.02, distance=407
[03:40:03] [ENEMY] [Enemy3] Vulnerability sound triggered pursuit - transitioning from IDLE to PURSUING
[03:40:03] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=6, self=0, below_threshold=1
[03:40:03] [INFO] [Shotgun.FIX#212] Firing 16 pellets with 15° spread at pos=(294.4362, 783.6029)
[03:40:03] [INFO] [Shotgun.FIX#212] Normal pellet 1/16: extraOffset=-3,2, distance=48,8px, pos=(340.8334, 768.3788)
[03:40:03] [INFO] [Shotgun.FIX#212] Normal pellet 2/16: extraOffset=10,4, distance=62,4px, pos=(354.67688, 767.1692)
[03:40:03] [INFO] [Shotgun.FIX#212] Normal pellet 3/16: extraOffset=1,6, distance=53,6px, pos=(346.08344, 769.15424)
[03:40:03] [INFO] [Shotgun.FIX#212] Normal pellet 4/16: extraOffset=-7,9, distance=44,1px, pos=(336.9927, 771.9885)
[03:40:03] [INFO] [Shotgun.FIX#212] Normal pellet 5/16: extraOffset=-7,9, distance=44,1px, pos=(337.21387, 772.99976)
[03:40:03] [INFO] [Shotgun.FIX#212] Normal pellet 6/16: extraOffset=3,1, distance=55,1px, pos=(348.26184, 771.81006)
[03:40:03] [INFO] [Shotgun.FIX#212] Normal pellet 7/16: extraOffset=-10,8, distance=41,2px, pos=(334.69333, 774.8341)
[03:40:03] [INFO] [Shotgun.FIX#212] Normal pellet 8/16: extraOffset=0,7, distance=52,7px, pos=(346.40958, 774.7218)
[03:40:03] [INFO] [Shotgun.FIX#212] Normal pellet 9/16: extraOffset=9,8, distance=61,8px, pos=(355.46585, 773.66425)
[03:40:03] [INFO] [Shotgun.FIX#212] Normal pellet 10/16: extraOffset=7,8, distance=59,8px, pos=(353.6903, 775.34216)
[03:40:03] [INFO] [Shotgun.FIX#212] Normal pellet 11/16: extraOffset=12,4, distance=64,4px, pos=(358.255, 774.99896)
[03:40:03] [INFO] [Shotgun.FIX#212] Normal pellet 12/16: extraOffset=-13,2, distance=38,8px, pos=(333.00452, 779.12225)
[03:40:03] [INFO] [Shotgun.FIX#212] Normal pellet 13/16: extraOffset=4,5, distance=56,5px, pos=(350.6016, 777.8191)
[03:40:03] [INFO] [Shotgun.FIX#212] Normal pellet 14/16: extraOffset=8,5, distance=60,5px, pos=(354.76862, 779.23737)
[03:40:03] [INFO] [Shotgun.FIX#212] Normal pellet 15/16: extraOffset=11,9, distance=63,9px, pos=(358.15088, 778.3692)
[03:40:03] [INFO] [Shotgun.FIX#212] Normal pellet 16/16: extraOffset=-1,5, distance=50,5px, pos=(344.90842, 781.71326)
[03:40:03] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(294.4362, 783.6029), source=PLAYER (Shotgun), range=1469, listeners=10
[03:40:03] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[03:40:03] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=90.7°, current=-33.8°, player=(294,783), corner_timer=0.00
[03:40:03] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=434), can_see=false
[03:40:03] [ENEMY] [Enemy1] Pursuing vulnerability sound at (294.4362, 783.6029), distance=434
[03:40:03] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=114.3°, current=-67.5°, player=(294,783), corner_timer=0.00
[03:40:03] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=256), can_see=false
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (256 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [ENEMY] [Enemy2] Pursuing vulnerability sound at (294.4362, 783.6029), distance=256
[03:40:03] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=175.3°, current=-78.7°, player=(294,783), corner_timer=0.00
[03:40:03] [ENEMY] [Enemy3] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=407), can_see=false
[03:40:03] [ENEMY] [Enemy3] Pursuing vulnerability sound at (294.4362, 783.6029), distance=407
[03:40:03] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=519), can_see=false
[03:40:03] [ENEMY] [Grenadier] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1471), can_see=false
[03:40:03] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1689), can_see=false
[03:40:03] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(294,783), corner_timer=-0.02
[03:40:03] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1390), can_see=false
[03:40:03] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:40:03] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1738), can_see=false
[03:40:03] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1961), can_see=false
[03:40:03] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(294,783), corner_timer=-0.02
[03:40:03] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1209), can_see=false
[03:40:03] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (255 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(294,783), corner_timer=0.30
[03:40:03] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(294,783), corner_timer=0.30
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (253 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (251 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (250 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (249 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (247 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [ENEMY] [Enemy3] Hit: dmg=1, hp=3/3->2/3
[03:40:03] [INFO] [ImpactEffects] spawn_blood_effect called at (662.7941, 753.0826), dir=(1, 0), lethal=false
[03:40:03] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:40:03] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:40:03] [INFO] [ImpactEffects] Blood effect spawned at (662.7941, 753.0826) (scale=1)
[03:40:03] [ENEMY] [Enemy3] Hit: dmg=1, hp=2/3->1/3
[03:40:03] [INFO] [ImpactEffects] spawn_blood_effect called at (662.7941, 753.0826), dir=(1, 0), lethal=false
[03:40:03] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:40:03] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:40:03] [INFO] [ImpactEffects] Blood effect spawned at (662.7941, 753.0826) (scale=1)
[03:40:03] [ENEMY] [Enemy3] Hit: dmg=1, hp=1/3->0/3
[03:40:03] [INFO] [ImpactEffects] spawn_blood_effect called at (662.7941, 753.0826), dir=(1, 0), lethal=true
[03:40:03] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:40:03] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[03:40:03] [INFO] [ImpactEffects] Blood effect spawned at (662.7941, 753.0826) (scale=1.5)
[03:40:03] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[03:40:03] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[03:40:03] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[03:40:03] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[03:40:03] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[03:40:03] [ENEMY] [Enemy3] Death animation started with hit direction: (1, 0)
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (246 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (245 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (244 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (244 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (243 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (243 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (242 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (242 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (241 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (241 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (241 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (241 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (241 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (241 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (241 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (241 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.1°, player=(294,782), corner_timer=-0.00
[03:40:03] [ENEMY] [Enemy10] PATROL corner check: angle 7.2°
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (242 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.2°, current=16.2°, player=(294,782), corner_timer=0.30
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (243 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (244 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (243 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [BloodDecal] Blood puddle created at (713.391, 792.298) (added to group)
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (242 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (241 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [BloodDecal] Blood puddle created at (706.1595, 768.7843) (added to group)
[03:40:03] [INFO] [BloodDecal] Blood puddle created at (747.978, 800.4417) (added to group)
[03:40:03] [INFO] [BloodDecal] Blood puddle created at (759.2847, 787.7054) (added to group)
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (240 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (239 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [BloodDecal] Blood puddle created at (768.0345, 766.0963) (added to group)
[03:40:03] [INFO] [BloodDecal] Blood puddle created at (741.4658, 746.0027) (added to group)
[03:40:03] [INFO] [BloodDecal] Blood puddle created at (760.1216, 730.2714) (added to group)
[03:40:03] [INFO] [BloodDecal] Blood puddle created at (739.2631, 753.2456) (added to group)
[03:40:03] [ENEMY] [Enemy1] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=361), can_see=false
[03:40:03] [ENEMY] [Enemy2] Player vulnerable (ammo_empty) but cannot attack: close=true (dist=243), can_see=false
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (243 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [ENEMY] [Enemy4] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=519), can_see=false
[03:40:03] [ENEMY] [Grenadier] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1471), can_see=false
[03:40:03] [ENEMY] [Enemy6] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1689), can_see=false
[03:40:03] [ENEMY] [Enemy7] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1409), can_see=false
[03:40:03] [ENEMY] [Enemy8] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1739), can_see=false
[03:40:03] [ENEMY] [Enemy9] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1962), can_see=false
[03:40:03] [ENEMY] [Enemy10] Player vulnerable (ammo_empty) but cannot attack: close=false (dist=1198), can_see=false
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (247 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (250 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (253 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [BloodDecal] Blood puddle created at (776.9308, 756.0759) (added to group)
[03:40:03] [INFO] [BloodDecal] Blood puddle created at (722.0932, 769.4053) (added to group)
[03:40:03] [INFO] [BloodDecal] Blood puddle created at (786.8658, 763.801) (added to group)
[03:40:03] [INFO] [BloodDecal] Blood puddle created at (739.6509, 766.5639) (added to group)
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (255 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [BloodDecal] Blood puddle created at (748.861, 763.4453) (added to group)
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (260 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (261 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [BloodDecal] Blood puddle created at (799.5778, 749.0191) (added to group)
[03:40:03] [INFO] [BloodDecal] Blood puddle created at (745.912, 807.7734) (added to group)
[03:40:03] [INFO] [BloodDecal] Blood puddle created at (792.3477, 817.0851) (added to group)
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (257 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (254 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [BloodDecal] Blood puddle created at (779.7043, 806.1407) (added to group)
[03:40:03] [INFO] [BloodDecal] Blood puddle created at (807.4178, 761.3312) (added to group)
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (258 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (256 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [ENEMY] [Enemy3] Ragdoll activated
[03:40:03] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[03:40:03] [INFO] [BloodDecal] Blood puddle created at (778.3805, 798.8786) (added to group)
[03:40:03] [INFO] [BloodDecal] Blood puddle created at (803.5414, 739.2118) (added to group)
[03:40:03] [INFO] [BloodDecal] Blood puddle created at (730.6558, 773.6722) (added to group)
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (253 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:03] [INFO] [EnemyGrenade] Unsafe throw distance (251 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:04] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:40:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:04] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[03:40:04] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[03:40:04] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[03:40:04] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:40:04] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:40:04] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:40:04] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[03:40:04] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[03:40:04] [INFO] [FlashbangPlayer] Resetting flashbang player effects (scene change)
[03:40:04] [ENEMY] [Enemy1] Death animation component initialized
[03:40:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:04] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[03:40:04] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[03:40:04] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[03:40:04] [ENEMY] [Enemy2] Death animation component initialized
[03:40:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:04] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[03:40:04] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[03:40:04] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[03:40:04] [ENEMY] [Enemy3] Death animation component initialized
[03:40:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:04] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[03:40:04] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[03:40:04] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[03:40:04] [ENEMY] [Enemy4] Death animation component initialized
[03:40:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:04] [INFO] [BloodyFeet:Grenadier] Footprint scene loaded
[03:40:04] [INFO] [BloodyFeet:Grenadier] Found EnemyModel for facing direction
[03:40:04] [INFO] [BloodyFeet:Grenadier] BloodyFeetComponent ready on Grenadier
[03:40:04] [INFO] [EnemyGrenade] Grenade bag built (hard): [Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Defensive]
[03:40:04] [INFO] [EnemyGrenade] Grenadier initialized: 8 grenades in bag
[03:40:04] [ENEMY] [Grenadier] Death animation component initialized
[03:40:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:04] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[03:40:04] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[03:40:04] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[03:40:04] [ENEMY] [Enemy6] Death animation component initialized
[03:40:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:04] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[03:40:04] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[03:40:04] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[03:40:04] [ENEMY] [Enemy7] Death animation component initialized
[03:40:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:04] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[03:40:04] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[03:40:04] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[03:40:04] [ENEMY] [Enemy8] Death animation component initialized
[03:40:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:04] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[03:40:04] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[03:40:04] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[03:40:04] [ENEMY] [Enemy9] Death animation component initialized
[03:40:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:04] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[03:40:04] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[03:40:04] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[03:40:04] [INFO] [EnemyGrenade] Initialized: 1 grenades
[03:40:04] [ENEMY] [Enemy10] Death animation component initialized
[03:40:04] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:04] [INFO] [BloodyFeet:Player] Footprint scene loaded
[03:40:04] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[03:40:04] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[03:40:04] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:40:04] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:40:04] [INFO] [Player.Weapon] GameManager weapon selection: shotgun (Shotgun)
[03:40:04] [INFO] [Player.Weapon] Removed default MakarovPM
[03:40:04] [INFO] [Player.Weapon] Equipped Shotgun (ammo: 0/8)
[03:40:04] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:40:04] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:40:04] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:40:04] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:40:04] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[03:40:04] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:40:04] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[03:40:04] [INFO] [Player.TeleportBracers] No teleport bracers selected in ActiveItemManager
[03:40:04] [INFO] [Player.Homing] Homing activation sound loaded
[03:40:04] [INFO] [Player.Homing] Homing bullets equipped, charges: 6/6
[03:40:04] [INFO] [Player] Ready! Ammo: 0/8, Grenades: 1/3, Health: 4/4
[03:40:04] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:40:04] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:40:04] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:40:04] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:40:04] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:40:04] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:40:04] [INFO] [BuildingLevel] Child 'Grenadier': script=true, has_died_signal=true
[03:40:04] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:40:04] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:40:04] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:40:04] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:40:04] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:40:04] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:40:04] [INFO] [BuildingLevel] Setting up weapon: shotgun
[03:40:04] [INFO] [BuildingLevel] Shotgun already equipped by C# Player - skipping GDScript weapon swap
[03:40:04] [INFO] [ScoreManager] Level started with 10 enemies
[03:40:04] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[03:40:04] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[03:40:04] [INFO] [ReplayManager] Replay data cleared
[03:40:04] [INFO] [BuildingLevel] Previous replay data cleared
[03:40:04] [INFO] [ReplayManager] Detected player weapon: Shotgun
[03:40:04] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[03:40:04] [INFO] [ReplayManager] Level: BuildingLevel
[03:40:04] [INFO] [ReplayManager] Player: Player (valid: True)
[03:40:04] [INFO] [ReplayManager] Enemies count: 10
[03:40:04] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/shotgun_topdown.png
[03:40:04] [INFO] [ReplayManager]   Enemy 0: Enemy1
[03:40:04] [INFO] [ReplayManager]   Enemy 1: Enemy2
[03:40:04] [INFO] [ReplayManager]   Enemy 2: Enemy3
[03:40:04] [INFO] [ReplayManager]   Enemy 3: Enemy4
[03:40:04] [INFO] [ReplayManager]   Enemy 4: Grenadier
[03:40:04] [INFO] [ReplayManager]   Enemy 5: Enemy6
[03:40:04] [INFO] [ReplayManager]   Enemy 6: Enemy7
[03:40:04] [INFO] [ReplayManager]   Enemy 7: Enemy8
[03:40:04] [INFO] [ReplayManager]   Enemy 8: Enemy9
[03:40:04] [INFO] [ReplayManager]   Enemy 9: Enemy10
[03:40:04] [INFO] [BuildingLevel] Replay recording started successfully
[03:40:04] [INFO] [BloodDecal] Blood puddle created at (741.238, 790.1335) (added to group)
[03:40:04] [INFO] [BloodDecal] Blood puddle created at (761.1489, 768.2249) (added to group)
[03:40:04] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[03:40:04] [INFO] [CinemaEffects] Found player node: Player
[03:40:04] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[03:40:04] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[03:40:04] [ENEMY] [Enemy1] Registered as sound listener
[03:40:04] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[03:40:04] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[03:40:04] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[03:40:04] [ENEMY] [Enemy2] Registered as sound listener
[03:40:04] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[03:40:04] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[03:40:04] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[03:40:04] [ENEMY] [Enemy3] Registered as sound listener
[03:40:04] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[03:40:04] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[03:40:04] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[03:40:04] [ENEMY] [Enemy4] Registered as sound listener
[03:40:04] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 3, behavior: GUARD
[03:40:04] [INFO] [BloodyFeet:Grenadier] Blood detector created and attached to Grenadier
[03:40:04] [INFO] [SoundPropagation] Registered listener: Grenadier (total: 14)
[03:40:04] [ENEMY] [Grenadier] Registered as sound listener
[03:40:04] [ENEMY] [Grenadier] Spawned at (1700, 350), hp: 2, behavior: GUARD
[03:40:04] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[03:40:04] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[03:40:04] [ENEMY] [Enemy6] Registered as sound listener
[03:40:04] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[03:40:04] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[03:40:04] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[03:40:04] [ENEMY] [Enemy7] Registered as sound listener
[03:40:04] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[03:40:04] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[03:40:04] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[03:40:04] [ENEMY] [Enemy8] Registered as sound listener
[03:40:04] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[03:40:04] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[03:40:04] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[03:40:04] [ENEMY] [Enemy9] Registered as sound listener
[03:40:04] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[03:40:04] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[03:40:04] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[03:40:04] [ENEMY] [Enemy10] Registered as sound listener
[03:40:04] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[03:40:04] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[03:40:04] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[03:40:04] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:04] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:04] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:04] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:04] [ENEMY] [Grenadier] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:04] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:04] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=78.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:04] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:04] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:40:04] [INFO] [Player] Detected weapon: Shotgun (Shotgun pose)
[03:40:04] [INFO] [Player] Applied Shotgun arm pose: Left=(21, 6), Right=(-1, 6)
[03:40:04] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:40:04] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:40:04] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:40:04] [INFO] [LastChance] Found player: Player
[03:40:04] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:40:04] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:40:04] [INFO] [LastChance] Connected to player Died signal (C#)
[03:40:04] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[03:40:04] [INFO] [BloodDecal] Blood puddle created at (805.2827, 767.1176) (added to group)
[03:40:04] [INFO] [BloodDecal] Blood puddle created at (779.4091, 790.7156) (added to group)
[03:40:04] [INFO] [BloodDecal] Blood puddle created at (760.0171, 778.4756) (added to group)
[03:40:04] [INFO] [BloodDecal] Blood puddle created at (751.5558, 801.4236) (added to group)
[03:40:04] [INFO] [BloodDecal] Blood puddle created at (747.0074, 794.3983) (added to group)
[03:40:05] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[03:40:05] [INFO] [PauseMenu] Armory button pressed
[03:40:05] [INFO] [PauseMenu] Creating new armory menu instance
[03:40:05] [INFO] [PauseMenu] armory_menu_scene resource path: res://scenes/ui/ArmoryMenu.tscn
[03:40:05] [INFO] [PauseMenu] Instance created, class: CanvasLayer, name: ArmoryMenu
[03:40:05] [INFO] [PauseMenu] Script attached: res://scripts/ui/armory_menu.gd
[03:40:05] [INFO] [PauseMenu] back_pressed signal exists on instance
[03:40:05] [INFO] [PauseMenu] back_pressed signal connected
[03:40:05] [INFO] [PauseMenu] Armory menu instance added as child, is_inside_tree: true
[03:40:05] [INFO] [PauseMenu] _populate_weapon_grid method exists
[03:40:06] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[03:40:06] [INFO] [GameManager] Weapon selected: mini_uzi
[03:40:06] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:40:06] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:06] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[03:40:06] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[03:40:06] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[03:40:06] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:40:06] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:40:06] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:40:06] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[03:40:06] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[03:40:06] [INFO] [FlashbangPlayer] Resetting flashbang player effects (scene change)
[03:40:06] [ENEMY] [Enemy1] Death animation component initialized
[03:40:06] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:06] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[03:40:06] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[03:40:06] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[03:40:06] [ENEMY] [Enemy2] Death animation component initialized
[03:40:06] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:06] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[03:40:06] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[03:40:06] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[03:40:06] [ENEMY] [Enemy3] Death animation component initialized
[03:40:06] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:06] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[03:40:06] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[03:40:06] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[03:40:06] [ENEMY] [Enemy4] Death animation component initialized
[03:40:06] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:06] [INFO] [BloodyFeet:Grenadier] Footprint scene loaded
[03:40:06] [INFO] [BloodyFeet:Grenadier] Found EnemyModel for facing direction
[03:40:06] [INFO] [BloodyFeet:Grenadier] BloodyFeetComponent ready on Grenadier
[03:40:06] [INFO] [EnemyGrenade] Grenade bag built (hard): [Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Defensive]
[03:40:06] [INFO] [EnemyGrenade] Grenadier initialized: 8 grenades in bag
[03:40:06] [ENEMY] [Grenadier] Death animation component initialized
[03:40:06] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:06] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[03:40:06] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[03:40:06] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[03:40:06] [ENEMY] [Enemy6] Death animation component initialized
[03:40:06] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:06] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[03:40:06] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[03:40:06] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[03:40:06] [INFO] [EnemyGrenade] Initialized: 1 grenades
[03:40:06] [ENEMY] [Enemy7] Death animation component initialized
[03:40:06] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:06] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[03:40:06] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[03:40:06] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[03:40:06] [ENEMY] [Enemy8] Death animation component initialized
[03:40:06] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:06] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[03:40:06] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[03:40:06] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[03:40:06] [ENEMY] [Enemy9] Death animation component initialized
[03:40:06] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:06] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[03:40:06] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[03:40:06] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[03:40:06] [ENEMY] [Enemy10] Death animation component initialized
[03:40:06] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:06] [INFO] [BloodyFeet:Player] Footprint scene loaded
[03:40:06] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[03:40:06] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[03:40:06] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:40:06] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:40:06] [INFO] [Player.Weapon] GameManager weapon selection: mini_uzi (MiniUzi)
[03:40:06] [INFO] [Player.Weapon] Removed default MakarovPM
[03:40:06] [INFO] [Player.Weapon] Equipped MiniUzi (ammo: 32/32)
[03:40:06] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:40:06] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:40:06] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:40:06] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:40:06] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[03:40:06] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:40:06] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[03:40:06] [INFO] [Player.TeleportBracers] No teleport bracers selected in ActiveItemManager
[03:40:06] [INFO] [Player.Homing] Homing activation sound loaded
[03:40:06] [INFO] [Player.Homing] Homing bullets equipped, charges: 6/6
[03:40:06] [INFO] [Player] Ready! Ammo: 32/32, Grenades: 1/3, Health: 3/4
[03:40:06] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:40:06] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:40:06] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:40:06] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:40:06] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:40:06] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:40:06] [INFO] [BuildingLevel] Child 'Grenadier': script=true, has_died_signal=true
[03:40:06] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:40:06] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:40:06] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:40:06] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:40:06] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:40:06] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:40:06] [INFO] [BuildingLevel] Setting up weapon: mini_uzi
[03:40:06] [INFO] [BuildingLevel] MiniUzi already equipped by C# Player - skipping GDScript weapon swap
[03:40:06] [INFO] [ScoreManager] Level started with 10 enemies
[03:40:06] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[03:40:06] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[03:40:06] [INFO] [ReplayManager] Replay data cleared
[03:40:06] [INFO] [BuildingLevel] Previous replay data cleared
[03:40:06] [INFO] [ReplayManager] Detected player weapon: Mini UZI
[03:40:06] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[03:40:06] [INFO] [ReplayManager] Level: BuildingLevel
[03:40:06] [INFO] [ReplayManager] Player: Player (valid: True)
[03:40:06] [INFO] [ReplayManager] Enemies count: 10
[03:40:06] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/mini_uzi_topdown.png
[03:40:06] [INFO] [ReplayManager]   Enemy 0: Enemy1
[03:40:06] [INFO] [ReplayManager]   Enemy 1: Enemy2
[03:40:06] [INFO] [ReplayManager]   Enemy 2: Enemy3
[03:40:06] [INFO] [ReplayManager]   Enemy 3: Enemy4
[03:40:06] [INFO] [ReplayManager]   Enemy 4: Grenadier
[03:40:06] [INFO] [ReplayManager]   Enemy 5: Enemy6
[03:40:06] [INFO] [ReplayManager]   Enemy 6: Enemy7
[03:40:06] [INFO] [ReplayManager]   Enemy 7: Enemy8
[03:40:06] [INFO] [ReplayManager]   Enemy 8: Enemy9
[03:40:06] [INFO] [ReplayManager]   Enemy 9: Enemy10
[03:40:06] [INFO] [BuildingLevel] Replay recording started successfully
[03:40:06] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[03:40:06] [INFO] [CinemaEffects] Found player node: Player
[03:40:06] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[03:40:06] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 20)
[03:40:06] [ENEMY] [Enemy1] Registered as sound listener
[03:40:06] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[03:40:06] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[03:40:06] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 21)
[03:40:06] [ENEMY] [Enemy2] Registered as sound listener
[03:40:06] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[03:40:06] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[03:40:06] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 22)
[03:40:06] [ENEMY] [Enemy3] Registered as sound listener
[03:40:06] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[03:40:06] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[03:40:06] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 23)
[03:40:06] [ENEMY] [Enemy4] Registered as sound listener
[03:40:06] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[03:40:06] [INFO] [BloodyFeet:Grenadier] Blood detector created and attached to Grenadier
[03:40:06] [INFO] [SoundPropagation] Registered listener: Grenadier (total: 24)
[03:40:06] [ENEMY] [Grenadier] Registered as sound listener
[03:40:06] [ENEMY] [Grenadier] Spawned at (1700, 350), hp: 2, behavior: GUARD
[03:40:06] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[03:40:06] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 25)
[03:40:06] [ENEMY] [Enemy6] Registered as sound listener
[03:40:06] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[03:40:06] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[03:40:06] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 26)
[03:40:06] [ENEMY] [Enemy7] Registered as sound listener
[03:40:06] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[03:40:06] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[03:40:06] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 27)
[03:40:06] [ENEMY] [Enemy8] Registered as sound listener
[03:40:06] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[03:40:06] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[03:40:06] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 28)
[03:40:06] [ENEMY] [Enemy9] Registered as sound listener
[03:40:06] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[03:40:06] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[03:40:06] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 29)
[03:40:06] [ENEMY] [Enemy10] Registered as sound listener
[03:40:06] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[03:40:06] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[03:40:07] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[03:40:07] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:07] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:07] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:07] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:07] [ENEMY] [Grenadier] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:07] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:07] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=213.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:07] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:07] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:40:07] [INFO] [Player] Detected weapon: Mini UZI (SMG pose)
[03:40:07] [INFO] [Player] Applied SMG arm pose: Left=(14, 6), Right=(1, 6)
[03:40:07] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:40:07] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:40:07] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:40:07] [INFO] [LastChance] Found player: Player
[03:40:07] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:40:07] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:40:07] [INFO] [LastChance] Connected to player Died signal (C#)
[03:40:07] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[03:40:07] [INFO] [Player.Homing] Homing activated! Duration: 1s, charges remaining: 5/6
[03:40:07] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[03:40:08] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=164.2°, current=-168.8°, player=(398,835), corner_timer=0.00
[03:40:08] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[03:40:08] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=165.9°, current=-9.4°, player=(390,827), corner_timer=0.00
[03:40:08] [ENEMY] [Enemy4] Memory: high confidence (0.89) - transitioning to PURSUING
[03:40:08] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[03:40:08] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:40:08] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:40:08] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=-168.4°, current=-101.3°, player=(375,812), corner_timer=0.00
[03:40:08] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(375,812), corner_timer=0.30
[03:40:08] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(375,812), corner_timer=0.30
[03:40:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(371.112, 809.8812), source=PLAYER (MiniUzi), range=1469, listeners=29
[03:40:08] [INFO] [SoundPropagation] Cleaned up 19 invalid listeners
[03:40:08] [ENEMY] [Enemy1] Heard gunshot at (371.112, 809.8812), source_type=0, intensity=0.01, distance=465
[03:40:08] [ENEMY] [Enemy2] Heard gunshot at (371.112, 809.8812), source_type=0, intensity=0.04, distance=261
[03:40:08] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[03:40:08] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=81.2°, current=-157.5°, player=(371,809), corner_timer=0.00
[03:40:08] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=96.3°, current=-101.3°, player=(371,809), corner_timer=0.00
[03:40:08] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[03:40:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(360.6412, 801.6112), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:08] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[03:40:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(352.1323, 794.8907), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:08] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[03:40:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(347.5496, 791.2713), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:08] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[03:40:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(342.3105, 787.1334), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:08] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[03:40:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(339.0333, 784.545), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:08] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[03:40:08] [ENEMY] [Enemy3] Hit: dmg=1, hp=3/3->2/3
[03:40:08] [INFO] [ImpactEffects] spawn_blood_effect called at (584.0481, 766.5782), dir=(0.976446, -0.215761), lethal=false
[03:40:08] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:40:08] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:40:08] [INFO] [ImpactEffects] Blood effect spawned at (584.0481, 766.5782) (scale=0.5)
[03:40:08] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=176.0°, current=167.5°, player=(337,783), corner_timer=0.00
[03:40:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(337.7155, 783.5042), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:08] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[03:40:08] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(337,783), corner_timer=-0.02
[03:40:08] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:40:08] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(337,783), corner_timer=-0.02
[03:40:08] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:40:08] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[03:40:08] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(337,783), corner_timer=0.30
[03:40:08] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(337,783), corner_timer=0.30
[03:40:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(337.7155, 783.5042), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:08] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[03:40:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(576.3304, 774.5883), source=ENEMY (Enemy3), range=1469, listeners=10
[03:40:08] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:40:08] [INFO] [LastChance] Threat detected: Bullet
[03:40:08] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:40:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:40:08] [INFO] [Player.Homing] Homing effect expired, charges remaining: 5/6
[03:40:08] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[03:40:08] [ENEMY] [Enemy3] Hit: dmg=1, hp=2/3->1/3
[03:40:08] [INFO] [ImpactEffects] spawn_blood_effect called at (573.1334, 784.7646), dir=(0.99934, 0.036339), lethal=false
[03:40:08] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:40:08] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:40:08] [INFO] [ImpactEffects] Blood effect spawned at (573.1334, 784.7646) (scale=0.5)
[03:40:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(573.1334, 784.7646), source=ENEMY (Enemy3), range=1469, listeners=10
[03:40:08] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:40:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(371.112, 809.8812), shooter_id=554906422978, bullet_pos=(926.8254, 597.2606)
[03:40:08] [INFO] [Bullet] Using shooter_position, distance=595
[03:40:08] [INFO] [Bullet] Distance to wall: 595 (40.514644108524% of viewport)
[03:40:08] [INFO] [Bullet] Distance-based penetration chance: 99.3995818733887%
[03:40:08] [INFO] [Bullet] Caliber cannot penetrate walls
[03:40:08] [ENEMY] [Enemy4] PURSUING corner check: angle -94.0°
[03:40:09] [INFO] [LastChance] Threat detected: @Area2D@2718
[03:40:09] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:40:09] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:40:09] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[03:40:09] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (625.8793, 759.468) (added to group)
[03:40:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(360.6412, 801.6112), shooter_id=554906422978, bullet_pos=(923.6979, 609.2803)
[03:40:09] [INFO] [Bullet] Using shooter_position, distance=594.999267578125
[03:40:09] [INFO] [Bullet] Distance to wall: 594.999267578125 (40.5145942365717% of viewport)
[03:40:09] [INFO] [Bullet] Distance-based penetration chance: 99.399640057333%
[03:40:09] [INFO] [Bullet] Caliber cannot penetrate walls
[03:40:09] [ENEMY] [Enemy3] Hit: dmg=1, hp=1/3->0/3
[03:40:09] [INFO] [ImpactEffects] spawn_blood_effect called at (569.9365, 794.9409), dir=(0.998378, 0.056936), lethal=true
[03:40:09] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:40:09] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[03:40:09] [INFO] [ImpactEffects] Blood effect spawned at (569.9365, 794.9409) (scale=0.75)
[03:40:09] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[03:40:09] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[03:40:09] [ENEMY] [Enemy2] [AllyDeath] Witnessed at (569.9365, 794.9409), entering SEARCHING
[03:40:09] [ENEMY] [Enemy2] SEARCHING started: center=(569.9365, 794.9409), radius=100, waypoints=5
[03:40:09] [ENEMY] [Enemy3] [AllyDeath] Notified 3 enemies
[03:40:09] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 9)
[03:40:09] [INFO] [DeathAnim] Started - Angle: 3.3 deg, Index: 12
[03:40:09] [ENEMY] [Enemy3] Death animation started with hit direction: (0.998378, 0.056936)
[03:40:09] [ENEMY] [Enemy2] SEARCHING corner check: angle -52.1°
[03:40:09] [INFO] [Player] Spawning blood effect at (337.71548, 783.50415), dir=(1, 0), lethal=False (C#)
[03:40:09] [INFO] [ImpactEffects] spawn_blood_effect called at (337.7155, 783.5042), dir=(1, 0), lethal=false
[03:40:09] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:40:09] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:40:09] [INFO] [ImpactEffects] Blood effect spawned at (337.7155, 783.5042) (scale=1)
[03:40:09] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[03:40:09] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[03:40:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(509.06885, 784.907), shooter_id=551550979149, bullet_pos=(58.66142, 869.77563)
[03:40:09] [INFO] [Bullet] Using shooter_position, distance=458,33344
[03:40:09] [INFO] [Bullet] Distance to wall: 458,33344 (31,208769% of viewport)
[03:40:09] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:40:09] [INFO] [Bullet] Starting wall penetration at (58.66142, 869.77563)
[03:40:09] [INFO] [Bullet] Raycast backward hit penetrating body at distance 19,536089
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (669.7001, 759.2742) (added to group)
[03:40:09] [INFO] [Bullet] Body exited signal received for penetrating body
[03:40:09] [INFO] [Bullet] Exiting penetration at (12.801758, 878.4168) after traveling 41,666676 pixels through wall
[03:40:09] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[03:40:09] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(337,783), corner_timer=-0.02
[03:40:09] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:40:09] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(337,783), corner_timer=0.30
[03:40:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(339.0333, 784.545), shooter_id=554906422978, bullet_pos=(923.16, 671.3137)
[03:40:09] [INFO] [Bullet] Using shooter_position, distance=595.000244140625
[03:40:09] [INFO] [Bullet] Distance to wall: 595.000244140625 (40.5146607325081% of viewport)
[03:40:09] [INFO] [Bullet] Distance-based penetration chance: 99.3995624787406%
[03:40:09] [INFO] [Bullet] Caliber cannot penetrate walls
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (720.0386, 784.7136) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (658.4723, 815.3237) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (646.4045, 778.697) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (647.1453, 797.7673) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (664.1026, 772.754) (added to group)
[03:40:09] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:40:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:09] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[03:40:09] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[03:40:09] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[03:40:09] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:40:09] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:40:09] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:40:09] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[03:40:09] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[03:40:09] [INFO] [FlashbangPlayer] Resetting flashbang player effects (scene change)
[03:40:09] [ENEMY] [Enemy1] Death animation component initialized
[03:40:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:09] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[03:40:09] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[03:40:09] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[03:40:09] [ENEMY] [Enemy2] Death animation component initialized
[03:40:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:09] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[03:40:09] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[03:40:09] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[03:40:09] [INFO] [EnemyGrenade] Initialized: 1 grenades
[03:40:09] [ENEMY] [Enemy3] Death animation component initialized
[03:40:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:09] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[03:40:09] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[03:40:09] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[03:40:09] [ENEMY] [Enemy4] Death animation component initialized
[03:40:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:09] [INFO] [BloodyFeet:Grenadier] Footprint scene loaded
[03:40:09] [INFO] [BloodyFeet:Grenadier] Found EnemyModel for facing direction
[03:40:09] [INFO] [BloodyFeet:Grenadier] BloodyFeetComponent ready on Grenadier
[03:40:09] [INFO] [EnemyGrenade] Grenade bag built (hard): [Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Defensive]
[03:40:09] [INFO] [EnemyGrenade] Grenadier initialized: 8 grenades in bag
[03:40:09] [ENEMY] [Grenadier] Death animation component initialized
[03:40:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:09] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[03:40:09] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[03:40:09] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[03:40:09] [ENEMY] [Enemy6] Death animation component initialized
[03:40:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:09] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[03:40:09] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[03:40:09] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[03:40:09] [ENEMY] [Enemy7] Death animation component initialized
[03:40:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:09] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[03:40:09] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[03:40:09] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[03:40:09] [ENEMY] [Enemy8] Death animation component initialized
[03:40:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:09] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[03:40:09] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[03:40:09] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[03:40:09] [ENEMY] [Enemy9] Death animation component initialized
[03:40:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:09] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[03:40:09] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[03:40:09] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[03:40:09] [ENEMY] [Enemy10] Death animation component initialized
[03:40:09] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:09] [INFO] [BloodyFeet:Player] Footprint scene loaded
[03:40:09] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[03:40:09] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[03:40:09] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:40:09] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:40:09] [INFO] [Player.Weapon] GameManager weapon selection: mini_uzi (MiniUzi)
[03:40:09] [INFO] [Player.Weapon] Removed default MakarovPM
[03:40:09] [INFO] [Player.Weapon] Equipped MiniUzi (ammo: 32/32)
[03:40:09] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:40:09] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:40:09] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:40:09] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:40:09] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[03:40:09] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:40:09] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[03:40:09] [INFO] [Player.TeleportBracers] No teleport bracers selected in ActiveItemManager
[03:40:09] [INFO] [Player.Homing] Homing activation sound loaded
[03:40:09] [INFO] [Player.Homing] Homing bullets equipped, charges: 6/6
[03:40:09] [INFO] [Player] Ready! Ammo: 32/32, Grenades: 1/3, Health: 2/4
[03:40:09] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:40:09] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:40:09] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:40:09] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:40:09] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:40:09] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:40:09] [INFO] [BuildingLevel] Child 'Grenadier': script=true, has_died_signal=true
[03:40:09] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:40:09] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:40:09] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:40:09] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:40:09] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:40:09] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:40:09] [INFO] [BuildingLevel] Setting up weapon: mini_uzi
[03:40:09] [INFO] [BuildingLevel] MiniUzi already equipped by C# Player - skipping GDScript weapon swap
[03:40:09] [INFO] [ScoreManager] Level started with 10 enemies
[03:40:09] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[03:40:09] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[03:40:09] [INFO] [ReplayManager] Replay data cleared
[03:40:09] [INFO] [BuildingLevel] Previous replay data cleared
[03:40:09] [INFO] [ReplayManager] Detected player weapon: Mini UZI
[03:40:09] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[03:40:09] [INFO] [ReplayManager] Level: BuildingLevel
[03:40:09] [INFO] [ReplayManager] Player: Player (valid: True)
[03:40:09] [INFO] [ReplayManager] Enemies count: 10
[03:40:09] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/mini_uzi_topdown.png
[03:40:09] [INFO] [ReplayManager]   Enemy 0: Enemy1
[03:40:09] [INFO] [ReplayManager]   Enemy 1: Enemy2
[03:40:09] [INFO] [ReplayManager]   Enemy 2: Enemy3
[03:40:09] [INFO] [ReplayManager]   Enemy 3: Enemy4
[03:40:09] [INFO] [ReplayManager]   Enemy 4: Grenadier
[03:40:09] [INFO] [ReplayManager]   Enemy 5: Enemy6
[03:40:09] [INFO] [ReplayManager]   Enemy 6: Enemy7
[03:40:09] [INFO] [ReplayManager]   Enemy 7: Enemy8
[03:40:09] [INFO] [ReplayManager]   Enemy 8: Enemy9
[03:40:09] [INFO] [ReplayManager]   Enemy 9: Enemy10
[03:40:09] [INFO] [BuildingLevel] Replay recording started successfully
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (688.3595, 781.0352) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (742.5049, 797.0387) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (666.8802, 784.0215) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (690.3908, 778.2968) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (637.9712, 839.5157) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (610.7419, 805.3159) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (385.4988, 778.0165) (added to group)
[03:40:09] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[03:40:09] [INFO] [CinemaEffects] Found player node: Player
[03:40:09] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[03:40:09] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[03:40:09] [ENEMY] [Enemy1] Registered as sound listener
[03:40:09] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[03:40:09] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[03:40:09] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[03:40:09] [ENEMY] [Enemy2] Registered as sound listener
[03:40:09] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[03:40:09] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[03:40:09] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[03:40:09] [ENEMY] [Enemy3] Registered as sound listener
[03:40:09] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[03:40:09] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[03:40:09] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[03:40:09] [ENEMY] [Enemy4] Registered as sound listener
[03:40:09] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[03:40:09] [INFO] [BloodyFeet:Grenadier] Blood detector created and attached to Grenadier
[03:40:09] [INFO] [SoundPropagation] Registered listener: Grenadier (total: 14)
[03:40:09] [ENEMY] [Grenadier] Registered as sound listener
[03:40:09] [ENEMY] [Grenadier] Spawned at (1700, 350), hp: 2, behavior: GUARD
[03:40:09] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[03:40:09] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[03:40:09] [ENEMY] [Enemy6] Registered as sound listener
[03:40:09] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[03:40:09] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[03:40:09] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[03:40:09] [ENEMY] [Enemy7] Registered as sound listener
[03:40:09] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 4, behavior: PATROL
[03:40:09] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[03:40:09] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[03:40:09] [ENEMY] [Enemy8] Registered as sound listener
[03:40:09] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[03:40:09] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[03:40:09] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[03:40:09] [ENEMY] [Enemy9] Registered as sound listener
[03:40:09] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[03:40:09] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[03:40:09] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[03:40:09] [ENEMY] [Enemy10] Registered as sound listener
[03:40:09] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[03:40:09] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[03:40:09] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[03:40:09] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:09] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:09] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:09] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:09] [ENEMY] [Grenadier] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:09] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:09] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:09] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:09] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:40:09] [INFO] [Player] Detected weapon: Mini UZI (SMG pose)
[03:40:09] [INFO] [Player] Applied SMG arm pose: Left=(14, 6), Right=(1, 6)
[03:40:09] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:40:09] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:40:09] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:40:09] [INFO] [LastChance] Found player: Player
[03:40:09] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:40:09] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:40:09] [INFO] [LastChance] Connected to player Died signal (C#)
[03:40:09] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (748.1836, 795.4) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (768.9778, 798.2424) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (649.3604, 872.6134) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (710.0356, 802.1611) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (644.4283, 844.7655) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (657.7642, 856.5841) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (663.1022, 838.6344) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (655.179, 826.052) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (674.3912, 790.3647) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (401.3897, 815.5069) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (387.971, 826.3492) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (469.5453, 771.8094) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (451.3978, 801.4523) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (419.0172, 796.4432) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (682.5491, 807.6688) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (644.9926, 878.0286) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (669.1085, 819.6288) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (407.7325, 822.7142) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (434.9333, 838.5411) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (497.3096, 816.335) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (683.057, 936.0136) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (498.0969, 907.7726) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (776.9457, 801.9838) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (689.462, 903.9211) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (679.0611, 931.1444) (added to group)
[03:40:09] [INFO] [BloodDecal] Blood puddle created at (694.6975, 961.1803) (added to group)
[03:40:10] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[03:40:10] [INFO] [BloodyFeet:Player] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[03:40:10] [INFO] [Player.Homing] Homing activated! Duration: 1s, charges remaining: 5/6
[03:40:10] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=164.4°, current=-168.8°, player=(450,819), corner_timer=0.00
[03:40:10] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:40:10] [INFO] [BloodyFeet:Enemy3] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[03:40:11] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[03:40:11] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[03:40:11] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:40:11] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:40:11] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:40:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=19
[03:40:11] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[03:40:11] [ENEMY] [Enemy2] Heard gunshot at (684.4485, 753.7583), source_type=1, intensity=0.02, distance=350
[03:40:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:40:11] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=-161.3°, current=-67.5°, player=(453,782), corner_timer=0.00
[03:40:11] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(453,782), corner_timer=0.30
[03:40:11] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(453,782), corner_timer=0.30
[03:40:11] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=76.5°, current=168.8°, player=(454,777), corner_timer=0.00
[03:40:11] [INFO] [LastChance] Threat detected: Bullet
[03:40:11] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:40:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:40:11] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[03:40:11] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:40:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[03:40:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:40:11] [INFO] [LastChance] Threat detected: @Area2D@3033
[03:40:11] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:40:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:40:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(483.0409, 743.0934), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:11] [ENEMY] [Enemy1] Heard gunshot at (483.0409, 743.0934), source_type=0, intensity=0.01, distance=434
[03:40:11] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[03:40:11] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=65.0°, current=-33.8°, player=(483,743), corner_timer=0.00
[03:40:11] [INFO] [EnemyGrenade] Unsafe throw distance (99 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:11] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[03:40:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(488.9248, 740.7248), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:11] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[03:40:11] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:40:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(684.4485, 753.7583), source=ENEMY (Enemy3), range=1469, listeners=10
[03:40:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:40:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(618.3217, 769.81604), shooter_id=611177204503, bullet_pos=(39.878635, 845.1908)
[03:40:11] [INFO] [Bullet] Using shooter_position, distance=583,3333
[03:40:11] [INFO] [Bullet] Distance to wall: 583,3333 (39,72024% of viewport)
[03:40:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:40:11] [INFO] [Bullet] Starting wall penetration at (39.878635, 845.1908)
[03:40:11] [INFO] [LastChance] Threat detected: @Area2D@3041
[03:40:11] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:40:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:40:11] [INFO] [EnemyGrenade] Unsafe throw distance (97 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:11] [INFO] [SoundPropagation] Sound emitted: type=CASING_KICK, pos=(659.4251, 729.1951), source=NEUTRAL (null), range=900, listeners=10
[03:40:11] [ENEMY] [Enemy2] Heard CASING_KICK at (659.4251, 729.1951), intensity=0.03, dist=315
[03:40:11] [ENEMY] [Enemy3] Heard CASING_KICK at (659.4251, 729.1951), intensity=1.00, dist=35
[03:40:11] [ENEMY] [Enemy4] Heard CASING_KICK at (659.4251, 729.1951), intensity=0.06, dist=199
[03:40:11] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=6, self=0, below_threshold=1
[03:40:11] [INFO] [SoundPropagation] Sound emitted: type=CASING_KICK, pos=(670.1002, 736.7587), source=NEUTRAL (null), range=900, listeners=10
[03:40:11] [ENEMY] [Enemy2] Heard CASING_KICK at (670.1002, 736.7587), intensity=0.02, dist=328
[03:40:11] [ENEMY] [Enemy3] Heard CASING_KICK at (670.1002, 736.7587), intensity=1.00, dist=23
[03:40:11] [ENEMY] [Enemy4] Heard CASING_KICK at (670.1002, 736.7587), intensity=0.07, dist=188
[03:40:11] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=6, self=0, below_threshold=1
[03:40:11] [INFO] [Bullet] Raycast backward hit penetrating body at distance 38,721424
[03:40:11] [INFO] [Bullet] Body exited signal received for penetrating body
[03:40:11] [INFO] [Bullet] Exiting penetration at (-6.3968124, 851.22076) after traveling 41,666668 pixels through wall
[03:40:11] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[03:40:11] [INFO] [EnemyGrenade] Unsafe throw distance (94 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:11] [INFO] [SoundPropagation] Sound emitted: type=CASING_KICK, pos=(669.7996, 734.4844), source=NEUTRAL (null), range=900, listeners=10
[03:40:11] [ENEMY] [Enemy2] Heard CASING_KICK at (669.7996, 734.4844), intensity=0.02, dist=327
[03:40:11] [ENEMY] [Enemy3] Heard CASING_KICK at (669.7996, 734.4844), intensity=1.00, dist=27
[03:40:11] [ENEMY] [Enemy4] Heard CASING_KICK at (669.7996, 734.4844), intensity=0.07, dist=189
[03:40:11] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=6, self=0, below_threshold=1
[03:40:11] [INFO] [EnemyGrenade] Unsafe throw distance (92 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:11] [INFO] [SoundPropagation] Sound emitted: type=CASING_KICK, pos=(669.257, 731.668), source=NEUTRAL (null), range=900, listeners=10
[03:40:11] [ENEMY] [Enemy2] Heard CASING_KICK at (669.257, 731.668), intensity=0.02, dist=325
[03:40:11] [ENEMY] [Enemy3] Heard CASING_KICK at (669.257, 731.668), intensity=1.00, dist=31
[03:40:11] [ENEMY] [Enemy4] Heard CASING_KICK at (669.257, 731.668), intensity=0.07, dist=190
[03:40:11] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=6, self=0, below_threshold=1
[03:40:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(498.2456, 738.9609), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:11] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[03:40:11] [INFO] [Player] Spawning blood effect at (498.2456, 738.9609), dir=(1, 0), lethal=False (C#)
[03:40:11] [INFO] [ImpactEffects] spawn_blood_effect called at (498.2456, 738.9609), dir=(1, 0), lethal=false
[03:40:11] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:40:11] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:40:11] [INFO] [ImpactEffects] Blood effect spawned at (498.2456, 738.9609) (scale=1)
[03:40:11] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[03:40:11] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[03:40:11] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[03:40:11] [INFO] [EnemyGrenade] Unsafe throw distance (90 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:11] [INFO] [SoundPropagation] Sound emitted: type=CASING_KICK, pos=(668.5674, 728.311), source=NEUTRAL (null), range=900, listeners=10
[03:40:11] [ENEMY] [Enemy1] Heard CASING_KICK at (668.5674, 728.311), intensity=0.01, dist=496
[03:40:11] [ENEMY] [Enemy2] Heard CASING_KICK at (668.5674, 728.311), intensity=0.02, dist=322
[03:40:11] [ENEMY] [Enemy3] Heard CASING_KICK at (668.5674, 728.311), intensity=1.00, dist=37
[03:40:11] [ENEMY] [Enemy4] Heard CASING_KICK at (668.5674, 728.311), intensity=0.07, dist=192
[03:40:11] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
[03:40:11] [INFO] [EnemyGrenade] Unsafe throw distance (88 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:11] [ENEMY] [Enemy4] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=-140.5°, current=178.7°, player=(499,738), corner_timer=0.03
[03:40:11] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[03:40:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(712.4039, 914.0658), source=ENEMY (Enemy4), range=1469, listeners=10
[03:40:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:40:11] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(499,738), corner_timer=-0.02
[03:40:11] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:40:11] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(499,738), corner_timer=-0.02
[03:40:11] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:40:11] [INFO] [SoundPropagation] Sound emitted: type=CASING_KICK, pos=(505.8228, 739.6974), source=NEUTRAL (null), range=900, listeners=10
[03:40:11] [ENEMY] [Enemy1] Heard CASING_KICK at (505.8228, 739.6974), intensity=0.02, dist=400
[03:40:11] [ENEMY] [Enemy2] Heard CASING_KICK at (505.8228, 739.6974), intensity=0.05, dist=217
[03:40:11] [ENEMY] [Enemy3] Heard CASING_KICK at (505.8228, 739.6974), intensity=0.09, dist=169
[03:40:11] [ENEMY] [Enemy4] Heard CASING_KICK at (505.8228, 739.6974), intensity=0.04, dist=267
[03:40:11] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
[03:40:11] [INFO] [EnemyGrenade] Unsafe throw distance (87 < 275 safe distance, blast=225, margin=50) - skipping throw
[03:40:11] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[03:40:11] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(501,739), corner_timer=0.30
[03:40:11] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(501,739), corner_timer=0.30
[03:40:11] [INFO] [SoundPropagation] Sound emitted: type=CASING_KICK, pos=(507.0908, 740.5907), source=NEUTRAL (null), range=900, listeners=10
[03:40:11] [ENEMY] [Enemy1] Heard CASING_KICK at (507.0908, 740.5907), intensity=0.02, dist=398
[03:40:11] [ENEMY] [Enemy2] Heard CASING_KICK at (507.0908, 740.5907), intensity=0.05, dist=219
[03:40:11] [ENEMY] [Enemy3] Heard CASING_KICK at (507.0908, 740.5907), intensity=0.09, dist=165
[03:40:11] [ENEMY] [Enemy4] Heard CASING_KICK at (507.0908, 740.5907), intensity=0.04, dist=261
[03:40:11] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
[03:40:11] [INFO] [BloodyFeet:Enemy4] Stepped in blood! 12 footprints to spawn, color: (1, 1, 1, 1)
[03:40:11] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:40:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(669.6283, 770.5546), source=ENEMY (Enemy3), range=1469, listeners=10
[03:40:11] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[03:40:11] [INFO] [SoundPropagation] Sound emitted: type=CASING_KICK, pos=(508.5119, 741.4819), source=NEUTRAL (null), range=900, listeners=10
[03:40:11] [ENEMY] [Enemy1] Heard CASING_KICK at (508.5119, 741.4819), intensity=0.02, dist=399
[03:40:11] [ENEMY] [Enemy2] Heard CASING_KICK at (508.5119, 741.4819), intensity=0.05, dist=220
[03:40:11] [ENEMY] [Enemy3] Heard CASING_KICK at (508.5119, 741.4819), intensity=0.10, dist=162
[03:40:11] [ENEMY] [Enemy4] Heard CASING_KICK at (508.5119, 741.4819), intensity=0.04, dist=256
[03:40:11] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
[03:40:11] [INFO] [SoundPropagation] Sound emitted: type=CASING_KICK, pos=(512.0928, 741.5051), source=NEUTRAL (null), range=900, listeners=10
[03:40:11] [ENEMY] [Enemy1] Heard CASING_KICK at (512.0928, 741.5051), intensity=0.02, dist=401
[03:40:11] [ENEMY] [Enemy2] Heard CASING_KICK at (512.0928, 741.5051), intensity=0.05, dist=222
[03:40:11] [ENEMY] [Enemy3] Heard CASING_KICK at (512.0928, 741.5051), intensity=0.10, dist=158
[03:40:11] [ENEMY] [Enemy4] Heard CASING_KICK at (512.0928, 741.5051), intensity=0.04, dist=253
[03:40:11] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
[03:40:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(503.1895, 740.2444), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:11] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[03:40:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(616.8795, 761.8229), shooter_id=611177204503, bullet_pos=(33.559933, 765.8356)
[03:40:11] [INFO] [Bullet] Using shooter_position, distance=583,3334
[03:40:11] [INFO] [Bullet] Distance to wall: 583,3334 (39,72024% of viewport)
[03:40:11] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:40:11] [INFO] [Bullet] Starting wall penetration at (33.559933, 765.8356)
[03:40:11] [INFO] [LastChance] Threat detected: Bullet
[03:40:11] [INFO] [LastChance] Triggering last chance effect!
[03:40:11] [INFO] [LastChance] Starting last chance effect:
[03:40:11] [INFO] [LastChance]   - Time will be frozen (except player)
[03:40:11] [INFO] [LastChance]   - Duration: 6.00 real seconds
[03:40:11] [INFO] [LastChance]   - Trigger: threat detected
[03:40:11] [INFO] [LastChance]   - Sepia intensity: 0.70
[03:40:11] [INFO] [LastChance]   - Brightness: 0.60
[03:40:11] [INFO] [LastChance] Pushed bullet @Area2D@3044 from distance 113.0 to 200.0
[03:40:11] [INFO] [LastChance] Pushed bullet Bullet from distance 121.4 to 200.0
[03:40:11] [INFO] [LastChance] Pushed bullet @Area2D@3049 from distance 101.8 to 200.0
[03:40:11] [INFO] [LastChance] Pushed bullet @Area2D@3052 from distance 35.0 to 200.0
[03:40:11] [INFO] [LastChance] Pushed 4 threatening bullets away from player
[03:40:11] [INFO] [LastChance] Set player Player and all 27 children to PROCESS_MODE_ALWAYS
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[03:40:11] [INFO] [LastChance] Skipping player node: Player
[03:40:11] [INFO] [LastChance] Froze existing bullet casing: Casing
[03:40:11] [INFO] [Bullet] Body exited signal received for penetrating body
[03:40:11] [INFO] [Bullet] Exiting penetration at (28.560051, 765.86993) after traveling 0 pixels through wall
[03:40:11] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[03:40:11] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3035
[03:40:11] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3037
[03:40:11] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3040
[03:40:11] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3043
[03:40:11] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3046
[03:40:11] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3048
[03:40:11] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3051
[03:40:11] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@3054
[03:40:11] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[03:40:11] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[03:40:11] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[03:40:11] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@3056
[03:40:11] [INFO] [LastChance] Registered frozen player bullet: @Area2D@3056
[03:40:11] [INFO] [LastChance] Freezing newly created explosion effect: PointLight2D
[03:40:11] [INFO] [LastChance] Registered frozen explosion effect: PointLight2D
[03:40:11] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@3058
[03:40:11] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@3058
[03:40:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(503.2142, 746.1342), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:11] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[03:40:11] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[03:40:11] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@3061
[03:40:11] [INFO] [LastChance] Registered frozen player bullet: @Area2D@3061
[03:40:11] [INFO] [LastChance] Freezing newly created explosion effect: PointLight2D
[03:40:11] [INFO] [LastChance] Registered frozen explosion effect: PointLight2D
[03:40:11] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@3062
[03:40:11] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@3062
[03:40:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(498.3098, 754.2744), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:11] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[03:40:11] [INFO] [BloodDecal] Blood puddle created at (554.488, 781.9009) (added to group)
[03:40:11] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@3067
[03:40:11] [INFO] [LastChance] Registered frozen player bullet: @Area2D@3067
[03:40:11] [INFO] [LastChance] Freezing newly created explosion effect: PointLight2D
[03:40:11] [INFO] [LastChance] Registered frozen explosion effect: PointLight2D
[03:40:11] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@3069
[03:40:11] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@3069
[03:40:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(489.0284, 765.4619), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:11] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[03:40:11] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@3072
[03:40:11] [INFO] [LastChance] Registered frozen player bullet: @Area2D@3072
[03:40:11] [INFO] [LastChance] Freezing newly created explosion effect: PointLight2D
[03:40:11] [INFO] [LastChance] Registered frozen explosion effect: PointLight2D
[03:40:11] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@3074
[03:40:11] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@3074
[03:40:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(471.481, 783.5858), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:11] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[03:40:11] [INFO] [BloodDecal] Blood puddle created at (603.0319, 786.4466) (added to group)
[03:40:11] [INFO] [BloodDecal] Blood puddle created at (602.0663, 777.2791) (added to group)
[03:40:11] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@3078
[03:40:11] [INFO] [LastChance] Registered frozen player bullet: @Area2D@3078
[03:40:11] [INFO] [LastChance] Freezing newly created explosion effect: PointLight2D
[03:40:11] [INFO] [LastChance] Registered frozen explosion effect: PointLight2D
[03:40:11] [INFO] [LastChance] Freezing newly created bullet casing: @RigidBody2D@3080
[03:40:11] [INFO] [LastChance] Registered frozen bullet casing: @RigidBody2D@3080
[03:40:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(455.9246, 799.1422), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:11] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[03:40:11] [INFO] [BloodDecal] Blood puddle created at (613.8092, 745.7892) (added to group)
[03:40:11] [INFO] [BloodDecal] Blood puddle created at (632.0519, 779.8742) (added to group)
[03:40:11] [INFO] [BloodDecal] Blood puddle created at (666.9507, 775.9335) (added to group)
[03:40:11] [INFO] [Player.Homing] Homing effect expired, charges remaining: 5/6
[03:40:11] [INFO] [BloodDecal] Blood puddle created at (601.5679, 818.5015) (added to group)
[03:40:11] [INFO] [BloodDecal] Blood puddle created at (595.884, 821.1221) (added to group)
[03:40:11] [INFO] [BloodDecal] Blood puddle created at (658.9773, 796.8778) (added to group)
[03:40:12] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:40:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:12] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[03:40:12] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[03:40:12] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[03:40:12] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:40:12] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:40:12] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:40:12] [INFO] [LastChance] All process modes restored
[03:40:12] [INFO] [LastChance] Restored original colors to 5 player sprites
[03:40:12] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[03:40:12] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[03:40:12] [INFO] [FlashbangPlayer] Resetting flashbang player effects (scene change)
[03:40:12] [ENEMY] [Enemy1] Death animation component initialized
[03:40:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:12] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[03:40:12] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[03:40:12] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[03:40:12] [ENEMY] [Enemy2] Death animation component initialized
[03:40:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:12] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[03:40:12] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[03:40:12] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[03:40:12] [ENEMY] [Enemy3] Death animation component initialized
[03:40:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:12] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[03:40:12] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[03:40:12] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[03:40:12] [ENEMY] [Enemy4] Death animation component initialized
[03:40:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:12] [INFO] [BloodyFeet:Grenadier] Footprint scene loaded
[03:40:12] [INFO] [BloodyFeet:Grenadier] Found EnemyModel for facing direction
[03:40:12] [INFO] [BloodyFeet:Grenadier] BloodyFeetComponent ready on Grenadier
[03:40:12] [INFO] [EnemyGrenade] Grenade bag built (hard): [Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Defensive]
[03:40:12] [INFO] [EnemyGrenade] Grenadier initialized: 8 grenades in bag
[03:40:12] [ENEMY] [Grenadier] Death animation component initialized
[03:40:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:12] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[03:40:12] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[03:40:12] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[03:40:12] [ENEMY] [Enemy6] Death animation component initialized
[03:40:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:12] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[03:40:12] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[03:40:12] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[03:40:12] [ENEMY] [Enemy7] Death animation component initialized
[03:40:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:12] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[03:40:12] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[03:40:12] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[03:40:12] [ENEMY] [Enemy8] Death animation component initialized
[03:40:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:12] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[03:40:12] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[03:40:12] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[03:40:12] [ENEMY] [Enemy9] Death animation component initialized
[03:40:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:12] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[03:40:12] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[03:40:12] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[03:40:12] [ENEMY] [Enemy10] Death animation component initialized
[03:40:12] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:12] [INFO] [BloodyFeet:Player] Footprint scene loaded
[03:40:12] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[03:40:12] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[03:40:12] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:40:12] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:40:12] [INFO] [Player.Weapon] GameManager weapon selection: mini_uzi (MiniUzi)
[03:40:12] [INFO] [Player.Weapon] Removed default MakarovPM
[03:40:12] [INFO] [Player.Weapon] Equipped MiniUzi (ammo: 32/32)
[03:40:12] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:40:12] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:40:12] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:40:12] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:40:12] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[03:40:12] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:40:12] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[03:40:12] [INFO] [Player.TeleportBracers] No teleport bracers selected in ActiveItemManager
[03:40:12] [INFO] [Player.Homing] Homing activation sound loaded
[03:40:12] [INFO] [Player.Homing] Homing bullets equipped, charges: 6/6
[03:40:12] [INFO] [Player] Ready! Ammo: 32/32, Grenades: 1/3, Health: 2/4
[03:40:12] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:40:12] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:40:12] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:40:12] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:40:12] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:40:12] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:40:12] [INFO] [BuildingLevel] Child 'Grenadier': script=true, has_died_signal=true
[03:40:12] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:40:12] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:40:12] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:40:12] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:40:12] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:40:12] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:40:12] [INFO] [BuildingLevel] Setting up weapon: mini_uzi
[03:40:12] [INFO] [BuildingLevel] MiniUzi already equipped by C# Player - skipping GDScript weapon swap
[03:40:12] [INFO] [ScoreManager] Level started with 10 enemies
[03:40:12] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[03:40:12] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[03:40:12] [INFO] [ReplayManager] Replay data cleared
[03:40:12] [INFO] [BuildingLevel] Previous replay data cleared
[03:40:12] [INFO] [ReplayManager] Detected player weapon: Mini UZI
[03:40:12] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[03:40:12] [INFO] [ReplayManager] Level: BuildingLevel
[03:40:12] [INFO] [ReplayManager] Player: Player (valid: True)
[03:40:12] [INFO] [ReplayManager] Enemies count: 10
[03:40:12] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/mini_uzi_topdown.png
[03:40:12] [INFO] [ReplayManager]   Enemy 0: Enemy1
[03:40:12] [INFO] [ReplayManager]   Enemy 1: Enemy2
[03:40:12] [INFO] [ReplayManager]   Enemy 2: Enemy3
[03:40:12] [INFO] [ReplayManager]   Enemy 3: Enemy4
[03:40:12] [INFO] [ReplayManager]   Enemy 4: Grenadier
[03:40:12] [INFO] [ReplayManager]   Enemy 5: Enemy6
[03:40:12] [INFO] [ReplayManager]   Enemy 6: Enemy7
[03:40:12] [INFO] [ReplayManager]   Enemy 7: Enemy8
[03:40:12] [INFO] [ReplayManager]   Enemy 8: Enemy9
[03:40:12] [INFO] [ReplayManager]   Enemy 9: Enemy10
[03:40:12] [INFO] [BuildingLevel] Replay recording started successfully
[03:40:12] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[03:40:12] [INFO] [CinemaEffects] Found player node: Player
[03:40:12] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[03:40:12] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[03:40:12] [ENEMY] [Enemy1] Registered as sound listener
[03:40:12] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[03:40:12] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[03:40:12] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[03:40:12] [ENEMY] [Enemy2] Registered as sound listener
[03:40:12] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[03:40:12] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[03:40:12] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[03:40:12] [ENEMY] [Enemy3] Registered as sound listener
[03:40:12] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[03:40:12] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[03:40:12] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[03:40:12] [ENEMY] [Enemy4] Registered as sound listener
[03:40:12] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[03:40:12] [INFO] [BloodyFeet:Grenadier] Blood detector created and attached to Grenadier
[03:40:12] [INFO] [SoundPropagation] Registered listener: Grenadier (total: 15)
[03:40:12] [ENEMY] [Grenadier] Registered as sound listener
[03:40:12] [ENEMY] [Grenadier] Spawned at (1700, 350), hp: 2, behavior: GUARD
[03:40:12] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[03:40:12] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[03:40:12] [ENEMY] [Enemy6] Registered as sound listener
[03:40:12] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[03:40:12] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[03:40:12] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[03:40:12] [ENEMY] [Enemy7] Registered as sound listener
[03:40:12] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[03:40:12] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[03:40:12] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[03:40:12] [ENEMY] [Enemy8] Registered as sound listener
[03:40:12] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[03:40:12] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[03:40:12] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[03:40:12] [ENEMY] [Enemy9] Registered as sound listener
[03:40:12] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[03:40:12] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[03:40:12] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[03:40:12] [ENEMY] [Enemy10] Registered as sound listener
[03:40:12] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[03:40:12] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[03:40:12] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[03:40:12] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:12] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:12] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=236.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:12] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:12] [ENEMY] [Grenadier] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:12] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:12] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=157.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:12] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=180.0°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:12] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:40:12] [INFO] [Player] Detected weapon: Mini UZI (SMG pose)
[03:40:12] [INFO] [Player] Applied SMG arm pose: Left=(14, 6), Right=(1, 6)
[03:40:12] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:40:12] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:40:12] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:40:12] [INFO] [LastChance] Found player: Player
[03:40:12] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:40:12] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:40:12] [INFO] [LastChance] Connected to player Died signal (C#)
[03:40:12] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[03:40:12] [INFO] [Player.Homing] Homing activated! Duration: 1s, charges remaining: 5/6
[03:40:13] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[03:40:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(324.8625, 899), source=PLAYER (MiniUzi), range=1469, listeners=20
[03:40:13] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[03:40:13] [ENEMY] [Enemy2] Heard gunshot at (324.8625, 899), source_type=0, intensity=0.02, distance=357
[03:40:13] [ENEMY] [Enemy3] Heard gunshot at (324.8625, 899), source_type=0, intensity=0.02, distance=404
[03:40:13] [ENEMY] [Enemy4] Heard gunshot at (324.8625, 899), source_type=0, intensity=0.01, distance=475
[03:40:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[03:40:13] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=102.1°, current=-101.3°, player=(324,899), corner_timer=0.00
[03:40:13] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=158.3°, current=-123.8°, player=(324,899), corner_timer=0.00
[03:40:13] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-179.9°, current=-101.3°, player=(324,899), corner_timer=0.00
[03:40:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(313.1953, 887.3327), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[03:40:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(297.6389, 871.7763), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[03:40:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(324.8625, 899), shooter_id=680265780179, bullet_pos=(502.0889, 817.6621)
[03:40:13] [INFO] [Bullet] Using shooter_position, distance=195.000045776367
[03:40:13] [INFO] [Bullet] Distance to wall: 195.000045776367 (13.2779116903788% of viewport)
[03:40:13] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:40:13] [INFO] [Bullet] Caliber cannot penetrate walls
[03:40:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(285.9716, 860.109), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[03:40:13] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:40:13] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:40:13] [ENEMY] [Enemy1] Memory: medium confidence (0.61) - transitioning to PURSUING
[03:40:13] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[03:40:13] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(278,852), corner_timer=0.30
[03:40:13] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(278,852), corner_timer=0.30
[03:40:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(274.3043, 848.4417), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[03:40:13] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=93.0°, current=168.8°, player=(274,848), corner_timer=0.00
[03:40:13] [ENEMY] [Enemy1] PURSUING corner check: angle -50.9°
[03:40:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(264.4848, 836.009), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[03:40:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(254.7175, 819.8383), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[03:40:13] [INFO] [Player.Homing] Homing effect expired, charges remaining: 5/6
[03:40:13] [ENEMY] [Enemy3] Hit: dmg=1, hp=3/3->2/3
[03:40:13] [INFO] [ImpactEffects] spawn_blood_effect called at (582.0742, 780.5489), dir=(0.954442, -0.298398), lethal=false
[03:40:13] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:40:13] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:40:13] [INFO] [ImpactEffects] Blood effect spawned at (582.0742, 780.5489) (scale=0.5)
[03:40:13] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=174.9°, current=162.6°, player=(248,810), corner_timer=0.00
[03:40:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(247.248, 807.472), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[03:40:13] [ENEMY] [Enemy3] Hit: dmg=1, hp=2/3->1/3
[03:40:13] [INFO] [ImpactEffects] spawn_blood_effect called at (566.1262, 781.8328), dir=(0.960849, -0.277072), lethal=false
[03:40:13] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:40:13] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:40:13] [INFO] [ImpactEffects] Blood effect spawned at (566.1262, 781.8328) (scale=0.5)
[03:40:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(374.9981, 625.7888), source=ENEMY (Enemy2), range=1469, listeners=10
[03:40:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[03:40:13] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[03:40:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(374.7299, 693.8368), shooter_id=676558014387, bullet_pos=(374.7299, 693.8368)
[03:40:13] [INFO] [Bullet] Using shooter_position, distance=0
[03:40:13] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[03:40:13] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[03:40:13] [INFO] [Bullet] Starting wall penetration at (374.7299, 693.8368)
[03:40:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(242.0765, 798.9099), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[03:40:13] [INFO] [Bullet] Raycast backward hit penetrating body at distance 28,379345
[03:40:13] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(254.7175, 819.8383), shooter_id=680265780179, bullet_pos=(417.7937, 712.9216)
[03:40:13] [INFO] [Bullet] Using shooter_position, distance=195.000137329102
[03:40:13] [INFO] [Bullet] Distance to wall: 195.000137329102 (13.2779179243729% of viewport)
[03:40:13] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:40:13] [INFO] [Bullet] Caliber cannot penetrate walls
[03:40:13] [INFO] [Bullet] Body exited signal received for penetrating body
[03:40:13] [INFO] [Bullet] Exiting penetration at (369.3017, 740.1867) after traveling 41,666668 pixels through wall
[03:40:13] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[03:40:14] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[03:40:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(560.5077, 790.2114), source=ENEMY (Enemy3), range=1469, listeners=10
[03:40:14] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:40:14] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[03:40:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(496.76276, 798.23224), shooter_id=676910337527, bullet_pos=(496.76276, 798.23224)
[03:40:14] [INFO] [Bullet] Using shooter_position, distance=0
[03:40:14] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[03:40:14] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[03:40:14] [INFO] [Bullet] Starting wall penetration at (496.76276, 798.23224)
[03:40:14] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(239,794), corner_timer=-0.02
[03:40:14] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:40:14] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(239,794), corner_timer=-0.02
[03:40:14] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:40:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(239.2027, 794.1522), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:14] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[03:40:14] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[03:40:14] [INFO] [Bullet] Exiting penetration at (451.42023, 809.2701) after traveling 41,66667 pixels through wall
[03:40:14] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[03:40:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(247.248, 807.472), shooter_id=680265780179, bullet_pos=(416.7462, 711.0598)
[03:40:14] [INFO] [Bullet] Using shooter_position, distance=194.999877929688
[03:40:14] [INFO] [Bullet] Distance to wall: 194.999877929688 (13.2779002613898% of viewport)
[03:40:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:40:14] [INFO] [Bullet] Caliber cannot penetrate walls
[03:40:14] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(239,794), corner_timer=0.30
[03:40:14] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(239,794), corner_timer=0.30
[03:40:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(242.0765, 798.9099), shooter_id=680265780179, bullet_pos=(365.3073, 704.8929)
[03:40:14] [INFO] [Bullet] Using shooter_position, distance=155.000106811523
[03:40:14] [INFO] [Bullet] Distance to wall: 155.000106811523 (10.5542422928606% of viewport)
[03:40:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:40:14] [INFO] [Bullet] Caliber cannot penetrate walls
[03:40:14] [ENEMY] [Enemy1] PURSUING corner check: angle -51.1°
[03:40:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(313.1953, 887.3327), shooter_id=680265780179, bullet_pos=(922.8029, 597.4996)
[03:40:14] [INFO] [Bullet] Using shooter_position, distance=674.999816894531
[03:40:14] [INFO] [Bullet] Distance to wall: 674.999816894531 (45.9619787475643% of viewport)
[03:40:14] [INFO] [Bullet] Distance-based penetration chance: 93.0443581278416%
[03:40:14] [INFO] [Bullet] Caliber cannot penetrate walls
[03:40:14] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P4:velocity, state=RETREATING, target=108.3°, current=127.7°, player=(238,793), corner_timer=0.00
[03:40:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(238.5554, 793.0805), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:14] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[03:40:14] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[03:40:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(297.6389, 871.7763), shooter_id=680265780179, bullet_pos=(915.4901, 599.9594)
[03:40:14] [INFO] [Bullet] Using shooter_position, distance=674.999633789063
[03:40:14] [INFO] [Bullet] Distance to wall: 674.999633789063 (45.9619662795763% of viewport)
[03:40:14] [INFO] [Bullet] Distance-based penetration chance: 93.0443726738277%
[03:40:14] [INFO] [Bullet] Caliber cannot penetrate walls
[03:40:14] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[03:40:14] [ENEMY] [Enemy2] State: PURSUING -> RETREATING
[03:40:14] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[03:40:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(238.5554, 793.0805), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:14] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[03:40:14] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[03:40:14] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[03:40:14] [INFO] [BloodDecal] Blood puddle created at (631.2776, 784.0426) (added to group)
[03:40:14] [INFO] [BloodDecal] Blood puddle created at (624.9073, 759.8036) (added to group)
[03:40:14] [INFO] [BloodDecal] Blood puddle created at (641.1652, 754.639) (added to group)
[03:40:14] [INFO] [BloodDecal] Blood puddle created at (646.2991, 780.0359) (added to group)
[03:40:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(238.5554, 793.0805), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:14] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[03:40:14] [INFO] [BloodDecal] Blood puddle created at (606.6262, 769.1278) (added to group)
[03:40:14] [INFO] [BloodDecal] Blood puddle created at (611.2781, 772.1926) (added to group)
[03:40:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(238.5554, 793.0805), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:14] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[03:40:14] [INFO] [BloodDecal] Blood puddle created at (646.3115, 822.6583) (added to group)
[03:40:14] [INFO] [BloodDecal] Blood puddle created at (647.0656, 757.8508) (added to group)
[03:40:14] [INFO] [BloodDecal] Blood puddle created at (659.9447, 810.0888) (added to group)
[03:40:14] [INFO] [BloodDecal] Blood puddle created at (666.8885, 743.8766) (added to group)
[03:40:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(238.5554, 793.0805), shooter_id=680265780179, bullet_pos=(501.1512, 711.4205)
[03:40:14] [INFO] [Bullet] Using shooter_position, distance=274.999755859375
[03:40:14] [INFO] [Bullet] Distance to wall: 274.999755859375 (18.7252390564261% of viewport)
[03:40:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:40:14] [INFO] [Bullet] Caliber cannot penetrate walls
[03:40:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(264.4848, 836.009), shooter_id=680265780179, bullet_pos=(922.3296, 611.8096)
[03:40:14] [INFO] [Bullet] Using shooter_position, distance=695.000183105469
[03:40:14] [INFO] [Bullet] Distance to wall: 695.000183105469 (47.3238404602976% of viewport)
[03:40:14] [INFO] [Bullet] Distance-based penetration chance: 91.4555194629862%
[03:40:14] [INFO] [Bullet] Penetration failed (distance roll)
[03:40:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(238.5554, 793.0805), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:14] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[03:40:14] [INFO] [BloodDecal] Blood puddle created at (674.4277, 818.6711) (added to group)
[03:40:14] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(238,793), corner_timer=-0.02
[03:40:14] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:40:14] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(238,793), corner_timer=0.30
[03:40:14] [INFO] [BloodDecal] Blood puddle created at (713.974, 763.738) (added to group)
[03:40:14] [ENEMY] [Enemy1] PURSUING corner check: angle 153.7°
[03:40:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(238.5554, 793.0805), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:14] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[03:40:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(238.5554, 793.0805), shooter_id=680265780179, bullet_pos=(480.9999, 714.0506)
[03:40:14] [INFO] [Bullet] Using shooter_position, distance=255.000137329102
[03:40:14] [INFO] [Bullet] Distance to wall: 255.000137329102 (17.3634282546442% of viewport)
[03:40:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:40:14] [INFO] [BloodDecal] Blood puddle created at (674.6724, 802.0805) (added to group)
[03:40:14] [INFO] [BloodDecal] Blood puddle created at (753.3875, 801.8004) (added to group)
[03:40:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(238.5554, 793.0805), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:14] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[03:40:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(238.5554, 793.0805), shooter_id=680265780179, bullet_pos=(480.2078, 711.6614)
[03:40:14] [INFO] [Bullet] Using shooter_position, distance=254.999847412109
[03:40:14] [INFO] [Bullet] Distance to wall: 254.999847412109 (17.3634085136631% of viewport)
[03:40:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:40:14] [INFO] [BloodDecal] Blood puddle created at (701.8055, 764.3823) (added to group)
[03:40:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(238.5554, 793.0805), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:14] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[03:40:14] [INFO] [BloodDecal] Blood puddle created at (673.0322, 867.6323) (added to group)
[03:40:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(239.2027, 794.1522), shooter_id=680265780179, bullet_pos=(916.8193, 639.684)
[03:40:14] [INFO] [Bullet] Using shooter_position, distance=694.999694824219
[03:40:14] [INFO] [Bullet] Distance to wall: 694.999694824219 (47.3238072123294% of viewport)
[03:40:14] [INFO] [Bullet] Distance-based penetration chance: 91.4555582522824%
[03:40:14] [INFO] [Bullet] Caliber cannot penetrate walls
[03:40:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(238.5554, 793.0805), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:14] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[03:40:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(238.5554, 793.0805), shooter_id=680265780179, bullet_pos=(371.3617, 713.1587)
[03:40:14] [INFO] [Bullet] Using shooter_position, distance=155
[03:40:14] [INFO] [Bullet] Distance to wall: 155 (10.5542350198676% of viewport)
[03:40:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:40:14] [INFO] [Bullet] Caliber cannot penetrate walls
[03:40:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(238.5554, 793.0805), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:14] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[03:40:14] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(238,793), corner_timer=-0.02
[03:40:14] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:40:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(238.5554, 793.0805), shooter_id=680265780179, bullet_pos=(913.5554, 792.3101)
[03:40:14] [INFO] [Bullet] Using shooter_position, distance=675.000366210938
[03:40:14] [INFO] [Bullet] Distance to wall: 675.000366210938 (45.9620161515285% of viewport)
[03:40:14] [INFO] [Bullet] Distance-based penetration chance: 93.0443144898834%
[03:40:14] [INFO] [Bullet] Caliber cannot penetrate walls
[03:40:14] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(238,793), corner_timer=0.30
[03:40:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(238.5554, 793.0805), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:14] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[03:40:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(238.5554, 793.0805), shooter_id=680265780179, bullet_pos=(366.9049, 706.1816)
[03:40:14] [INFO] [Bullet] Using shooter_position, distance=155.000045776367
[03:40:14] [INFO] [Bullet] Distance to wall: 155.000045776367 (10.5542381368646% of viewport)
[03:40:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:40:14] [INFO] [Bullet] Caliber cannot penetrate walls
[03:40:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(238.5554, 793.0805), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:14] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[03:40:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(238.5554, 793.0805), shooter_id=680265780179, bullet_pos=(369.5289, 710.1895)
[03:40:14] [INFO] [Bullet] Using shooter_position, distance=154.999969482422
[03:40:14] [INFO] [Bullet] Distance to wall: 154.999969482422 (10.5542329418696% of viewport)
[03:40:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:40:14] [INFO] [Bullet] Caliber cannot penetrate walls
[03:40:14] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(238.5554, 793.0805), source=PLAYER (MiniUzi), range=1469, listeners=10
[03:40:14] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=4, self=0, below_threshold=3
[03:40:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(238.5554, 793.0805), shooter_id=680265780179, bullet_pos=(920.0958, 656.963)
[03:40:14] [INFO] [Bullet] Using shooter_position, distance=695.000183105469
[03:40:14] [INFO] [Bullet] Distance to wall: 695.000183105469 (47.3238404602976% of viewport)
[03:40:14] [INFO] [Bullet] Distance-based penetration chance: 91.4555194629862%
[03:40:14] [INFO] [Bullet] Caliber cannot penetrate walls
[03:40:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(238.5554, 793.0805), shooter_id=680265780179, bullet_pos=(370.7796, 712.1993)
[03:40:14] [INFO] [Bullet] Using shooter_position, distance=155.000015258789
[03:40:14] [INFO] [Bullet] Distance to wall: 155.000015258789 (10.5542360588666% of viewport)
[03:40:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:40:14] [INFO] [Bullet] Caliber cannot penetrate walls
[03:40:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(238.5554, 793.0805), shooter_id=680265780179, bullet_pos=(318.5911, 710.5015)
[03:40:14] [INFO] [Bullet] Using shooter_position, distance=115.000053405762
[03:40:14] [INFO] [Bullet] Distance to wall: 115.000053405762 (7.83056510284989% of viewport)
[03:40:14] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:40:14] [INFO] [Bullet] Caliber cannot penetrate walls
[03:40:14] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(238.5554, 793.0805), shooter_id=680265780179, bullet_pos=(919.0772, 651.9574)
[03:40:14] [INFO] [Bullet] Using shooter_position, distance=695.000427246094
[03:40:14] [INFO] [Bullet] Distance to wall: 695.000427246094 (47.3238570842817% of viewport)
[03:40:14] [INFO] [Bullet] Distance-based penetration chance: 91.4555000683381%
[03:40:14] [INFO] [Bullet] Caliber cannot penetrate walls
[03:40:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(238.5554, 793.0805), shooter_id=680265780179, bullet_pos=(910.9623, 733.9727)
[03:40:15] [INFO] [Bullet] Using shooter_position, distance=674.999877929688
[03:40:15] [INFO] [Bullet] Distance to wall: 674.999877929688 (45.9619829035604% of viewport)
[03:40:15] [INFO] [Bullet] Distance-based penetration chance: 93.0443532791796%
[03:40:15] [INFO] [Bullet] Caliber cannot penetrate walls
[03:40:15] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(238,793), corner_timer=-0.02
[03:40:15] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:40:15] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(238,793), corner_timer=0.30
[03:40:15] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(238.5554, 793.0805), shooter_id=680265780179, bullet_pos=(913.1249, 768.9875)
[03:40:15] [INFO] [Bullet] Using shooter_position, distance=674.999633789063
[03:40:15] [INFO] [Bullet] Distance to wall: 674.999633789063 (45.9619662795763% of viewport)
[03:40:15] [INFO] [Bullet] Distance-based penetration chance: 93.0443726738277%
[03:40:15] [INFO] [Bullet] Caliber cannot penetrate walls
[03:40:15] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[03:40:15] [INFO] [PauseMenu] Armory button pressed
[03:40:15] [INFO] [PauseMenu] Creating new armory menu instance
[03:40:15] [INFO] [PauseMenu] armory_menu_scene resource path: res://scenes/ui/ArmoryMenu.tscn
[03:40:15] [INFO] [PauseMenu] Instance created, class: CanvasLayer, name: ArmoryMenu
[03:40:15] [INFO] [PauseMenu] Script attached: res://scripts/ui/armory_menu.gd
[03:40:15] [INFO] [PauseMenu] back_pressed signal exists on instance
[03:40:15] [INFO] [PauseMenu] back_pressed signal connected
[03:40:16] [INFO] [PauseMenu] Armory menu instance added as child, is_inside_tree: true
[03:40:16] [INFO] [PauseMenu] _populate_weapon_grid method exists
[03:40:16] [INFO] [ReplayManager] Recording frame 240 (4,0s): player_valid=True, enemies=10
[03:40:17] [INFO] [ReplayManager] Recording frame 300 (5,0s): player_valid=True, enemies=10
[03:40:17] [INFO] [GameManager] Weapon selected: silenced_pistol
[03:40:17] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:40:17] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:17] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[03:40:17] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[03:40:17] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[03:40:17] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:40:17] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:40:17] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:40:17] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[03:40:17] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[03:40:17] [INFO] [FlashbangPlayer] Resetting flashbang player effects (scene change)
[03:40:17] [INFO] [EnemyGrenade] Initialized: 1 grenades
[03:40:17] [ENEMY] [Enemy1] Death animation component initialized
[03:40:17] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:17] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[03:40:17] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[03:40:17] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[03:40:17] [ENEMY] [Enemy2] Death animation component initialized
[03:40:17] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:17] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[03:40:17] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[03:40:17] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[03:40:17] [ENEMY] [Enemy3] Death animation component initialized
[03:40:17] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:17] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[03:40:17] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[03:40:17] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[03:40:17] [ENEMY] [Enemy4] Death animation component initialized
[03:40:17] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:17] [INFO] [BloodyFeet:Grenadier] Footprint scene loaded
[03:40:17] [INFO] [BloodyFeet:Grenadier] Found EnemyModel for facing direction
[03:40:17] [INFO] [BloodyFeet:Grenadier] BloodyFeetComponent ready on Grenadier
[03:40:17] [INFO] [EnemyGrenade] Grenade bag built (hard): [Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Defensive]
[03:40:17] [INFO] [EnemyGrenade] Grenadier initialized: 8 grenades in bag
[03:40:17] [ENEMY] [Grenadier] Death animation component initialized
[03:40:17] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:17] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[03:40:17] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[03:40:17] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[03:40:17] [ENEMY] [Enemy6] Death animation component initialized
[03:40:17] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:17] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[03:40:17] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[03:40:17] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[03:40:17] [ENEMY] [Enemy7] Death animation component initialized
[03:40:17] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:17] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[03:40:17] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[03:40:17] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[03:40:17] [ENEMY] [Enemy8] Death animation component initialized
[03:40:17] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:17] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[03:40:17] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[03:40:17] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[03:40:17] [INFO] [EnemyGrenade] Initialized: 1 grenades
[03:40:17] [ENEMY] [Enemy9] Death animation component initialized
[03:40:17] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:17] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[03:40:17] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[03:40:17] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[03:40:17] [INFO] [EnemyGrenade] Initialized: 1 grenades
[03:40:17] [ENEMY] [Enemy10] Death animation component initialized
[03:40:17] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:17] [INFO] [BloodyFeet:Player] Footprint scene loaded
[03:40:17] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[03:40:17] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[03:40:17] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:40:17] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:40:17] [INFO] [Player.Weapon] GameManager weapon selection: silenced_pistol (SilencedPistol)
[03:40:17] [INFO] [Player.Weapon] Removed default MakarovPM
[03:40:17] [INFO] [Player.Weapon] Equipped SilencedPistol (ammo: 13/13)
[03:40:17] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:40:17] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:40:17] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:40:17] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:40:17] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[03:40:17] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:40:17] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[03:40:17] [INFO] [Player.TeleportBracers] No teleport bracers selected in ActiveItemManager
[03:40:17] [INFO] [Player.Homing] Homing activation sound loaded
[03:40:17] [INFO] [Player.Homing] Homing bullets equipped, charges: 6/6
[03:40:17] [INFO] [Player] Ready! Ammo: 13/13, Grenades: 1/3, Health: 3/4
[03:40:17] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:40:17] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:40:17] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:40:17] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:40:17] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:40:17] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:40:17] [INFO] [BuildingLevel] Child 'Grenadier': script=true, has_died_signal=true
[03:40:17] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:40:17] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:40:17] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:40:17] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:40:17] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:40:17] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:40:17] [INFO] [BuildingLevel] Setting up weapon: silenced_pistol
[03:40:17] [INFO] [BuildingLevel] SilencedPistol already equipped by C# Player - skipping GDScript weapon swap
[03:40:17] [INFO] [ScoreManager] Level started with 10 enemies
[03:40:17] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[03:40:17] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[03:40:17] [INFO] [ReplayManager] Replay data cleared
[03:40:17] [INFO] [BuildingLevel] Previous replay data cleared
[03:40:17] [INFO] [ReplayManager] Detected player weapon: Silenced Pistol
[03:40:17] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[03:40:17] [INFO] [ReplayManager] Level: BuildingLevel
[03:40:17] [INFO] [ReplayManager] Player: Player (valid: True)
[03:40:17] [INFO] [ReplayManager] Enemies count: 10
[03:40:17] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/silenced_pistol_topdown.png
[03:40:17] [INFO] [ReplayManager]   Enemy 0: Enemy1
[03:40:17] [INFO] [ReplayManager]   Enemy 1: Enemy2
[03:40:17] [INFO] [ReplayManager]   Enemy 2: Enemy3
[03:40:17] [INFO] [ReplayManager]   Enemy 3: Enemy4
[03:40:17] [INFO] [ReplayManager]   Enemy 4: Grenadier
[03:40:17] [INFO] [ReplayManager]   Enemy 5: Enemy6
[03:40:17] [INFO] [ReplayManager]   Enemy 6: Enemy7
[03:40:17] [INFO] [ReplayManager]   Enemy 7: Enemy8
[03:40:17] [INFO] [ReplayManager]   Enemy 8: Enemy9
[03:40:17] [INFO] [ReplayManager]   Enemy 9: Enemy10
[03:40:17] [INFO] [BuildingLevel] Replay recording started successfully
[03:40:17] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[03:40:17] [INFO] [CinemaEffects] Found player node: Player
[03:40:17] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[03:40:17] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[03:40:17] [ENEMY] [Enemy1] Registered as sound listener
[03:40:17] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[03:40:17] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[03:40:17] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[03:40:17] [ENEMY] [Enemy2] Registered as sound listener
[03:40:17] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[03:40:17] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[03:40:17] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[03:40:17] [ENEMY] [Enemy3] Registered as sound listener
[03:40:17] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[03:40:17] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[03:40:17] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[03:40:17] [ENEMY] [Enemy4] Registered as sound listener
[03:40:17] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[03:40:17] [INFO] [BloodyFeet:Grenadier] Blood detector created and attached to Grenadier
[03:40:17] [INFO] [SoundPropagation] Registered listener: Grenadier (total: 15)
[03:40:17] [ENEMY] [Grenadier] Registered as sound listener
[03:40:17] [ENEMY] [Grenadier] Spawned at (1700, 350), hp: 2, behavior: GUARD
[03:40:17] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[03:40:17] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[03:40:17] [ENEMY] [Enemy6] Registered as sound listener
[03:40:17] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[03:40:17] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[03:40:17] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[03:40:17] [ENEMY] [Enemy7] Registered as sound listener
[03:40:17] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[03:40:17] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[03:40:17] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[03:40:17] [ENEMY] [Enemy8] Registered as sound listener
[03:40:17] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[03:40:17] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[03:40:17] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[03:40:17] [ENEMY] [Enemy9] Registered as sound listener
[03:40:17] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[03:40:17] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[03:40:17] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[03:40:17] [ENEMY] [Enemy10] Registered as sound listener
[03:40:17] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[03:40:17] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[03:40:18] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[03:40:18] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:18] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:18] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:18] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:18] [ENEMY] [Grenadier] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:18] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:18] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:18] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:18] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:40:18] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[03:40:18] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[03:40:18] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:40:18] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:40:18] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:40:18] [INFO] [LastChance] Found player: Player
[03:40:18] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:40:18] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:40:18] [INFO] [LastChance] Connected to player Died signal (C#)
[03:40:18] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[03:40:18] [INFO] [Player.Homing] Homing activated! Duration: 1s, charges remaining: 5/6
[03:40:19] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[03:40:19] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=164.6°, current=-168.8°, player=(232,878), corner_timer=0.00
[03:40:19] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[03:40:19] [ENEMY] [Enemy4] Memory: high confidence (0.90) - transitioning to PURSUING
[03:40:19] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[03:40:19] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:40:19] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:40:19] [ENEMY] [Enemy2] Memory: high confidence (0.90) - transitioning to PURSUING
[03:40:19] [ENEMY] [Enemy2] State: IDLE -> PURSUING
[03:40:19] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=-177.5°, current=-101.3°, player=(229,875), corner_timer=0.00
[03:40:19] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(229,875), corner_timer=0.30
[03:40:19] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(229,875), corner_timer=0.30
[03:40:19] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=118.3°, current=-101.3°, player=(226,872), corner_timer=0.00
[03:40:19] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=165.5°, current=-9.4°, player=(226,872), corner_timer=0.00
[03:40:19] [ENEMY] [Enemy2] PURSUING corner check: angle 29.0°
[03:40:19] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[03:40:19] [INFO] [Player.Homing] Homing effect expired, charges remaining: 5/6
[03:40:19] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(206,852), corner_timer=-0.02
[03:40:19] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:40:19] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(206,852), corner_timer=-0.02
[03:40:19] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:40:19] [ENEMY] [Enemy3] Hit: dmg=10, hp=3/3->-7/3
[03:40:19] [INFO] [ImpactEffects] spawn_blood_effect called at (595.8688, 773.0312), dir=(0.960977, -0.276629), lethal=true
[03:40:19] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:40:19] [INFO] [ImpactEffects] Blood decals scheduled: 20 to spawn at particle landing times
[03:40:19] [INFO] [ImpactEffects] Blood effect spawned at (595.8688, 773.0312) (scale=0.75)
[03:40:19] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[03:40:19] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[03:40:19] [ENEMY] [Enemy3] [AllyDeath] Notified 2 enemies
[03:40:19] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 19)
[03:40:19] [INFO] [DeathAnim] Started - Angle: -16.1 deg, Index: 10
[03:40:19] [ENEMY] [Enemy3] Death animation started with hit direction: (0.960977, -0.276629)
[03:40:19] [INFO] [FlashbangStatus] Status: STUNNED applied
[03:40:19] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(206,852), corner_timer=0.30
[03:40:19] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(206,852), corner_timer=0.30
[03:40:20] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[03:40:20] [ENEMY] [Enemy4] PURSUING corner check: angle -94.0°
[03:40:20] [INFO] [BloodDecal] Blood puddle created at (660.9731, 790.999) (added to group)
[03:40:20] [INFO] [BloodDecal] Blood puddle created at (658.7769, 766.3674) (added to group)
[03:40:20] [INFO] [BloodDecal] Blood puddle created at (685.0267, 782.6311) (added to group)
[03:40:20] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(206,852), corner_timer=-0.02
[03:40:20] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:40:20] [INFO] [BloodDecal] Blood puddle created at (691.863, 792.6215) (added to group)
[03:40:20] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(206,852), corner_timer=0.30
[03:40:20] [INFO] [BloodDecal] Blood puddle created at (692.272, 788.77) (added to group)
[03:40:20] [INFO] [BloodDecal] Blood puddle created at (715.546, 799.4863) (added to group)
[03:40:20] [INFO] [BloodDecal] Blood puddle created at (694.7659, 802.8699) (added to group)
[03:40:20] [INFO] [BloodDecal] Blood puddle created at (709.8748, 732.5076) (added to group)
[03:40:20] [ENEMY] [Enemy3] Ragdoll activated
[03:40:20] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[03:40:20] [INFO] [BloodDecal] Blood puddle created at (703.5275, 750.1672) (added to group)
[03:40:20] [INFO] [BloodDecal] Blood puddle created at (677.6068, 826.5524) (added to group)
[03:40:20] [INFO] [BloodDecal] Blood puddle created at (668.8386, 781.7438) (added to group)
[03:40:20] [INFO] [BloodDecal] Blood puddle created at (749.0963, 801.0812) (added to group)
[03:40:20] [INFO] [FlashbangStatus] Status: STUNNED removed
[03:40:20] [INFO] [BloodDecal] Blood puddle created at (686.0565, 790.0253) (added to group)
[03:40:20] [INFO] [BloodDecal] Blood puddle created at (750.8907, 779.0877) (added to group)
[03:40:20] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(206,852), corner_timer=-0.02
[03:40:20] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:40:20] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(206,852), corner_timer=0.30
[03:40:20] [INFO] [BloodDecal] Blood puddle created at (768.019, 770.9191) (added to group)
[03:40:20] [INFO] [Player.Homing] Homing activated! Duration: 1s, charges remaining: 4/6
[03:40:20] [INFO] [BloodDecal] Blood puddle created at (787.2754, 758.5229) (added to group)
[03:40:20] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(206,852), corner_timer=-0.02
[03:40:20] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:40:20] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(206,852), corner_timer=0.30
[03:40:21] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[03:40:21] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(206,821), corner_timer=-0.02
[03:40:21] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[03:40:21] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(206,817), corner_timer=0.30
[03:40:21] [ENEMY] [Enemy2] PURSUING corner check: angle -92.1°
[03:40:21] [ENEMY] [Enemy3] Death animation completed
[03:40:21] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:40:21] [INFO] [Player.Homing] Homing effect expired, charges remaining: 4/6
[03:40:21] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=-130.1°, player=(206,738), corner_timer=-0.02
[03:40:21] [ENEMY] [Enemy7] PATROL corner check: angle 90.0°
[03:40:21] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=90.0°, current=-133.0°, player=(206,738), corner_timer=0.30
[03:40:21] [ENEMY] [Enemy2] PURSUING corner check: angle -97.2°
[03:40:21] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:40:21] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:21] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[03:40:21] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[03:40:21] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[03:40:21] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:40:21] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:40:21] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:40:21] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[03:40:21] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[03:40:21] [INFO] [FlashbangPlayer] Resetting flashbang player effects (scene change)
[03:40:21] [ENEMY] [Enemy1] Death animation component initialized
[03:40:21] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:21] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[03:40:21] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[03:40:21] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[03:40:21] [ENEMY] [Enemy2] Death animation component initialized
[03:40:21] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:21] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[03:40:21] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[03:40:21] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[03:40:21] [ENEMY] [Enemy3] Death animation component initialized
[03:40:21] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:21] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[03:40:21] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[03:40:21] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[03:40:21] [ENEMY] [Enemy4] Death animation component initialized
[03:40:21] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:21] [INFO] [BloodyFeet:Grenadier] Footprint scene loaded
[03:40:21] [INFO] [BloodyFeet:Grenadier] Found EnemyModel for facing direction
[03:40:21] [INFO] [BloodyFeet:Grenadier] BloodyFeetComponent ready on Grenadier
[03:40:21] [INFO] [EnemyGrenade] Grenade bag built (hard): [Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Defensive]
[03:40:21] [INFO] [EnemyGrenade] Grenadier initialized: 8 grenades in bag
[03:40:21] [ENEMY] [Grenadier] Death animation component initialized
[03:40:21] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:21] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[03:40:21] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[03:40:21] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[03:40:21] [ENEMY] [Enemy6] Death animation component initialized
[03:40:21] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:21] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[03:40:21] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[03:40:21] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[03:40:21] [ENEMY] [Enemy7] Death animation component initialized
[03:40:21] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:21] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[03:40:21] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[03:40:21] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[03:40:21] [INFO] [EnemyGrenade] Initialized: 1 grenades
[03:40:21] [ENEMY] [Enemy8] Death animation component initialized
[03:40:21] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:21] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[03:40:21] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[03:40:21] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[03:40:21] [ENEMY] [Enemy9] Death animation component initialized
[03:40:21] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:21] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[03:40:21] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[03:40:21] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[03:40:21] [ENEMY] [Enemy10] Death animation component initialized
[03:40:21] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:21] [INFO] [BloodyFeet:Player] Footprint scene loaded
[03:40:21] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[03:40:21] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[03:40:21] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:40:21] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:40:21] [INFO] [Player.Weapon] GameManager weapon selection: silenced_pistol (SilencedPistol)
[03:40:21] [INFO] [Player.Weapon] Removed default MakarovPM
[03:40:21] [INFO] [Player.Weapon] Equipped SilencedPistol (ammo: 13/13)
[03:40:21] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:40:21] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:40:21] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:40:21] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:40:21] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[03:40:21] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:40:21] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[03:40:21] [INFO] [Player.TeleportBracers] No teleport bracers selected in ActiveItemManager
[03:40:21] [INFO] [Player.Homing] Homing activation sound loaded
[03:40:21] [INFO] [Player.Homing] Homing bullets equipped, charges: 6/6
[03:40:21] [INFO] [Player] Ready! Ammo: 13/13, Grenades: 1/3, Health: 2/4
[03:40:21] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:40:21] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:40:21] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:40:21] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:40:21] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:40:21] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:40:21] [INFO] [BuildingLevel] Child 'Grenadier': script=true, has_died_signal=true
[03:40:21] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:40:21] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:40:21] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:40:21] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:40:21] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:40:21] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:40:21] [INFO] [BuildingLevel] Setting up weapon: silenced_pistol
[03:40:21] [INFO] [BuildingLevel] SilencedPistol already equipped by C# Player - skipping GDScript weapon swap
[03:40:21] [INFO] [ScoreManager] Level started with 10 enemies
[03:40:21] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[03:40:21] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[03:40:21] [INFO] [ReplayManager] Replay data cleared
[03:40:21] [INFO] [BuildingLevel] Previous replay data cleared
[03:40:21] [INFO] [ReplayManager] Detected player weapon: Silenced Pistol
[03:40:21] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[03:40:21] [INFO] [ReplayManager] Level: BuildingLevel
[03:40:21] [INFO] [ReplayManager] Player: Player (valid: True)
[03:40:21] [INFO] [ReplayManager] Enemies count: 10
[03:40:21] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/silenced_pistol_topdown.png
[03:40:21] [INFO] [ReplayManager]   Enemy 0: Enemy1
[03:40:21] [INFO] [ReplayManager]   Enemy 1: Enemy2
[03:40:21] [INFO] [ReplayManager]   Enemy 2: Enemy3
[03:40:21] [INFO] [ReplayManager]   Enemy 3: Enemy4
[03:40:21] [INFO] [ReplayManager]   Enemy 4: Grenadier
[03:40:21] [INFO] [ReplayManager]   Enemy 5: Enemy6
[03:40:21] [INFO] [ReplayManager]   Enemy 6: Enemy7
[03:40:21] [INFO] [ReplayManager]   Enemy 7: Enemy8
[03:40:21] [INFO] [ReplayManager]   Enemy 8: Enemy9
[03:40:21] [INFO] [ReplayManager]   Enemy 9: Enemy10
[03:40:21] [INFO] [BuildingLevel] Replay recording started successfully
[03:40:21] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[03:40:21] [INFO] [CinemaEffects] Found player node: Player
[03:40:21] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[03:40:21] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 20)
[03:40:21] [ENEMY] [Enemy1] Registered as sound listener
[03:40:21] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[03:40:21] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[03:40:21] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 21)
[03:40:21] [ENEMY] [Enemy2] Registered as sound listener
[03:40:21] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[03:40:21] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[03:40:21] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 22)
[03:40:21] [ENEMY] [Enemy3] Registered as sound listener
[03:40:21] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[03:40:21] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[03:40:21] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 23)
[03:40:21] [ENEMY] [Enemy4] Registered as sound listener
[03:40:21] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[03:40:21] [INFO] [BloodyFeet:Grenadier] Blood detector created and attached to Grenadier
[03:40:21] [INFO] [SoundPropagation] Registered listener: Grenadier (total: 24)
[03:40:21] [ENEMY] [Grenadier] Registered as sound listener
[03:40:21] [ENEMY] [Grenadier] Spawned at (1700, 350), hp: 2, behavior: GUARD
[03:40:21] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[03:40:21] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 25)
[03:40:21] [ENEMY] [Enemy6] Registered as sound listener
[03:40:21] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[03:40:21] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[03:40:21] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 26)
[03:40:21] [ENEMY] [Enemy7] Registered as sound listener
[03:40:21] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[03:40:21] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[03:40:21] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 27)
[03:40:21] [ENEMY] [Enemy8] Registered as sound listener
[03:40:21] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[03:40:21] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[03:40:21] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 28)
[03:40:21] [ENEMY] [Enemy9] Registered as sound listener
[03:40:21] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[03:40:21] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[03:40:21] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 29)
[03:40:21] [ENEMY] [Enemy10] Registered as sound listener
[03:40:21] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[03:40:21] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[03:40:22] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[03:40:22] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:22] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:22] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:22] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:22] [ENEMY] [Grenadier] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=303.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:22] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:22] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=78.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:22] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=56.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:22] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:40:22] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[03:40:22] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[03:40:22] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:40:22] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:40:22] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:40:22] [INFO] [LastChance] Found player: Player
[03:40:22] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:40:22] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:40:22] [INFO] [LastChance] Connected to player Died signal (C#)
[03:40:22] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[03:40:23] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[03:40:23] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:40:23] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:40:23] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(390,970), corner_timer=0.30
[03:40:23] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(390,970), corner_timer=0.30
[03:40:23] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(317,896), corner_timer=-0.02
[03:40:23] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:40:23] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(317,896), corner_timer=-0.02
[03:40:23] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:40:23] [INFO] [Player.Homing] Homing activated! Duration: 1s, charges remaining: 5/6
[03:40:23] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(313,892), corner_timer=0.30
[03:40:23] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(313,892), corner_timer=0.30
[03:40:24] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[03:40:24] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P1:visible, state=IDLE, target=164.4°, current=123.7°, player=(285,865), corner_timer=0.00
[03:40:24] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[03:40:24] [ENEMY] [Enemy3] ROT_CHANGE: P1:visible -> P2:combat_state, state=COMBAT, target=165.6°, current=-65.5°, player=(278,858), corner_timer=0.00
[03:40:24] [ENEMY] [Enemy4] Memory: high confidence (0.89) - transitioning to PURSUING
[03:40:24] [ENEMY] [Enemy4] State: IDLE -> PURSUING
[03:40:24] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=-174.8°, current=168.8°, player=(270,851), corner_timer=0.00
[03:40:24] [ENEMY] [Enemy4] PURSUING corner check: angle -100.7°
[03:40:24] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(249,832), corner_timer=-0.02
[03:40:24] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:40:24] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(247,830), corner_timer=0.30
[03:40:24] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=COMBAT, target=171.2°, current=-139.5°, player=(241,825), corner_timer=0.00
[03:40:24] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(241,825), corner_timer=-0.02
[03:40:24] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:40:24] [ENEMY] [Enemy4] PURSUING corner check: angle -94.0°
[03:40:24] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(241,825), corner_timer=0.30
[03:40:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(529.3032, 776.1887), source=ENEMY (Enemy3), range=1469, listeners=29
[03:40:24] [INFO] [SoundPropagation] Cleaned up 19 invalid listeners
[03:40:24] [ENEMY] [Enemy1] Heard gunshot at (529.3032, 776.1887), source_type=1, intensity=0.01, distance=484
[03:40:24] [ENEMY] [Enemy2] Heard gunshot at (529.3032, 776.1887), source_type=1, intensity=0.04, distance=261
[03:40:24] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:40:24] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=97.1°, current=-157.5°, player=(241,825), corner_timer=0.00
[03:40:24] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=120.0°, current=168.8°, player=(241,825), corner_timer=0.00
[03:40:24] [INFO] [LastChance] Threat detected: Bullet
[03:40:24] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:40:24] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:40:24] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[03:40:24] [INFO] [Player] Spawning blood effect at (241.14363, 825.22003), dir=(1, 0), lethal=False (C#)
[03:40:24] [INFO] [ImpactEffects] spawn_blood_effect called at (241.1436, 825.22), dir=(1, 0), lethal=false
[03:40:24] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:40:24] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:40:24] [INFO] [ImpactEffects] Blood effect spawned at (241.1436, 825.22) (scale=1)
[03:40:24] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[03:40:24] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[03:40:24] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[03:40:24] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(510.4552, 775.9334), source=ENEMY (Enemy3), range=1469, listeners=10
[03:40:24] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[03:40:24] [INFO] [SoundPropagation] Sound emitted: type=CASING_KICK, pos=(508.8115, 762.8362), source=NEUTRAL (null), range=900, listeners=10
[03:40:24] [ENEMY] [Enemy1] Heard CASING_KICK at (508.8115, 762.8362), intensity=0.01, dist=433
[03:40:24] [ENEMY] [Enemy2] Heard CASING_KICK at (508.8115, 762.8362), intensity=0.05, dist=219
[03:40:24] [ENEMY] [Enemy3] Heard CASING_KICK at (508.8115, 762.8362), intensity=1.00, dist=16
[03:40:24] [ENEMY] [Enemy4] Heard CASING_KICK at (508.8115, 762.8362), intensity=0.08, dist=172
[03:40:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
[03:40:24] [INFO] [SoundPropagation] Sound emitted: type=CASING_KICK, pos=(507.9, 760.7399), source=NEUTRAL (null), range=900, listeners=10
[03:40:24] [ENEMY] [Enemy1] Heard CASING_KICK at (507.9, 760.7399), intensity=0.01, dist=428
[03:40:24] [ENEMY] [Enemy2] Heard CASING_KICK at (507.9, 760.7399), intensity=0.05, dist=215
[03:40:24] [ENEMY] [Enemy3] Heard CASING_KICK at (507.9, 760.7399), intensity=1.00, dist=20
[03:40:24] [ENEMY] [Enemy4] Heard CASING_KICK at (507.9, 760.7399), intensity=0.09, dist=171
[03:40:24] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=6, self=0, below_threshold=0
[03:40:24] [INFO] [LastChance] Threat detected: Bullet
[03:40:24] [INFO] [LastChance] Triggering last chance effect!
[03:40:24] [INFO] [LastChance] Starting last chance effect:
[03:40:24] [INFO] [LastChance]   - Time will be frozen (except player)
[03:40:24] [INFO] [LastChance]   - Duration: 6.00 real seconds
[03:40:24] [INFO] [LastChance]   - Trigger: threat detected
[03:40:24] [INFO] [LastChance]   - Sepia intensity: 0.70
[03:40:24] [INFO] [LastChance]   - Brightness: 0.60
[03:40:24] [INFO] [LastChance] Pushed bullet @Area2D@4129 from distance 100.5 to 200.0
[03:40:24] [INFO] [LastChance] Pushed bullet Bullet from distance 121.1 to 200.0
[03:40:24] [INFO] [LastChance] Pushed 2 threatening bullets away from player
[03:40:24] [INFO] [LastChance] Set player Player and all 34 children to PROCESS_MODE_ALWAYS
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[03:40:24] [INFO] [LastChance] Skipping player node: Player
[03:40:24] [INFO] [LastChance] Froze existing bullet casing: Casing
[03:40:24] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4128
[03:40:24] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@4131
[03:40:24] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[03:40:24] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[03:40:24] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[03:40:24] [INFO] [Player.Homing] Homing effect expired, charges remaining: 5/6
[03:40:24] [INFO] [BloodDecal] Blood puddle created at (285.8482, 837.6309) (added to group)
[03:40:24] [INFO] [BloodDecal] Blood puddle created at (316.1901, 806.8994) (added to group)
[03:40:24] [INFO] [BloodDecal] Blood puddle created at (291.8784, 820.6969) (added to group)
[03:40:24] [INFO] [BloodDecal] Blood puddle created at (296.8054, 857.9904) (added to group)
[03:40:24] [INFO] [BloodDecal] Blood puddle created at (293.2816, 869.3046) (added to group)
[03:40:25] [INFO] [BloodDecal] Blood puddle created at (319.2284, 868.3934) (added to group)
[03:40:25] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[03:40:25] [INFO] [BloodDecal] Blood puddle created at (308.3974, 871.2831) (added to group)
[03:40:25] [INFO] [BloodDecal] Blood puddle created at (417.1856, 936.3474) (added to group)
[03:40:25] [INFO] [BloodDecal] Blood puddle created at (423.5223, 931.117) (added to group)
[03:40:25] [INFO] [BloodDecal] Blood puddle created at (406.6163, 857.0327) (added to group)
[03:40:25] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:40:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:25] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[03:40:25] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[03:40:25] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[03:40:25] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:40:25] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:40:25] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:40:25] [INFO] [LastChance] All process modes restored
[03:40:25] [INFO] [LastChance] Restored original colors to 5 player sprites
[03:40:25] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[03:40:25] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[03:40:25] [INFO] [FlashbangPlayer] Resetting flashbang player effects (scene change)
[03:40:25] [INFO] [EnemyGrenade] Initialized: 1 grenades
[03:40:25] [ENEMY] [Enemy1] Death animation component initialized
[03:40:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:25] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[03:40:25] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[03:40:25] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[03:40:25] [ENEMY] [Enemy2] Death animation component initialized
[03:40:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:25] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[03:40:25] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[03:40:25] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[03:40:25] [ENEMY] [Enemy3] Death animation component initialized
[03:40:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:25] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[03:40:25] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[03:40:25] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[03:40:25] [ENEMY] [Enemy4] Death animation component initialized
[03:40:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:25] [INFO] [BloodyFeet:Grenadier] Footprint scene loaded
[03:40:25] [INFO] [BloodyFeet:Grenadier] Found EnemyModel for facing direction
[03:40:25] [INFO] [BloodyFeet:Grenadier] BloodyFeetComponent ready on Grenadier
[03:40:25] [INFO] [EnemyGrenade] Grenade bag built (hard): [Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Defensive]
[03:40:25] [INFO] [EnemyGrenade] Grenadier initialized: 8 grenades in bag
[03:40:25] [ENEMY] [Grenadier] Death animation component initialized
[03:40:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:25] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[03:40:25] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[03:40:25] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[03:40:25] [ENEMY] [Enemy6] Death animation component initialized
[03:40:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:25] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[03:40:25] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[03:40:25] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[03:40:25] [INFO] [EnemyGrenade] Initialized: 1 grenades
[03:40:25] [ENEMY] [Enemy7] Death animation component initialized
[03:40:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:25] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[03:40:25] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[03:40:25] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[03:40:25] [ENEMY] [Enemy8] Death animation component initialized
[03:40:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:25] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[03:40:25] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[03:40:25] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[03:40:25] [ENEMY] [Enemy9] Death animation component initialized
[03:40:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:25] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[03:40:25] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[03:40:25] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[03:40:25] [INFO] [EnemyGrenade] Initialized: 1 grenades
[03:40:25] [ENEMY] [Enemy10] Death animation component initialized
[03:40:25] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:25] [INFO] [BloodyFeet:Player] Footprint scene loaded
[03:40:25] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[03:40:25] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[03:40:25] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:40:25] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:40:25] [INFO] [Player.Weapon] GameManager weapon selection: silenced_pistol (SilencedPistol)
[03:40:25] [INFO] [Player.Weapon] Removed default MakarovPM
[03:40:25] [INFO] [Player.Weapon] Equipped SilencedPistol (ammo: 13/13)
[03:40:25] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:40:25] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:40:25] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:40:25] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:40:25] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[03:40:25] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:40:25] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[03:40:25] [INFO] [Player.TeleportBracers] No teleport bracers selected in ActiveItemManager
[03:40:25] [INFO] [Player.Homing] Homing activation sound loaded
[03:40:25] [INFO] [Player.Homing] Homing bullets equipped, charges: 6/6
[03:40:25] [INFO] [Player] Ready! Ammo: 13/13, Grenades: 1/3, Health: 4/4
[03:40:25] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:40:25] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:40:25] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:40:25] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:40:25] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:40:25] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:40:25] [INFO] [BuildingLevel] Child 'Grenadier': script=true, has_died_signal=true
[03:40:25] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:40:25] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:40:25] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:40:25] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:40:25] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:40:25] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:40:25] [INFO] [BuildingLevel] Setting up weapon: silenced_pistol
[03:40:25] [INFO] [BuildingLevel] SilencedPistol already equipped by C# Player - skipping GDScript weapon swap
[03:40:25] [INFO] [ScoreManager] Level started with 10 enemies
[03:40:25] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[03:40:25] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[03:40:25] [INFO] [ReplayManager] Replay data cleared
[03:40:25] [INFO] [BuildingLevel] Previous replay data cleared
[03:40:25] [INFO] [ReplayManager] Detected player weapon: Silenced Pistol
[03:40:25] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[03:40:25] [INFO] [ReplayManager] Level: BuildingLevel
[03:40:25] [INFO] [ReplayManager] Player: Player (valid: True)
[03:40:25] [INFO] [ReplayManager] Enemies count: 10
[03:40:25] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/silenced_pistol_topdown.png
[03:40:25] [INFO] [ReplayManager]   Enemy 0: Enemy1
[03:40:25] [INFO] [ReplayManager]   Enemy 1: Enemy2
[03:40:25] [INFO] [ReplayManager]   Enemy 2: Enemy3
[03:40:25] [INFO] [ReplayManager]   Enemy 3: Enemy4
[03:40:25] [INFO] [ReplayManager]   Enemy 4: Grenadier
[03:40:25] [INFO] [ReplayManager]   Enemy 5: Enemy6
[03:40:25] [INFO] [ReplayManager]   Enemy 6: Enemy7
[03:40:25] [INFO] [ReplayManager]   Enemy 7: Enemy8
[03:40:25] [INFO] [ReplayManager]   Enemy 8: Enemy9
[03:40:25] [INFO] [ReplayManager]   Enemy 9: Enemy10
[03:40:25] [INFO] [BuildingLevel] Replay recording started successfully
[03:40:25] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[03:40:25] [INFO] [CinemaEffects] Found player node: Player
[03:40:25] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[03:40:25] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[03:40:25] [ENEMY] [Enemy1] Registered as sound listener
[03:40:25] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[03:40:25] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[03:40:25] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[03:40:25] [ENEMY] [Enemy2] Registered as sound listener
[03:40:25] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[03:40:25] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[03:40:25] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[03:40:25] [ENEMY] [Enemy3] Registered as sound listener
[03:40:25] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[03:40:25] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[03:40:25] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[03:40:25] [ENEMY] [Enemy4] Registered as sound listener
[03:40:25] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[03:40:25] [INFO] [BloodyFeet:Grenadier] Blood detector created and attached to Grenadier
[03:40:25] [INFO] [SoundPropagation] Registered listener: Grenadier (total: 15)
[03:40:25] [ENEMY] [Grenadier] Registered as sound listener
[03:40:25] [ENEMY] [Grenadier] Spawned at (1700, 350), hp: 2, behavior: GUARD
[03:40:25] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[03:40:25] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[03:40:25] [ENEMY] [Enemy6] Registered as sound listener
[03:40:25] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[03:40:25] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[03:40:25] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[03:40:25] [ENEMY] [Enemy7] Registered as sound listener
[03:40:25] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[03:40:25] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[03:40:25] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[03:40:25] [ENEMY] [Enemy8] Registered as sound listener
[03:40:25] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[03:40:25] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[03:40:25] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[03:40:25] [ENEMY] [Enemy9] Registered as sound listener
[03:40:25] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[03:40:25] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[03:40:25] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[03:40:25] [ENEMY] [Enemy10] Registered as sound listener
[03:40:25] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 3, behavior: PATROL
[03:40:25] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[03:40:26] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[03:40:26] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:26] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:26] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:26] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:26] [ENEMY] [Grenadier] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:26] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:26] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:26] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:26] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:40:26] [INFO] [Player] Detected weapon: Silenced Pistol (Pistol pose)
[03:40:26] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[03:40:26] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:40:26] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:40:26] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:40:26] [INFO] [LastChance] Found player: Player
[03:40:26] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:40:26] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:40:26] [INFO] [LastChance] Connected to player Died signal (C#)
[03:40:26] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[03:40:27] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[03:40:27] [INFO] [Player.Homing] Homing activated! Duration: 1s, charges remaining: 5/6
[03:40:27] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:40:27] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:40:27] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(270,938), corner_timer=0.30
[03:40:27] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(270,938), corner_timer=0.30
[03:40:27] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(216,902), corner_timer=-0.02
[03:40:27] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:40:27] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(216,902), corner_timer=-0.02
[03:40:27] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:40:27] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(215,902), corner_timer=0.30
[03:40:27] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(215,902), corner_timer=0.30
[03:40:28] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[03:40:28] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(215,902), corner_timer=-0.02
[03:40:28] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:40:28] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(215,902), corner_timer=0.30
[03:40:28] [INFO] [Player.Homing] Homing effect expired, charges remaining: 5/6
[03:40:28] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(215,902), corner_timer=-0.02
[03:40:28] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:40:28] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(215,902), corner_timer=0.30
[03:40:28] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(215,902), corner_timer=-0.02
[03:40:28] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:40:28] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(215,902), corner_timer=0.30
[03:40:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(215.054, 902.3051), shooter_id=940144856972, bullet_pos=(1364.508, 361.0807)
[03:40:29] [INFO] [Bullet] Using shooter_position, distance=1270.49914550781
[03:40:29] [INFO] [Bullet] Distance to wall: 1270.49914550781 (86.510623059551% of viewport)
[03:40:29] [INFO] [Bullet] Distance-based penetration chance: 45.7376064305239%
[03:40:29] [INFO] [Bullet] Penetration failed (distance roll)
[03:40:29] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[03:40:29] [INFO] [PauseMenu] Armory button pressed
[03:40:29] [INFO] [PauseMenu] Creating new armory menu instance
[03:40:29] [INFO] [PauseMenu] armory_menu_scene resource path: res://scenes/ui/ArmoryMenu.tscn
[03:40:29] [INFO] [PauseMenu] Instance created, class: CanvasLayer, name: ArmoryMenu
[03:40:29] [INFO] [PauseMenu] Script attached: res://scripts/ui/armory_menu.gd
[03:40:29] [INFO] [PauseMenu] back_pressed signal exists on instance
[03:40:29] [INFO] [PauseMenu] back_pressed signal connected
[03:40:29] [INFO] [PauseMenu] Armory menu instance added as child, is_inside_tree: true
[03:40:29] [INFO] [PauseMenu] _populate_weapon_grid method exists
[03:40:30] [INFO] [ReplayManager] Recording frame 240 (4,0s): player_valid=True, enemies=10
[03:40:31] [INFO] [ReplayManager] Recording frame 300 (5,0s): player_valid=True, enemies=10
[03:40:31] [INFO] [GameManager] Weapon selected: sniper
[03:40:31] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:40:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:31] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[03:40:31] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[03:40:31] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[03:40:31] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:40:31] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:40:31] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:40:31] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[03:40:31] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[03:40:31] [INFO] [FlashbangPlayer] Resetting flashbang player effects (scene change)
[03:40:31] [ENEMY] [Enemy1] Death animation component initialized
[03:40:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:31] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[03:40:31] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[03:40:31] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[03:40:31] [ENEMY] [Enemy2] Death animation component initialized
[03:40:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:31] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[03:40:31] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[03:40:31] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[03:40:31] [ENEMY] [Enemy3] Death animation component initialized
[03:40:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:31] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[03:40:31] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[03:40:31] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[03:40:31] [ENEMY] [Enemy4] Death animation component initialized
[03:40:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:31] [INFO] [BloodyFeet:Grenadier] Footprint scene loaded
[03:40:31] [INFO] [BloodyFeet:Grenadier] Found EnemyModel for facing direction
[03:40:31] [INFO] [BloodyFeet:Grenadier] BloodyFeetComponent ready on Grenadier
[03:40:31] [INFO] [EnemyGrenade] Grenade bag built (hard): [Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Defensive]
[03:40:31] [INFO] [EnemyGrenade] Grenadier initialized: 8 grenades in bag
[03:40:31] [ENEMY] [Grenadier] Death animation component initialized
[03:40:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:31] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[03:40:31] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[03:40:31] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[03:40:31] [INFO] [EnemyGrenade] Initialized: 1 grenades
[03:40:31] [ENEMY] [Enemy6] Death animation component initialized
[03:40:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:31] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[03:40:31] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[03:40:31] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[03:40:31] [ENEMY] [Enemy7] Death animation component initialized
[03:40:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:31] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[03:40:31] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[03:40:31] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[03:40:31] [ENEMY] [Enemy8] Death animation component initialized
[03:40:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:31] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[03:40:31] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[03:40:31] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[03:40:31] [ENEMY] [Enemy9] Death animation component initialized
[03:40:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:31] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[03:40:31] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[03:40:31] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[03:40:31] [ENEMY] [Enemy10] Death animation component initialized
[03:40:31] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:31] [INFO] [BloodyFeet:Player] Footprint scene loaded
[03:40:31] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[03:40:31] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[03:40:31] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:40:31] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:40:31] [INFO] [Player.Weapon] GameManager weapon selection: sniper (SniperRifle)
[03:40:31] [INFO] [Player.Weapon] Removed default MakarovPM
[03:40:31] [INFO] [Player.Weapon] Equipped SniperRifle (ammo: 5/5)
[03:40:31] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:40:31] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:40:31] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:40:31] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:40:31] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[03:40:31] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:40:31] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[03:40:31] [INFO] [Player.TeleportBracers] No teleport bracers selected in ActiveItemManager
[03:40:31] [INFO] [Player.Homing] Homing activation sound loaded
[03:40:31] [INFO] [Player.Homing] Homing bullets equipped, charges: 6/6
[03:40:31] [INFO] [Player] Ready! Ammo: 5/5, Grenades: 1/3, Health: 3/4
[03:40:31] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:40:31] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:40:31] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:40:31] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:40:31] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:40:31] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:40:31] [INFO] [BuildingLevel] Child 'Grenadier': script=true, has_died_signal=true
[03:40:31] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:40:31] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:40:31] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:40:31] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:40:31] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:40:31] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:40:31] [INFO] [BuildingLevel] Setting up weapon: sniper
[03:40:31] [INFO] [BuildingLevel] SniperRifle already equipped by C# Player - skipping GDScript weapon swap
[03:40:31] [INFO] [ScoreManager] Level started with 10 enemies
[03:40:31] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[03:40:31] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[03:40:31] [INFO] [ReplayManager] Replay data cleared
[03:40:31] [INFO] [BuildingLevel] Previous replay data cleared
[03:40:31] [INFO] [ReplayManager] Detected player weapon: Sniper Rifle (ASVK)
[03:40:31] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[03:40:31] [INFO] [ReplayManager] Level: BuildingLevel
[03:40:31] [INFO] [ReplayManager] Player: Player (valid: True)
[03:40:31] [INFO] [ReplayManager] Enemies count: 10
[03:40:31] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/asvk_topdown.png
[03:40:31] [INFO] [ReplayManager]   Enemy 0: Enemy1
[03:40:31] [INFO] [ReplayManager]   Enemy 1: Enemy2
[03:40:31] [INFO] [ReplayManager]   Enemy 2: Enemy3
[03:40:31] [INFO] [ReplayManager]   Enemy 3: Enemy4
[03:40:31] [INFO] [ReplayManager]   Enemy 4: Grenadier
[03:40:31] [INFO] [ReplayManager]   Enemy 5: Enemy6
[03:40:31] [INFO] [ReplayManager]   Enemy 6: Enemy7
[03:40:31] [INFO] [ReplayManager]   Enemy 7: Enemy8
[03:40:31] [INFO] [ReplayManager]   Enemy 8: Enemy9
[03:40:31] [INFO] [ReplayManager]   Enemy 9: Enemy10
[03:40:31] [INFO] [BuildingLevel] Replay recording started successfully
[03:40:31] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[03:40:31] [INFO] [CinemaEffects] Found player node: Player
[03:40:31] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[03:40:31] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[03:40:31] [ENEMY] [Enemy1] Registered as sound listener
[03:40:31] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 2, behavior: GUARD
[03:40:31] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[03:40:31] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[03:40:31] [ENEMY] [Enemy2] Registered as sound listener
[03:40:31] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[03:40:31] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[03:40:31] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[03:40:31] [ENEMY] [Enemy3] Registered as sound listener
[03:40:31] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[03:40:31] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[03:40:31] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[03:40:31] [ENEMY] [Enemy4] Registered as sound listener
[03:40:31] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[03:40:31] [INFO] [BloodyFeet:Grenadier] Blood detector created and attached to Grenadier
[03:40:31] [INFO] [SoundPropagation] Registered listener: Grenadier (total: 25)
[03:40:31] [ENEMY] [Grenadier] Registered as sound listener
[03:40:31] [ENEMY] [Grenadier] Spawned at (1700, 350), hp: 2, behavior: GUARD
[03:40:31] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[03:40:31] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[03:40:31] [ENEMY] [Enemy6] Registered as sound listener
[03:40:31] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 3, behavior: GUARD
[03:40:31] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[03:40:31] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[03:40:31] [ENEMY] [Enemy7] Registered as sound listener
[03:40:31] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[03:40:31] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[03:40:31] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[03:40:31] [ENEMY] [Enemy8] Registered as sound listener
[03:40:31] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 2, behavior: GUARD
[03:40:31] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[03:40:31] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[03:40:31] [ENEMY] [Enemy9] Registered as sound listener
[03:40:31] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[03:40:31] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[03:40:31] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[03:40:31] [ENEMY] [Enemy10] Registered as sound listener
[03:40:31] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[03:40:31] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[03:40:31] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[03:40:31] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=33.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:31] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:31] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=236.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:31] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:31] [ENEMY] [Grenadier] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:31] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:31] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=213.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:31] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:31] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:40:31] [INFO] [Player] Detected weapon: ASVK Sniper Rifle (Sniper pose)
[03:40:31] [INFO] [Player] Applied Sniper arm pose: Left=(28, 6), Right=(-3, 6)
[03:40:31] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:40:31] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:40:31] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:40:31] [INFO] [LastChance] Found player: Player
[03:40:31] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:40:31] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:40:31] [INFO] [LastChance] Connected to player Died signal (C#)
[03:40:31] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[03:40:32] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[03:40:32] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:40:32] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:40:32] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(304,946), corner_timer=0.30
[03:40:32] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(304,946), corner_timer=0.30
[03:40:32] [INFO] [Player.Homing] Homing activated! Duration: 1s, charges remaining: 5/6
[03:40:33] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(303,941), corner_timer=-0.02
[03:40:33] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:40:33] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(303,941), corner_timer=-0.02
[03:40:33] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:40:33] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(303,941), corner_timer=0.30
[03:40:33] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(303,941), corner_timer=0.30
[03:40:33] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[03:40:33] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(303.472, 941.3354), source=PLAYER (SniperRifle), range=3000, listeners=30
[03:40:33] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
[03:40:33] [ENEMY] [Enemy2] Heard gunshot at (303.472, 941.3354), source_type=0, intensity=0.02, distance=403
[03:40:33] [ENEMY] [Enemy3] Heard gunshot at (303.472, 941.3354), source_type=0, intensity=0.01, distance=440
[03:40:33] [ENEMY] [Enemy4] Heard gunshot at (303.472, 941.3354), source_type=0, intensity=0.01, distance=498
[03:40:33] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[03:40:33] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=103.9°, current=-157.5°, player=(303,941), corner_timer=0.00
[03:40:33] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=154.2°, current=-123.8°, player=(303,941), corner_timer=0.00
[03:40:33] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=175.2°, current=-101.3°, player=(303,941), corner_timer=0.00
[03:40:33] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(303,941), corner_timer=-0.02
[03:40:33] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:40:33] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(303,941), corner_timer=0.30
[03:40:33] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(303,941), corner_timer=-0.02
[03:40:33] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:40:33] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(303,941), corner_timer=0.30
[03:40:33] [ENEMY] [Enemy1] Memory: medium confidence (0.58) - transitioning to PURSUING
[03:40:33] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[03:40:33] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[03:40:33] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[03:40:33] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[03:40:33] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=89.7°, current=33.8°, player=(303,941), corner_timer=0.00
[03:40:33] [ENEMY] [Enemy1] PURSUING corner check: angle -50.9°
[03:40:33] [INFO] [Player.Homing] Homing effect expired, charges remaining: 5/6
[03:40:34] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(303,941), corner_timer=-0.02
[03:40:34] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:40:34] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(303,941), corner_timer=0.30
[03:40:34] [ENEMY] [Enemy1] PURSUING corner check: angle -51.1°
[03:40:34] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[03:40:35] [INFO] [PauseMenu] Armory button pressed
[03:40:35] [INFO] [PauseMenu] Creating new armory menu instance
[03:40:35] [INFO] [PauseMenu] armory_menu_scene resource path: res://scenes/ui/ArmoryMenu.tscn
[03:40:35] [INFO] [PauseMenu] Instance created, class: CanvasLayer, name: ArmoryMenu
[03:40:35] [INFO] [PauseMenu] Script attached: res://scripts/ui/armory_menu.gd
[03:40:35] [INFO] [PauseMenu] back_pressed signal exists on instance
[03:40:35] [INFO] [PauseMenu] back_pressed signal connected
[03:40:35] [INFO] [PauseMenu] Armory menu instance added as child, is_inside_tree: true
[03:40:35] [INFO] [PauseMenu] _populate_weapon_grid method exists
[03:40:35] [INFO] [ReplayManager] Recording frame 240 (4,0s): player_valid=True, enemies=10
[03:40:36] [INFO] [ReplayManager] Recording frame 300 (5,0s): player_valid=True, enemies=10
[03:40:36] [INFO] [GameManager] Weapon selected: revolver
[03:40:36] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:40:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:36] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[03:40:36] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[03:40:36] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[03:40:36] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:40:36] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:40:36] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:40:36] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[03:40:36] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[03:40:36] [INFO] [FlashbangPlayer] Resetting flashbang player effects (scene change)
[03:40:36] [ENEMY] [Enemy1] Death animation component initialized
[03:40:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:36] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[03:40:36] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[03:40:36] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[03:40:36] [ENEMY] [Enemy2] Death animation component initialized
[03:40:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:36] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[03:40:36] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[03:40:36] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[03:40:36] [ENEMY] [Enemy3] Death animation component initialized
[03:40:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:36] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[03:40:36] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[03:40:36] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[03:40:36] [INFO] [EnemyGrenade] Initialized: 1 grenades
[03:40:36] [ENEMY] [Enemy4] Death animation component initialized
[03:40:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:36] [INFO] [BloodyFeet:Grenadier] Footprint scene loaded
[03:40:36] [INFO] [BloodyFeet:Grenadier] Found EnemyModel for facing direction
[03:40:36] [INFO] [BloodyFeet:Grenadier] BloodyFeetComponent ready on Grenadier
[03:40:36] [INFO] [EnemyGrenade] Grenade bag built (hard): [Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Defensive]
[03:40:36] [INFO] [EnemyGrenade] Grenadier initialized: 8 grenades in bag
[03:40:36] [ENEMY] [Grenadier] Death animation component initialized
[03:40:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:36] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[03:40:36] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[03:40:36] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[03:40:36] [ENEMY] [Enemy6] Death animation component initialized
[03:40:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:36] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[03:40:36] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[03:40:36] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[03:40:36] [ENEMY] [Enemy7] Death animation component initialized
[03:40:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:36] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[03:40:36] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[03:40:36] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[03:40:36] [ENEMY] [Enemy8] Death animation component initialized
[03:40:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:36] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[03:40:36] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[03:40:36] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[03:40:36] [INFO] [EnemyGrenade] Initialized: 1 grenades
[03:40:36] [ENEMY] [Enemy9] Death animation component initialized
[03:40:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:36] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[03:40:36] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[03:40:36] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[03:40:36] [ENEMY] [Enemy10] Death animation component initialized
[03:40:36] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:36] [INFO] [BloodyFeet:Player] Footprint scene loaded
[03:40:36] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[03:40:36] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[03:40:36] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:40:36] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:40:36] [INFO] [Player.Weapon] GameManager weapon selection: revolver (Revolver)
[03:40:36] [INFO] [Player.Weapon] Removed default MakarovPM
[03:40:36] [INFO] [Player.Weapon] Equipped Revolver (ammo: 5/5)
[03:40:36] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:40:36] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:40:36] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:40:36] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:40:36] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[03:40:36] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:40:36] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[03:40:36] [INFO] [Player.TeleportBracers] No teleport bracers selected in ActiveItemManager
[03:40:36] [INFO] [Player.Homing] Homing activation sound loaded
[03:40:36] [INFO] [Player.Homing] Homing bullets equipped, charges: 6/6
[03:40:36] [INFO] [Player] Ready! Ammo: 5/5, Grenades: 1/3, Health: 2/4
[03:40:36] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:40:36] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:40:36] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:40:36] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:40:36] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:40:36] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:40:36] [INFO] [BuildingLevel] Child 'Grenadier': script=true, has_died_signal=true
[03:40:36] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:40:36] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:40:36] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:40:36] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:40:36] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:40:36] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:40:36] [INFO] [BuildingLevel] Setting up weapon: revolver
[03:40:36] [INFO] [ScoreManager] Level started with 10 enemies
[03:40:36] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[03:40:36] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[03:40:36] [INFO] [ReplayManager] Replay data cleared
[03:40:36] [INFO] [BuildingLevel] Previous replay data cleared
[03:40:36] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[03:40:36] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[03:40:36] [INFO] [ReplayManager] Level: BuildingLevel
[03:40:36] [INFO] [ReplayManager] Player: Player (valid: True)
[03:40:36] [INFO] [ReplayManager] Enemies count: 10
[03:40:36] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[03:40:36] [INFO] [ReplayManager]   Enemy 0: Enemy1
[03:40:36] [INFO] [ReplayManager]   Enemy 1: Enemy2
[03:40:36] [INFO] [ReplayManager]   Enemy 2: Enemy3
[03:40:36] [INFO] [ReplayManager]   Enemy 3: Enemy4
[03:40:36] [INFO] [ReplayManager]   Enemy 4: Grenadier
[03:40:36] [INFO] [ReplayManager]   Enemy 5: Enemy6
[03:40:36] [INFO] [ReplayManager]   Enemy 6: Enemy7
[03:40:36] [INFO] [ReplayManager]   Enemy 7: Enemy8
[03:40:36] [INFO] [ReplayManager]   Enemy 8: Enemy9
[03:40:36] [INFO] [ReplayManager]   Enemy 9: Enemy10
[03:40:36] [INFO] [BuildingLevel] Replay recording started successfully
[03:40:36] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[03:40:36] [INFO] [CinemaEffects] Found player node: Player
[03:40:36] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[03:40:36] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[03:40:36] [ENEMY] [Enemy1] Registered as sound listener
[03:40:36] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[03:40:36] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[03:40:36] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[03:40:36] [ENEMY] [Enemy2] Registered as sound listener
[03:40:36] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[03:40:36] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[03:40:36] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[03:40:36] [ENEMY] [Enemy3] Registered as sound listener
[03:40:36] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 4, behavior: GUARD
[03:40:36] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[03:40:36] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[03:40:36] [ENEMY] [Enemy4] Registered as sound listener
[03:40:36] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[03:40:36] [INFO] [BloodyFeet:Grenadier] Blood detector created and attached to Grenadier
[03:40:36] [INFO] [SoundPropagation] Registered listener: Grenadier (total: 15)
[03:40:36] [ENEMY] [Grenadier] Registered as sound listener
[03:40:36] [ENEMY] [Grenadier] Spawned at (1700, 350), hp: 2, behavior: GUARD
[03:40:36] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[03:40:36] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[03:40:36] [ENEMY] [Enemy6] Registered as sound listener
[03:40:36] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[03:40:36] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[03:40:36] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[03:40:36] [ENEMY] [Enemy7] Registered as sound listener
[03:40:36] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[03:40:36] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[03:40:36] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[03:40:36] [ENEMY] [Enemy8] Registered as sound listener
[03:40:36] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[03:40:36] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[03:40:36] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[03:40:36] [ENEMY] [Enemy9] Registered as sound listener
[03:40:36] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[03:40:36] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[03:40:36] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[03:40:36] [ENEMY] [Enemy10] Registered as sound listener
[03:40:36] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[03:40:36] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[03:40:36] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[03:40:36] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:36] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:36] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:36] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:36] [ENEMY] [Grenadier] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:36] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:36] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:36] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:36] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:40:36] [INFO] [Player] Detected weapon: RSh-12 Revolver (Pistol pose)
[03:40:36] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[03:40:36] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:40:36] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:40:36] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:40:36] [INFO] [LastChance] Found player: Player
[03:40:36] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:40:36] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:40:36] [INFO] [LastChance] Connected to player Died signal (C#)
[03:40:36] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[03:40:37] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[03:40:37] [INFO] [Player.Homing] Homing activated! Duration: 1s, charges remaining: 5/6
[03:40:38] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:40:38] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:40:38] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(307,902), corner_timer=0.30
[03:40:38] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(307,902), corner_timer=0.30
[03:40:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(307.2584, 902.3347), source=PLAYER (Revolver), range=2500, listeners=20
[03:40:38] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[03:40:38] [ENEMY] [Enemy2] Heard gunshot at (307.2584, 902.3347), source_type=0, intensity=0.02, distance=364
[03:40:38] [ENEMY] [Enemy3] Heard gunshot at (307.2584, 902.3347), source_type=0, intensity=0.01, distance=421
[03:40:38] [ENEMY] [Enemy4] Heard gunshot at (307.2584, 902.3347), source_type=0, intensity=0.01, distance=493
[03:40:38] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[03:40:38] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=104.7°, current=-157.5°, player=(307,902), corner_timer=0.00
[03:40:38] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=158.8°, current=123.7°, player=(307,902), corner_timer=0.00
[03:40:38] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=179.7°, current=-67.5°, player=(307,902), corner_timer=0.00
[03:40:38] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(307,902), corner_timer=-0.02
[03:40:38] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:40:38] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(307,902), corner_timer=-0.02
[03:40:38] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:40:38] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(307,902), corner_timer=0.30
[03:40:38] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(307,902), corner_timer=0.30
[03:40:38] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[03:40:38] [ENEMY] [Enemy1] Memory: medium confidence (0.60) - transitioning to PURSUING
[03:40:38] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[03:40:38] [INFO] [Player.Homing] Homing effect expired, charges remaining: 5/6
[03:40:38] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=89.2°, current=-33.8°, player=(307,902), corner_timer=0.00
[03:40:38] [ENEMY] [Enemy1] PURSUING corner check: angle -50.9°
[03:40:38] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(307.2584, 902.3347), shooter_id=1115064109177, bullet_pos=(1091.379, 294.1575)
[03:40:38] [INFO] [Bullet] Using shooter_position, distance=992.333312988281
[03:40:38] [INFO] [Bullet] Distance to wall: 992.333312988281 (67.5698000214332% of viewport)
[03:40:38] [INFO] [Bullet] Distance-based penetration chance: 67.835233308328%
[03:40:38] [INFO] [Bullet] Starting wall penetration at (1091.379, 294.1575)
[03:40:38] [INFO] [Bullet] Raycast backward hit penetrating body at distance 5.38408613204956
[03:40:38] [INFO] [Bullet] Raycast backward hit penetrating body at distance 47.0507164001465
[03:40:39] [INFO] [Bullet] Body exited signal received for penetrating body
[03:40:39] [INFO] [Bullet] Exiting penetration at (1161.178, 240.0201) after traveling 83.3333358764648 pixels through wall
[03:40:39] [INFO] [Bullet] Damage multiplier after penetration: 0.7
[03:40:39] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(307,902), corner_timer=-0.02
[03:40:39] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:40:39] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(307,902), corner_timer=0.30
[03:40:39] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[03:40:39] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[03:40:39] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[03:40:39] [ENEMY] [Enemy1] PURSUING corner check: angle -51.1°
[03:40:39] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[03:40:40] [INFO] [PauseMenu] Armory button pressed
[03:40:40] [INFO] [PauseMenu] Creating new armory menu instance
[03:40:40] [INFO] [PauseMenu] armory_menu_scene resource path: res://scenes/ui/ArmoryMenu.tscn
[03:40:40] [INFO] [PauseMenu] Instance created, class: CanvasLayer, name: ArmoryMenu
[03:40:40] [INFO] [PauseMenu] Script attached: res://scripts/ui/armory_menu.gd
[03:40:40] [INFO] [PauseMenu] back_pressed signal exists on instance
[03:40:40] [INFO] [PauseMenu] back_pressed signal connected
[03:40:40] [INFO] [PauseMenu] Armory menu instance added as child, is_inside_tree: true
[03:40:40] [INFO] [PauseMenu] _populate_weapon_grid method exists
[03:40:40] [INFO] [ReplayManager] Recording frame 240 (4,0s): player_valid=True, enemies=10
[03:40:41] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(307,902), corner_timer=-0.02
[03:40:41] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:40:41] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(307,902), corner_timer=0.30
[03:40:41] [ENEMY] [Enemy1] PURSUING corner check: angle 153.7°
[03:40:41] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(307,902), corner_timer=-0.02
[03:40:41] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:40:41] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(307,902), corner_timer=0.30
[03:40:41] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(307,840), corner_timer=-0.02
[03:40:41] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[03:40:41] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(307,835), corner_timer=0.30
[03:40:41] [INFO] [ReplayManager] Recording frame 300 (5,0s): player_valid=True, enemies=10
[03:40:41] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P1:visible, state=PURSUING, target=175.9°, current=174.8°, player=(307,815), corner_timer=0.00
[03:40:41] [ENEMY] [Enemy3] State: PURSUING -> COMBAT
[03:40:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(546.934, 788.7937), source=ENEMY (Enemy3), range=1469, listeners=10
[03:40:42] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:40:42] [INFO] [LastChance] Threat detected: Bullet
[03:40:42] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[03:40:42] [INFO] [LastChance] Cannot trigger effect - conditions not met
[03:40:42] [ENEMY] [Enemy10] PATROL corner check: angle 0.6°
[03:40:42] [INFO] [Player] Spawning blood effect at (307.25836, 787.9459), dir=(1, 0), lethal=False (C#)
[03:40:42] [INFO] [ImpactEffects] spawn_blood_effect called at (307.2584, 787.9459), dir=(1, 0), lethal=false
[03:40:42] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:40:42] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:40:42] [INFO] [ImpactEffects] Blood effect spawned at (307.2584, 787.9459) (scale=1)
[03:40:42] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[03:40:42] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[03:40:42] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[03:40:42] [INFO] [Player.Homing] Homing activated! Duration: 1s, charges remaining: 4/6
[03:40:42] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[03:40:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(546.934, 788.7937), source=ENEMY (Enemy3), range=1469, listeners=10
[03:40:42] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[03:40:42] [INFO] [LastChance] Threat detected: Bullet
[03:40:42] [INFO] [LastChance] Triggering last chance effect!
[03:40:42] [INFO] [LastChance] Starting last chance effect:
[03:40:42] [INFO] [LastChance]   - Time will be frozen (except player)
[03:40:42] [INFO] [LastChance]   - Duration: 6.00 real seconds
[03:40:42] [INFO] [LastChance]   - Trigger: threat detected
[03:40:42] [INFO] [LastChance]   - Sepia intensity: 0.70
[03:40:42] [INFO] [LastChance]   - Brightness: 0.60
[03:40:42] [INFO] [LastChance] Pushed bullet Bullet from distance 130.6 to 200.0
[03:40:42] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[03:40:42] [INFO] [LastChance] Set player Player and all 27 children to PROCESS_MODE_ALWAYS
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[03:40:42] [INFO] [LastChance] Skipping player node: Player
[03:40:42] [INFO] [LastChance] Froze existing bullet casing: Casing
[03:40:42] [INFO] [LastChance] Froze existing bullet casing: @RigidBody2D@5241
[03:40:42] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[03:40:42] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[03:40:42] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[03:40:42] [INFO] [BloodDecal] Blood puddle created at (391.221, 818.7136) (added to group)
[03:40:42] [INFO] [BloodDecal] Blood puddle created at (391.7593, 772.0543) (added to group)
[03:40:42] [INFO] [BloodDecal] Blood puddle created at (370.3197, 836.3646) (added to group)
[03:40:42] [INFO] [BloodDecal] Blood puddle created at (358.4687, 812.0417) (added to group)
[03:40:42] [INFO] [BloodDecal] Blood puddle created at (430.4556, 793.6435) (added to group)
[03:40:42] [INFO] [BloodDecal] Blood puddle created at (447.1022, 900.491) (added to group)
[03:40:42] [INFO] [BloodDecal] Blood puddle created at (400.0139, 813.9756) (added to group)
[03:40:42] [INFO] [BloodDecal] Blood puddle created at (403.6484, 803.3903) (added to group)
[03:40:42] [INFO] [BloodDecal] Blood puddle created at (438.713, 924.47) (added to group)
[03:40:42] [INFO] [BloodDecal] Blood puddle created at (453.5015, 933.084) (added to group)
[03:40:42] [INFO] [ReplayManager] Recording frame 360 (6,0s): player_valid=True, enemies=10
[03:40:43] [INFO] [Player.Homing] Homing effect expired, charges remaining: 4/6
[03:40:43] [INFO] [LastChance] Freezing newly fired player bullet: Bullet12p7mm
[03:40:43] [INFO] [LastChance] Registered frozen player bullet: Bullet12p7mm
[03:40:43] [INFO] [LastChance] Freezing newly created explosion effect: PointLight2D
[03:40:43] [INFO] [LastChance] Registered frozen explosion effect: PointLight2D
[03:40:43] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(307.2584, 793.1126), source=PLAYER (Revolver), range=2500, listeners=10
[03:40:43] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=0, below_threshold=6
[03:40:43] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:40:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:43] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[03:40:43] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[03:40:43] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[03:40:43] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:40:43] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:40:43] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:40:43] [INFO] [LastChance] All process modes restored
[03:40:43] [INFO] [LastChance] Restored original colors to 5 player sprites
[03:40:43] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[03:40:43] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[03:40:43] [INFO] [FlashbangPlayer] Resetting flashbang player effects (scene change)
[03:40:43] [ENEMY] [Enemy1] Death animation component initialized
[03:40:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:43] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[03:40:43] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[03:40:43] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[03:40:43] [ENEMY] [Enemy2] Death animation component initialized
[03:40:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:43] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[03:40:43] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[03:40:43] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[03:40:43] [ENEMY] [Enemy3] Death animation component initialized
[03:40:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:43] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[03:40:43] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[03:40:43] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[03:40:43] [ENEMY] [Enemy4] Death animation component initialized
[03:40:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:43] [INFO] [BloodyFeet:Grenadier] Footprint scene loaded
[03:40:43] [INFO] [BloodyFeet:Grenadier] Found EnemyModel for facing direction
[03:40:43] [INFO] [BloodyFeet:Grenadier] BloodyFeetComponent ready on Grenadier
[03:40:43] [INFO] [EnemyGrenade] Grenade bag built (hard): [Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Defensive]
[03:40:43] [INFO] [EnemyGrenade] Grenadier initialized: 8 grenades in bag
[03:40:43] [ENEMY] [Grenadier] Death animation component initialized
[03:40:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:43] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[03:40:43] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[03:40:43] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[03:40:43] [ENEMY] [Enemy6] Death animation component initialized
[03:40:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:43] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[03:40:43] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[03:40:43] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[03:40:43] [ENEMY] [Enemy7] Death animation component initialized
[03:40:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:43] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[03:40:43] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[03:40:43] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[03:40:43] [ENEMY] [Enemy8] Death animation component initialized
[03:40:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:43] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[03:40:43] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[03:40:43] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[03:40:43] [ENEMY] [Enemy9] Death animation component initialized
[03:40:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:43] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[03:40:43] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[03:40:43] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[03:40:43] [ENEMY] [Enemy10] Death animation component initialized
[03:40:43] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:43] [INFO] [BloodyFeet:Player] Footprint scene loaded
[03:40:43] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[03:40:43] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[03:40:43] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:40:43] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:40:43] [INFO] [Player.Weapon] GameManager weapon selection: revolver (Revolver)
[03:40:43] [INFO] [Player.Weapon] Removed default MakarovPM
[03:40:43] [INFO] [Player.Weapon] Equipped Revolver (ammo: 5/5)
[03:40:43] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:40:43] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:40:43] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:40:43] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:40:43] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[03:40:43] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:40:43] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[03:40:43] [INFO] [Player.TeleportBracers] No teleport bracers selected in ActiveItemManager
[03:40:43] [INFO] [Player.Homing] Homing activation sound loaded
[03:40:43] [INFO] [Player.Homing] Homing bullets equipped, charges: 6/6
[03:40:43] [INFO] [Player] Ready! Ammo: 5/5, Grenades: 1/3, Health: 4/4
[03:40:43] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:40:43] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:40:43] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:40:43] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:40:43] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:40:43] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:40:43] [INFO] [BuildingLevel] Child 'Grenadier': script=true, has_died_signal=true
[03:40:43] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:40:43] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:40:43] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:40:43] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:40:43] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:40:43] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:40:43] [INFO] [BuildingLevel] Setting up weapon: revolver
[03:40:43] [INFO] [ScoreManager] Level started with 10 enemies
[03:40:43] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[03:40:43] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[03:40:43] [INFO] [ReplayManager] Replay data cleared
[03:40:43] [INFO] [BuildingLevel] Previous replay data cleared
[03:40:43] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[03:40:43] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[03:40:43] [INFO] [ReplayManager] Level: BuildingLevel
[03:40:43] [INFO] [ReplayManager] Player: Player (valid: True)
[03:40:43] [INFO] [ReplayManager] Enemies count: 10
[03:40:43] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[03:40:43] [INFO] [ReplayManager]   Enemy 0: Enemy1
[03:40:43] [INFO] [ReplayManager]   Enemy 1: Enemy2
[03:40:43] [INFO] [ReplayManager]   Enemy 2: Enemy3
[03:40:43] [INFO] [ReplayManager]   Enemy 3: Enemy4
[03:40:43] [INFO] [ReplayManager]   Enemy 4: Grenadier
[03:40:43] [INFO] [ReplayManager]   Enemy 5: Enemy6
[03:40:43] [INFO] [ReplayManager]   Enemy 6: Enemy7
[03:40:43] [INFO] [ReplayManager]   Enemy 7: Enemy8
[03:40:43] [INFO] [ReplayManager]   Enemy 8: Enemy9
[03:40:43] [INFO] [ReplayManager]   Enemy 9: Enemy10
[03:40:43] [INFO] [BuildingLevel] Replay recording started successfully
[03:40:43] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[03:40:43] [INFO] [CinemaEffects] Found player node: Player
[03:40:43] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[03:40:43] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[03:40:43] [ENEMY] [Enemy1] Registered as sound listener
[03:40:43] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[03:40:43] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[03:40:43] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[03:40:43] [ENEMY] [Enemy2] Registered as sound listener
[03:40:43] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 2, behavior: GUARD
[03:40:43] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[03:40:43] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[03:40:43] [ENEMY] [Enemy3] Registered as sound listener
[03:40:43] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 2, behavior: GUARD
[03:40:43] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[03:40:43] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[03:40:43] [ENEMY] [Enemy4] Registered as sound listener
[03:40:43] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[03:40:43] [INFO] [BloodyFeet:Grenadier] Blood detector created and attached to Grenadier
[03:40:43] [INFO] [SoundPropagation] Registered listener: Grenadier (total: 15)
[03:40:43] [ENEMY] [Grenadier] Registered as sound listener
[03:40:43] [ENEMY] [Grenadier] Spawned at (1700, 350), hp: 2, behavior: GUARD
[03:40:43] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[03:40:43] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[03:40:43] [ENEMY] [Enemy6] Registered as sound listener
[03:40:43] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[03:40:43] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[03:40:43] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[03:40:43] [ENEMY] [Enemy7] Registered as sound listener
[03:40:43] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[03:40:43] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[03:40:43] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[03:40:43] [ENEMY] [Enemy8] Registered as sound listener
[03:40:43] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[03:40:43] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[03:40:43] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[03:40:43] [ENEMY] [Enemy9] Registered as sound listener
[03:40:43] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 2, behavior: GUARD
[03:40:43] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[03:40:43] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[03:40:43] [ENEMY] [Enemy10] Registered as sound listener
[03:40:43] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[03:40:43] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[03:40:43] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[03:40:43] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:43] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:43] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=123.7°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:43] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:43] [ENEMY] [Grenadier] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:43] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=337.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:43] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=157.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:43] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=146.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:43] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:40:43] [INFO] [Player] Detected weapon: RSh-12 Revolver (Pistol pose)
[03:40:43] [INFO] [Player] Applied Pistol arm pose: Left=(16, 6), Right=(4, 6)
[03:40:43] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:40:43] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:40:43] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:40:43] [INFO] [LastChance] Found player: Player
[03:40:43] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:40:43] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:40:43] [INFO] [LastChance] Connected to player Died signal (C#)
[03:40:43] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[03:40:44] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[03:40:44] [INFO] [Player.Homing] Homing activated! Duration: 1s, charges remaining: 5/6
[03:40:45] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:40:45] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:40:45] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(368,874), corner_timer=0.30
[03:40:45] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(368,874), corner_timer=0.30
[03:40:45] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(353,854), corner_timer=-0.02
[03:40:45] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:40:45] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(353,854), corner_timer=-0.02
[03:40:45] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:40:45] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(353,854), corner_timer=0.30
[03:40:45] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(353,854), corner_timer=0.30
[03:40:45] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(353.6282, 854.5597), source=PLAYER (Revolver), range=2500, listeners=20
[03:40:45] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[03:40:45] [ENEMY] [Enemy2] Heard gunshot at (353.6282, 854.5597), source_type=0, intensity=0.03, distance=308
[03:40:45] [ENEMY] [Enemy3] Heard gunshot at (353.6282, 854.5597), source_type=0, intensity=0.02, distance=362
[03:40:45] [ENEMY] [Enemy4] Heard gunshot at (353.6282, 854.5597), source_type=0, intensity=0.01, distance=449
[03:40:45] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[03:40:45] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=98.7°, current=168.8°, player=(353,854), corner_timer=0.00
[03:40:45] [ENEMY] [Enemy3] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=163.2°, current=123.7°, player=(353,854), corner_timer=0.00
[03:40:45] [ENEMY] [Enemy4] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=-174.2°, current=-101.3°, player=(353,854), corner_timer=0.00
[03:40:45] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[03:40:45] [ENEMY] [Enemy1] Memory: medium confidence (0.61) - transitioning to PURSUING
[03:40:45] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[03:40:45] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=83.9°, current=-33.8°, player=(353,854), corner_timer=0.00
[03:40:45] [ENEMY] [Enemy1] PURSUING corner check: angle -50.9°
[03:40:45] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[03:40:45] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.0°, player=(353,854), corner_timer=-0.02
[03:40:45] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:40:45] [ENEMY] [Enemy3] ROT_CHANGE: P2:combat_state -> P4:velocity, state=RETREATING, target=163.2°, current=-121.7°, player=(353,854), corner_timer=0.00
[03:40:45] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.7°, player=(353,854), corner_timer=0.30
[03:40:45] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[03:40:45] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[03:40:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(353.6282, 854.5597), shooter_id=1223545587934, bullet_pos=(1387.998, 244.9036)
[03:40:45] [INFO] [Bullet] Using shooter_position, distance=1200.66674804688
[03:40:45] [INFO] [Bullet] Distance to wall: 1200.66674804688 (81.7556067059798% of viewport)
[03:40:45] [INFO] [Bullet] Distance-based penetration chance: 51.2851255096903%
[03:40:45] [INFO] [Bullet] Starting wall penetration at (1387.998, 244.9036)
[03:40:45] [INFO] [Bullet] Raycast backward hit penetrating body at distance 46.663948059082
[03:40:45] [INFO] [Bullet] Body exited signal received for penetrating body
[03:40:45] [INFO] [Bullet] Exiting penetration at (1428.201, 221.2079) after traveling 41.6666717529297 pixels through wall
[03:40:45] [INFO] [Bullet] Damage multiplier after penetration: 0.7
[03:40:45] [INFO] [Player.Homing] Homing effect expired, charges remaining: 5/6
[03:40:46] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[03:40:46] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[03:40:46] [ENEMY] [Enemy1] PURSUING corner check: angle -51.1°
[03:40:46] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(353,854), corner_timer=-0.02
[03:40:46] [ENEMY] [Enemy10] PATROL corner check: angle 3.5°
[03:40:46] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.5°, current=9.6°, player=(353,854), corner_timer=0.30
[03:40:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(352.6282, 854.5597), source=PLAYER (Revolver), range=2500, listeners=10
[03:40:46] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=0, below_threshold=6
[03:40:46] [ENEMY] [Enemy1] PURSUING corner check: angle 153.7°
[03:40:46] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
[03:40:46] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
[03:40:46] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[03:40:46] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.5°, player=(305,854), corner_timer=-0.02
[03:40:46] [ENEMY] [Enemy10] PATROL corner check: angle 1.8°
[03:40:46] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.8°, current=6.3°, player=(304,854), corner_timer=0.30
[03:40:46] [INFO] [ReplayManager] Recording frame 180 (3,0s): player_valid=True, enemies=10
[03:40:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(352.6282, 854.5597), shooter_id=1223545587934, bullet_pos=(1367.841, 295.4303)
[03:40:46] [INFO] [Bullet] Using shooter_position, distance=1159.00048828125
[03:40:46] [INFO] [Bullet] Distance to wall: 1159.00048828125 (78.9184744610426% of viewport)
[03:40:46] [INFO] [Bullet] Distance-based penetration chance: 54.5951131287836%
[03:40:46] [INFO] [Bullet] Starting wall penetration at (1367.841, 295.4303)
[03:40:46] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23.6522407531738
[03:40:46] [INFO] [Bullet] Body exited signal received for penetrating body
[03:40:46] [INFO] [Bullet] Exiting penetration at (1408.718, 272.9172) after traveling 41.6666679382324 pixels through wall
[03:40:46] [INFO] [Bullet] Damage multiplier after penetration: 0.7
[03:40:46] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.8°, player=(300,854), corner_timer=-0.02
[03:40:46] [ENEMY] [Enemy10] PATROL corner check: angle 0.9°
[03:40:46] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=0.9°, current=4.6°, player=(300,854), corner_timer=0.30
[03:40:46] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(300.7949, 854.5597), source=PLAYER (Revolver), range=2500, listeners=10
[03:40:46] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=0, self=0, below_threshold=6
[03:40:47] [INFO] [PauseMenu] Armory button pressed
[03:40:47] [INFO] [PauseMenu] Creating new armory menu instance
[03:40:47] [INFO] [PauseMenu] armory_menu_scene resource path: res://scenes/ui/ArmoryMenu.tscn
[03:40:47] [INFO] [PauseMenu] Instance created, class: CanvasLayer, name: ArmoryMenu
[03:40:47] [INFO] [PauseMenu] Script attached: res://scripts/ui/armory_menu.gd
[03:40:47] [INFO] [PauseMenu] back_pressed signal exists on instance
[03:40:47] [INFO] [PauseMenu] back_pressed signal connected
[03:40:47] [INFO] [PauseMenu] Armory menu instance added as child, is_inside_tree: true
[03:40:47] [INFO] [PauseMenu] _populate_weapon_grid method exists
[03:40:47] [INFO] [ReplayManager] Recording frame 240 (4,0s): player_valid=True, enemies=10
[03:40:48] [INFO] [ReplayManager] Recording frame 300 (5,0s): player_valid=True, enemies=10
[03:40:48] [INFO] [GameManager] Weapon selected: ak_gl
[03:40:48] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:40:48] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:48] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[03:40:48] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[03:40:48] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[03:40:48] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:40:48] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:40:48] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:40:48] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[03:40:48] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[03:40:48] [INFO] [FlashbangPlayer] Resetting flashbang player effects (scene change)
[03:40:48] [ENEMY] [Enemy1] Death animation component initialized
[03:40:48] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:48] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[03:40:48] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[03:40:48] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[03:40:48] [ENEMY] [Enemy2] Death animation component initialized
[03:40:48] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:48] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[03:40:48] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[03:40:48] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[03:40:48] [ENEMY] [Enemy3] Death animation component initialized
[03:40:48] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:48] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[03:40:48] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[03:40:48] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[03:40:48] [ENEMY] [Enemy4] Death animation component initialized
[03:40:48] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:48] [INFO] [BloodyFeet:Grenadier] Footprint scene loaded
[03:40:48] [INFO] [BloodyFeet:Grenadier] Found EnemyModel for facing direction
[03:40:48] [INFO] [BloodyFeet:Grenadier] BloodyFeetComponent ready on Grenadier
[03:40:48] [INFO] [EnemyGrenade] Grenade bag built (hard): [Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Defensive]
[03:40:48] [INFO] [EnemyGrenade] Grenadier initialized: 8 grenades in bag
[03:40:48] [ENEMY] [Grenadier] Death animation component initialized
[03:40:48] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:48] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[03:40:48] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[03:40:48] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[03:40:48] [ENEMY] [Enemy6] Death animation component initialized
[03:40:48] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:48] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[03:40:48] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[03:40:48] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[03:40:48] [ENEMY] [Enemy7] Death animation component initialized
[03:40:48] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:48] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[03:40:48] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[03:40:48] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[03:40:48] [ENEMY] [Enemy8] Death animation component initialized
[03:40:48] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:48] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[03:40:48] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[03:40:48] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[03:40:48] [ENEMY] [Enemy9] Death animation component initialized
[03:40:48] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:48] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[03:40:48] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[03:40:48] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[03:40:48] [ENEMY] [Enemy10] Death animation component initialized
[03:40:48] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:48] [INFO] [BloodyFeet:Player] Footprint scene loaded
[03:40:48] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[03:40:48] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[03:40:48] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:40:48] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:40:48] [INFO] [Player.Weapon] GameManager weapon selection: ak_gl (AKGL)
[03:40:48] [INFO] [Player.Weapon] Removed default MakarovPM
[03:40:48] [INFO] [Player.Weapon] Equipped AKGL (ammo: 30/30)
[03:40:48] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:40:48] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:40:48] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:40:48] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:40:48] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[03:40:48] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:40:48] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[03:40:48] [INFO] [Player.TeleportBracers] No teleport bracers selected in ActiveItemManager
[03:40:48] [INFO] [Player.Homing] Homing activation sound loaded
[03:40:48] [INFO] [Player.Homing] Homing bullets equipped, charges: 6/6
[03:40:48] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[03:40:48] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:40:48] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:40:48] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:40:48] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:40:48] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:40:48] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:40:48] [INFO] [BuildingLevel] Child 'Grenadier': script=true, has_died_signal=true
[03:40:48] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:40:48] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:40:48] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:40:48] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:40:48] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:40:48] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:40:48] [INFO] [BuildingLevel] Setting up weapon: ak_gl
[03:40:48] [INFO] [BuildingLevel] AKGL already equipped by C# Player - skipping GDScript weapon swap
[03:40:48] [INFO] [ScoreManager] Level started with 10 enemies
[03:40:48] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[03:40:48] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[03:40:48] [INFO] [ReplayManager] Replay data cleared
[03:40:48] [INFO] [BuildingLevel] Previous replay data cleared
[03:40:48] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[03:40:48] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[03:40:48] [INFO] [ReplayManager] Level: BuildingLevel
[03:40:48] [INFO] [ReplayManager] Player: Player (valid: True)
[03:40:48] [INFO] [ReplayManager] Enemies count: 10
[03:40:48] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[03:40:48] [INFO] [ReplayManager]   Enemy 0: Enemy1
[03:40:48] [INFO] [ReplayManager]   Enemy 1: Enemy2
[03:40:48] [INFO] [ReplayManager]   Enemy 2: Enemy3
[03:40:48] [INFO] [ReplayManager]   Enemy 3: Enemy4
[03:40:48] [INFO] [ReplayManager]   Enemy 4: Grenadier
[03:40:48] [INFO] [ReplayManager]   Enemy 5: Enemy6
[03:40:48] [INFO] [ReplayManager]   Enemy 6: Enemy7
[03:40:48] [INFO] [ReplayManager]   Enemy 7: Enemy8
[03:40:48] [INFO] [ReplayManager]   Enemy 8: Enemy9
[03:40:48] [INFO] [ReplayManager]   Enemy 9: Enemy10
[03:40:48] [INFO] [BuildingLevel] Replay recording started successfully
[03:40:48] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[03:40:48] [INFO] [CinemaEffects] Found player node: Player
[03:40:48] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[03:40:48] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[03:40:48] [ENEMY] [Enemy1] Registered as sound listener
[03:40:48] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 3, behavior: GUARD
[03:40:48] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[03:40:48] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[03:40:48] [ENEMY] [Enemy2] Registered as sound listener
[03:40:48] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 4, behavior: GUARD
[03:40:48] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[03:40:48] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[03:40:48] [ENEMY] [Enemy3] Registered as sound listener
[03:40:48] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[03:40:48] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[03:40:48] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[03:40:48] [ENEMY] [Enemy4] Registered as sound listener
[03:40:48] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 4, behavior: GUARD
[03:40:48] [INFO] [BloodyFeet:Grenadier] Blood detector created and attached to Grenadier
[03:40:48] [INFO] [SoundPropagation] Registered listener: Grenadier (total: 15)
[03:40:48] [ENEMY] [Grenadier] Registered as sound listener
[03:40:48] [ENEMY] [Grenadier] Spawned at (1700, 350), hp: 2, behavior: GUARD
[03:40:48] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[03:40:48] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[03:40:48] [ENEMY] [Enemy6] Registered as sound listener
[03:40:48] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 4, behavior: GUARD
[03:40:48] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[03:40:48] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[03:40:48] [ENEMY] [Enemy7] Registered as sound listener
[03:40:48] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 2, behavior: PATROL
[03:40:48] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[03:40:48] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[03:40:48] [ENEMY] [Enemy8] Registered as sound listener
[03:40:48] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 3, behavior: GUARD
[03:40:48] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[03:40:48] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[03:40:48] [ENEMY] [Enemy9] Registered as sound listener
[03:40:48] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 4, behavior: GUARD
[03:40:48] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[03:40:48] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[03:40:48] [ENEMY] [Enemy10] Registered as sound listener
[03:40:48] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 4, behavior: PATROL
[03:40:48] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[03:40:49] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[03:40:49] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=202.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:49] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:49] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:49] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:49] [ENEMY] [Grenadier] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:49] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=11.3°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:49] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:49] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1249), corner_timer=0.00
[03:40:49] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:40:49] [INFO] [Player] Detected weapon: AK + GL (Rifle pose)
[03:40:49] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[03:40:49] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:40:49] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:40:49] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:40:49] [INFO] [LastChance] Found player: Player
[03:40:49] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:40:49] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:40:49] [INFO] [LastChance] Connected to player Died signal (C#)
[03:40:49] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[03:40:50] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[03:40:50] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:40:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:50] [INFO] [BloodyFeet:Enemy1] Footprint scene loaded
[03:40:50] [INFO] [BloodyFeet:Enemy1] Found EnemyModel for facing direction
[03:40:50] [INFO] [BloodyFeet:Enemy1] BloodyFeetComponent ready on Enemy1
[03:40:50] [INFO] [ImpactEffects] Scene changed - clearing all stale effect references
[03:40:50] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[03:40:50] [INFO] [LastChance] Resetting all effects (scene change detected)
[03:40:50] [INFO] [CinemaEffects] Scene changed to: BuildingLevel
[03:40:50] [INFO] [PowerFantasy] Resetting all effects (scene change detected)
[03:40:50] [INFO] [FlashbangPlayer] Resetting flashbang player effects (scene change)
[03:40:50] [ENEMY] [Enemy1] Death animation component initialized
[03:40:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:50] [INFO] [BloodyFeet:Enemy2] Footprint scene loaded
[03:40:50] [INFO] [BloodyFeet:Enemy2] Found EnemyModel for facing direction
[03:40:50] [INFO] [BloodyFeet:Enemy2] BloodyFeetComponent ready on Enemy2
[03:40:50] [ENEMY] [Enemy2] Death animation component initialized
[03:40:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:50] [INFO] [BloodyFeet:Enemy3] Footprint scene loaded
[03:40:50] [INFO] [BloodyFeet:Enemy3] Found EnemyModel for facing direction
[03:40:50] [INFO] [BloodyFeet:Enemy3] BloodyFeetComponent ready on Enemy3
[03:40:50] [ENEMY] [Enemy3] Death animation component initialized
[03:40:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:50] [INFO] [BloodyFeet:Enemy4] Footprint scene loaded
[03:40:50] [INFO] [BloodyFeet:Enemy4] Found EnemyModel for facing direction
[03:40:50] [INFO] [BloodyFeet:Enemy4] BloodyFeetComponent ready on Enemy4
[03:40:50] [ENEMY] [Enemy4] Death animation component initialized
[03:40:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:50] [INFO] [BloodyFeet:Grenadier] Footprint scene loaded
[03:40:50] [INFO] [BloodyFeet:Grenadier] Found EnemyModel for facing direction
[03:40:50] [INFO] [BloodyFeet:Grenadier] BloodyFeetComponent ready on Grenadier
[03:40:50] [INFO] [EnemyGrenade] Grenade bag built (hard): [Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Offensive, Defensive]
[03:40:50] [INFO] [EnemyGrenade] Grenadier initialized: 8 grenades in bag
[03:40:50] [ENEMY] [Grenadier] Death animation component initialized
[03:40:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:50] [INFO] [BloodyFeet:Enemy6] Footprint scene loaded
[03:40:50] [INFO] [BloodyFeet:Enemy6] Found EnemyModel for facing direction
[03:40:50] [INFO] [BloodyFeet:Enemy6] BloodyFeetComponent ready on Enemy6
[03:40:50] [INFO] [EnemyGrenade] Initialized: 1 grenades
[03:40:50] [ENEMY] [Enemy6] Death animation component initialized
[03:40:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:50] [INFO] [BloodyFeet:Enemy7] Footprint scene loaded
[03:40:50] [INFO] [BloodyFeet:Enemy7] Found EnemyModel for facing direction
[03:40:50] [INFO] [BloodyFeet:Enemy7] BloodyFeetComponent ready on Enemy7
[03:40:50] [ENEMY] [Enemy7] Death animation component initialized
[03:40:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:50] [INFO] [BloodyFeet:Enemy8] Footprint scene loaded
[03:40:50] [INFO] [BloodyFeet:Enemy8] Found EnemyModel for facing direction
[03:40:50] [INFO] [BloodyFeet:Enemy8] BloodyFeetComponent ready on Enemy8
[03:40:50] [ENEMY] [Enemy8] Death animation component initialized
[03:40:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:50] [INFO] [BloodyFeet:Enemy9] Footprint scene loaded
[03:40:50] [INFO] [BloodyFeet:Enemy9] Found EnemyModel for facing direction
[03:40:50] [INFO] [BloodyFeet:Enemy9] BloodyFeetComponent ready on Enemy9
[03:40:50] [ENEMY] [Enemy9] Death animation component initialized
[03:40:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:50] [INFO] [BloodyFeet:Enemy10] Footprint scene loaded
[03:40:50] [INFO] [BloodyFeet:Enemy10] Found EnemyModel for facing direction
[03:40:50] [INFO] [BloodyFeet:Enemy10] BloodyFeetComponent ready on Enemy10
[03:40:50] [INFO] [EnemyGrenade] Initialized: 1 grenades
[03:40:50] [ENEMY] [Enemy10] Death animation component initialized
[03:40:50] [INFO] [BloodyFeet:?] BloodyFeetComponent initializing...
[03:40:50] [INFO] [BloodyFeet:Player] Footprint scene loaded
[03:40:50] [INFO] [BloodyFeet:Player] Found PlayerModel for facing direction
[03:40:50] [INFO] [BloodyFeet:Player] BloodyFeetComponent ready on Player
[03:40:50] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[03:40:50] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[03:40:50] [INFO] [Player.Weapon] GameManager weapon selection: ak_gl (AKGL)
[03:40:50] [INFO] [Player.Weapon] Removed default MakarovPM
[03:40:50] [INFO] [Player.Weapon] Equipped AKGL (ammo: 30/30)
[03:40:50] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[03:40:50] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[03:40:50] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[03:40:50] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[03:40:50] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[03:40:50] [INFO] [Player.Debug] Connected to GameManager, invincibility mode: False
[03:40:50] [INFO] [Player.Flashlight] No flashlight selected in ActiveItemManager
[03:40:50] [INFO] [Player.TeleportBracers] No teleport bracers selected in ActiveItemManager
[03:40:50] [INFO] [Player.Homing] Homing activation sound loaded
[03:40:50] [INFO] [Player.Homing] Homing bullets equipped, charges: 6/6
[03:40:50] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[03:40:50] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[03:40:50] [INFO] [BuildingLevel] Found Environment/Enemies node with 10 children
[03:40:50] [INFO] [BuildingLevel] Child 'Enemy1': script=true, has_died_signal=true
[03:40:50] [INFO] [BuildingLevel] Child 'Enemy2': script=true, has_died_signal=true
[03:40:50] [INFO] [BuildingLevel] Child 'Enemy3': script=true, has_died_signal=true
[03:40:50] [INFO] [BuildingLevel] Child 'Enemy4': script=true, has_died_signal=true
[03:40:50] [INFO] [BuildingLevel] Child 'Grenadier': script=true, has_died_signal=true
[03:40:50] [INFO] [BuildingLevel] Child 'Enemy6': script=true, has_died_signal=true
[03:40:50] [INFO] [BuildingLevel] Child 'Enemy7': script=true, has_died_signal=true
[03:40:50] [INFO] [BuildingLevel] Child 'Enemy8': script=true, has_died_signal=true
[03:40:50] [INFO] [BuildingLevel] Child 'Enemy9': script=true, has_died_signal=true
[03:40:50] [INFO] [BuildingLevel] Child 'Enemy10': script=true, has_died_signal=true
[03:40:50] [INFO] [BuildingLevel] Enemy tracking complete: 10 enemies registered
[03:40:50] [INFO] [BuildingLevel] Setting up weapon: ak_gl
[03:40:50] [INFO] [BuildingLevel] AKGL already equipped by C# Player - skipping GDScript weapon swap
[03:40:50] [INFO] [ScoreManager] Level started with 10 enemies
[03:40:50] [INFO] [BuildingLevel] ReplayManager found as C# autoload - verified OK
[03:40:50] [INFO] [BuildingLevel] Starting replay recording - Player: Player, Enemies count: 10
[03:40:50] [INFO] [ReplayManager] Replay data cleared
[03:40:50] [INFO] [BuildingLevel] Previous replay data cleared
[03:40:50] [INFO] [ReplayManager] Detected player weapon: Assault Rifle (default)
[03:40:50] [INFO] [ReplayManager] === REPLAY RECORDING STARTED ===
[03:40:50] [INFO] [ReplayManager] Level: BuildingLevel
[03:40:50] [INFO] [ReplayManager] Player: Player (valid: True)
[03:40:50] [INFO] [ReplayManager] Enemies count: 10
[03:40:50] [INFO] [ReplayManager] Detected weapon texture: res://assets/sprites/weapons/m16_rifle_topdown.png
[03:40:50] [INFO] [ReplayManager]   Enemy 0: Enemy1
[03:40:50] [INFO] [ReplayManager]   Enemy 1: Enemy2
[03:40:50] [INFO] [ReplayManager]   Enemy 2: Enemy3
[03:40:50] [INFO] [ReplayManager]   Enemy 3: Enemy4
[03:40:50] [INFO] [ReplayManager]   Enemy 4: Grenadier
[03:40:50] [INFO] [ReplayManager]   Enemy 5: Enemy6
[03:40:50] [INFO] [ReplayManager]   Enemy 6: Enemy7
[03:40:50] [INFO] [ReplayManager]   Enemy 7: Enemy8
[03:40:50] [INFO] [ReplayManager]   Enemy 8: Enemy9
[03:40:50] [INFO] [ReplayManager]   Enemy 9: Enemy10
[03:40:50] [INFO] [BuildingLevel] Replay recording started successfully
[03:40:50] [INFO] [BloodyFeet:Enemy1] Blood detector created and attached to Enemy1
[03:40:50] [INFO] [CinemaEffects] Found player node: Player
[03:40:50] [INFO] [CinemaEffects] Connected to player 'Died' signal (C# naming)
[03:40:50] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 21)
[03:40:50] [ENEMY] [Enemy1] Registered as sound listener
[03:40:50] [ENEMY] [Enemy1] Spawned at (300, 350), hp: 4, behavior: GUARD
[03:40:50] [INFO] [BloodyFeet:Enemy2] Blood detector created and attached to Enemy2
[03:40:50] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 22)
[03:40:50] [ENEMY] [Enemy2] Registered as sound listener
[03:40:50] [ENEMY] [Enemy2] Spawned at (400, 550), hp: 3, behavior: GUARD
[03:40:50] [INFO] [BloodyFeet:Enemy3] Blood detector created and attached to Enemy3
[03:40:50] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 23)
[03:40:50] [ENEMY] [Enemy3] Registered as sound listener
[03:40:50] [ENEMY] [Enemy3] Spawned at (700, 750), hp: 3, behavior: GUARD
[03:40:50] [INFO] [BloodyFeet:Enemy4] Blood detector created and attached to Enemy4
[03:40:50] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 24)
[03:40:50] [ENEMY] [Enemy4] Registered as sound listener
[03:40:50] [ENEMY] [Enemy4] Spawned at (800, 900), hp: 2, behavior: GUARD
[03:40:50] [INFO] [BloodyFeet:Grenadier] Blood detector created and attached to Grenadier
[03:40:50] [INFO] [SoundPropagation] Registered listener: Grenadier (total: 25)
[03:40:50] [ENEMY] [Grenadier] Registered as sound listener
[03:40:50] [ENEMY] [Grenadier] Spawned at (1700, 350), hp: 2, behavior: GUARD
[03:40:50] [INFO] [BloodyFeet:Enemy6] Blood detector created and attached to Enemy6
[03:40:50] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 26)
[03:40:50] [ENEMY] [Enemy6] Registered as sound listener
[03:40:50] [ENEMY] [Enemy6] Spawned at (1950, 450), hp: 2, behavior: GUARD
[03:40:50] [INFO] [BloodyFeet:Enemy7] Blood detector created and attached to Enemy7
[03:40:50] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 27)
[03:40:50] [ENEMY] [Enemy7] Registered as sound listener
[03:40:50] [ENEMY] [Enemy7] Spawned at (1600, 900), hp: 3, behavior: PATROL
[03:40:50] [INFO] [BloodyFeet:Enemy8] Blood detector created and attached to Enemy8
[03:40:50] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 28)
[03:40:50] [ENEMY] [Enemy8] Registered as sound listener
[03:40:50] [ENEMY] [Enemy8] Spawned at (1900, 1450), hp: 4, behavior: GUARD
[03:40:50] [INFO] [BloodyFeet:Enemy9] Blood detector created and attached to Enemy9
[03:40:50] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 29)
[03:40:50] [ENEMY] [Enemy9] Registered as sound listener
[03:40:50] [ENEMY] [Enemy9] Spawned at (2100, 1550), hp: 3, behavior: GUARD
[03:40:50] [INFO] [BloodyFeet:Enemy10] Blood detector created and attached to Enemy10
[03:40:50] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 30)
[03:40:50] [ENEMY] [Enemy10] Registered as sound listener
[03:40:50] [ENEMY] [Enemy10] Spawned at (1200, 1550), hp: 2, behavior: PATROL
[03:40:50] [INFO] [BloodyFeet:Player] Blood detector created and attached to Player
[03:40:50] [INFO] [ReplayManager] Recording frame 0 (0,0s): player_valid=True, enemies=10
[03:40:50] [ENEMY] [Enemy1] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=326.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:50] [ENEMY] [Enemy2] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:50] [ENEMY] [Enemy3] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=191.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:50] [ENEMY] [Enemy4] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=292.5°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:50] [ENEMY] [Grenadier] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=101.3°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:50] [ENEMY] [Enemy6] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=225.0°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:50] [ENEMY] [Enemy8] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=168.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:50] [ENEMY] [Enemy9] ROT_CHANGE: none -> P5:idle_scan, state=IDLE, target=258.8°, current=0.0°, player=(450,1250), corner_timer=0.00
[03:40:50] [INFO] [Player] Detecting weapon pose (frame 3)...
[03:40:50] [INFO] [Player] Detected weapon: AK + GL (Rifle pose)
[03:40:50] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[03:40:50] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[03:40:50] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[03:40:50] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[03:40:50] [INFO] [LastChance] Found player: Player
[03:40:50] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[03:40:50] [INFO] [LastChance] Connected to player Damaged signal (C#)
[03:40:50] [INFO] [LastChance] Connected to player Died signal (C#)
[03:40:50] [INFO] [CinemaEffects] Cinema effect now enabled (after 1 frames delay)
[03:40:51] [INFO] [ReplayManager] Recording frame 60 (1,0s): player_valid=True, enemies=10
[03:40:51] [INFO] [Player.Homing] Homing activated! Duration: 1s, charges remaining: 5/6
[03:40:51] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:40:51] [ENEMY] [Enemy10] PATROL corner check: angle -0.0°
[03:40:51] [ENEMY] [Enemy7] ROT_CHANGE: none -> P3:corner, state=IDLE, target=94.3°, current=4.3°, player=(218,987), corner_timer=0.30
[03:40:51] [ENEMY] [Enemy10] ROT_CHANGE: none -> P3:corner, state=IDLE, target=-0.0°, current=90.0°, player=(218,987), corner_timer=0.30
[03:40:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(177.0258, 937.1114), source=PLAYER (AKGL), range=1600, listeners=30
[03:40:52] [INFO] [SoundPropagation] Cleaned up 20 invalid listeners
[03:40:52] [ENEMY] [Enemy2] Heard gunshot at (177.0258, 937.1114), source_type=0, intensity=0.01, distance=447
[03:40:52] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=5
[03:40:52] [ENEMY] [Enemy2] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=COMBAT, target=119.9°, current=168.8°, player=(177,937), corner_timer=0.00
[03:40:52] [ENEMY] [Enemy7] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=4.3°, current=58.7°, player=(175,935), corner_timer=-0.02
[03:40:52] [ENEMY] [Enemy7] PATROL corner check: angle 94.3°
[03:40:52] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=50.4°, player=(175,935), corner_timer=-0.02
[03:40:52] [ENEMY] [Enemy10] PATROL corner check: angle 14.3°
[03:40:52] [ENEMY] [Enemy7] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=94.3°, current=55.9°, player=(174,934), corner_timer=0.30
[03:40:52] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=14.3°, current=52.7°, player=(174,934), corner_timer=0.30
[03:40:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(177.0258, 937.1114), shooter_id=1371352860709, bullet_pos=(377.37177, 687.4725)
[03:40:52] [INFO] [Bullet] Using shooter_position, distance=320,09076
[03:40:52] [INFO] [Bullet] Distance to wall: 320,09076 (21,795568% of viewport)
[03:40:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:40:52] [INFO] [Bullet] Starting wall penetration at (377.37177, 687.4725)
[03:40:52] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[03:40:52] [INFO] [Bullet] Exiting penetration at (385.05322, 636.4206) after traveling 46,66667 pixels through wall
[03:40:52] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[03:40:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(174.4316, 933.8268), source=PLAYER (AKGL), range=1600, listeners=10
[03:40:52] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=5
[03:40:52] [INFO] [ReplayManager] Recording frame 120 (2,0s): player_valid=True, enemies=10
[03:40:52] [ENEMY] [Enemy1] Memory: medium confidence (0.61) - transitioning to PURSUING
[03:40:52] [ENEMY] [Enemy1] State: IDLE -> PURSUING
[03:40:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(174.4316, 933.8268), source=PLAYER (AKGL), range=1600, listeners=10
[03:40:52] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=5
[03:40:52] [ENEMY] [Enemy2] Hit: dmg=2, hp=3/3->1/3
[03:40:52] [INFO] [ImpactEffects] spawn_blood_effect called at (359.5468, 619.0182), dir=(1, 0), lethal=false
[03:40:52] [INFO] [ImpactEffects] Blood particle effect instantiated successfully
[03:40:52] [INFO] [ImpactEffects] Blood decals scheduled: 10 to spawn at particle landing times
[03:40:52] [INFO] [ImpactEffects] Blood effect spawned at (359.5468, 619.0182) (scale=1)
[03:40:52] [ENEMY] [Enemy1] ROT_CHANGE: P5:idle_scan -> P2:combat_state, state=PURSUING, target=102.1°, current=-33.8°, player=(174,933), corner_timer=0.00
[03:40:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(174.43158, 933.82684), shooter_id=1371352860709, bullet_pos=(360.21497, 715.39374)
[03:40:52] [INFO] [Bullet] Using shooter_position, distance=286,7551
[03:40:52] [INFO] [Bullet] Distance to wall: 286,7551 (19,525682% of viewport)
[03:40:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:40:52] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=14.1°, player=(174,933), corner_timer=-0.01
[03:40:52] [ENEMY] [Enemy10] PATROL corner check: angle 7.0°
[03:40:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(174.4316, 933.8268), source=PLAYER (AKGL), range=1600, listeners=10
[03:40:52] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=5
[03:40:52] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=7.0°, current=16.2°, player=(174,933), corner_timer=0.30
[03:40:52] [ENEMY] [Enemy1] PURSUING corner check: angle -115.9°
[03:40:52] [INFO] [Player.Homing] Homing effect expired, charges remaining: 5/6
[03:40:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(174.43158, 933.82684), shooter_id=1371352860709, bullet_pos=(498.96512, 847.9898)
[03:40:52] [INFO] [Bullet] Using shooter_position, distance=335,69333
[03:40:52] [INFO] [Bullet] Distance to wall: 335,69333 (22,857977% of viewport)
[03:40:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:40:52] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[03:40:52] [ENEMY] [Enemy2] ROT_CHANGE: P2:combat_state -> P4:velocity, state=RETREATING, target=-172.7°, current=146.1°, player=(174,933), corner_timer=0.00
[03:40:52] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[03:40:52] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[03:40:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(174.43158, 933.82684), shooter_id=1371352860709, bullet_pos=(364.365, 697.06854)
[03:40:52] [INFO] [Bullet] Using shooter_position, distance=303,5279
[03:40:52] [INFO] [Bullet] Distance to wall: 303,5279 (20,667774% of viewport)
[03:40:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
[03:40:52] [INFO] [Bullet] Starting wall penetration at (364.365, 697.06854)
[03:40:52] [INFO] [Bullet] Raycast backward hit penetrating body at distance 32,99398
[03:40:52] [INFO] [Bullet] Body exited signal received for penetrating body
[03:40:52] [INFO] [Bullet] Exiting penetration at (372.39908, 655.5301) after traveling 37,333336 pixels through wall
[03:40:52] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[03:40:52] [INFO] [BloodDecal] Blood puddle created at (413.9379, 653.8919) (added to group)
[03:40:52] [INFO] [BloodDecal] Blood puddle created at (416.2399, 634.9573) (added to group)
[03:40:52] [INFO] [BloodDecal] Blood puddle created at (435.3366, 627.6157) (added to group)
[03:40:52] [INFO] [BloodDecal] Blood puddle created at (456.0446, 681.897) (added to group)
[03:40:52] [INFO] [BloodDecal] Blood puddle created at (460.4305, 681.5108) (added to group)
[03:40:52] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=6.9°, player=(174,933), corner_timer=-0.01
[03:40:52] [ENEMY] [Enemy10] PATROL corner check: angle 3.6°
[03:40:52] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=3.6°, current=9.1°, player=(174,933), corner_timer=0.30
[03:40:52] [ENEMY] [Enemy1] PURSUING corner check: angle 66.4°
[03:40:52] [INFO] [BloodDecal] Blood puddle created at (477.9139, 649.2903) (added to group)
[03:40:53] [INFO] [BloodDecal] Blood puddle created at (528.0875, 671.0179) (added to group)
[03:40:53] [INFO] [BloodDecal] Blood puddle created at (548.2866, 701.9496) (added to group)
[03:40:53] [INFO] [ReplayManager] Recording frame 180 (2,8s): player_valid=True, enemies=10
[03:40:53] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=3.6°, player=(174,933), corner_timer=-0.01
[03:40:53] [ENEMY] [Enemy10] PATROL corner check: angle 1.9°
[03:40:53] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.9°, current=5.8°, player=(174,933), corner_timer=0.30
[03:40:53] [ENEMY] [Enemy10] ROT_CHANGE: P3:corner -> P4:velocity, state=IDLE, target=180.0°, current=1.9°, player=(174,933), corner_timer=-0.01
[03:40:53] [ENEMY] [Enemy10] PATROL corner check: angle 1.0°
[03:40:53] [ENEMY] [Enemy10] ROT_CHANGE: P4:velocity -> P3:corner, state=IDLE, target=1.0°, current=4.2°, player=(174,933), corner_timer=0.30
[03:40:53] [INFO] ------------------------------------------------------------
[03:40:53] [INFO] GAME LOG ENDED: 2026-02-09T03:40:53
[03:40:53] [INFO] ============================================================
