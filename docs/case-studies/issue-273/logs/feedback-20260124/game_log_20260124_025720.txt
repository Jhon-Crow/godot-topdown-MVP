[02:57:20] [INFO] ============================================================
[02:57:20] [INFO] GAME LOG STARTED
[02:57:20] [INFO] ============================================================
[02:57:20] [INFO] Timestamp: 2026-01-24T02:57:20
[02:57:20] [INFO] Log file: I:/Загрузки/godot exe/game_log_20260124_025720.txt
[02:57:20] [INFO] Executable: I:/Загрузки/godot exe/Godot-Top-Down-Template.exe
[02:57:20] [INFO] OS: Windows
[02:57:20] [INFO] Debug build: false
[02:57:20] [INFO] Engine version: 4.3-stable (official)
[02:57:20] [INFO] Project: Godot Top-Down Template
[02:57:20] [INFO] ------------------------------------------------------------
[02:57:20] [INFO] [GameManager] GameManager ready
[02:57:20] [INFO] [ScoreManager] ScoreManager ready
[02:57:20] [INFO] [SoundPropagation] SoundPropagation autoload initialized
[02:57:20] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[02:57:20] [INFO] [PenultimateHit] Saturation shader loaded successfully
[02:57:20] [INFO] [PenultimateHit] PenultimateHitEffectsManager ready - Configuration:
[02:57:20] [INFO] [PenultimateHit]   Time scale: 0.10 (10x slowdown)
[02:57:20] [INFO] [PenultimateHit]   Saturation boost: 2.0 (3.0x)
[02:57:20] [INFO] [PenultimateHit]   Contrast boost: 1.0 (2.0x)
[02:57:20] [INFO] [PenultimateHit]   Effect duration: 3.0 real seconds
[02:57:20] [INFO] [LastChance] Resetting all effects (scene change detected)
[02:57:20] [INFO] [LastChance] Last chance shader loaded successfully
[02:57:20] [INFO] [LastChance] LastChanceEffectsManager ready - Configuration:
[02:57:20] [INFO] [LastChance]   Freeze duration: 6.0 real seconds
[02:57:20] [INFO] [LastChance]   Sepia intensity: 0.70
[02:57:20] [INFO] [LastChance]   Brightness: 0.60
[02:57:20] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FlashbangGrenade.tscn
[02:57:20] [INFO] [GrenadeManager] Loaded grenade scene: res://scenes/projectiles/FragGrenade.tscn
[02:57:20] [ENEMY] [Enemy1] Death animation component initialized
[02:57:20] [ENEMY] [Enemy2] Death animation component initialized
[02:57:20] [ENEMY] [Enemy3] Death animation component initialized
[02:57:20] [ENEMY] [Enemy4] Death animation component initialized
[02:57:20] [ENEMY] [Enemy5] Death animation component initialized
[02:57:20] [ENEMY] [Enemy6] Death animation component initialized
[02:57:20] [ENEMY] [Enemy7] Death animation component initialized
[02:57:20] [ENEMY] [Enemy8] Death animation component initialized
[02:57:20] [ENEMY] [Enemy9] Death animation component initialized
[02:57:20] [ENEMY] [Enemy10] Death animation component initialized
[02:57:20] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[02:57:20] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[02:57:20] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[02:57:20] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[02:57:20] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[02:57:20] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[02:57:20] [INFO] [Player.Debug] Connected to GameManager, debug mode: False
[02:57:20] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[02:57:20] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[02:57:20] [ENEMY] [Enemy10] Grenade system configured: offensive=2, flashbangs=0
[02:57:20] [INFO] [ScoreManager] Level started with 10 enemies
[02:57:20] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 1)
[02:57:20] [ENEMY] [Enemy1] Registered as sound listener
[02:57:20] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[02:57:20] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 2)
[02:57:20] [ENEMY] [Enemy2] Registered as sound listener
[02:57:20] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[02:57:20] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 3)
[02:57:20] [ENEMY] [Enemy3] Registered as sound listener
[02:57:20] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[02:57:20] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 4)
[02:57:20] [ENEMY] [Enemy4] Registered as sound listener
[02:57:20] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[02:57:20] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 5)
[02:57:20] [ENEMY] [Enemy5] Registered as sound listener
[02:57:20] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[02:57:20] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 6)
[02:57:20] [ENEMY] [Enemy6] Registered as sound listener
[02:57:20] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[02:57:20] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 7)
[02:57:20] [ENEMY] [Enemy7] Registered as sound listener
[02:57:20] [ENEMY] [Enemy7] Enemy spawned at (1606.114, 893.8859), health: 4, behavior: PATROL, player_found: yes
[02:57:20] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 8)
[02:57:20] [ENEMY] [Enemy8] Registered as sound listener
[02:57:20] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[02:57:20] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 9)
[02:57:20] [ENEMY] [Enemy9] Registered as sound listener
[02:57:20] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[02:57:20] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 10)
[02:57:20] [ENEMY] [Enemy10] Registered as sound listener
[02:57:20] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 3, behavior: PATROL, player_found: yes
[02:57:20] [INFO] [Player] Detecting weapon pose (frame 3)...
[02:57:20] [INFO] [Player] Detected weapon: Rifle (default pose)
[02:57:20] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[02:57:20] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[02:57:20] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[02:57:20] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[02:57:20] [INFO] [LastChance] Found player: Player
[02:57:20] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[02:57:20] [INFO] [LastChance] Connected to player Damaged signal (C#)
[02:57:20] [INFO] [LastChance] Connected to player Died signal (C#)
[02:57:20] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[02:57:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[02:57:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.731, 1535.008), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[02:57:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[02:57:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1139.423, 1516.307), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[02:57:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1107.906, 1496.302), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[02:57:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1077.226, 1475.035), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:21] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[02:57:21] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1047.428, 1452.549), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:21] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.874, 1508.939), shooter_id=48016393878, bullet_pos=(53.14801, 921.1365)
[02:57:21] [INFO] [Bullet] Using shooter_position, distance=1208.33337402344
[02:57:21] [INFO] [Bullet] Distance to wall: 1208.33337402344 (82.277641366406% of viewport)
[02:57:21] [INFO] [Bullet] Distance-based penetration chance: 50.6760850725264%
[02:57:21] [INFO] [Bullet] Starting wall penetration at (53.14801, 921.1365)
[02:57:21] [INFO] [Bullet] Raycast backward hit penetrating body at distance 22.4616756439209
[02:57:21] [INFO] [Bullet] Body exited signal received for penetrating body
[02:57:21] [INFO] [Bullet] Exiting penetration at (12.37513, 898.4351) after traveling 41.6666641235352 pixels through wall
[02:57:21] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:57:21] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[02:57:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.684, 1487.691), shooter_id=48016393878, bullet_pos=(46.85162, 857.2495)
[02:57:21] [INFO] [Bullet] Using shooter_position, distance=1208.33435058594
[02:57:21] [INFO] [Bullet] Distance to wall: 1208.33435058594 (82.2777078623423% of viewport)
[02:57:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1047.382, 1465.197), shooter_id=48016393878, bullet_pos=(43.06916, 793.3154)
[02:57:21] [INFO] [Bullet] Using shooter_position, distance=1208.33349609375
[02:57:21] [INFO] [Bullet] Distance to wall: 1208.33349609375 (82.277649678398% of viewport)
[02:57:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.684, 1487.691), shooter_id=48016393878, bullet_pos=(245.2156, 700.3463)
[02:57:21] [INFO] [Bullet] Using shooter_position, distance=1145.8251953125
[02:57:21] [INFO] [Bullet] Distance to wall: 1145.8251953125 (78.021344535573% of viewport)
[02:57:21] [INFO] [LastChance] Threat detected: @Area2D@287
[02:57:21] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1047.382, 1465.197), shooter_id=48016393878, bullet_pos=(201.188, 703.0226)
[02:57:21] [INFO] [Bullet] Using shooter_position, distance=1138.83923339844
[02:57:21] [INFO] [Bullet] Distance to wall: 1138.83923339844 (77.5456575427932% of viewport)
[02:57:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1018.01, 1441.508), shooter_id=48016393878, bullet_pos=(41.67921, 729.5751)
[02:57:21] [INFO] [Bullet] Using shooter_position, distance=1208.33349609375
[02:57:21] [INFO] [Bullet] Distance to wall: 1208.33349609375 (82.277649678398% of viewport)
[02:57:21] [INFO] [Bullet] Distance-based penetration chance: 50.6760753752023%
[02:57:21] [INFO] [Bullet] Starting wall penetration at (41.67921, 729.5751)
[02:57:21] [INFO] [Bullet] Raycast backward hit penetrating body at distance 34.6874122619629
[02:57:21] [INFO] [Bullet] Body exited signal received for penetrating body
[02:57:21] [INFO] [Bullet] Exiting penetration at (3.972645, 702.0798) after traveling 41.6666679382324 pixels through wall
[02:57:21] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:57:21] [INFO] [LastChance] Threat detected: @Area2D@289
[02:57:21] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:21] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1077.684, 1487.691), shooter_id=48016393878, bullet_pos=(519.3826, 894.8369)
[02:57:21] [INFO] [Bullet] Using shooter_position, distance=814.3564453125
[02:57:21] [INFO] [Bullet] Distance to wall: 814.3564453125 (55.4510278307876% of viewport)
[02:57:21] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(989.6003, 1416.68), shooter_id=48016393878, bullet_pos=(42.53408, 666.2555)
[02:57:21] [INFO] [Bullet] Using shooter_position, distance=1208.33422851563
[02:57:21] [INFO] [Bullet] Distance to wall: 1208.33422851563 (82.2776995503503% of viewport)
[02:57:21] [INFO] [Bullet] Distance-based penetration chance: 50.676017191258%
[02:57:21] [INFO] [Bullet] Starting wall penetration at (42.53408, 666.2555)
[02:57:21] [ENEMY] [Enemy3] State: IDLE -> COMBAT
[02:57:21] [INFO] [Bullet] Raycast backward hit penetrating body at distance 33.2265319824219
[02:57:21] [INFO] [Bullet] Body exited signal received for penetrating body
[02:57:21] [INFO] [Bullet] Exiting penetration at (5.957748, 637.2736) after traveling 41.6666717529297 pixels through wall
[02:57:21] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:57:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1047.382, 1465.197), shooter_id=48016393878, bullet_pos=(514.6368, 945.6052)
[02:57:22] [INFO] [Bullet] Using shooter_position, distance=744.172973632813
[02:57:22] [INFO] [Bullet] Distance to wall: 744.172973632813 (50.6721061880931% of viewport)
[02:57:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(383.199, 814.8365), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:57:22] [ENEMY] [Enemy1] Heard gunshot at (383.199, 814.8365), source_type=0, intensity=0.01, distance=472
[02:57:22] [ENEMY] [Enemy2] Heard gunshot at (383.199, 814.8365), source_type=0, intensity=0.04, distance=265
[02:57:22] [ENEMY] [Enemy4] Heard gunshot at (383.199, 814.8365), source_type=0, intensity=0.01, distance=425
[02:57:22] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[02:57:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(359.8644, 791.5019), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:57:22] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[02:57:22] [ENEMY] [Enemy3] Hit taken, health: 3/4
[02:57:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(637.6798, 762.9683), source=ENEMY (Enemy3), range=1469, listeners=10
[02:57:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:57:22] [INFO] [LastChance] Threat detected: Bullet
[02:57:22] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:22] [ENEMY] [Enemy3] Hit taken, health: 2/4
[02:57:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(603.5706, 763.9949), source=ENEMY (Enemy3), range=1469, listeners=10
[02:57:22] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:57:22] [INFO] [LastChance] Threat detected: @Area2D@308
[02:57:22] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:22] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[02:57:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(583.1234, 771.5003), source=ENEMY (Enemy3), range=1469, listeners=10
[02:57:22] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[02:57:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(570.6269, 775.2224), shooter_id=46019905055, bullet_pos=(38.45792, 810.444)
[02:57:22] [INFO] [Bullet] Using shooter_position, distance=533.333251953125
[02:57:22] [INFO] [Bullet] Distance to wall: 533.333251953125 (36.3156418388615% of viewport)
[02:57:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:57:22] [INFO] [Bullet] Starting wall penetration at (38.45792, 810.444)
[02:57:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 31.8612823486328
[02:57:22] [INFO] [Bullet] Body exited signal received for penetrating body
[02:57:22] [INFO] [Bullet] Exiting penetration at (0.208271, 812.9756) after traveling 33.3333320617676 pixels through wall
[02:57:22] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:57:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1047.382, 1465.197), shooter_id=48016393878, bullet_pos=(65.25591, 1348.839)
[02:57:22] [INFO] [Bullet] Using shooter_position, distance=988.995056152344
[02:57:22] [INFO] [Bullet] Distance to wall: 988.995056152344 (67.3424919749611% of viewport)
[02:57:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(578.8933, 781.2925), source=ENEMY (Enemy3), range=1469, listeners=10
[02:57:22] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[02:57:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(535.8331, 771.1007), shooter_id=46019905055, bullet_pos=(35.85944, 765.9756)
[02:57:22] [INFO] [Bullet] Using shooter_position, distance=499.999908447266
[02:57:22] [INFO] [Bullet] Distance to wall: 499.999908447266 (34.0459131849337% of viewport)
[02:57:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:57:22] [INFO] [Bullet] Starting wall penetration at (35.85944, 765.9756)
[02:57:22] [INFO] [LastChance] Threat detected: Bullet
[02:57:22] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 34.4736862182617
[02:57:22] [INFO] [Bullet] Body exited signal received for penetrating body
[02:57:22] [INFO] [Bullet] Exiting penetration at (-2.471874, 765.5826) after traveling 33.3333320617676 pixels through wall
[02:57:22] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:57:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(574.6633, 791.0847), source=ENEMY (Enemy3), range=1469, listeners=10
[02:57:22] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[02:57:22] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[02:57:22] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[02:57:22] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[02:57:22] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[02:57:22] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[02:57:22] [INFO] [LastChance] Threat detected: @Area2D@314
[02:57:22] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[02:57:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(515.1019, 773.4207), shooter_id=46019905055, bullet_pos=(54.27, 846.9848)
[02:57:22] [INFO] [Bullet] Using shooter_position, distance=466.666625976563
[02:57:22] [INFO] [Bullet] Distance to wall: 466.666625976563 (31.7761886870018% of viewport)
[02:57:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:57:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(570.4333, 800.8768), source=ENEMY (Enemy3), range=1469, listeners=10
[02:57:22] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[02:57:22] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:57:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(565.8795, 805.3727), source=ENEMY (Enemy3), range=1469, listeners=10
[02:57:22] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[02:57:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(498.1192, 799.1155), shooter_id=46019905055, bullet_pos=(498.1192, 799.1155)
[02:57:22] [INFO] [Bullet] Using shooter_position, distance=0
[02:57:22] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[02:57:22] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[02:57:22] [INFO] [Bullet] Starting wall penetration at (498.1192, 799.1155)
[02:57:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 42.6375732421875
[02:57:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(506.7496, 786.8036), shooter_id=46019905055, bullet_pos=(252.065, 707.766)
[02:57:22] [INFO] [Bullet] Using shooter_position, distance=266.666778564453
[02:57:22] [INFO] [Bullet] Distance to wall: 266.666778564453 (18.1578313094208% of viewport)
[02:57:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:57:22] [INFO] [LastChance] Threat detected: @Area2D@316
[02:57:22] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[02:57:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:22] [INFO] [Bullet] Body exited signal received for penetrating body
[02:57:22] [INFO] [Bullet] Exiting penetration at (460.6039, 791.2386) after traveling 33.3333358764648 pixels through wall
[02:57:22] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:57:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(502.6277, 795.1334), shooter_id=46019905055, bullet_pos=(320.3224, 712.8854)
[02:57:22] [INFO] [Bullet] Using shooter_position, distance=199.999908447266
[02:57:22] [INFO] [Bullet] Distance to wall: 199.999908447266 (13.618361533577% of viewport)
[02:57:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:57:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1047.382, 1465.197), shooter_id=48016393878, bullet_pos=(319.7854, 1593.434)
[02:57:22] [INFO] [Bullet] Using shooter_position, distance=738.811096191406
[02:57:22] [INFO] [Bullet] Distance to wall: 738.811096191406 (50.3070060934845% of viewport)
[02:57:22] [INFO] [Bullet] Distance-based penetration chance: 87.9751595576014%
[02:57:22] [INFO] [Bullet] Starting wall penetration at (319.7854, 1593.434)
[02:57:22] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[02:57:22] [INFO] [Bullet] Exiting penetration at (335.9368, 1608.955) after traveling 17.4002075195313 pixels through wall
[02:57:22] [INFO] [Bullet] Damage multiplier after penetration: 0.05625
[02:57:22] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[02:57:22] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[02:57:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(506.7496, 786.8036), shooter_id=46019905055, bullet_pos=(56.83457, 764.5947)
[02:57:22] [INFO] [Bullet] Using shooter_position, distance=450.462829589844
[02:57:22] [INFO] [Bullet] Distance to wall: 450.462829589844 (30.672842394876% of viewport)
[02:57:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:57:22] [INFO] [Bullet] Starting wall penetration at (56.83457, 764.5947)
[02:57:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 7.4680290222168
[02:57:22] [INFO] [Bullet] Body exited signal received for penetrating body
[02:57:22] [INFO] [Bullet] Exiting penetration at (24.82958, 773.9109) after traveling 28.3333320617676 pixels through wall
[02:57:22] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[02:57:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(502.6277, 795.1334), shooter_id=46019905055, bullet_pos=(43.83279, 794.6754)
[02:57:22] [INFO] [Bullet] Using shooter_position, distance=458.795074462891
[02:57:22] [INFO] [Bullet] Distance to wall: 458.795074462891 (31.240200269929% of viewport)
[02:57:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:57:22] [INFO] [Bullet] Starting wall penetration at (43.83279, 794.6754)
[02:57:22] [INFO] [Bullet] Raycast backward hit penetrating body at distance 20.9936580657959
[02:57:22] [INFO] [Bullet] Body exited signal received for penetrating body
[02:57:22] [INFO] [Bullet] Exiting penetration at (11.86868, 804.1309) after traveling 28.3333358764648 pixels through wall
[02:57:22] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[02:57:23] [ENEMY] [Enemy10] FLANKING started: target=(586.017, 788.1946), side=left, pos=(1022.594, 1432.37)
[02:57:23] [ENEMY] [Enemy10] State: PURSUING -> FLANKING
[02:57:23] [INFO] [Player.Debug] Debug mode toggled: ON
[02:57:23] [INFO] [GameManager] Debug mode toggled: ON
[02:57:24] [ENEMY] [Enemy10] State: FLANKING -> COMBAT
[02:57:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(717.9055, 1106.892), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:25] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=1, below_threshold=7
[02:57:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(256.8564, 1025.351), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:57:25] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=4, self=0, below_threshold=2
[02:57:25] [INFO] [LastChance] Threat detected: Bullet
[02:57:25] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[02:57:25] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(682.5652, 1098.781), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:25] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:57:25] [ENEMY] [Enemy3] State: SUPPRESSED -> IN_COVER
[02:57:25] [ENEMY] [Enemy3] State: IN_COVER -> PURSUING
[02:57:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(233.5219, 1048.686), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:57:25] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=4, self=0, below_threshold=2
[02:57:25] [INFO] [LastChance] Threat detected: @Area2D@327
[02:57:25] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[02:57:25] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(645.6761, 1093.092), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:25] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:57:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(650.6024, 1097.303), shooter_id=48016393878, bullet_pos=(46.05005, 938.7432)
[02:57:25] [INFO] [Bullet] Using shooter_position, distance=624.999938964844
[02:57:25] [INFO] [Bullet] Distance to wall: 624.999938964844 (42.5573951176636% of viewport)
[02:57:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(233.52191, 1048.6855), shooter_id=48838477511, bullet_pos=(548.699, 1018.0061)
[02:57:25] [INFO] [Bullet] Using shooter_position, distance=316,66672
[02:57:25] [INFO] [Bullet] Distance to wall: 316,66672 (21,56242% of viewport)
[02:57:25] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:57:25] [INFO] [Bullet] Starting wall penetration at (548.699, 1018.0061)
[02:57:25] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[02:57:25] [INFO] [Bullet] Exiting penetration at (595.1461, 1013.48486) after traveling 41,66667 pixels through wall
[02:57:25] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[02:57:25] [INFO] [LastChance] Threat detected: @Area2D@331
[02:57:25] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[02:57:25] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(608.4717, 1090.086), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:25] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[02:57:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(614.7623, 1094.064), shooter_id=48016393878, bullet_pos=(41.32508, 987.0714)
[02:57:25] [INFO] [Bullet] Using shooter_position, distance=583.333312988281
[02:57:25] [INFO] [Bullet] Distance to wall: 583.333312988281 (39.7202379367503% of viewport)
[02:57:25] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:57:25] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[02:57:25] [INFO] [LastChance] Threat detected: @Area2D@335
[02:57:25] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[02:57:25] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(577.7083, 1093.341), shooter_id=48016393878, bullet_pos=(39.39597, 1033.152)
[02:57:25] [INFO] [Bullet] Using shooter_position, distance=541.666625976563
[02:57:25] [INFO] [Bullet] Distance to wall: 541.666625976563 (36.883076599841% of viewport)
[02:57:25] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:57:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(577.1257, 1085.867), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:25] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[02:57:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(540.6917, 1095.173), shooter_id=48016393878, bullet_pos=(41.09348, 1075.133)
[02:57:25] [INFO] [Bullet] Using shooter_position, distance=500.000030517578
[02:57:25] [INFO] [Bullet] Distance to wall: 500.000030517578 (34.0459214969257% of viewport)
[02:57:25] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:57:25] [INFO] [Bullet] Starting wall penetration at (41.09348, 1075.133)
[02:57:25] [INFO] [LastChance] Threat detected: Bullet
[02:57:25] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[02:57:25] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:25] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.5658798217773
[02:57:25] [INFO] [Bullet] Body exited signal received for penetrating body
[02:57:25] [INFO] [Bullet] Exiting penetration at (-5.535694, 1073.262) after traveling 41.6666717529297 pixels through wall
[02:57:25] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:57:25] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(583.5845, 1049.097), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:25] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[02:57:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(510.0124, 1096.202), shooter_id=48016393878, bullet_pos=(59.13249, 1178.522)
[02:57:25] [INFO] [Bullet] Using shooter_position, distance=458.333129882813
[02:57:25] [INFO] [Bullet] Distance to wall: 458.333129882813 (31.2087456140303% of viewport)
[02:57:25] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:57:25] [INFO] [Bullet] Starting wall penetration at (59.13249, 1178.522)
[02:57:25] [INFO] [Bullet] Raycast backward hit penetrating body at distance 19.0856609344482
[02:57:25] [INFO] [Bullet] Body exited signal received for penetrating body
[02:57:25] [INFO] [Bullet] Exiting penetration at (13.22471, 1186.903) after traveling 41.6666679382324 pixels through wall
[02:57:25] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:57:25] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(256.8564, 1025.3512), shooter_id=48838477511, bullet_pos=(1857.1366, 1186.0887)
[02:57:25] [INFO] [Bullet] Using shooter_position, distance=1608,3324
[02:57:25] [INFO] [Bullet] Distance to wall: 1608,3324 (109,514305% of viewport)
[02:57:25] [INFO] [Bullet] Distance-based penetration chance: 28,097141%
[02:57:25] [INFO] [Bullet] Starting wall penetration at (1857.1366, 1186.0887)
[02:57:26] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[02:57:26] [INFO] [Bullet] Exiting penetration at (1903.5696, 1190.7527) after traveling 41,666668 pixels through wall
[02:57:26] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[02:57:26] [INFO] [LastChance] Threat detected: @Area2D@339
[02:57:26] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[02:57:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:26] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(519.6, 1070.041), shooter_id=48016393878, bullet_pos=(33.21362, 1185.922)
[02:57:26] [INFO] [Bullet] Using shooter_position, distance=500.000061035156
[02:57:26] [INFO] [Bullet] Distance to wall: 500.000061035156 (34.0459235749237% of viewport)
[02:57:26] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:57:26] [INFO] [Bullet] Starting wall penetration at (33.21362, 1185.922)
[02:57:26] [INFO] [Bullet] Raycast backward hit penetrating body at distance 45.4190673828125
[02:57:26] [INFO] [Bullet] Body exited signal received for penetrating body
[02:57:26] [INFO] [Bullet] Exiting penetration at (-12.18244, 1196.737) after traveling 41.6666679382324 pixels through wall
[02:57:26] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:57:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(633.8838, 1068.678), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:26] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=1, below_threshold=5
[02:57:26] [INFO] [LastChance] Threat detected: Bullet
[02:57:26] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[02:57:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:26] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[02:57:26] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[02:57:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(669.604, 1068.778), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:26] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:57:26] [ENEMY] [Enemy2] FLANKING started: target=(49.16925, 1142.099), side=left, pos=(395.0929, 646.5406)
[02:57:26] [ENEMY] [Enemy2] State: PURSUING -> FLANKING
[02:57:26] [INFO] [LastChance] Threat detected: Bullet
[02:57:26] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:57:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(682.9683, 1065.539), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:26] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:57:26] [INFO] [LastChance] Threat detected: Bullet
[02:57:26] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:57:26] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:26] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[02:57:26] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[02:57:26] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[02:57:26] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(690.1277, 1069.906), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:26] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:57:26] [INFO] [LastChance] Threat detected: Bullet
[02:57:26] [INFO] [LastChance] Triggering last chance effect!
[02:57:26] [INFO] [LastChance] Starting last chance effect:
[02:57:26] [INFO] [LastChance]   - Time will be frozen (except player)
[02:57:26] [INFO] [LastChance]   - Duration: 6.0 real seconds
[02:57:26] [INFO] [LastChance]   - Sepia intensity: 0.70
[02:57:26] [INFO] [LastChance]   - Brightness: 0.60
[02:57:26] [INFO] [LastChance] Pushed bullet Bullet from distance 118.3 to 200.0
[02:57:26] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[02:57:26] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[02:57:26] [INFO] [LastChance] Skipping player node: Player
[02:57:26] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[02:57:26] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[02:57:26] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[02:57:27] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[02:57:27] [INFO] [LastChance] Resetting all effects (scene change detected)
[02:57:27] [INFO] [LastChance] Ending last chance effect
[02:57:27] [INFO] [LastChance] All process modes restored
[02:57:27] [INFO] [LastChance] Restored original colors to 5 player sprites
[02:57:27] [ENEMY] [Enemy1] Death animation component initialized
[02:57:27] [ENEMY] [Enemy2] Death animation component initialized
[02:57:27] [ENEMY] [Enemy3] Death animation component initialized
[02:57:27] [ENEMY] [Enemy4] Death animation component initialized
[02:57:27] [ENEMY] [Enemy5] Death animation component initialized
[02:57:27] [ENEMY] [Enemy6] Death animation component initialized
[02:57:27] [ENEMY] [Enemy7] Death animation component initialized
[02:57:27] [ENEMY] [Enemy8] Death animation component initialized
[02:57:27] [ENEMY] [Enemy9] Death animation component initialized
[02:57:27] [ENEMY] [Enemy10] Death animation component initialized
[02:57:27] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[02:57:27] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[02:57:27] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[02:57:27] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[02:57:27] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[02:57:27] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[02:57:27] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[02:57:27] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[02:57:27] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[02:57:27] [ENEMY] [Enemy10] Grenade system configured: offensive=2, flashbangs=0
[02:57:27] [INFO] [ScoreManager] Level started with 10 enemies
[02:57:27] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[02:57:27] [ENEMY] [Enemy1] Registered as sound listener
[02:57:27] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[02:57:27] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[02:57:27] [ENEMY] [Enemy2] Registered as sound listener
[02:57:27] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[02:57:27] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[02:57:27] [ENEMY] [Enemy3] Registered as sound listener
[02:57:27] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 4, behavior: GUARD, player_found: yes
[02:57:27] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[02:57:27] [ENEMY] [Enemy4] Registered as sound listener
[02:57:27] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[02:57:27] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[02:57:27] [ENEMY] [Enemy5] Registered as sound listener
[02:57:27] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[02:57:27] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[02:57:27] [ENEMY] [Enemy6] Registered as sound listener
[02:57:27] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[02:57:27] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[02:57:27] [ENEMY] [Enemy7] Registered as sound listener
[02:57:27] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[02:57:27] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[02:57:27] [ENEMY] [Enemy8] Registered as sound listener
[02:57:27] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[02:57:27] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[02:57:27] [ENEMY] [Enemy9] Registered as sound listener
[02:57:27] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[02:57:27] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[02:57:27] [ENEMY] [Enemy10] Registered as sound listener
[02:57:27] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[02:57:27] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[02:57:27] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[02:57:27] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[02:57:27] [INFO] [LastChance] Found player: Player
[02:57:27] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[02:57:27] [INFO] [LastChance] Connected to player Damaged signal (C#)
[02:57:27] [INFO] [LastChance] Connected to player Died signal (C#)
[02:57:27] [INFO] [Player] Detecting weapon pose (frame 3)...
[02:57:27] [INFO] [Player] Detected weapon: Rifle (default pose)
[02:57:27] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[02:57:28] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[02:57:28] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[02:57:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1171.598, 1535.264), source=ENEMY (Enemy10), range=1469, listeners=20
[02:57:28] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[02:57:28] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[02:57:28] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[02:57:28] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1139.565, 1516.112), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:28] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1109.364, 1494.194), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:29] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(827.5562, 1255.314), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:57:29] [ENEMY] [Enemy4] Heard gunshot at (827.5562, 1255.314), source_type=0, intensity=0.02, distance=356
[02:57:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=8
[02:57:29] [INFO] [LastChance] Threat detected: @Area2D@598
[02:57:29] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:29] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(854.7798, 1228.091), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:57:29] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=0, below_threshold=8
[02:57:29] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[02:57:29] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(810.5526, 960.7778), source=ENEMY (Enemy4), range=1469, listeners=10
[02:57:29] [ENEMY] [Enemy3] Heard gunshot at (810.5526, 960.7778), source_type=1, intensity=0.04, distance=238
[02:57:29] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
[02:57:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1108.718, 1509.249), shooter_id=498937629348, bullet_pos=(52.48932, 922.3494)
[02:57:29] [INFO] [Bullet] Using shooter_position, distance=1208.33374023438
[02:57:29] [INFO] [Bullet] Distance to wall: 1208.33374023438 (82.2776663023821% of viewport)
[02:57:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1052.031, 1457.331), shooter_id=498937629348, bullet_pos=(503.9665, 1008.599)
[02:57:29] [INFO] [Bullet] Using shooter_position, distance=708.332458496094
[02:57:29] [INFO] [Bullet] Distance to wall: 708.332458496094 (48.2316596075379% of viewport)
[02:57:29] [ENEMY] [Enemy10] State: PURSUING -> RETREATING
[02:57:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(854.77985, 1228.0908), shooter_id=499759712981, bullet_pos=(1149.3341, 1662.674)
[02:57:29] [INFO] [Bullet] Using shooter_position, distance=524,99976
[02:57:29] [INFO] [Bullet] Distance to wall: 524,99976 (35,7482% of viewport)
[02:57:29] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:57:29] [INFO] [Bullet] Starting wall penetration at (1149.3341, 1662.674)
[02:57:29] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
[02:57:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 32,984196
[02:57:29] [INFO] [Bullet] Body exited signal received for penetrating body
[02:57:29] [INFO] [Bullet] Exiting penetration at (1175.5167, 1701.3036) after traveling 41,66667 pixels through wall
[02:57:29] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[02:57:29] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[02:57:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1079.02, 1485.049), shooter_id=498937629348, bullet_pos=(39.5875, 790.7285)
[02:57:29] [INFO] [Bullet] Using shooter_position, distance=1250.00036621094
[02:57:29] [INFO] [Bullet] Distance to wall: 1250.00036621094 (85.1148234832954% of viewport)
[02:57:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(827.55615, 1255.3141), shooter_id=499759712981, bullet_pos=(1366.0671, 2078.0845)
[02:57:29] [INFO] [Bullet] Using shooter_position, distance=983,33374
[02:57:29] [INFO] [Bullet] Distance to wall: 983,33374 (66,957% of viewport)
[02:57:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1079.02, 1485.049), shooter_id=498937629348, bullet_pos=(156.0239, 701.545)
[02:57:29] [INFO] [Bullet] Using shooter_position, distance=1210.70239257813
[02:57:29] [INFO] [Bullet] Distance to wall: 1210.70239257813 (82.4389521960356% of viewport)
[02:57:29] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[02:57:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1052.031, 1457.331), shooter_id=498937629348, bullet_pos=(41.77997, 1345.032)
[02:57:29] [INFO] [Bullet] Using shooter_position, distance=1016.47320556641
[02:57:29] [INFO] [Bullet] Distance to wall: 1016.47320556641 (69.213529696426% of viewport)
[02:57:29] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1079.02, 1485.049), shooter_id=498937629348, bullet_pos=(520.9625, 922.1951)
[02:57:29] [INFO] [Bullet] Using shooter_position, distance=792.611450195313
[02:57:29] [INFO] [Bullet] Distance to wall: 792.611450195313 (53.9703711277381% of viewport)
[02:57:29] [INFO] [Bullet] Distance-based penetration chance: 83.7012336843056%
[02:57:29] [INFO] [Bullet] Starting wall penetration at (520.9625, 922.1951)
[02:57:29] [INFO] [Bullet] Raycast backward hit penetrating body at distance 31.5545616149902
[02:57:29] [INFO] [Bullet] Body exited signal received for penetrating body
[02:57:29] [INFO] [Bullet] Exiting penetration at (551.0026, 940.358) after traveling 30.1041660308838 pixels through wall
[02:57:29] [INFO] [Bullet] Damage multiplier after penetration: 0.225
[02:57:29] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[02:57:30] [ENEMY] [Enemy10] State: SUPPRESSED -> SEEKING_COVER
[02:57:30] [ENEMY] [Enemy10] State: SEEKING_COVER -> IN_COVER
[02:57:30] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[02:57:30] [ENEMY] [Enemy10] State: SUPPRESSED -> SEEKING_COVER
[02:57:30] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[02:57:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1124.899, 1440.887), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:30] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:30] [INFO] [LastChance] Threat detected: Bullet
[02:57:30] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:30] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:30] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[02:57:30] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[02:57:30] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[02:57:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1160.858, 1440.495), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:30] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:30] [INFO] [LastChance] Threat detected: Bullet
[02:57:30] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:57:30] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:30] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[02:57:30] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[02:57:30] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[02:57:31] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[02:57:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1166.092, 1439.473), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:31] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:31] [INFO] [LastChance] Threat detected: Bullet
[02:57:31] [INFO] [LastChance] Triggering last chance effect!
[02:57:31] [INFO] [LastChance] Starting last chance effect:
[02:57:31] [INFO] [LastChance]   - Time will be frozen (except player)
[02:57:31] [INFO] [LastChance]   - Duration: 6.0 real seconds
[02:57:31] [INFO] [LastChance]   - Sepia intensity: 0.70
[02:57:31] [INFO] [LastChance]   - Brightness: 0.60
[02:57:31] [INFO] [LastChance] Pushed bullet Bullet from distance 130.7 to 200.0
[02:57:31] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[02:57:31] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[02:57:31] [INFO] [LastChance] Skipping player node: Player
[02:57:31] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[02:57:31] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[02:57:31] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[02:57:34] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@616
[02:57:34] [INFO] [LastChance] Registered frozen player bullet: @Area2D@616
[02:57:34] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1091.979, 1571.098), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:57:34] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=9
[02:57:35] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[02:57:35] [ENEMY] [Enemy1] Player reloading state changed: false -> true
[02:57:35] [ENEMY] [Enemy2] Player reloading state changed: false -> true
[02:57:35] [ENEMY] [Enemy3] Player reloading state changed: false -> true
[02:57:35] [ENEMY] [Enemy4] Player reloading state changed: false -> true
[02:57:35] [ENEMY] [Enemy5] Player reloading state changed: false -> true
[02:57:35] [ENEMY] [Enemy6] Player reloading state changed: false -> true
[02:57:35] [ENEMY] [Enemy7] Player reloading state changed: false -> true
[02:57:35] [ENEMY] [Enemy8] Player reloading state changed: false -> true
[02:57:35] [ENEMY] [Enemy9] Player reloading state changed: false -> true
[02:57:35] [ENEMY] [Enemy10] Player reloading state changed: false -> true
[02:57:35] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(1008.337, 1626.711), source=PLAYER (Player), range=900, listeners=10
[02:57:35] [ENEMY] [Enemy10] Heard player RELOAD at (1008.337, 1626.711), intensity=0.04, distance=245
[02:57:35] [ENEMY] [Enemy10] Vulnerability sound triggered pursuit - transitioning from SEEKING_COVER to PURSUING
[02:57:35] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=7, self=0, below_threshold=2
[02:57:35] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[02:57:35] [INFO] [Player.Reload.Anim] Phase changed to: PullBolt (duration: 0,35s)
[02:57:35] [ENEMY] [Enemy1] Player reloading state changed: true -> false
[02:57:35] [ENEMY] [Enemy2] Player reloading state changed: true -> false
[02:57:35] [ENEMY] [Enemy3] Player reloading state changed: true -> false
[02:57:35] [ENEMY] [Enemy4] Player reloading state changed: true -> false
[02:57:35] [ENEMY] [Enemy5] Player reloading state changed: true -> false
[02:57:35] [ENEMY] [Enemy6] Player reloading state changed: true -> false
[02:57:35] [ENEMY] [Enemy7] Player reloading state changed: true -> false
[02:57:35] [ENEMY] [Enemy8] Player reloading state changed: true -> false
[02:57:35] [ENEMY] [Enemy9] Player reloading state changed: true -> false
[02:57:35] [ENEMY] [Enemy10] Player reloading state changed: true -> false
[02:57:35] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[02:57:35] [INFO] [Player.Reload.Anim] LeftArm: pos=(23.299114, 5.987373), target=(24, 6), base=(24, 6)
[02:57:35] [INFO] [Player.Reload.Anim] RightArm: pos=(-1.9999572, 6.106285), target=(-2, 6), base=(-2, 6)
[02:57:35] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[02:57:37] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[02:57:37] [INFO] [LastChance] Ending last chance effect
[02:57:37] [INFO] [LastChance] All process modes restored
[02:57:37] [INFO] [LastChance] Unfroze player bullet: @Area2D@616
[02:57:37] [INFO] [LastChance] Restored original colors to 5 player sprites
[02:57:37] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[02:57:37] [ENEMY] [Enemy10] Pursuing vulnerability sound at (1008.337, 1626.711), distance=245
[02:57:37] [ENEMY] [Enemy10] Hit taken, health: 3/4
[02:57:37] [ENEMY] [Enemy4] FLANKING started: target=(809.3756, 1576.103), side=left, pos=(823.1403, 966.5663)
[02:57:37] [ENEMY] [Enemy4] State: PURSUING -> FLANKING
[02:57:37] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1098.374, 1446.168), shooter_id=498937629348, bullet_pos=(901.0034, 1444.633)
[02:57:37] [INFO] [Bullet] Using shooter_position, distance=197.376647949219
[02:57:37] [INFO] [Bullet] Distance to wall: 197.376647949219 (13.4397389025143% of viewport)
[02:57:37] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:57:37] [INFO] [Bullet] Starting wall penetration at (901.0034, 1444.633)
[02:57:37] [INFO] [Bullet] Raycast backward hit penetrating body at distance 25.3282642364502
[02:57:37] [INFO] [Bullet] Body exited signal received for penetrating body
[02:57:37] [INFO] [Bullet] Exiting penetration at (862.6751, 1444.007) after traveling 33.3333358764648 pixels through wall
[02:57:37] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:57:37] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
[02:57:37] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[02:57:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1087.707, 1492.972), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:37] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:37] [INFO] [LastChance] Threat detected: Bullet
[02:57:37] [INFO] [LastChance] Effect already used this life
[02:57:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1084.858, 1482.693), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:37] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:37] [INFO] [LastChance] Threat detected: @Area2D@618
[02:57:37] [INFO] [LastChance] Effect already used this life
[02:57:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:37] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[02:57:37] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[02:57:37] [INFO] [PenultimateHit] Player died - ending penultimate effect
[02:57:37] [INFO] [LastChance] Player died
[02:57:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1082.01, 1472.413), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:37] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:37] [INFO] [LastChance] Threat detected: @Area2D@619
[02:57:37] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1079.161, 1462.134), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:37] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:37] [INFO] [LastChance] Threat detected: @Area2D@620
[02:57:37] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:37] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1058.136, 1554.26), shooter_id=498937629348, bullet_pos=(829.6774, 2072.833)
[02:57:37] [INFO] [Bullet] Using shooter_position, distance=566.666442871094
[02:57:37] [INFO] [Bullet] Distance to wall: 566.666442871094 (38.5853601027993% of viewport)
[02:57:37] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:57:37] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[02:57:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1075.173, 1447.743), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:37] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:37] [INFO] [LastChance] Threat detected: @Area2D@622
[02:57:37] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:37] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[02:57:37] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1072.329, 1431.616), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:37] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:37] [INFO] [LastChance] Threat detected: @Area2D@624
[02:57:37] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:37] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:38] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[02:57:38] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1081.364, 1429.669), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:38] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:38] [INFO] [LastChance] Threat detected: Bullet
[02:57:38] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:38] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:38] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[02:57:38] [INFO] [LastChance] Resetting all effects (scene change detected)
[02:57:38] [ENEMY] [Enemy1] Death animation component initialized
[02:57:38] [ENEMY] [Enemy2] Death animation component initialized
[02:57:38] [ENEMY] [Enemy3] Death animation component initialized
[02:57:38] [ENEMY] [Enemy4] Death animation component initialized
[02:57:38] [ENEMY] [Enemy5] Death animation component initialized
[02:57:38] [ENEMY] [Enemy6] Death animation component initialized
[02:57:38] [ENEMY] [Enemy7] Death animation component initialized
[02:57:38] [ENEMY] [Enemy8] Death animation component initialized
[02:57:38] [ENEMY] [Enemy9] Death animation component initialized
[02:57:38] [ENEMY] [Enemy10] Death animation component initialized
[02:57:38] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[02:57:38] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[02:57:38] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[02:57:38] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[02:57:38] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[02:57:38] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[02:57:38] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[02:57:38] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[02:57:38] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[02:57:38] [ENEMY] [Enemy10] Grenade system configured: offensive=2, flashbangs=0
[02:57:38] [INFO] [ScoreManager] Level started with 10 enemies
[02:57:38] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[02:57:38] [ENEMY] [Enemy1] Registered as sound listener
[02:57:38] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[02:57:38] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[02:57:38] [ENEMY] [Enemy2] Registered as sound listener
[02:57:38] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[02:57:38] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[02:57:38] [ENEMY] [Enemy3] Registered as sound listener
[02:57:38] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[02:57:38] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[02:57:38] [ENEMY] [Enemy4] Registered as sound listener
[02:57:38] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[02:57:38] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[02:57:38] [ENEMY] [Enemy5] Registered as sound listener
[02:57:38] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[02:57:38] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[02:57:38] [ENEMY] [Enemy6] Registered as sound listener
[02:57:38] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 2, behavior: GUARD, player_found: yes
[02:57:38] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[02:57:38] [ENEMY] [Enemy7] Registered as sound listener
[02:57:38] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[02:57:38] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[02:57:38] [ENEMY] [Enemy8] Registered as sound listener
[02:57:38] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[02:57:38] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[02:57:38] [ENEMY] [Enemy9] Registered as sound listener
[02:57:38] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[02:57:38] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[02:57:38] [ENEMY] [Enemy10] Registered as sound listener
[02:57:38] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[02:57:38] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[02:57:38] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[02:57:38] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[02:57:38] [INFO] [LastChance] Found player: Player
[02:57:38] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[02:57:38] [INFO] [LastChance] Connected to player Damaged signal (C#)
[02:57:38] [INFO] [LastChance] Connected to player Died signal (C#)
[02:57:38] [INFO] [Player] Detecting weapon pose (frame 3)...
[02:57:38] [INFO] [Player] Detected weapon: Rifle (default pose)
[02:57:38] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[02:57:39] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[02:57:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(600.8834, 1231.979), source=PLAYER (AssaultRifle), range=1469, listeners=20
[02:57:39] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[02:57:39] [ENEMY] [Enemy3] Heard gunshot at (600.8834, 1231.979), source_type=0, intensity=0.01, distance=492
[02:57:39] [ENEMY] [Enemy4] Heard gunshot at (600.8834, 1231.979), source_type=0, intensity=0.02, distance=387
[02:57:39] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=6
[02:57:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(628.1071, 1204.756), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:57:39] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=6
[02:57:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.152, 1518.793), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:39] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:39] [ENEMY] [Enemy10] Hit taken, health: 1/2
[02:57:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1114.032, 1498.603), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:39] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(763.1556, 958.8647), source=ENEMY (Enemy4), range=1469, listeners=10
[02:57:39] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
[02:57:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(743.4154, 1023.987), shooter_id=822217804985, bullet_pos=(743.4154, 1023.987)
[02:57:39] [INFO] [Bullet] Using shooter_position, distance=0
[02:57:39] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[02:57:39] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[02:57:39] [INFO] [Bullet] Starting wall penetration at (743.4154, 1023.987)
[02:57:39] [INFO] [LastChance] Threat detected: @Area2D@885
[02:57:39] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:39] [ENEMY] [Enemy10] Hit taken, health: 0/2
[02:57:39] [ENEMY] [Enemy10] Enemy died (ricochet: false, penetration: false)
[02:57:39] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[02:57:39] [INFO] [SoundPropagation] Unregistered listener: Enemy10 (remaining: 9)
[02:57:39] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[02:57:39] [ENEMY] [Enemy10] Death animation started with hit direction: (1, 0)
[02:57:39] [INFO] [Bullet] Raycast backward hit penetrating body at distance 38.3193778991699
[02:57:39] [INFO] [Bullet] Body exited signal received for penetrating body
[02:57:39] [INFO] [Bullet] Exiting penetration at (728.1636, 1059.156) after traveling 33.3333358764648 pixels through wall
[02:57:39] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:57:39] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(763.1556, 958.8647), source=ENEMY (Enemy4), range=1469, listeners=9
[02:57:39] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=7
[02:57:39] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(752.4586, 1026.067), shooter_id=822217804985, bullet_pos=(752.4586, 1026.067)
[02:57:39] [INFO] [Bullet] Using shooter_position, distance=0
[02:57:39] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[02:57:39] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[02:57:39] [INFO] [Bullet] Starting wall penetration at (752.4586, 1026.067)
[02:57:39] [INFO] [LastChance] Threat detected: @Area2D@888
[02:57:39] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:39] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:39] [INFO] [Bullet] Raycast backward hit penetrating body at distance 40.479907989502
[02:57:39] [INFO] [Bullet] Body exited signal received for penetrating body
[02:57:39] [INFO] [Bullet] Exiting penetration at (742.1332, 1062.984) after traveling 33.3333358764648 pixels through wall
[02:57:39] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:57:39] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[02:57:39] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[02:57:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.793, 1489.214), shooter_id=823929081119, bullet_pos=(61.57399, 843.317)
[02:57:40] [INFO] [Bullet] Using shooter_position, distance=1208.33374023438
[02:57:40] [INFO] [Bullet] Distance to wall: 1208.33374023438 (82.2776663023821% of viewport)
[02:57:40] [INFO] [Bullet] Distance-based penetration chance: 50.6760559805542%
[02:57:40] [INFO] [Bullet] Penetration failed (distance roll)
[02:57:40] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1054.648, 1465.261), shooter_id=823929081119, bullet_pos=(55.45337, 742.2656)
[02:57:40] [INFO] [Bullet] Using shooter_position, distance=1233.33312988281
[02:57:40] [INFO] [Bullet] Distance to wall: 1233.33312988281 (83.9799207133683% of viewport)
[02:57:40] [INFO] [Bullet] Distance-based penetration chance: 48.6900925010704%
[02:57:40] [INFO] [Bullet] Starting wall penetration at (55.45337, 742.2656)
[02:57:40] [INFO] [Bullet] Raycast backward hit penetrating body at distance 9.38420486450195
[02:57:40] [INFO] [Bullet] Body exited signal received for penetrating body
[02:57:40] [INFO] [Bullet] Exiting penetration at (24.39733, 719.7941) after traveling 33.3333358764648 pixels through wall
[02:57:40] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:57:40] [ENEMY] [Enemy10] Ragdoll activated
[02:57:40] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[02:57:40] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[02:57:40] [INFO] [LastChance] Resetting all effects (scene change detected)
[02:57:40] [ENEMY] [Enemy1] Death animation component initialized
[02:57:40] [ENEMY] [Enemy2] Death animation component initialized
[02:57:40] [ENEMY] [Enemy3] Death animation component initialized
[02:57:40] [ENEMY] [Enemy4] Death animation component initialized
[02:57:40] [ENEMY] [Enemy5] Death animation component initialized
[02:57:40] [ENEMY] [Enemy6] Death animation component initialized
[02:57:40] [ENEMY] [Enemy7] Death animation component initialized
[02:57:40] [ENEMY] [Enemy8] Death animation component initialized
[02:57:40] [ENEMY] [Enemy9] Death animation component initialized
[02:57:40] [ENEMY] [Enemy10] Death animation component initialized
[02:57:40] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[02:57:40] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[02:57:40] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[02:57:40] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[02:57:40] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[02:57:40] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[02:57:40] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[02:57:40] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[02:57:40] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[02:57:40] [ENEMY] [Enemy10] Grenade system configured: offensive=2, flashbangs=0
[02:57:40] [INFO] [ScoreManager] Level started with 10 enemies
[02:57:40] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[02:57:40] [ENEMY] [Enemy1] Registered as sound listener
[02:57:40] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 3, behavior: GUARD, player_found: yes
[02:57:40] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[02:57:40] [ENEMY] [Enemy2] Registered as sound listener
[02:57:40] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[02:57:40] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[02:57:40] [ENEMY] [Enemy3] Registered as sound listener
[02:57:40] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[02:57:40] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[02:57:40] [ENEMY] [Enemy4] Registered as sound listener
[02:57:40] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 2, behavior: GUARD, player_found: yes
[02:57:40] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[02:57:40] [ENEMY] [Enemy5] Registered as sound listener
[02:57:40] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[02:57:40] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[02:57:40] [ENEMY] [Enemy6] Registered as sound listener
[02:57:40] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[02:57:40] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[02:57:40] [ENEMY] [Enemy7] Registered as sound listener
[02:57:40] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[02:57:40] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[02:57:40] [ENEMY] [Enemy8] Registered as sound listener
[02:57:40] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[02:57:40] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[02:57:40] [ENEMY] [Enemy9] Registered as sound listener
[02:57:40] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[02:57:40] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[02:57:40] [ENEMY] [Enemy10] Registered as sound listener
[02:57:40] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[02:57:40] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[02:57:40] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[02:57:40] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[02:57:40] [INFO] [LastChance] Found player: Player
[02:57:40] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[02:57:40] [INFO] [LastChance] Connected to player Damaged signal (C#)
[02:57:40] [INFO] [LastChance] Connected to player Died signal (C#)
[02:57:40] [INFO] [Player] Detecting weapon pose (frame 3)...
[02:57:40] [INFO] [Player] Detected weapon: Rifle (default pose)
[02:57:40] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[02:57:41] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[02:57:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(643.2725, 1228.09), source=PLAYER (AssaultRifle), range=1469, listeners=19
[02:57:41] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[02:57:41] [ENEMY] [Enemy3] Heard gunshot at (643.2725, 1228.09), source_type=0, intensity=0.01, distance=481
[02:57:41] [ENEMY] [Enemy4] Heard gunshot at (643.2725, 1228.09), source_type=0, intensity=0.02, distance=364
[02:57:41] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=6
[02:57:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1143.891, 1519.256), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:41] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1112.705, 1498.743), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:41] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:41] [ENEMY] [Enemy10] Hit taken, health: 1/2
[02:57:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(774.5547, 955.754), source=ENEMY (Enemy4), range=1469, listeners=10
[02:57:41] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
[02:57:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(760.9862, 1022.436), shooter_id=972340332600, bullet_pos=(760.9862, 1022.436)
[02:57:41] [INFO] [Bullet] Using shooter_position, distance=0
[02:57:41] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[02:57:41] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[02:57:41] [INFO] [Bullet] Starting wall penetration at (760.9862, 1022.436)
[02:57:41] [INFO] [Bullet] Raycast backward hit penetrating body at distance 36.6881866455078
[02:57:41] [INFO] [LastChance] Threat detected: Bullet
[02:57:41] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:41] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:41] [INFO] [Bullet] Body exited signal received for penetrating body
[02:57:41] [INFO] [Bullet] Exiting penetration at (749.0874, 1058.876) after traveling 33.3333358764648 pixels through wall
[02:57:41] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:57:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1085.32, 1478.374), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:41] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:41] [INFO] [LastChance] Threat detected: @Area2D@1159
[02:57:41] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:41] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:41] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(774.5547, 955.754), source=ENEMY (Enemy4), range=1469, listeners=10
[02:57:41] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
[02:57:41] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(770.4282, 1023.677), shooter_id=972340332600, bullet_pos=(770.4282, 1023.677)
[02:57:41] [INFO] [Bullet] Using shooter_position, distance=0
[02:57:41] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[02:57:41] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[02:57:41] [INFO] [Bullet] Starting wall penetration at (770.4282, 1023.677)
[02:57:41] [INFO] [Bullet] Raycast backward hit penetrating body at distance 38.0055389404297
[02:57:41] [INFO] [LastChance] Threat detected: @Area2D@1163
[02:57:41] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:41] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:41] [INFO] [Bullet] Body exited signal received for penetrating body
[02:57:41] [INFO] [Bullet] Exiting penetration at (763.7331, 1061.421) after traveling 33.3333358764648 pixels through wall
[02:57:41] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:57:41] [ENEMY] [Enemy10] State: COMBAT -> PURSUING
[02:57:41] [INFO] [LastChance] Threat detected: Bullet
[02:57:41] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:41] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:41] [ENEMY] [Enemy10] State: PURSUING -> RETREATING
[02:57:42] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(774.5547, 955.754), source=ENEMY (Enemy4), range=1469, listeners=10
[02:57:42] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
[02:57:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(780.7972, 1023.516), shooter_id=972340332600, bullet_pos=(780.7972, 1023.516)
[02:57:42] [INFO] [Bullet] Using shooter_position, distance=0
[02:57:42] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[02:57:42] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[02:57:42] [INFO] [Bullet] Starting wall penetration at (780.7972, 1023.516)
[02:57:42] [INFO] [Bullet] Raycast backward hit penetrating body at distance 37.8486442565918
[02:57:42] [INFO] [LastChance] Threat detected: @Area2D@1166
[02:57:42] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:42] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:42] [INFO] [Bullet] Body exited signal received for penetrating body
[02:57:42] [INFO] [Bullet] Exiting penetration at (779.9152, 1061.839) after traveling 33.3333320617676 pixels through wall
[02:57:42] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:57:42] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
[02:57:42] [ENEMY] [Enemy10] Grenade trigger: critical health (1 HP)
[02:57:42] [ENEMY] [Enemy10] Preparing to throw frag grenade at (782.425, 1183.982)
[02:57:42] [ENEMY] [Enemy10] State: IN_COVER -> THROWING_GRENADE
[02:57:42] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[02:57:42] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[02:57:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.24, 1490.281), shooter_id=974051608792, bullet_pos=(47.61215, 850.1075)
[02:57:42] [INFO] [Bullet] Using shooter_position, distance=1216.66687011719
[02:57:42] [INFO] [Bullet] Distance to wall: 1216.66687011719 (82.8450844393775% of viewport)
[02:57:42] [INFO] [Bullet] Distance-based penetration chance: 50.0140681540596%
[02:57:42] [INFO] [Bullet] Starting wall penetration at (47.61215, 850.1075)
[02:57:42] [INFO] [Bullet] Raycast backward hit penetrating body at distance 19.9742946624756
[02:57:42] [INFO] [Bullet] Body exited signal received for penetrating body
[02:57:42] [INFO] [Bullet] Exiting penetration at (15.01428, 829.9377) after traveling 33.3333320617676 pixels through wall
[02:57:42] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:57:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1053.013, 1465.934), shooter_id=974051608792, bullet_pos=(54.11111, 756.8361)
[02:57:42] [INFO] [Bullet] Using shooter_position, distance=1225
[02:57:42] [INFO] [Bullet] Distance to wall: 1225 (83.4125025763729% of viewport)
[02:57:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1053.013, 1465.934), shooter_id=974051608792, bullet_pos=(132.0577, 711.8436)
[02:57:42] [INFO] [Bullet] Using shooter_position, distance=1190.29870605469
[02:57:42] [INFO] [Bullet] Distance to wall: 1190.29870605469 (81.0496276615836% of viewport)
[02:57:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1027.385, 1442.591), shooter_id=974051608792, bullet_pos=(59.20437, 678.5624)
[02:57:42] [INFO] [Bullet] Using shooter_position, distance=1233.333984375
[02:57:42] [INFO] [Bullet] Distance to wall: 1233.333984375 (83.9799788973126% of viewport)
[02:57:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1027.385, 1442.591), shooter_id=974051608792, bullet_pos=(264.7206, 476.3268)
[02:57:42] [INFO] [Bullet] Using shooter_position, distance=1230.98449707031
[02:57:42] [INFO] [Bullet] Distance to wall: 1230.98449707031 (83.8199979864102% of viewport)
[02:57:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1053.013, 1465.934), shooter_id=974051608792, bullet_pos=(497.064, 996.0152)
[02:57:42] [INFO] [Bullet] Using shooter_position, distance=727.9443359375
[02:57:42] [INFO] [Bullet] Distance to wall: 727.9443359375 (49.5670684055859% of viewport)
[02:57:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1053.013, 1465.934), shooter_id=974051608792, bullet_pos=(492.8947, 998.775)
[02:57:42] [INFO] [Bullet] Using shooter_position, distance=729.362731933594
[02:57:42] [INFO] [Bullet] Distance to wall: 729.362731933594 (49.6636495971602% of viewport)
[02:57:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1053.013, 1465.934), shooter_id=974051608792, bullet_pos=(509.3967, 1013.923)
[02:57:42] [INFO] [Bullet] Using shooter_position, distance=706.988525390625
[02:57:42] [INFO] [Bullet] Distance to wall: 706.988525390625 (48.1401487311115% of viewport)
[02:57:42] [INFO] [Bullet] Distance-based penetration chance: 90.5031598137033%
[02:57:42] [INFO] [Bullet] Penetration failed (distance roll)
[02:57:42] [ENEMY] [Enemy10] Threw frag grenade: target=(782.425, 1183.982), deviation=-4.3°, distance=380
[02:57:42] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[02:57:42] [INFO] [GrenadeBase] Grenade created at (1039.236, 1422.214) (frozen)
[02:57:42] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[02:57:42] [INFO] [GrenadeBase] LEGACY throw_grenade() called! Direction: (-0.785634, -0.618691), Speed: 380.2 (unfrozen)
[02:57:42] [INFO] [GrenadeBase] NOTE: Using DRAG-BASED system. If velocity-based is expected, ensure grenade has throw_grenade_velocity_based() method.
[02:57:42] [INFO] [FragGrenade] Grenade thrown (legacy) - impact detection enabled
[02:57:42] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[02:57:42] [ENEMY] [Enemy10] State: THROWING_GRENADE -> SEEKING_COVER
[02:57:42] [INFO] [GrenadeBase] Collision detected with Enemy10 (type: CharacterBody2D)
[02:57:42] [ENEMY] [Enemy10] State: SEEKING_COVER -> IN_COVER
[02:57:42] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[02:57:42] [INFO] [GrenadeBase] Collision detected with MainHall_WallTop (type: StaticBody2D)
[02:57:42] [INFO] [FragGrenade] Impact detected! Body: MainHall_WallTop (type: StaticBody2D), triggering explosion
[02:57:42] [INFO] [FragGrenade] Impact detected - exploding immediately!
[02:57:42] [INFO] [GrenadeBase] EXPLODED at (1017.184, 1408.599)!
[02:57:42] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(1017.184, 1408.599), source=NEUTRAL (FragGrenade), range=2937, listeners=10
[02:57:42] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=9
[02:57:42] [ENEMY] [Enemy10] Hit taken, health: 0/2
[02:57:42] [ENEMY] [Enemy10] Enemy died (ricochet: false, penetration: false)
[02:57:42] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[02:57:42] [INFO] [SoundPropagation] Unregistered listener: Enemy10 (remaining: 9)
[02:57:42] [INFO] [DeathAnim] Started - Angle: 35.2 deg, Index: 14
[02:57:42] [ENEMY] [Enemy10] Death animation started with hit direction: (0.817196, 0.57636)
[02:57:42] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 55.8
[02:57:42] [INFO] [FragGrenade] Spawned shrapnel #1 at angle -3.2 degrees
[02:57:42] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 90.4 degrees
[02:57:42] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 190.2 degrees
[02:57:42] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 284.9 degrees
[02:57:42] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1027.385, 1442.591), shooter_id=974051608792, bullet_pos=(460.9998, 695.2114)
[02:57:42] [INFO] [Bullet] Using shooter_position, distance=937.746154785156
[02:57:42] [INFO] [Bullet] Distance to wall: 937.746154785156 (63.8528600424495% of viewport)
[02:57:43] [ENEMY] [Enemy10] Ragdoll activated
[02:57:43] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[02:57:43] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[02:57:43] [INFO] [LastChance] Resetting all effects (scene change detected)
[02:57:43] [ENEMY] [Enemy1] Death animation component initialized
[02:57:43] [ENEMY] [Enemy2] Death animation component initialized
[02:57:43] [ENEMY] [Enemy3] Death animation component initialized
[02:57:43] [ENEMY] [Enemy4] Death animation component initialized
[02:57:43] [ENEMY] [Enemy5] Death animation component initialized
[02:57:43] [ENEMY] [Enemy6] Death animation component initialized
[02:57:43] [ENEMY] [Enemy7] Death animation component initialized
[02:57:43] [ENEMY] [Enemy8] Death animation component initialized
[02:57:43] [ENEMY] [Enemy9] Death animation component initialized
[02:57:43] [ENEMY] [Enemy10] Death animation component initialized
[02:57:43] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[02:57:43] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[02:57:43] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[02:57:43] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[02:57:43] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[02:57:43] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[02:57:43] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[02:57:43] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[02:57:43] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[02:57:43] [ENEMY] [Enemy10] Grenade system configured: offensive=2, flashbangs=0
[02:57:43] [INFO] [ScoreManager] Level started with 10 enemies
[02:57:43] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[02:57:43] [ENEMY] [Enemy1] Registered as sound listener
[02:57:43] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[02:57:43] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[02:57:43] [ENEMY] [Enemy2] Registered as sound listener
[02:57:43] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[02:57:43] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[02:57:43] [ENEMY] [Enemy3] Registered as sound listener
[02:57:43] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[02:57:43] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[02:57:43] [ENEMY] [Enemy4] Registered as sound listener
[02:57:43] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[02:57:43] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[02:57:43] [ENEMY] [Enemy5] Registered as sound listener
[02:57:43] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[02:57:43] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[02:57:43] [ENEMY] [Enemy6] Registered as sound listener
[02:57:43] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[02:57:43] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[02:57:43] [ENEMY] [Enemy7] Registered as sound listener
[02:57:43] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 4, behavior: PATROL, player_found: yes
[02:57:43] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[02:57:43] [ENEMY] [Enemy8] Registered as sound listener
[02:57:43] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[02:57:43] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[02:57:43] [ENEMY] [Enemy9] Registered as sound listener
[02:57:43] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[02:57:43] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[02:57:43] [ENEMY] [Enemy10] Registered as sound listener
[02:57:43] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[02:57:43] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[02:57:43] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[02:57:43] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[02:57:43] [INFO] [LastChance] Found player: Player
[02:57:43] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[02:57:43] [INFO] [LastChance] Connected to player Damaged signal (C#)
[02:57:43] [INFO] [LastChance] Connected to player Died signal (C#)
[02:57:43] [INFO] [Player] Detecting weapon pose (frame 3)...
[02:57:43] [INFO] [Player] Detected weapon: Rifle (default pose)
[02:57:43] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[02:57:44] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[02:57:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(461.0865, 1149.259), source=PLAYER (AssaultRifle), range=1469, listeners=19
[02:57:44] [INFO] [SoundPropagation] Cleaned up 9 invalid listeners
[02:57:44] [ENEMY] [Enemy3] Heard gunshot at (461.0865, 1149.259), source_type=0, intensity=0.01, distance=465
[02:57:44] [ENEMY] [Enemy4] Heard gunshot at (461.0865, 1149.259), source_type=0, intensity=0.01, distance=421
[02:57:44] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=4, self=0, below_threshold=4
[02:57:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.044, 1518.965), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:44] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1112.394, 1499.169), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:44] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1081.407, 1478.348), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:44] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:44] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(461.08655, 1149.2589), shooter_id=1154708671083, bullet_pos=(1497.1647, 1648.3027)
[02:57:44] [INFO] [Bullet] Using shooter_position, distance=1150,0011
[02:57:44] [INFO] [Bullet] Distance to wall: 1150,0011 (78,305695% of viewport)
[02:57:44] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[02:57:44] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1051.132, 1456.506), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:44] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:44] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[02:57:44] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[02:57:45] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
[02:57:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.124, 1490.642), shooter_id=1153886587109, bullet_pos=(48.10065, 865.45)
[02:57:45] [INFO] [Bullet] Using shooter_position, distance=1208.33361816406
[02:57:45] [INFO] [Bullet] Distance to wall: 1208.33361816406 (82.2776579903901% of viewport)
[02:57:45] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[02:57:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1051.487, 1468.741), shooter_id=1153886587109, bullet_pos=(39.51931, 808.4457)
[02:57:45] [INFO] [Bullet] Using shooter_position, distance=1208.33312988281
[02:57:45] [INFO] [Bullet] Distance to wall: 1208.33312988281 (82.2776247424219% of viewport)
[02:57:45] [INFO] [Bullet] Distance-based penetration chance: 50.6761044671745%
[02:57:45] [INFO] [Bullet] Penetration failed (distance roll)
[02:57:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.124, 1490.642), shooter_id=1153886587109, bullet_pos=(292.3215, 712.1778)
[02:57:45] [INFO] [Bullet] Using shooter_position, distance=1108.96130371094
[02:57:45] [INFO] [Bullet] Distance to wall: 1108.96130371094 (75.5112143697032% of viewport)
[02:57:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1021.509, 1445.976), shooter_id=1153886587109, bullet_pos=(65.44952, 777.35)
[02:57:45] [INFO] [Bullet] Using shooter_position, distance=1166.66650390625
[02:57:45] [INFO] [Bullet] Distance to wall: 1166.66650390625 (79.4404675615086% of viewport)
[02:57:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1021.509, 1445.976), shooter_id=1153886587109, bullet_pos=(145.1, 699.6816)
[02:57:45] [INFO] [Bullet] Using shooter_position, distance=1151.10754394531
[02:57:45] [INFO] [Bullet] Distance to wall: 1151.10754394531 (78.3810293673638% of viewport)
[02:57:45] [INFO] [Bullet] Distance-based penetration chance: 55.2221324047423%
[02:57:45] [INFO] [Bullet] Penetration failed (distance roll)
[02:57:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.124, 1490.642), shooter_id=1153886587109, bullet_pos=(500.0109, 893.8553)
[02:57:45] [INFO] [Bullet] Using shooter_position, distance=833.672912597656
[02:57:45] [INFO] [Bullet] Distance to wall: 833.672912597656 (56.7663216080851% of viewport)
[02:57:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(992.4453, 1421.887), shooter_id=1153886587109, bullet_pos=(59.98715, 720.7218)
[02:57:45] [INFO] [Bullet] Using shooter_position, distance=1166.66674804688
[02:57:45] [INFO] [Bullet] Distance to wall: 1166.66674804688 (79.4404841854927% of viewport)
[02:57:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(992.4453, 1421.887), shooter_id=1153886587109, bullet_pos=(512.1341, 370.9132)
[02:57:45] [INFO] [Bullet] Using shooter_position, distance=1155.52819824219
[02:57:45] [INFO] [Bullet] Distance to wall: 1155.52819824219 (78.6820398473045% of viewport)
[02:57:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.124, 1490.642), shooter_id=1153886587109, bullet_pos=(66.24957, 1260.483)
[02:57:45] [INFO] [Bullet] Using shooter_position, distance=1041.62121582031
[02:57:45] [INFO] [Bullet] Distance to wall: 1041.62121582031 (70.9259039577277% of viewport)
[02:57:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(992.4453, 1421.887), shooter_id=1153886587109, bullet_pos=(340.5033, 240.2152)
[02:57:45] [INFO] [Bullet] Using shooter_position, distance=1349.58410644531
[02:57:45] [INFO] [Bullet] Distance to wall: 1349.58410644531 (91.8956634742053% of viewport)
[02:57:45] [INFO] [Bullet] Distance-based penetration chance: 39.4550592800938%
[02:57:45] [INFO] [Bullet] Penetration failed (distance roll)
[02:57:45] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.124, 1490.642), shooter_id=1153886587109, bullet_pos=(199.9731, 1410.214)
[02:57:45] [INFO] [Bullet] Using shooter_position, distance=885.81005859375
[02:57:45] [INFO] [Bullet] Distance to wall: 885.81005859375 (60.3164357507169% of viewport)
[02:57:46] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.124, 1490.642), shooter_id=1153886587109, bullet_pos=(58.79132, 1610.862)
[02:57:46] [INFO] [Bullet] Using shooter_position, distance=1030.37048339844
[02:57:46] [INFO] [Bullet] Distance to wall: 1030.37048339844 (70.1598208988496% of viewport)
[02:57:46] [INFO] [Bullet] Distance-based penetration chance: 64.8135422846755%
[02:57:46] [INFO] [Bullet] Penetration failed (distance roll)
[02:57:46] [ENEMY] [Enemy10] State: SUPPRESSED -> SEEKING_COVER
[02:57:47] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(762.1495, 1304.716), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:57:47] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[02:57:47] [ENEMY] [Enemy10] Hit taken, health: 3/4
[02:57:48] [ENEMY] [Enemy4] FLANKING started: target=(574.7182, 1220.563), side=left, pos=(717.0886, 958.7625)
[02:57:48] [ENEMY] [Enemy4] State: PURSUING -> FLANKING
[02:57:48] [ENEMY] [Enemy3] FLANKING started: target=(564.1215, 1252.956), side=left, pos=(657.0493, 961.0845)
[02:57:48] [ENEMY] [Enemy3] State: PURSUING -> FLANKING
[02:57:50] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:57:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(470.7986, 978.6429), source=ENEMY (Enemy4), range=1469, listeners=10
[02:57:50] [ENEMY] [Enemy2] Heard gunshot at (470.7986, 978.6429), source_type=1, intensity=0.01, distance=434
[02:57:50] [ENEMY] [Enemy3] Heard gunshot at (470.7986, 978.6429), source_type=1, intensity=1.00, distance=2
[02:57:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[02:57:50] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:57:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(469.1934, 980.2678), source=ENEMY (Enemy3), range=1469, listeners=10
[02:57:50] [ENEMY] [Enemy4] Heard gunshot at (469.1934, 980.2678), source_type=1, intensity=1.00, distance=3
[02:57:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[02:57:50] [INFO] [LastChance] Threat detected: Bullet
[02:57:50] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:50] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:57:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(475.9346, 1010.969), source=ENEMY (Enemy4), range=1469, listeners=10
[02:57:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[02:57:50] [INFO] [LastChance] Threat detected: @Area2D@1477
[02:57:50] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:50] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:57:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(475.9346, 1012.321), source=ENEMY (Enemy3), range=1469, listeners=10
[02:57:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[02:57:50] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[02:57:50] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[02:57:50] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[02:57:50] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[02:57:50] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[02:57:50] [INFO] [PenultimateHit] Player died - ending penultimate effect
[02:57:50] [INFO] [LastChance] Player died
[02:57:50] [INFO] [LastChance] Threat detected: @Area2D@1479
[02:57:50] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:50] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[02:57:50] [INFO] [LastChance] Threat detected: @Area2D@1481
[02:57:50] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:50] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:57:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(488.0334, 1033.965), source=ENEMY (Enemy4), range=1469, listeners=10
[02:57:50] [ENEMY] [Enemy3] Heard gunshot at (488.0334, 1033.965), source_type=1, intensity=1.00, distance=3
[02:57:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[02:57:50] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:57:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(485.68, 1034.945), source=ENEMY (Enemy3), range=1469, listeners=10
[02:57:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[02:57:50] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[02:57:50] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[02:57:50] [INFO] [LastChance] Threat detected: Bullet
[02:57:50] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:50] [INFO] [LastChance] Threat detected: @Area2D@1484
[02:57:50] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:50] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:57:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(495.8361, 1047.628), source=ENEMY (Enemy4), range=1469, listeners=10
[02:57:50] [ENEMY] [Enemy3] Heard gunshot at (495.8361, 1047.628), source_type=1, intensity=1.00, distance=4
[02:57:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
[02:57:50] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:57:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(498.2502, 1051.188), source=ENEMY (Enemy3), range=1469, listeners=10
[02:57:50] [ENEMY] [Enemy4] Heard gunshot at (498.2502, 1051.188), source_type=1, intensity=1.00, distance=4
[02:57:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
[02:57:50] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[02:57:50] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[02:57:50] [INFO] [LastChance] Threat detected: @Area2D@1486
[02:57:50] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:50] [INFO] [LastChance] Threat detected: @Area2D@1488
[02:57:50] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:50] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:57:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(519.647, 1057.139), source=ENEMY (Enemy4), range=1469, listeners=10
[02:57:50] [ENEMY] [Enemy3] Heard gunshot at (519.647, 1057.139), source_type=1, intensity=1.00, distance=4
[02:57:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
[02:57:50] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:57:50] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(523.441, 1058.143), source=ENEMY (Enemy3), range=1469, listeners=10
[02:57:50] [ENEMY] [Enemy4] Heard gunshot at (523.441, 1058.143), source_type=1, intensity=1.00, distance=1
[02:57:50] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
[02:57:50] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[02:57:50] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[02:57:50] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[02:57:50] [INFO] [LastChance] Threat detected: Bullet
[02:57:50] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:50] [INFO] [LastChance] Threat detected: @Area2D@1491
[02:57:50] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:50] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:51] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:57:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(542.5551, 1069.715), source=ENEMY (Enemy4), range=1469, listeners=10
[02:57:51] [ENEMY] [Enemy3] Heard gunshot at (542.5551, 1069.715), source_type=1, intensity=1.00, distance=8
[02:57:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
[02:57:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1186.024, 1445.951), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:51] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:51] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:57:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(548.6319, 1065.099), source=ENEMY (Enemy3), range=1469, listeners=10
[02:57:51] [ENEMY] [Enemy4] Heard gunshot at (548.6319, 1065.099), source_type=1, intensity=1.00, distance=7
[02:57:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
[02:57:51] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[02:57:51] [ENEMY] [Enemy3] State: COMBAT -> RETREATING
[02:57:51] [ENEMY] [Enemy10] State: SEEKING_COVER -> IN_COVER
[02:57:51] [ENEMY] [Enemy10] State: IN_COVER -> PURSUING
[02:57:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(558.3553, 1113.105), shooter_id=1152175311781, bullet_pos=(888.0345, 1489.019)
[02:57:51] [INFO] [Bullet] Using shooter_position, distance=499.999755859375
[02:57:51] [INFO] [Bullet] Distance to wall: 499.999755859375 (34.0459027949436% of viewport)
[02:57:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:57:51] [INFO] [LastChance] Threat detected: @Area2D@1493
[02:57:51] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:51] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:51] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(561.3266, 1114.67), shooter_id=1151890099124, bullet_pos=(885.4716, 1495.367)
[02:57:51] [INFO] [Bullet] Using shooter_position, distance=500.000030517578
[02:57:51] [INFO] [Bullet] Distance to wall: 500.000030517578 (34.0459214969257% of viewport)
[02:57:51] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:57:51] [INFO] [LastChance] Threat detected: @Area2D@1497
[02:57:51] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:51] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:51] [ENEMY] [Enemy4] Player distracted - priority attack triggered
[02:57:51] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(552.1335, 1057.452), source=ENEMY (Enemy4), range=1469, listeners=10
[02:57:51] [ENEMY] [Enemy3] Heard gunshot at (552.1335, 1057.452), source_type=1, intensity=1.00, distance=9
[02:57:51] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
[02:57:51] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[02:57:51] [INFO] [LastChance] Resetting all effects (scene change detected)
[02:57:51] [ENEMY] [Enemy1] Death animation component initialized
[02:57:51] [ENEMY] [Enemy2] Death animation component initialized
[02:57:51] [ENEMY] [Enemy3] Death animation component initialized
[02:57:51] [ENEMY] [Enemy4] Death animation component initialized
[02:57:51] [ENEMY] [Enemy5] Death animation component initialized
[02:57:51] [ENEMY] [Enemy6] Death animation component initialized
[02:57:51] [ENEMY] [Enemy7] Death animation component initialized
[02:57:51] [ENEMY] [Enemy8] Death animation component initialized
[02:57:51] [ENEMY] [Enemy9] Death animation component initialized
[02:57:51] [ENEMY] [Enemy10] Death animation component initialized
[02:57:51] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[02:57:51] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[02:57:51] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[02:57:51] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[02:57:51] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[02:57:51] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[02:57:51] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[02:57:51] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[02:57:51] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[02:57:51] [ENEMY] [Enemy10] Grenade system configured: offensive=2, flashbangs=0
[02:57:51] [INFO] [ScoreManager] Level started with 10 enemies
[02:57:51] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[02:57:51] [ENEMY] [Enemy1] Registered as sound listener
[02:57:51] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[02:57:51] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[02:57:51] [ENEMY] [Enemy2] Registered as sound listener
[02:57:51] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[02:57:51] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[02:57:51] [ENEMY] [Enemy3] Registered as sound listener
[02:57:51] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[02:57:51] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[02:57:51] [ENEMY] [Enemy4] Registered as sound listener
[02:57:51] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[02:57:51] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[02:57:51] [ENEMY] [Enemy5] Registered as sound listener
[02:57:51] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[02:57:51] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[02:57:51] [ENEMY] [Enemy6] Registered as sound listener
[02:57:51] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[02:57:51] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[02:57:51] [ENEMY] [Enemy7] Registered as sound listener
[02:57:51] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[02:57:51] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[02:57:51] [ENEMY] [Enemy8] Registered as sound listener
[02:57:51] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[02:57:51] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[02:57:51] [ENEMY] [Enemy9] Registered as sound listener
[02:57:51] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[02:57:51] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[02:57:51] [ENEMY] [Enemy10] Registered as sound listener
[02:57:51] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[02:57:51] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[02:57:51] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[02:57:51] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[02:57:51] [INFO] [LastChance] Found player: Player
[02:57:51] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[02:57:51] [INFO] [LastChance] Connected to player Damaged signal (C#)
[02:57:51] [INFO] [LastChance] Connected to player Died signal (C#)
[02:57:51] [INFO] [Player] Detecting weapon pose (frame 3)...
[02:57:51] [INFO] [Player] Detected weapon: Rifle (default pose)
[02:57:51] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[02:57:52] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[02:57:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(507.2422, 1194.542), source=PLAYER (AssaultRifle), range=1469, listeners=20
[02:57:52] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[02:57:52] [ENEMY] [Enemy3] Heard gunshot at (507.2422, 1194.542), source_type=0, intensity=0.01, distance=485
[02:57:52] [ENEMY] [Enemy4] Heard gunshot at (507.2422, 1194.542), source_type=0, intensity=0.01, distance=415
[02:57:52] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=6
[02:57:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.124, 1518.822), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:52] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(507.24225, 1194.5417), shooter_id=1865357985097, bullet_pos=(991.7247, 1396.7847)
[02:57:52] [INFO] [Bullet] Using shooter_position, distance=525,00037
[02:57:52] [INFO] [Bullet] Distance to wall: 525,00037 (35,74824% of viewport)
[02:57:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:57:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(507.24225, 1194.5417), shooter_id=1865357985097, bullet_pos=(884.66046, 1427.0143)
[02:57:52] [INFO] [Bullet] Using shooter_position, distance=443,26965
[02:57:52] [INFO] [Bullet] Distance to wall: 443,26965 (30,183046% of viewport)
[02:57:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:57:52] [INFO] [Bullet] Starting wall penetration at (884.66046, 1427.0143)
[02:57:52] [INFO] [Bullet] Raycast backward hit penetrating body at distance 43,886787
[02:57:52] [INFO] [Bullet] Body exited signal received for penetrating body
[02:57:52] [INFO] [Bullet] Exiting penetration at (845.76447, 1437.9966) after traveling 35,416664 pixels through wall
[02:57:52] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[02:57:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1112.473, 1499.026), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:52] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1081.515, 1478.165), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:52] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:52] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[02:57:52] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[02:57:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1051.424, 1456.072), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:52] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:52] [INFO] [LastChance] Threat detected: @Area2D@1761
[02:57:52] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1022.452, 1432.533), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:52] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.248, 1490.411), shooter_id=1864535902619, bullet_pos=(49.12835, 863.7283)
[02:57:52] [INFO] [Bullet] Using shooter_position, distance=1208.3330078125
[02:57:52] [INFO] [Bullet] Distance to wall: 1208.3330078125 (82.2776164304298% of viewport)
[02:57:52] [INFO] [LastChance] Threat detected: @Area2D@1763
[02:57:52] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(988.3829, 1424.066), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:52] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1051.546, 1468.635), shooter_id=1864535902619, bullet_pos=(39.16595, 808.9705)
[02:57:52] [INFO] [Bullet] Using shooter_position, distance=1208.333984375
[02:57:52] [INFO] [Bullet] Distance to wall: 1208.333984375 (82.2776829263662% of viewport)
[02:57:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.248, 1490.411), shooter_id=1864535902619, bullet_pos=(284.7046, 697.4756)
[02:57:52] [INFO] [Bullet] Using shooter_position, distance=1124.6435546875
[02:57:52] [INFO] [Bullet] Distance to wall: 1124.6435546875 (76.5790476758141% of viewport)
[02:57:52] [INFO] [LastChance] Threat detected: @Area2D@1766
[02:57:52] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:52] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(957.285, 1409.614), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:52] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(966.2352, 1394.07), shooter_id=1864535902619, bullet_pos=(525.688, 1011.714)
[02:57:52] [INFO] [Bullet] Using shooter_position, distance=583.33349609375
[02:57:52] [INFO] [Bullet] Distance to wall: 583.33349609375 (39.7202504047384% of viewport)
[02:57:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:57:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(966.2352, 1394.07), shooter_id=1864535902619, bullet_pos=(522.2634, 1015.357)
[02:57:52] [INFO] [Bullet] Using shooter_position, distance=583.553405761719
[02:57:52] [INFO] [Bullet] Distance to wall: 583.553405761719 (39.7352244584086% of viewport)
[02:57:52] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:57:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1051.546, 1468.635), shooter_id=1864535902619, bullet_pos=(231.6101, 707.6219)
[02:57:52] [INFO] [Bullet] Using shooter_position, distance=1118.67614746094
[02:57:52] [INFO] [Bullet] Distance to wall: 1118.67614746094 (76.1727159446631% of viewport)
[02:57:52] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(798.3676, 1168.928), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:57:52] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[02:57:52] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(966.2352, 1394.07), shooter_id=1864535902619, bullet_pos=(496.4641, 991.5513)
[02:57:52] [INFO] [Bullet] Using shooter_position, distance=618.632446289063
[02:57:52] [INFO] [Bullet] Distance to wall: 618.632446289063 (42.1238208325831% of viewport)
[02:57:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1021.757, 1445.519), shooter_id=1864535902619, bullet_pos=(34.68292, 748.5599)
[02:57:53] [INFO] [Bullet] Using shooter_position, distance=1208.33288574219
[02:57:53] [INFO] [Bullet] Distance to wall: 1208.33288574219 (82.2776081184378% of viewport)
[02:57:53] [INFO] [LastChance] Threat detected: @Area2D@1770
[02:57:53] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:53] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1021.757, 1445.519), shooter_id=1864535902619, bullet_pos=(97.98032, 706.7971)
[02:57:53] [INFO] [Bullet] Using shooter_position, distance=1182.82482910156
[02:57:53] [INFO] [Bullet] Distance to wall: 1182.82482910156 (80.5407176365975% of viewport)
[02:57:53] [INFO] [Bullet] Distance-based penetration chance: 52.7024960906363%
[02:57:53] [INFO] [Bullet] Penetration failed (distance roll)
[02:57:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(936.9449, 1379.265), shooter_id=1864535902619, bullet_pos=(599.9181, 1009.924)
[02:57:53] [INFO] [Bullet] Using shooter_position, distance=500.000061035156
[02:57:53] [INFO] [Bullet] Distance to wall: 500.000061035156 (34.0459235749237% of viewport)
[02:57:53] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:57:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.248, 1490.411), shooter_id=1864535902619, bullet_pos=(513.3171, 900.9402)
[02:57:53] [INFO] [Bullet] Using shooter_position, distance=819.242919921875
[02:57:53] [INFO] [Bullet] Distance to wall: 819.242919921875 (55.7837568723744% of viewport)
[02:57:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(932.8471, 1387.873), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:53] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
[02:57:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(993.1827, 1420.774), shooter_id=1864535902619, bullet_pos=(38.35233, 680.2552)
[02:57:53] [INFO] [Bullet] Using shooter_position, distance=1208.33325195313
[02:57:53] [INFO] [Bullet] Distance to wall: 1208.33325195313 (82.2776330544139% of viewport)
[02:57:53] [INFO] [Bullet] Distance-based penetration chance: 50.6760947698504%
[02:57:53] [INFO] [Bullet] Penetration failed (distance roll)
[02:57:53] [INFO] [LastChance] Threat detected: @Area2D@1782
[02:57:53] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:53] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(912.5634, 1358.1), shooter_id=1864535902619, bullet_pos=(677.1667, 1014.299)
[02:57:53] [INFO] [Bullet] Using shooter_position, distance=416.66650390625
[02:57:53] [INFO] [Bullet] Distance to wall: 416.66650390625 (28.371588433117% of viewport)
[02:57:53] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:57:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1051.546, 1468.635), shooter_id=1864535902619, bullet_pos=(519.4842, 881.1809)
[02:57:53] [INFO] [Bullet] Using shooter_position, distance=792.585998535156
[02:57:53] [INFO] [Bullet] Distance to wall: 792.585998535156 (53.9686380773966% of viewport)
[02:57:53] [INFO] [Bullet] Distance-based penetration chance: 83.7032555763707%
[02:57:53] [INFO] [Bullet] Starting wall penetration at (519.4842, 881.1809)
[02:57:53] [INFO] [Bullet] Raycast backward hit penetrating body at distance 29.8311176300049
[02:57:53] [INFO] [Bullet] Body exited signal received for penetrating body
[02:57:53] [INFO] [Bullet] Exiting penetration at (549.5472, 899.3059) after traveling 30.1041698455811 pixels through wall
[02:57:53] [INFO] [Bullet] Damage multiplier after penetration: 0.225
[02:57:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(932.8471, 1387.873), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:53] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
[02:57:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(798.36755, 1168.9283), shooter_id=1865357985097, bullet_pos=(1202.0967, 1623.9807)
[02:57:53] [INFO] [Bullet] Using shooter_position, distance=608,3337
[02:57:53] [INFO] [Bullet] Distance to wall: 608,3337 (41,42256% of viewport)
[02:57:53] [INFO] [LastChance] Threat detected: Bullet
[02:57:53] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:53] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:53] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[02:57:53] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(936.9449, 1379.265), shooter_id=1864535902619, bullet_pos=(342.1396, 1397.433)
[02:57:53] [INFO] [Bullet] Using shooter_position, distance=595.082702636719
[02:57:53] [INFO] [Bullet] Distance to wall: 595.082702636719 (40.5202754831349% of viewport)
[02:57:53] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[02:57:53] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[02:57:53] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[02:57:53] [ENEMY] [Enemy4] Hit taken, health: 2/3
[02:57:53] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
[02:57:53] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[02:57:53] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(944.0157, 1388.707), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:53] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
[02:57:53] [INFO] [LastChance] Threat detected: Bullet
[02:57:53] [INFO] [LastChance] Triggering last chance effect!
[02:57:53] [INFO] [LastChance] Starting last chance effect:
[02:57:53] [INFO] [LastChance]   - Time will be frozen (except player)
[02:57:53] [INFO] [LastChance]   - Duration: 6.0 real seconds
[02:57:53] [INFO] [LastChance]   - Sepia intensity: 0.70
[02:57:53] [INFO] [LastChance]   - Brightness: 0.60
[02:57:53] [INFO] [LastChance] Pushed bullet Bullet from distance 102.8 to 200.0
[02:57:53] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[02:57:53] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[02:57:53] [INFO] [LastChance] Skipping player node: Player
[02:57:53] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[02:57:53] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[02:57:53] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[02:57:54] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[02:57:54] [INFO] [LastChance] Resetting all effects (scene change detected)
[02:57:54] [INFO] [LastChance] Ending last chance effect
[02:57:54] [INFO] [LastChance] All process modes restored
[02:57:54] [INFO] [LastChance] Restored original colors to 5 player sprites
[02:57:54] [ENEMY] [Enemy1] Death animation component initialized
[02:57:54] [ENEMY] [Enemy2] Death animation component initialized
[02:57:54] [ENEMY] [Enemy3] Death animation component initialized
[02:57:54] [ENEMY] [Enemy4] Death animation component initialized
[02:57:54] [ENEMY] [Enemy5] Death animation component initialized
[02:57:54] [ENEMY] [Enemy6] Death animation component initialized
[02:57:54] [ENEMY] [Enemy7] Death animation component initialized
[02:57:54] [ENEMY] [Enemy8] Death animation component initialized
[02:57:54] [ENEMY] [Enemy9] Death animation component initialized
[02:57:54] [ENEMY] [Enemy10] Death animation component initialized
[02:57:54] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[02:57:54] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[02:57:54] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[02:57:54] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[02:57:54] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[02:57:54] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[02:57:54] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[02:57:54] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[02:57:54] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[02:57:54] [ENEMY] [Enemy10] Grenade system configured: offensive=2, flashbangs=0
[02:57:54] [INFO] [ScoreManager] Level started with 10 enemies
[02:57:54] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[02:57:54] [ENEMY] [Enemy1] Registered as sound listener
[02:57:54] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[02:57:54] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[02:57:54] [ENEMY] [Enemy2] Registered as sound listener
[02:57:54] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[02:57:54] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[02:57:54] [ENEMY] [Enemy3] Registered as sound listener
[02:57:54] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 3, behavior: GUARD, player_found: yes
[02:57:54] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[02:57:54] [ENEMY] [Enemy4] Registered as sound listener
[02:57:54] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[02:57:54] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[02:57:54] [ENEMY] [Enemy5] Registered as sound listener
[02:57:54] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[02:57:54] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[02:57:54] [ENEMY] [Enemy6] Registered as sound listener
[02:57:54] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[02:57:54] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[02:57:54] [ENEMY] [Enemy7] Registered as sound listener
[02:57:54] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 2, behavior: PATROL, player_found: yes
[02:57:54] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[02:57:54] [ENEMY] [Enemy8] Registered as sound listener
[02:57:54] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 3, behavior: GUARD, player_found: yes
[02:57:54] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[02:57:54] [ENEMY] [Enemy9] Registered as sound listener
[02:57:54] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[02:57:54] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[02:57:54] [ENEMY] [Enemy10] Registered as sound listener
[02:57:54] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[02:57:54] [INFO] [Player] Detecting weapon pose (frame 3)...
[02:57:54] [INFO] [Player] Detected weapon: Rifle (default pose)
[02:57:54] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[02:57:54] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[02:57:54] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[02:57:54] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[02:57:54] [INFO] [LastChance] Found player: Player
[02:57:54] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[02:57:54] [INFO] [LastChance] Connected to player Damaged signal (C#)
[02:57:54] [INFO] [LastChance] Connected to player Died signal (C#)
[02:57:54] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[02:57:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1105.797, 1499.969), source=ENEMY (Enemy10), range=1469, listeners=20
[02:57:54] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[02:57:54] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1073.063, 1482.019), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:54] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1040.767, 1463.294), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:54] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:54] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(504.2602, 1135.296), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:57:54] [ENEMY] [Enemy3] Heard gunshot at (504.2602, 1135.296), source_type=0, intensity=0.01, distance=432
[02:57:54] [ENEMY] [Enemy4] Heard gunshot at (504.2602, 1135.296), source_type=0, intensity=0.02, distance=378
[02:57:54] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=6
[02:57:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1009.429, 1443.014), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:55] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1042.635, 1474.626), shooter_id=2012326397419, bullet_pos=(53.43735, 938.7956)
[02:57:55] [INFO] [Bullet] Using shooter_position, distance=1125.00073242188
[02:57:55] [INFO] [Bullet] Distance to wall: 1125.00073242188 (76.6033685645396% of viewport)
[02:57:55] [INFO] [Bullet] Distance-based penetration chance: 57.2960700080371%
[02:57:55] [INFO] [Bullet] Penetration failed (distance roll)
[02:57:55] [ENEMY] [Enemy10] Hit taken, health: 3/4
[02:57:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(979.0225, 1422.657), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:55] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1010.273, 1455.724), shooter_id=2012326397419, bullet_pos=(43.74678, 913.2939)
[02:57:55] [INFO] [Bullet] Using shooter_position, distance=1108.33312988281
[02:57:55] [INFO] [Bullet] Distance to wall: 1108.33312988281 (75.4684408586363% of viewport)
[02:57:55] [INFO] [Bullet] Distance-based penetration chance: 58.6201523315909%
[02:57:55] [INFO] [Bullet] Starting wall penetration at (43.74678, 913.2939)
[02:57:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(949.1876, 1405.294), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:55] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:55] [INFO] [Bullet] Raycast backward hit penetrating body at distance 24.8630695343018
[02:57:55] [INFO] [Bullet] Body exited signal received for penetrating body
[02:57:55] [INFO] [Bullet] Exiting penetration at (10.31809, 894.5331) after traveling 33.3333358764648 pixels through wall
[02:57:55] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:57:55] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[02:57:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(978.9907, 1434.628), shooter_id=2012326397419, bullet_pos=(54.98914, 869.0925)
[02:57:55] [INFO] [Bullet] Using shooter_position, distance=1083.33264160156
[02:57:55] [INFO] [Bullet] Distance to wall: 1083.33264160156 (73.7661116397218% of viewport)
[02:57:55] [INFO] [Bullet] Distance-based penetration chance: 60.6062030869913%
[02:57:55] [INFO] [Bullet] Penetration failed (distance roll)
[02:57:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(943.4238, 1404.289), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:55] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:55] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[02:57:55] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[02:57:55] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(939.7997, 1414.321), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:55] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(894.0358, 1365.305), shooter_id=2012326397419, bullet_pos=(525.5104, 1027.385)
[02:57:55] [INFO] [Bullet] Using shooter_position, distance=500.000427246094
[02:57:55] [INFO] [Bullet] Distance to wall: 500.000427246094 (34.0459485108999% of viewport)
[02:57:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:57:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(949.494, 1410.64), shooter_id=2012326397419, bullet_pos=(54.7156, 785.2537)
[02:57:55] [INFO] [Bullet] Using shooter_position, distance=1091.66662597656
[02:57:55] [INFO] [Bullet] Distance to wall: 1091.66662597656 (74.3335879606615% of viewport)
[02:57:55] [INFO] [Bullet] Distance-based penetration chance: 59.9441473792283%
[02:57:55] [INFO] [Bullet] Starting wall penetration at (54.7156, 785.2537)
[02:57:55] [INFO] [Bullet] Raycast backward hit penetrating body at distance 10.6193380355835
[02:57:55] [INFO] [Bullet] Body exited signal received for penetrating body
[02:57:55] [INFO] [Bullet] Exiting penetration at (23.2959, 763.2936) after traveling 33.3333320617676 pixels through wall
[02:57:55] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:57:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(921.3535, 1386.363), shooter_id=2012326397419, bullet_pos=(63.56695, 697.7386)
[02:57:55] [INFO] [Bullet] Using shooter_position, distance=1100.00048828125
[02:57:55] [INFO] [Bullet] Distance to wall: 1100.00048828125 (74.9010559696091% of viewport)
[02:57:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(890.3796, 1367.542), shooter_id=2012326397419, bullet_pos=(572.7999, 1025.605)
[02:57:55] [INFO] [Bullet] Using shooter_position, distance=466.666687011719
[02:57:55] [INFO] [Bullet] Distance to wall: 466.666687011719 (31.7761928429979% of viewport)
[02:57:55] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:57:55] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(894.0358, 1365.305), shooter_id=2012326397419, bullet_pos=(58.93057, 1528.911)
[02:57:55] [INFO] [Bullet] Using shooter_position, distance=850.980529785156
[02:57:55] [INFO] [Bullet] Distance to wall: 850.980529785156 (57.9448290882837% of viewport)
[02:57:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(891.385, 1360.442), shooter_id=2012326397419, bullet_pos=(49.55884, 761.1871)
[02:57:56] [INFO] [Bullet] Using shooter_position, distance=1033.33349609375
[02:57:56] [INFO] [Bullet] Distance to wall: 1033.33349609375 (70.3615778817733% of viewport)
[02:57:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(894.0358, 1365.305), shooter_id=2012326397419, bullet_pos=(105.0391, 1590.892)
[02:57:56] [INFO] [Bullet] Using shooter_position, distance=820.612670898438
[02:57:56] [INFO] [Bullet] Distance to wall: 820.612670898438 (55.8770257351185% of viewport)
[02:57:56] [INFO] [Bullet] Distance-based penetration chance: 81.4768033090284%
[02:57:56] [INFO] [Bullet] Penetration failed (distance roll)
[02:57:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(921.3535, 1386.363), shooter_id=2012326397419, bullet_pos=(496.6388, 419.0387)
[02:57:56] [INFO] [Bullet] Using shooter_position, distance=1056.45568847656
[02:57:56] [INFO] [Bullet] Distance to wall: 1056.45568847656 (71.9360104790817% of viewport)
[02:57:56] [INFO] [Bullet] Distance-based penetration chance: 62.7413211077381%
[02:57:56] [INFO] [Bullet] Penetration failed (distance roll)
[02:57:56] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
[02:57:56] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(891.385, 1360.442), shooter_id=2012326397419, bullet_pos=(120.1979, 705.4186)
[02:57:56] [INFO] [Bullet] Using shooter_position, distance=1011.82293701172
[02:57:56] [INFO] [Bullet] Distance to wall: 1011.82293701172 (68.8968843594475% of viewport)
[02:57:56] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[02:57:56] [ENEMY] [Enemy10] State: SUPPRESSED -> SEEKING_COVER
[02:57:56] [ENEMY] [Enemy10] State: SEEKING_COVER -> IN_COVER
[02:57:56] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[02:57:56] [ENEMY] [Enemy10] State: SUPPRESSED -> SEEKING_COVER
[02:57:56] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[02:57:56] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[02:57:56] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[02:57:56] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[02:57:56] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(970.1368, 1593.539), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:56] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[02:57:57] [INFO] [LastChance] Threat detected: Bullet
[02:57:57] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:57] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(946.6325, 1529.679), shooter_id=2012326397419, bullet_pos=(915.2245, 1400.097)
[02:57:57] [INFO] [Bullet] Using shooter_position, distance=133.333557128906
[02:57:57] [INFO] [Bullet] Distance to wall: 133.333557128906 (9.07892708369947% of viewport)
[02:57:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:57:57] [INFO] [Bullet] Starting wall penetration at (915.2245, 1400.097)
[02:57:57] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[02:57:57] [INFO] [Bullet] Exiting penetration at (906.1948, 1362.842) after traveling 33.3333320617676 pixels through wall
[02:57:57] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:57:57] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[02:57:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(992.0368, 1567.788), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:57] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[02:57:57] [INFO] [LastChance] Threat detected: Bullet
[02:57:57] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:57] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1012.776, 1540.677), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:57] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:57] [INFO] [LastChance] Threat detected: Bullet
[02:57:57] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:57] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:57] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1033.516, 1513.567), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:57] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:57] [INFO] [LastChance] Threat detected: @Area2D@2072
[02:57:57] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:57] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:57] [ENEMY] [Enemy10] State: SEEKING_COVER -> IN_COVER
[02:57:57] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[02:57:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(982.7426, 1482.509), shooter_id=2012326397419, bullet_pos=(804.8309, 1015.233)
[02:57:57] [INFO] [Bullet] Using shooter_position, distance=499.999481201172
[02:57:57] [INFO] [Bullet] Distance to wall: 499.999481201172 (34.0458840929615% of viewport)
[02:57:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:57:57] [INFO] [Bullet] Starting wall penetration at (804.8309, 1015.233)
[02:57:57] [INFO] [Bullet] Raycast backward hit penetrating body at distance 22.0333957672119
[02:57:57] [INFO] [Bullet] Body exited signal received for penetrating body
[02:57:57] [INFO] [Bullet] Exiting penetration at (791.191, 979.4086) after traveling 33.3333320617676 pixels through wall
[02:57:57] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:57:57] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1003.189, 1455.551), shooter_id=2012326397419, bullet_pos=(834.9419, 1020.269)
[02:57:57] [INFO] [Bullet] Using shooter_position, distance=466.666137695313
[02:57:57] [INFO] [Bullet] Distance to wall: 466.666137695313 (31.7761554390337% of viewport)
[02:57:57] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:57:57] [INFO] [Bullet] Starting wall penetration at (834.9419, 1020.269)
[02:57:57] [INFO] [Bullet] Raycast backward hit penetrating body at distance 16.6028537750244
[02:57:57] [INFO] [Bullet] Body exited signal received for penetrating body
[02:57:57] [INFO] [Bullet] Exiting penetration at (821.1216, 984.5137) after traveling 33.3333320617676 pixels through wall
[02:57:57] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:57:57] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
[02:57:57] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[02:57:57] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[02:57:58] [ENEMY] [Enemy10] State: SUPPRESSED -> IN_COVER
[02:57:58] [ENEMY] [Enemy10] State: IN_COVER -> PURSUING
[02:57:58] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
[02:57:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1007.651, 1449.085), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:59] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:59] [INFO] [LastChance] Threat detected: Bullet
[02:57:59] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:59] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(981.8723, 1423.295), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:59] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:57:59] [INFO] [LastChance] Threat detected: Bullet
[02:57:59] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:57:59] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(773.3524, 1246.993), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:57:59] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=0, below_threshold=7
[02:57:59] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 3.0
[02:57:59] [INFO] [LastChance] Player health updated (C# Damaged): 3.0
[02:57:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(961.7549, 1408.093), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:59] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
[02:57:59] [INFO] [LastChance] Threat detected: Bullet
[02:57:59] [INFO] [LastChance] Player health is 3.0 - effect requires exactly 1 HP or less but alive
[02:57:59] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:59] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[02:57:59] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[02:57:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(961.7549, 1408.093), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:59] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
[02:57:59] [INFO] [LastChance] Threat detected: Bullet
[02:57:59] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:57:59] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:59] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(773.35236, 1246.9932), shooter_id=2013148482189, bullet_pos=(1153.6676, 1667.0791)
[02:57:59] [INFO] [Bullet] Using shooter_position, distance=566,66736
[02:57:59] [INFO] [Bullet] Distance to wall: 566,66736 (38,585426% of viewport)
[02:57:59] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:57:59] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[02:57:59] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(961.7549, 1408.093), source=ENEMY (Enemy10), range=1469, listeners=10
[02:57:59] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=1, below_threshold=8
[02:57:59] [ENEMY] [Enemy3] FLANKING started: target=(514.7358, 1163.181), side=left, pos=(699.385, 965.5173)
[02:57:59] [ENEMY] [Enemy3] State: PURSUING -> FLANKING
[02:57:59] [INFO] [LastChance] Threat detected: @Area2D@2082
[02:57:59] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:57:59] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:57:59] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(773.35236, 1246.9932), shooter_id=2013148482189, bullet_pos=(875.8196, 2083.7742)
[02:57:59] [INFO] [Bullet] Using shooter_position, distance=843,03143
[02:57:59] [INFO] [Bullet] Distance to wall: 843,03143 (57,403564% of viewport)
[02:57:59] [INFO] [Bullet] Distance-based penetration chance: 79,69585%
[02:57:59] [INFO] [Bullet] Penetration failed (distance roll)
[02:57:59] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
[02:57:59] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[02:57:59] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(902.2784, 1375.243), shooter_id=2012326397419, bullet_pos=(54.28805, 770.2775)
[02:57:59] [INFO] [Bullet] Using shooter_position, distance=1041.66711425781
[02:57:59] [INFO] [Bullet] Distance to wall: 1041.66711425781 (70.9290292667369% of viewport)
[02:57:59] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(902.2784, 1375.243), shooter_id=2012326397419, bullet_pos=(135.3491, 694.0825)
[02:57:59] [INFO] [Bullet] Using shooter_position, distance=1025.74841308594
[02:57:59] [INFO] [Bullet] Distance to wall: 1025.74841308594 (69.8450956320336% of viewport)
[02:57:59] [INFO] [Bullet] Distance-based penetration chance: 65.1807217626275%
[02:57:59] [INFO] [Bullet] Penetration failed (distance roll)
[02:57:59] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(898.9397, 1382.578), shooter_id=2012326397419, bullet_pos=(52.81794, 932.5987)
[02:57:59] [INFO] [Bullet] Using shooter_position, distance=958.333679199219
[02:57:59] [INFO] [Bullet] Distance to wall: 958.333679199219 (65.2547024369222% of viewport)
[02:57:59] [INFO] [Bullet] Distance-based penetration chance: 70.5361804902574%
[02:57:59] [INFO] [Bullet] Starting wall penetration at (52.81794, 932.5987)
[02:57:59] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23.0878810882568
[02:57:59] [INFO] [Bullet] Body exited signal received for penetrating body
[02:57:59] [INFO] [Bullet] Exiting penetration at (11.61549, 910.6867) after traveling 41.6666641235352 pixels through wall
[02:57:59] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:58:00] [ENEMY] [Enemy4] State: SUPPRESSED -> IN_COVER
[02:58:00] [ENEMY] [Enemy4] State: IN_COVER -> PURSUING
[02:58:00] [ENEMY] [Enemy10] State: SUPPRESSED -> SEEKING_COVER
[02:58:00] [ENEMY] [Enemy10] State: SEEKING_COVER -> IN_COVER
[02:58:00] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[02:58:00] [ENEMY] [Enemy10] State: SUPPRESSED -> SEEKING_COVER
[02:58:00] [ENEMY] [Enemy10] State: SEEKING_COVER -> IN_COVER
[02:58:00] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[02:58:00] [ENEMY] [Enemy10] State: SUPPRESSED -> SEEKING_COVER
[02:58:01] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[02:58:01] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[02:58:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(973.6204, 1497.52), source=ENEMY (Enemy10), range=1469, listeners=10
[02:58:01] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:58:01] [INFO] [LastChance] Threat detected: Bullet
[02:58:01] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:58:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:58:01] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[02:58:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1003.125, 1474.646), source=ENEMY (Enemy10), range=1469, listeners=10
[02:58:01] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:58:01] [INFO] [LastChance] Threat detected: @Area2D@2088
[02:58:01] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:58:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:58:01] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:58:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(471.5049, 1010.088), source=ENEMY (Enemy3), range=1469, listeners=10
[02:58:01] [ENEMY] [Enemy2] Heard gunshot at (471.5049, 1010.088), source_type=1, intensity=0.01, distance=466
[02:58:01] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=3, self=1, below_threshold=4
[02:58:01] [ENEMY] [Enemy3] State: FLANKING -> COMBAT
[02:58:01] [ENEMY] [Enemy10] State: SEEKING_COVER -> IN_COVER
[02:58:01] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[02:58:01] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:58:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(492.9444, 1038.66), source=ENEMY (Enemy3), range=1469, listeners=10
[02:58:01] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
[02:58:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(980.2932, 1410.542), shooter_id=2012326397419, bullet_pos=(886.4022, 1004.591)
[02:58:01] [INFO] [Bullet] Using shooter_position, distance=416.667297363281
[02:58:01] [INFO] [Bullet] Distance to wall: 416.667297363281 (28.3716424610653% of viewport)
[02:58:01] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:58:01] [INFO] [Bullet] Starting wall penetration at (886.4022, 1004.591)
[02:58:01] [INFO] [Bullet] Raycast backward hit penetrating body at distance 41.9542274475098
[02:58:01] [INFO] [Bullet] Body exited signal received for penetrating body
[02:58:01] [INFO] [Bullet] Exiting penetration at (875.8864, 959.1248) after traveling 41.666675567627 pixels through wall
[02:58:01] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:58:01] [INFO] [LastChance] Threat detected: @Area2D@2090
[02:58:01] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:58:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:58:01] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
[02:58:01] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:58:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(519.2823, 1061.557), source=ENEMY (Enemy3), range=1469, listeners=10
[02:58:01] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
[02:58:01] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[02:58:01] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[02:58:01] [INFO] [LastChance] Threat detected: @Area2D@2092
[02:58:01] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:58:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:58:01] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:58:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(554.384, 1073.014), source=ENEMY (Enemy3), range=1469, listeners=10
[02:58:01] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
[02:58:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(531.413, 1042.362), shooter_id=2010329909533, bullet_pos=(1382.935, 1381.754)
[02:58:01] [INFO] [Bullet] Using shooter_position, distance=916.666259765625
[02:58:01] [INFO] [Bullet] Distance to wall: 916.666259765625 (62.4174912280606% of viewport)
[02:58:01] [INFO] [LastChance] Threat detected: @Area2D@2095
[02:58:01] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:58:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:58:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(950.0251, 1433.693), shooter_id=2012326397419, bullet_pos=(614.3561, 57.3687)
[02:58:01] [INFO] [Bullet] Using shooter_position, distance=1416.66638183594
[02:58:01] [INFO] [Bullet] Distance to wall: 1416.66638183594 (96.4634189589804% of viewport)
[02:58:01] [INFO] [Bullet] Distance-based penetration chance: 34.1260112145229%
[02:58:01] [INFO] [Bullet] Starting wall penetration at (614.3561, 57.3687)
[02:58:01] [INFO] [Bullet] Raycast backward hit penetrating body at distance 20.5543804168701
[02:58:01] [INFO] [Bullet] Body exited signal received for penetrating body
[02:58:01] [INFO] [Bullet] Exiting penetration at (603.2988, 12.03094) after traveling 41.6666679382324 pixels through wall
[02:58:01] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:58:01] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:58:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(590.6487, 1081.88), source=ENEMY (Enemy3), range=1469, listeners=10
[02:58:01] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
[02:58:01] [INFO] [LastChance] Threat detected: @Area2D@2097
[02:58:01] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:58:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:58:01] [ENEMY] [Enemy2] State: COMBAT -> PURSUING
[02:58:01] [ENEMY] [Enemy10] State: SUPPRESSED -> IN_COVER
[02:58:01] [ENEMY] [Enemy10] State: IN_COVER -> PURSUING
[02:58:01] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:58:01] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(627.0504, 1090.167), source=ENEMY (Enemy3), range=1469, listeners=10
[02:58:01] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
[02:58:01] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(554.7419, 1067.15), shooter_id=2010329909533, bullet_pos=(1702.83, 1443.927)
[02:58:01] [INFO] [Bullet] Using shooter_position, distance=1208.33276367188
[02:58:01] [INFO] [Bullet] Distance to wall: 1208.33276367188 (82.2775998064458% of viewport)
[02:58:01] [INFO] [LastChance] Threat detected: Bullet
[02:58:01] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:58:01] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:58:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(531.413, 1042.362), shooter_id=2010329909533, bullet_pos=(2001.341, 1207.448)
[02:58:02] [INFO] [Bullet] Using shooter_position, distance=1479.16918945313
[02:58:02] [INFO] [Bullet] Distance to wall: 1479.16918945313 (100.719350062163% of viewport)
[02:58:02] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:58:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(663.5355, 1098.08), source=ENEMY (Enemy3), range=1469, listeners=10
[02:58:02] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:58:02] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(554.7419, 1067.15), shooter_id=2010329909533, bullet_pos=(1502.563, 1528.774)
[02:58:02] [INFO] [Bullet] Using shooter_position, distance=1054.25903320313
[02:58:02] [INFO] [Bullet] Distance to wall: 1054.25903320313 (71.7864361822204% of viewport)
[02:58:02] [INFO] [Bullet] Distance-based penetration chance: 62.9158244540762%
[02:58:02] [INFO] [Bullet] Starting wall penetration at (1502.563, 1528.774)
[02:58:02] [INFO] [Bullet] Raycast backward hit penetrating body at distance 24.6005821228027
[02:58:02] [INFO] [LastChance] Threat detected: @Area2D@2102
[02:58:02] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:58:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:58:02] [INFO] [Bullet] Body exited signal received for penetrating body
[02:58:02] [INFO] [Bullet] Exiting penetration at (1465.349, 1544.541) after traveling 35.4166717529297 pixels through wall
[02:58:02] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[02:58:02] [ENEMY] [Enemy8] Hit taken, health: 2/3
[02:58:02] [ENEMY] [Enemy3] Player distracted - priority attack triggered
[02:58:02] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(700.0483, 1105.865), source=ENEMY (Enemy3), range=1469, listeners=10
[02:58:02] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=0, self=1, below_threshold=6
[02:58:02] [INFO] [LastChance] Threat detected: @Area2D@2106
[02:58:02] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:58:02] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:58:02] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[02:58:02] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[02:58:02] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[02:58:02] [INFO] [LastChance] Threat detected: @Area2D@2109
[02:58:02] [INFO] [LastChance] Triggering last chance effect!
[02:58:02] [INFO] [LastChance] Starting last chance effect:
[02:58:02] [INFO] [LastChance]   - Time will be frozen (except player)
[02:58:02] [INFO] [LastChance]   - Duration: 6.0 real seconds
[02:58:02] [INFO] [LastChance]   - Sepia intensity: 0.70
[02:58:02] [INFO] [LastChance]   - Brightness: 0.60
[02:58:02] [INFO] [LastChance] Pushed bullet @Area2D@2109 from distance 132.1 to 200.0
[02:58:02] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[02:58:02] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[02:58:02] [INFO] [LastChance] Skipping player node: Player
[02:58:02] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[02:58:02] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[02:58:02] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[02:58:04] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@2111
[02:58:04] [INFO] [LastChance] Registered frozen player bullet: @Area2D@2111
[02:58:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(627.4718, 1199.828), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:58:04] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=5
[02:58:04] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@2113
[02:58:04] [INFO] [LastChance] Registered frozen player bullet: @Area2D@2113
[02:58:04] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(620.4718, 1199.828), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:58:04] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=5
[02:58:06] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@2115
[02:58:06] [INFO] [LastChance] Registered frozen player bullet: @Area2D@2115
[02:58:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(585.0448, 725.4481), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:58:06] [ENEMY] [Enemy1] Heard gunshot at (585.0448, 725.4481), source_type=0, intensity=0.01, distance=471
[02:58:06] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[02:58:06] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@2117
[02:58:06] [INFO] [LastChance] Registered frozen player bullet: @Area2D@2117
[02:58:06] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(592.0448, 725.4481), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:58:06] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[02:58:07] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@2119
[02:58:07] [INFO] [LastChance] Registered frozen player bullet: @Area2D@2119
[02:58:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(840.1003, 725.4481), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:58:07] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
[02:58:07] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@2121
[02:58:07] [INFO] [LastChance] Registered frozen player bullet: @Area2D@2121
[02:58:07] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(841.6003, 723.4481), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:58:07] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
[02:58:08] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[02:58:08] [INFO] [LastChance] Ending last chance effect
[02:58:08] [INFO] [LastChance] All process modes restored
[02:58:08] [INFO] [LastChance] Unfroze player bullet: @Area2D@2111
[02:58:08] [INFO] [LastChance] Unfroze player bullet: @Area2D@2113
[02:58:08] [INFO] [LastChance] Unfroze player bullet: @Area2D@2115
[02:58:08] [INFO] [LastChance] Unfroze player bullet: @Area2D@2117
[02:58:08] [INFO] [LastChance] Unfroze player bullet: @Area2D@2119
[02:58:08] [INFO] [LastChance] Unfroze player bullet: @Area2D@2121
[02:58:08] [INFO] [LastChance] Restored original colors to 5 player sprites
[02:58:08] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[02:58:08] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:58:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(518.0361, 654.9631), source=ENEMY (Enemy2), range=1469, listeners=10
[02:58:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
[02:58:08] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[02:58:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(531.413, 1042.362), shooter_id=2010329909533, bullet_pos=(2476.255, 1313.751)
[02:58:08] [INFO] [Bullet] Using shooter_position, distance=1963.68627929688
[02:58:08] [INFO] [Bullet] Distance to wall: 1963.68627929688 (133.711009657991% of viewport)
[02:58:08] [INFO] [Bullet] Distance-based penetration chance: 23.2577980684019%
[02:58:08] [INFO] [Bullet] Penetration failed (distance roll)
[02:58:08] [ENEMY] [Enemy2] State: PURSUING -> COMBAT
[02:58:08] [ENEMY] [Enemy2] Hit taken, health: 3/4
[02:58:08] [ENEMY] [Enemy2] Hit taken, health: 2/4
[02:58:08] [ENEMY] [Enemy3] Hit taken, health: 2/3
[02:58:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(788.6683, 958.0533), source=ENEMY (Enemy4), range=1469, listeners=10
[02:58:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=1, below_threshold=7
[02:58:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(691.3951, 1112.311), shooter_id=2010329909533, bullet_pos=(1692.451, 1332.57)
[02:58:08] [INFO] [Bullet] Using shooter_position, distance=1025.00109863281
[02:58:08] [INFO] [Bullet] Distance to wall: 1025.00109863281 (69.7942096167302% of viewport)
[02:58:08] [INFO] [Bullet] Distance-based penetration chance: 65.2400887804814%
[02:58:08] [INFO] [Bullet] Penetration failed (distance roll)
[02:58:08] [INFO] [LastChance] Threat detected: @Area2D@2123
[02:58:08] [INFO] [LastChance] Effect already used this life
[02:58:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:58:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(841.60034, 723.4481), shooter_id=2013148482189, bullet_pos=(847.5202, 1006.71967)
[02:58:08] [INFO] [Bullet] Using shooter_position, distance=283,3334
[02:58:08] [INFO] [Bullet] Distance to wall: 283,3334 (19,292692% of viewport)
[02:58:08] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:58:08] [INFO] [Bullet] Starting wall penetration at (847.5202, 1006.71967)
[02:58:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(840.10034, 725.4481), shooter_id=2013148482189, bullet_pos=(836.17365, 1008.7543)
[02:58:08] [INFO] [Bullet] Using shooter_position, distance=283,33337
[02:58:08] [INFO] [Bullet] Distance to wall: 283,33337 (19,292692% of viewport)
[02:58:08] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:58:08] [INFO] [Bullet] Starting wall penetration at (836.17365, 1008.7543)
[02:58:08] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:58:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(540.3564, 656.8227), source=ENEMY (Enemy2), range=1469, listeners=10
[02:58:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
[02:58:08] [INFO] [Bullet] Raycast backward hit penetrating body at distance 23,086079
[02:58:08] [INFO] [Bullet] Raycast backward hit penetrating body at distance 21,049273
[02:58:08] [INFO] [Bullet] Body exited signal received for penetrating body
[02:58:08] [INFO] [Bullet] Exiting penetration at (835.6424, 1047.0839) after traveling 33,333336 pixels through wall
[02:58:08] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[02:58:08] [INFO] [Bullet] Body exited signal received for penetrating body
[02:58:08] [INFO] [Bullet] Exiting penetration at (848.32117, 1045.0447) after traveling 33,333332 pixels through wall
[02:58:08] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[02:58:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(788.6683, 958.0533), source=ENEMY (Enemy4), range=1469, listeners=10
[02:58:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=1, below_threshold=7
[02:58:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(627.4718, 1199.8275), shooter_id=2013148482189, bullet_pos=(1037.7767, 1015.03107)
[02:58:08] [INFO] [Bullet] Using shooter_position, distance=449,99985
[02:58:08] [INFO] [Bullet] Distance to wall: 449,99985 (30,641317% of viewport)
[02:58:08] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:58:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(788.6683, 958.0533), source=ENEMY (Enemy4), range=1469, listeners=10
[02:58:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=1, below_threshold=7
[02:58:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(618.0286, 1097.097), shooter_id=2010329909533, bullet_pos=(2468.507, 1563.427)
[02:58:08] [INFO] [Bullet] Using shooter_position, distance=1908.3330078125
[02:58:08] [INFO] [Bullet] Distance to wall: 1908.3330078125 (129.941903616929% of viewport)
[02:58:08] [INFO] [LastChance] Threat detected: @Area2D@2131
[02:58:08] [INFO] [LastChance] Effect already used this life
[02:58:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:58:08] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:58:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(572.5384, 646.4947), source=ENEMY (Enemy2), range=1469, listeners=10
[02:58:08] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=1, below_threshold=4
[02:58:08] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
[02:58:08] [ENEMY] [Enemy2] State: COMBAT -> RETREATING
[02:58:08] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[02:58:08] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[02:58:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(788.6683, 958.0533), source=ENEMY (Enemy4), range=1469, listeners=10
[02:58:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=0, self=1, below_threshold=7
[02:58:08] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[02:58:08] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[02:58:08] [INFO] [PenultimateHit] Player died - ending penultimate effect
[02:58:08] [INFO] [LastChance] Player died
[02:58:08] [ENEMY] [Enemy4] State: SUPPRESSED -> SEEKING_COVER
[02:58:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(577.3603, 635.5218), source=ENEMY (Enemy2), range=1469, listeners=10
[02:58:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
[02:58:08] [ENEMY] [Enemy4] State: SEEKING_COVER -> IN_COVER
[02:58:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(815.5173, 892.8247), shooter_id=2010615121966, bullet_pos=(917.9025, 646.5967)
[02:58:08] [INFO] [Bullet] Using shooter_position, distance=266.666442871094
[02:58:08] [INFO] [Bullet] Distance to wall: 266.666442871094 (18.1578084514427% of viewport)
[02:58:08] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:58:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(764.5178, 1127.642), shooter_id=2010329909533, bullet_pos=(1683.676, 1326.586)
[02:58:08] [INFO] [Bullet] Using shooter_position, distance=940.441528320313
[02:58:08] [INFO] [Bullet] Distance to wall: 940.441528320313 (64.0363929828132% of viewport)
[02:58:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(654.6962, 1104.87), shooter_id=2010329909533, bullet_pos=(2488.542, 1533.77)
[02:58:08] [INFO] [Bullet] Using shooter_position, distance=1883.33325195313
[02:58:08] [INFO] [Bullet] Distance to wall: 1883.33325195313 (128.239624269966% of viewport)
[02:58:08] [INFO] [LastChance] Threat detected: @Area2D@2137
[02:58:08] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:58:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:58:08] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[02:58:08] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:58:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(575.785, 631.5566), source=ENEMY (Enemy2), range=1469, listeners=10
[02:58:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
[02:58:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(817.949, 893.8795), shooter_id=2010615121966, bullet_pos=(914.7089, 718.8438)
[02:58:08] [INFO] [Bullet] Using shooter_position, distance=199.999877929688
[02:58:08] [INFO] [Bullet] Distance to wall: 199.999877929688 (13.618359455579% of viewport)
[02:58:08] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:58:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(585.0703, 643.2576), shooter_id=2010044697563, bullet_pos=(1368.158, 411.4874)
[02:58:08] [INFO] [Bullet] Using shooter_position, distance=816.66650390625
[02:58:08] [INFO] [Bullet] Distance to wall: 816.66650390625 (55.6083239682592% of viewport)
[02:58:08] [INFO] [Bullet] Distance-based penetration chance: 81.7902887036976%
[02:58:08] [INFO] [Bullet] Penetration failed (distance roll)
[02:58:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(572.6343, 623.6262), source=ENEMY (Enemy2), range=1469, listeners=10
[02:58:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
[02:58:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(811.5477, 891.3287), shooter_id=2010615121966, bullet_pos=(858.1206, 59.29758)
[02:58:08] [INFO] [Bullet] Using shooter_position, distance=833.333618164063
[02:58:08] [INFO] [Bullet] Distance to wall: 833.333618164063 (56.7432184261943% of viewport)
[02:58:08] [INFO] [LastChance] Threat detected: @Area2D@2144
[02:58:08] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:58:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:58:08] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:58:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(564.167, 611.6931), source=ENEMY (Enemy2), range=1469, listeners=10
[02:58:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
[02:58:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(813.3867, 891.9879), shooter_id=2010615121966, bullet_pos=(911.2032, 64.41522)
[02:58:08] [INFO] [Bullet] Using shooter_position, distance=833.333374023438
[02:58:08] [INFO] [Bullet] Distance to wall: 833.333374023438 (56.7432018022102% of viewport)
[02:58:08] [INFO] [Bullet] Distance-based penetration chance: 80.4662645640881%
[02:58:08] [INFO] [Bullet] Starting wall penetration at (911.2032, 64.41522)
[02:58:08] [INFO] [Bullet] Raycast backward hit penetrating body at distance 5.69246959686279
[02:58:08] [INFO] [Bullet] Body exited signal received for penetrating body
[02:58:08] [INFO] [Bullet] Exiting penetration at (915.7028, 26.34689) after traveling 33.3333358764648 pixels through wall
[02:58:08] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:58:08] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[02:58:08] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(627.4718, 1199.8275), shooter_id=2013148482189, bullet_pos=(1687.0819, 1310.4059)
[02:58:08] [INFO] [Bullet] Using shooter_position, distance=1065,3644
[02:58:08] [INFO] [Bullet] Distance to wall: 1065,3644 (72,54262% of viewport)
[02:58:08] [INFO] [Bullet] Distance-based penetration chance: 62,03362%
[02:58:08] [INFO] [Bullet] Starting wall penetration at (1687.0819, 1310.4059)
[02:58:08] [INFO] [Bullet] Raycast backward hit penetrating body at distance 19,141327
[02:58:08] [INFO] [Bullet] Body exited signal received for penetrating body
[02:58:08] [INFO] [Bullet] Exiting penetration at (1717.4232, 1324.2085) after traveling 28,333334 pixels through wall
[02:58:08] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[02:58:08] [INFO] [LastChance] Threat detected: Bullet
[02:58:08] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:58:08] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:58:08] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:58:08] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(558.5031, 596.67), source=ENEMY (Enemy2), range=1469, listeners=10
[02:58:08] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
[02:58:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(815.5173, 892.8247), shooter_id=2010615121966, bullet_pos=(715.1158, 51.88599)
[02:58:09] [INFO] [Bullet] Using shooter_position, distance=846.911071777344
[02:58:09] [INFO] [Bullet] Distance to wall: 846.911071777344 (57.6677322094583% of viewport)
[02:58:09] [INFO] [Bullet] Distance-based penetration chance: 79.387645755632%
[02:58:09] [INFO] [Bullet] Starting wall penetration at (715.1158, 51.88599)
[02:58:09] [INFO] [Bullet] Raycast backward hit penetrating body at distance 12.3230686187744
[02:58:09] [INFO] [Bullet] Body exited signal received for penetrating body
[02:58:09] [INFO] [Bullet] Exiting penetration at (704.3579, 20.33636) after traveling 28.3333358764648 pixels through wall
[02:58:09] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[02:58:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(642.5676, 618.4922), shooter_id=2010044697563, bullet_pos=(1373.141, 386.0289)
[02:58:09] [INFO] [Bullet] Using shooter_position, distance=766.666137695313
[02:58:09] [INFO] [Bullet] Distance to wall: 766.666137695313 (52.2037070903903% of viewport)
[02:58:09] [INFO] [Bullet] Distance-based penetration chance: 85.762341727878%
[02:58:09] [INFO] [Bullet] Starting wall penetration at (1373.141, 386.0289)
[02:58:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(643.8893, 621.222), shooter_id=2010044697563, bullet_pos=(1368.443, 209.5576)
[02:58:09] [INFO] [Bullet] Using shooter_position, distance=833.333862304688
[02:58:09] [INFO] [Bullet] Distance to wall: 833.333862304688 (56.7432350501784% of viewport)
[02:58:09] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:58:09] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(576.0411, 625.0982), source=ENEMY (Enemy2), range=1469, listeners=10
[02:58:09] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=1, below_threshold=5
[02:58:09] [INFO] [Bullet] Raycast backward hit penetrating body at distance 22.740478515625
[02:58:09] [INFO] [LastChance] Threat detected: @Area2D@2153
[02:58:09] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:58:09] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:58:09] [INFO] [Bullet] Body exited signal received for penetrating body
[02:58:09] [INFO] [Bullet] Exiting penetration at (1409.67, 374.4058) after traveling 33.3333320617676 pixels through wall
[02:58:09] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:58:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(639.8906, 613.2729), shooter_id=2010044697563, bullet_pos=(1361.819, 355.2084)
[02:58:09] [INFO] [Bullet] Using shooter_position, distance=766.666564941406
[02:58:09] [INFO] [Bullet] Distance to wall: 766.666564941406 (52.2037361823624% of viewport)
[02:58:09] [INFO] [Bullet] Distance-based penetration chance: 85.7623077872438%
[02:58:09] [INFO] [Bullet] Penetration failed (distance roll)
[02:58:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(817.949, 893.8795), shooter_id=2010615121966, bullet_pos=(523.9227, 55.3779)
[02:58:09] [INFO] [Bullet] Using shooter_position, distance=888.55859375
[02:58:09] [INFO] [Bullet] Distance to wall: 888.55859375 (60.5035885636164% of viewport)
[02:58:09] [INFO] [Bullet] Distance-based penetration chance: 76.0791466757808%
[02:58:09] [INFO] [Bullet] Starting wall penetration at (523.9227, 55.3779)
[02:58:09] [ENEMY] [Enemy2] State: RETREATING -> IN_COVER
[02:58:09] [INFO] [Bullet] Raycast backward hit penetrating body at distance 6.20158386230469
[02:58:09] [INFO] [Bullet] Body exited signal received for penetrating body
[02:58:09] [INFO] [Bullet] Exiting penetration at (507.0055, 26.65643) after traveling 28.3333339691162 pixels through wall
[02:58:09] [INFO] [Bullet] Damage multiplier after penetration: 0.45
[02:58:09] [ENEMY] [Enemy2] State: IN_COVER -> SUPPRESSED
[02:58:09] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(631.9017, 605.165), shooter_id=2010044697563, bullet_pos=(1381.572, 444.6286)
[02:58:09] [INFO] [Bullet] Using shooter_position, distance=766.66650390625
[02:58:09] [INFO] [Bullet] Distance to wall: 766.66650390625 (52.2037320263664% of viewport)
[02:58:09] [INFO] [LastChance] Threat detected: @Area2D@2158
[02:58:09] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:58:09] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:58:09] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[02:58:09] [INFO] [LastChance] Resetting all effects (scene change detected)
[02:58:09] [ENEMY] [Enemy1] Death animation component initialized
[02:58:09] [ENEMY] [Enemy2] Death animation component initialized
[02:58:09] [ENEMY] [Enemy3] Death animation component initialized
[02:58:09] [ENEMY] [Enemy4] Death animation component initialized
[02:58:09] [ENEMY] [Enemy5] Death animation component initialized
[02:58:09] [ENEMY] [Enemy6] Death animation component initialized
[02:58:09] [ENEMY] [Enemy7] Death animation component initialized
[02:58:09] [ENEMY] [Enemy8] Death animation component initialized
[02:58:09] [ENEMY] [Enemy9] Death animation component initialized
[02:58:09] [ENEMY] [Enemy10] Death animation component initialized
[02:58:09] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[02:58:09] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[02:58:09] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[02:58:09] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[02:58:09] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[02:58:09] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[02:58:09] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[02:58:09] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 2/4
[02:58:09] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[02:58:09] [ENEMY] [Enemy10] Grenade system configured: offensive=2, flashbangs=0
[02:58:09] [INFO] [ScoreManager] Level started with 10 enemies
[02:58:09] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 11)
[02:58:09] [ENEMY] [Enemy1] Registered as sound listener
[02:58:09] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[02:58:09] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 12)
[02:58:09] [ENEMY] [Enemy2] Registered as sound listener
[02:58:09] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 3, behavior: GUARD, player_found: yes
[02:58:09] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 13)
[02:58:09] [ENEMY] [Enemy3] Registered as sound listener
[02:58:09] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[02:58:09] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 14)
[02:58:09] [ENEMY] [Enemy4] Registered as sound listener
[02:58:09] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 3, behavior: GUARD, player_found: yes
[02:58:09] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 15)
[02:58:09] [ENEMY] [Enemy5] Registered as sound listener
[02:58:09] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 4, behavior: GUARD, player_found: yes
[02:58:09] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 16)
[02:58:09] [ENEMY] [Enemy6] Registered as sound listener
[02:58:09] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 4, behavior: GUARD, player_found: yes
[02:58:09] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 17)
[02:58:09] [ENEMY] [Enemy7] Registered as sound listener
[02:58:09] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[02:58:09] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 18)
[02:58:09] [ENEMY] [Enemy8] Registered as sound listener
[02:58:09] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[02:58:09] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 19)
[02:58:09] [ENEMY] [Enemy9] Registered as sound listener
[02:58:09] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 4, behavior: GUARD, player_found: yes
[02:58:09] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 20)
[02:58:09] [ENEMY] [Enemy10] Registered as sound listener
[02:58:09] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[02:58:09] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[02:58:09] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[02:58:09] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[02:58:09] [INFO] [LastChance] Found player: Player
[02:58:09] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[02:58:09] [INFO] [LastChance] Connected to player Damaged signal (C#)
[02:58:09] [INFO] [LastChance] Connected to player Died signal (C#)
[02:58:09] [INFO] [Player] Detecting weapon pose (frame 3)...
[02:58:09] [INFO] [Player] Detected weapon: Rifle (default pose)
[02:58:09] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[02:58:10] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[02:58:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(520.8979, 1150.158), source=PLAYER (AssaultRifle), range=1469, listeners=20
[02:58:10] [INFO] [SoundPropagation] Cleaned up 10 invalid listeners
[02:58:10] [ENEMY] [Enemy3] Heard gunshot at (520.8979, 1150.158), source_type=0, intensity=0.01, distance=438
[02:58:10] [ENEMY] [Enemy4] Heard gunshot at (520.8979, 1150.158), source_type=0, intensity=0.02, distance=375
[02:58:10] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=6
[02:58:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.238, 1518.623), source=ENEMY (Enemy10), range=1469, listeners=10
[02:58:10] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:58:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1112.721, 1498.613), source=ENEMY (Enemy10), range=1469, listeners=10
[02:58:10] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:58:10] [ENEMY] [Enemy10] Hit taken, health: 1/2
[02:58:10] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1081.689, 1477.859), source=ENEMY (Enemy10), range=1469, listeners=10
[02:58:10] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:58:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1053.545, 1458.546), source=ENEMY (Enemy10), range=1469, listeners=10
[02:58:11] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:58:11] [INFO] [LastChance] Threat detected: @Area2D@2418
[02:58:11] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:58:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:58:11] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[02:58:11] [ENEMY] [Enemy10] Player distracted - priority attack triggered
[02:58:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1046.003, 1443.237), source=ENEMY (Enemy10), range=1469, listeners=10
[02:58:11] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:58:11] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[02:58:11] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[02:58:11] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1047.667, 1441.902), source=ENEMY (Enemy10), range=1469, listeners=10
[02:58:11] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:58:11] [INFO] [LastChance] Threat detected: Bullet
[02:58:11] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:58:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:58:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.548, 1489.803), shooter_id=2653132164606, bullet_pos=(53.57854, 856.327)
[02:58:11] [INFO] [Bullet] Using shooter_position, distance=1208.33349609375
[02:58:11] [INFO] [Bullet] Distance to wall: 1208.33349609375 (82.277649678398% of viewport)
[02:58:11] [INFO] [LastChance] Threat detected: @Area2D@2421
[02:58:11] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:58:11] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:58:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1051.927, 1467.981), shooter_id=2653132164606, bullet_pos=(63.13851, 817.9222)
[02:58:11] [INFO] [Bullet] Using shooter_position, distance=1183.33410644531
[02:58:11] [INFO] [Bullet] Distance to wall: 1183.33410644531 (80.5753952674118% of viewport)
[02:58:11] [INFO] [Bullet] Distance-based penetration chance: 52.6620388546862%
[02:58:11] [INFO] [Bullet] Penetration failed (distance roll)
[02:58:11] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
[02:58:11] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[02:58:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.548, 1489.803), shooter_id=2653132164606, bullet_pos=(399.3854, 715.6313)
[02:58:11] [INFO] [Bullet] Using shooter_position, distance=1032.49829101563
[02:58:11] [INFO] [Bullet] Distance to wall: 1032.49829101563 (70.3047072321971% of viewport)
[02:58:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1021.4, 1446.278), shooter_id=2653132164606, bullet_pos=(56.78527, 790.0536)
[02:58:11] [INFO] [Bullet] Using shooter_position, distance=1166.66674804688
[02:58:11] [INFO] [Bullet] Distance to wall: 1166.66674804688 (79.4404841854927% of viewport)
[02:58:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1021.4, 1446.278), shooter_id=2653132164606, bullet_pos=(211.748, 708.742)
[02:58:11] [INFO] [Bullet] Using shooter_position, distance=1095.21472167969
[02:58:11] [INFO] [Bullet] Distance to wall: 1095.21472167969 (74.57518432146% of viewport)
[02:58:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(993.5473, 1426.42), shooter_id=2653132164606, bullet_pos=(62.33234, 780.4456)
[02:58:11] [INFO] [Bullet] Using shooter_position, distance=1133.33325195313
[02:58:11] [INFO] [Bullet] Distance to wall: 1133.33325195313 (77.1707451415748% of viewport)
[02:58:11] [INFO] [Bullet] Distance-based penetration chance: 56.6341306681628%
[02:58:11] [INFO] [Bullet] Penetration failed (distance roll)
[02:58:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(987.5333, 1410.049), shooter_id=2653132164606, bullet_pos=(56.145, 962.5057)
[02:58:11] [INFO] [Bullet] Using shooter_position, distance=1033.333984375
[02:58:11] [INFO] [Bullet] Distance to wall: 1033.333984375 (70.3616111297415% of viewport)
[02:58:11] [INFO] [Bullet] Distance-based penetration chance: 64.5781203486349%
[02:58:11] [INFO] [Bullet] Starting wall penetration at (56.145, 962.5057)
[02:58:11] [INFO] [Bullet] Raycast backward hit penetrating body at distance 11.5455389022827
[02:58:11] [INFO] [Bullet] Body exited signal received for penetrating body
[02:58:11] [INFO] [Bullet] Exiting penetration at (21.5935, 945.9033) after traveling 33.3333358764648 pixels through wall
[02:58:11] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:58:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(985.9237, 1411.282), shooter_id=2653132164606, bullet_pos=(52.92264, 767.8881)
[02:58:11] [INFO] [Bullet] Using shooter_position, distance=1133.33422851563
[02:58:11] [INFO] [Bullet] Distance to wall: 1133.33422851563 (77.1708116375111% of viewport)
[02:58:11] [INFO] [Bullet] Distance-based penetration chance: 56.6340530895703%
[02:58:11] [INFO] [Bullet] Starting wall penetration at (52.92264, 767.8881)
[02:58:11] [INFO] [Bullet] Raycast backward hit penetrating body at distance 12.9181880950928
[02:58:11] [INFO] [Bullet] Body exited signal received for penetrating body
[02:58:11] [INFO] [Bullet] Exiting penetration at (21.36526, 746.1262) after traveling 33.3333358764648 pixels through wall
[02:58:11] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:58:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1021.4, 1446.278), shooter_id=2653132164606, bullet_pos=(513.5021, 809.3469)
[02:58:11] [INFO] [Bullet] Using shooter_position, distance=814.641723632813
[02:58:11] [INFO] [Bullet] Distance to wall: 814.641723632813 (55.4704529561982% of viewport)
[02:58:11] [INFO] [Bullet] Distance-based penetration chance: 81.9511382177688%
[02:58:11] [INFO] [Bullet] Starting wall penetration at (513.5021, 809.3469)
[02:58:11] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1082.548, 1489.803), shooter_id=2653132164606, bullet_pos=(918.5507, 844.1384)
[02:58:11] [INFO] [Bullet] Using shooter_position, distance=666.166809082031
[02:58:11] [INFO] [Bullet] Distance to wall: 666.166809082031 (45.3605230031421% of viewport)
[02:58:11] [INFO] [Bullet] Distance-based penetration chance: 93.7460564963342%
[02:58:11] [INFO] [Bullet] Starting wall penetration at (918.5507, 844.1384)
[02:58:11] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
[02:58:11] [INFO] [Bullet] Raycast backward hit penetrating body at distance 11.1074333190918
[02:58:11] [INFO] [Bullet] Raycast backward hit penetrating body at distance 18.0174160003662
[02:58:11] [INFO] [Bullet] Body exited signal received for penetrating body
[02:58:11] [INFO] [Bullet] Exiting penetration at (946.782, 851.1263) after traveling 24.0833320617676 pixels through wall
[02:58:11] [INFO] [Bullet] Damage multiplier after penetration: 0.225
[02:58:11] [INFO] [Bullet] Body exited signal received for penetrating body
[02:58:11] [INFO] [Bullet] Exiting penetration at (541.0925, 818.5455) after traveling 24.0833320617676 pixels through wall
[02:58:11] [INFO] [Bullet] Damage multiplier after penetration: 0.225
[02:58:11] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[02:58:11] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[02:58:12] [ENEMY] [Enemy3] State: SUPPRESSED -> SEEKING_COVER
[02:58:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(459.8863, 754.0297), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:58:12] [ENEMY] [Enemy1] Heard gunshot at (459.8863, 754.0297), source_type=0, intensity=0.01, distance=435
[02:58:12] [ENEMY] [Enemy2] Heard gunshot at (459.8863, 754.0297), source_type=0, intensity=0.06, distance=213
[02:58:12] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[02:58:12] [ENEMY] [Enemy4] State: PURSUING -> COMBAT
[02:58:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(487.7155, 736.235), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:58:12] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=3, self=0, below_threshold=3
[02:58:12] [ENEMY] [Enemy4] Hit taken, health: 2/3
[02:58:12] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:58:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(520.6103, 736.0475), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:58:12] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[02:58:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(654.775, 899.8594), source=ENEMY (Enemy4), range=1469, listeners=10
[02:58:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:58:12] [INFO] [LastChance] Threat detected: @Area2D@2438
[02:58:12] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:58:12] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:58:12] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[02:58:12] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[02:58:12] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[02:58:12] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[02:58:12] [ENEMY] [Enemy4] Hit taken, health: 1/3
[02:58:12] [ENEMY] [Enemy2] Player distracted - priority attack triggered
[02:58:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(400, 550), source=ENEMY (Enemy2), range=1469, listeners=10
[02:58:12] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=3, self=1, below_threshold=3
[02:58:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(655.456, 905.9138), source=ENEMY (Enemy4), range=1469, listeners=10
[02:58:12] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=1, self=1, below_threshold=6
[02:58:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(549.4981, 749.0771), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:58:12] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[02:58:12] [INFO] [LastChance] Threat detected: Bullet
[02:58:12] [INFO] [LastChance] Triggering last chance effect!
[02:58:12] [INFO] [LastChance] Starting last chance effect:
[02:58:12] [INFO] [LastChance]   - Time will be frozen (except player)
[02:58:12] [INFO] [LastChance]   - Duration: 6.0 real seconds
[02:58:12] [INFO] [LastChance]   - Sepia intensity: 0.70
[02:58:12] [INFO] [LastChance]   - Brightness: 0.60
[02:58:12] [INFO] [LastChance] Pushed bullet Bullet from distance 143.6 to 200.0
[02:58:12] [INFO] [LastChance] Pushed bullet @Area2D@2442 from distance 127.0 to 200.0
[02:58:12] [INFO] [LastChance] Pushed bullet @Area2D@2443 from distance 30.0 to 200.0
[02:58:12] [INFO] [LastChance] Pushed 3 threatening bullets away from player
[02:58:12] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[02:58:12] [INFO] [LastChance] Skipping player node: Player
[02:58:12] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[02:58:12] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[02:58:12] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[02:58:12] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@2445
[02:58:12] [INFO] [LastChance] Registered frozen player bullet: @Area2D@2445
[02:58:12] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(568.2392, 770.8101), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:58:12] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[02:58:13] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@2447
[02:58:13] [INFO] [LastChance] Registered frozen player bullet: @Area2D@2447
[02:58:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(575.8927, 800.5105), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:58:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=2, self=0, below_threshold=5
[02:58:13] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@2449
[02:58:13] [INFO] [LastChance] Registered frozen player bullet: @Area2D@2449
[02:58:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(576.0736, 835.5806), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:58:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
[02:58:13] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@2451
[02:58:13] [INFO] [LastChance] Registered frozen player bullet: @Area2D@2451
[02:58:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(576.0736, 870.7808), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:58:13] [ENEMY] [Enemy4] Heard gunshot at (576.0736, 870.7808), source_type=0, intensity=0.33, distance=87
[02:58:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
[02:58:13] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@2453
[02:58:13] [INFO] [LastChance] Registered frozen player bullet: @Area2D@2453
[02:58:13] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(580.2126, 904.2664), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:58:13] [INFO] [SoundPropagation] Sound result: notified=3, out_of_range=1, self=0, below_threshold=6
[02:58:15] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@2455
[02:58:15] [INFO] [LastChance] Registered frozen player bullet: @Area2D@2455
[02:58:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(610.5878, 727.0605), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:58:15] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[02:58:15] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@2457
[02:58:15] [INFO] [LastChance] Registered frozen player bullet: @Area2D@2457
[02:58:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(586.7535, 701.733), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:58:15] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[02:58:15] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@2459
[02:58:15] [INFO] [LastChance] Registered frozen player bullet: @Area2D@2459
[02:58:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(561.3735, 678.0255), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:58:15] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[02:58:15] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@2461
[02:58:15] [INFO] [LastChance] Registered frozen player bullet: @Area2D@2461
[02:58:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(532.5647, 662.5958), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:58:15] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[02:58:15] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@2463
[02:58:15] [INFO] [LastChance] Registered frozen player bullet: @Area2D@2463
[02:58:15] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(506.0803, 638.8988), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:58:15] [INFO] [SoundPropagation] Sound result: notified=4, out_of_range=2, self=0, below_threshold=4
[02:58:17] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@2465
[02:58:17] [INFO] [LastChance] Registered frozen player bullet: @Area2D@2465
[02:58:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(132.2258, 403.4205), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:58:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=3
[02:58:17] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@2467
[02:58:17] [INFO] [LastChance] Registered frozen player bullet: @Area2D@2467
[02:58:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(132.3402, 365.1282), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:58:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=3
[02:58:17] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@2469
[02:58:17] [INFO] [LastChance] Registered frozen player bullet: @Area2D@2469
[02:58:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(143.1188, 331.0929), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:58:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=3
[02:58:17] [INFO] [LastChance] Freezing newly fired player bullet: @Area2D@2471
[02:58:17] [INFO] [LastChance] Registered frozen player bullet: @Area2D@2471
[02:58:17] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(167.7204, 302.7831), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:58:17] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=5, self=0, below_threshold=3
[02:58:18] [INFO] [LastChance] Effect duration expired after 6.00 real seconds
[02:58:18] [INFO] [LastChance] Ending last chance effect
[02:58:18] [INFO] [LastChance] All process modes restored
[02:58:18] [INFO] [LastChance] Unfroze player bullet: @Area2D@2445
[02:58:18] [INFO] [LastChance] Unfroze player bullet: @Area2D@2447
[02:58:18] [INFO] [LastChance] Unfroze player bullet: @Area2D@2449
[02:58:18] [INFO] [LastChance] Unfroze player bullet: @Area2D@2451
[02:58:18] [INFO] [LastChance] Unfroze player bullet: @Area2D@2453
[02:58:18] [INFO] [LastChance] Unfroze player bullet: @Area2D@2455
[02:58:18] [INFO] [LastChance] Unfroze player bullet: @Area2D@2457
[02:58:18] [INFO] [LastChance] Unfroze player bullet: @Area2D@2459
[02:58:18] [INFO] [LastChance] Unfroze player bullet: @Area2D@2461
[02:58:18] [INFO] [LastChance] Unfroze player bullet: @Area2D@2463
[02:58:18] [INFO] [LastChance] Unfroze player bullet: @Area2D@2465
[02:58:18] [INFO] [LastChance] Unfroze player bullet: @Area2D@2467
[02:58:18] [INFO] [LastChance] Unfroze player bullet: @Area2D@2469
[02:58:18] [INFO] [LastChance] Unfroze player bullet: @Area2D@2471
[02:58:18] [INFO] [LastChance] Restored original colors to 5 player sprites
[02:58:18] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[02:58:18] [ENEMY] [Enemy3] State: SEEKING_COVER -> IN_COVER
[02:58:18] [ENEMY] [Enemy4] State: COMBAT -> RETREATING
[02:58:18] [ENEMY] [Enemy3] Hit taken, health: 1/2
[02:58:18] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[02:58:18] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[02:58:18] [ENEMY] [Enemy4] Hit taken, health: 0/3
[02:58:18] [ENEMY] [Enemy4] Enemy died (ricochet: false, penetration: false)
[02:58:18] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[02:58:18] [INFO] [SoundPropagation] Unregistered listener: Enemy4 (remaining: 9)
[02:58:18] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[02:58:18] [ENEMY] [Enemy4] Death animation started with hit direction: (1, 0)
[02:58:18] [ENEMY] [Enemy3] Hit taken, health: 0/2
[02:58:18] [ENEMY] [Enemy3] Enemy died (ricochet: false, penetration: false)
[02:58:18] [INFO] [ScoreManager] Kill registered. Combo: 2 (points: 1500)
[02:58:18] [INFO] [SoundPropagation] Unregistered listener: Enemy3 (remaining: 8)
[02:58:18] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[02:58:18] [ENEMY] [Enemy3] Death animation started with hit direction: (1, 0)
[02:58:18] [ENEMY] [Enemy1] Hit taken, health: 1/2
[02:58:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(549.4981, 749.0771), shooter_id=2653954248239, bullet_pos=(719.1351, 1009.8457)
[02:58:18] [INFO] [Bullet] Using shooter_position, distance=311,08997
[02:58:18] [INFO] [Bullet] Distance to wall: 311,08997 (21,18269% of viewport)
[02:58:18] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:58:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(434.6001, 608.5955), shooter_id=2650850462649, bullet_pos=(487.9667, 685.8011)
[02:58:18] [INFO] [Bullet] Using shooter_position, distance=93.8546981811523
[02:58:18] [INFO] [Bullet] Distance to wall: 93.8546981811523 (6.39073898272659% of viewport)
[02:58:18] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:58:18] [ENEMY] [Enemy2] Hit taken, health: 2/3
[02:58:18] [ENEMY] [Enemy2] Hit taken, health: 1/3
[02:58:18] [ENEMY] [Enemy2] Hit taken, health: 0/3
[02:58:18] [ENEMY] [Enemy2] Enemy died (ricochet: false, penetration: false)
[02:58:18] [INFO] [ScoreManager] Kill registered. Combo: 3 (points: 3000)
[02:58:18] [INFO] [SoundPropagation] Unregistered listener: Enemy2 (remaining: 7)
[02:58:18] [INFO] [DeathAnim] Started - Angle: 0.0 deg, Index: 12
[02:58:18] [ENEMY] [Enemy2] Death animation started with hit direction: (1, 0)
[02:58:18] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[02:58:18] [ENEMY] [Enemy1] Player reloading state changed: false -> true
[02:58:18] [ENEMY] [Enemy2] Player reloading state changed: false -> true
[02:58:18] [ENEMY] [Enemy3] Player reloading state changed: false -> true
[02:58:18] [ENEMY] [Enemy4] Player reloading state changed: false -> true
[02:58:18] [ENEMY] [Enemy5] Player reloading state changed: false -> true
[02:58:18] [ENEMY] [Enemy6] Player reloading state changed: false -> true
[02:58:18] [ENEMY] [Enemy7] Player reloading state changed: false -> true
[02:58:18] [ENEMY] [Enemy8] Player reloading state changed: false -> true
[02:58:18] [ENEMY] [Enemy9] Player reloading state changed: false -> true
[02:58:18] [ENEMY] [Enemy10] Player reloading state changed: false -> true
[02:58:18] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(290.002, 209.9871), source=PLAYER (Player), range=900, listeners=7
[02:58:18] [ENEMY] [Enemy1] Heard player RELOAD at (290.002, 209.9871), intensity=0.07, distance=193
[02:58:18] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=6, self=0, below_threshold=0
[02:58:18] [ENEMY] [Enemy1] Player vulnerable (reloading) but cannot attack: close=true (dist=193), can_see=false
[02:58:18] [ENEMY] [Enemy5] Player vulnerable (reloading) but cannot attack: close=false (dist=1417), can_see=false
[02:58:18] [ENEMY] [Enemy6] Player vulnerable (reloading) but cannot attack: close=false (dist=1677), can_see=false
[02:58:18] [ENEMY] [Enemy7] Player vulnerable (reloading) but cannot attack: close=false (dist=1566), can_see=false
[02:58:18] [ENEMY] [Enemy8] Player vulnerable (reloading) but cannot attack: close=false (dist=2032), can_see=false
[02:58:18] [ENEMY] [Enemy9] Player vulnerable (reloading) but cannot attack: close=false (dist=2252), can_see=false
[02:58:18] [ENEMY] [Enemy10] Player vulnerable (reloading) but cannot attack: close=false (dist=1462), can_see=false
[02:58:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(568.2392, 770.8101), shooter_id=2653954248239, bullet_pos=(717.0418, 1002.0735)
[02:58:18] [INFO] [Bullet] Using shooter_position, distance=274,99994
[02:58:18] [INFO] [Bullet] Distance to wall: 274,99994 (18,725252% of viewport)
[02:58:18] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:58:18] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(167.72037, 302.78314), shooter_id=2653954248239, bullet_pos=(502.4879, 371.0973)
[02:58:18] [INFO] [Bullet] Using shooter_position, distance=341,6667
[02:58:18] [INFO] [Bullet] Distance to wall: 341,6667 (23,264713% of viewport)
[02:58:18] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:58:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(611.6685, 853.8249), shooter_id=2651420888472, bullet_pos=(412.519, 705.0885)
[02:58:19] [INFO] [Bullet] Using shooter_position, distance=248.561904907227
[02:58:19] [INFO] [Bullet] Distance to wall: 248.561904907227 (16.9250371701732% of viewport)
[02:58:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:58:19] [INFO] [Player.Reload.Anim] LeftArm: pos=(7.8934846, 2.7901232), target=(4, 2), base=(24, 6)
[02:58:19] [INFO] [Player.Reload.Anim] RightArm: pos=(-1.9428681, 6), target=(-2, 6), base=(-2, 6)
[02:58:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(143.11879, 331.0929), shooter_id=2653954248239, bullet_pos=(516.1459, 369.50894)
[02:58:19] [INFO] [Bullet] Using shooter_position, distance=375,00003
[02:58:19] [INFO] [Bullet] Distance to wall: 375,00003 (25,534443% of viewport)
[02:58:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:58:19] [INFO] [Bullet] Starting wall penetration at (516.1459, 369.50894)
[02:58:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(132.3402, 365.12823), shooter_id=2653954248239, bullet_pos=(507.23425, 356.21802)
[02:58:19] [INFO] [Bullet] Using shooter_position, distance=374,9999
[02:58:19] [INFO] [Bullet] Distance to wall: 374,9999 (25,534433% of viewport)
[02:58:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:58:19] [INFO] [Bullet] Starting wall penetration at (507.23425, 356.21802)
[02:58:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(586.7535, 701.73303), shooter_id=2653954248239, bullet_pos=(322.09903, 436.05823)
[02:58:19] [INFO] [Bullet] Using shooter_position, distance=375,0001
[02:58:19] [INFO] [Bullet] Distance to wall: 375,0001 (25,534449% of viewport)
[02:58:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:58:19] [INFO] [Bullet] Starting wall penetration at (322.09903, 436.05823)
[02:58:19] [INFO] [Bullet] Raycast backward hit penetrating body at distance 24,136127
[02:58:19] [INFO] [Bullet] Raycast backward hit penetrating body at distance 21,56285
[02:58:19] [INFO] [Bullet] Raycast backward hit penetrating body at distance 30,437662
[02:58:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(610.5878, 727.06055), shooter_id=2653954248239, bullet_pos=(328.34064, 431.97992)
[02:58:19] [INFO] [Bullet] Using shooter_position, distance=408,33328
[02:58:19] [INFO] [Bullet] Distance to wall: 408,33328 (27,804167% of viewport)
[02:58:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:58:19] [INFO] [Bullet] Body exited signal received for penetrating body
[02:58:19] [INFO] [Bullet] Exiting penetration at (554.2775, 373.4359) after traveling 33,333336 pixels through wall
[02:58:19] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[02:58:19] [INFO] [Bullet] Body exited signal received for penetrating body
[02:58:19] [INFO] [Bullet] Exiting penetration at (545.55676, 355.3072) after traveling 33,333336 pixels through wall
[02:58:19] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[02:58:19] [INFO] [Bullet] Body exited signal received for penetrating body
[02:58:19] [INFO] [Bullet] Exiting penetration at (295.04547, 408.90036) after traveling 33,333336 pixels through wall
[02:58:19] [INFO] [Bullet] Damage multiplier after penetration: 0,9
[02:58:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(549.4981, 749.0771), shooter_id=2653954248239, bullet_pos=(912.54205, 796.0007)
[02:58:19] [INFO] [Bullet] Using shooter_position, distance=366,06384
[02:58:19] [INFO] [Bullet] Distance to wall: 366,06384 (24,92596% of viewport)
[02:58:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:58:19] [INFO] [Bullet] Starting wall penetration at (912.54205, 796.0007)
[02:58:19] [ENEMY] [Enemy1] State: COMBAT -> PURSUING
[02:58:19] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[02:58:19] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[02:58:19] [INFO] [Bullet] Exiting penetration at (934.90125, 771.2787) after traveling 28,333334 pixels through wall
[02:58:19] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[02:58:19] [ENEMY] [Enemy1] Pursuing vulnerability sound at (290.002, 209.9871), distance=193
[02:58:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(610.5878, 727.06055), shooter_id=2653954248239, bullet_pos=(499.70584, 200.096)
[02:58:19] [INFO] [Bullet] Using shooter_position, distance=538,5039
[02:58:19] [INFO] [Bullet] Distance to wall: 538,5039 (36,66772% of viewport)
[02:58:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:58:19] [INFO] [Bullet] Starting wall penetration at (499.70584, 200.096)
[02:58:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(568.2392, 770.8101), shooter_id=2653954248239, bullet_pos=(916.2254, 653.27295)
[02:58:19] [INFO] [Bullet] Using shooter_position, distance=367,30014
[02:58:19] [INFO] [Bullet] Distance to wall: 367,30014 (25,010141% of viewport)
[02:58:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:58:19] [INFO] [Player.Reload.Anim] Phase changed to: PullBolt (duration: 0,35s)
[02:58:19] [ENEMY] [Enemy1] Player reloading state changed: true -> false
[02:58:19] [ENEMY] [Enemy2] Player reloading state changed: true -> false
[02:58:19] [ENEMY] [Enemy3] Player reloading state changed: true -> false
[02:58:19] [ENEMY] [Enemy4] Player reloading state changed: true -> false
[02:58:19] [ENEMY] [Enemy5] Player reloading state changed: true -> false
[02:58:19] [ENEMY] [Enemy6] Player reloading state changed: true -> false
[02:58:19] [ENEMY] [Enemy7] Player reloading state changed: true -> false
[02:58:19] [ENEMY] [Enemy8] Player reloading state changed: true -> false
[02:58:19] [ENEMY] [Enemy9] Player reloading state changed: true -> false
[02:58:19] [ENEMY] [Enemy10] Player reloading state changed: true -> false
[02:58:19] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[02:58:19] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[02:58:19] [INFO] [Bullet] Exiting penetration at (519.51685, 173.28862) after traveling 28,333334 pixels through wall
[02:58:19] [INFO] [Bullet] Damage multiplier after penetration: 0,45
[02:58:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(611.6685, 853.8249), shooter_id=2651420888472, bullet_pos=(53.99442, 942.4913)
[02:58:19] [INFO] [Bullet] Using shooter_position, distance=564.678771972656
[02:58:19] [INFO] [Bullet] Distance to wall: 564.678771972656 (38.4500159363202% of viewport)
[02:58:19] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:58:19] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[02:58:19] [ENEMY] [Enemy3] Ragdoll activated
[02:58:19] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[02:58:19] [ENEMY] [Enemy4] Ragdoll activated
[02:58:19] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[02:58:19] [ENEMY] [Enemy2] Ragdoll activated
[02:58:19] [INFO] [DeathAnim] Ragdoll activated at 60% fall progress
[02:58:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(568.2392, 770.8101), shooter_id=2653954248239, bullet_pos=(427.84875, 50.656006)
[02:58:19] [INFO] [Bullet] Using shooter_position, distance=733,71075
[02:58:19] [INFO] [Bullet] Distance to wall: 733,71075 (49,959717% of viewport)
[02:58:19] [INFO] [LastChance] Threat detected: @Area2D@2445
[02:58:19] [INFO] [LastChance] Effect already used this life
[02:58:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:58:19] [ENEMY] [Enemy1] State: PURSUING -> COMBAT
[02:58:19] [ENEMY] [Enemy1] State: COMBAT -> RETREATING
[02:58:19] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:58:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(187.4182, 229.6868), source=ENEMY (Enemy1), range=1469, listeners=7
[02:58:19] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=6, self=1, below_threshold=0
[02:58:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(255.282, 224.6761), shooter_id=2650565249884, bullet_pos=(255.282, 224.6761)
[02:58:19] [INFO] [Bullet] Using shooter_position, distance=0
[02:58:19] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[02:58:19] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[02:58:19] [INFO] [Bullet] Starting wall penetration at (255.282, 224.6761)
[02:58:19] [INFO] [LastChance] Threat detected: Bullet
[02:58:19] [INFO] [LastChance] Effect already used this life
[02:58:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:58:19] [INFO] [Bullet] Raycast backward hit penetrating body at distance 45.3955497741699
[02:58:19] [INFO] [Bullet] Body exited signal received for penetrating body
[02:58:19] [INFO] [Bullet] Exiting penetration at (292.9357, 217.4901) after traveling 33.3333358764648 pixels through wall
[02:58:19] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:58:19] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[02:58:19] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[02:58:19] [INFO] [PenultimateHit] Player died - ending penultimate effect
[02:58:19] [INFO] [LastChance] Player died
[02:58:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(182.8227, 233.4708), source=ENEMY (Enemy1), range=1469, listeners=7
[02:58:19] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=6, self=1, below_threshold=0
[02:58:19] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(297.682, 215.9871), source=PLAYER (AssaultRifle), range=1469, listeners=7
[02:58:19] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=4, self=0, below_threshold=2
[02:58:19] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(250.5972, 227.371), shooter_id=2650565249884, bullet_pos=(250.5972, 227.371)
[02:58:19] [INFO] [Bullet] Using shooter_position, distance=0
[02:58:19] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[02:58:19] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[02:58:19] [INFO] [Bullet] Starting wall penetration at (250.5972, 227.371)
[02:58:19] [INFO] [LastChance] Threat detected: Bullet
[02:58:19] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:58:19] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:58:19] [INFO] [Bullet] Raycast backward hit penetrating body at distance 34.8853569030762
[02:58:19] [INFO] [Bullet] Body exited signal received for penetrating body
[02:58:19] [INFO] [Bullet] Exiting penetration at (285.7697, 212.1283) after traveling 33.3333358764648 pixels through wall
[02:58:19] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:58:19] [ENEMY] [Enemy1] Player distracted - priority attack triggered
[02:58:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(180.7883, 239.5376), source=ENEMY (Enemy1), range=1469, listeners=7
[02:58:20] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=6, self=1, below_threshold=0
[02:58:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(248.3079, 231.0702), shooter_id=2650565249884, bullet_pos=(248.3079, 231.0702)
[02:58:20] [INFO] [Bullet] Using shooter_position, distance=0
[02:58:20] [INFO] [Bullet] Distance to wall: 0 (0% of viewport)
[02:58:20] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[02:58:20] [INFO] [Bullet] Starting wall penetration at (248.3079, 231.0702)
[02:58:20] [INFO] [LastChance] Threat detected: Bullet
[02:58:20] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:58:20] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:58:20] [INFO] [Bullet] Raycast backward hit penetrating body at distance 16.9711780548096
[02:58:20] [INFO] [Bullet] Body exited signal received for penetrating body
[02:58:20] [INFO] [Bullet] Exiting penetration at (285.5459, 221.972) after traveling 33.3333320617676 pixels through wall
[02:58:20] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:58:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(319.0154, 215.9871), source=PLAYER (AssaultRifle), range=1469, listeners=7
[02:58:20] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=3
[02:58:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(297.682, 215.98706), shooter_id=2653954248239, bullet_pos=(57.850338, 50.00454)
[02:58:20] [INFO] [Bullet] Using shooter_position, distance=291,66663
[02:58:20] [INFO] [Bullet] Distance to wall: 291,66663 (19,860117% of viewport)
[02:58:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:58:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(297.682, 215.98706), shooter_id=2653954248239, bullet_pos=(53.49796, 52.4656)
[02:58:20] [INFO] [Bullet] Using shooter_position, distance=293,87943
[02:58:20] [INFO] [Bullet] Distance to wall: 293,87943 (20,010792% of viewport)
[02:58:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:58:20] [ENEMY] [Enemy1] State: RETREATING -> IN_COVER
[02:58:20] [ENEMY] [Enemy10] State: SUPPRESSED -> IN_COVER
[02:58:20] [ENEMY] [Enemy1] State: IN_COVER -> SUPPRESSED
[02:58:20] [ENEMY] [Enemy10] State: IN_COVER -> PURSUING
[02:58:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(352.4166, 216.4089), source=PLAYER (AssaultRifle), range=1469, listeners=7
[02:58:20] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=3
[02:58:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(319.01538, 215.98706), shooter_id=2653954248239, bullet_pos=(77.66377, 52.22248)
[02:58:20] [INFO] [Bullet] Using shooter_position, distance=291,66666
[02:58:20] [INFO] [Bullet] Distance to wall: 291,66666 (19,86012% of viewport)
[02:58:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:58:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(319.01538, 215.98706), shooter_id=2653954248239, bullet_pos=(51.376266, 72.71829)
[02:58:20] [INFO] [Bullet] Using shooter_position, distance=303,5731
[02:58:20] [INFO] [Bullet] Distance to wall: 303,5731 (20,67085% of viewport)
[02:58:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:58:20] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(387.6165, 216.4089), source=PLAYER (AssaultRifle), range=1469, listeners=7
[02:58:20] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=3
[02:58:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(352.41656, 216.40894), shooter_id=2653954248239, bullet_pos=(61.480278, 71.56041)
[02:58:20] [INFO] [Bullet] Using shooter_position, distance=325,00003
[02:58:20] [INFO] [Bullet] Distance to wall: 325,00003 (22,12985% of viewport)
[02:58:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:58:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(352.41656, 216.40894), shooter_id=2653954248239, bullet_pos=(92.458694, 59.253952)
[02:58:20] [INFO] [Bullet] Using shooter_position, distance=303,76932
[02:58:20] [INFO] [Bullet] Distance to wall: 303,76932 (20,684212% of viewport)
[02:58:20] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:58:20] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(319.01538, 215.98706), shooter_id=2653954248239, bullet_pos=(267.13477, 234.90115)
[02:58:20] [INFO] [Bullet] Using shooter_position, distance=55,22084
[02:58:20] [INFO] [Bullet] Distance to wall: 55,22084 (3,7600887% of viewport)
[02:58:20] [INFO] [Bullet] Point-blank shot - 100% penetration, ignoring ricochet
[02:58:20] [INFO] [Bullet] Starting wall penetration at (267.13477, 234.90115)
[02:58:20] [INFO] [Bullet] No longer inside obstacle - raycasts found no collision with penetrating body
[02:58:20] [INFO] [Bullet] Exiting penetration at (290.3826, 252.37625) after traveling 24,083334 pixels through wall
[02:58:20] [INFO] [Bullet] Damage multiplier after penetration: 0,225
[02:58:20] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[02:58:20] [INFO] [LastChance] Resetting all effects (scene change detected)
[02:58:20] [ENEMY] [Enemy1] Death animation component initialized
[02:58:20] [ENEMY] [Enemy2] Death animation component initialized
[02:58:20] [ENEMY] [Enemy3] Death animation component initialized
[02:58:20] [ENEMY] [Enemy4] Death animation component initialized
[02:58:20] [ENEMY] [Enemy5] Death animation component initialized
[02:58:20] [ENEMY] [Enemy6] Death animation component initialized
[02:58:20] [ENEMY] [Enemy7] Death animation component initialized
[02:58:20] [ENEMY] [Enemy8] Death animation component initialized
[02:58:20] [ENEMY] [Enemy9] Death animation component initialized
[02:58:20] [ENEMY] [Enemy10] Death animation component initialized
[02:58:20] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[02:58:20] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[02:58:20] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[02:58:20] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[02:58:20] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[02:58:20] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[02:58:20] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[02:58:20] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 3/4
[02:58:20] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[02:58:20] [ENEMY] [Enemy10] Grenade system configured: offensive=2, flashbangs=0
[02:58:20] [INFO] [ScoreManager] Level started with 10 enemies
[02:58:20] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 8)
[02:58:20] [ENEMY] [Enemy1] Registered as sound listener
[02:58:20] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 4, behavior: GUARD, player_found: yes
[02:58:20] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 9)
[02:58:20] [ENEMY] [Enemy2] Registered as sound listener
[02:58:20] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 2, behavior: GUARD, player_found: yes
[02:58:20] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 10)
[02:58:20] [ENEMY] [Enemy3] Registered as sound listener
[02:58:20] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[02:58:20] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 11)
[02:58:20] [ENEMY] [Enemy4] Registered as sound listener
[02:58:20] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[02:58:20] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 12)
[02:58:20] [ENEMY] [Enemy5] Registered as sound listener
[02:58:20] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 3, behavior: GUARD, player_found: yes
[02:58:20] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 13)
[02:58:20] [ENEMY] [Enemy6] Registered as sound listener
[02:58:20] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[02:58:20] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 14)
[02:58:20] [ENEMY] [Enemy7] Registered as sound listener
[02:58:20] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[02:58:20] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 15)
[02:58:20] [ENEMY] [Enemy8] Registered as sound listener
[02:58:20] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 4, behavior: GUARD, player_found: yes
[02:58:20] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 16)
[02:58:20] [ENEMY] [Enemy9] Registered as sound listener
[02:58:20] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 3, behavior: GUARD, player_found: yes
[02:58:20] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 17)
[02:58:20] [ENEMY] [Enemy10] Registered as sound listener
[02:58:20] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 2, behavior: PATROL, player_found: yes
[02:58:20] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[02:58:20] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[02:58:20] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[02:58:20] [INFO] [LastChance] Found player: Player
[02:58:20] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[02:58:20] [INFO] [LastChance] Connected to player Damaged signal (C#)
[02:58:20] [INFO] [LastChance] Connected to player Died signal (C#)
[02:58:20] [INFO] [Player] Detecting weapon pose (frame 3)...
[02:58:20] [INFO] [Player] Detected weapon: Rifle (default pose)
[02:58:20] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[02:58:21] [ENEMY] [Enemy10] State: IDLE -> COMBAT
[02:58:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1144.033, 1518.986), source=ENEMY (Enemy10), range=1469, listeners=17
[02:58:22] [INFO] [SoundPropagation] Cleaned up 7 invalid listeners
[02:58:22] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:58:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1112.179, 1499.517), source=ENEMY (Enemy10), range=1469, listeners=10
[02:58:22] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:58:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(513.2784, 1133.911), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:58:22] [ENEMY] [Enemy3] Heard gunshot at (513.2784, 1133.911), source_type=0, intensity=0.01, distance=427
[02:58:22] [ENEMY] [Enemy4] Heard gunshot at (513.2784, 1133.911), source_type=0, intensity=0.02, distance=370
[02:58:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=6
[02:58:22] [INFO] [LastChance] Threat detected: Bullet
[02:58:22] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:58:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:58:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1080.424, 1479.885), source=ENEMY (Enemy10), range=1469, listeners=10
[02:58:22] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:58:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(496.4714, 1135.471), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:58:22] [INFO] [SoundPropagation] Sound result: notified=2, out_of_range=2, self=0, below_threshold=6
[02:58:22] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 2.0
[02:58:22] [INFO] [LastChance] Player health updated (C# Damaged): 2.0
[02:58:22] [INFO] [LastChance] Threat detected: @Area2D@2799
[02:58:22] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:58:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:58:22] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1048.313, 1460.844), source=ENEMY (Enemy10), range=1469, listeners=10
[02:58:22] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=0, self=1, below_threshold=9
[02:58:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(513.2784, 1133.9111), shooter_id=3001880153776, bullet_pos=(1024.096, 1379.2208)
[02:58:22] [INFO] [Bullet] Using shooter_position, distance=566,66693
[02:58:22] [INFO] [Bullet] Distance to wall: 566,66693 (38,585396% of viewport)
[02:58:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:58:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(496.47137, 1135.4714), shooter_id=3001880153776, bullet_pos=(1010.71814, 1373.5079)
[02:58:22] [INFO] [Bullet] Using shooter_position, distance=566,6667
[02:58:22] [INFO] [Bullet] Distance to wall: 566,6667 (38,585377% of viewport)
[02:58:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:58:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(496.47137, 1135.4714), shooter_id=3001880153776, bullet_pos=(1014.86194, 1370.7098)
[02:58:22] [INFO] [Bullet] Using shooter_position, distance=569,2678
[02:58:22] [INFO] [Bullet] Distance to wall: 569,2678 (38,762493% of viewport)
[02:58:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:58:22] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[02:58:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1050.618, 1470.505), shooter_id=3001058070143, bullet_pos=(59.23778, 855.4645)
[02:58:22] [INFO] [Bullet] Using shooter_position, distance=1166.666015625
[02:58:22] [INFO] [Bullet] Distance to wall: 1166.666015625 (79.4404343135404% of viewport)
[02:58:22] [ENEMY] [Enemy3] State: COMBAT -> PURSUING
[02:58:22] [ENEMY] [Enemy4] State: COMBAT -> PURSUING
[02:58:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1018.651, 1451.39), shooter_id=3001058070143, bullet_pos=(57.86873, 866.1345)
[02:58:22] [INFO] [Bullet] Using shooter_position, distance=1125.00073242188
[02:58:22] [INFO] [Bullet] Distance to wall: 1125.00073242188 (76.6033685645396% of viewport)
[02:58:22] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
[02:58:22] [ENEMY] [Enemy10] State: IN_COVER -> SUPPRESSED
[02:58:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(496.47137, 1135.4714), shooter_id=3001880153776, bullet_pos=(631.4737, 1024.2051)
[02:58:22] [INFO] [Bullet] Using shooter_position, distance=174,94522
[02:58:22] [INFO] [Bullet] Distance to wall: 174,94522 (11,912342% of viewport)
[02:58:22] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:58:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1050.618, 1470.505), shooter_id=3001058070143, bullet_pos=(384.8547, 703.8915)
[02:58:22] [INFO] [Bullet] Using shooter_position, distance=1015.35040283203
[02:58:22] [INFO] [Bullet] Distance to wall: 1015.35040283203 (69.1370759935902% of viewport)
[02:58:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(985.6732, 1434.38), shooter_id=3001058070143, bullet_pos=(42.68439, 901.1041)
[02:58:22] [INFO] [Bullet] Using shooter_position, distance=1083.33337402344
[02:58:22] [INFO] [Bullet] Distance to wall: 1083.33337402344 (73.766161511674% of viewport)
[02:58:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1018.651, 1451.39), shooter_id=3001058070143, bullet_pos=(259.2683, 713.1475)
[02:58:22] [INFO] [Bullet] Using shooter_position, distance=1059.08654785156
[02:58:22] [INFO] [Bullet] Distance to wall: 1059.08654785156 (72.1151505316492% of viewport)
[02:58:22] [INFO] [LastChance] Threat detected: @Area2D@2805
[02:58:22] [INFO] [LastChance] Player health is 2.0 - effect requires exactly 1 HP or less but alive
[02:58:22] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:58:22] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1050.618, 1470.505), shooter_id=3001058070143, bullet_pos=(682.462, 860.1732)
[02:58:22] [INFO] [Bullet] Using shooter_position, distance=712.771667480469
[02:58:22] [INFO] [Bullet] Distance to wall: 712.771667480469 (48.5339335102695% of viewport)
[02:58:22] [ENEMY] [Enemy4] State: PURSUING -> RETREATING
[02:58:22] [ENEMY] [Enemy4] State: RETREATING -> IN_COVER
[02:58:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(985.6732, 1434.38), shooter_id=3001058070143, bullet_pos=(385.562, 705.8323)
[02:58:23] [INFO] [Bullet] Using shooter_position, distance=943.883239746094
[02:58:23] [INFO] [Bullet] Distance to wall: 943.883239746094 (64.2707454425439% of viewport)
[02:58:23] [ENEMY] [Enemy3] Hit taken, health: 1/2
[02:58:23] [ENEMY] [Enemy4] State: IN_COVER -> SUPPRESSED
[02:58:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1018.651, 1451.39), shooter_id=3001058070143, bullet_pos=(508.1738, 939.068)
[02:58:23] [INFO] [Bullet] Using shooter_position, distance=723.2294921875
[02:58:23] [INFO] [Bullet] Distance to wall: 723.2294921875 (49.2460260248153% of viewport)
[02:58:23] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 1.0
[02:58:23] [INFO] [PenultimateHit] Hard mode active - skipping regular penultimate hit effect (using last chance instead)
[02:58:23] [INFO] [LastChance] Player health updated (C# Damaged): 1.0
[02:58:23] [ENEMY] [Enemy3] State: PURSUING -> RETREATING
[02:58:23] [ENEMY] [Enemy3] State: RETREATING -> IN_COVER
[02:58:23] [ENEMY] [Enemy3] State: IN_COVER -> SUPPRESSED
[02:58:23] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(985.6732, 1434.38), shooter_id=3001058070143, bullet_pos=(688.6222, 851.2569)
[02:58:23] [INFO] [Bullet] Using shooter_position, distance=654.425048828125
[02:58:23] [INFO] [Bullet] Distance to wall: 654.425048828125 (44.5610049562603% of viewport)
[02:58:23] [INFO] [Bullet] Distance-based penetration chance: 94.6788275510296%
[02:58:23] [INFO] [Bullet] Starting wall penetration at (688.6222, 851.2569)
[02:58:23] [INFO] [LastChance] Threat detected: @Area2D@2803
[02:58:23] [INFO] [LastChance] Triggering last chance effect!
[02:58:23] [INFO] [LastChance] Starting last chance effect:
[02:58:23] [INFO] [LastChance]   - Time will be frozen (except player)
[02:58:23] [INFO] [LastChance]   - Duration: 6.0 real seconds
[02:58:23] [INFO] [LastChance]   - Sepia intensity: 0.70
[02:58:23] [INFO] [LastChance]   - Brightness: 0.60
[02:58:23] [INFO] [LastChance] Pushed bullet @Area2D@2803 from distance 143.6 to 200.0
[02:58:23] [INFO] [LastChance] Pushed 1 threatening bullets away from player
[02:58:23] [INFO] [LastChance] Set player Player and all 18 children to PROCESS_MODE_ALWAYS
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'WallTop' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'WallRight' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'Room1_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'Room1_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'Room2_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'Room2_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'Room2_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'Corridor_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'Room3_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'Room3_WallBottom' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'Room4_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'Room4_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'Room5_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'Room5_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Left' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'LobbyDivider_Right' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallLeft' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallRight' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'MainHall_WallTop' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBL' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'Room2_CornerBR' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'Corridor_CornerBR' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTL' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'MainHall_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'StorageRoom_CornerTR' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'Desk1' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'Desk2' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'Table1' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'Cabinet1' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'Cabinet2' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'Desk3' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'Desk4' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'Table2' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'Table3' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'Cabinet3' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'StorageCrate1' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'StorageCrate2' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Set StaticBody2D 'HallTable' to PROCESS_MODE_ALWAYS for collision
[02:58:23] [INFO] [LastChance] Skipping player node: Player
[02:58:23] [INFO] [Bullet] Body exited signal received for penetrating body
[02:58:23] [INFO] [Bullet] Exiting penetration at (693.1301, 853.42) after traveling 0 pixels through wall
[02:58:23] [INFO] [Bullet] Damage multiplier after penetration: 0.225
[02:58:23] [INFO] [LastChance] Froze all nodes except player and autoloads (including GameManager for quick restart)
[02:58:23] [INFO] [LastChance] Applied visual effects: sepia=0.70, brightness=0.60, ripple=0.0080
[02:58:23] [INFO] [LastChance] Applied 4.0x saturation to 6 player sprites
[02:58:27] [INFO] [LastChance] Freezing newly fired player bullet: Bullet
[02:58:27] [INFO] [LastChance] Registered frozen player bullet: Bullet
[02:58:27] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1007.284, 1691.842), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:58:27] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=0, below_threshold=6
[02:58:28] [INFO] [Player.Reload.Anim] Phase changed to: GrabMagazine (duration: 0,25s)
[02:58:28] [ENEMY] [Enemy1] Player reloading state changed: false -> true
[02:58:28] [ENEMY] [Enemy2] Player reloading state changed: false -> true
[02:58:28] [ENEMY] [Enemy3] Player reloading state changed: false -> true
[02:58:28] [ENEMY] [Enemy4] Player reloading state changed: false -> true
[02:58:28] [ENEMY] [Enemy5] Player reloading state changed: false -> true
[02:58:28] [ENEMY] [Enemy6] Player reloading state changed: false -> true
[02:58:28] [ENEMY] [Enemy7] Player reloading state changed: false -> true
[02:58:28] [ENEMY] [Enemy8] Player reloading state changed: false -> true
[02:58:28] [ENEMY] [Enemy9] Player reloading state changed: false -> true
[02:58:28] [ENEMY] [Enemy10] Player reloading state changed: false -> true
[02:58:28] [INFO] [SoundPropagation] Sound emitted: type=RELOAD, pos=(1246.91, 1690.065), source=PLAYER (Player), range=900, listeners=10
[02:58:28] [ENEMY] [Enemy10] Heard player RELOAD at (1246.91, 1690.065), intensity=0.02, distance=384
[02:58:28] [ENEMY] [Enemy10] Vulnerability sound triggered pursuit - transitioning from SUPPRESSED to PURSUING
[02:58:28] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=7, self=0, below_threshold=2
[02:58:28] [INFO] [Player.Reload.Anim] Phase changed to: InsertMagazine (duration: 0,30s)
[02:58:29] [INFO] [Player.Reload.Anim] LeftArm: pos=(11.436874, 5.706564), target=(12, 6), base=(24, 6)
[02:58:29] [INFO] [Player.Reload.Anim] RightArm: pos=(-2.0030375, 7.8498306), target=(-2, 8), base=(-2, 6)
[02:58:29] [INFO] [Player.Reload.Anim] Phase changed to: PullBolt (duration: 0,35s)
[02:58:29] [ENEMY] [Enemy1] Player reloading state changed: true -> false
[02:58:29] [ENEMY] [Enemy2] Player reloading state changed: true -> false
[02:58:29] [ENEMY] [Enemy3] Player reloading state changed: true -> false
[02:58:29] [ENEMY] [Enemy4] Player reloading state changed: true -> false
[02:58:29] [ENEMY] [Enemy5] Player reloading state changed: true -> false
[02:58:29] [ENEMY] [Enemy6] Player reloading state changed: true -> false
[02:58:29] [ENEMY] [Enemy7] Player reloading state changed: true -> false
[02:58:29] [ENEMY] [Enemy8] Player reloading state changed: true -> false
[02:58:29] [ENEMY] [Enemy9] Player reloading state changed: true -> false
[02:58:29] [ENEMY] [Enemy10] Player reloading state changed: true -> false
[02:58:29] [INFO] [Player.Reload.Anim] Phase changed to: ReturnIdle (duration: 0,20s)
[02:58:29] [INFO] [LastChance] Effect duration expired after 6.02 real seconds
[02:58:29] [INFO] [LastChance] Ending last chance effect
[02:58:29] [INFO] [LastChance] All process modes restored
[02:58:29] [INFO] [LastChance] Unfroze player bullet: Bullet
[02:58:29] [INFO] [LastChance] Restored original colors to 5 player sprites
[02:58:29] [INFO] [LastChance] Called player RefreshHealthVisual (C#)
[02:58:29] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[02:58:29] [ENEMY] [Enemy10] Pursuing vulnerability sound at (1246.91, 1690.065), distance=384
[02:58:29] [INFO] [Player.Reload.Anim] Animation complete, returning to normal
[02:58:29] [ENEMY] [Enemy10] Hit taken, health: 1/2
[02:58:29] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[02:58:29] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[02:58:29] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[02:58:29] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[02:58:29] [ENEMY] [Enemy7] State: COMBAT -> PURSUING
[02:58:30] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[02:58:30] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[02:58:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1598.951, 1038.549), source=ENEMY (Enemy7), range=1469, listeners=10
[02:58:30] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[02:58:30] [ENEMY] [Enemy10] Pursuing vulnerability sound at (1246.91, 1690.065), distance=153
[02:58:30] [ENEMY] [Enemy10] State: PURSUING -> COMBAT
[02:58:30] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[02:58:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1598.951, 1038.549), source=ENEMY (Enemy7), range=1469, listeners=10
[02:58:30] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[02:58:30] [ENEMY] [Enemy10] State: COMBAT -> RETREATING
[02:58:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1309.522, 1694.882), source=PLAYER (AssaultRifle), range=1469, listeners=10
[02:58:30] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=0, below_threshold=8
[02:58:30] [ENEMY] [Enemy6] Player distracted - priority attack triggered
[02:58:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1950, 450), source=ENEMY (Enemy6), range=1469, listeners=10
[02:58:30] [ENEMY] [Enemy5] Heard gunshot at (1950, 450), source_type=1, intensity=0.03, distance=269
[02:58:30] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=3, self=1, below_threshold=5
[02:58:30] [ENEMY] [Enemy7] State: PURSUING -> COMBAT
[02:58:30] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[02:58:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1597.342, 1051.016), source=ENEMY (Enemy7), range=1469, listeners=10
[02:58:30] [INFO] [SoundPropagation] Sound result: notified=0, out_of_range=1, self=1, below_threshold=8
[02:58:30] [ENEMY] [Enemy10] State: RETREATING -> IN_COVER
[02:58:30] [ENEMY] [Enemy10] Grenade trigger: critical health (1 HP)
[02:58:30] [ENEMY] [Enemy10] Preparing to throw frag grenade at (1346.583, 1672.129)
[02:58:30] [ENEMY] [Enemy10] State: IN_COVER -> THROWING_GRENADE
[02:58:30] [ENEMY] [Enemy6] Player distracted - priority attack triggered
[02:58:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1936.655, 476.7192), source=ENEMY (Enemy6), range=1469, listeners=10
[02:58:30] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=6
[02:58:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1309.5222, 1694.8823), shooter_id=3001880153776, bullet_pos=(888.8656, 1755.4868)
[02:58:30] [INFO] [Bullet] Using shooter_position, distance=424,99988
[02:58:30] [INFO] [Bullet] Distance to wall: 424,99988 (28,939024% of viewport)
[02:58:30] [INFO] [Bullet] Within ricochet range - trying ricochet first
[02:58:30] [INFO] [LastChance] Threat detected: @Area2D@2822
[02:58:30] [INFO] [LastChance] Effect already used this life
[02:58:30] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:58:30] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[02:58:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1584.59, 1082.677), source=ENEMY (Enemy7), range=1469, listeners=10
[02:58:30] [ENEMY] [Enemy8] Heard gunshot at (1584.59, 1082.677), source_type=1, intensity=0.01, distance=484
[02:58:30] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
[02:58:30] [ENEMY] [Enemy6] Player distracted - priority attack triggered
[02:58:30] [INFO] [LastChance] Threat detected: @Area2D@2828
[02:58:30] [INFO] [LastChance] Effect already used this life
[02:58:30] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:58:30] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[02:58:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1572.429, 1114.57), source=ENEMY (Enemy7), range=1469, listeners=10
[02:58:30] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
[02:58:30] [INFO] [PenultimateHit] Player damaged: 1.0 damage, current health: 0.0
[02:58:30] [INFO] [LastChance] Player health updated (C# Damaged): 0.0
[02:58:30] [INFO] [PenultimateHit] Player died - ending penultimate effect
[02:58:30] [INFO] [LastChance] Player died
[02:58:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1575.697, 1102.501), shooter_id=3000202430358, bullet_pos=(1083.787, 2086.383)
[02:58:30] [INFO] [Bullet] Using shooter_position, distance=1099.99914550781
[02:58:30] [INFO] [Bullet] Distance to wall: 1099.99914550781 (74.9009645376966% of viewport)
[02:58:30] [INFO] [Bullet] Distance-based penetration chance: 59.2822080393539%
[02:58:30] [INFO] [Bullet] Starting wall penetration at (1083.787, 2086.383)
[02:58:30] [INFO] [Bullet] Raycast backward hit penetrating body at distance 27.5809383392334
[02:58:30] [INFO] [Bullet] Body exited signal received for penetrating body
[02:58:30] [INFO] [Bullet] Exiting penetration at (1066.645, 2120.669) after traveling 33.3333358764648 pixels through wall
[02:58:30] [INFO] [Bullet] Damage multiplier after penetration: 0.9
[02:58:30] [INFO] [LastChance] Threat detected: @Area2D@2832
[02:58:30] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:58:30] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:58:30] [ENEMY] [Enemy6] Player distracted - priority attack triggered
[02:58:30] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[02:58:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1560.309, 1146.479), source=ENEMY (Enemy7), range=1469, listeners=10
[02:58:30] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
[02:58:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1578.268, 1103.378), shooter_id=3000202430358, bullet_pos=(1139.717, 2075.722)
[02:58:30] [INFO] [Bullet] Using shooter_position, distance=1066.66723632813
[02:58:30] [INFO] [Bullet] Distance to wall: 1066.66723632813 (72.6313335496753% of viewport)
[02:58:30] [INFO] [LastChance] Threat detected: @Area2D@2834
[02:58:30] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:58:30] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:58:30] [ENEMY] [Enemy6] Player distracted - priority attack triggered
[02:58:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1891.801, 568.7726), source=ENEMY (Enemy6), range=1469, listeners=10
[02:58:30] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=6
[02:58:30] [INFO] [LastChance] Threat detected: @Area2D@2826
[02:58:30] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:58:30] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:58:30] [ENEMY] [Enemy7] State: COMBAT -> RETREATING
[02:58:30] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[02:58:30] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1556.126, 1173.691), source=ENEMY (Enemy7), range=1469, listeners=10
[02:58:30] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=1, self=1, below_threshold=7
[02:58:30] [INFO] [LastChance] Threat detected: Bullet
[02:58:30] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:58:30] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:58:30] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1913.809, 540.8182), shooter_id=2999917217779, bullet_pos=(1487.044, 1408.181)
[02:58:30] [INFO] [Bullet] Using shooter_position, distance=966.668029785156
[02:58:30] [INFO] [Bullet] Distance to wall: 966.668029785156 (65.8222036938381% of viewport)
[02:58:31] [ENEMY] [Enemy5] State: COMBAT -> PURSUING
[02:58:31] [ENEMY] [Enemy6] Player distracted - priority attack triggered
[02:58:31] [INFO] [SoundPropagation] Sound emitted: type=GUNSHOT, pos=(1876.763, 599.415), source=ENEMY (Enemy6), range=1469, listeners=10
[02:58:31] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=2, self=1, below_threshold=6
[02:58:31] [INFO] [LastChance] Threat detected: @Area2D@2841
[02:58:31] [INFO] [LastChance] Player health is 0.0 - effect requires exactly 1 HP or less but alive
[02:58:31] [INFO] [LastChance] Cannot trigger effect - conditions not met
[02:58:31] [ENEMY] [Enemy7] Player distracted - priority attack triggered
[02:58:31] [ENEMY] [Enemy10] Threw frag grenade: target=(1346.583, 1672.129), deviation=3.8°, distance=247
[02:58:31] [INFO] [GrenadeBase] CCD enabled (mode: CAST_RAY) to prevent wall tunneling
[02:58:31] [INFO] [GrenadeBase] Grenade created at (1129.611, 1658.561) (frozen)
[02:58:31] [INFO] [FragGrenade] Shrapnel scene loaded from: res://scenes/projectiles/Shrapnel.tscn
[02:58:31] [INFO] [GrenadeBase] LEGACY throw_grenade() called! Direction: (0.990431, 0.138011), Speed: 247.3 (unfrozen)
[02:58:31] [INFO] [GrenadeBase] NOTE: Using DRAG-BASED system. If velocity-based is expected, ensure grenade has throw_grenade_velocity_based() method.
[02:58:31] [INFO] [FragGrenade] Grenade thrown (legacy) - impact detection enabled
[02:58:31] [INFO] [FragGrenade] Pin pulled - waiting for impact (no timer, impact-triggered only)
[02:58:31] [ENEMY] [Enemy10] State: THROWING_GRENADE -> SEEKING_COVER
[02:58:31] [INFO] [GrenadeBase] Collision detected with Enemy10 (type: CharacterBody2D)
[02:58:31] [ENEMY] [Enemy10] State: SEEKING_COVER -> IN_COVER
[02:58:31] [INFO] [GrenadeBase] Collision detected with HallTable (type: StaticBody2D)
[02:58:31] [INFO] [FragGrenade] Impact detected! Body: HallTable (type: StaticBody2D), triggering explosion
[02:58:31] [INFO] [FragGrenade] Impact detected - exploding immediately!
[02:58:31] [INFO] [GrenadeBase] EXPLODED at (1131.408, 1659.487)!
[02:58:31] [INFO] [SoundPropagation] Sound emitted: type=EXPLOSION, pos=(1131.408, 1659.487), source=NEUTRAL (FragGrenade), range=2937, listeners=10
[02:58:31] [INFO] [SoundPropagation] Sound result: notified=1, out_of_range=0, self=0, below_threshold=9
[02:58:31] [ENEMY] [Enemy10] Hit taken, health: 0/2
[02:58:31] [ENEMY] [Enemy10] Enemy died (ricochet: false, penetration: false)
[02:58:31] [INFO] [ScoreManager] Kill registered. Combo: 1 (points: 500)
[02:58:31] [INFO] [SoundPropagation] Unregistered listener: Enemy10 (remaining: 9)
[02:58:31] [INFO] [DeathAnim] Started - Angle: -170.9 deg, Index: 0
[02:58:31] [ENEMY] [Enemy10] Death animation started with hit direction: (-0.987318, -0.158754)
[02:58:31] [INFO] [FragGrenade] Applied 99 HE damage to enemy at distance 31.9
[02:58:31] [INFO] [FragGrenade] Spawned shrapnel #1 at angle 15.2 degrees
[02:58:31] [INFO] [FragGrenade] Spawned shrapnel #2 at angle 91.7 degrees
[02:58:31] [INFO] [FragGrenade] Spawned shrapnel #3 at angle 171.2 degrees
[02:58:31] [INFO] [FragGrenade] Spawned shrapnel #4 at angle 255.5 degrees
[02:58:31] [INFO] [GrenadeBase] Collision detected with Enemy10 (type: CharacterBody2D)
[02:58:31] [ENEMY] [Enemy6] Player distracted - priority attack triggered
[02:58:31] [ENEMY] [Enemy8] State: COMBAT -> PURSUING
[02:58:31] [INFO] [GrenadeBase] Collision detected with HallTable (type: StaticBody2D)
[02:58:31] [ENEMY] [Enemy7] Hit taken, health: 2/3
[02:58:31] [INFO] [Bullet] _get_distance_to_shooter: shooter_position=(1913.809, 540.8182), shooter_id=2999917217779, bullet_pos=(1296.198, 1022.852)
[02:58:31] [INFO] [Bullet] Using shooter_position, distance=783.453857421875
[02:58:31] [INFO] [Bullet] Distance to wall: 783.453857421875 (53.3468137964665% of viewport)
[02:58:31] [ENEMY] [Enemy7] State: RETREATING -> IN_COVER
[02:58:31] [ENEMY] [Enemy7] State: IN_COVER -> SUPPRESSED
[02:58:31] [ENEMY] [Enemy6] Player distracted - priority attack triggered
[02:58:31] [INFO] [PenultimateHit] Resetting all effects (scene change detected)
[02:58:31] [INFO] [LastChance] Resetting all effects (scene change detected)
[02:58:31] [ENEMY] [Enemy1] Death animation component initialized
[02:58:31] [ENEMY] [Enemy2] Death animation component initialized
[02:58:31] [ENEMY] [Enemy3] Death animation component initialized
[02:58:31] [ENEMY] [Enemy4] Death animation component initialized
[02:58:31] [ENEMY] [Enemy5] Death animation component initialized
[02:58:31] [ENEMY] [Enemy6] Death animation component initialized
[02:58:31] [ENEMY] [Enemy7] Death animation component initialized
[02:58:31] [ENEMY] [Enemy8] Death animation component initialized
[02:58:31] [ENEMY] [Enemy9] Death animation component initialized
[02:58:31] [ENEMY] [Enemy10] Death animation component initialized
[02:58:31] [INFO] [Player.Grenade] Grenade scene loaded from GrenadeManager: Flashbang
[02:58:31] [INFO] [Player.Grenade] Normal level - starting with 1 grenade
[02:58:31] [INFO] [Player.Init] Body sprite found at position: (-4, 0)
[02:58:31] [INFO] [Player.Init] Head sprite found at position: (-6, -2)
[02:58:31] [INFO] [Player.Init] Left arm sprite found at position: (24, 6)
[02:58:31] [INFO] [Player.Init] Right arm sprite found at position: (-2, 6)
[02:58:31] [INFO] [Player.Debug] Connected to GameManager, debug mode: True
[02:58:31] [INFO] [Player] Ready! Ammo: 30/30, Grenades: 1/3, Health: 4/4
[02:58:31] [INFO] [Player.Grenade] Throwing system: VELOCITY-BASED (v2.0 - mouse velocity at release)
[02:58:31] [ENEMY] [Enemy10] Grenade system configured: offensive=2, flashbangs=0
[02:58:31] [INFO] [ScoreManager] Level started with 10 enemies
[02:58:31] [INFO] [SoundPropagation] Registered listener: Enemy1 (total: 10)
[02:58:31] [ENEMY] [Enemy1] Registered as sound listener
[02:58:31] [ENEMY] [Enemy1] Enemy spawned at (300, 350), health: 2, behavior: GUARD, player_found: yes
[02:58:31] [INFO] [SoundPropagation] Registered listener: Enemy2 (total: 11)
[02:58:31] [ENEMY] [Enemy2] Registered as sound listener
[02:58:31] [ENEMY] [Enemy2] Enemy spawned at (400, 550), health: 4, behavior: GUARD, player_found: yes
[02:58:31] [INFO] [SoundPropagation] Registered listener: Enemy3 (total: 12)
[02:58:31] [ENEMY] [Enemy3] Registered as sound listener
[02:58:31] [ENEMY] [Enemy3] Enemy spawned at (700, 750), health: 2, behavior: GUARD, player_found: yes
[02:58:31] [INFO] [SoundPropagation] Registered listener: Enemy4 (total: 13)
[02:58:31] [ENEMY] [Enemy4] Registered as sound listener
[02:58:31] [ENEMY] [Enemy4] Enemy spawned at (800, 900), health: 4, behavior: GUARD, player_found: yes
[02:58:31] [INFO] [SoundPropagation] Registered listener: Enemy5 (total: 14)
[02:58:31] [ENEMY] [Enemy5] Registered as sound listener
[02:58:31] [ENEMY] [Enemy5] Enemy spawned at (1700, 350), health: 2, behavior: GUARD, player_found: yes
[02:58:31] [INFO] [SoundPropagation] Registered listener: Enemy6 (total: 15)
[02:58:31] [ENEMY] [Enemy6] Registered as sound listener
[02:58:31] [ENEMY] [Enemy6] Enemy spawned at (1950, 450), health: 3, behavior: GUARD, player_found: yes
[02:58:31] [INFO] [SoundPropagation] Registered listener: Enemy7 (total: 16)
[02:58:31] [ENEMY] [Enemy7] Registered as sound listener
[02:58:31] [ENEMY] [Enemy7] Enemy spawned at (1600, 900), health: 3, behavior: PATROL, player_found: yes
[02:58:31] [INFO] [SoundPropagation] Registered listener: Enemy8 (total: 17)
[02:58:31] [ENEMY] [Enemy8] Registered as sound listener
[02:58:31] [ENEMY] [Enemy8] Enemy spawned at (1900, 1450), health: 2, behavior: GUARD, player_found: yes
[02:58:31] [INFO] [SoundPropagation] Registered listener: Enemy9 (total: 18)
[02:58:31] [ENEMY] [Enemy9] Registered as sound listener
[02:58:31] [ENEMY] [Enemy9] Enemy spawned at (2100, 1550), health: 2, behavior: GUARD, player_found: yes
[02:58:31] [INFO] [SoundPropagation] Registered listener: Enemy10 (total: 19)
[02:58:31] [ENEMY] [Enemy10] Registered as sound listener
[02:58:31] [ENEMY] [Enemy10] Enemy spawned at (1200, 1550), health: 4, behavior: PATROL, player_found: yes
[02:58:31] [INFO] [Player] Detecting weapon pose (frame 3)...
[02:58:31] [INFO] [Player] Detected weapon: Rifle (default pose)
[02:58:31] [INFO] [Player] Applied Rifle arm pose: Left=(24, 6), Right=(-2, 6)
[02:58:31] [INFO] [PenultimateHit] Found player: Player (class: CharacterBody2D)
[02:58:31] [INFO] [PenultimateHit] Connected to player Damaged signal (C#)
[02:58:31] [INFO] [PenultimateHit] Connected to player Died signal (C#)
[02:58:31] [INFO] [LastChance] Found player: Player
[02:58:31] [INFO] [LastChance] Connected to ThreatSphere threat_detected signal
[02:58:31] [INFO] [LastChance] Connected to player Damaged signal (C#)
[02:58:31] [INFO] [LastChance] Connected to player Died signal (C#)
[02:58:33] [INFO] ------------------------------------------------------------
[02:58:33] [INFO] GAME LOG ENDED: 2026-01-24T02:58:33
[02:58:33] [INFO] ============================================================
